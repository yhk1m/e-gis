const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/raw-in9isEBO.js","assets/basedecoder-B2c5_Eok.js","assets/lzw-_aCqfs4w.js","assets/jpeg-JhJy4lL1.js","assets/deflate-Dthki0TA.js","assets/pako.esm-BkaqWuDM.js","assets/packbits-DDWKfGV_.js","assets/lerc-BLb85pLQ.js","assets/webimage-DBgUwIbt.js"])))=>i.map(i=>d[i]);
var Hq=Object.defineProperty;var zq=(r,e,t)=>e in r?Hq(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var yr=(r,e,t)=>zq(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();const bT="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iX+ugiOydtOyWtF8yIiBkYXRhLW5hbWU9IuugiOydtOyWtCAyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OTIgNTkyIj4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmNscy0xLCAuY2xzLTIgewogICAgICAgIGZpbGw6ICNlNjAwMTI7CiAgICAgIH0KCiAgICAgIC5jbHMtMywgLmNscy00IHsKICAgICAgICBmaWxsOiAjZmZmOwogICAgICB9CgogICAgICAuY2xzLTUgewogICAgICAgIGZpbGw6ICM0Y2FmNTA7CiAgICAgIH0KCiAgICAgIC5jbHMtNSwgLmNscy02LCAuY2xzLTIsIC5jbHMtNCwgLmNscy03IHsKICAgICAgICBzdHJva2UtbWl0ZXJsaW1pdDogMTA7CiAgICAgIH0KCiAgICAgIC5jbHMtNSwgLmNscy0yLCAuY2xzLTQsIC5jbHMtNyB7CiAgICAgICAgc3Ryb2tlOiAjZmZmOwogICAgICAgIHN0cm9rZS13aWR0aDogODBweDsKICAgICAgfQoKICAgICAgLmNscy02IHsKICAgICAgICBzdHJva2U6ICM4NDg3ODQ7CiAgICAgICAgc3Ryb2tlLXdpZHRoOiA1cHg7CiAgICAgIH0KCiAgICAgIC5jbHMtNiwgLmNscy03IHsKICAgICAgICBmaWxsOiBub25lOwogICAgICAgIHN0cm9rZS1saW5lY2FwOiByb3VuZDsKICAgICAgfQoKICAgICAgLmNscy04IHsKICAgICAgICBmaWxsOiAjMDZjOwogICAgICB9CiAgICA8L3N0eWxlPgogIDwvZGVmcz4KICA8ZyBpZD0iX+ugiOydtOyWtF8xLTIiIGRhdGEtbmFtZT0i66CI7J207Ja0IDEiPgogICAgPGc+CiAgICAgIDxwYXRoIGNsYXNzPSJjbHMtNSIgZD0iTTU1MiwyOTZjMCwxNDEuMzgtMTE0LjYyLDI1Ni0yNTYsMjU2UzQwLDQzNy4zOSw0MCwyOTYsMTU0LjYyLDQwLDI5Niw0MGM0LjM1LDAsMTAuMTYtLjAzLDE3LjM5LjU4LDk5LjU2LDguNDEsMjM4LjYxLDEwMy4wMSwyMzguNjEsMjU1LjQyWiIvPgogICAgICA8cGF0aCBjbGFzcz0iY2xzLTciIGQ9Ik03OS40MSwxNjQuODZjMTMuNzIsMzAuNjMsNTEuOTgsMTAzLjUsMTMzLjIsMTUxLjksMTQ3LjMzLDg3LjgsMzExLjYxLDMxLjMyLDMyOS44NSwyNC43MyIvPgogICAgICA8cGF0aCBjbGFzcz0iY2xzLTciIGQ9Ik0xODUuMDYsNjYuNjNjMTEuMywyOS45NCw0Mi43NywxMDEuNTcsMTA0Ljk0LDE0Ni4wMywxMTIuNzgsODAuNjUsMjMzLjAzLDE2LjM5LDI0Ni4zNyw4LjkzIi8+CiAgICAgIDxwYXRoIGNsYXNzPSJjbHMtNyIgZD0iTTQyLjM0LDMwMy4yNmMxNC4wOCwzMi4yOCw1NC41NiwxMDcuNDUsMTMyLDE1NS4zOSwxNDAuNDgsODYuOTcsMjkwLjI2LDE3LjY3LDMwNi44OCw5LjYzIi8+CiAgICAgIDxwYXRoIGNsYXNzPSJjbHMtNyIgZD0iTTMxNS43OCw0Ni4xOGMtMjUuODQsNy41My0xMjQuMzIsMzkuNC0xODguMDksMTM3LjMzLTc0LjQyLDExNC4yOC00Mi42OCwyNDAuMjctMzcuMTYsMjYwLjYyIi8+CiAgICAgIDxwYXRoIGNsYXNzPSJjbHMtNyIgZD0iTTMyNi41MSw0Ni4xOGMxOS43NCwzMC45NCw4My40MSwxMzkuMDEsNjguOTMsMjg2LjAxLTEwLjU5LDEwNy41Mi01OS42NCwxODMuNzctODMuMTEsMjE2LjM1Ii8+CiAgICAgIDxwYXRoIGNsYXNzPSJjbHMtNyIgZD0iTTMyNi41MSw0Ni4xOGM4LjA4LDMuNjgsMTcxLjY4LDgxLjQyLDE4Mi4yLDI0My42NSw5LjIxLDE0MS45NC0xMDYuNDIsMjMwLjYzLTExOS42MywyNDAuNDIiLz4KICAgICAgPHBhdGggY2xhc3M9ImNscy03IiBkPSJNMzIwLjM3LDQ0LjM5Yy0yOS4yMSwyMy41NS04Mi4zNyw3OC45Ny0xMTcuOTQsMTQ1Ljc5LTQ2LjM2LDg3LjA4LTUwLjI3LDE2Ni42Ny01MC41NSwxOTYuMDgtLjQ3LDQ5LjAzLDEzLjkyLDEwNC4yMywyMS40NSwxMzEuMzkiLz4KICAgICAgPHBhdGggY2xhc3M9ImNscy03IiBkPSJNMzIxLjkxLDQ0LjY0Yy02LjAyLDgxLjE5LTE4LjA2LDE5My4wMy0zNS4yMywyODcuOTktMTMuMzEsNzMuNTYtMzAuNTgsMTQ4LjIzLTQ3LjQ5LDIxMS40Ii8+CiAgICAgIDxwYXRoIGNsYXNzPSJjbHMtNCIgZD0iTTMwOC41MywzMjMuNDhjLTIzLjE0LDAtNDMuNzEtMS4xMS02MS43LTMuMzctMTgtMi4yNC0zMy4xMS01LjYyLTQ1LjMxLTEwLjEyLDAsMTUuNDIsMi4yNCwyOS40LDYuNzUsNDEuOTQsNC40OSwxMi41MywxMS41NywyMi45OSwyMS4yMSwzMS4zMyw5LjY0LDkuNjQsMjAuNTYsMTYuMzksMzIuNzgsMjAuMjQsMTIuMiwzLjg2LDI2LjAzLDUuNzgsNDEuNDUsNS43OCwxMC45MiwwLDIzLjI5LS44LDM3LjEyLTIuNDEsMTMuODEtMS42LDI4Ljc2LTQuOTcsNDQuODMtMTAuMTIsOC45OS0yLjU2LDE2LjIyLTIuNTYsMjEuNjksMCw1LjQ1LDIuNTgsOS40Nyw3LjQsMTIuMDUsMTQuNDYsMS45Myw5LjAxLjYzLDE2LjM5LTMuODYsMjIuMTctNC41LDUuNzgtMTEuNTcsMTAuMjktMjEuMjEsMTMuNS0xMy41LDUuMTUtMjcuODEsOC42OC00Mi45LDEwLjYtMTUuMTEsMS45My0zMS4wMSwyLjg5LTQ3LjcyLDIuODktMjUuMDYsMC00Ny4yNC0zLjM3LTY2LjUyLTEwLjEycy0zNS4zNS0xNy41LTQ4LjItMzIuMjljLTE0LjE0LTEzLjUtMjQuNTgtMjkuNzItMzEuMzMtNDguNjgtNi43NS0xOC45NS0xMC4xMi00MC4wMS0xMC4xMi02My4xNCwwLTI1LjA2LDMuNjktNDguMDQsMTEuMDktNjguOTMsNy4zOC0yMC44OCwxOC44LTM5LjY4LDM0LjIyLTU2LjQsMTQuMTMtMTUuNDIsMzIuMjktMjcuNDgsNTQuNDctMzYuMTUsMjIuMTctOC42OCw0OC4wNC0xMy4wMSw3Ny42LTEzLjAxLDE3LjM1LDAsMzMuMDksMi43NCw0Ny4yNCw4LjE5LDE0LjEzLDUuNDcsMjYuOTksMTIuMzgsMzguNTYsMjAuNzMsMTAuMjcsOS42NCwxOC40NywyMC4wOSwyNC41OCwzMS4zMyw2LjEsMTEuMjUsOS4xNiwyMi45OSw5LjE2LDM1LjE5LDAsMTYuMDctMy4wNiwzMC4wNS05LjE2LDQxLjk0LTYuMTIsMTEuOS0xNC45NCwyMS42OS0yNi41MSwyOS40LTExLjU3LDguMzYtMjUuNzEsMTQuNjMtNDIuNDIsMTguOC0xNi43Miw0LjE5LTM2LDYuMjctNTcuODQsNi4yN1pNMjA4LjI3LDI1OC44OWMxMi44NSw1LjE1LDI4LjQ0LDguODQsNDYuNzYsMTEuMDksMTguMzIsMi4yNiwzOC43MSwzLjM3LDYxLjIyLDMuMzcsMTEuNTcsMCwyMS44NC0uNjMsMzAuODUtMS45Myw4Ljk5LTEuMjgsMTcuMDItMy44NiwyNC4xLTcuNzEsNi40Mi0yLjU2LDExLjI0LTYuOSwxNC40Ni0xMy4wMSwzLjIxLTYuMSw0LjgyLTEzLjk4LDQuODItMjMuNjIsMC00LjQ5LTEuMy05LjMxLTMuODYtMTQuNDYtMi41OC01LjE0LTYuMTItMTAuMjctMTAuNi0xNS40Mi01Ljc4LTQuNDktMTIuODYtOC4wMy0yMS4yMS0xMC42LTguMzYtMi41Ni0xOC4zMi0zLjg2LTI5Ljg5LTMuODYtMjAuNTgsMC0zOC40MSwyLjg5LTUzLjUsOC42OC0xNS4xMSw1Ljc4LTI3LjgxLDE0LjE0LTM4LjA4LDI1LjA2LTUuNzgsNi40My0xMC45NCwxMy4xOC0xNS40MiwyMC4yNC00LjUsNy4wOC03LjcxLDE0LjQ2LTkuNjQsMjIuMTdaIi8+CiAgICAgIDxnPgogICAgICAgIDxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTU1MiwxMTVjMC00MS40Mi0zMy41OC03NS03NS03NS0uMDMsMC0uMDUsMC0uMDgsMC0uMDMsMC0uMDUsMC0uMDgsMC00MS40MiwwLTc1LDMzLjU4LTc1LDc1czYwLjI5LDE3MS40Niw3NSwyMDEuMDhjLjAyLjA0LjA0LjA4LjA2LjEydi4wNnMuMDEtLjAyLjAyLS4wM2MwLC4wMS4wMS4wMi4wMi4wM3YtLjA2cy4wNC0uMDguMDYtLjEyYzE0LjcxLTI5LjYyLDc1LTE1OS42NSw3NS0yMDEuMDhaIi8+CiAgICAgICAgPGNpcmNsZSBjbGFzcz0iY2xzLTQiIGN4PSI0NzYuOTIiIGN5PSIxMTQuNDIiIHI9IjQ0LjUiLz4KICAgICAgPC9nPgogICAgICA8cGF0aCBjbGFzcz0iY2xzLTgiIGQ9Ik01NTIsMjk2YzAsMTQxLjM4LTExNC42MiwyNTYtMjU2LDI1NlM0MCw0MzcuMzksNDAsMjk2LDE1NC42Miw0MCwyOTYsNDBjNC4zNSwwLDEwLjE2LS4wMywxNy4zOS41OCw5OS41Niw4LjQxLDIzOC42MSwxMDMuMDEsMjM4LjYxLDI1NS40MloiLz4KICAgICAgPHBhdGggY2xhc3M9ImNscy02IiBkPSJNNzkuNDEsMTY0Ljg2YzEzLjcyLDMwLjYzLDUxLjk4LDEwMy41LDEzMy4yLDE1MS45LDE0Ny4zMyw4Ny44LDMxMS42MSwzMS4zMiwzMjkuODUsMjQuNzMiLz4KICAgICAgPHBhdGggY2xhc3M9ImNscy02IiBkPSJNMTg1LjA2LDY2LjYzYzExLjMsMjkuOTQsNDIuNzcsMTAxLjU3LDEwNC45NCwxNDYuMDMsMTEyLjc4LDgwLjY1LDIzMy4wMywxNi4zOSwyNDYuMzcsOC45MyIvPgogICAgICA8cGF0aCBjbGFzcz0iY2xzLTYiIGQ9Ik00Mi4zNCwzMDMuMjZjMTQuMDgsMzIuMjgsNTQuNTYsMTA3LjQ1LDEzMiwxNTUuMzksMTQwLjQ4LDg2Ljk3LDI5MC4yNiwxNy42NywzMDYuODgsOS42MyIvPgogICAgICA8cGF0aCBjbGFzcz0iY2xzLTYiIGQ9Ik0zMTUuNzgsNDYuMThjLTI1Ljg0LDcuNTMtMTI0LjMyLDM5LjQtMTg4LjA5LDEzNy4zMy03NC40MiwxMTQuMjgtNDIuNjgsMjQwLjI3LTM3LjE2LDI2MC42MiIvPgogICAgICA8cGF0aCBjbGFzcz0iY2xzLTYiIGQ9Ik0zMjYuNTEsNDYuMThjMTkuNzQsMzAuOTQsODMuNDEsMTM5LjAxLDY4LjkzLDI4Ni4wMS0xMC41OSwxMDcuNTItNTkuNjQsMTgzLjc3LTgzLjExLDIxNi4zNSIvPgogICAgICA8cGF0aCBjbGFzcz0iY2xzLTYiIGQ9Ik0zMjYuNTEsNDYuMThjOC4wOCwzLjY4LDE3MS42OCw4MS40MiwxODIuMiwyNDMuNjUsOS4yMSwxNDEuOTQtMTA2LjQyLDIzMC42My0xMTkuNjMsMjQwLjQyIi8+CiAgICAgIDxwYXRoIGNsYXNzPSJjbHMtNiIgZD0iTTMyMC4zNyw0NC4zOWMtMjkuMjEsMjMuNTUtODIuMzcsNzguOTctMTE3Ljk0LDE0NS43OS00Ni4zNiw4Ny4wOC01MC4yNywxNjYuNjctNTAuNTUsMTk2LjA4LS40Nyw0OS4wMywxMy45MiwxMDQuMjMsMjEuNDUsMTMxLjM5Ii8+CiAgICAgIDxwYXRoIGNsYXNzPSJjbHMtNiIgZD0iTTMyMS45MSw0NC42NGMtNi4wMiw4MS4xOS0xOC4wNiwxOTMuMDMtMzUuMjMsMjg3Ljk5LTEzLjMxLDczLjU2LTMwLjU4LDE0OC4yMy00Ny40OSwyMTEuNCIvPgogICAgICA8cGF0aCBjbGFzcz0iY2xzLTMiIGQ9Ik0zMDguNTMsMzIzLjQ4Yy0yMy4xNCwwLTQzLjcxLTEuMTEtNjEuNy0zLjM3LTE4LTIuMjQtMzMuMTEtNS42Mi00NS4zMS0xMC4xMiwwLDE1LjQyLDIuMjQsMjkuNCw2Ljc1LDQxLjk0LDQuNDksMTIuNTMsMTEuNTcsMjIuOTksMjEuMjEsMzEuMzMsOS42NCw5LjY0LDIwLjU2LDE2LjM5LDMyLjc4LDIwLjI0LDEyLjIsMy44NiwyNi4wMyw1Ljc4LDQxLjQ1LDUuNzgsMTAuOTIsMCwyMy4yOS0uOCwzNy4xMi0yLjQxLDEzLjgxLTEuNiwyOC43Ni00Ljk3LDQ0LjgzLTEwLjEyLDguOTktMi41NiwxNi4yMi0yLjU2LDIxLjY5LDAsNS40NSwyLjU4LDkuNDcsNy40LDEyLjA1LDE0LjQ2LDEuOTMsOS4wMS42MywxNi4zOS0zLjg2LDIyLjE3LTQuNSw1Ljc4LTExLjU3LDEwLjI5LTIxLjIxLDEzLjUtMTMuNSw1LjE1LTI3LjgxLDguNjgtNDIuOSwxMC42LTE1LjExLDEuOTMtMzEuMDEsMi44OS00Ny43MiwyLjg5LTI1LjA2LDAtNDcuMjQtMy4zNy02Ni41Mi0xMC4xMnMtMzUuMzUtMTcuNS00OC4yLTMyLjI5Yy0xNC4xNC0xMy41LTI0LjU4LTI5LjcyLTMxLjMzLTQ4LjY4LTYuNzUtMTguOTUtMTAuMTItNDAuMDEtMTAuMTItNjMuMTQsMC0yNS4wNiwzLjY5LTQ4LjA0LDExLjA5LTY4LjkzLDcuMzgtMjAuODgsMTguOC0zOS42OCwzNC4yMi01Ni40LDE0LjEzLTE1LjQyLDMyLjI5LTI3LjQ4LDU0LjQ3LTM2LjE1LDIyLjE3LTguNjgsNDguMDQtMTMuMDEsNzcuNi0xMy4wMSwxNy4zNSwwLDMzLjA5LDIuNzQsNDcuMjQsOC4xOSwxNC4xMyw1LjQ3LDI2Ljk5LDEyLjM4LDM4LjU2LDIwLjczLDEwLjI3LDkuNjQsMTguNDcsMjAuMDksMjQuNTgsMzEuMzMsNi4xLDExLjI1LDkuMTYsMjIuOTksOS4xNiwzNS4xOSwwLDE2LjA3LTMuMDYsMzAuMDUtOS4xNiw0MS45NC02LjEyLDExLjktMTQuOTQsMjEuNjktMjYuNTEsMjkuNC0xMS41Nyw4LjM2LTI1LjcxLDE0LjYzLTQyLjQyLDE4LjgtMTYuNzIsNC4xOS0zNiw2LjI3LTU3Ljg0LDYuMjdaTTIwOC4yNywyNTguODljMTIuODUsNS4xNSwyOC40NCw4Ljg0LDQ2Ljc2LDExLjA5LDE4LjMyLDIuMjYsMzguNzEsMy4zNyw2MS4yMiwzLjM3LDExLjU3LDAsMjEuODQtLjYzLDMwLjg1LTEuOTMsOC45OS0xLjI4LDE3LjAyLTMuODYsMjQuMS03LjcxLDYuNDItMi41NiwxMS4yNC02LjksMTQuNDYtMTMuMDEsMy4yMS02LjEsNC44Mi0xMy45OCw0LjgyLTIzLjYyLDAtNC40OS0xLjMtOS4zMS0zLjg2LTE0LjQ2LTIuNTgtNS4xNC02LjEyLTEwLjI3LTEwLjYtMTUuNDItNS43OC00LjQ5LTEyLjg2LTguMDMtMjEuMjEtMTAuNi04LjM2LTIuNTYtMTguMzItMy44Ni0yOS44OS0zLjg2LTIwLjU4LDAtMzguNDEsMi44OS01My41LDguNjgtMTUuMTEsNS43OC0yNy44MSwxNC4xNC0zOC4wOCwyNS4wNi01Ljc4LDYuNDMtMTAuOTQsMTMuMTgtMTUuNDIsMjAuMjQtNC41LDcuMDgtNy43MSwxNC40Ni05LjY0LDIyLjE3WiIvPgogICAgICA8cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik01NTIsMTE1YzAtNDEuNDItMzMuNTgtNzUtNzUtNzUtLjAzLDAtLjA1LDAtLjA4LDAtLjAzLDAtLjA1LDAtLjA4LDAtNDEuNDIsMC03NSwzMy41OC03NSw3NXM2MC4yOSwxNzEuNDYsNzUsMjAxLjA4Yy4wMi4wNC4wNC4wOC4wNi4xMnYuMDZzLjAxLS4wMi4wMi0uMDNjMCwuMDEuMDEuMDIuMDIuMDN2LS4wNnMuMDQtLjA4LjA2LS4xMmMxNC43MS0yOS42Miw3NS0xNTkuNjUsNzUtMjAxLjA4WiIvPgogICAgICA8Y2lyY2xlIGNsYXNzPSJjbHMtMyIgY3g9IjQ3Ni45MiIgY3k9IjExNC40MiIgcj0iNDQuNSIvPgogICAgPC9nPgogIDwvZz4KPC9zdmc+";class qq{constructor(e="app"){this.container=document.getElementById(e)}render(){this.container.innerHTML=`
      <!-- 메뉴바 -->
      <header id="menubar">
        <div class="menu-left">
          <div class="app-logo">
            <span class="logo-text">e-GIS</span>
          </div>
        </div>
        <div class="menu-center">
          <div class="menu-items">
            <div class="menu-item dropdown" data-menu="project">
              <button class="menu-button">프로젝트</button>
              <div class="dropdown-menu" id="menu-project">
                <div class="dropdown-item" data-action="project-new">새 프로젝트</div>
                <div class="dropdown-divider"></div>
                <div class="dropdown-item" data-action="project-open">열기...</div>
                <div class="dropdown-item" data-action="project-save">저장</div>
                <div class="dropdown-divider"></div>
                <div class="dropdown-item submenu-label">최근 파일</div>
                <div class="recent-files-list" id="recent-files-list">
                  <div class="dropdown-item disabled">최근 파일 없음</div>
                </div>
                <div class="dropdown-divider"></div>
                <div class="dropdown-item" data-action="project-export">지도 내보내기</div>
              </div>
            </div>
            <div class="menu-item dropdown" data-menu="edit">
              <button class="menu-button">편집</button>
              <div class="dropdown-menu" id="menu-edit">
                <div class="dropdown-item" data-action="edit-delete">선택 피처 삭제</div>
                <div class="dropdown-item" data-action="edit-select-all">모두 선택</div>
                <div class="dropdown-item" data-action="edit-deselect">선택 해제</div>
              </div>
            </div>
            <div class="menu-item dropdown" data-menu="view">
              <button class="menu-button">보기</button>
              <div class="dropdown-menu" id="menu-view">
                <div class="dropdown-item" data-action="view-zoom-in">확대</div>
                <div class="dropdown-item" data-action="view-zoom-out">축소</div>
                <div class="dropdown-item" data-action="view-full-extent">전체 범위</div>
                <div class="dropdown-divider"></div>
                <div class="dropdown-item" data-action="view-zoom-layer">선택 레이어로 이동</div>
                <div class="dropdown-divider"></div>
                <div class="dropdown-item" data-action="view-toggle-panel">패널 표시/숨기기</div>
                <div class="dropdown-divider"></div>
                <div class="dropdown-item" data-action="view-bookmarks">북마크 관리</div>
              </div>
            </div>
            <div class="menu-item dropdown" data-menu="layer">
              <button class="menu-button">레이어</button>
              <div class="dropdown-menu" id="menu-layer">
                <div class="dropdown-item" data-action="layer-from-coords">좌표 데이터 가져오기</div>
                <div class="dropdown-item" data-action="layer-remove">레이어 삭제</div>
                <div class="dropdown-item" data-action="layer-rename">이름 변경</div>
                <div class="dropdown-divider"></div>
                <div class="dropdown-item" data-action="layer-attribute-table">속성 테이블</div>
                <div class="dropdown-item" data-action="layer-table-join">테이블 결합</div>
                <div class="dropdown-item" data-action="layer-label">라벨 설정</div>
                <div class="dropdown-item" data-action="layer-field-calculator">필드 계산기</div>
                <div class="dropdown-divider"></div>
                <div class="dropdown-item" data-action="layer-export">레이어 내보내기</div>
                <div class="dropdown-divider"></div>
                <div class="dropdown-item" data-action="layer-clear-all">모든 레이어 삭제</div>
              </div>
            </div>
            <div class="menu-item dropdown" data-menu="measure">
              <button class="menu-button">측정</button>
              <div class="dropdown-menu" id="menu-measure">
                <div class="dropdown-item" data-action="analysis-measure-distance">거리 측정</div>
                <div class="dropdown-item" data-action="analysis-measure-area">면적 측정</div>
                <div class="dropdown-divider"></div>
                <div class="dropdown-item" data-action="analysis-clear-measures">측정 결과 지우기</div>
              </div>
            </div>
            <div class="menu-item dropdown" data-menu="vector-analysis">
              <button class="menu-button">벡터 분석</button>
              <div class="dropdown-menu" id="menu-vector-analysis">
                <div class="dropdown-item" data-action="analysis-choropleth">단계구분도</div>
                <div class="dropdown-item" data-action="analysis-chart-map">도형표현도</div>
                <div class="dropdown-item" data-action="analysis-heatmap">히트맵</div>
                <div class="dropdown-item" data-action="analysis-cartogram">카토그램</div>
                <div class="dropdown-divider"></div>
                <div class="dropdown-item" data-action="analysis-buffer">버퍼 분석</div>
                <div class="dropdown-item" data-action="analysis-spatial-ops">공간 연산</div>
                <div class="dropdown-divider"></div>
                <div class="dropdown-item" data-action="analysis-isochrone">등시선 분석</div>
                <div class="dropdown-item" data-action="analysis-routing">최단경로 분석</div>
              </div>
            </div>
            <div class="menu-item disabled" data-menu="raster-analysis" title="준비중입니다.">
              <button class="menu-button" data-action="raster-coming-soon">래스터 분석</button>
            </div>
            <button class="btn-help" id="btn-help" title="사용 설명서">❓</button>
          </div>
        </div>
        <div class="menu-right">
          <div class="header-auth" id="header-auth">
            <button class="btn btn-sm btn-primary" id="header-login-btn">로그인</button>
          </div>
          <button id="theme-toggle" class="theme-toggle" title="테마 전환">
            <svg class="icon-sun" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="5"></circle>
              <line x1="12" y1="1" x2="12" y2="3"></line>
              <line x1="12" y1="21" x2="12" y2="23"></line>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
              <line x1="1" y1="12" x2="3" y2="12"></line>
              <line x1="21" y1="12" x2="23" y2="12"></line>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
            <svg class="icon-moon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none;">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
          </button>
        </div>
      </header>

      <!-- 툴바 -->
      <div id="toolbar">
        <div class="toolbar-group" data-group="navigation">
          <button class="btn-icon" data-tool="zoom-in" title="확대">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
              <line x1="11" y1="8" x2="11" y2="14"></line>
              <line x1="8" y1="11" x2="14" y2="11"></line>
            </svg>
          </button>
          <button class="btn-icon" data-tool="zoom-out" title="축소">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
              <line x1="8" y1="11" x2="14" y2="11"></line>
            </svg>
          </button>
          <button class="btn-icon" data-tool="zoom-extent" title="전체 범위">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
            </svg>
          </button>
        </div>

        <div class="toolbar-group" data-group="select">
          <button class="btn-icon" data-tool="select" title="선택">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"/>
            </svg>
          </button>
        </div>

        <div class="toolbar-group" data-group="draw">
          <button class="btn-icon" data-tool="draw-point" title="점 그리기">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <circle cx="12" cy="12" r="4"/>
            </svg>
          </button>
          <button class="btn-icon" data-tool="draw-line" title="선 그리기">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="5" y1="19" x2="19" y2="5"/>
              <circle cx="5" cy="19" r="2" fill="currentColor"/>
              <circle cx="19" cy="5" r="2" fill="currentColor"/>
            </svg>
          </button>
          <button class="btn-icon" data-tool="draw-polygon" title="면 그리기">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="12,2 22,8.5 22,15.5 12,22 2,15.5 2,8.5"/>
            </svg>
          </button>
          <button class="btn-icon" data-tool="draw-multipoint" title="멀티포인트 (다시 클릭하면 저장)">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <circle cx="6" cy="12" r="3"/>
              <circle cx="12" cy="6" r="3"/>
              <circle cx="18" cy="14" r="3"/>
            </svg>
          </button>
          <button class="btn-icon" data-tool="draw-multiline" title="멀티라인 (다시 클릭하면 저장)">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M2 8 L8 4 L14 10"/>
              <path d="M10 20 L16 14 L22 18"/>
            </svg>
          </button>
          <button class="btn-icon" data-tool="draw-multipolygon" title="멀티폴리곤 (다시 클릭하면 저장)">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" opacity="0.5" stroke="currentColor" stroke-width="1">
              <rect x="2" y="2" width="9" height="9"/>
              <rect x="13" y="13" width="9" height="9"/>
            </svg>
          </button>
        </div>

        <div class="toolbar-group" data-group="measure">
          <button class="btn-icon" data-tool="measure-distance" title="거리 측정">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M2 12h20M2 12l4-4M2 12l4 4M22 12l-4-4M22 12l-4 4"/>
            </svg>
          </button>
          <button class="btn-icon" data-tool="measure-area" title="면적 측정">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2"/>
              <path d="M3 9h18M9 3v18"/>
            </svg>
          </button>
        </div>

        <div class="toolbar-spacer"></div>

        <!-- 카피라이트 -->
        <span class="toolbar-copyright">ⓒ 2025 충남삼성고등학교 김용현T | cnsageo@cnsa.hs.kr</span>

        <!-- 위치 검색 -->
        <div class="toolbar-search" id="toolbar-search">
          <div class="search-input-wrapper">
            <svg class="search-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input type="text" id="location-search-input" placeholder="장소 검색..." autocomplete="off">
            <button class="search-clear" id="search-clear" title="지우기" style="display:none;">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          </div>
          <div class="search-results" id="search-results" style="display:none;"></div>
        </div>
      </div>

      <!-- 메인 컨테이너 -->
      <div id="main-container">
        <!-- 왼쪽 패널 (탭) -->
        <aside id="left-panel">
          <div class="panel-tabs">
            <button class="panel-tab active" data-tab="layers"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg>레이어</button>
            <button class="panel-tab" data-tab="browser"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>브라우저</button>
          </div>
          <div id="tab-layers" class="tab-content active">
            <div class="panel-header"><span class="panel-header-title">레이어 목록</span><div class="panel-header-actions"><button class="btn-icon btn-small" id="btn-add-layer" title="새 레이어 추가"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></button></div></div>
            <div class="panel-content"><ul id="layer-list" class="layer-list"></ul></div>
          </div>
          <div id="tab-browser" class="tab-content">
            <div class="panel-header"><span class="panel-header-title">파일 업로드</span></div>
            <div class="panel-content">
              <div class="file-drop-zone" id="file-drop-zone">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="margin-bottom:8px;opacity:0.6;"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                <p>파일을 드래그하거나<br>클릭하여 업로드</p>
                <p class="file-types">GeoJSON, Shapefile(ZIP), GPKG, DEM(TIF/IMG)</p>
              </div>
            </div>
          </div>
        </aside>

        <!-- 패널 리사이저 -->
        <div class="panel-resizer" id="panel-resizer"></div>

        <!-- 지도 컨테이너 -->
        <main id="map-container">
          <div id="map"></div>
        </main>
      </div>

      <!-- 상태표시줄 -->
      <footer id="statusbar">
        <div class="statusbar-item coordinates" id="status-coords">
          <span class="coord-label">좌표:</span>
          <span class="coord-value">---, ---</span>
        </div>
        <div class="statusbar-item scale" id="status-scale">
          <span class="scale-label">1:</span>
          <input type="text" class="scale-input" id="scale-input" value="---" title="축척 입력 (Enter로 적용)">
        </div>
        <div class="statusbar-item crs" id="status-crs" title="좌표계 변경">
          <span class="crs-value">EPSG:4326</span>
        </div>
        <div class="statusbar-spacer"></div>
        <div class="statusbar-item">
          <span id="status-message">준비</span>
        </div>
      </footer>
    `,this.addStyles(),this.initResizer(),this.initTabs(),this.setFavicon()}setFavicon(){const e=document.querySelector('link[rel="icon"]');if(e)e.href=bT;else{const t=document.createElement("link");t.rel="icon",t.type="image/svg+xml",t.href=bT,document.head.appendChild(t)}}addStyles(){const e=document.createElement("style");e.textContent=`
      /* 메뉴바 스타일 */
      #menubar {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .app-logo {
        display: flex;
        align-items: center;
        margin-right: var(--spacing-lg);
      }

      .app-logo .logo-image {
        height: 26px;
        width: auto;
      }

      .menu-items {
        display: flex;
        gap: var(--spacing-xs);
      }

      .menu-button {
        padding: var(--spacing-xs) var(--spacing-sm);
        font-size: var(--font-size-sm);
        border-radius: var(--radius-sm);
        transition: background var(--transition-fast);
      }

      .menu-button:hover {
        background: var(--bg-hover);
      }

      /* 테마 아이콘 전환 */
      [data-theme="dark"] .icon-sun {
        display: none !important;
      }
      [data-theme="dark"] .icon-moon {
        display: block !important;
      }
      [data-theme="light"] .icon-sun,
      :root .icon-sun {
        display: block !important;
      }
      [data-theme="light"] .icon-moon,
      :root .icon-moon {
        display: none !important;
      }

      /* 툴바 스타일 */
      .toolbar-spacer {
        flex: 1;
      }

      .toolbar-copyright {
        font-size: 11px;
        color: var(--text-muted);
        margin-right: 12px;
        white-space: nowrap;
      }

      /* 파일 드롭 존 */
      .file-drop-zone {
        border: 2px dashed var(--border-color);
        border-radius: var(--radius-md);
        padding: var(--spacing-lg);
        text-align: center;
        color: var(--text-muted);
        font-size: var(--font-size-sm);
        cursor: pointer;
        transition: all var(--transition-fast);
      }

      .file-drop-zone:hover,
      .file-drop-zone.dragover {
        border-color: var(--color-primary);
        background: var(--color-primary-light);
      }

      .file-drop-zone .file-types {
        font-size: var(--font-size-xs);
        margin-top: var(--spacing-xs);
      }

      /* 레이어 리스트 */
      .layer-list {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .layer-item {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
        padding: var(--spacing-sm);
        border-radius: var(--radius-sm);
        cursor: pointer;
        transition: background var(--transition-fast);
      }

      .layer-item:hover {
        background: var(--bg-hover);
      }

      .layer-item.selected {
        background: var(--bg-selected);
      }

      .layer-item input[type="checkbox"] {
        margin: 0;
      }

      .layer-item .layer-name {
        flex: 1;
        font-size: var(--font-size-sm);
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      /* 드래그 앤 드롭 스타일 */
      .layer-item.dragging {
        opacity: 0.5;
        background: var(--bg-selected);
      }

      .layer-item.drop-above {
        border-top: 2px solid var(--color-primary);
        margin-top: -1px;
      }

      .layer-item.drop-below {
        border-bottom: 2px solid var(--color-primary);
        margin-bottom: -1px;
      }

      .layer-item[draggable="true"] {
        cursor: grab;
      }

      .layer-item[draggable="true"]:active {
        cursor: grabbing;
      }

      /* 작은 버튼 */
      .btn-small { width: 22px; height: 22px; }
      .panel-tabs { display: flex; background: var(--bg-toolbar); border-bottom: 1px solid var(--border-color); flex-shrink: 0; }
      .panel-tab { flex: 1; display: flex; align-items: center; justify-content: center; gap: 6px; padding: var(--spacing-sm) var(--spacing-md); font-size: var(--font-size-sm); color: var(--text-muted); background: transparent; border: none; border-bottom: 2px solid transparent; cursor: pointer; transition: all var(--transition-fast); }
      .panel-tab:hover { color: var(--text-primary); background: var(--bg-hover); }
      .panel-tab.active { color: var(--color-primary); border-bottom-color: var(--color-primary); background: var(--bg-panel); }
      .panel-tab svg { flex-shrink: 0; }
      .tab-content { display: none; flex-direction: column; flex: 1; overflow: hidden; }
      .tab-content.active { display: flex; }
    `,document.head.appendChild(e)}initTabs(){const e=document.querySelectorAll(".panel-tab"),t=document.querySelectorAll(".tab-content");e.forEach(n=>{n.addEventListener("click",()=>{const i=n.dataset.tab;e.forEach(a=>a.classList.remove("active")),t.forEach(a=>a.classList.remove("active")),n.classList.add("active"),document.getElementById("tab-"+i).classList.add("active")})})}initResizer(){const e=document.getElementById("panel-resizer"),t=document.getElementById("left-panel");let n=!1;e.addEventListener("mousedown",i=>{n=!0,e.classList.add("active"),document.body.style.cursor="ew-resize",document.body.style.userSelect="none"}),document.addEventListener("mousemove",i=>{if(!n)return;const a=i.clientX,s=parseInt(getComputedStyle(t).minWidth),o=parseInt(getComputedStyle(t).maxWidth);a>=s&&a<=o&&(t.style.width=`${a}px`)}),document.addEventListener("mouseup",()=>{n&&(n=!1,e.classList.remove("active"),document.body.style.cursor="",document.body.style.userSelect="",window.dispatchEvent(new Event("resize")))})}}class _l{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const jg={PROPERTYCHANGE:"propertychange"};class t_{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function jq(r,e,t){let n,i;t=t||Wh;let a=0,s=r.length,o=!1;for(;a<s;)n=a+(s-a>>1),i=+t(r[n],e),i<0?a=n+1:(s=n,o=!i);return o?a:~a}function Wh(r,e){return r>e?1:r<e?-1:0}function r_(r,e,t){if(r[0]<=e)return 0;const n=r.length;if(e<=r[n-1])return n-1;if(typeof t=="function"){for(let i=1;i<n;++i){const a=r[i];if(a===e)return i;if(a<e)return t(e,r[i-1],a)>0?i-1:i}return n-1}if(t>0){for(let i=1;i<n;++i)if(r[i]<e)return i-1;return n-1}if(t<0){for(let i=1;i<n;++i)if(r[i]<=e)return i;return n-1}for(let i=1;i<n;++i){if(r[i]==e)return i;if(r[i]<e)return r[i-1]-e<e-r[i]?i-1:i}return n-1}function $q(r,e,t){for(;e<t;){const n=r[e];r[e]=r[t],r[t]=n,++e,--t}}function ii(r,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let i=0;i<n;i++)r[r.length]=t[i]}function oh(r,e){const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function Kq(r,e,t){const n=e||Wh;return r.every(function(i,a){if(a===0)return!0;const s=n(r[a-1],i);return!(s>0||s===0)})}function eh(){return!0}function mp(){return!1}function $g(){}function Y6(r){let e=!1,t,n,i;return function(){const a=Array.prototype.slice.call(arguments);return(!e||this!==i||!oh(a,n))&&(e=!0,i=this,n=a,t=r.apply(this,arguments)),t}}function X6(r){function e(){let t;try{t=r()}catch(n){return Promise.reject(n)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function Wd(r){for(const e in r)delete r[e]}function kd(r){let e;for(e in r)return!1;return!e}class A1 extends t_{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),i=n[e]||(n[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,i=this.listeners_&&this.listeners_[n];if(!i)return;const a=t?new _l(e):e;a.target||(a.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});n in s||(s[n]=0,o[n]=0),++s[n];let l;for(let u=0,c=i.length;u<c;++u)if("handleEvent"in i[u]?l=i[u].handleEvent(a):l=i[u].call(this,a),l===!1||a.propagationStopped){l=!1;break}if(--s[n]===0){let u=o[n];for(delete o[n];u--;)this.removeEventListener(n,$g);delete s[n]}return l}disposeInternal(){this.listeners_&&Wd(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const i=n.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[i]=$g,++this.pendingRemovals_[e]):(n.splice(i,1),n.length===0&&delete this.listeners_[e]))}}const $r={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Fn(r,e,t,n,i){if(n&&n!==r&&(t=t.bind(n)),i){const s=t;t=function(){r.removeEventListener(e,t),s.apply(this,arguments)}}const a={target:r,type:e,listener:t};return r.addEventListener(e,t),a}function Ex(r,e,t,n){return Fn(r,e,t,n,!0)}function Mi(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),Wd(r))}class d1 extends A1{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent($r.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,i=new Array(n);for(let a=0;a<n;++a)i[a]=Fn(this,e[a],t);return i}return Fn(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const i=e.length;n=new Array(i);for(let a=0;a<i;++a)n[a]=Ex(this,e[a],t)}else n=Ex(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)OC(n);else if(Array.isArray(e))for(let i=0,a=e.length;i<a;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}d1.prototype.on;d1.prototype.once;d1.prototype.un;function OC(r){if(Array.isArray(r))for(let e=0,t=r.length;e<t;++e)Mi(r[e]);else Mi(r)}function Vr(){throw new Error("Unimplemented abstract method.")}let Vq=0;function Or(r){return r.ol_uid||(r.ol_uid=String(++Vq))}class CT extends _l{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}class uc extends d1{constructor(e){super(),this.on,this.once,this.un,Or(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new CT(n,e,t)),n=jg.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new CT(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const i=this.values_||(this.values_={});if(n)i[e]=t;else{const a=i[e];i[e]=t,a!==t&&this.notify(e,a)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],kd(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}const Ha={ADD:"add",REMOVE:"remove"},ST={LENGTH:"length"};class gy extends _l{constructor(e,t,n){super(e),this.element=t,this.index=n}}class po extends uc{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,i=this.array_.length;n<i;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,i=t.length;n<i;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(ST.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new gy(Ha.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,i=t.length;n<i;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new gy(Ha.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new gy(Ha.REMOVE,i,e)),this.dispatchEvent(new gy(Ha.ADD,t,e))}updateLength_(){this.set(ST.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}}const hi={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};function qn(r,e){if(!r)throw new Error(e)}function ea(r,e,t){return Math.min(Math.max(r,e),t)}function Wq(r,e,t,n,i,a){const s=i-t,o=a-n;if(s!==0||o!==0){const l=((r-t)*s+(e-n)*o)/(s*s+o*o);l>1?(t=i,n=a):l>0&&(t+=s*l,n+=o*l)}return Yh(r,e,t,n)}function Yh(r,e,t,n){const i=t-r,a=n-e;return i*i+a*a}function Yq(r){const e=r.length;for(let n=0;n<e;n++){let i=n,a=Math.abs(r[n][n]);for(let o=n+1;o<e;o++){const l=Math.abs(r[o][n]);l>a&&(a=l,i=o)}if(a===0)return null;const s=r[i];r[i]=r[n],r[n]=s;for(let o=n+1;o<e;o++){const l=-r[o][n]/r[n][n];for(let u=n;u<e+1;u++)n==u?r[o][u]=0:r[o][u]+=l*r[n][u]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=r[n][e]/r[n][n];for(let i=n-1;i>=0;i--)r[i][e]-=r[i][n]*t[n]}return t}function xA(r){return r*Math.PI/180}function Bd(r,e){const t=r%e;return t*e<0?t+e:t}function Dl(r,e,t){return r+t*(e-r)}function n_(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}function py(r,e){return Math.floor(n_(r,e))}function oA(r,e){return Math.ceil(n_(r,e))}class Z6 extends uc{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[hi.OPACITY]=e.opacity!==void 0?e.opacity:1,qn(typeof t[hi.OPACITY]=="number","Layer opacity must be a number"),t[hi.VISIBLE]=e.visible!==void 0?e.visible:!0,t[hi.Z_INDEX]=e.zIndex,t[hi.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[hi.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[hi.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[hi.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=ea(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Vr()}getLayerStatesArray(e){return Vr()}getExtent(){return this.get(hi.EXTENT)}getMaxResolution(){return this.get(hi.MAX_RESOLUTION)}getMinResolution(){return this.get(hi.MIN_RESOLUTION)}getMinZoom(){return this.get(hi.MIN_ZOOM)}getMaxZoom(){return this.get(hi.MAX_ZOOM)}getOpacity(){return this.get(hi.OPACITY)}getSourceState(){return Vr()}getVisible(){return this.get(hi.VISIBLE)}getZIndex(){return this.get(hi.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(hi.EXTENT,e)}setMaxResolution(e){this.set(hi.MAX_RESOLUTION,e)}setMinResolution(e){this.set(hi.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(hi.MAX_ZOOM,e)}setMinZoom(e){this.set(hi.MIN_ZOOM,e)}setOpacity(e){qn(typeof e=="number","Layer opacity must be a number"),this.set(hi.OPACITY,e)}setVisible(e){this.set(hi.VISIBLE,e)}setZIndex(e){this.set(hi.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const _s={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Qa={ANIMATING:0,INTERACTING:1},Pu={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Xq=42,H5=256,Kg={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let z5=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Kg[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const g1=6378137,hg=Math.PI*g1,Zq=[-hg,-hg,hg,hg],Jq=[-180,-85,180,85],my=g1*Math.log(Math.tan(Math.PI/2));class B0 extends z5{constructor(e){super({code:e,units:"m",extent:Zq,global:!0,worldExtent:Jq,getPointResolution:function(t,n){return t/Math.cosh(n[1]/g1)}})}}const BT=[new B0("EPSG:3857"),new B0("EPSG:102100"),new B0("EPSG:102113"),new B0("EPSG:900913"),new B0("http://www.opengis.net/def/crs/EPSG/0/3857"),new B0("http://www.opengis.net/gml/srs/epsg.xml#3857")];function ej(r,e,t){const n=r.length;t=t>1?t:2,e===void 0&&(t>2?e=r.slice():e=new Array(n));for(let i=0;i<n;i+=t){e[i]=hg*r[i]/180;let a=g1*Math.log(Math.tan(Math.PI*(+r[i+1]+90)/360));a>my?a=my:a<-my&&(a=-my),e[i+1]=a}return e}function tj(r,e,t){const n=r.length;t=t>1?t:2,e===void 0&&(t>2?e=r.slice():e=new Array(n));for(let i=0;i<n;i+=t)e[i]=180*r[i]/hg,e[i+1]=360*Math.atan(Math.exp(r[i+1]/g1))/Math.PI-90;return e}const rj=6378137,TT=[-180,-90,180,90],nj=Math.PI*rj/180;class sd extends z5{constructor(e,t){super({code:e,units:"degrees",extent:TT,axisOrientation:t,global:!0,metersPerUnit:nj,worldExtent:TT})}}const NT=[new sd("CRS:84"),new sd("EPSG:4326","neu"),new sd("urn:ogc:def:crs:OGC:1.3:CRS84"),new sd("urn:ogc:def:crs:OGC:2:84"),new sd("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new sd("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new sd("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let PC={};function ij(r){return PC[r]||PC[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function aj(r,e){PC[r]=e}let Sg={};function Vg(r,e,t){const n=r.getCode(),i=e.getCode();n in Sg||(Sg[n]={}),Sg[n][i]=t}function J6(r,e){let t;return r in Sg&&e in Sg[r]&&(t=Sg[r][e]),t}const vs={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Au(r){const e=Hl();for(let t=0,n=r.length;t<n;++t)Xm(e,r[t]);return e}function sj(r,e,t){const n=Math.min.apply(null,r),i=Math.min.apply(null,e),a=Math.max.apply(null,r),s=Math.max.apply(null,e);return th(n,i,a,s,t)}function p1(r,e,t){return t?(t[0]=r[0]-e,t[1]=r[1]-e,t[2]=r[2]+e,t[3]=r[3]+e,t):[r[0]-e,r[1]-e,r[2]+e,r[3]+e]}function eR(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r.slice()}function Yd(r,e,t){let n,i;return e<r[0]?n=r[0]-e:r[2]<e?n=e-r[2]:n=0,t<r[1]?i=r[1]-t:r[3]<t?i=t-r[3]:i=0,n*n+i*i}function Rd(r,e){return q5(r,e[0],e[1])}function Ju(r,e){return r[0]<=e[0]&&e[2]<=r[2]&&r[1]<=e[1]&&e[3]<=r[3]}function q5(r,e,t){return r[0]<=e&&e<=r[2]&&r[1]<=t&&t<=r[3]}function UC(r,e){const t=r[0],n=r[1],i=r[2],a=r[3],s=e[0],o=e[1];let l=vs.UNKNOWN;return s<t?l=l|vs.LEFT:s>i&&(l=l|vs.RIGHT),o<n?l=l|vs.BELOW:o>a&&(l=l|vs.ABOVE),l===vs.UNKNOWN&&(l=vs.INTERSECTING),l}function Hl(){return[1/0,1/0,-1/0,-1/0]}function th(r,e,t,n,i){return i?(i[0]=r,i[1]=e,i[2]=t,i[3]=n,i):[r,e,t,n]}function vp(r){return th(1/0,1/0,-1/0,-1/0,r)}function Ym(r,e){const t=r[0],n=r[1];return th(t,n,t,n,e)}function j5(r,e,t,n,i){const a=vp(i);return rR(a,r,e,t,n)}function Od(r,e){return r[0]==e[0]&&r[2]==e[2]&&r[1]==e[1]&&r[3]==e[3]}function tR(r,e){return e[0]<r[0]&&(r[0]=e[0]),e[2]>r[2]&&(r[2]=e[2]),e[1]<r[1]&&(r[1]=e[1]),e[3]>r[3]&&(r[3]=e[3]),r}function Xm(r,e){e[0]<r[0]&&(r[0]=e[0]),e[0]>r[2]&&(r[2]=e[0]),e[1]<r[1]&&(r[1]=e[1]),e[1]>r[3]&&(r[3]=e[1])}function rR(r,e,t,n,i){for(;t<n;t+=i)oj(r,e[t],e[t+1]);return r}function oj(r,e,t){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}function $5(r,e){let t;return t=e(i_(r)),t||(t=e(a_(r)),t)||(t=e(s_(r)),t)||(t=e(Xd(r)),t)?t:!1}function QC(r){let e=0;return Zd(r)||(e=Mn(r)*qa(r)),e}function i_(r){return[r[0],r[1]]}function a_(r){return[r[2],r[1]]}function Uo(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function lj(r,e){let t;if(e==="bottom-left")t=i_(r);else if(e==="bottom-right")t=a_(r);else if(e==="top-left")t=Xd(r);else if(e==="top-right")t=s_(r);else throw new Error("Invalid corner");return t}function bx(r,e,t,n,i){const[a,s,o,l,u,c,h,f]=GC(r,e,t,n);return th(Math.min(a,o,u,h),Math.min(s,l,c,f),Math.max(a,o,u,h),Math.max(s,l,c,f),i)}function GC(r,e,t,n){const i=e*n[0]/2,a=e*n[1]/2,s=Math.cos(t),o=Math.sin(t),l=i*s,u=i*o,c=a*s,h=a*o,f=r[0],A=r[1];return[f-l+h,A-u-c,f-l-h,A-u+c,f+l-h,A+u+c,f+l+h,A+u-c,f-l+h,A-u-c]}function qa(r){return r[3]-r[1]}function Td(r,e,t){const n=t||Hl();return fo(r,e)?(r[0]>e[0]?n[0]=r[0]:n[0]=e[0],r[1]>e[1]?n[1]=r[1]:n[1]=e[1],r[2]<e[2]?n[2]=r[2]:n[2]=e[2],r[3]<e[3]?n[3]=r[3]:n[3]=e[3]):vp(n),n}function Xd(r){return[r[0],r[3]]}function s_(r){return[r[2],r[3]]}function Mn(r){return r[2]-r[0]}function fo(r,e){return r[0]<=e[2]&&r[2]>=e[0]&&r[1]<=e[3]&&r[3]>=e[1]}function Zd(r){return r[2]<r[0]||r[3]<r[1]}function uj(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r}function cj(r,e){const t=(r[2]-r[0])/2*(e-1),n=(r[3]-r[1])/2*(e-1);r[0]-=t,r[2]+=t,r[1]-=n,r[3]+=n}function hj(r,e,t){let n=!1;const i=UC(r,e),a=UC(r,t);if(i===vs.INTERSECTING||a===vs.INTERSECTING)n=!0;else{const s=r[0],o=r[1],l=r[2],u=r[3],c=e[0],h=e[1],f=t[0],A=t[1],d=(A-h)/(f-c);let p,y;a&vs.ABOVE&&!(i&vs.ABOVE)&&(p=f-(A-u)/d,n=p>=s&&p<=l),!n&&a&vs.RIGHT&&!(i&vs.RIGHT)&&(y=A-(f-l)*d,n=y>=o&&y<=u),!n&&a&vs.BELOW&&!(i&vs.BELOW)&&(p=f-(A-o)/d,n=p>=s&&p<=l),!n&&a&vs.LEFT&&!(i&vs.LEFT)&&(y=A-(f-s)*d,n=y>=o&&y<=u)}return n}function fj(r,e,t,n){if(Zd(r))return vp(t);let i=[];i=[r[0],r[1],r[2],r[1],r[2],r[3],r[0],r[3]],e(i,i,2);const a=[],s=[];for(let o=0,l=i.length;o<l;o+=2)a.push(i[o]),s.push(i[o+1]);return sj(a,s,t)}function nR(r,e){const t=e.getExtent(),n=Uo(r);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const i=Mn(t),s=Math.floor((n[0]-t[0])/i)*i;r[0]-=s,r[2]-=s}return r}function iR(r,e,t){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[n[0],r[1],n[2],r[3]]];nR(r,e);const i=Mn(n);if(Mn(r)>i&&!t)return[[n[0],r[1],n[2],r[3]]];if(r[0]<n[0])return[[r[0]+i,r[1],n[2],r[3]],[n[0],r[1],r[2],r[3]]];if(r[2]>n[2])return[[r[0],r[1],n[2],r[3]],[n[0],r[1],r[2]-i,r[3]]]}return[r]}function im(r,e,t){const n=""+r;let i=n.indexOf(".");return i=i===-1?n.length:i,i>e?n:new Array(1+e-i).join("0")+n}function Aj(r,e){return r[0]+=+e[0],r[1]+=+e[1],r}function aR(r,e){const t=r[0],n=r[1],i=e[0],a=e[1],s=i[0],o=i[1],l=a[0],u=a[1],c=l-s,h=u-o,f=c===0&&h===0?0:(c*(t-s)+h*(n-o))/(c*c+h*h||0);let A,d;return f<=0?(A=s,d=o):f>=1?(A=l,d=u):(A=s+f*c,d=o+f*h),[A,d]}function Wu(r,e){let t=!0;for(let n=r.length-1;n>=0;--n)if(r[n]!=e[n]){t=!1;break}return t}function K5(r,e){const t=Math.cos(e),n=Math.sin(e),i=r[0]*t-r[1]*n,a=r[1]*t+r[0]*n;return r[0]=i,r[1]=a,r}function dj(r,e){return r[0]*=e,r[1]*=e,r}function Wg(r,e){const t=r[0]-e[0],n=r[1]-e[1];return t*t+n*n}function Cx(r,e){return Math.sqrt(Wg(r,e))}function gj(r,e){return Wg(r,aR(r,e))}function sR(r,e){if(e.canWrapX()){const t=Mn(e.getExtent()),n=oR(r,e,t);n&&(r[0]-=n*t)}return r}function oR(r,e,t){const n=e.getExtent();let i=0;return e.canWrapX()&&(r[0]<n[0]||r[0]>n[2])&&(t=t||Mn(n),i=Math.floor((r[0]-n[0])/t)),i}const V5=63710088e-1;function HC(r,e,t){t=t||V5;const n=xA(r[1]),i=xA(e[1]),a=(i-n)/2,s=xA(e[0]-r[0])/2,o=Math.sin(a)*Math.sin(a)+Math.sin(s)*Math.sin(s)*Math.cos(n)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}function QE(r,e){let t=0;for(let n=0,i=r.length;n<i-1;++n)t+=HC(r[n],r[n+1],e);return t}function Sx(r,e){e=e||{};const t=e.radius||V5,n=e.projection||"EPSG:3857",i=r.getType();i!=="GeometryCollection"&&(r=r.clone().transform(n,"EPSG:4326"));let a=0,s,o,l,u,c,h;switch(i){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":{s=r.getCoordinates(),a=QE(s,t);break}case"MultiLineString":case"Polygon":{for(s=r.getCoordinates(),l=0,u=s.length;l<u;++l)a+=QE(s[l],t);break}case"MultiPolygon":{for(s=r.getCoordinates(),l=0,u=s.length;l<u;++l)for(o=s[l],c=0,h=o.length;c<h;++c)a+=QE(o[c],t);break}case"GeometryCollection":{const f=r.getGeometries();for(l=0,u=f.length;l<u;++l)a+=Sx(f[l],e);break}default:throw new Error("Unsupported geometry type: "+i)}return a}function vy(r,e){let t=0;const n=r.length;let i=r[n-1][0],a=r[n-1][1];for(let s=0;s<n;s++){const o=r[s][0],l=r[s][1];t+=xA(o-i)*(2+Math.sin(xA(a))+Math.sin(xA(l))),i=o,a=l}return t*e*e/2}function W5(r,e){e=e||{};const t=e.radius||V5,n=e.projection||"EPSG:3857",i=r.getType();i!=="GeometryCollection"&&(r=r.clone().transform(n,"EPSG:4326"));let a=0,s,o,l,u,c,h;switch(i){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(s=r.getCoordinates(),a=Math.abs(vy(s[0],t)),l=1,u=s.length;l<u;++l)a-=Math.abs(vy(s[l],t));break}case"MultiPolygon":{for(s=r.getCoordinates(),l=0,u=s.length;l<u;++l)for(o=s[l],a+=Math.abs(vy(o[0],t)),c=1,h=o.length;c<h;++c)a-=Math.abs(vy(o[c],t));break}case"GeometryCollection":{const f=r.getGeometries();for(l=0,u=f.length;l<u;++l)a+=W5(f[l],e);break}default:throw new Error("Unsupported geometry type: "+i)}return a}function lR(...r){console.warn(...r)}let zC=!0;function uR(r){zC=!1}function Y5(r,e){if(e!==void 0){for(let t=0,n=r.length;t<n;++t)e[t]=r[t];e=e}else e=r.slice();return e}function cR(r,e){if(e!==void 0&&r!==e){for(let t=0,n=r.length;t<n;++t)e[t]=r[t];r=e}return r}function hR(r){aj(r.getCode(),r),Vg(r,r,Y5)}function pj(r){r.forEach(hR)}function Ci(r){return typeof r=="string"?ij(r):r||null}function Bx(r,e,t,n){r=Ci(r);let i;const a=r.getPointResolutionFunc();if(a){if(i=a(e,t),n&&n!==r.getUnits()){const s=r.getMetersPerUnit();s&&(i=i*s/Kg[n])}}else{const s=r.getUnits();if(s=="degrees"&&!n||n=="degrees")i=e;else{const o=Z5(r,Ci("EPSG:4326"));if(o===cR&&s!=="degrees")i=e*r.getMetersPerUnit();else{let u=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];u=o(u,u,2);const c=HC(u.slice(0,2),u.slice(2,4)),h=HC(u.slice(4,6),u.slice(6,8));i=(c+h)/2}const l=n?Kg[n]:r.getMetersPerUnit();l!==void 0&&(i/=l)}}return i}function qC(r){pj(r),r.forEach(function(e){r.forEach(function(t){e!==t&&Vg(e,t,Y5)})})}function mj(r,e,t,n){r.forEach(function(i){e.forEach(function(a){Vg(i,a,t),Vg(a,i,n)})})}function X5(r,e){return r?typeof r=="string"?Ci(r):r:Ci(e)}function IT(r){return function(e,t,n){const i=e.length;n=n!==void 0?n:2,t=t!==void 0?t:new Array(i);for(let a=0;a<i;a+=n){const s=r(e.slice(a,a+n)),o=s.length;for(let l=0,u=n;l<u;++l)t[a+l]=l>=o?e[a+l]:s[l]}return t}}function vj(r,e,t,n){const i=Ci(r),a=Ci(e);Vg(i,a,IT(t)),Vg(a,i,IT(n))}function Zm(r,e){return uR(),Jd(r,"EPSG:4326","EPSG:3857")}function yy(r,e){const t=Jd(r,"EPSG:3857","EPSG:4326"),n=t[0];return(n<-180||n>180)&&(t[0]=Bd(n+180,360)-180),t}function Hh(r,e){if(r===e)return!0;const t=r.getUnits()===e.getUnits();return(r.getCode()===e.getCode()||Z5(r,e)===Y5)&&t}function Z5(r,e){const t=r.getCode(),n=e.getCode();let i=J6(t,n);return i||(i=cR),i}function Yg(r,e){const t=Ci(r),n=Ci(e);return Z5(t,n)}function Jd(r,e,t){return Yg(e,t)(r,void 0,r.length)}function fR(r,e,t,n){const i=Yg(e,t);return fj(r,i,void 0)}function Xg(r,e){return r}function ia(r,e){return zC&&!Wu(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(zC=!1,lR("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r}function J5(r,e){return r}function Hc(r,e){return r}function FT(r,e,t){return function(n){let i,a;if(r.canWrapX()){const s=r.getExtent(),o=Mn(s);n=n.slice(0),a=oR(n,r,o),a&&(n[0]=n[0]-a*o),n[0]=ea(n[0],s[0],s[2]),n[1]=ea(n[1],s[1],s[3]),i=t(n)}else i=t(n);return a&&e.canWrapX()&&(i[0]+=a*Mn(e.getExtent())),i}}function yj(){qC(BT),qC(NT),mj(NT,BT,ej,tj)}yj();function MT(r,e,t){return function(n,i,a,s,o){if(!n)return;if(!i&&!e)return n;const l=e?0:a[0]*i,u=e?0:a[1]*i,c=o?o[0]:0,h=o?o[1]:0;let f=r[0]+l/2+c,A=r[2]-l/2+c,d=r[1]+u/2+h,p=r[3]-u/2+h;f>A&&(f=(A+f)/2,A=f),d>p&&(d=(p+d)/2,p=d);let y=ea(n[0],f,A),v=ea(n[1],d,p);if(s&&t&&i){const w=30*i;y+=-w*Math.log(1+Math.max(0,f-n[0])/w)+w*Math.log(1+Math.max(0,n[0]-A)/w),v+=-w*Math.log(1+Math.max(0,d-n[1])/w)+w*Math.log(1+Math.max(0,n[1]-p)/w)}return[y,v]}}function xj(r){return r}function e4(r,e,t,n){const i=Mn(e)/t[0],a=qa(e)/t[1];return n?Math.min(r,Math.max(i,a)):Math.min(r,Math.min(i,a))}function t4(r,e,t){let n=Math.min(r,e);const i=50;return n*=Math.log(1+i*Math.max(0,r/e-1))/i+1,t&&(n=Math.max(n,t),n/=Math.log(1+i*Math.max(0,t/r-1))/i+1),ea(n,t/2,e*2)}function wj(r,e,t,n){return e=e!==void 0?e:!0,function(i,a,s,o){if(i!==void 0){const l=r[0],u=r[r.length-1],c=t?e4(l,t,s,n):l;if(o)return e?t4(i,c,u):ea(i,u,c);const h=Math.min(c,i),f=Math.floor(r_(r,h,a));return r[f]>c&&f<r.length-1?r[f+1]:r[f]}}}function _j(r,e,t,n,i,a){return n=n!==void 0?n:!0,t=t!==void 0?t:0,function(s,o,l,u){if(s!==void 0){const c=i?e4(e,i,l,a):e;if(u)return n?t4(s,c,t):ea(s,t,c);const h=1e-9,f=Math.ceil(Math.log(e/c)/Math.log(r)-h),A=-o*(.5-h)+.5,d=Math.min(c,s),p=Math.floor(Math.log(e/d)/Math.log(r)+A),y=Math.max(f,p),v=e/Math.pow(r,y);return ea(v,t,c)}}}function LT(r,e,t,n,i){return t=t!==void 0?t:!0,function(a,s,o,l){if(a!==void 0){const u=n?e4(r,n,o,i):r;return!t||!l?ea(a,e,u):t4(a,u,e)}}}function r4(r){if(r!==void 0)return 0}function DT(r){if(r!==void 0)return r}function Ej(r){const e=2*Math.PI/r;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function bj(r){const e=xA(5);return function(t,n){return n||t===void 0?t:Math.abs(t)<=e?0:t}}function AR(r){return Math.pow(r,3)}function yp(r){return 1-AR(1-r)}function Cj(r){return 3*r*r-2*r*r*r}function Sj(r){return r}const Bj=new Array(6);function Es(){return[1,0,0,1,0,0]}function dR(r,e){const t=r[0],n=r[1],i=r[2],a=r[3],s=r[4],o=r[5],l=e[0],u=e[1],c=e[2],h=e[3],f=e[4],A=e[5];return r[0]=t*l+i*u,r[1]=n*l+a*u,r[2]=t*c+i*h,r[3]=n*c+a*h,r[4]=t*f+i*A+s,r[5]=n*f+a*A+o,r}function Tj(r,e,t,n,i,a,s){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=a,r[5]=s,r}function Nj(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function Ga(r,e){const t=e[0],n=e[1];return e[0]=r[0]*t+r[2]*n+r[4],e[1]=r[1]*t+r[3]*n+r[5],e}function Ij(r,e,t){return dR(r,Tj(Bj,1,0,0,1,e,t))}function bu(r,e,t,n,i,a,s,o){const l=Math.sin(a),u=Math.cos(a);return r[0]=n*u,r[1]=i*l,r[2]=-n*l,r[3]=i*u,r[4]=s*n*u-o*n*l+e,r[5]=s*i*l+o*i*u+t,r}function n4(r,e){const t=Fj(e);qn(t!==0,"Transformation matrix cannot be inverted");const n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],l=e[5];return r[0]=s/t,r[1]=-i/t,r[2]=-a/t,r[3]=n/t,r[4]=(a*l-s*o)/t,r[5]=-(n*l-i*o)/t,r}function Fj(r){return r[0]*r[3]-r[1]*r[2]}const kT=[1e6,1e6,1e6,1e6,2,2];function Mj(r){return"matrix("+r.map((t,n)=>Math.round(t*kT[n])/kT[n]).join(", ")+")"}function wA(r,e,t,n,i,a){a=a||[];let s=0;for(let o=e;o<t;o+=n){const l=r[o],u=r[o+1];a[s++]=i[0]*l+i[2]*u+i[4],a[s++]=i[1]*l+i[3]*u+i[5]}return a&&a.length!=s&&(a.length=s),a}function i4(r,e,t,n,i,a,s){s=s||[];const o=Math.cos(i),l=Math.sin(i),u=a[0],c=a[1];let h=0;for(let f=e;f<t;f+=n){const A=r[f]-u,d=r[f+1]-c;s[h++]=u+A*o-d*l,s[h++]=c+A*l+d*o;for(let p=f+2;p<f+n;++p)s[h++]=r[p]}return s&&s.length!=h&&(s.length=h),s}function Lj(r,e,t,n,i,a,s,o){o=o||[];const l=s[0],u=s[1];let c=0;for(let h=e;h<t;h+=n){const f=r[h]-l,A=r[h+1]-u;o[c++]=l+i*f,o[c++]=u+a*A;for(let d=h+2;d<h+n;++d)o[c++]=r[d]}return o&&o.length!=c&&(o.length=c),o}function Dj(r,e,t,n,i,a,s){s=s||[];let o=0;for(let l=e;l<t;l+=n){s[o++]=r[l]+i,s[o++]=r[l+1]+a;for(let u=l+2;u<l+n;++u)s[o++]=r[u]}return s&&s.length!=o&&(s.length=o),s}const RT=Es();class gR extends uc{constructor(){super(),this.extent_=Hl(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Y6((e,t,n)=>{if(!n)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Vr()}closestPointXY(e,t,n,i){return Vr()}containsXY(e,t){const n=this.getClosestPoint([e,t]);return n[0]===e&&n[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Vr()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&vp(t),this.extentRevision_=this.getRevision()}return uj(this.extent_,e)}rotate(e,t){Vr()}scale(e,t,n){Vr()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Vr()}getType(){return Vr()}applyTransform(e){Vr()}intersectsExtent(e){return Vr()}translate(e,t){Vr()}transform(e,t){const n=Ci(e),i=n.getUnits()=="tile-pixels"?function(a,s,o){const l=n.getExtent(),u=n.getWorldExtent(),c=qa(u)/qa(l);return bu(RT,u[0],u[3],c,-c,0,0,0),wA(a,0,a.length,o,RT,s),Yg(n,t)(a,s,o)}:Yg(n,t);return this.applyTransform(i),this}}class rh extends gR{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return j5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Vr()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Tx(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Vr()}setLayout(e,t,n){let i;if(e)i=Tx(e);else{for(let a=0;a<n;++a){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=e0(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const i=this.getStride();i4(n,0,n.length,i,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=Uo(this.getExtent()));const i=this.getFlatCoordinates();if(i){const a=this.getStride();Lj(i,0,i.length,a,e,t,n,i),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const i=this.getStride();Dj(n,0,n.length,i,e,t,n),this.changed()}}}function e0(r){let e;return r==2?e="XY":r==3?e="XYZ":r==4&&(e="XYZM"),e}function Tx(r){let e;return r=="XY"?e=2:r=="XYZ"||r=="XYM"?e=3:r=="XYZM"&&(e=4),e}function kj(r,e,t){const n=r.getFlatCoordinates();if(!n)return null;const i=r.getStride();return wA(n,0,n.length,i,e,t)}function OT(r,e,t,n,i,a,s){const o=r[e],l=r[e+1],u=r[t]-o,c=r[t+1]-l;let h;if(u===0&&c===0)h=e;else{const f=((i-o)*u+(a-l)*c)/(u*u+c*c);if(f>1)h=t;else if(f>0){for(let A=0;A<n;++A)s[A]=Dl(r[e+A],r[t+A],f);s.length=n;return}else h=e}for(let f=0;f<n;++f)s[f]=r[h+f];s.length=n}function a4(r,e,t,n,i){let a=r[e],s=r[e+1];for(e+=n;e<t;e+=n){const o=r[e],l=r[e+1],u=Yh(a,s,o,l);u>i&&(i=u),a=o,s=l}return i}function s4(r,e,t,n,i){for(let a=0,s=t.length;a<s;++a){const o=t[a];i=a4(r,e,o,n,i),e=o}return i}function Rj(r,e,t,n,i){for(let a=0,s=t.length;a<s;++a){const o=t[a];i=s4(r,e,o,n,i),e=o[o.length-1]}return i}function o4(r,e,t,n,i,a,s,o,l,u,c){if(e==t)return u;let h,f;if(i===0){if(f=Yh(s,o,r[e],r[e+1]),f<u){for(h=0;h<n;++h)l[h]=r[e+h];return l.length=n,f}return u}c=c||[NaN,NaN];let A=e+n;for(;A<t;)if(OT(r,A-n,A,n,s,o,c),f=Yh(s,o,c[0],c[1]),f<u){for(u=f,h=0;h<n;++h)l[h]=c[h];l.length=n,A+=n}else A+=n*Math.max((Math.sqrt(f)-Math.sqrt(u))/i|0,1);if(a&&(OT(r,t-n,e,n,s,o,c),f=Yh(s,o,c[0],c[1]),f<u)){for(u=f,h=0;h<n;++h)l[h]=c[h];l.length=n}return u}function l4(r,e,t,n,i,a,s,o,l,u,c){c=c||[NaN,NaN];for(let h=0,f=t.length;h<f;++h){const A=t[h];u=o4(r,e,A,n,i,a,s,o,l,u,c),e=A}return u}function Oj(r,e,t,n,i,a,s,o,l,u,c){c=c||[NaN,NaN];for(let h=0,f=t.length;h<f;++h){const A=t[h];u=l4(r,e,A,n,i,a,s,o,l,u,c),e=A[A.length-1]}return u}function pR(r,e,t,n){for(let i=0,a=t.length;i<a;++i)r[e++]=t[i];return e}function o_(r,e,t,n){for(let i=0,a=t.length;i<a;++i){const s=t[i];for(let o=0;o<n;++o)r[e++]=s[o]}return e}function m1(r,e,t,n,i){i=i||[];let a=0;for(let s=0,o=t.length;s<o;++s){const l=o_(r,e,t[s],n);i[a++]=l,e=l}return i.length=a,i}function mR(r,e,t,n,i){i=i||[];let a=0;for(let s=0,o=t.length;s<o;++s){const l=m1(r,e,t[s],n,i[a]);l.length===0&&(l[0]=e),i[a++]=l,e=l[l.length-1]}return i.length=a,i}function l_(r,e,t,n,i,a,s){const o=(t-e)/n;if(o<3){for(;e<t;e+=n)a[s++]=r[e],a[s++]=r[e+1];return s}const l=new Array(o);l[0]=1,l[o-1]=1;const u=[e,t-n];let c=0;for(;u.length>0;){const h=u.pop(),f=u.pop();let A=0;const d=r[f],p=r[f+1],y=r[h],v=r[h+1];for(let w=f+n;w<h;w+=n){const x=r[w],b=r[w+1],C=Wq(x,b,d,p,y,v);C>A&&(c=w,A=C)}A>i&&(l[(c-e)/n]=1,f+n<c&&u.push(f,c),c+n<h&&u.push(c,h))}for(let h=0;h<o;++h)l[h]&&(a[s++]=r[e+h*n],a[s++]=r[e+h*n+1]);return s}function vR(r,e,t,n,i,a,s,o){for(let l=0,u=t.length;l<u;++l){const c=t[l];s=l_(r,e,c,n,i,a,s),o.push(s),e=c}return s}function Ad(r,e){return e*Math.round(r/e)}function Pj(r,e,t,n,i,a,s){if(e==t)return s;let o=Ad(r[e],i),l=Ad(r[e+1],i);e+=n,a[s++]=o,a[s++]=l;let u,c;do if(u=Ad(r[e],i),c=Ad(r[e+1],i),e+=n,e==t)return a[s++]=u,a[s++]=c,s;while(u==o&&c==l);for(;e<t;){const h=Ad(r[e],i),f=Ad(r[e+1],i);if(e+=n,h==u&&f==c)continue;const A=u-o,d=c-l,p=h-o,y=f-l;if(A*y==d*p&&(A<0&&p<A||A==p||A>0&&p>A)&&(d<0&&y<d||d==y||d>0&&y>d)){u=h,c=f;continue}a[s++]=u,a[s++]=c,o=u,l=c,u=h,c=f}return a[s++]=u,a[s++]=c,s}function u4(r,e,t,n,i,a,s,o){for(let l=0,u=t.length;l<u;++l){const c=t[l];s=Pj(r,e,c,n,i,a,s),o.push(s),e=c}return s}function Uj(r,e,t,n,i,a,s,o){for(let l=0,u=t.length;l<u;++l){const c=t[l],h=[];s=u4(r,e,c,n,i,a,s,h),o.push(h),e=c[c.length-1]}return s}function lA(r,e,t,n,i){i=i!==void 0?i:[];let a=0;for(let s=e;s<t;s+=n)i[a++]=r.slice(s,s+n);return i.length=a,i}function Bv(r,e,t,n,i){i=i!==void 0?i:[];let a=0;for(let s=0,o=t.length;s<o;++s){const l=t[s];i[a++]=lA(r,e,l,n,i[a]),e=l}return i.length=a,i}function jC(r,e,t,n,i){i=i!==void 0?i:[];let a=0;for(let s=0,o=t.length;s<o;++s){const l=t[s];i[a++]=l.length===1&&l[0]===e?[]:Bv(r,e,l,n,i[a]),e=l[l.length-1]}return i.length=a,i}function yR(r,e,t,n){let i=0,a=r[t-n],s=r[t-n+1];for(;e<t;e+=n){const o=r[e],l=r[e+1];i+=s*o-a*l,a=o,s=l}return i/2}function xR(r,e,t,n){let i=0;for(let a=0,s=t.length;a<s;++a){const o=t[a];i+=yR(r,e,o,n),e=o}return i}function Qj(r,e,t,n){let i=0;for(let a=0,s=t.length;a<s;++a){const o=t[a];i+=xR(r,e,o,n),e=o[o.length-1]}return i}class Tv extends rh{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Tv(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,i){return i<Yd(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(a4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),o4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,i))}getArea(){return yR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return lA(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=l_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Tv(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=o_(this.flatCoordinates,0,e,this.stride),this.changed()}}let ja=class wR extends rh{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new wR(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,i){const a=this.flatCoordinates,s=Yh(e,t,a[0],a[1]);if(s<i){const o=this.stride;for(let l=0;l<o;++l)n[l]=a[l];return n.length=o,s}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return Ym(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return q5(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=pR(this.flatCoordinates,0,e,this.stride),this.changed()}};function Gj(r,e,t,n,i){return!$5(i,function(s){return!xd(r,e,t,n,s[0],s[1])})}function xd(r,e,t,n,i,a){let s=0,o=r[t-n],l=r[t-n+1];for(;e<t;e+=n){const u=r[e],c=r[e+1];l<=a?c>a&&(u-o)*(a-l)-(i-o)*(c-l)>0&&s++:c<=a&&(u-o)*(a-l)-(i-o)*(c-l)<0&&s--,o=u,l=c}return s!==0}function c4(r,e,t,n,i,a){if(t.length===0||!xd(r,e,t[0],n,i,a))return!1;for(let s=1,o=t.length;s<o;++s)if(xd(r,t[s-1],t[s],n,i,a))return!1;return!0}function Hj(r,e,t,n,i,a){if(t.length===0)return!1;for(let s=0,o=t.length;s<o;++s){const l=t[s];if(c4(r,e,l,n,i,a))return!0;e=l[l.length-1]}return!1}function h4(r,e,t,n,i,a,s){let o,l,u,c,h,f,A;const d=i[a+1],p=[];for(let w=0,x=t.length;w<x;++w){const b=t[w];for(c=r[b-n],f=r[b-n+1],o=e;o<b;o+=n)h=r[o],A=r[o+1],(d<=f&&A<=d||f<=d&&d<=A)&&(u=(d-f)/(A-f)*(h-c)+c,p.push(u)),c=h,f=A}let y=NaN,v=-1/0;for(p.sort(Wh),c=p[0],o=1,l=p.length;o<l;++o){h=p[o];const w=Math.abs(h-c);w>v&&(u=(c+h)/2,c4(r,e,t,n,u,d)&&(y=u,v=w)),c=h}return isNaN(y)&&(y=i[a]),s?(s.push(y,d,v),s):[y,d,v]}function _R(r,e,t,n,i){let a=[];for(let s=0,o=t.length;s<o;++s){const l=t[s];a=h4(r,e,l,n,i,2*s,a),e=l[l.length-1]}return a}function ER(r,e,t,n,i){let a;for(e+=n;e<t;e+=n)if(a=i(r.slice(e-n,e),r.slice(e,e+n)),a)return a;return!1}function u_(r,e,t,n,i){const a=rR(Hl(),r,e,t,n);return fo(i,a)?Ju(i,a)||a[0]>=i[0]&&a[2]<=i[2]||a[1]>=i[1]&&a[3]<=i[3]?!0:ER(r,e,t,n,function(s,o){return hj(i,s,o)}):!1}function zj(r,e,t,n,i){for(let a=0,s=t.length;a<s;++a){if(u_(r,e,t[a],n,i))return!0;e=t[a]}return!1}function bR(r,e,t,n,i){return!!(u_(r,e,t,n,i)||xd(r,e,t,n,i[0],i[1])||xd(r,e,t,n,i[0],i[3])||xd(r,e,t,n,i[2],i[1])||xd(r,e,t,n,i[2],i[3]))}function CR(r,e,t,n,i){if(!bR(r,e,t[0],n,i))return!1;if(t.length===1)return!0;for(let a=1,s=t.length;a<s;++a)if(Gj(r,t[a-1],t[a],n,i)&&!u_(r,t[a-1],t[a],n,i))return!1;return!0}function qj(r,e,t,n,i){for(let a=0,s=t.length;a<s;++a){const o=t[a];if(CR(r,e,o,n,i))return!0;e=o[o.length-1]}return!1}function jj(r,e,t,n){for(;e<t-n;){for(let i=0;i<n;++i){const a=r[e+i];r[e+i]=r[t-n+i],r[t-n+i]=a}e+=n,t-=n}}function f4(r,e,t,n){let i=0,a=r[t-n],s=r[t-n+1];for(;e<t;e+=n){const o=r[e],l=r[e+1];i+=(o-a)*(l+s),a=o,s=l}return i===0?void 0:i>0}function A4(r,e,t,n,i){i=i!==void 0?i:!1;for(let a=0,s=t.length;a<s;++a){const o=t[a],l=f4(r,e,o,n);if(a===0){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;e=o}return!0}function SR(r,e,t,n,i){for(let a=0,s=t.length;a<s;++a){const o=t[a];if(!A4(r,e,o,n,i))return!1;o.length&&(e=o[o.length-1])}return!0}function Nx(r,e,t,n,i){i=i!==void 0?i:!1;for(let a=0,s=t.length;a<s;++a){const o=t[a],l=f4(r,e,o,n);(a===0?i&&l||!i&&!l:i&&!l||!i&&l)&&jj(r,e,o,n),e=o}return e}function $C(r,e,t,n,i){for(let a=0,s=t.length;a<s;++a)e=Nx(r,e,t[a],n,i);return e}function $j(r,e){const t=[];let n=0,i=0,a;for(let s=0,o=e.length;s<o;++s){const l=e[s],u=f4(r,n,l,2);if(a===void 0&&(a=u),u===a)t.push(e.slice(i,s+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=s+1,n=l}return t}class zl extends rh{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?ii(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new zl(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,i){return i<Yd(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(s4(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),l4(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,i))}containsXY(e,t){return c4(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return xR(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Nx(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Bv(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Uo(this.getExtent());this.flatInteriorPoint_=h4(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new ja(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Tv(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,i=[];let a=0;for(let s=0,o=n.length;s<o;++s){const l=n[s],u=new Tv(t.slice(a,l),e);i.push(u),a=l}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;A4(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Nx(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=u4(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new zl(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return CR(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=m1(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function PT(r){if(Zd(r))throw new Error("Cannot create polygon from empty extent");const e=r[0],t=r[1],n=r[2],i=r[3],a=[e,t,e,i,n,i,n,t,e,t];return new zl(a,"XY",[a.length])}const GE=0;class Qc extends uc{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=X5(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&uR(),e.center&&(e.center=ia(e.center,this.projection_)),e.extent&&(e.extent=Hc(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in Pu)delete t[o];this.setProperties(t,!0);const n=Vj(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const i=Kj(e),a=n.constraint,s=Wj(e);this.constraints_={center:i,resolution:a,rotation:s},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const i=e||[0,0,0,0];t=t||[0,0,0,0];const a=this.getResolution(),s=a/2*(i[3]-t[3]+t[1]-i[1]),o=a/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([n[0]+s,n[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let i=arguments[n];i.center&&(i=Object.assign({},i),i.center=ia(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=ia(i.anchor,this.getProjection())),t[n]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const c=arguments[i];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(i===t){n&&xy(n,!0);return}let a=Date.now(),s=this.targetCenter_.slice(),o=this.targetResolution_,l=this.targetRotation_;const u=[];for(;i<t;++i){const c=arguments[i],h={start:a,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||Cj,callback:n};if(c.center&&(h.sourceCenter=s,h.targetCenter=c.center.slice(),s=h.targetCenter),c.zoom!==void 0?(h.sourceResolution=o,h.targetResolution=this.getResolutionForZoom(c.zoom),o=h.targetResolution):c.resolution&&(h.sourceResolution=o,h.targetResolution=c.resolution,o=h.targetResolution),c.rotation!==void 0){h.sourceRotation=l;const f=Bd(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+f,l=h.targetRotation}Yj(h)?h.complete=!0:a+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(Qa.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Qa.ANIMATING]>0}getInteracting(){return this.hints_[Qa.INTERACTING]>0}cancelAnimations(){this.setHint(Qa.ANIMATING,-this.hints_[Qa.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const i=this.animations_[t];if(i[0].callback&&xy(i[0].callback,!1),!e)for(let a=0,s=i.length;a<s;++a){const o=i[a];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let a=!0;for(let s=0,o=i.length;s<o;++s){const l=i[s];if(l.complete)continue;const u=e-l.start;let c=l.duration>0?u/l.duration:1;c>=1?(l.complete=!0,c=1):a=!1;const h=l.easing(c);if(l.sourceCenter){const f=l.sourceCenter[0],A=l.sourceCenter[1],d=l.targetCenter[0],p=l.targetCenter[1];this.nextCenter_=l.targetCenter;const y=f+h*(d-f),v=A+h*(p-A);this.targetCenter_=[y,v]}if(l.sourceResolution&&l.targetResolution){const f=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const A=this.getViewportSize_(this.getRotation()),d=this.constraints_.resolution(f,0,A,!0);this.targetCenter_=this.calculateCenterZoom(d,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=h===1?Bd(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const A=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(A,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(a){this.animations_[n]=null,this.setHint(Qa.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const s=i[0].callback;s&&xy(s,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const i=this.getCenterInternal();return i!==void 0&&(n=[i[0]-t[0],i[1]-t[1]],K5(n,e-this.getRotation()),Aj(n,t)),n}calculateCenterZoom(e,t){let n;const i=this.getCenterInternal(),a=this.getResolution();if(i!==void 0&&a!==void 0){const s=t[0]-e*(t[0]-i[0])/a,o=t[1]-e*(t[1]-i[1])/a;n=[s,o]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],i=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Xg(e,this.getProjection())}getCenterInternal(){return this.get(Pu.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return J5(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();qn(t,"The view center is not defined");const n=this.getResolution();qn(n!==void 0,"The view resolution is not defined");const i=this.getRotation();return qn(i!==void 0,"The view rotation is not defined"),bx(t,n,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Pu.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Hc(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=Mn(e)/t[0],i=qa(e)/t[1];return Math.max(n,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(t/n)/Math.log(e);return function(a){return t/Math.pow(e,a*i)}}getRotation(){return this.get(Pu.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,a=Math.log(n/i)/t;return function(s){return Math.log(n/s)/t/a}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const a=this.padding_;if(a){const s=this.getViewportSizeMinusPadding_();i=HE(i,this.getViewportSize_(),[s[0]/2+a[3],s[1]/2+a[0]],t,n)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,i;if(this.resolutions_){const a=r_(this.resolutions_,e,1);t=a,n=this.resolutions_[a],a==this.resolutions_.length-1?i=2:i=n/this.resolutions_[a+1]}else n=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(n/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=ea(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(n,ea(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(qn(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){qn(!Zd(e),"Cannot fit empty extent provided as `geometry`");const i=Hc(e,this.getProjection());n=PT(i)}else if(e.getType()==="Circle"){const i=Hc(e.getExtent(),this.getProjection());n=PT(i),n.rotate(this.getRotation(),Uo(i))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),i=Math.sin(-t),a=e.getFlatCoordinates(),s=e.getStride();let o=1/0,l=1/0,u=-1/0,c=-1/0;for(let h=0,f=a.length;h<f;h+=s){const A=a[h]*n-a[h+1]*i,d=a[h]*i+a[h+1]*n;o=Math.min(o,A),l=Math.min(l,d),u=Math.max(u,A),c=Math.max(c,d)}return[o,l,u,c]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],a=t.nearest!==void 0?t.nearest:!1;let s;t.minResolution!==void 0?s=t.minResolution:t.maxZoom!==void 0?s=this.getResolutionForZoom(t.maxZoom):s=0;const o=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(o,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);l=isNaN(l)?s:Math.max(l,s),l=this.getConstrainedResolution(l,a?0:1);const u=this.getRotation(),c=Math.sin(u),h=Math.cos(u),f=Uo(o);f[0]+=(i[1]-i[3])/2*l,f[1]+=(i[0]-i[2])/2*l;const A=f[0]*h-f[1]*c,d=f[1]*h+f[0]*c,p=this.getConstrainedCenter([A,d],l),y=t.callback?t.callback:$g;t.duration!==void 0?this.animateInternal({resolution:l,center:p,duration:t.duration,easing:t.easing},y):(this.targetResolution_=l,this.targetCenter_=p,this.applyTargetState_(!1,!0),xy(y,!0))}centerOn(e,t,n){this.centerOnInternal(ia(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(HE(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,i){let a;const s=this.padding_;if(s&&e){const o=this.getViewportSizeMinusPadding_(-n),l=HE(e,i,[o[0]/2+s[3],o[1]/2+s[0]],t,n);a=[e[0]-l[0],e[1]-l[1]]}return a}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Xg(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&ia(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*e,0,i,n);t&&(this.targetCenter_=this.calculateCenterZoom(a,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=ia(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&ia(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,n),a=this.getViewportSize_(i),s=this.constraints_.resolution(this.targetResolution_,0,a,n),o=this.constraints_.center(this.targetCenter_,s,a,n,this.calculateCenterShift(this.targetCenter_,s,i,a));this.get(Pu.ROTATION)!==i&&this.set(Pu.ROTATION,i),this.get(Pu.RESOLUTION)!==s&&(this.set(Pu.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(Pu.CENTER)||!Wu(this.get(Pu.CENTER),o))&&this.set(Pu.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const i=t||0,a=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(a),o=this.constraints_.resolution(this.targetResolution_,i,s),l=this.constraints_.center(this.targetCenter_,o,s,!1,this.calculateCenterShift(this.targetCenter_,o,a,s));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=a,this.targetCenter_=l,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==a||!this.getCenterInternal()||!Wu(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:a,center:l,resolution:o,duration:e,easing:yp,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Qa.INTERACTING,1)}endInteraction(e,t,n){n=n&&ia(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(Qa.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function xy(r,e){setTimeout(function(){r(e)},0)}function Kj(r){if(r.extent!==void 0){const t=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return MT(r.extent,r.constrainOnlyCenter,t)}const e=X5(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,MT(t,!1,!1)}return xj}function Vj(r){let e,t,n,s=r.minZoom!==void 0?r.minZoom:GE,o=r.maxZoom!==void 0?r.maxZoom:28;const l=r.zoomFactor!==void 0?r.zoomFactor:2,u=r.multiWorld!==void 0?r.multiWorld:!1,c=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,h=r.showFullExtent!==void 0?r.showFullExtent:!1,f=X5(r.projection,"EPSG:3857"),A=f.getExtent();let d=r.constrainOnlyCenter,p=r.extent;if(!u&&!p&&f.isGlobal()&&(d=!1,p=A),r.resolutions!==void 0){const y=r.resolutions;t=y[s],n=y[o]!==void 0?y[o]:y[y.length-1],r.constrainResolution?e=wj(y,c,!d&&p,h):e=LT(t,n,c,!d&&p,h)}else{const v=(A?Math.max(Mn(A),qa(A)):360*Kg.degrees/f.getMetersPerUnit())/H5/Math.pow(2,GE),w=v/Math.pow(2,28-GE);t=r.maxResolution,t!==void 0?s=0:t=v/Math.pow(l,s),n=r.minResolution,n===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?n=t/Math.pow(l,o):n=v/Math.pow(l,o):n=w),o=s+Math.floor(Math.log(t/n)/Math.log(l)),n=t/Math.pow(l,o-s),r.constrainResolution?e=_j(l,t,n,c,!d&&p,h):e=LT(t,n,c,!d&&p,h)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:s,zoomFactor:l}}function Wj(r){if(r.enableRotation!==void 0?r.enableRotation:!0){const t=r.constrainRotation;return t===void 0||t===!0?bj():t===!1?DT:typeof t=="number"?Ej(t):DT}return r4}function Yj(r){return!(r.sourceCenter&&r.targetCenter&&!Wu(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function HE(r,e,t,n,i){const a=Math.cos(-i);let s=Math.sin(-i),o=r[0]*a-r[1]*s,l=r[1]*a+r[0]*s;o+=(e[0]/2-t[0])*n,l+=(t[1]-e[1]/2)*n,s=-s;const u=o*a-l*s,c=l*a+o*s;return[u,c]}class v1 extends Z6{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(hi.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(hi.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Mi(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Fn(e,$r.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof Qc?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let i;t.layerStatesArray?i=t.layerStatesArray.find(s=>s.layer===this):i=this.getLayerState();const a=this.getExtent();return d4(i,t.viewState)&&(!a||fo(a,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const n=this.getSource();if(n&&(t=n.getAttributions()),!t)return[];const i=e instanceof Qc?e.getViewStateAndExtent():e;let a=t(i);return Array.isArray(a)||(a=[a]),a}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(hi.MAP,e)}getMapInternal(){return this.get(hi.MAP)}setMap(e){this.mapPrecomposeKey_&&(Mi(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Mi(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Fn(e,_s.PRECOMPOSE,function(t){const i=t.frameState.layerStatesArray,a=this.getLayerState(!1);qn(!i.some(function(s){return s.layer===a.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),i.push(a)},this),this.mapRenderKey_=Fn(this,$r.CHANGE,e.render,e),this.changed())}setSource(e){this.set(hi.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function d4(r,e){if(!r.visible)return!1;const t=e.resolution;if(t<r.minResolution||t>=r.maxResolution)return!1;const n=e.zoom;return n>r.minZoom&&n<=r.maxZoom}function Xj(r,e,t,n,i){BR(r,e,t||0,n||r.length-1,i||Zj)}function BR(r,e,t,n,i){for(;n>t;){if(n-t>600){var a=n-t+1,s=e-t+1,o=Math.log(a),l=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*l*(a-l)/a)*(s-a/2<0?-1:1),c=Math.max(t,Math.floor(e-s*l/a+u)),h=Math.min(n,Math.floor(e+(a-s)*l/a+u));BR(r,e,c,h,i)}var f=r[e],A=t,d=n;for(am(r,t,e),i(r[n],f)>0&&am(r,t,n);A<d;){for(am(r,A,d),A++,d--;i(r[A],f)<0;)A++;for(;i(r[d],f)>0;)d--}i(r[t],f)===0?am(r,t,d):(d++,am(r,d,n)),d<=e&&(t=d+1),e<=d&&(n=d-1)}}function am(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}function Zj(r,e){return r<e?-1:r>e?1:0}let TR=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!_y(e,t))return n;const i=this.toBBox,a=[];for(;t;){for(let s=0;s<t.children.length;s++){const o=t.children[s],l=t.leaf?i(o):o;_y(e,l)&&(t.leaf?n.push(o):qE(e,l)?this._all(o,n):a.push(o))}t=a.pop()}return n}collides(e){let t=this.data;if(!_y(e,t))return!1;const n=[];for(;t;){for(let i=0;i<t.children.length;i++){const a=t.children[i],s=t.leaf?this.toBBox(a):a;if(_y(e,s)){if(t.leaf||qE(e,s))return!0;n.push(a)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=tg([]),this}remove(e,t){if(!e)return this;let n=this.data;const i=this.toBBox(e),a=[],s=[];let o,l,u;for(;n||a.length;){if(n||(n=a.pop(),l=a[a.length-1],o=s.pop(),u=!0),n.leaf){const c=Jj(e,n.children,t);if(c!==-1)return n.children.splice(c,1),a.push(n),this._condense(a),this}!u&&!n.leaf&&qE(n,i)?(a.push(n),s.push(o),o=0,l=n,n=n.children[0]):l?(o++,n=l.children[o],u=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,i){const a=n-t+1;let s=this._maxEntries,o;if(a<=s)return o=tg(e.slice(t,n+1)),T0(o,this.toBBox),o;i||(i=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,i-1))),o=tg([]),o.leaf=!1,o.height=i;const l=Math.ceil(a/s),u=l*Math.ceil(Math.sqrt(s));UT(e,t,n,u,this.compareMinX);for(let c=t;c<=n;c+=u){const h=Math.min(c+u-1,n);UT(e,c,h,l,this.compareMinY);for(let f=c;f<=h;f+=l){const A=Math.min(f+l-1,h);o.children.push(this._build(e,f,A,i-1))}}return T0(o,this.toBBox),o}_chooseSubtree(e,t,n,i){for(;i.push(t),!(t.leaf||i.length-1===n);){let a=1/0,s=1/0,o;for(let l=0;l<t.children.length;l++){const u=t.children[l],c=zE(u),h=r$(e,u)-c;h<s?(s=h,a=c<a?c:a,o=u):h===s&&c<a&&(a=c,o=u)}t=o||t.children[0]}return t}_insert(e,t,n){const i=n?e:this.toBBox(e),a=[],s=this._chooseSubtree(i,this.data,t,a);for(s.children.push(e),Bm(s,i);t>=0&&a[t].children.length>this._maxEntries;)this._split(a,t),t--;this._adjustParentBBoxes(i,a,t)}_split(e,t){const n=e[t],i=n.children.length,a=this._minEntries;this._chooseSplitAxis(n,a,i);const s=this._chooseSplitIndex(n,a,i),o=tg(n.children.splice(s,n.children.length-s));o.height=n.height,o.leaf=n.leaf,T0(n,this.toBBox),T0(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(n,o)}_splitRoot(e,t){this.data=tg([e,t]),this.data.height=e.height+1,this.data.leaf=!1,T0(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let i,a=1/0,s=1/0;for(let o=t;o<=n-t;o++){const l=Sm(e,0,o,this.toBBox),u=Sm(e,o,n,this.toBBox),c=n$(l,u),h=zE(l)+zE(u);c<a?(a=c,i=o,s=h<s?h:s):c===a&&h<s&&(s=h,i=o)}return i||n-t}_chooseSplitAxis(e,t,n){const i=e.leaf?this.compareMinX:e$,a=e.leaf?this.compareMinY:t$,s=this._allDistMargin(e,t,n,i),o=this._allDistMargin(e,t,n,a);s<o&&e.children.sort(i)}_allDistMargin(e,t,n,i){e.children.sort(i);const a=this.toBBox,s=Sm(e,0,t,a),o=Sm(e,n-t,n,a);let l=wy(s)+wy(o);for(let u=t;u<n-t;u++){const c=e.children[u];Bm(s,e.leaf?a(c):c),l+=wy(s)}for(let u=n-t-1;u>=t;u--){const c=e.children[u];Bm(o,e.leaf?a(c):c),l+=wy(o)}return l}_adjustParentBBoxes(e,t,n){for(let i=n;i>=0;i--)Bm(t[i],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():T0(e[t],this.toBBox)}};function Jj(r,e,t){if(!t)return e.indexOf(r);for(let n=0;n<e.length;n++)if(t(r,e[n]))return n;return-1}function T0(r,e){Sm(r,0,r.children.length,e,r)}function Sm(r,e,t,n,i){i||(i=tg(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let a=e;a<t;a++){const s=r.children[a];Bm(i,r.leaf?n(s):s)}return i}function Bm(r,e){return r.minX=Math.min(r.minX,e.minX),r.minY=Math.min(r.minY,e.minY),r.maxX=Math.max(r.maxX,e.maxX),r.maxY=Math.max(r.maxY,e.maxY),r}function e$(r,e){return r.minX-e.minX}function t$(r,e){return r.minY-e.minY}function zE(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function wy(r){return r.maxX-r.minX+(r.maxY-r.minY)}function r$(r,e){return(Math.max(e.maxX,r.maxX)-Math.min(e.minX,r.minX))*(Math.max(e.maxY,r.maxY)-Math.min(e.minY,r.minY))}function n$(r,e){const t=Math.max(r.minX,e.minX),n=Math.max(r.minY,e.minY),i=Math.min(r.maxX,e.maxX),a=Math.min(r.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,a-n)}function qE(r,e){return r.minX<=e.minX&&r.minY<=e.minY&&e.maxX<=r.maxX&&e.maxY<=r.maxY}function _y(r,e){return e.minX<=r.maxX&&e.minY<=r.maxY&&e.maxX>=r.minX&&e.maxY>=r.minY}function tg(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function UT(r,e,t,n,i){const a=[e,t];for(;a.length;){if(t=a.pop(),e=a.pop(),t-e<=n)continue;const s=e+Math.ceil((t-e)/n/2)*n;Xj(r,s,e,t,i),a.push(e,s,s,t)}}const pr={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function QT(r){return r[0]>0&&r[1]>0}function i$(r,e,t){return t===void 0&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function Pl(r,e){return Array.isArray(r)?r:(e===void 0?e=[r,r]:(e[0]=r,e[1]=r),e)}class c_{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Pl(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new c_({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Vr()}getImage(e){return Vr()}getHitDetectionImage(){return Vr()}getPixelRatio(e){return 1}getImageState(){return Vr()}getImageSize(){return Vr()}getOrigin(){return Vr()}getSize(){return Vr()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Pl(e)}listenImageChange(e){Vr()}load(){Vr()}unlistenImageChange(e){Vr()}ready(){return Promise.resolve()}}const Nv={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},mo={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};mo.max=mo.whitepoint[2].D65;mo.rgb=function(r,e){e=e||mo.whitepoint[2].E;var t=r[0]/e[0],n=r[1]/e[1],i=r[2]/e[2],a,s,o;return a=t*3.240969941904521+n*-1.537383177570093+i*-.498610760293,s=t*-.96924363628087+n*1.87596750150772+i*.041555057407175,o=t*.055630079696993+n*-.20397695888897+i*1.056971514242878,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=Math.min(Math.max(0,a),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[a*255,s*255,o*255]};Nv.xyz=function(r,e){var t=r[0]/255,n=r[1]/255,i=r[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var a=t*.41239079926595+n*.35758433938387+i*.18048078840183,s=t*.21263900587151+n*.71516867876775+i*.072192315360733,o=t*.019330818715591+n*.11919477979462+i*.95053215224966;return e=e||mo.whitepoint[2].E,[a*e[0],s*e[1],o*e[2]]};var g4={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(r,e,t){var n,i,a,s,o,l,u,c,h,f,A,d,p;if(a=r[0],s=r[1],o=r[2],a===0)return[0,0,0];var y=.0011070564598794539;return e=e||"D65",t=t||2,h=mo.whitepoint[t][e][0],f=mo.whitepoint[t][e][1],A=mo.whitepoint[t][e][2],d=4*h/(h+15*f+3*A),p=9*f/(h+15*f+3*A),n=s/(13*a)+d||0,i=o/(13*a)+p||0,u=a>8?f*Math.pow((a+16)/116,3):f*a*y,l=u*9*n/(4*i)||0,c=u*(12-3*n-20*i)/(4*i)||0,[l,u,c]}};mo.luv=function(r,e,t){var n,i,a,s,o,l,u,c,h,f,A,d,p,y=.008856451679035631,v=903.2962962962961;e=e||"D65",t=t||2,h=mo.whitepoint[t][e][0],f=mo.whitepoint[t][e][1],A=mo.whitepoint[t][e][2],d=4*h/(h+15*f+3*A),p=9*f/(h+15*f+3*A),l=r[0],u=r[1],c=r[2],n=4*l/(l+15*u+3*c)||0,i=9*u/(l+15*u+3*c)||0;var w=u/f;return a=w<=y?v*w:116*Math.pow(w,1/3)-16,s=13*a*(n-d),o=13*a*(i-p),[a,s,o]};var NR={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(r){var e=r[0],t=r[1],n=r[2],i,a,s;return s=n/360*2*Math.PI,i=t*Math.cos(s),a=t*Math.sin(s),[e,i,a]},xyz:function(r){return g4.xyz(NR.luv(r))}};g4.lchuv=function(r){var e=r[0],t=r[1],n=r[2],i=Math.sqrt(t*t+n*n),a=Math.atan2(n,t),s=a*360/2/Math.PI;return s<0&&(s+=360),[e,i,s]};mo.lchuv=function(r){return g4.lchuv(mo.luv(r))};const KC={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(const r in KC)Object.freeze(KC[r]);const GT=Object.freeze(KC);var HT={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function a$(r){var c,h;var e,t=[],n=1,i;if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(r=String(r).toLowerCase(),GT[r])t=GT[r].slice(),i="rgb";else if(r==="transparent")n=0,i="rgb",t=[0,0,0];else if(r[0]==="#"){var a=r.slice(1),s=a.length,o=s<=4;n=1,o?(t=[parseInt(a[0]+a[0],16),parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16)],s===4&&(n=parseInt(a[3]+a[3],16)/255)):(t=[parseInt(a[0]+a[1],16),parseInt(a[2]+a[3],16),parseInt(a[4]+a[5],16)],s===8&&(n=parseInt(a[6]+a[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),i="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(r)){var l=e[1];i=l.replace(/a$/,"");var u=i==="cmyk"?4:i==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),i==="color"&&(i=t.shift()),t=t.map(function(f,A){if(f[f.length-1]==="%")return f=parseFloat(f)/100,A===3?f:i==="rgb"?f*255:i[0]==="h"||i[0]==="l"&&!A?f*100:i==="lab"?f*125:i==="lch"?A<2?f*150:f*360:i[0]==="o"&&!A?f:i==="oklab"?f*.4:i==="oklch"?A<2?f*.4:f*360:f;if(i[A]==="h"||A===2&&i[i.length-1]==="h"){if(HT[f]!==void 0)return HT[f];if(f.endsWith("deg"))return parseFloat(f);if(f.endsWith("turn"))return parseFloat(f)*360;if(f.endsWith("grad"))return parseFloat(f)*360/400;if(f.endsWith("rad"))return parseFloat(f)*180/Math.PI}return f==="none"?0:parseFloat(f)}),n=t.length>u?t.pop():1}else/[0-9](?:\s|\/|,)/.test(r)&&(t=r.match(/([0-9]+)/g).map(function(f){return parseFloat(f)}),i=((h=(c=r.match(/([a-z])/ig))==null?void 0:c.join(""))==null?void 0:h.toLowerCase())||"rgb");return{space:i,values:t,alpha:n}}var jE={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100,i,a,s,o,l,u=0;if(t===0)return l=n*255,[l,l,l];for(a=n<.5?n*(1+t):n+t-n*t,i=2*n-a,o=[0,0,0];u<3;)s=e+1/3*-(u-1),s<0?s++:s>1&&s--,l=6*s<1?i+(a-i)*6*s:2*s<1?a:3*s<2?i+(a-i)*(2/3-s)*6:i,o[u++]=l*255;return o}};Nv.hsl=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,i=Math.min(e,t,n),a=Math.max(e,t,n),s=a-i,o,l,u;return a===i?o=0:e===a?o=(t-n)/s:t===a?o=2+(n-e)/s:n===a&&(o=4+(e-t)/s),o=Math.min(o*60,360),o<0&&(o+=360),u=(i+a)/2,a===i?l=0:u<=.5?l=s/(a+i):l=s/(2-a-i),[o,l*100,u*100]};function s$(r){Array.isArray(r)&&r.raw&&(r=String.raw(...arguments)),r instanceof Number&&(r=+r);var e,t=a$(r);if(!t.space)return[];const n=t.space[0]==="h"?jE.min:Nv.min,i=t.space[0]==="h"?jE.max:Nv.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],n[0]),i[0]),e[1]=Math.min(Math.max(t.values[1],n[1]),i[1]),e[2]=Math.min(Math.max(t.values[2],n[2]),i[2]),t.space[0]==="h"&&(e=jE.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}function o$(r){return typeof r=="string"?r:m4(r)}const l$=1024,sm={};let $E=0;function u$(r){if(r.length===4)return r;const e=r.slice();return e[3]=1,e}function zT(r){const e=mo.lchuv(Nv.xyz(r));return e[3]=r[3],e}function c$(r){const e=mo.rgb(NR.xyz(r));return e[3]=r[3],e}function p4(r){if(sm.hasOwnProperty(r))return sm[r];if($E>=l$){let t=0;for(const n in sm)t++&3||(delete sm[n],--$E)}const e=s$(r);if(e.length!==4)throw new Error('Failed to parse "'+r+'" as color');for(const t of e)if(isNaN(t))throw new Error('Failed to parse "'+r+'" as color');return IR(e),sm[r]=e,++$E,e}function Pd(r){return Array.isArray(r)?r:p4(r)}function IR(r){return r[0]=ea(r[0]+.5|0,0,255),r[1]=ea(r[1]+.5|0,0,255),r[2]=ea(r[2]+.5|0,0,255),r[3]=ea(r[3],0,1),r}function m4(r){let e=r[0];e!=(e|0)&&(e=e+.5|0);let t=r[1];t!=(t|0)&&(t=t+.5|0);let n=r[2];n!=(n|0)&&(n=n+.5|0);const i=r[3]===void 0?1:Math.round(r[3]*1e3)/1e3;return"rgba("+e+","+t+","+n+","+i+")"}function h$(r){try{return p4(r),!0}catch{return!1}}const SA=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",f$=SA.includes("firefox"),A$=SA.includes("safari")&&!SA.includes("chrom"),d$=A$&&(SA.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(SA)),g$=SA.includes("webkit")&&!SA.includes("edge"),v4=SA.includes("macintosh"),FR=typeof devicePixelRatio<"u"?devicePixelRatio:1,MR=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,LR=typeof Image<"u"&&Image.prototype.decode,DR=function(){let r=!1;try{const e=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return r}();function Ts(r,e,t,n){let i;return t&&t.length?i=t.shift():MR?i=new OffscreenCanvas(r||300,e||300):i=document.createElement("canvas"),r&&(i.width=r),e&&(i.height=e),i.getContext("2d",n)}let KE;function Ix(){return KE||(KE=Ts(1,1)),KE}function h_(r){const e=r.canvas;e.width=1,e.height=1,r.clearRect(0,0,1,1)}function p$(r){let e=r.offsetWidth;const t=getComputedStyle(r);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function m$(r){let e=r.offsetHeight;const t=getComputedStyle(r);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function qT(r,e){const t=e.parentNode;t&&t.replaceChild(r,e)}function Fx(r){return r&&r.parentNode?r.parentNode.removeChild(r):null}function kR(r){for(;r.lastChild;)r.removeChild(r.lastChild)}function v$(r,e){const t=r.childNodes;for(let n=0;;++n){const i=t[n],a=e[n];if(!i&&!a)break;if(i!==a){if(!i){r.appendChild(a);continue}if(!a){r.removeChild(i),--n;continue}r.insertBefore(a,i)}}}class y4 extends A1{constructor(e,t,n,i){super(),this.extent=e,this.pixelRatio_=n,this.resolution=t,this.state=typeof i=="function"?pr.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent($r.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==pr.IDLE&&this.loader){this.state=pr.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;X6(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(n=>{"image"in n&&(this.image_=n.image),"extent"in n&&(this.extent=n.extent),"resolution"in n&&(this.resolution=n.resolution),"pixelRatio"in n&&(this.pixelRatio_=n.pixelRatio),(n instanceof HTMLImageElement||n instanceof ImageBitmap||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement)&&(this.image_=n),this.state=pr.LOADED}).catch(n=>{this.state=pr.ERROR,console.error(n)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function y$(r,e,t){const n=r;let i=!0,a=!1,s=!1;const o=[Ex(n,$r.LOAD,function(){s=!0,a||e()})];return n.src&&LR?(a=!0,n.decode().then(function(){i&&e()}).catch(function(l){i&&(s?e():t())})):o.push(Ex(n,$r.ERROR,t)),function(){i=!1,o.forEach(Mi)}}function x$(r,e){return new Promise((t,n)=>{function i(){s(),t(r)}function a(){s(),n(new Error("Image load error"))}function s(){r.removeEventListener("load",i),r.removeEventListener("error",a)}r.addEventListener("load",i),r.addEventListener("error",a)})}function w$(r,e){return e&&(r.src=e),r.src&&LR?new Promise((t,n)=>r.decode().then(()=>t(r)).catch(i=>r.complete&&r.width?t(r):n(i))):x$(r)}class _${constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,n){const i=VE(e,t,n);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,n){const i=VE(e,t,n);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,n,i,a){const s=VE(e,t,n),o=s in this.cache_;this.cache_[s]=i,a&&(i.getImageState()===pr.IDLE&&i.load(),i.getImageState()===pr.LOADING?i.ready().then(()=>{this.patternCache_[s]=Ix().createPattern(i.getImage(1),"repeat")}):this.patternCache_[s]=Ix().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function VE(r,e,t){const n=t?Pd(t):"null";return e+":"+r+":"+n}const zc=new _$;let om=null;class E$ extends A1{constructor(e,t,n,i,a){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=a,this.imageState_=i===void 0?pr.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===pr.LOADED){om||(om=Ts(1,1,void 0,{willReadFrequently:!0})),om.drawImage(this.image_,0,0);try{om.getImageData(0,0,1,1),this.tainted_=!1}catch{om=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent($r.CHANGE)}handleImageError_(){this.imageState_=pr.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=pr.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=Ts(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===pr.IDLE){this.image_||this.initializeImage_(),this.imageState_=pr.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&w$(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==pr.LOADED)return;const t=this.image_,n=document.createElement("canvas");n.width=Math.ceil(t.width*e),n.height=Math.ceil(t.height*e);const i=n.getContext("2d");i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=o$(this.color_),i.fillRect(0,0,n.width/e,n.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=n}ready(){return this.ready_||(this.ready_=new Promise(e=>{this.imageState_===pr.LOADED||this.imageState_===pr.ERROR?e():this.addEventListener($r.CHANGE,function t(){(this.imageState_===pr.LOADED||this.imageState_===pr.ERROR)&&(this.removeEventListener($r.CHANGE,t),e())})})),this.ready_}}function x4(r,e,t,n,i,a){let s=e===void 0?void 0:zc.get(e,t,i);return s||(s=new E$(r,r&&"src"in r?r.src||void 0:e,t,n,i),zc.set(e,t,i,s,a)),a&&s&&!zc.getPattern(e,t,i)&&zc.set(e,t,i,s,a),s}function qc(r){return r?Array.isArray(r)?m4(r):typeof r=="object"&&"src"in r?b$(r):r:null}function b$(r){if(!r.offset||!r.size)return zc.getPattern(r.src,"anonymous",r.color);const e=r.src+":"+r.offset,t=zc.getPattern(e,void 0,r.color);if(t)return t;const n=zc.get(r.src,"anonymous",null);if(n.getImageState()!==pr.LOADED)return null;const i=Ts(r.size[0],r.size[1]);return i.drawImage(n.getImage(1),r.offset[0],r.offset[1],r.size[0],r.size[1],0,0,r.size[0],r.size[1]),x4(i.canvas,e,void 0,pr.LOADED,r.color,!0),zc.getPattern(e,void 0,r.color)}const Ey="ol-hidden",C$="ol-selectable",y1="ol-unselectable",w4="ol-control",jT="ol-collapsed",S$=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),$T=["style","variant","weight","size","lineHeight","family"],RR=function(r){const e=r.match(S$);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,i=$T.length;n<i;++n){const a=e[n+1];a!==void 0&&(t[$T[n]]=a)}return t.families=t.family.split(/,\s?/),t},OR="10px sans-serif",dl="#000",Zg="round",Xh=[],Zh=0,Jg="round",Iv=10,Fv="#000",Mv="center",Mx="middle",wd=[0,0,0,0],Lv=1,Rh=new uc;let rg=null,VC;const WC={},B$=function(){const e="32px ",t=["monospace","serif"],n=t.length,i="wmytzilWMYTZIL@#/&?$%10";let a,s;function o(u,c,h){let f=!0;for(let A=0;A<n;++A){const d=t[A];if(s=Lx(u+" "+c+" "+e+d,i),h!=d){const p=Lx(u+" "+c+" "+e+h+","+d,i);f=f&&p!=s}}return!!f}function l(){let u=!0;const c=Rh.getKeys();for(let h=0,f=c.length;h<f;++h){const A=c[h];Rh.get(A)<100&&(o.apply(this,A.split(`
`))?(Wd(WC),rg=null,VC=void 0,Rh.set(A,100)):(Rh.set(A,Rh.get(A)+1,!0),u=!1))}u&&(clearInterval(a),a=void 0)}return function(u){const c=RR(u);if(!c)return;const h=c.families;for(let f=0,A=h.length;f<A;++f){const d=h[f],p=c.style+`
`+c.weight+`
`+d;Rh.get(p)===void 0&&(Rh.set(p,100,!0),o(c.style,c.weight,d)||(Rh.set(p,0,!0),a===void 0&&(a=setInterval(l,32))))}}}(),T$=function(){let r;return function(e){let t=WC[e];if(t==null){if(MR){const n=RR(e),i=PR(e,"Žg");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=e,document.body.appendChild(r),t=r.offsetHeight,document.body.removeChild(r);WC[e]=t}return t}}();function PR(r,e){return rg||(rg=Ts(1,1)),r!=VC&&(rg.font=r,VC=rg.font),rg.measureText(e)}function Lx(r,e){return PR(r,e).width}function KT(r,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((i,a)=>Math.max(i,Lx(r,a)),0);return t[e]=n,n}function N$(r,e){const t=[],n=[],i=[];let a=0,s=0,o=0,l=0;for(let u=0,c=e.length;u<=c;u+=2){const h=e[u];if(h===`
`||u===c){a=Math.max(a,s),i.push(s),s=0,o+=l,l=0;continue}const f=e[u+1]||r.font,A=Lx(f,h);t.push(A),s+=A;const d=T$(f);n.push(d),l=Math.max(l,d)}return{width:a,height:o,widths:t,heights:n,lineWidths:i}}function I$(r,e,t,n,i,a,s,o,l,u,c){r.save(),t!==1&&(r.globalAlpha===void 0?r.globalAlpha=h=>h.globalAlpha*=t:r.globalAlpha*=t),e&&r.transform.apply(r,e),n.contextInstructions?(r.translate(l,u),r.scale(c[0],c[1]),F$(n,r)):c[0]<0||c[1]<0?(r.translate(l,u),r.scale(c[0],c[1]),r.drawImage(n,i,a,s,o,0,0,s,o)):r.drawImage(n,i,a,s,o,l,u,s*c[0],o*c[1]),r.restore()}function F$(r,e){const t=r.contextInstructions;for(let n=0,i=t.length;n<i;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}class f_ extends c_{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?pr.LOADING:pr.LOADED,this.imageState_===pr.LOADING&&this.ready().then(()=>this.imageState_=pr.LOADED),this.render()}clone(){const e=this.getScale(),t=new f_({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let t=this.canvases_[e];if(!t){const n=this.renderOptions_,i=Ts(n.size*e,n.size*e);this.draw_(n,i,e),t=i.canvas,this.canvases_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius_,a=this.radius2_===void 0?i:this.radius2_;if(i<a){const S=i;i=a,a=S}const s=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/s,l=a*Math.sin(o),u=Math.sqrt(a*a-l*l),c=i-u,h=Math.sqrt(l*l+c*c),f=h/l;if(e==="miter"&&f<=n)return f*t;const A=t/2/f,d=t/2*(c/h),y=Math.sqrt((i+A)*(i+A)+d*d)-i;if(this.radius2_===void 0||e==="bevel")return y*2;const v=i*Math.sin(o),w=Math.sqrt(i*i-v*v),x=a-w,C=Math.sqrt(v*v+x*x)/v;if(C<=n){const S=C*t/2-a-i;return 2*Math.max(y,S)}return y*2}createRenderOptions(){let e=Zg,t=Jg,n=0,i=null,a=0,s,o=0;this.stroke_&&(s=qc(this.stroke_.getColor()??Fv),o=this.stroke_.getWidth()??Lv,i=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Jg,e=this.stroke_.getLineCap()??Zg,n=this.stroke_.getMiterLimit()??Iv);const l=this.calculateLineJoinSize_(t,o,n),u=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*u+l);return{strokeStyle:s,strokeWidth:o,size:c,lineCap:e,lineDash:i,lineDashOffset:a,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=dl),t.fillStyle=qc(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),i=0;typeof n=="string"&&(n=Pd(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0&&(t=Ts(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const n=this.radius_;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const i=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const a=this.angle_-Math.PI/2,s=2*Math.PI/t;for(let o=0;o<t;o++){const l=a+o*s,u=o%2===0?n:i;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=dl,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class qs extends f_{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new qs({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}class _n{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new _n({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=x4(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===pr.IDLE&&t.load(),t.getImageState()===pr.LOADING&&(this.patternImage_=t)}this.color_=e}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class hn{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new hn({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class En{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=VT,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new En({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=VT,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function M$(r){let e;if(typeof r=="function")e=r;else{let t;Array.isArray(r)?t=r:(qn(typeof r.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[r]),e=function(){return t}}return e}let WE=null;function UR(r,e){if(!WE){const t=new _n({color:"rgba(255,255,255,0.4)"}),n=new hn({color:"#3399CC",width:1.25});WE=[new En({image:new qs({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return WE}function _4(){const r={},e=[255,255,255,1],t=[0,153,255,1],n=3;return r.Polygon=[new En({fill:new _n({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new En({stroke:new hn({color:e,width:n+2})}),new En({stroke:new hn({color:t,width:n})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new En({image:new qs({radius:n*2,fill:new _n({color:t}),stroke:new hn({color:e,width:n/2})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function VT(r){return r.getGeometry()}function WT(r,e,t,n){return t!==void 0&&n!==void 0?[t/r,n/e]:t!==void 0?t/r:n!==void 0?n/e:1}class xp extends c_{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,a=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:a,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const s=e.img!==void 0?e.img:null;let o=e.src;qn(!(o!==void 0&&s),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&s&&(o=s.src||Or(s)),qn(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),qn(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=pr.IDLE:s!==void 0&&("complete"in s?s.complete?l=s.src?pr.LOADED:pr.IDLE:l=pr.LOADING:l=pr.LOADED),this.color_=e.color!==void 0?Pd(e.color):null,this.iconImage_=x4(s,o,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let u,c;if(e.size)[u,c]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)u=h.width,c=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const f=()=>{if(this.unlistenImageChange(f),!this.initialOptions_)return;const A=this.iconImage_.getSize();this.setScale(WT(A[0],A[1],e.width,e.height))};this.listenImageChange(f);return}}u!==void 0&&this.setScale(WT(u,c,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new xp({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==pr.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==pr.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener($r.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener($r.CHANGE,e)}ready(){return this.iconImage_.ready()}}const L$="#333";class rc{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Pl(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new _n({color:L$}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new rc({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Pl(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let t0=0;const wp=0,fa=1<<t0++,Tr=1<<t0++,kl=1<<t0++,ws=1<<t0++,Xc=1<<t0++,Jm=1<<t0++,ao=Math.pow(2,t0)-1,QR={[fa]:"boolean",[Tr]:"number",[kl]:"string",[ws]:"color",[Xc]:"number[]",[Jm]:"size"},D$=Object.keys(QR).map(Number).sort(Wh);function yo(r){const e=[];for(const t of D$)k$(r,t)&&e.push(QR[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function k$(r,e){return(r&e)===e}function Zc(r,e){return!!(r&e)}function A_(r,e){return r===e}class uA{constructor(e,t){this.type=e,this.value=t}}class R${constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}}function GR(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function O$(r){switch(r){case"string":return kl;case"color":return ws;case"number":return Tr;case"boolean":return fa;case"number[]":return Xc;default:throw new Error(`Unrecognized type hint: ${r}`)}}function pi(r,e,t){switch(typeof r){case"boolean":return new uA(fa,r);case"number":return new uA(t===Jm?Jm:Tr,r);case"string":{let i=kl;return h$(r)&&(i|=ws),A_(i&t,wp)||(i&=t),new uA(i,r)}}if(!Array.isArray(r))throw new Error("Expression must be an array or a primitive value");if(r.length===0)throw new Error("Empty expression");if(typeof r[0]=="string")return W$(r,e,t);for(const i of r)if(typeof i!="number")throw new Error("Expected an array of numbers");let n=Xc;return r.length===2?n|=Jm:(r.length===3||r.length===4)&&(n|=ws),t&&(n&=t),new uA(n,r)}const Lt={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},P$={[Lt.Get]:Jr(([r,e])=>e!==void 0?O$(e.value):ao,Bn(1,2),U$),[Lt.Var]:Jr(([r])=>r.type,Bn(1,1),Q$),[Lt.Id]:Jr(Tr|kl,lm,G$),[Lt.Concat]:Jr(kl,Bn(2,1/0),ei(ao)),[Lt.GeometryType]:Jr(kl,lm,H$),[Lt.Resolution]:Jr(Tr,lm),[Lt.Zoom]:Jr(Tr,lm),[Lt.Time]:Jr(Tr,lm),[Lt.Any]:Jr(fa,Bn(2,1/0),ei(fa)),[Lt.All]:Jr(fa,Bn(2,1/0),ei(fa)),[Lt.Not]:Jr(fa,Bn(1,1),ei(fa)),[Lt.Equal]:Jr(fa,Bn(2,2),ei(ao),Qf),[Lt.NotEqual]:Jr(fa,Bn(2,2),ei(ao),Qf),[Lt.GreaterThan]:Jr(fa,Bn(2,2),ei(ao),Qf),[Lt.GreaterThanOrEqualTo]:Jr(fa,Bn(2,2),ei(ao),Qf),[Lt.LessThan]:Jr(fa,Bn(2,2),ei(ao),Qf),[Lt.LessThanOrEqualTo]:Jr(fa,Bn(2,2),ei(ao),Qf),[Lt.Multiply]:Jr(r=>{let e=Tr|ws;for(let t=0;t<r.length;t++)e&=r[t].type;return e},Bn(2,1/0),ei(Tr|ws),Qf),[Lt.Coalesce]:Jr(r=>{let e=ao;for(let t=1;t<r.length;t+=2)e&=r[t].type;return e&=r[r.length-1].type,e},Bn(2,1/0),ei(ao),Qf),[Lt.Divide]:Jr(Tr,Bn(2,2),ei(Tr)),[Lt.Add]:Jr(Tr,Bn(2,1/0),ei(Tr)),[Lt.Subtract]:Jr(Tr,Bn(2,2),ei(Tr)),[Lt.Clamp]:Jr(Tr,Bn(3,3),ei(Tr)),[Lt.Mod]:Jr(Tr,Bn(2,2),ei(Tr)),[Lt.Pow]:Jr(Tr,Bn(2,2),ei(Tr)),[Lt.Abs]:Jr(Tr,Bn(1,1),ei(Tr)),[Lt.Floor]:Jr(Tr,Bn(1,1),ei(Tr)),[Lt.Ceil]:Jr(Tr,Bn(1,1),ei(Tr)),[Lt.Round]:Jr(Tr,Bn(1,1),ei(Tr)),[Lt.Sin]:Jr(Tr,Bn(1,1),ei(Tr)),[Lt.Cos]:Jr(Tr,Bn(1,1),ei(Tr)),[Lt.Atan]:Jr(Tr,Bn(1,2),ei(Tr)),[Lt.Sqrt]:Jr(Tr,Bn(1,1),ei(Tr)),[Lt.Match]:Jr(r=>{let e=ao;for(let t=2;t<r.length;t+=2)e&=r[t].type;return e&=r[r.length-1].type,e},Bn(4,1/0),YT,q$),[Lt.Between]:Jr(fa,Bn(3,3),ei(Tr)),[Lt.Interpolate]:Jr(r=>{let e=ws|Tr;for(let t=3;t<r.length;t+=2)e&=r[t].type;return e},Bn(6,1/0),YT,j$),[Lt.Case]:Jr(r=>{let e=ao;for(let t=1;t<r.length;t+=2)e&=r[t].type;return e&=r[r.length-1].type,e},Bn(3,1/0),z$,$$),[Lt.In]:Jr(fa,Bn(2,2),K$),[Lt.Number]:Jr(Tr,Bn(1,1/0),ei(ao)),[Lt.String]:Jr(kl,Bn(1,1/0),ei(ao)),[Lt.Array]:Jr(r=>r.length===2?Xc|Jm:r.length===3||r.length===4?Xc|ws:Xc,Bn(1,1/0),ei(Tr)),[Lt.Color]:Jr(ws,Bn(1,4),ei(Tr)),[Lt.Band]:Jr(Tr,Bn(1,3),ei(Tr)),[Lt.Palette]:Jr(ws,Bn(2,2),V$),[Lt.ToString]:Jr(kl,Bn(1,1),ei(fa|Tr|kl|ws))};function U$(r,e){const t=pi(r[1],e);if(!(t instanceof uA))throw new Error("Expected a literal argument for get operation");if(typeof t.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(t.value),r.length===3){const n=pi(r[2],e);return[t,n]}return[t]}function Q$(r,e,t,n){const i=r[1];if(typeof i!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(i),!("variables"in e.style)||e.style.variables[i]===void 0)return[new uA(ao,i)];const a=e.style.variables[i],s=pi(a,e);if(s.value=i,n&&!Zc(n,s.type))throw new Error(`The variable ${i} has type ${yo(s.type)} but the following type was expected: ${yo(n)}`);return[s]}function G$(r,e){e.featureId=!0}function H$(r,e){e.geometryType=!0}function lm(r,e){const t=r[0];if(r.length!==1)throw new Error(`Expected no arguments for ${t} operation`);return[]}function Bn(r,e){return function(t,n){const i=t[0],a=t.length-1;if(r===e){if(a!==r){const s=r===1?"":"s";throw new Error(`Expected ${r} argument${s} for ${i}, got ${a}`)}}else if(a<r||a>e){const s=e===1/0?`${r} or more`:`${r} to ${e}`;throw new Error(`Expected ${s} arguments for ${i}, got ${a}`)}}}function ei(r){return function(e,t){const n=e[0],i=e.length-1,a=new Array(i);for(let s=0;s<i;++s){const o=pi(e[s+1],t);if(!Zc(r,o.type)){const l=yo(r),u=yo(o.type);throw new Error(`Unexpected type for argument ${s} of ${n} operation, got ${l} but expected ${u}`)}o.type&=r,a[s]=o}return a}}function Qf(r,e,t){const n=r[0],i=r.length-1;let a=ao;for(let o=0;o<t.length;++o)a&=t[o].type;if(a===wp)throw new Error(`No common type could be found for arguments of ${n} operation`);const s=new Array(i);for(let o=0;o<i;++o)s[o]=pi(r[o+1],e,a);return s}function z$(r,e){const t=r[0],n=r.length-1;if(n%2===0)throw new Error(`An odd amount of arguments was expected for operation ${t}, got ${JSON.stringify(n)} instead`)}function YT(r,e){const t=r[0],n=r.length-1;if(n%2===1)throw new Error(`An even amount of arguments was expected for operation ${t}, got ${JSON.stringify(n)} instead`)}function q$(r,e,t,n){const i=r.length-1;let s=pi(r[1],e).type;const o=pi(r[r.length-1],e);let l=n!==void 0?n&o.type:o.type;const u=new Array(i-2);for(let h=0;h<i-2;h+=2){const f=pi(r[h+2],e),A=pi(r[h+3],e);s&=f.type,l&=A.type,u[h]=f,u[h+1]=A}const c=kl|Tr|fa;if(!Zc(c,s))throw new Error(`Expected an input of type ${yo(c)} for the interpolate operation, got ${yo(s)} instead`);if(s&=c,A_(l,wp))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(r));for(let h=0;h<i-2;h+=2){const f=pi(r[h+2],e,s),A=pi(r[h+3],e,l);u[h]=f,u[h+1]=A}return[pi(r[1],e,s),...u,pi(r[r.length-1],e,l)]}function j$(r,e,t,n){const i=r[1];let a;switch(i[0]){case"linear":a=1;break;case"exponential":if(a=i[1],typeof a!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(a)} instead`);break;default:a=null}if(!a)throw new Error(`Invalid interpolation type: ${JSON.stringify(i)}`);a=pi(a,e);let s=pi(r[2],e);if(!Zc(Tr,s.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${yo(s.type)} instead`);s=pi(r[2],e,Tr);const o=new Array(r.length-3);for(let l=0;l<o.length;l+=2){let u=pi(r[l+3],e);if(!Zc(Tr,u.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${yo(u.type)} at position ${l+2} instead`);let c=pi(r[l+4],e);if(!Zc(Tr|ws,c.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${yo(c.type)} at position ${l+3} instead`);u=pi(r[l+3],e,Tr),c=pi(r[l+4],e,Tr|ws),o[l]=u,o[l+1]=c}return[a,s,...o]}function $$(r,e,t,n){const i=pi(r[r.length-1],e,n);let a=n!==void 0?n&i.type:i.type;const s=new Array(r.length-1);for(let o=0;o<s.length-1;o+=2){const l=pi(r[o+1],e),u=pi(r[o+2],e,n);if(!Zc(fa,l.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${yo(l.type)} at position ${o} instead`);a&=u.type,s[o]=l,s[o+1]=u}if(A_(a,wp))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(r));for(let o=0;o<s.length-1;o+=2)s[o+1]=pi(r[o+2],e,a);return s[s.length-1]=pi(r[r.length-1],e,a),s}function K$(r,e){let t=r[2];if(!Array.isArray(t))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof t[0]=="string"){if(t[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(t[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');t=t[1]}let n=kl|Tr;const i=new Array(t.length);for(let s=0;s<i.length;s++){const o=pi(t[s],e);n&=o.type,i[s]=o}if(A_(n,wp))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(r));return[pi(r[1],e,n),...i]}function V$(r,e){const t=pi(r[1],e,Tr);if(t.type!==Tr)throw new Error(`The first argument of palette must be an number, got ${yo(t.type)} instead`);const n=r[2];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");const i=new Array(n.length);for(let a=0;a<i.length;a++){const s=pi(n[a],e,ws);if(!(s instanceof uA))throw new Error(`The palette color at index ${a} must be a literal value`);if(!Zc(s.type,ws))throw new Error(`The palette color at index ${a} should be of type color, got ${yo(s.type)} instead`);i[a]=s}return[t,...i]}function Jr(r,...e){return function(t,n,i){const a=t[0];let s=[];for(let l=0;l<e.length;l++)s=e[l](t,n,s,i)||s;let o=typeof r=="function"?r(s):r;if(i!==void 0){if(!Zc(o,i))throw new Error(`The following expression was expected to return ${yo(i)}, but returns ${yo(o)} instead: ${JSON.stringify(t)}`);o&=i}if(o===wp)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(t)}`);return new R$(o,a,...s)}}function W$(r,e,t){const n=r[0],i=P$[n];if(!i)throw new Error(`Unknown operator: ${n}`);return i(r,e,t)}function HR(r){if(!r)return"";const e=r.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return HR(r.getGeometries()[0]);default:return""}}function zR(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function hf(r,e,t){const n=pi(r,t);if(!Zc(e,n.type)){const i=yo(e),a=yo(n.type);throw new Error(`Expected expression to be of type ${i}, got ${a}`)}return oc(n)}function oc(r,e){if(r instanceof uA){if(r.type===ws&&typeof r.value=="string"){const n=p4(r.value);return function(){return n}}return function(){return r.value}}const t=r.operator;switch(t){case Lt.Number:case Lt.String:case Lt.Coalesce:return Y$(r);case Lt.Get:case Lt.Var:return X$(r);case Lt.Id:return n=>n.featureId;case Lt.GeometryType:return n=>n.geometryType;case Lt.Concat:{const n=r.args.map(i=>oc(i));return i=>"".concat(...n.map(a=>a(i).toString()))}case Lt.Resolution:return n=>n.resolution;case Lt.Any:case Lt.All:case Lt.Between:case Lt.In:case Lt.Not:return J$(r);case Lt.Equal:case Lt.NotEqual:case Lt.LessThan:case Lt.LessThanOrEqualTo:case Lt.GreaterThan:case Lt.GreaterThanOrEqualTo:return Z$(r);case Lt.Multiply:case Lt.Divide:case Lt.Add:case Lt.Subtract:case Lt.Clamp:case Lt.Mod:case Lt.Pow:case Lt.Abs:case Lt.Floor:case Lt.Ceil:case Lt.Round:case Lt.Sin:case Lt.Cos:case Lt.Atan:case Lt.Sqrt:return eK(r);case Lt.Case:return tK(r);case Lt.Match:return rK(r);case Lt.Interpolate:return nK(r);case Lt.ToString:return iK(r);default:throw new Error(`Unsupported operator ${t}`)}}function Y$(r,e){const t=r.operator,n=r.args.length,i=new Array(n);for(let a=0;a<n;++a)i[a]=oc(r.args[a]);switch(t){case Lt.Coalesce:return a=>{for(let s=0;s<n;++s){const o=i[s](a);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case Lt.Number:case Lt.String:return a=>{for(let s=0;s<n;++s){const o=i[s](a);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function X$(r,e){const n=r.args[0].value;switch(r.operator){case Lt.Get:return i=>i.properties[n];case Lt.Var:return i=>i.variables[n];default:throw new Error(`Unsupported accessor operator ${r.operator}`)}}function Z$(r,e){const t=r.operator,n=oc(r.args[0]),i=oc(r.args[1]);switch(t){case Lt.Equal:return a=>n(a)===i(a);case Lt.NotEqual:return a=>n(a)!==i(a);case Lt.LessThan:return a=>n(a)<i(a);case Lt.LessThanOrEqualTo:return a=>n(a)<=i(a);case Lt.GreaterThan:return a=>n(a)>i(a);case Lt.GreaterThanOrEqualTo:return a=>n(a)>=i(a);default:throw new Error(`Unsupported comparison operator ${t}`)}}function J$(r,e){const t=r.operator,n=r.args.length,i=new Array(n);for(let a=0;a<n;++a)i[a]=oc(r.args[a]);switch(t){case Lt.Any:return a=>{for(let s=0;s<n;++s)if(i[s](a))return!0;return!1};case Lt.All:return a=>{for(let s=0;s<n;++s)if(!i[s](a))return!1;return!0};case Lt.Between:return a=>{const s=i[0](a),o=i[1](a),l=i[2](a);return s>=o&&s<=l};case Lt.In:return a=>{const s=i[0](a);for(let o=1;o<n;++o)if(s===i[o](a))return!0;return!1};case Lt.Not:return a=>!i[0](a);default:throw new Error(`Unsupported logical operator ${t}`)}}function eK(r,e){const t=r.operator,n=r.args.length,i=new Array(n);for(let a=0;a<n;++a)i[a]=oc(r.args[a]);switch(t){case Lt.Multiply:return a=>{let s=1;for(let o=0;o<n;++o)s*=i[o](a);return s};case Lt.Divide:return a=>i[0](a)/i[1](a);case Lt.Add:return a=>{let s=0;for(let o=0;o<n;++o)s+=i[o](a);return s};case Lt.Subtract:return a=>i[0](a)-i[1](a);case Lt.Clamp:return a=>{const s=i[0](a),o=i[1](a);if(s<o)return o;const l=i[2](a);return s>l?l:s};case Lt.Mod:return a=>i[0](a)%i[1](a);case Lt.Pow:return a=>Math.pow(i[0](a),i[1](a));case Lt.Abs:return a=>Math.abs(i[0](a));case Lt.Floor:return a=>Math.floor(i[0](a));case Lt.Ceil:return a=>Math.ceil(i[0](a));case Lt.Round:return a=>Math.round(i[0](a));case Lt.Sin:return a=>Math.sin(i[0](a));case Lt.Cos:return a=>Math.cos(i[0](a));case Lt.Atan:return n===2?a=>Math.atan2(i[0](a),i[1](a)):a=>Math.atan(i[0](a));case Lt.Sqrt:return a=>Math.sqrt(i[0](a));default:throw new Error(`Unsupported numeric operator ${t}`)}}function tK(r,e){const t=r.args.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=oc(r.args[i]);return i=>{for(let a=0;a<t-1;a+=2)if(n[a](i))return n[a+1](i);return n[t-1](i)}}function rK(r,e){const t=r.args.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=oc(r.args[i]);return i=>{const a=n[0](i);for(let s=1;s<t;s+=2)if(a===n[s](i))return n[s+1](i);return n[t-1](i)}}function nK(r,e){const t=r.args.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=oc(r.args[i]);return i=>{const a=n[0](i),s=n[1](i);let o,l;for(let u=2;u<t;u+=2){const c=n[u](i);let h=n[u+1](i);const f=Array.isArray(h);if(f&&(h=u$(h)),c>=s)return u===2?h:f?aK(a,s,o,l,c,h):Tm(a,s,o,l,c,h);o=c,l=h}return l}}function iK(r,e){const t=r.operator,n=r.args.length,i=new Array(n);for(let a=0;a<n;++a)i[a]=oc(r.args[a]);switch(t){case Lt.ToString:return a=>{const s=i[0](a);return r.args[0].type===ws?m4(s):s.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Tm(r,e,t,n,i,a){const s=i-t;if(s===0)return n;const o=e-t,l=r===1?o/s:(Math.pow(r,o)-1)/(Math.pow(r,s)-1);return n+l*(a-n)}function aK(r,e,t,n,i,a){if(i-t===0)return n;const o=zT(n),l=zT(a);let u=l[2]-o[2];u>180?u-=360:u<-180&&(u+=360);const c=[Tm(r,e,t,o[0],i,l[0]),Tm(r,e,t,o[1],i,l[1]),o[2]+Tm(r,e,t,0,i,u),Tm(r,e,t,n[3],i,a[3])];return IR(c$(c))}function sK(r){return!0}function oK(r){const e=GR(),t=lK(r,e),n=zR();return function(i,a){if(n.properties=i.getPropertiesInternal(),n.resolution=a,e.featureId){const s=i.getId();s!==void 0?n.featureId=s:n.featureId=null}return e.geometryType&&(n.geometryType=HR(i.getGeometry())),t(n)}}function XT(r){const e=GR(),t=r.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=YC(r[s],e);const i=zR(),a=new Array(t);return function(s,o){if(i.properties=s.getPropertiesInternal(),i.resolution=o,e.featureId){const u=s.getId();u!==void 0?i.featureId=u:i.featureId=null}let l=0;for(let u=0;u<t;++u){const c=n[u](i);c&&(a[l]=c,l+=1)}return a.length=l,a}}function lK(r,e){const t=r.length,n=new Array(t);for(let i=0;i<t;++i){const a=r[i],s="filter"in a?hf(a.filter,fa,e):sK;let o;if(Array.isArray(a.style)){const l=a.style.length;o=new Array(l);for(let u=0;u<l;++u)o[u]=YC(a.style[u],e)}else o=[YC(a.style,e)];n[i]={filter:s,styles:o}}return function(i){const a=[];let s=!1;for(let o=0;o<t;++o){const l=n[o].filter;if(l(i)&&!(r[o].else&&s)){s=!0;for(const u of n[o].styles){const c=u(i);c&&a.push(c)}}}return a}}function YC(r,e){const t=Dv(r,"",e),n=kv(r,"",e),i=uK(r,e),a=cK(r,e),s=gl(r,"z-index",e);if(!t&&!n&&!i&&!a&&!kd(r))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(r));const o=new En;return function(l){let u=!0;if(t){const c=t(l);c&&(u=!1),o.setFill(c)}if(n){const c=n(l);c&&(u=!1),o.setStroke(c)}if(i){const c=i(l);c&&(u=!1),o.setText(c)}if(a){const c=a(l);c&&(u=!1),o.setImage(c)}return s&&o.setZIndex(s(l)),u?null:o}}function Dv(r,e,t){let n;if(e+"fill-pattern-src"in r?n=dK(r,e+"fill-",t):n=E4(r,e+"fill-color",t),!n)return null;const i=new _n;return function(a){const s=n(a);return s==="none"?null:(i.setColor(s),i)}}function kv(r,e,t){const n=gl(r,e+"stroke-width",t),i=E4(r,e+"stroke-color",t);if(!n&&!i)return null;const a=Gh(r,e+"stroke-line-cap",t),s=Gh(r,e+"stroke-line-join",t),o=qR(r,e+"stroke-line-dash",t),l=gl(r,e+"stroke-line-dash-offset",t),u=gl(r,e+"stroke-miter-limit",t),c=new hn;return function(h){if(i){const f=i(h);if(f==="none")return null;c.setColor(f)}if(n&&c.setWidth(n(h)),a){const f=a(h);if(f!=="butt"&&f!=="round"&&f!=="square")throw new Error("Expected butt, round, or square line cap");c.setLineCap(f)}if(s){const f=s(h);if(f!=="bevel"&&f!=="round"&&f!=="miter")throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(f)}return o&&c.setLineDash(o(h)),l&&c.setLineDashOffset(l(h)),u&&c.setMiterLimit(u(h)),c}}function uK(r,e){const t="text-",n=Gh(r,t+"value",e);if(!n)return null;const i=Dv(r,t,e),a=Dv(r,t+"background-",e),s=kv(r,t,e),o=kv(r,t+"background-",e),l=Gh(r,t+"font",e),u=gl(r,t+"max-angle",e),c=gl(r,t+"offset-x",e),h=gl(r,t+"offset-y",e),f=Rv(r,t+"overflow",e),A=Gh(r,t+"placement",e),d=gl(r,t+"repeat",e),p=d_(r,t+"scale",e),y=Rv(r,t+"rotate-with-view",e),v=gl(r,t+"rotation",e),w=Gh(r,t+"align",e),x=Gh(r,t+"justify",e),b=Gh(r,t+"baseline",e),C=qR(r,t+"padding",e),S=g_(r,t+"declutter-mode"),I=new rc({declutterMode:S});return function(B){if(I.setText(n(B)),i&&I.setFill(i(B)),a&&I.setBackgroundFill(a(B)),s&&I.setStroke(s(B)),o&&I.setBackgroundStroke(o(B)),l&&I.setFont(l(B)),u&&I.setMaxAngle(u(B)),c&&I.setOffsetX(c(B)),h&&I.setOffsetY(h(B)),f&&I.setOverflow(f(B)),A){const T=A(B);if(T!=="point"&&T!=="line")throw new Error("Expected point or line for text-placement");I.setPlacement(T)}if(d&&I.setRepeat(d(B)),p&&I.setScale(p(B)),y&&I.setRotateWithView(y(B)),v&&I.setRotation(v(B)),w){const T=w(B);if(T!=="left"&&T!=="center"&&T!=="right"&&T!=="end"&&T!=="start")throw new Error("Expected left, right, center, start, or end for text-align");I.setTextAlign(T)}if(x){const T=x(B);if(T!=="left"&&T!=="right"&&T!=="center")throw new Error("Expected left, right, or center for text-justify");I.setJustify(T)}if(b){const T=b(B);if(T!=="bottom"&&T!=="top"&&T!=="middle"&&T!=="alphabetic"&&T!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");I.setTextBaseline(T)}return C&&I.setPadding(C(B)),I}}function cK(r,e){return"icon-src"in r?hK(r,e):"shape-points"in r?fK(r,e):"circle-radius"in r?AK(r,e):null}function hK(r,e){const t="icon-",n=t+"src",i=jR(r[n],n),a=Dx(r,t+"anchor",e),s=d_(r,t+"scale",e),o=gl(r,t+"opacity",e),l=Dx(r,t+"displacement",e),u=gl(r,t+"rotation",e),c=Rv(r,t+"rotate-with-view",e),h=JT(r,t+"anchor-origin"),f=eN(r,t+"anchor-x-units"),A=eN(r,t+"anchor-y-units"),d=vK(r,t+"color"),p=pK(r,t+"cross-origin"),y=mK(r,t+"offset"),v=JT(r,t+"offset-origin"),w=kx(r,t+"width"),x=kx(r,t+"height"),b=gK(r,t+"size"),C=g_(r,t+"declutter-mode"),S=new xp({src:i,anchorOrigin:h,anchorXUnits:f,anchorYUnits:A,color:d,crossOrigin:p,offset:y,offsetOrigin:v,height:x,width:w,size:b,declutterMode:C});return function(I){return o&&S.setOpacity(o(I)),l&&S.setDisplacement(l(I)),u&&S.setRotation(u(I)),c&&S.setRotateWithView(c(I)),s&&S.setScale(s(I)),a&&S.setAnchor(a(I)),S}}function fK(r,e){const t="shape-",n=t+"points",i=t+"radius",a=XC(r[n],n),s=XC(r[i],i),o=Dv(r,t,e),l=kv(r,t,e),u=d_(r,t+"scale",e),c=Dx(r,t+"displacement",e),h=gl(r,t+"rotation",e),f=Rv(r,t+"rotate-with-view",e),A=kx(r,t+"radius2"),d=kx(r,t+"angle"),p=g_(r,t+"declutter-mode"),y=new f_({points:a,radius:s,radius2:A,angle:d,declutterMode:p});return function(v){return o&&y.setFill(o(v)),l&&y.setStroke(l(v)),c&&y.setDisplacement(c(v)),h&&y.setRotation(h(v)),f&&y.setRotateWithView(f(v)),u&&y.setScale(u(v)),y}}function AK(r,e){const t="circle-",n=Dv(r,t,e),i=kv(r,t,e),a=gl(r,t+"radius",e),s=d_(r,t+"scale",e),o=Dx(r,t+"displacement",e),l=gl(r,t+"rotation",e),u=Rv(r,t+"rotate-with-view",e),c=g_(r,t+"declutter-mode"),h=new qs({radius:5,declutterMode:c});return function(f){return a&&h.setRadius(a(f)),n&&h.setFill(n(f)),i&&h.setStroke(i(f)),o&&h.setDisplacement(o(f)),l&&h.setRotation(l(f)),u&&h.setRotateWithView(u(f)),s&&h.setScale(s(f)),h}}function gl(r,e,t){if(!(e in r))return;const n=hf(r[e],Tr,t);return function(i){return XC(n(i),e)}}function Gh(r,e,t){if(!(e in r))return null;const n=hf(r[e],kl,t);return function(i){return jR(n(i),e)}}function dK(r,e,t){const n=Gh(r,e+"pattern-src",t),i=ZT(r,e+"pattern-offset",t),a=ZT(r,e+"pattern-size",t),s=E4(r,e+"color",t);return function(o){return{src:n(o),offset:i&&i(o),size:a&&a(o),color:s&&s(o)}}}function Rv(r,e,t){if(!(e in r))return null;const n=hf(r[e],fa,t);return function(i){const a=n(i);if(typeof a!="boolean")throw new Error(`Expected a boolean for ${e}`);return a}}function E4(r,e,t){if(!(e in r))return null;const n=hf(r[e],ws|kl,t);return function(i){return $R(n(i),e)}}function qR(r,e,t){if(!(e in r))return null;const n=hf(r[e],Xc,t);return function(i){return x1(n(i),e)}}function Dx(r,e,t){if(!(e in r))return null;const n=hf(r[e],Xc,t);return function(i){const a=x1(n(i),e);if(a.length!==2)throw new Error(`Expected two numbers for ${e}`);return a}}function ZT(r,e,t){if(!(e in r))return null;const n=hf(r[e],Xc,t);return function(i){return KR(n(i),e)}}function d_(r,e,t){if(!(e in r))return null;const n=hf(r[e],Xc|Tr,t);return function(i){return yK(n(i),e)}}function kx(r,e){const t=r[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function gK(r,e){const t=r[e];if(t!==void 0){if(typeof t=="number")return Pl(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function pK(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function JT(r,e){const t=r[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function eN(r,e){const t=r[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function mK(r,e){const t=r[e];if(t!==void 0)return x1(t,e)}function g_(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function vK(r,e){const t=r[e];if(t!==void 0)return $R(t,e)}function x1(r,e){if(!Array.isArray(r))throw new Error(`Expected an array for ${e}`);const t=r.length;for(let n=0;n<t;++n)if(typeof r[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return r}function jR(r,e){if(typeof r!="string")throw new Error(`Expected a string for ${e}`);return r}function XC(r,e){if(typeof r!="number")throw new Error(`Expected a number for ${e}`);return r}function $R(r,e){if(typeof r=="string")return r;const t=x1(r,e),n=t.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function KR(r,e){const t=x1(r,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function yK(r,e){return typeof r=="number"?r:KR(r,e)}const tN={RENDER_ORDER:"renderOrder"};class p_ extends v1{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(tN.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new TR(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(tN.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?UR:e;const t=xK(e);this.styleFunction_=e===null?void 0:M$(t),this.changed()}}function xK(r){if(r===void 0)return UR;if(!r)return null;if(typeof r=="function"||r instanceof En)return r;if(!Array.isArray(r))return XT([r]);if(r.length===0)return[];const e=r.length,t=r[0];if(t instanceof En){const i=new Array(e);for(let a=0;a<e;++a){const s=r[a];if(!(s instanceof En))throw new Error("Expected a list of style instances");i[a]=s}return i}if("style"in t){const i=new Array(e);for(let a=0;a<e;++a){const s=r[a];if(!("style"in s))throw new Error("Expected a list of rules with a style property");i[a]=s}return oK(i)}return XT(r)}class wK extends t_{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Vr()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;bu(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),n4(i,n)}forEachFeatureAtCoordinate(e,t,n,i,a,s,o,l){let u;const c=t.viewState;function h(b,C,S,I){return a.call(s,C,b?S:null,I)}const f=c.projection,A=sR(e.slice(),f),d=[[0,0]];if(f.canWrapX()&&i){const b=f.getExtent(),C=Mn(b);d.push([-C,0],[C,0])}const p=t.layerStatesArray,y=p.length,v=[],w=[];for(let b=0;b<d.length;b++)for(let C=y-1;C>=0;--C){const S=p[C],I=S.layer;if(I.hasRenderer()&&d4(S,c)&&o.call(l,I)){const B=I.getRenderer(),T=I.getSource();if(B&&T){const M=T.getWrapX()?A:e,F=h.bind(null,S.managed);w[0]=M[0]+d[b][0],w[1]=M[1]+d[b][1],u=B.forEachFeatureAtCoordinate(w,t,n,F,v)}if(u)return u}}if(v.length===0)return;const x=1/v.length;return v.forEach((b,C)=>b.distanceSq+=C*x),v.sort((b,C)=>b.distanceSq-C.distanceSq),v.some(b=>u=b.callback(b.feature,b.layer,b.geometry)),u}hasFeatureAtCoordinate(e,t,n,i,a,s){return this.forEachFeatureAtCoordinate(e,t,n,i,eh,this,a,s)!==void 0}getMap(){return this.map_}renderFrame(e){Vr()}scheduleExpireIconCache(e){zc.canExpireCache()&&e.postRenderFunctions.push(_K)}}function _K(r,e){zc.expire()}class ev extends _l{constructor(e,t,n,i){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=i}}class EK extends wK{constructor(e){super(e),this.fontChangeListenerKey_=Fn(Rh,jg.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=y1+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const i=new ev(e,void 0,t);n.dispatchEvent(i)}}disposeInternal(){Mi(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(_s.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(o,l){return o.zIndex-l.zIndex});t.some(o=>o.layer instanceof p_&&o.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const a=[];let s=null;for(let o=0,l=t.length;o<l;++o){const u=t[o];e.layerIndex=o;const c=u.layer,h=c.getSourceState();if(!d4(u,i)||h!="ready"&&h!="undefined"){c.unrender();continue}const f=c.render(e,s);f&&(f!==s&&(this.children_.push(f),s=f),a.push(u))}this.declutter(e,a),v$(this.element_,this.children_),this.dispatchRenderEvent(_s.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let n=t.length-1;n>=0;--n){const i=t[n],a=i.layer;a.getDeclutter()&&a.renderDeclutter(e,i)}t.forEach(n=>n.layer.renderDeferred(e))}}}class rA extends _l{constructor(e,t){super(e),this.layer=t}}const YE={LAYERS:"layers"};class _p extends Z6{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(YE.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new po(n.slice(),{unique:!0}):qn(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new po(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Mi),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Fn(e,Ha.ADD,this.handleLayersAdd_,this),Fn(e,Ha.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Mi);Wd(this.listenerKeys_);const t=e.getArray();for(let n=0,i=t.length;n<i;n++){const a=t[n];this.registerLayerListeners_(a),this.dispatchEvent(new rA("addlayer",a))}this.changed()}registerLayerListeners_(e){const t=[Fn(e,jg.PROPERTYCHANGE,this.handleLayerChange_,this),Fn(e,$r.CHANGE,this.handleLayerChange_,this)];e instanceof _p&&t.push(Fn(e,"addlayer",this.handleLayerGroupAdd_,this),Fn(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Or(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new rA("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new rA("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new rA("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=Or(t);this.listenerKeys_[n].forEach(Mi),delete this.listenerKeys_[n],this.dispatchEvent(new rA("removelayer",t)),this.changed()}getLayers(){return this.get(YE.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let i=0,a=n.length;i<a;++i)this.dispatchEvent(new rA("removelayer",n[i]))}this.set(YE.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(s){s.getLayerStatesArray(t)});const i=this.getLayerState();let a=i.zIndex;!e&&i.zIndex===void 0&&(a=0);for(let s=n,o=t.length;s<o;s++){const l=t[s];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),l.minZoom=Math.max(l.minZoom,i.minZoom),l.maxZoom=Math.min(l.maxZoom,i.maxZoom),i.extent!==void 0&&(l.extent!==void 0?l.extent=Td(l.extent,i.extent):l.extent=i.extent),l.zIndex===void 0&&(l.zIndex=a)}return t}getSourceState(){return"ready"}}class ng extends _l{constructor(e,t,n){super(e),this.map=t,this.frameState=n!==void 0?n:null}}class Uh extends ng{constructor(e,t,n,i,a,s){super(e,t,a),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const On={SINGLECLICK:"singleclick",CLICK:$r.CLICK,DBLCLICK:$r.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},ZC={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class bK extends A1{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Fn(n,ZC.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Fn(n,ZC.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener($r.TOUCHMOVE,this.boundHandleTouchMove_,DR?{passive:!1}:!1)}emulateClick_(e){let t=new Uh(On.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Uh(On.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Uh(On.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==On.POINTERUP||t.type==On.POINTERCANCEL){delete this.trackedTouches_[n];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==On.POINTERDOWN||t.type==On.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Uh(On.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Mi),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Uh(On.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Fn(n,On.POINTERMOVE,this.handlePointerMove_,this),Fn(n,On.POINTERUP,this.handlePointerUp_,this),Fn(this.element_,On.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(Fn(this.element_.getRootNode(),On.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Uh(On.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Uh(On.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Mi(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener($r.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Mi(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Mi),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Qh={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},so={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Rx=1/0;class CK{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Wd(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(e){qn(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Rx?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,i=t.length,a=t[e],s=n[e],o=e;for(;e<i>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),c=u<i&&n[u]<n[l]?u:l;t[e]=t[c],n[e]=n[c],e=c}t[e]=a,n[e]=s,this.siftDown_(o,e)}siftDown_(e,t){const n=this.elements_,i=this.priorities_,a=n[t],s=i[t];for(;t>e;){const o=this.getParentIndex_(t);if(i[o]>s)n[t]=n[o],i[t]=i[o],t=o;else break}n[t]=a,i[t]=s}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let i=0;const a=t.length;let s,o,l;for(o=0;o<a;++o)s=t[o],l=e(s),l==Rx?delete this.queuedElements_[this.keyFunction_(s)]:(n[i]=l,t[i++]=s);t.length=i,n.length=i,this.heapify_()}}const kr={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class SK extends CK{constructor(e,t){super(function(n){return e.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener($r.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===kr.LOADED||n===kr.ERROR||n===kr.EMPTY){n!==kr.ERROR&&t.removeEventListener($r.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0,i,a,s;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;)a=this.dequeue()[0],s=a.getKey(),i=a.getState(),i===kr.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++n,a.load())}}function BK(r,e,t,n,i){if(!r||!(t in r.wantedTiles)||!r.wantedTiles[t][e.getKey()])return Rx;const a=r.viewState.center,s=n[0]-a[0],o=n[1]-a[1];return 65536*Math.log(i)+Math.sqrt(s*s+o*o)/i}let m_=class extends uc{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){Fx(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&Fx(this.element);for(let t=0,n=this.listenerKeys.length;t<n;++t)Mi(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==$g&&this.listenerKeys.push(Fn(e,Qh.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}};class VR extends m_{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",a=e.collapseLabel!==void 0?e.collapseLabel:"›",s=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof a=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=a,this.collapseLabel_.className=s):this.collapseLabel_=a;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener($r.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+y1+" "+w4+(this.collapsed_&&this.collapsible_?" "+jT:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=u,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(i=>i.getAttributions(e)))),n=!this.getMap().getAllLayers().some(i=>i.getSource()&&i.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(n),t}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>X6(()=>i))),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!oh(t,this.renderedAttributions_)){kR(this.ulElement_);for(let i=0,a=t.length;i<a;++i){const s=document.createElement("li");s.innerHTML=t[i],this.ulElement_.appendChild(s)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(jT),this.collapsed_?qT(this.collapseLabel_,this.label_):qT(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class TK extends m_{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"⇧",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const a=e.tipLabel?e.tipLabel:"Reset rotation",s=document.createElement("button");s.className=t+"-reset",s.setAttribute("type","button"),s.title=a,s.appendChild(this.label_),s.addEventListener($r.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+y1+" "+w4,l=this.element;l.className=o,l.appendChild(s),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Ey)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:yp}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const i="rotate("+n+"rad)";if(this.autoHide_){const a=this.element.classList.contains(Ey);!a&&n===0?this.element.classList.add(Ey):a&&n!==0&&this.element.classList.remove(Ey)}this.label_.style.transform=i}this.rotation_=n}}class NK extends m_{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",a=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",s=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=i,c.setAttribute("type","button"),c.title=l,c.appendChild(typeof s=="string"?document.createTextNode(s):s),c.addEventListener($r.CLICK,this.handleClick_.bind(this,n),!1);const h=document.createElement("button");h.className=a,h.setAttribute("type","button"),h.title=u,h.appendChild(typeof o=="string"?document.createTextNode(o):o),h.addEventListener($r.CLICK,this.handleClick_.bind(this,-n),!1);const f=t+" "+y1+" "+w4,A=this.element;A.className=f,A.appendChild(c),A.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const i=n.getZoom();if(i!==void 0){const a=n.getConstrainedZoom(i+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:a,duration:this.duration_,easing:yp})):n.setZoom(a)}}}function WR(r){r=r||{};const e=new po;return(r.zoom!==void 0?r.zoom:!0)&&e.push(new NK(r.zoomOptions)),(r.rotate!==void 0?r.rotate:!0)&&e.push(new TK(r.rotateOptions)),(r.attribution!==void 0?r.attribution:!0)&&e.push(new VR(r.attributionOptions)),e}const Ox={ACTIVE:"active"};class Ep extends uc{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Ox.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Ox.ACTIVE,e)}setMap(e){this.map_=e}}function IK(r,e,t){const n=r.getCenterInternal();if(n){const i=[n[0]+e[0],n[1]+e[1]];r.animateInternal({duration:t!==void 0?t:250,easing:Sj,center:r.getConstrainedCenter(i)})}}function b4(r,e,t,n){const i=r.getZoom();if(i===void 0)return;const a=r.getConstrainedZoom(i+e),s=r.getResolutionForZoom(a);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:s,anchor:t,duration:n!==void 0?n:250,easing:yp})}class FK extends Ep{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==On.DBLCLICK){const n=e.originalEvent,i=e.map,a=e.coordinate,s=n.shiftKey?-this.delta_:this.delta_,o=i.getView();b4(o,s,a,this.duration_),n.preventDefault(),t=!0}return!t}}class PA extends Ep{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==On.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==On.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==On.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==On.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function C4(r){const e=r.length;let t=0,n=0;for(let i=0;i<e;i++)t+=r[i].clientX,n+=r[i].clientY;return{clientX:t/e,clientY:n/e}}function JC(r){const e=arguments;return function(t){let n=!0;for(let i=0,a=e.length;i<a&&(n=n&&e[i](t),!!n);++i);return n}}const MK=function(r){const e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},LK=function(r){const e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},DK=function(r){const e=r.map.getTargetElement(),t=r.map.getOwnerDocument().activeElement;return e.contains(t)},YR=function(r){return r.map.getTargetElement().hasAttribute("tabindex")?DK(r):!0},Ov=eh,rN=function(r){return r.type==On.CLICK},XR=function(r){const e=r.originalEvent;return e.button==0&&!(g$&&v4&&e.ctrlKey)},eS=mp,ZR=function(r){return r.type==On.SINGLECLICK},S4=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},kK=function(r){const e=r.originalEvent;return!e.altKey&&(v4?e.metaKey:e.ctrlKey)&&!e.shiftKey},RK=function(r){const e=r.originalEvent;return v4?e.metaKey:e.ctrlKey},v_=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},JR=function(r){const e=r.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},XE=function(r){const e=r.originalEvent;return qn(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},eO=function(r){const e=r.originalEvent;return qn(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class OK extends PA{constructor(e){super({stopDown:mp}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:JC(S4,eO);this.condition_=e.onFocusOnly?JC(YR,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,i=t.getEventPixel(C4(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const a=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();dj(a,o.getResolution()),K5(a,o.getRotation()),o.adjustCenterInternal(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),s=n.getCenterInternal(),o=t.getPixelFromCoordinateInternal(s),l=t.getCoordinateFromPixelInternal([o[0]-i*Math.cos(a),o[1]-i*Math.sin(a)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:yp})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class PK extends PA{constructor(e){e=e||{},super({stopDown:mp}),this.condition_=e.condition?e.condition:LK,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!XE(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===r4)return;const i=t.getSize(),a=e.pixel,s=Math.atan2(i[1]/2-a[1],a[0]-i[0]/2);if(this.lastAngle_!==void 0){const o=s-this.lastAngle_;n.adjustRotationInternal(-o)}this.lastAngle_=s}handleUpEvent(e){return XE(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return XE(e)&&XR(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class UK extends t_{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+n,i.top=Math.min(e[1],t[1])+n,i.width=Math.abs(t[0]-e[0])+n,i.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new zl([i])}getGeometry(){return this.geometry_}}const um={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class by extends _l{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}class QK extends PA{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new UK(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:XR,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const i=n[0]-t[0],a=n[1]-t[1];return i*i+a*a>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new by(um.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new by(t?um.BOXEND:um.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new by(um.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new by(um.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}}class GK extends QK{constructor(e){e=e||{};const t=e.condition?e.condition:v_;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let i=this.getGeometry();if(this.out_){const a=n.rotatedExtentForGeometry(i),s=n.getResolutionForExtentInternal(a),o=n.getResolution()/s;i=i.clone(),i.scale(o*o)}n.fitInternal(i,{duration:this.duration_,easing:yp})}}const od={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class HK extends Ep{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return S4(t)&&JR(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==$r.KEYDOWN){const n=e.originalEvent,i=n.key;if(this.condition_(e)&&(i==od.DOWN||i==od.LEFT||i==od.RIGHT||i==od.UP)){const s=e.map.getView(),o=s.getResolution()*this.pixelDelta_;let l=0,u=0;i==od.DOWN?u=-o:i==od.LEFT?l=-o:i==od.RIGHT?l=o:u=o;const c=[l,u];K5(c,s.getRotation()),IK(s,c,this.duration_),n.preventDefault(),t=!0}}return!t}}class zK extends Ep{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!RK(t)&&JR(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==$r.KEYDOWN||e.type==$r.KEYPRESS){const n=e.originalEvent,i=n.key;if(this.condition_(e)&&(i==="+"||i==="-")){const a=e.map,s=i==="+"?this.delta_:-this.delta_,o=a.getView();b4(o,s,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}}class qK{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const i=this.points_[t+2]-this.points_[n+2];if(i<1e3/60)return!1;const a=this.points_[t]-this.points_[n],s=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(s,a),this.initialVelocity_=Math.sqrt(a*a+s*s)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class jK extends Ep{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:Ov;this.condition_=e.onFocusOnly?JC(YR,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==$r.WHEEL)return!0;const n=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let a;if(e.type==$r.WHEEL&&(a=i.deltaY,f$&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(a/=FR),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(a*=40)),a===0)return!1;this.lastDelta_=a;const s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?"trackpad":"wheel");const o=n.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=a;const l=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-ea(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),b4(t,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class $K extends PA{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=mp),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],i=this.targetPointers[1],a=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(this.lastAngle_!==void 0){const l=a-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=a;const s=e.map,o=s.getView();o.getConstraints().rotation!==r4&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(C4(this.targetPointers))),this.rotating_&&(s.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class KK extends PA{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=mp),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],i=this.targetPointers[1],a=n.clientX-i.clientX,s=n.clientY-i.clientY,o=Math.sqrt(a*a+s*s);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const l=e.map,u=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(C4(this.targetPointers))),l.render(),u.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function VK(r){r=r||{};const e=new po,t=new qK(-.005,.05,100);return(r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0)&&e.push(new PK),(r.doubleClickZoom!==void 0?r.doubleClickZoom:!0)&&e.push(new FK({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan!==void 0?r.dragPan:!0)&&e.push(new OK({onFocusOnly:r.onFocusOnly,kinetic:t})),(r.pinchRotate!==void 0?r.pinchRotate:!0)&&e.push(new $K),(r.pinchZoom!==void 0?r.pinchZoom:!0)&&e.push(new KK({duration:r.zoomDuration})),(r.keyboard!==void 0?r.keyboard:!0)&&(e.push(new HK),e.push(new zK({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0)&&e.push(new jK({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom!==void 0?r.shiftDragZoom:!0)&&e.push(new GK({duration:r.zoomDuration})),e}function tO(r){if(r instanceof v1){r.setMapInternal(null);return}r instanceof _p&&r.getLayers().forEach(tO)}function rO(r,e){if(r instanceof v1){r.setMapInternal(e);return}if(r instanceof _p){const t=r.getLayers().getArray();for(let n=0,i=t.length;n<i;++n)rO(t[n],e)}}let WK=class extends uc{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=YK(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:FR,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Es(),this.pixelToCoordinateTransform_=Es(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||WR(),this.interactions=t.interactions||VK({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new SK(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(so.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(so.VIEW,this.handleViewChanged_),this.addChangeListener(so.SIZE,this.handleSizeChanged_),this.addChangeListener(so.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof Qc)&&e.view.then(function(i){n.setView(new Qc(i))}),this.controls.addEventListener(Ha.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(Ha.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(Ha.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(Ha.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(Ha.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(Ha.REMOVE,i=>{const a=i.element.getId();a!==void 0&&delete this.overlayIdIndex_[a.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){rO(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const a=n.hitTolerance!==void 0?n.hitTolerance:0,s=n.layerFilter!==void 0?n.layerFilter:eh,o=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,a,o,t,null,s,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(i){n.push(i)},t),n}getAllLayers(){const e=[];function t(n){n.forEach(function(i){i instanceof _p?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:eh,a=t.hitTolerance!==void 0?t.hitTolerance:0,s=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,a,s,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),i=this.getSize(),a=n.width/i[0],s=n.height/i[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-n.left)/a,(o.clientY-n.top)/s]}getTarget(){return this.get(so.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Xg(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Ga(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(so.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof po){t.setLayers(e);return}const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const i=e[t];if(!i.visible)continue;const a=i.layer.getRenderer();if(a&&!a.ready)return!0;const s=i.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(e){const t=ia(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Ga(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(so.SIZE)}getView(){return this.get(so.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,i){return BK(this.frameState_,e,t,n,i)}handleBrowserEvent(e,t){t=t||e.type;const n=new Uh(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===ZC.POINTERDOWN||n===$r.WHEEL||n===$r.KEYDOWN){const i=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():i,s=t.target;if(this.overlayContainerStopEvent_.contains(s)||!(a===i?i.documentElement:a).contains(s))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let a=i.length-1;a>=0;a--){const s=i[a];if(s.getMap()!==this||!s.getActive()||!this.getTargetElement())continue;if(!s.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,a=i;if(e){const s=e.viewHints;if(s[Qa.ANIMATING]||s[Qa.INTERACTING]){const o=Date.now()-e.time>8;i=o?0:8,a=o?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,a))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(_s.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(_s.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new ng(Qh.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new ng(Qh.LOADSTART,this,e))));const n=this.postRenderFunctions_;for(let i=0,a=n.length;i<a;++i)n[i](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,i=this.targetChangeHandlerKeys_.length;n<i;++n)Mi(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener($r.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener($r.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Fx(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new EK(this)),this.mapBrowserEventHandler_=new bK(this,this.moveTolerance_);for(const a in On)this.mapBrowserEventHandler_.addEventListener(On[a],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener($r.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener($r.WHEEL,this.boundHandleBrowserEvent_,DR?{passive:!1}:!1);const n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[Fn(n,$r.KEYDOWN,this.handleBrowserEvent,this),Fn(n,$r.KEYPRESS,this.handleBrowserEvent,this)];const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Mi(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Mi(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Fn(e,jg.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Fn(e,$r.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Mi),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new rA("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Fn(e,jg.PROPERTYCHANGE,this.render,this),Fn(e,$r.CHANGE,this.render,this),Fn(e,"addlayer",this.handleLayerAdd_,this),Fn(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){tO(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),i=this.frameState_;let a=null;if(t!==void 0&&QT(t)&&n&&n.isDef()){const s=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=n.getState();if(a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:bx(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:s,wantedTiles:{},mapId:Or(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const l=isNaN(o.nextRotation)?o.rotation:o.nextRotation;a.nextExtent=bx(o.nextCenter,o.nextResolution,l,t)}}this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),i&&(!this.previousExtent_||!Zd(this.previousExtent_)&&!Od(a.extent,this.previousExtent_))&&(this.dispatchEvent(new ng(Qh.MOVESTART,this,i)),this.previousExtent_=vp(this.previousExtent_)),this.previousExtent_&&!a.viewHints[Qa.ANIMATING]&&!a.viewHints[Qa.INTERACTING]&&!Od(a.extent,this.previousExtent_)&&(this.dispatchEvent(new ng(Qh.MOVEEND,this,a)),eR(a.extent,this.previousExtent_))),this.dispatchEvent(new ng(Qh.POSTRENDER,this,a)),this.renderComplete_=this.hasListener(Qh.LOADSTART)||this.hasListener(Qh.LOADEND)||this.hasListener(_s.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new rA("removelayer",t)),this.set(so.LAYERGROUP,e)}setSize(e){this.set(so.SIZE,e)}setTarget(e){this.set(so.TARGET,e)}setView(e){if(!e||e instanceof Qc){this.set(so.VIEW,e);return}this.set(so.VIEW,new Qc);const t=this;e.then(function(n){t.setView(new Qc(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),a=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),s=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(a)&&!isNaN(s)&&(t=[a,s],!QT(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&lR("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!oh(t,n))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function YK(r){let e=null;r.keyboardEventTarget!==void 0&&(e=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const t={},n=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new _p({layers:r.layers});t[so.LAYERGROUP]=n,t[so.TARGET]=r.target,t[so.VIEW]=r.view instanceof Qc?r.view:new Qc;let i;r.controls!==void 0&&(Array.isArray(r.controls)?i=new po(r.controls.slice()):(qn(typeof r.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=r.controls));let a;r.interactions!==void 0&&(Array.isArray(r.interactions)?a=new po(r.interactions.slice()):(qn(typeof r.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),a=r.interactions));let s;return r.overlays!==void 0?Array.isArray(r.overlays)?s=new po(r.overlays.slice()):(qn(typeof r.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),s=r.overlays):s=new po,{controls:i,interactions:a,keyboardEventTarget:e,overlays:s,values:t}}const Cy={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class XK extends v1{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(Cy.PRELOAD)}setPreload(e){this.set(Cy.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Cy.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Cy.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class nO extends d1{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e}getFeatures(e){return Vr()}getData(e){return null}prepareFrame(e){return Vr()}renderFrame(e,t){return Vr()}loadedTileCallback(e,t,n){e[t]||(e[t]={}),e[t][n.tileCoord.toString()]=n}createLoadedTileFinder(e,t,n){return(i,a)=>{const s=this.loadedTileCallback.bind(this,n,i);return e.forEachLoadedTile(t,i,a,s)}}forEachFeatureAtCoordinate(e,t,n,i,a){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===pr.LOADED||t.getState()===pr.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=pr.LOADED&&t!=pr.ERROR&&e.addEventListener($r.CHANGE,this.boundHandleImageChange_),t==pr.IDLE&&(e.load(),t=e.getState()),t==pr.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class iO{constructor(){yr(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Ix(),{get:(e,t)=>{if(typeof Ix()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,n),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,i=t.length;n<i;++n){const a=t[n];if(typeof a=="function"){a(e);continue}const s=t[++n];if(typeof e[a]=="function")e[a](...s);else{if(typeof s=="function"){e[a]=s(e);continue}e[a]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const nN=[];let ig=null;function ZK(){ig=Ts(1,1,void 0,{willReadFrequently:!0})}class B4 extends nO{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Es(),this.pixelTransform=Es(),this.inversePixelTransform=Es(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,n){ig||ZK(),ig.clearRect(0,0,1,1);let i;try{ig.drawImage(e,t,n,1,1,0,0,1,1),i=ig.getImageData(0,0,1,1).data}catch{return ig=null,null}return i}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const i=this.getLayer().getClassName();let a,s;if(e&&e.className===i&&(!n||e&&e.style.backgroundColor&&oh(Pd(e.style.backgroundColor),Pd(n)))){const o=e.firstElementChild;o instanceof HTMLCanvasElement&&(s=o.getContext("2d"))}if(s&&s.canvas.style.transform===t?(this.container=e,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){a=document.createElement("div"),a.className=i;let o=a.style;o.position="absolute",o.width="100%",o.height="100%",s=Ts();const l=s.canvas;a.appendChild(l),o=l.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=a,this.context=s}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const i=Xd(n),a=s_(n),s=a_(n),o=i_(n);Ga(t.coordinateToPixelTransform,i),Ga(t.coordinateToPixelTransform,a),Ga(t.coordinateToPixelTransform,s),Ga(t.coordinateToPixelTransform,o);const l=this.inversePixelTransform;Ga(l,i),Ga(l,a),Ga(l,s),Ga(l,o),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const n=e.extent,i=e.viewState.resolution,a=e.viewState.rotation,s=e.pixelRatio,o=Math.round(Mn(n)/i*s),l=Math.round(qa(n)/i*s);bu(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/s,1/s,a,-o/2,-l/2),n4(this.inversePixelTransform,this.pixelTransform);const u=Mj(this.pixelTransform);if(this.useContainer(t,u,this.getBackground(e)),!this.containerReused){const c=this.context.canvas;c.width!=o||c.height!=l?(c.width=o,c.height=l):this.context.clearRect(0,0,o,l),u!==c.style.transform&&(c.style.transform=u)}}dispatchRenderEvent_(e,t,n){const i=this.getLayer();if(i.hasListener(e)){const a=new ev(e,this.inversePixelTransform,n,t);i.dispatchEvent(a)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(_s.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(_s.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new iO),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(_s.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(_s.POSTRENDER,this.context,e))}getRenderTransform(e,t,n,i,a,s,o){const l=a/2,u=s/2,c=i/t,h=-c,f=-e[0]+o,A=-e[1];return bu(this.tempTransform,l,u,c,h,-n,f,A)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class aO extends A1{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent($r.CHANGE)}release(){this.state===kr.ERROR&&this.setState(kr.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==kr.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let t=this;do{if(e.getState()==kr.LOADED){e.interimTile=null;break}e.getState()==kr.LOADING?t=e:e.getState()==kr.IDLE?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==kr.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){Vr()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const i=t-n+1e3/60;return i>=this.transition_?1:AR(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}class sO extends aO{constructor(e,t,n,i,a,s){super(e,t,s),this.crossOrigin_=i,this.src_=n,this.key=n,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=a}getImage(){return this.image_}setImage(e){this.image_=e,this.state=kr.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=kr.ERROR,this.unlistenImage_(),this.image_=JK(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=kr.LOADED:this.state=kr.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==kr.ERROR&&(this.state=kr.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==kr.IDLE&&(this.state=kr.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=y$(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function JK(){const r=Ts(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}const oO=.5,eV=10,iN=.25;class lO{constructor(e,t,n,i,a,s){this.sourceProj_=e,this.targetProj_=t;let o={};const l=Yg(this.targetProj_,this.sourceProj_);this.transformInv_=function(w){const x=w[0]+"/"+w[1];return o[x]||(o[x]=l(w)),o[x]},this.maxSourceExtent_=i,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Mn(i)>=Mn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Mn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Mn(this.targetProj_.getExtent()):null;const u=Xd(n),c=s_(n),h=a_(n),f=i_(n),A=this.transformInv_(u),d=this.transformInv_(c),p=this.transformInv_(h),y=this.transformInv_(f),v=eV+(s?Math.max(0,Math.ceil(Math.log2(QC(n)/(s*s*256*256)))):0);if(this.addQuad_(u,c,h,f,A,d,p,y,v),this.wrapsXInSource_){let w=1/0;this.triangles_.forEach(function(x,b,C){w=Math.min(w,x.source[0][0],x.source[1][0],x.source[2][0])}),this.triangles_.forEach(x=>{if(Math.max(x.source[0][0],x.source[1][0],x.source[2][0])-w>this.sourceWorldWidth_/2){const b=[[x.source[0][0],x.source[0][1]],[x.source[1][0],x.source[1][1]],[x.source[2][0],x.source[2][1]]];b[0][0]-w>this.sourceWorldWidth_/2&&(b[0][0]-=this.sourceWorldWidth_),b[1][0]-w>this.sourceWorldWidth_/2&&(b[1][0]-=this.sourceWorldWidth_),b[2][0]-w>this.sourceWorldWidth_/2&&(b[2][0]-=this.sourceWorldWidth_);const C=Math.min(b[0][0],b[1][0],b[2][0]);Math.max(b[0][0],b[1][0],b[2][0])-C<this.sourceWorldWidth_/2&&(x.source=b)}})}o={}}addTriangle_(e,t,n,i,a,s){this.triangles_.push({source:[i,a,s],target:[e,t,n]})}addQuad_(e,t,n,i,a,s,o,l,u){const c=Au([a,s,o,l]),h=this.sourceWorldWidth_?Mn(c)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,A=this.sourceProj_.canWrapX()&&h>.5&&h<1;let d=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const y=Au([e,t,n,i]);d=Mn(y)/this.targetWorldWidth_>iN||d}!A&&this.sourceProj_.isGlobal()&&h&&(d=h>iN||d)}if(!d&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!fo(c,this.maxSourceExtent_))return;let p=0;if(!d&&(!isFinite(a[0])||!isFinite(a[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)d=!0;else if(p=(!isFinite(a[0])||!isFinite(a[1])?8:0)+(!isFinite(s[0])||!isFinite(s[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),p!=1&&p!=2&&p!=4&&p!=8)return}if(u>0){if(!d){const y=[(e[0]+n[0])/2,(e[1]+n[1])/2],v=this.transformInv_(y);let w;A?w=(Bd(a[0],f)+Bd(o[0],f))/2-Bd(v[0],f):w=(a[0]+o[0])/2-v[0];const x=(a[1]+o[1])/2-v[1];d=w*w+x*x>this.errorThresholdSquared_}if(d){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const y=[(t[0]+n[0])/2,(t[1]+n[1])/2],v=this.transformInv_(y),w=[(i[0]+e[0])/2,(i[1]+e[1])/2],x=this.transformInv_(w);this.addQuad_(e,t,y,w,a,s,v,x,u-1),this.addQuad_(w,y,n,i,x,v,o,l,u-1)}else{const y=[(e[0]+t[0])/2,(e[1]+t[1])/2],v=this.transformInv_(y),w=[(n[0]+i[0])/2,(n[1]+i[1])/2],x=this.transformInv_(w);this.addQuad_(e,y,w,i,a,v,x,l,u-1),this.addQuad_(y,t,n,w,v,s,o,x,u-1)}return}}if(A){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}p&11||this.addTriangle_(e,n,i,a,o,l),p&14||this.addTriangle_(e,n,t,a,o,s),p&&(p&13||this.addTriangle_(t,i,e,s,l,a),p&7||this.addTriangle_(t,i,n,s,l,o))}calculateSourceExtent(){const e=Hl();return this.triangles_.forEach(function(t,n,i){const a=t.source;Xm(e,a[0]),Xm(e,a[1]),Xm(e,a[2])}),e}getTriangles(){return this.triangles_}}let ZE;const Bg=[];function aN(r,e,t,n,i){r.beginPath(),r.moveTo(0,0),r.lineTo(e,t),r.lineTo(n,i),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(e,n)+1,Math.max(t,i)),r.restore()}function JE(r,e){return Math.abs(r[e*4]-210)>2||Math.abs(r[e*4+3]-.75*255)>2}function tV(){if(ZE===void 0){const r=Ts(6,6,Bg);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",aN(r,4,5,4,0),aN(r,4,5,0,5);const e=r.getImageData(0,0,3,3).data;ZE=JE(e,0)||JE(e,4)||JE(e,8),h_(r),Bg.push(r.canvas)}return ZE}function tS(r,e,t,n){const i=Jd(t,e,r);let a=Bx(e,n,t);const s=e.getMetersPerUnit();s!==void 0&&(a*=s);const o=r.getMetersPerUnit();o!==void 0&&(a/=o);const l=r.getExtent();if(!l||Rd(l,i)){const u=Bx(r,a,i)/a;isFinite(u)&&u>0&&(a/=u)}return a}function rV(r,e,t,n){const i=Uo(t);let a=tS(r,e,i,n);return(!isFinite(a)||a<=0)&&$5(t,function(s){return a=tS(r,e,s,n),isFinite(a)&&a>0}),a}function uO(r,e,t,n,i,a,s,o,l,u,c,h,f,A){const d=Ts(Math.round(t*r),Math.round(t*e),Bg);if(h||(d.imageSmoothingEnabled=!1),l.length===0)return d.canvas;d.scale(t,t);function p(C){return Math.round(C*t)/t}d.globalCompositeOperation="lighter";const y=Hl();l.forEach(function(C,S,I){tR(y,C.extent)});let v;const w=t/n,x=(h?1:1+Math.pow(2,-24))/w;if(!f||l.length!==1||u!==0){if(v=Ts(Math.round(Mn(y)*w),Math.round(qa(y)*w),Bg),h||(v.imageSmoothingEnabled=!1),i&&A){const C=(i[0]-y[0])*w,S=-(i[3]-y[3])*w,I=Mn(i)*w,B=qa(i)*w;v.rect(C,S,I,B),v.clip()}l.forEach(function(C,S,I){if(C.image.width>0&&C.image.height>0){if(C.clipExtent){v.save();const N=(C.clipExtent[0]-y[0])*w,O=-(C.clipExtent[3]-y[3])*w,L=Mn(C.clipExtent)*w,G=qa(C.clipExtent)*w;v.rect(h?N:Math.round(N),h?O:Math.round(O),h?L:Math.round(N+L)-Math.round(N),h?G:Math.round(O+G)-Math.round(O)),v.clip()}const B=(C.extent[0]-y[0])*w,T=-(C.extent[3]-y[3])*w,M=Mn(C.extent)*w,F=qa(C.extent)*w;v.drawImage(C.image,u,u,C.image.width-2*u,C.image.height-2*u,h?B:Math.round(B),h?T:Math.round(T),h?M:Math.round(B+M)-Math.round(B),h?F:Math.round(T+F)-Math.round(T)),C.clipExtent&&v.restore()}})}const b=Xd(s);return o.getTriangles().forEach(function(C,S,I){const B=C.source,T=C.target;let M=B[0][0],F=B[0][1],N=B[1][0],O=B[1][1],L=B[2][0],G=B[2][1];const R=p((T[0][0]-b[0])/a),U=p(-(T[0][1]-b[1])/a),W=p((T[1][0]-b[0])/a),Q=p(-(T[1][1]-b[1])/a),re=p((T[2][0]-b[0])/a),oe=p(-(T[2][1]-b[1])/a),P=M,z=F;M=0,F=0,N-=P,O-=z,L-=P,G-=z;const K=[[N,O,0,0,W-R],[L,G,0,0,re-R],[0,0,N,O,Q-U],[0,0,L,G,oe-U]],J=Yq(K);if(!J)return;if(d.save(),d.beginPath(),tV()||!h){d.moveTo(W,Q);const ge=4,le=R-W,me=U-Q;for(let xe=0;xe<ge;xe++)d.lineTo(W+p((xe+1)*le/ge),Q+p(xe*me/(ge-1))),xe!=ge-1&&d.lineTo(W+p((xe+1)*le/ge),Q+p((xe+1)*me/(ge-1)));d.lineTo(re,oe)}else d.moveTo(W,Q),d.lineTo(R,U),d.lineTo(re,oe);d.clip(),d.transform(J[0],J[2],J[1],J[3],R,U),d.translate(y[0]-P,y[3]-z);let ue;if(v)ue=v.canvas,d.scale(x,-x);else{const ge=l[0],le=ge.extent;ue=ge.image,d.scale(Mn(le)/ue.width,-qa(le)/ue.height)}d.drawImage(ue,0,0),d.restore()}),v&&(h_(v),Bg.push(v.canvas)),c&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,o.getTriangles().forEach(function(C,S,I){const B=C.target,T=(B[0][0]-b[0])/a,M=-(B[0][1]-b[1])/a,F=(B[1][0]-b[0])/a,N=-(B[1][1]-b[1])/a,O=(B[2][0]-b[0])/a,L=-(B[2][1]-b[1])/a;d.beginPath(),d.moveTo(F,N),d.lineTo(T,M),d.lineTo(O,L),d.closePath(),d.stroke()}),d.restore()),d.canvas}class rS extends aO{constructor(e,t,n,i,a,s,o,l,u,c,h,f){super(a,kr.IDLE,f),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=o,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=s||a,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const A=i.getTileCoordExtent(this.wrappedTileCoord_),d=this.targetTileGrid_.getExtent();let p=this.sourceTileGrid_.getExtent();const y=d?Td(A,d):A;if(QC(y)===0){this.state=kr.EMPTY;return}const v=e.getExtent();v&&(p?p=Td(p,v):p=v);const w=i.getResolution(this.wrappedTileCoord_[0]),x=rV(e,n,y,w);if(!isFinite(x)||x<=0){this.state=kr.EMPTY;return}const b=c!==void 0?c:oO;if(this.triangulation_=new lO(e,n,y,p,x*b,w),this.triangulation_.getTriangles().length===0){this.state=kr.EMPTY;return}this.sourceZ_=t.getZForResolution(x);let C=this.triangulation_.calculateSourceExtent();if(p&&(e.canWrapX()?(C[1]=ea(C[1],p[1],p[3]),C[3]=ea(C[3],p[1],p[3])):C=Td(C,p)),!QC(C))this.state=kr.EMPTY;else{let S=0,I=0;e.canWrapX()&&(S=Mn(v),I=Math.floor((C[0]-v[0])/S)),iR(C.slice(),e,!0).forEach(T=>{const M=t.getTileRangeForExtentAndZ(T,this.sourceZ_);for(let F=M.minX;F<=M.maxX;F++)for(let N=M.minY;N<=M.maxY;N++){const O=u(this.sourceZ_,F,N,o);if(O){const L=I*S;this.sourceTiles_.push({tile:O,offset:L})}}++I}),this.sourceTiles_.length===0&&(this.state=kr.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var i;const n=t.tile;if(n&&n.getState()==kr.LOADED){const a=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);a[0]+=t.offset,a[2]+=t.offset;const s=(i=this.clipExtent_)==null?void 0:i.slice();s&&(s[0]+=t.offset,s[2]+=t.offset),e.push({extent:a,clipExtent:s,image:n.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=kr.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),i=typeof n=="number"?n:n[0],a=typeof n=="number"?n:n[1],s=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=uO(i,a,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),s,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=kr.LOADED}this.changed()}load(){if(this.state==kr.IDLE){this.state=kr.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n==kr.IDLE||n==kr.LOADING){e++;const i=Fn(t,$r.CHANGE,function(a){const s=t.getState();(s==kr.LOADED||s==kr.ERROR||s==kr.EMPTY)&&(Mi(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},n,i){t.getState()==kr.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Mi),this.sourcesListenerKeys_=null}release(){this.canvas_&&(h_(this.canvas_.getContext("2d")),Bg.push(this.canvas_),this.canvas_=null),super.release()}}class T4{constructor(e,t,n,i){this.minX=e,this.maxX=t,this.minY=n,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function N0(r,e,t,n,i){return i!==void 0?(i.minX=r,i.maxX=e,i.minY=t,i.maxY=n,i):new T4(r,e,t,n)}class nV extends B4{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Hl(),this.tmpTileRange_=new T4(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),n=e.getState(),i=t.getUseInterimTilesOnError();return n==kr.LOADED||n==kr.EMPTY||n==kr.ERROR&&!i}getTile(e,t,n,i){const a=i.pixelRatio,s=i.viewState.projection,o=this.getLayer();let u=o.getSource().getTile(e,t,n,a,s);return u.getState()==kr.ERROR&&o.getUseInterimTilesOnError()&&o.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(u)||(u=u.getInterimTile()),u}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),i=Ga(t.pixelToCoordinateTransform,e.slice()),a=n.getExtent();if(a&&!Rd(a,i))return null;const s=t.pixelRatio,o=t.viewState.projection,l=t.viewState,u=n.getRenderSource(),c=u.getTileGridForProjection(l.projection),h=u.getTilePixelRatio(t.pixelRatio);for(let f=c.getZForResolution(l.resolution);f>=c.getMinZoom();--f){const A=c.getTileCoordForCoordAndZ(i,f),d=u.getTile(f,A[1],A[2],s,o);if(!(d instanceof sO||d instanceof rS)||d instanceof rS&&d.getState()===kr.EMPTY)return null;if(d.getState()!==kr.LOADED)continue;const p=c.getOrigin(f),y=Pl(c.getTileSize(f)),v=c.getResolution(f),w=Math.floor(h*((i[0]-p[0])/v-A[1]*y[0])),x=Math.floor(h*((p[1]-i[1])/v-A[2]*y[1])),b=Math.round(h*u.getGutterForProjection(l.projection));return this.getImageData(d.getImage(),w+b,x+b)}return null}loadedTileCallback(e,t,n){return this.isDrawableTile(n)?super.loadedTileCallback(e,t,n):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex],i=e.viewState,a=i.projection,s=i.resolution,o=i.center,l=i.rotation,u=e.pixelRatio,c=this.getLayer(),h=c.getSource(),f=h.getRevision(),A=h.getTileGridForProjection(a),d=A.getZForResolution(s,h.zDirection),p=A.getResolution(d);let y=e.extent;const v=e.viewState.resolution,w=h.getTilePixelRatio(u);this.prepareContainer(e,t);const x=this.context.canvas.width,b=this.context.canvas.height,C=n.extent&&Hc(n.extent);C&&(y=Td(y,Hc(n.extent)));const S=p*x/2/w,I=p*b/2/w,B=[o[0]-S,o[1]-I,o[0]+S,o[1]+I],T=A.getTileRangeForExtentAndZ(y,d),M={};M[d]={};const F=this.createLoadedTileFinder(h,a,M),N=this.tmpExtent,O=this.tmpTileRange_;this.newTiles_=!1;const L=l?GC(i.center,v,l,e.size):void 0;for(let oe=T.minX;oe<=T.maxX;++oe)for(let P=T.minY;P<=T.maxY;++P){if(l&&!A.tileCoordIntersectsViewport([d,oe,P],L))continue;const z=this.getTile(d,oe,P,e);if(this.isDrawableTile(z)){const ue=Or(this);if(z.getState()==kr.LOADED){M[d][z.tileCoord.toString()]=z;let ge=z.inTransition(ue);ge&&n.opacity!==1&&(z.endTransition(ue),ge=!1),!this.newTiles_&&(ge||!this.renderedTiles.includes(z))&&(this.newTiles_=!0)}if(z.getAlpha(ue,e.time)===1)continue}const K=A.getTileCoordChildTileRange(z.tileCoord,O,N);let J=!1;K&&(J=F(d+1,K)),J||A.forEachTileCoordParentTileRange(z.tileCoord,F,O,N)}const G=p/s*u/w,R=this.getRenderContext(e);bu(this.tempTransform,x/2,b/2,G,G,0,-x/2,-b/2),C&&this.clipUnrotated(R,e,C),h.getInterpolate()||(R.imageSmoothingEnabled=!1),this.preRender(R,e),this.renderedTiles.length=0;let U=Object.keys(M).map(Number);U.sort(Wh);let W,Q,re;n.opacity===1&&(!this.containerReused||h.getOpaque(e.viewState.projection))?U=U.reverse():(W=[],Q=[]);for(let oe=U.length-1;oe>=0;--oe){const P=U[oe],z=h.getTilePixelSize(P,u,a),J=A.getResolution(P)/p,ue=z[0]*J*G,ge=z[1]*J*G,le=A.getTileCoordForCoordAndZ(Xd(B),P),me=A.getTileCoordExtent(le),xe=Ga(this.tempTransform,[w*(me[0]-B[0])/p,w*(B[3]-me[3])/p]),Be=w*h.getGutterForProjection(a),Y=M[P];for(const Ve in Y){const te=Y[Ve],se=te.tileCoord,Z=le[1]-se[1],he=Math.round(xe[0]-(Z-1)*ue),ne=le[2]-se[2],ae=Math.round(xe[1]-(ne-1)*ge),_e=Math.round(xe[0]-Z*ue),Me=Math.round(xe[1]-ne*ge),be=he-_e,Ae=ae-Me,pe=d===P,Fe=pe&&te.getAlpha(Or(this),e.time)!==1;let Ge=!1;if(!Fe)if(W){re=[_e,Me,_e+be,Me,_e+be,Me+Ae,_e,Me+Ae];for(let Ze=0,He=W.length;Ze<He;++Ze)if(d!==P&&P<Q[Ze]){const Je=W[Ze];fo([_e,Me,_e+be,Me+Ae],[Je[0],Je[3],Je[4],Je[7]])&&(Ge||(R.save(),Ge=!0),R.beginPath(),R.moveTo(re[0],re[1]),R.lineTo(re[2],re[3]),R.lineTo(re[4],re[5]),R.lineTo(re[6],re[7]),R.moveTo(Je[6],Je[7]),R.lineTo(Je[4],Je[5]),R.lineTo(Je[2],Je[3]),R.lineTo(Je[0],Je[1]),R.clip())}W.push(re),Q.push(P)}else R.clearRect(_e,Me,be,Ae);this.drawTileImage(te,e,_e,Me,be,Ae,Be,pe),W&&!Fe?(Ge&&R.restore(),this.renderedTiles.unshift(te)):this.renderedTiles.push(te),this.updateUsedTiles(e.usedTiles,h,te)}}return this.renderedRevision=f,this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!Od(this.renderedExtent_,B),this.renderedExtent_=B,this.renderedPixelRatio=u,this.renderedProjection=a,this.manageTilePyramid(e,h,A,u,a,y,d,c.getPreload()),this.scheduleExpireCache(e,h),this.postRender(this.context,e),n.extent&&R.restore(),R.imageSmoothingEnabled=!0,this.container}drawTileImage(e,t,n,i,a,s,o,l){const u=this.getTileImage(e);if(!u)return;const c=this.getRenderContext(t),h=Or(this),f=t.layerStatesArray[t.layerIndex],A=f.opacity*(l?e.getAlpha(h,t.time):1),d=A!==c.globalAlpha;d&&(c.save(),c.globalAlpha=A),c.drawImage(u,o,o,u.width-2*o,u.height-2*o,n,i,a,s),d&&c.restore(),A!==f.opacity?t.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const n=(function(i,a,s){const o=Or(i);o in s.usedTiles&&i.expireCache(s.viewState.projection,s.usedTiles[o])}).bind(null,t);e.postRenderFunctions.push(n)}}updateUsedTiles(e,t,n){const i=Or(t);i in e||(e[i]={}),e[i][n.getKey()]=!0}manageTilePyramid(e,t,n,i,a,s,o,l,u){const c=Or(t);c in e.wantedTiles||(e.wantedTiles[c]={});const h=e.wantedTiles[c],f=e.tileQueue,A=n.getMinZoom(),d=e.viewState.rotation,p=d?GC(e.viewState.center,e.viewState.resolution,d,e.size):void 0;let y=0,v,w,x,b,C,S;for(S=A;S<=o;++S)for(w=n.getTileRangeForExtentAndZ(s,S,w),x=n.getResolution(S),b=w.minX;b<=w.maxX;++b)for(C=w.minY;C<=w.maxY;++C)d&&!n.tileCoordIntersectsViewport([S,b,C],p)||(o-S<=l?(++y,v=t.getTile(S,b,C,i,a),v.getState()==kr.IDLE&&(h[v.getKey()]=!0,f.isKeyQueued(v.getKey())||f.enqueue([v,c,n.getTileCoordCenter(v.tileCoord),x])),u!==void 0&&u(v)):t.useTile(S,b,C,a));t.updateCacheSize(y,a)}}class iV extends XK{constructor(e){super(e)}createRenderer(){return new nV(this)}}class aV{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return qn(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return qn(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){qn(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}function sN(r,e,t,n){return n!==void 0?(n[0]=r,n[1]=e,n[2]=t,n):[r,e,t]}function y_(r,e,t){return r+"/"+e+"/"+t}function cO(r){return y_(r[0],r[1],r[2])}function sV(r){return r.split("/").map(Number)}function oV(r){return(r[1]<<r[0])+r[2]}function lV(r,e){const t=r[0],n=r[1],i=r[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const a=e.getFullTileRange(t);return a?a.containsXY(n,i):!0}class hO extends aV{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),n=sV(e)[0];this.forEach(i=>{i.tileCoord[0]!==n&&(this.remove(cO(i.tileCoord)),i.release())})}}const eb={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class N4 extends uc{constructor(e){super(),this.projection=Ci(e.projection),this.attributions_=oN(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,i){t.viewResolver=n,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=oN(e),this.changed()}setState(e){this.state_=e,this.changed()}}function oN(r){return r?Array.isArray(r)?function(e){return r}:typeof r=="function"?r:function(e){return[r]}:null}const I0=[0,0,0],Gf=5;class fO{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,qn(Kq(this.resolutions_,(i,a)=>a-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,a=this.resolutions_.length-1;i<a;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,qn(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Xd(n)),qn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,qn(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:H5,qn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,a)=>{const s=new T4(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(n){const o=this.getTileRangeForExtentAndZ(n,a);s.minX=Math.max(o.minX,s.minX),s.maxX=Math.min(o.maxX,s.maxX),s.minY=Math.max(o.minY,s.minY),s.maxY=Math.min(o.maxY,s.maxY)}return s}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const i=this.getTileRangeForExtentAndZ(e,t);for(let a=i.minX,s=i.maxX;a<=s;++a)for(let o=i.minY,l=i.maxY;o<=l;++o)n([t,a,o])}forEachTileCoordParentTileRange(e,t,n,i){let a,s,o,l=null,u=e[0]-1;for(this.zoomFactor_===2?(s=e[1],o=e[2]):l=this.getTileCoordExtent(e,i);u>=this.minZoom;){if(s!==void 0&&o!==void 0?(s=Math.floor(s/2),o=Math.floor(o/2),a=N0(s,s,o,o,n)):a=this.getTileRangeForExtentAndZ(l,u,n),t(u,a))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const a=e[1]*2,s=e[2]*2;return N0(a,a+1,s,s+1,t)}const i=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],a=e[1],s=e[2];if(t===i)return N0(a,s,a,s,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-i),u=Math.floor(a*l),c=Math.floor(s*l);if(t<i)return N0(u,u,c,c,n);const h=Math.floor(l*(a+1))-1,f=Math.floor(l*(s+1))-1;return N0(u,h,c,f,n)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,I0);const i=I0[1],a=I0[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,I0);const s=I0[1],o=I0[2];return N0(i,s,a,o,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),i=Pl(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*n,t[1]-(e[2]+.5)*i[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),i=this.getResolution(e[0]),a=Pl(this.getTileSize(e[0]),this.tmpSize_),s=n[0]+e[1]*a[0]*i,o=n[1]-(e[2]+1)*a[1]*i,l=s+a[0]*i,u=o+a[1]*i;return th(s,o,l,u,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,i,a){const s=this.getZForResolution(n),o=n/this.getResolution(s),l=this.getOrigin(s),u=Pl(this.getTileSize(s),this.tmpSize_);let c=o*(e-l[0])/n/u[0],h=o*(l[1]-t)/n/u[1];return i?(c=oA(c,Gf)-1,h=oA(h,Gf)-1):(c=py(c,Gf),h=py(h,Gf)),sN(s,c,h,a)}getTileCoordForXYAndZ_(e,t,n,i,a){const s=this.getOrigin(n),o=this.getResolution(n),l=Pl(this.getTileSize(n),this.tmpSize_);let u=(e-s[0])/o/l[0],c=(s[1]-t)/o/l[1];return i?(u=oA(u,Gf)-1,c=oA(c,Gf)-1):(u=py(u,Gf),c=py(c,Gf)),sN(n,u,c,a)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=r_(this.resolutions_,e,t||0);return ea(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return bR(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let i=this.minZoom;i<t;++i)n[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=n}}function AO(r){let e=r.getDefaultTileGrid();return e||(e=fV(r),r.setDefaultTileGrid(e)),e}function uV(r,e,t){const n=e[0],i=r.getTileCoordCenter(e),a=I4(t);if(!Rd(a,i)){const s=Mn(a),o=Math.ceil((a[0]-i[0])/s);return i[0]+=s*o,r.getTileCoordForCoordAndZ(i,n)}return e}function cV(r,e,t,n){n=n!==void 0?n:"top-left";const i=dO(r,e,t);return new fO({extent:r,origin:lj(r,n),resolutions:i,tileSize:t})}function hV(r){const e=r||{},t=e.extent||Ci("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:dO(t,e.maxZoom,e.tileSize,e.maxResolution)};return new fO(n)}function dO(r,e,t,n){e=e!==void 0?e:Xq,t=Pl(t!==void 0?t:H5);const i=qa(r),a=Mn(r);n=n>0?n:Math.max(a/t[0],i/t[1]);const s=e+1,o=new Array(s);for(let l=0;l<s;++l)o[l]=n/Math.pow(2,l);return o}function fV(r,e,t,n){const i=I4(r);return cV(i,e,t,n)}function I4(r){r=Ci(r);let e=r.getExtent();if(!e){const t=180*Kg.degrees/r.getMetersPerUnit();e=th(-t,-t,t,t)}return e}class AV extends N4{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Pl(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new hO(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const n=this.getTileCacheForProjection(e);n&&n.expireCache(t)}forEachLoadedTile(e,t,n,i){const a=this.getTileCacheForProjection(e);if(!a)return!1;let s=!0,o,l,u;for(let c=n.minX;c<=n.maxX;++c)for(let h=n.minY;h<=n.maxY;++h)l=y_(t,c,h),u=!1,a.containsKey(l)&&(o=a.get(l),u=o.getState()===kr.LOADED,u&&(u=i(o)!==!1)),u||(s=!1);return s}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,i,a){return Vr()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:AO(e)}getTileCacheForProjection(e){const t=this.getProjection();return qn(t===null||Hh(t,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const i=this.getTileGridForProjection(n),a=this.getTilePixelRatio(t),s=Pl(i.getTileSize(e),this.tmpSize);return a==1?s:i$(s,a,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const n=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=uV(n,e,t)),lV(e,n)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const n=this.getTileCacheForProjection(t);e>n.highWaterMark&&(n.highWaterMark=e)}useTile(e,t,n,i){}}class dV extends _l{constructor(e,t){super(e),this.tile=t}}function gV(r,e){const t=/\{z\}/g,n=/\{x\}/g,i=/\{y\}/g,a=/\{-y\}/g;return function(s,o,l){if(s)return r.replace(t,s[0].toString()).replace(n,s[1].toString()).replace(i,s[2].toString()).replace(a,function(){const u=s[0],c=e.getFullTileRange(u);if(!c)throw new Error("The {-y} placeholder requires a tile grid with extent");return(c.getHeight()-s[2]-1).toString()})}}function pV(r,e){const t=r.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=gV(r[i],e);return mV(n)}function mV(r){return r.length===1?r[0]:function(e,t,n){if(!e)return;const i=oV(e),a=Bd(i,r.length);return r[a](e,t,n)}}function vV(r){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(r);if(t){const n=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let a;for(a=n;a<=i;++a)e.push(r.replace(t[0],String.fromCharCode(a)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r),t){const n=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=n;i++)e.push(r.replace(t[0],i.toString()));return e}return e.push(r),e}class F4 extends AV{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===F4.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=Or(t),i=t.getState();let a;i==kr.LOADING?(this.tileLoadingKeys_[n]=!0,a=eb.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],a=i==kr.ERROR?eb.TILELOADERROR:i==kr.LOADED?eb.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new dV(a,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=vV(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(pV(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}useTile(e,t,n){const i=y_(e,t,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)}}class yV extends F4{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:xV,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:sO,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const n=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==n?t:{});for(const i in this.tileCacheForProjection){const a=this.tileCacheForProjection[i];a.expireCache(a==n?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!Hh(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!Hh(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Hh(t,e)))return this.tileGrid;const n=Or(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=AO(e)),this.tileGridForProjection[n]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||Hh(t,e))return this.tileCache;const n=Or(e);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new hO(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(e,t,n,i,a,s){const o=[e,t,n],l=this.getTileCoordForTileUrlFunction(o,a),u=l?this.tileUrlFunction(l,i,a):void 0,c=new this.tileClass(o,u!==void 0?kr.IDLE:kr.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=s,c.addEventListener($r.CHANGE,this.handleTileChange.bind(this)),c}getTile(e,t,n,i,a){const s=this.getProjection();if(!s||!a||Hh(s,a))return this.getTileInternal(e,t,n,i,s||a);const o=this.getTileCacheForProjection(a),l=[e,t,n];let u;const c=cO(l);o.containsKey(c)&&(u=o.get(c));const h=this.getKey();if(u&&u.key==h)return u;const f=this.getTileGridForProjection(s),A=this.getTileGridForProjection(a),d=this.getTileCoordForTileUrlFunction(l,a),p=new rS(s,f,a,A,l,d,this.getTilePixelRatio(i),this.getGutter(),(y,v,w,x)=>this.getTileInternal(y,v,w,x,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return p.key=h,u?(p.interimTile=u,p.refreshInterimChain(),o.replace(c,p)):o.set(c,p),p}getTileInternal(e,t,n,i,a){let s=null;const o=y_(e,t,n),l=this.getKey();if(!this.tileCache.containsKey(o))s=this.createTile_(e,t,n,i,a,l),this.tileCache.set(o,s);else if(s=this.tileCache.get(o),s.key!=l){const u=s;s=this.createTile_(e,t,n,i,a,l),u.getState()==kr.IDLE?s.interimTile=u.interimTile:s.interimTile=u,s.refreshInterimChain(),this.tileCache.replace(o,s)}return s}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const n=Ci(e);if(n){const i=Or(n);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function xV(r,e){r.getImage().src=e}class Nm extends yV{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:hV({extent:I4(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const wV='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class _V extends Nm{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[wV];const n=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:n,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}}const Zs={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class gO extends uc{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+C$,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Zs.ELEMENT,this.handleElementChanged),this.addChangeListener(Zs.MAP,this.handleMapChanged),this.addChangeListener(Zs.OFFSET,this.handleOffsetChanged),this.addChangeListener(Zs.POSITION,this.handlePositionChanged),this.addChangeListener(Zs.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Zs.ELEMENT)}getId(){return this.id}getMap(){return this.get(Zs.MAP)||null}getOffset(){return this.get(Zs.OFFSET)}getPosition(){return this.get(Zs.POSITION)}getPositioning(){return this.get(Zs.POSITIONING)}handleElementChanged(){kR(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(Fx(this.element),Mi(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Fn(e,Qh.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Zs.ELEMENT,e)}setMap(e){this.set(Zs.MAP,e)}setOffset(e){this.set(Zs.OFFSET,e)}setPosition(e){this.set(Zs.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Zs.POSITION))return;const n=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),a=this.getRect(i,[p$(i),m$(i)]);e=e||{};const s=e.margin===void 0?20:e.margin;if(!Ju(n,a)){const o=a[0]-n[0],l=n[2]-a[2],u=a[1]-n[1],c=n[3]-a[3],h=[0,0];if(o<0?h[0]=o-s:l<0&&(h[0]=Math.abs(l)+s),u<0?h[1]=u-s:c<0&&(h[1]=Math.abs(c)+s),h[0]!==0||h[1]!==0){const f=t.getView().getCenterInternal(),A=t.getPixelFromCoordinateInternal(f);if(!A)return;const d=[A[0]+h[0],A[1]+h[1]],p=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(d),duration:p.duration,easing:p.easing})}}}getRect(e,t){const n=e.getBoundingClientRect(),i=n.left+window.pageXOffset,a=n.top+window.pageYOffset;return[i,a,i+t[0],a+t[1]]}setPositioning(e){this.set(Zs.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const n=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(n,i)}updateRenderedPosition(e,t){const n=this.element.style,i=this.getOffset(),a=this.getPositioning();this.setVisible(!0);const s=Math.round(e[0]+i[0])+"px",o=Math.round(e[1]+i[1])+"px";let l="0%",u="0%";a=="bottom-right"||a=="center-right"||a=="top-right"?l="-100%":(a=="bottom-center"||a=="center-center"||a=="top-center")&&(l="-50%"),a=="bottom-left"||a=="bottom-center"||a=="bottom-right"?u="-100%":(a=="center-left"||a=="center-center"||a=="center-right")&&(u="-50%");const c=`translate(${l}, ${u}) translate(${s}, ${o})`;this.rendered.transform_!=c&&(this.rendered.transform_=c,n.transform=c)}getOptions(){return this.options}}const tb="units",EV=[1,2,5],cm=25.4/.28;class bV extends m_{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const n=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+y1,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(tb,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(tb)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(tb,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,n=e.projection,i=this.getUnits(),a=i=="degrees"?"degrees":"m";let s=Bx(n,e.resolution,t,a);const o=this.minWidth_*(this.dpi_||cm)/cm,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||cm)/cm:void 0;let u=o*s,c="";if(i=="degrees"){const x=Kg.degrees;u*=x,u<x/60?(c="″",s*=3600):u<x?(c="′",s*=60):c="°"}else if(i=="imperial")u<.9144?(c="in",s/=.0254):u<1609.344?(c="ft",s/=.3048):(c="mi",s/=1609.344);else if(i=="nautical")s/=1852,c="NM";else if(i=="metric")u<1e-6?(c="nm",s*=1e9):u<.001?(c="μm",s*=1e6):u<1?(c="mm",s*=1e3):u<1e3?c="m":(c="km",s/=1e3);else if(i=="us")u<.9144?(c="in",s*=39.37):u<1609.344?(c="ft",s/=.30480061):(c="mi",s/=1609.3472);else throw new Error("Invalid units");let h=3*Math.floor(Math.log(o*s)/Math.log(10)),f,A,d,p,y,v;for(;;){d=Math.floor(h/3);const x=Math.pow(10,d);if(f=EV[(h%3+3)%3]*x,A=Math.round(f/s),isNaN(A)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&A>=l){f=p,A=y,d=v;break}else if(A>=o)break;p=f,y=A,v=d,++h}const w=this.scaleBar_?this.createScaleBar(A,f,c):f.toFixed(d<0?-d:0)+" "+c;this.renderedHTML_!=w&&(this.innerElement_.innerHTML=w,this.renderedHTML_=w),this.renderedWidth_!=A&&(this.innerElement_.style.width=A+"px",this.renderedWidth_=A),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,n){const i=this.getScaleForResolution(),a=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),s=this.scaleBarSteps_,o=e/s,l=[this.createMarker("absolute")];for(let c=0;c<s;++c){const h=c%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${h}" style="width: ${o}px;"></div>`+this.createMarker("relative")+(c%2===0||s===2?this.createStepText(c,e,!1,t,n):"")+"</div>")}return l.push(this.createStepText(s,e,!0,t,n)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+a+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,n,i,a){const o=(e===0?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+a),l=e===0?-3:t/this.scaleBarSteps_*-1,u=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${u}px;left: ${n?t+"px":"unset"};">`+o+"</div>"}getScaleForResolution(){const e=Bx(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||cm,n=1e3/25.4;return e*n*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}class CV{constructor(){this.events={}}on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}emit(e,t){this.events[e]&&this.events[e].forEach(n=>n(t))}off(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(n=>n!==t))}once(e,t){const n=i=>{t(i),this.off(e,n)};this.on(e,n)}}const Gt=new CV,Xt={LAYER_ADDED:"layer:added",LAYER_REMOVED:"layer:removed",LAYER_VISIBILITY_CHANGED:"layer:visibility",LAYER_SELECTED:"layer:selected",LAYER_ORDER_CHANGED:"layer:order",LAYER_STYLE_CHANGED:"layer:stylechanged",FEATURE_SELECTED:"feature:selected",FEATURE_DESELECTED:"feature:deselected",FEATURE_CREATED:"feature:created",FEATURE_MODIFIED:"feature:modified",FEATURE_DELETED:"feature:deleted",FEATURE_CREATED:"feature:created",FEATURE_MODIFY_START:"feature:modifystart",HISTORY_CHANGED:"history:changed",TOOL_CHANGED:"tool:changed",TOOL_ACTIVATED:"tool:activated",TOOL_DEACTIVATED:"tool:deactivated",MAP_MOVEEND:"map:moveend",MAP_CLICK:"map:click",MAP_POINTER_MOVE:"map:pointermove",PROJECT_SAVED:"project:saved",PROJECT_LOADED:"project:loaded",PROJECT_NEW:"project:new",CRS_CHANGED:"crs:changed",MEASUREMENT_CLEAR:"measurement:clear",TABLE_JOINED:"table:joined"},Sy={OSM:{name:"OpenStreetMap",source:()=>new _V},CARTO_LIGHT:{name:"Carto Light",source:()=>new Nm({url:"https://{a-d}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attributions:'&copy; <a href="https://carto.com/">CARTO</a>'})},CARTO_DARK:{name:"Carto Dark",source:()=>new Nm({url:"https://{a-d}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png",attributions:'&copy; <a href="https://carto.com/">CARTO</a>'})},SATELLITE:{name:"위성 영상",source:()=>new Nm({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",maxZoom:19,attributions:"&copy; Esri"})},NONE:{name:"없음",source:()=>new Nm({url:""})}};class SV{constructor(){this.map=null,this.baseLayer=null,this.currentBasemap="OSM"}init(e,t={}){const{center:n=[127.5,36.5],zoom:i=7,basemap:a="OSM"}=t;return this.baseLayer=new iV({source:Sy[a].source(),properties:{name:"basemap",type:"base"}}),this.map=new WK({target:e,layers:[this.baseLayer],view:new Qc({center:Zm(n),zoom:i,minZoom:2,maxZoom:19}),controls:WR({zoom:!0,rotate:!1,attribution:!1}).extend([new bV({units:"metric"}),new VR({collapsible:!0,collapsed:!0})])}),this.currentBasemap=a,this.bindEvents(),this}bindEvents(){this.map.on("moveend",()=>{const e=this.map.getView(),t=yy(e.getCenter()),n=e.getZoom();Gt.emit(Xt.MAP_MOVEEND,{center:t,zoom:n,resolution:e.getResolution()})}),this.map.on("pointermove",e=>{if(e.dragging)return;const t=yy(e.coordinate);Gt.emit(Xt.MAP_POINTER_MOVE,{pixel:e.pixel,coordinate:e.coordinate,lonLat:t})}),this.map.on("click",e=>{const t=yy(e.coordinate);Gt.emit(Xt.MAP_CLICK,{pixel:e.pixel,coordinate:e.coordinate,lonLat:t})})}getMap(){return this.map}getView(){var e;return(e=this.map)==null?void 0:e.getView()}getCenter(){const e=this.map.getView().getCenter();return yy(e)}getZoom(){return this.map.getView().getZoom()}setCenter(e,t=!0){const n=this.map.getView();t?n.animate({center:Zm(e),duration:300}):n.setCenter(Zm(e))}setZoom(e,t=!0){const n=this.map.getView();t?n.animate({zoom:e,duration:300}):n.setZoom(e)}fitExtent(e,t={}){const{padding:n=[50,50,50,50],duration:i=500}=t;this.map.getView().fit(e,{padding:n,duration:i})}setBasemap(e){if(!Sy[e]){console.warn(`Unknown basemap: ${e}`);return}e==="NONE"?this.baseLayer.setVisible(!1):(this.baseLayer.setVisible(!0),this.baseLayer.setSource(Sy[e].source())),this.currentBasemap=e}getBasemap(){return this.currentBasemap}getAvailableBasemaps(){return Object.entries(Sy).map(([e,t])=>({key:e,name:t.name}))}updateSize(){var e;(e=this.map)==null||e.updateSize()}getScale(){const e=this.map.getView(),t=e.getResolution(),n=e.getProjection().getMetersPerUnit();return t*n*39.3701*96}scaleToZoom(e){if(!this.map||e<=0)return null;const t=this.map.getView(),n=t.getProjection().getMetersPerUnit(),s=e/(n*39.3701*96),o=t.getZoomForResolution(s),l=t.getMinZoom(),u=t.getMaxZoom();return Math.max(l,Math.min(u,o))}}const Nr=new SV,Mr={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},By=[Mr.FILL],cA=[Mr.STROKE],_d=[Mr.BEGIN_PATH],lN=[Mr.CLOSE_PATH];class pO{drawCustom(e,t,n,i,a){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,n){}drawFeature(e,t,n){}drawGeometryCollection(e,t,n){}drawLineString(e,t,n){}drawMultiLineString(e,t,n){}drawMultiPoint(e,t,n){}drawMultiPolygon(e,t,n){}drawPoint(e,t,n){}drawPolygon(e,t,n){}drawText(e,t,n){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class w1 extends pO{constructor(e,t,n,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,a=this.coordinates;let s=a.length;for(let o=0,l=e.length;o<l;o+=t)i[0]=e[o],i[1]=e[o+1],Rd(n,i)&&(a[s++]=i[0],a[s++]=i[1]);return s}appendFlatLineCoordinates(e,t,n,i,a,s){const o=this.coordinates;let l=o.length;const u=this.getBufferedMaxExtent();s&&(t+=i);let c=e[t],h=e[t+1];const f=this.tmpCoordinate_;let A=!0,d,p,y;for(d=t+i;d<n;d+=i)f[0]=e[d],f[1]=e[d+1],y=UC(u,f),y!==p?(A&&(o[l++]=c,o[l++]=h,A=!1),o[l++]=f[0],o[l++]=f[1]):y===vs.INTERSECTING?(o[l++]=f[0],o[l++]=f[1],A=!1):A=!0,c=f[0],h=f[1],p=y;return(a&&A||d===t+i)&&(o[l++]=c,o[l++]=h),l}drawCustomCoordinates_(e,t,n,i,a){for(let s=0,o=n.length;s<o;++s){const l=n[s],u=this.appendFlatLineCoordinates(e,t,l,i,!1,!1);a.push(u),t=l}return t}drawCustom(e,t,n,i,a){this.beginGeometry(e,t,a);const s=e.getType(),o=e.getStride(),l=this.coordinates.length;let u,c,h,f,A;switch(s){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),f=[];const d=e.getEndss();A=0;for(let p=0,y=d.length;p<y;++p){const v=[];A=this.drawCustomCoordinates_(u,A,d[p],o,v),f.push(v)}this.instructions.push([Mr.CUSTOM,l,f,e,n,jC,a]),this.hitDetectionInstructions.push([Mr.CUSTOM,l,f,e,i||n,jC,a]);break;case"Polygon":case"MultiLineString":h=[],u=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),A=this.drawCustomCoordinates_(u,0,e.getEnds(),o,h),this.instructions.push([Mr.CUSTOM,l,h,e,n,Bv,a]),this.hitDetectionInstructions.push([Mr.CUSTOM,l,h,e,i||n,Bv,a]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(u,0,u.length,o,!1,!1),this.instructions.push([Mr.CUSTOM,l,c,e,n,lA,a]),this.hitDetectionInstructions.push([Mr.CUSTOM,l,c,e,i||n,lA,a]);break;case"MultiPoint":u=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(u,o),c>l&&(this.instructions.push([Mr.CUSTOM,l,c,e,n,lA,a]),this.hitDetectionInstructions.push([Mr.CUSTOM,l,c,e,i||n,lA,a]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),c=this.coordinates.length,this.instructions.push([Mr.CUSTOM,l,c,e,n,void 0,a]),this.hitDetectionInstructions.push([Mr.CUSTOM,l,c,e,i||n,void 0,a]);break}this.endGeometry(t)}beginGeometry(e,t,n){this.beginGeometryInstruction1_=[Mr.BEGIN_GEOMETRY,t,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Mr.BEGIN_GEOMETRY,t,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const n=e.length;let i,a,s=-1;for(t=0;t<n;++t)i=e[t],a=i[0],a==Mr.END_GEOMETRY?s=t:a==Mr.BEGIN_GEOMETRY&&(i[2]=t,$q(this.hitDetectionInstructions,s,t),s=-1)}setFillStrokeStyle(e,t){const n=this.state;if(e){const i=e.getColor();n.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,n.fillStyle=qc(i||dl)}else n.fillStyle=void 0;if(t){const i=t.getColor();n.strokeStyle=qc(i||Fv);const a=t.getLineCap();n.lineCap=a!==void 0?a:Zg;const s=t.getLineDash();n.lineDash=s?s.slice():Xh;const o=t.getLineDashOffset();n.lineDashOffset=o||Zh;const l=t.getLineJoin();n.lineJoin=l!==void 0?l:Jg;const u=t.getWidth();n.lineWidth=u!==void 0?u:Lv;const c=t.getMiterLimit();n.miterLimit=c!==void 0?c:Iv,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(e){const t=e.fillStyle,n=[Mr.SET_FILL_STYLE,t];return typeof t!="string"&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Mr.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,i=e.lineCap,a=e.lineDash,s=e.lineDashOffset,o=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=i||a!=e.currentLineDash&&!oh(e.currentLineDash,a)||e.currentLineDashOffset!=s||e.currentLineJoin!=o||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(n!==void 0&&t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=i,e.currentLineDash=a,e.currentLineDashOffset=s,e.currentLineJoin=o,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Mr.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=eR(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;p1(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class BV extends w1{constructor(e,t,n,i){super(e,t,n,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,n){if(!this.image_||this.maxExtent&&!Rd(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,n);const i=e.getFlatCoordinates(),a=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,a);this.instructions.push([Mr.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Mr.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,n){if(!this.image_)return;this.beginGeometry(e,t,n);const i=e.getFlatCoordinates(),a=[];for(let l=0,u=i.length;l<u;l+=e.getStride())(!this.maxExtent||Rd(this.maxExtent,i.slice(l,l+2)))&&a.push(i[l],i[l+1]);const s=this.coordinates.length,o=this.appendFlatPointCoordinates(a,2);this.instructions.push([Mr.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Mr.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),i=e.getSize(),a=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class TV extends w1{constructor(e,t,n,i){super(e,t,n,i)}drawFlatCoordinates_(e,t,n,i){const a=this.coordinates.length,s=this.appendFlatLineCoordinates(e,t,n,i,!1,!1),o=[Mr.MOVE_TO_LINE_TO,a,s];return this.instructions.push(o),this.hitDetectionInstructions.push(o),n}drawLineString(e,t,n){const i=this.state,a=i.strokeStyle,s=i.lineWidth;if(a===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([Mr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Xh,Zh],_d);const o=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(o,0,o.length,l),this.hitDetectionInstructions.push(cA),this.endGeometry(t)}drawMultiLineString(e,t,n){const i=this.state,a=i.strokeStyle,s=i.lineWidth;if(a===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([Mr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Xh,Zh],_d);const o=e.getEnds(),l=e.getFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,f=o.length;h<f;++h)c=this.drawFlatCoordinates_(l,c,o[h],u);this.hitDetectionInstructions.push(cA),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(cA),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(cA),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(_d)}}class uN extends w1{constructor(e,t,n,i){super(e,t,n,i)}drawFlatCoordinatess_(e,t,n,i){const a=this.state,s=a.fillStyle!==void 0,o=a.strokeStyle!==void 0,l=n.length;this.instructions.push(_d),this.hitDetectionInstructions.push(_d);for(let u=0;u<l;++u){const c=n[u],h=this.coordinates.length,f=this.appendFlatLineCoordinates(e,t,c,i,!0,!o),A=[Mr.MOVE_TO_LINE_TO,h,f];this.instructions.push(A),this.hitDetectionInstructions.push(A),o&&(this.instructions.push(lN),this.hitDetectionInstructions.push(lN)),t=c}return s&&(this.instructions.push(By),this.hitDetectionInstructions.push(By)),o&&(this.instructions.push(cA),this.hitDetectionInstructions.push(cA)),t}drawCircle(e,t,n){const i=this.state,a=i.fillStyle,s=i.strokeStyle;if(a===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Mr.SET_FILL_STYLE,dl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Mr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Xh,Zh]);const o=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,l,!1,!1);const c=[Mr.CIRCLE,u];this.instructions.push(_d,c),this.hitDetectionInstructions.push(_d,c),i.fillStyle!==void 0&&(this.instructions.push(By),this.hitDetectionInstructions.push(By)),i.strokeStyle!==void 0&&(this.instructions.push(cA),this.hitDetectionInstructions.push(cA)),this.endGeometry(t)}drawPolygon(e,t,n){const i=this.state,a=i.fillStyle,s=i.strokeStyle;if(a===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Mr.SET_FILL_STYLE,dl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Mr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Xh,Zh]);const o=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,o,u),this.endGeometry(t)}drawMultiPolygon(e,t,n){const i=this.state,a=i.fillStyle,s=i.strokeStyle;if(a===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Mr.SET_FILL_STYLE,dl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Mr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Xh,Zh]);const o=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,f=o.length;h<f;++h)c=this.drawFlatCoordinatess_(l,c,o[h],u);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let n=0,i=t.length;n<i;++n)t[n]=Ad(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function NV(r,e,t,n,i){const a=[];let s=t,o=0,l=e.slice(t,2);for(;o<r&&s+i<n;){const[u,c]=l.slice(-2),h=e[s+i],f=e[s+i+1],A=Math.sqrt((h-u)*(h-u)+(f-c)*(f-c));if(o+=A,o>=r){const d=(r-o+A)/A,p=Dl(u,h,d),y=Dl(c,f,d);l.push(p,y),a.push(l),l=[p,y],o==r&&(s+=i),o=0}else if(o<r)l.push(e[s+i],e[s+i+1]),s+=i;else{const d=A-o,p=Dl(u,h,d/A),y=Dl(c,f,d/A);l.push(p,y),a.push(l),l=[p,y],o=0,s+=i}}return o>0&&a.push(l),a}function IV(r,e,t,n,i){let a=t,s=t,o=0,l=0,u=t,c,h,f,A,d,p,y,v,w,x;for(h=t;h<n;h+=i){const b=e[h],C=e[h+1];d!==void 0&&(w=b-d,x=C-p,A=Math.sqrt(w*w+x*x),y!==void 0&&(l+=f,c=Math.acos((y*w+v*x)/(f*A)),c>r&&(l>o&&(o=l,a=u,s=h),l=0,u=h-i)),f=A,y=w,v=x),d=b,p=C}return l+=A,l>o?[u,h]:[a,s]}const Px={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class FV extends w1{constructor(e,t,n,i){super(e,t,n,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[dl]={fillStyle:dl},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,n){const i=this.textFillState_,a=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!a)return;const o=this.coordinates;let l=o.length;const u=e.getType();let c=null,h=e.getStride();if(s.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!fo(this.maxExtent,e.getExtent()))return;let f;if(c=e.getFlatCoordinates(),u=="LineString")f=[c.length];else if(u=="MultiLineString")f=e.getEnds();else if(u=="Polygon")f=e.getEnds().slice(0,1);else if(u=="MultiPolygon"){const y=e.getEndss();f=[];for(let v=0,w=y.length;v<w;++v)f.push(y[v][0])}this.beginGeometry(e,t,n);const A=s.repeat,d=A?void 0:s.textAlign;let p=0;for(let y=0,v=f.length;y<v;++y){let w;A?w=NV(A*this.resolution,c,p,f[y],h):w=[c.slice(p,f[y])];for(let x=0,b=w.length;x<b;++x){const C=w[x];let S=0,I=C.length;if(d==null){const T=IV(s.maxAngle,C,0,C.length,2);S=T[0],I=T[1]}for(let T=S;T<I;T+=h)o.push(C[T],C[T+1]);const B=o.length;p=f[y],this.drawChars_(l,B),l=B}}this.endGeometry(t)}else{let f=s.overflow?null:[];switch(u){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),h=2;break;case"Polygon":c=e.getFlatInteriorPoint(),s.overflow||f.push(c[2]/this.resolution),h=3;break;case"MultiPolygon":const w=e.getFlatInteriorPoints();c=[];for(let x=0,b=w.length;x<b;x+=3)s.overflow||f.push(w[x+2]/this.resolution),c.push(w[x],w[x+1]);if(c.length===0)return;h=2;break}const A=this.appendFlatPointCoordinates(c,h);if(A===l)return;if(f&&(A-l)/2!==c.length/h){let w=l/2;f=f.filter((x,b)=>{const C=o[(w+b)*2]===c[b*h]&&o[(w+b)*2+1]===c[b*h+1];return C||--w,C})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&this.updateFillStyle(this.state,this.createFill),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,n);let d=s.padding;if(d!=wd&&(s.scale[0]<0||s.scale[1]<0)){let w=s.padding[0],x=s.padding[1],b=s.padding[2],C=s.padding[3];s.scale[0]<0&&(x=-x,C=-C),s.scale[1]<0&&(w=-w,b=-b),d=[w,x,b,C]}const p=this.pixelRatio;this.instructions.push([Mr.DRAW_IMAGE,l,A,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,d==wd?wd:d.map(function(w){return w*p}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const y=1/p,v=this.state.fillStyle;s.backgroundFill&&(this.state.fillStyle=dl,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Mr.DRAW_IMAGE,l,A,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[y,y],NaN,this.declutterMode_,this.declutterImageWithText_,d,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?dl:this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),s.backgroundFill&&(this.state.fillStyle=v,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const a=this.textKey_;a in this.textStates||(this.textStates[a]={font:t.font,textAlign:t.textAlign||Mv,justify:t.justify,textBaseline:t.textBaseline||Mx,scale:t.scale});const s=this.fillKey_;n&&(s in this.fillStates||(this.fillStates[s]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,i=this.textState_,a=this.strokeKey_,s=this.textKey_,o=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=Px[i.textBaseline],c=this.textOffsetY_*l,h=this.text_,f=n?n.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([Mr.DRAW_CHARS,e,t,u,i.overflow,o,i.maxAngle,l,c,a,f*l,h,s,1,this.declutterMode_]),this.hitDetectionInstructions.push([Mr.DRAW_CHARS,e,t,u,i.overflow,o&&dl,i.maxAngle,l,c,a,f*l,h,s,1/l,this.declutterMode_])}setTextStyle(e,t){let n,i,a;if(!e)this.text_="";else{const s=e.getFill();s?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=qc(s.getColor()||dl)):(i=null,this.textFillState_=i);const o=e.getStroke();if(!o)a=null,this.textStrokeState_=a;else{a=this.textStrokeState_,a||(a={},this.textStrokeState_=a);const d=o.getLineDash(),p=o.getLineDashOffset(),y=o.getWidth(),v=o.getMiterLimit();a.lineCap=o.getLineCap()||Zg,a.lineDash=d?d.slice():Xh,a.lineDashOffset=p===void 0?Zh:p,a.lineJoin=o.getLineJoin()||Jg,a.lineWidth=y===void 0?Lv:y,a.miterLimit=v===void 0?Iv:v,a.strokeStyle=qc(o.getColor()||Fv)}n=this.textState_;const l=e.getFont()||OR;B$(l);const u=e.getScaleArray();n.overflow=e.getOverflow(),n.font=l,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||Mx,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||wd,n.scale=u===void 0?[1,1]:u;const c=e.getOffsetX(),h=e.getOffsetY(),f=e.getRotateWithView(),A=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=f===void 0?!1:f,this.textRotation_=A===void 0?0:A,this.strokeKey_=a?(typeof a.strokeStyle=="string"?a.strokeStyle:Or(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+Or(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const MV={Circle:uN,Default:w1,Image:BV,LineString:TV,Polygon:uN,Text:FV};class LV{constructor(e,t,n,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const i in n){const a=n[i].finish();e[t][i]=a}}return e}getBuilder(e,t){const n=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[n];i===void 0&&(i={},this.buildersByZIndex_[n]=i);let a=i[t];if(a===void 0){const s=MV[t];a=new s(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=a}return a}}function DV(r,e,t,n,i,a,s,o,l,u,c,h){let f=r[e],A=r[e+1],d=0,p=0,y=0,v=0;function w(){d=f,p=A,e+=n,f=r[e],A=r[e+1],v+=y,y=Math.sqrt((f-d)*(f-d)+(A-p)*(A-p))}do w();while(e<t-n&&v+y<a);let x=y===0?0:(a-v)/y;const b=Dl(d,f,x),C=Dl(p,A,x),S=e-n,I=v,B=a+o*l(u,i,c);for(;e<t-n&&v+y<B;)w();x=y===0?0:(B-v)/y;const T=Dl(d,f,x),M=Dl(p,A,x);let F;if(h){const R=[b,C,T,M];i4(R,0,4,2,h,R,R),F=R[0]>R[2]}else F=b>T;const N=Math.PI,O=[],L=S+n===e;e=S,y=0,v=I,f=r[e],A=r[e+1];let G;if(L){w(),G=Math.atan2(A-p,f-d),F&&(G+=G>0?-N:N);const R=(T+b)/2,U=(M+C)/2;return O[0]=[R,U,(B-a)/2,G,i],O}i=i.replace(/\n/g," ");for(let R=0,U=i.length;R<U;){w();let W=Math.atan2(A-p,f-d);if(F&&(W+=W>0?-N:N),G!==void 0){let K=W-G;if(K+=K>N?-2*N:K<-N?2*N:0,Math.abs(K)>s)return null}G=W;const Q=R;let re=0;for(;R<U;++R){const K=F?U-R-1:R,J=o*l(u,i[K],c);if(e+n<t&&v+y<a+re+J/2)break;re+=J}if(R===Q)continue;const oe=F?i.substring(U-Q,U-R):i.substring(Q,R);x=y===0?0:(a+re/2-v)/y;const P=Dl(d,f,x),z=Dl(p,A,x);O.push([P,z,re/2,W,oe]),a+=re}return O}function mO(r,e,t,n){let i=r[e],a=r[e+1],s=0;for(let o=e+n;o<t;o+=n){const l=r[o],u=r[o+1];s+=Math.sqrt((l-i)*(l-i)+(u-a)*(u-a)),i=l,a=u}return s}const F0=Hl(),Hf=[],Bh=[],Th=[],zf=[];function cN(r){return r[3].declutterBox}const hN=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function rb(r,e){return e==="start"?e=hN.test(r)?"right":"left":e==="end"&&(e=hN.test(r)?"left":"right"),Px[e]}function kV(r,e,t){return t>0&&r.push(`
`,""),r.push(e,""),r}class RV{constructor(e,t,n,i,a){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Es(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=a?new iO:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,n,i){const a=e+t+n+i;if(this.labels_[a])return this.labels_[a];const s=i?this.strokeStates[i]:null,o=n?this.fillStates[n]:null,l=this.textStates[t],u=this.pixelRatio,c=[l.scale[0]*u,l.scale[1]*u],h=Array.isArray(e),f=l.justify?Px[l.justify]:rb(Array.isArray(e)?e[0]:e,l.textAlign||Mv),A=i&&s.lineWidth?s.lineWidth:0,d=h?e:e.split(`
`).reduce(kV,[]),{width:p,height:y,widths:v,heights:w,lineWidths:x}=N$(l,d),b=p+A,C=[],S=(b+2)*c[0],I=(y+A)*c[1],B={width:S<0?Math.floor(S):Math.ceil(S),height:I<0?Math.floor(I):Math.ceil(I),contextInstructions:C};(c[0]!=1||c[1]!=1)&&C.push("scale",c),i&&(C.push("strokeStyle",s.strokeStyle),C.push("lineWidth",A),C.push("lineCap",s.lineCap),C.push("lineJoin",s.lineJoin),C.push("miterLimit",s.miterLimit),C.push("setLineDash",[s.lineDash]),C.push("lineDashOffset",s.lineDashOffset)),n&&C.push("fillStyle",o.fillStyle),C.push("textBaseline","middle"),C.push("textAlign","center");const T=.5-f;let M=f*b+T*A;const F=[],N=[];let O=0,L=0,G=0,R=0,U;for(let W=0,Q=d.length;W<Q;W+=2){const re=d[W];if(re===`
`){L+=O,O=0,M=f*b+T*A,++R;continue}const oe=d[W+1]||l.font;oe!==U&&(i&&F.push("font",oe),n&&N.push("font",oe),U=oe),O=Math.max(O,w[G]);const P=[re,M+T*v[G]+f*(v[G]-x[R]),.5*(A+O)+L];M+=v[G],i&&F.push("strokeText",P),n&&N.push("fillText",P),++G}return Array.prototype.push.apply(C,F),Array.prototype.push.apply(C,N),this.labels_[a]=B,B}replayTextBackground_(e,t,n,i,a,s,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,a),e.lineTo.apply(e,t),s&&(this.alignAndScaleFill_=s[2],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,i,a,s,o,l,u,c,h,f,A,d,p,y){o*=f[0],l*=f[1];let v=n-o,w=i-l;const x=a+u>e?e-u:a,b=s+c>t?t-c:s,C=d[3]+x*f[0]+d[1],S=d[0]+b*f[1]+d[2],I=v-d[3],B=w-d[0];(p||h!==0)&&(Hf[0]=I,zf[0]=I,Hf[1]=B,Bh[1]=B,Bh[0]=I+C,Th[0]=Bh[0],Th[1]=B+S,zf[1]=Th[1]);let T;return h!==0?(T=bu(Es(),n,i,1,1,h,-n,-i),Ga(T,Hf),Ga(T,Bh),Ga(T,Th),Ga(T,zf),th(Math.min(Hf[0],Bh[0],Th[0],zf[0]),Math.min(Hf[1],Bh[1],Th[1],zf[1]),Math.max(Hf[0],Bh[0],Th[0],zf[0]),Math.max(Hf[1],Bh[1],Th[1],zf[1]),F0)):th(Math.min(I,I+C),Math.min(B,B+S),Math.max(I,I+C),Math.max(B,B+S),F0),A&&(v=Math.round(v),w=Math.round(w)),{drawImageX:v,drawImageY:w,drawImageW:x,drawImageH:b,originX:u,originY:c,declutterBox:{minX:F0[0],minY:F0[1],maxX:F0[2],maxY:F0[3],value:y},canvasTransform:T,scale:f}}replayImageOrLabel_(e,t,n,i,a,s,o){const l=!!(s||o),u=i.declutterBox,c=o?o[2]*i.scale[0]/2:0;return u.minX-c<=t[0]&&u.maxX+c>=0&&u.minY-c<=t[1]&&u.maxY+c>=0&&(l&&this.replayTextBackground_(e,Hf,Bh,Th,zf,s,o),I$(e,i.canvasTransform,a,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const n=Ga(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(n[0]%i,n[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,n,i){const a=this.textStates[t],s=this.createLabel(e,t,i,n),o=this.strokeStates[n],l=this.pixelRatio,u=rb(Array.isArray(e)?e[0]:e,a.textAlign||Mv),c=Px[a.textBaseline||Mx],h=o&&o.lineWidth?o.lineWidth:0,f=s.width/l-2*a.scale[0],A=u*f+2*(.5-u)*h,d=c*s.height/l+2*(.5-c)*h;return{label:s,anchorX:A,anchorY:d}}execute_(e,t,n,i,a,s,o,l){const u=this.zIndexContext_;let c;this.pixelCoordinates_&&oh(n,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=wA(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),Nj(this.renderedTransform_,n));let h=0;const f=i.length;let A=0,d,p,y,v,w,x,b,C,S,I,B,T,M,F=0,N=0,O=null,L=null;const G=this.coordinateCache_,R=this.viewRotation_,U=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,W={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:R},Q=this.instructions!=i||this.overlaps?0:200;let re,oe,P,z;for(;h<f;){const K=i[h];switch(K[0]){case Mr.BEGIN_GEOMETRY:re=K[1],z=K[3],re.getGeometry()?o!==void 0&&!fo(o,z.getExtent())?h=K[2]+1:++h:h=K[2],u&&(u.zIndex=K[4]);break;case Mr.BEGIN_PATH:F>Q&&(this.fill_(e),F=0),N>Q&&(e.stroke(),N=0),!F&&!N&&(e.beginPath(),w=NaN,x=NaN),++h;break;case Mr.CIRCLE:A=K[1];const ue=c[A],ge=c[A+1],le=c[A+2],me=c[A+3],xe=le-ue,Be=me-ge,Y=Math.sqrt(xe*xe+Be*Be);e.moveTo(ue+Y,ge),e.arc(ue,ge,Y,0,2*Math.PI,!0),++h;break;case Mr.CLOSE_PATH:e.closePath(),++h;break;case Mr.CUSTOM:A=K[1],d=K[2];const Ve=K[3],te=K[4],se=K[5];W.geometry=Ve,W.feature=re,h in G||(G[h]=[]);const Z=G[h];se?se(c,A,d,2,Z):(Z[0]=c[A],Z[1]=c[A+1],Z.length=2),u&&(u.zIndex=K[6]),te(Z,W),++h;break;case Mr.DRAW_IMAGE:A=K[1],d=K[2],S=K[3],p=K[4],y=K[5];let he=K[6];const ne=K[7],ae=K[8],_e=K[9],Me=K[10];let be=K[11];const Ae=K[12];let pe=K[13];v=K[14]||"declutter";const Fe=K[15];if(!S&&K.length>=20){I=K[19],B=K[20],T=K[21],M=K[22];const $n=this.drawLabelWithPointPlacement_(I,B,T,M);S=$n.label,K[3]=S;const Tt=K[23];p=($n.anchorX-Tt)*this.pixelRatio,K[4]=p;const Ln=K[24];y=($n.anchorY-Ln)*this.pixelRatio,K[5]=y,he=S.height,K[6]=he,pe=S.width,K[13]=pe}let Ge;K.length>25&&(Ge=K[25]);let Ze,He,Je;K.length>17?(Ze=K[16],He=K[17],Je=K[18]):(Ze=wd,He=!1,Je=!1),Me&&U?be+=R:!Me&&!U&&(be-=R);let Ye=0;for(;A<d;A+=2){if(Ge&&Ge[Ye++]<pe/this.pixelRatio)continue;const $n=this.calculateImageOrLabelDimensions_(S.width,S.height,c[A],c[A+1],pe,he,p,y,ae,_e,be,Ae,a,Ze,He||Je,re),Tt=[e,t,S,$n,ne,He?O:null,Je?L:null];if(l){let Ln,Kn,ir;if(Fe){const Br=d-A;if(!Fe[Br]){Fe[Br]={args:Tt,declutterMode:v};continue}const Pr=Fe[Br];Ln=Pr.args,Kn=Pr.declutterMode,delete Fe[Br],ir=cN(Ln)}let Dn,Zn;if(Ln&&(Kn!=="declutter"||!l.collides(ir))&&(Dn=!0),(v!=="declutter"||!l.collides($n.declutterBox))&&(Zn=!0),Kn==="declutter"&&v==="declutter"){const Br=Dn&&Zn;Dn=Br,Zn=Br}Dn&&(Kn!=="none"&&l.insert(ir),this.replayImageOrLabel_.apply(this,Ln)),Zn&&(v!=="none"&&l.insert($n.declutterBox),this.replayImageOrLabel_.apply(this,Tt))}else this.replayImageOrLabel_.apply(this,Tt)}++h;break;case Mr.DRAW_CHARS:const Ke=K[1],mt=K[2],vt=K[3],Dt=K[4];M=K[5];const yt=K[6],Ar=K[7],ce=K[8];T=K[9];const Ue=K[10];I=K[11],B=K[12];const st=[K[13],K[13]];v=K[14]||"declutter";const wt=this.textStates[B],Wt=wt.font,rr=[wt.scale[0]*Ar,wt.scale[1]*Ar];let wr;Wt in this.widths_?wr=this.widths_[Wt]:(wr={},this.widths_[Wt]=wr);const Ct=mO(c,Ke,mt,2),fn=Math.abs(rr[0])*KT(Wt,I,wr);if(Dt||fn<=Ct){const $n=this.textStates[B].textAlign,Tt=(Ct-fn)*rb(I,$n),Ln=DV(c,Ke,mt,2,I,Tt,yt,Math.abs(rr[0]),KT,Wt,wr,U?0:this.viewRotation_);e:if(Ln){const Kn=[];let ir,Dn,Zn,Br,Pr;if(T)for(ir=0,Dn=Ln.length;ir<Dn;++ir){Pr=Ln[ir],Zn=Pr[4],Br=this.createLabel(Zn,B,"",T),p=Pr[2]+(rr[0]<0?-Ue:Ue),y=vt*Br.height+(.5-vt)*2*Ue*rr[1]/rr[0]-ce;const tn=this.calculateImageOrLabelDimensions_(Br.width,Br.height,Pr[0],Pr[1],Br.width,Br.height,p,y,0,0,Pr[3],st,!1,wd,!1,re);if(l&&v==="declutter"&&l.collides(tn.declutterBox))break e;Kn.push([e,t,Br,tn,1,null,null])}if(M)for(ir=0,Dn=Ln.length;ir<Dn;++ir){Pr=Ln[ir],Zn=Pr[4],Br=this.createLabel(Zn,B,M,""),p=Pr[2],y=vt*Br.height-ce;const tn=this.calculateImageOrLabelDimensions_(Br.width,Br.height,Pr[0],Pr[1],Br.width,Br.height,p,y,0,0,Pr[3],st,!1,wd,!1,re);if(l&&v==="declutter"&&l.collides(tn.declutterBox))break e;Kn.push([e,t,Br,tn,1,null,null])}l&&v!=="none"&&l.load(Kn.map(cN));for(let tn=0,Ee=Kn.length;tn<Ee;++tn)this.replayImageOrLabel_.apply(this,Kn[tn])}}++h;break;case Mr.END_GEOMETRY:if(s!==void 0){re=K[1];const $n=s(re,z,v);if($n)return $n}++h;break;case Mr.FILL:Q?F++:this.fill_(e),++h;break;case Mr.MOVE_TO_LINE_TO:for(A=K[1],d=K[2],oe=c[A],P=c[A+1],e.moveTo(oe,P),w=oe+.5|0,x=P+.5|0,A+=2;A<d;A+=2)oe=c[A],P=c[A+1],b=oe+.5|0,C=P+.5|0,(A==d-2||b!==w||C!==x)&&(e.lineTo(oe,P),w=b,x=C);++h;break;case Mr.SET_FILL_STYLE:O=K,this.alignAndScaleFill_=K[2],F&&(this.fill_(e),F=0,N&&(e.stroke(),N=0)),e.fillStyle=K[1],++h;break;case Mr.SET_STROKE_STYLE:L=K,N&&(e.stroke(),N=0),this.setStrokeStyle_(e,K),++h;break;case Mr.STROKE:Q?N++:e.stroke(),++h;break;default:++h;break}}F&&this.fill_(e),N&&e.stroke()}execute(e,t,n,i,a,s){this.viewRotation_=i,this.execute_(e,t,n,this.instructions,a,void 0,void 0,s)}executeHitDetection(e,t,n,i,a){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,a)}}const fg=["Polygon","Circle","LineString","Image","Text","Default"],vO=["Image","Text"],OV=fg.filter(r=>!vO.includes(r));class PV{constructor(e,t,n,i,a,s,o){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Es(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(a,o)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,t){for(const n in e){let i=this.executorsByZIndex_[n];i===void 0&&(i={},this.executorsByZIndex_[n]=i);const a=e[n];for(const s in a){const o=a[s];i[s]=new RV(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let i=0,a=e.length;i<a;++i)if(e[i]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,i,a,s){i=Math.round(i);const o=i*2+1,l=bu(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-n,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Ts(o,o,void 0,{willReadFrequently:!0}));const c=this.hitDetectionContext_;c.canvas.width!==o||c.canvas.height!==o?(c.canvas.width=o,c.canvas.height=o):u||c.clearRect(0,0,o,o);let h;this.renderBuffer_!==void 0&&(h=Hl(),Xm(h,e),p1(h,t*(this.renderBuffer_+i),h));const f=UV(i);let A;function d(C,S,I){const B=c.getImageData(0,0,o,o).data;for(let T=0,M=f.length;T<M;T++)if(B[f[T]]>0){if(!s||I==="none"||A!=="Image"&&A!=="Text"||s.includes(C)){const F=(f[T]-3)/4,N=i-F%o,O=i-(F/o|0),L=a(C,S,N*N+O*O);if(L)return L}c.clearRect(0,0,o,o);break}}const p=Object.keys(this.executorsByZIndex_).map(Number);p.sort(Wh);let y,v,w,x,b;for(y=p.length-1;y>=0;--y){const C=p[y].toString();for(w=this.executorsByZIndex_[C],v=fg.length-1;v>=0;--v)if(A=fg[v],x=w[A],x!==void 0&&(b=x.executeHitDetection(c,l,n,d,h),b))return b}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],i=t[1],a=t[2],s=t[3],o=[n,i,n,s,a,s,a,i];return wA(o,0,8,2,e,o),o}isEmpty(){return kd(this.executorsByZIndex_)}execute(e,t,n,i,a,s,o){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(Wh),s=s||fg;const u=fg.length;let c,h,f,A,d;for(o&&l.reverse(),c=0,h=l.length;c<h;++c){const p=l[c].toString();for(d=this.executorsByZIndex_[p],f=0,A=s.length;f<A;++f){const y=s[f],v=d[y];if(v!==void 0){const w=o===null?void 0:v.getZIndexContext(),x=w?w.getContext():e,b=this.maxExtent_&&y!=="Image"&&y!=="Text";if(b&&(x.save(),this.clip(x,n)),!w||y==="Text"||y==="Image"?v.execute(x,t,n,i,a,o):w.pushFunction(C=>v.execute(C,t,n,i,a,o)),b&&x.restore(),w){w.offset();const C=l[c]*u+f;this.deferredZIndexContexts_[C]||(this.deferredZIndexContexts_[C]=[]),this.deferredZIndexContexts_[C].push(w)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Wh);for(let n=0,i=t.length;n<i;++n)e[t[n]].forEach(a=>{a.draw(this.renderedContext_),a.clear()}),e[t[n]].length=0}}const nb={};function UV(r){if(nb[r]!==void 0)return nb[r];const e=r*2+1,t=r*r,n=new Array(t+1);for(let a=0;a<=r;++a)for(let s=0;s<=r;++s){const o=a*a+s*s;if(o>t)break;let l=n[o];l||(l=[],n[o]=l),l.push(((r+a)*e+(r+s))*4+3),a>0&&l.push(((r-a)*e+(r+s))*4+3),s>0&&(l.push(((r+a)*e+(r-s))*4+3),a>0&&l.push(((r-a)*e+(r-s))*4+3))}const i=[];for(let a=0,s=n.length;a<s;++a)n[a]&&i.push(...n[a]);return nb[r]=i,i}class QV extends pO{constructor(e,t,n,i,a,s,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=i,this.transformRotation_=i?n_(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=a,this.squaredTolerance_=s,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Es()}drawImages_(e,t,n,i){if(!this.image_)return;const a=wA(e,t,n,i,this.transform_,this.pixelCoordinates_),s=this.context_,o=this.tmpLocalTransform_,l=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let c=0,h=a.length;c<h;c+=2){const f=a[c]-this.imageAnchorX_,A=a[c+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const d=f+this.imageAnchorX_,p=A+this.imageAnchorY_;bu(o,d,p,1,1,u,-d,-p),s.save(),s.transform.apply(s,o),s.translate(d,p),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,A,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=l)}drawText_(e,t,n,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const a=wA(e,t,n,i,this.transform_,this.pixelCoordinates_),s=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<n;t+=i){const l=a[t]+this.textOffsetX_,u=a[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(s.save(),s.translate(l-this.textOffsetX_,u-this.textOffsetY_),s.rotate(o),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,l,u),this.textFillState_&&s.fillText(this.text_,l,u))}}moveToLineTo_(e,t,n,i,a){const s=this.context_,o=wA(e,t,n,i,this.transform_,this.pixelCoordinates_);s.moveTo(o[0],o[1]);let l=o.length;a&&(l-=2);for(let u=2;u<l;u+=2)s.lineTo(o[u],o[u+1]);return a&&s.closePath(),n}drawRings_(e,t,n,i){for(let a=0,s=n.length;a<s;++a)t=this.moveToLineTo_(e,t,n[a],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!fo(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=kj(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],i=t[3]-t[1],a=Math.sqrt(n*n+i*i),s=this.context_;s.beginPath(),s.arc(t[0],t[1],a,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const n=t.getGeometryFunction()(e);n&&(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,i=t.length;n<i;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!fo(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(fo(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=e.getFlatCoordinates();let a=0;const s=e.getEnds(),o=e.getStride();n.beginPath();for(let l=0,u=s.length;l<u;++l)a=this.moveToLineTo_(i,a,s[l],o,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!fo(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!fo(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let i=0;const a=e.getEndss(),s=e.getStride();t.beginPath();for(let o=0,l=a.length;o<l;++o){const u=a[o];i=this.drawRings_(n,i,u,s)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),oh(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,i=e.textAlign?e.textAlign:Mv;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=i&&(n.textAlign=i,t.textAlign=i),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:qc(n||dl)}}if(!t)this.strokeState_=null;else{const n=t.getColor(),i=t.getLineCap(),a=t.getLineDash(),s=t.getLineDashOffset(),o=t.getLineJoin(),l=t.getWidth(),u=t.getMiterLimit(),c=a||Xh;this.strokeState_={lineCap:i!==void 0?i:Zg,lineDash:this.pixelRatio_===1?c:c.map(h=>h*this.pixelRatio_),lineDashOffset:(s||Zh)*this.pixelRatio_,lineJoin:o!==void 0?o:Jg,lineWidth:(l!==void 0?l:Lv)*this.pixelRatio_,miterLimit:u!==void 0?u:Iv,strokeStyle:qc(n||Fv)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),a=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*n,this.imageAnchorY_=i[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const s=e.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/n,s[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const A=t.getColor();this.textFillState_={fillStyle:qc(A||dl)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const A=n.getColor(),d=n.getLineCap(),p=n.getLineDash(),y=n.getLineDashOffset(),v=n.getLineJoin(),w=n.getWidth(),x=n.getMiterLimit();this.textStrokeState_={lineCap:d!==void 0?d:Zg,lineDash:p||Xh,lineDashOffset:y||Zh,lineJoin:v!==void 0?v:Jg,lineWidth:w!==void 0?w:Lv,miterLimit:x!==void 0?x:Iv,strokeStyle:qc(A||Fv)}}const i=e.getFont(),a=e.getOffsetX(),s=e.getOffsetY(),o=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),c=e.getText(),h=e.getTextAlign(),f=e.getTextBaseline();this.textState_={font:i!==void 0?i:OR,textAlign:h!==void 0?h:Mv,textBaseline:f!==void 0?f:Mx},this.text_=c!==void 0?Array.isArray(c)?c.reduce((A,d,p)=>A+=p%2?" ":d,""):c:"",this.textOffsetX_=a!==void 0?this.pixelRatio_*a:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const Gc=.5;function GV(r,e,t,n,i,a,s,o,l){const u=i,c=r[0]*Gc,h=r[1]*Gc,f=Ts(c,h);f.imageSmoothingEnabled=!1;const A=f.canvas,d=new QV(f,Gc,i,null,s,o,null),p=t.length,y=Math.floor((256*256*256-1)/p),v={};for(let x=1;x<=p;++x){const b=t[x-1],C=b.getStyleFunction()||n;if(!C)continue;let S=C(b,a);if(!S)continue;Array.isArray(S)||(S=[S]);const B=(x*y).toString(16).padStart(7,"#00000");for(let T=0,M=S.length;T<M;++T){const F=S[T],N=F.getGeometryFunction()(b);if(!N||!fo(u,N.getExtent()))continue;const O=F.clone(),L=O.getFill();L&&L.setColor(B);const G=O.getStroke();G&&(G.setColor(B),G.setLineDash(null)),O.setText(void 0);const R=F.getImage();if(R){const re=R.getImageSize();if(!re)continue;const oe=Ts(re[0],re[1],void 0,{alpha:!1}),P=oe.canvas;oe.fillStyle=B,oe.fillRect(0,0,P.width,P.height),O.setImage(new xp({img:P,anchor:R.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:R.getOrigin(),opacity:1,size:R.getSize(),scale:R.getScale(),rotation:R.getRotation(),rotateWithView:R.getRotateWithView()}))}const U=O.getZIndex()||0;let W=v[U];W||(W={},v[U]=W,W.Polygon=[],W.Circle=[],W.LineString=[],W.Point=[]);const Q=N.getType();if(Q==="GeometryCollection"){const re=N.getGeometriesArrayRecursive();for(let oe=0,P=re.length;oe<P;++oe){const z=re[oe];W[z.getType().replace("Multi","")].push(z,O)}}else W[Q.replace("Multi","")].push(N,O)}}const w=Object.keys(v).map(Number).sort(Wh);for(let x=0,b=w.length;x<b;++x){const C=v[w[x]];for(const S in C){const I=C[S];for(let B=0,T=I.length;B<T;B+=2){d.setStyle(I[B+1]);for(let M=0,F=e.length;M<F;++M)d.setTransform(e[M]),d.drawGeometry(I[B])}}}return f.getImageData(0,0,A.width,A.height)}function HV(r,e,t){const n=[];if(t){const i=Math.floor(Math.round(r[0])*Gc),a=Math.floor(Math.round(r[1])*Gc),s=(ea(i,0,t.width-1)+ea(a,0,t.height-1)*t.width)*4,o=t.data[s],l=t.data[s+1],c=t.data[s+2]+256*(l+256*o),h=Math.floor((256*256*256-1)/e.length);c&&c%h===0&&n.push(e[c/h-1])}return n}const zV=.5,yO={Point:XV,LineString:VV,Polygon:JV,MultiPoint:ZV,MultiLineString:WV,MultiPolygon:YV,GeometryCollection:KV,Circle:jV};function qV(r,e){return parseInt(Or(r),10)-parseInt(Or(e),10)}function fN(r,e){const t=xO(r,e);return t*t}function xO(r,e){return zV*r/e}function jV(r,e,t,n,i){const a=t.getFill(),s=t.getStroke();if(a||s){const l=r.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(a,s),l.drawCircle(e,n,i)}const o=t.getText();if(o&&o.getText()){const l=r.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,n)}}function AN(r,e,t,n,i,a,s,o){const l=[],u=t.getImage();if(u){let f=!0;const A=u.getImageState();A==pr.LOADED||A==pr.ERROR?f=!1:A==pr.IDLE&&u.load(),f&&l.push(u.ready())}const c=t.getFill();c&&c.loading()&&l.push(c.ready());const h=l.length>0;return h&&Promise.all(l).then(()=>i(null)),$V(r,e,t,n,a,s,o),h}function $V(r,e,t,n,i,a,s){const o=t.getGeometryFunction()(e);if(!o)return;const l=o.simplifyTransformed(n,i);if(t.getRenderer())wO(r,l,t,e,s);else{const c=yO[l.getType()];c(r,l,t,e,s,a)}}function wO(r,e,t,n,i){if(e.getType()=="GeometryCollection"){const s=e.getGeometries();for(let o=0,l=s.length;o<l;++o)wO(r,s[o],t,n,i);return}r.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer(),i)}function KV(r,e,t,n,i,a){const s=e.getGeometriesArray();let o,l;for(o=0,l=s.length;o<l;++o){const u=yO[s[o].getType()];u(r,s[o],t,n,i,a)}}function VV(r,e,t,n,i){const a=t.getStroke();if(a){const o=r.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,a),o.drawLineString(e,n,i)}const s=t.getText();if(s&&s.getText()){const o=r.getBuilder(t.getZIndex(),"Text");o.setTextStyle(s),o.drawText(e,n,i)}}function WV(r,e,t,n,i){const a=t.getStroke();if(a){const o=r.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,a),o.drawMultiLineString(e,n,i)}const s=t.getText();if(s&&s.getText()){const o=r.getBuilder(t.getZIndex(),"Text");o.setTextStyle(s),o.drawText(e,n,i)}}function YV(r,e,t,n,i){const a=t.getFill(),s=t.getStroke();if(s||a){const l=r.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(a,s),l.drawMultiPolygon(e,n,i)}const o=t.getText();if(o&&o.getText()){const l=r.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,n,i)}}function XV(r,e,t,n,i,a){const s=t.getImage(),o=t.getText(),l=o&&o.getText(),u=a&&s&&l?{}:void 0;if(s){if(s.getImageState()!=pr.LOADED)return;const c=r.getBuilder(t.getZIndex(),"Image");c.setImageStyle(s,u),c.drawPoint(e,n,i)}if(l){const c=r.getBuilder(t.getZIndex(),"Text");c.setTextStyle(o,u),c.drawText(e,n,i)}}function ZV(r,e,t,n,i,a){const s=t.getImage(),o=s&&s.getOpacity()!==0,l=t.getText(),u=l&&l.getText(),c=a&&o&&u?{}:void 0;if(o){if(s.getImageState()!=pr.LOADED)return;const h=r.getBuilder(t.getZIndex(),"Image");h.setImageStyle(s,c),h.drawMultiPoint(e,n,i)}if(u){const h=r.getBuilder(t.getZIndex(),"Text");h.setTextStyle(l,c),h.drawText(e,n,i)}}function JV(r,e,t,n,i){const a=t.getFill(),s=t.getStroke();if(a||s){const l=r.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(a,s),l.drawPolygon(e,n,i)}const o=t.getText();if(o&&o.getText()){const l=r.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,n,i)}}class eW extends B4{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Hl(),this.wrappedRenderedExtent_=Hl(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,n){const i=t.extent,a=t.viewState,s=a.center,o=a.resolution,l=a.projection,u=a.rotation,c=l.getExtent(),h=this.getLayer().getSource(),f=this.getLayer().getDeclutter(),A=t.pixelRatio,d=t.viewHints,p=!(d[Qa.ANIMATING]||d[Qa.INTERACTING]),y=this.context,v=Math.round(Mn(i)/o*A),w=Math.round(qa(i)/o*A),x=h.getWrapX()&&l.canWrapX(),b=x?Mn(c):null,C=x?Math.ceil((i[2]-c[2])/b)+1:1;let S=x?Math.floor((i[0]-c[0])/b):0;do{let I=this.getRenderTransform(s,o,0,A,v,w,S*b);t.declutter&&(I=I.slice(0)),e.execute(y,[y.canvas.width,y.canvas.height],I,u,p,n===void 0?fg:n?vO:OV,n?f&&t.declutter[f]:void 0)}while(++S<C)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Ts(this.context.canvas.width,this.context.canvas.height,nN))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,h_(this.context),nN.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const i=e.viewState;this.prepareContainer(e,t);const a=this.context,s=this.replayGroup_;let o=s&&!s.isEmpty();if(!o&&!(this.getLayer().hasListener(_s.PRERENDER)||this.getLayer().hasListener(_s.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(a,e),i.projection,this.clipped_=!1,o&&n.extent&&this.clipping){const l=Hc(n.extent);o=fo(l,e.extent),this.clipped_=o&&!Ju(l,e.extent),this.clipped_&&this.clipUnrotated(a,e,l)}return o&&this.renderWorlds(s,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&a.restore(),this.postRender(a,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),i=this.renderedCenter_,a=this.renderedResolution_,s=this.renderedRotation_,o=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),c=[],h=n[0]*Gc,f=n[1]*Gc;c.push(this.getRenderTransform(i,a,s,Gc,h,f,0).slice());const A=u.getSource(),d=o.getExtent();if(A.getWrapX()&&o.canWrapX()&&!Ju(d,l)){let p=l[0];const y=Mn(d);let v=0,w;for(;p<d[0];)--v,w=y*v,c.push(this.getRenderTransform(i,a,s,Gc,h,f,w).slice()),p+=y;for(v=0,p=l[2];p>d[2];)++v,w=y*v,c.push(this.getRenderTransform(i,a,s,Gc,h,f,w).slice()),p-=y}this.hitDetectionImageData_=GV(n,c,this.renderedFeatures_,u.getStyleFunction(),l,a,s,fN(a,this.renderedPixelRatio_))}t(HV(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,i,a){if(!this.replayGroup_)return;const s=t.viewState.resolution,o=t.viewState.rotation,l=this.getLayer(),u={},c=function(d,p,y){const v=Or(d),w=u[v];if(w){if(w!==!0&&y<w.distanceSq){if(y===0)return u[v]=!0,a.splice(a.lastIndexOf(w),1),i(d,l,p);w.geometry=p,w.distanceSq=y}}else{if(y===0)return u[v]=!0,i(d,l,p);a.push(u[v]={feature:d,layer:l,geometry:p,distanceSq:y,callback:i})}};let h;const f=[this.replayGroup_],A=this.getLayer().getDeclutter();return f.some(d=>h=d.forEachFeatureAtCoordinate(e,s,o,n,c,A&&t.declutter[A]?t.declutter[A].all().map(p=>p.value):null)),h}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const i=e.viewHints[Qa.ANIMATING],a=e.viewHints[Qa.INTERACTING],s=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!s&&i||!o&&a)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,c=u.projection,h=u.resolution,f=e.pixelRatio,A=t.getRevision(),d=t.getRenderBuffer();let p=t.getRenderOrder();p===void 0&&(p=qV);const y=u.center.slice(),v=p1(l,d*h),w=v.slice(),x=[v.slice()],b=c.getExtent();if(n.getWrapX()&&c.canWrapX()&&!Ju(b,e.extent)){const L=Mn(b),G=Math.max(Mn(v)/2,L);v[0]=b[0]-G,v[2]=b[2]+G,sR(y,c);const R=nR(x[0],c);R[0]<b[0]&&R[2]<b[2]?x.push([R[0]+L,R[1],R[2]+L,R[3]]):R[0]>b[0]&&R[2]>b[2]&&x.push([R[0]-L,R[1],R[2]-L,R[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==A&&this.renderedRenderOrder_==p&&this.renderedFrameDeclutter_===!!e.declutter&&Ju(this.wrappedRenderedExtent_,v))return oh(this.renderedExtent_,w)||(this.hitDetectionImageData_=null,this.renderedExtent_=w),this.renderedCenter_=y,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const C=new LV(xO(h,f),v,h,f);let S;for(let L=0,G=x.length;L<G;++L)n.loadFeatures(x[L],h,c);const I=fN(h,f);let B=!0;const T=(L,G)=>{let R;const U=L.getStyleFunction()||t.getStyleFunction();if(U&&(R=U(L,h)),R){const W=this.renderFeature(L,I,R,C,S,this.getLayer().getDeclutter(),G);B=B&&!W}},M=J5(v),F=n.getFeaturesInExtent(M);p&&F.sort(p);for(let L=0,G=F.length;L<G;++L)T(F[L],L);this.renderedFeatures_=F,this.ready=B;const N=C.finish(),O=new PV(v,h,f,n.getOverlaps(),N,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=h,this.renderedRevision_=A,this.renderedRenderOrder_=p,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=w,this.wrappedRenderedExtent_=v,this.renderedCenter_=y,this.renderedProjection_=c,this.renderedPixelRatio_=f,this.replayGroup_=O,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,i,a,s,o){if(!n)return!1;let l=!1;if(Array.isArray(n))for(let u=0,c=n.length;u<c;++u)l=AN(i,e,n[u],t,this.boundHandleStyleImageChange_,a,s,o)||l;else l=AN(i,e,n,t,this.boundHandleStyleImageChange_,a,s,o);return l}}class Ql extends p_{constructor(e){super(e)}createRenderer(){return new eW(this)}}class nS{constructor(e){this.rbush_=new TR(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[Or(t)]=n}load(e,t){const n=new Array(t.length);for(let i=0,a=t.length;i<a;i++){const s=e[i],o=t[i],l={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:o};n[i]=l,this.items_[Or(o)]=l}this.rbush_.load(n)}remove(e){const t=Or(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[Or(t)],i=[n.minX,n.minY,n.maxX,n.maxY];Od(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let i=0,a=e.length;i<a;i++)if(n=t(e[i]),n)return n;return n}isEmpty(){return kd(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return th(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class yi extends uc{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new yi(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Mi(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Fn(e,$r.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?tW(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function tW(r){if(typeof r=="function")return r;let e;return Array.isArray(r)?e=r:(qn(typeof r.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[r]),function(){return e}}class x_ extends rh{constructor(e,t,n){super(),n!==void 0&&t===void 0?this.setFlatCoordinates(n,e):(t=t||0,this.setCenterAndRadius(e,t,n))}clone(){const e=new x_(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,i){const a=this.flatCoordinates,s=e-a[0],o=t-a[1],l=s*s+o*o;if(l<i){if(l===0)for(let u=0;u<this.stride;++u)n[u]=a[u];else{const u=this.getRadius()/Math.sqrt(l);n[0]=a[0]+u*s,n[1]=a[1]+u*o;for(let c=2;c<this.stride;++c)n[c]=a[c]}return n.length=this.stride,l}return i}containsXY(e,t){const n=this.flatCoordinates,i=e-n[0],a=t-n[1];return i*i+a*a<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,n=t[this.stride]-t[0];return th(t[0]-n,t[1]-n,t[0]+n,t[1]+n,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(fo(e,t)){const n=this.getCenter();return e[0]<=n[0]&&e[2]>=n[0]||e[1]<=n[1]&&e[3]>=n[1]?!0:$5(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,n=this.flatCoordinates[t]-this.flatCoordinates[0],i=e.slice();i[t]=i[0]+n;for(let a=1;a<t;++a)i[t+a]=e[a];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(e,t,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const i=this.flatCoordinates;let a=pR(i,0,e,this.stride);i[a++]=i[0]+t;for(let s=1,o=this.stride;s<o;++s)i[a++]=i[s];i.length=a,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const n=this.getCenter(),i=this.getStride();this.setCenter(i4(n,0,n.length,i,e,t,n)),this.changed()}}x_.prototype.transform;class Gs extends gR{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Mi),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,n=e.length;t<n;++t)this.changeEventsKeys_.push(Fn(e[t],$r.CHANGE,this.changed,this))}clone(){const e=new Gs(ib(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,n,i){if(i<Yd(this.getExtent(),e,t))return i;const a=this.geometries_;for(let s=0,o=a.length;s<o;++s)i=a[s].closestPointXY(e,t,n,i);return i}containsXY(e,t){const n=this.geometries_;for(let i=0,a=n.length;i<a;++i)if(n[i].containsXY(e,t))return!0;return!1}computeExtent(e){vp(e);const t=this.geometries_;for(let n=0,i=t.length;n<i;++n)tR(e,t[n].getExtent());return e}getGeometries(){return ib(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let n=0,i=t.length;n<i;++n)t[n].getType()===this.getType()?e=e.concat(t[n].getGeometriesArrayRecursive()):e.push(t[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],n=this.geometries_;let i=!1;for(let a=0,s=n.length;a<s;++a){const o=n[a],l=o.getSimplifiedGeometry(e);t.push(l),l!==o&&(i=!0)}return i?new Gs(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let n=0,i=t.length;n<i;++n)if(t[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const n=this.geometries_;for(let i=0,a=n.length;i<a;++i)n[i].rotate(e,t);this.changed()}scale(e,t,n){n||(n=Uo(this.getExtent()));const i=this.geometries_;for(let a=0,s=i.length;a<s;++a)i[a].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(ib(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let n=0,i=t.length;n<i;++n)t[n].applyTransform(e);this.changed()}translate(e,t){const n=this.geometries_;for(let i=0,a=n.length;i<a;++i)n[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function ib(r){return r.map(e=>e.clone())}function Ux(r,e,t,n,i,a,s){let o,l;const u=(t-e)/n;if(u===1)o=e;else if(u===2)o=e,l=i;else if(u!==0){let c=r[e],h=r[e+1],f=0;const A=[0];for(let y=e+n;y<t;y+=n){const v=r[y],w=r[y+1];f+=Math.sqrt((v-c)*(v-c)+(w-h)*(w-h)),A.push(f),c=v,h=w}const d=i*f,p=jq(A,d);p<0?(l=(d-A[-p-2])/(A[-p-1]-A[-p-2]),o=e+(-p-2)*n):o=e+p*n}s=s>1?s:2,a=a||new Array(s);for(let c=0;c<s;++c)a[c]=o===void 0?NaN:l===void 0?r[o+c]:Dl(r[o+c],r[o+n+c],l);return a}function iS(r,e,t,n,i,a){if(t==e)return null;let s;if(i<r[e+n-1])return a?(s=r.slice(e,e+n),s[n-1]=i,s):null;if(r[t-1]<i)return a?(s=r.slice(t-n,t),s[n-1]=i,s):null;if(i==r[e+n-1])return r.slice(e,e+n);let o=e/n,l=t/n;for(;o<l;){const f=o+l>>1;i<r[(f+1)*n-1]?l=f:o=f+1}const u=r[o*n-1];if(i==u)return r.slice((o-1)*n,(o-1)*n+n);const c=r[(o+1)*n-1],h=(i-u)/(c-u);s=[];for(let f=0;f<n-1;++f)s.push(Dl(r[(o-1)*n+f],r[o*n+f],h));return s.push(i),s}function rW(r,e,t,n,i,a,s){if(s)return iS(r,e,t[t.length-1],n,i,a);let o;if(i<r[n-1])return a?(o=r.slice(0,n),o[n-1]=i,o):null;if(r[r.length-1]<i)return a?(o=r.slice(r.length-n),o[n-1]=i,o):null;for(let l=0,u=t.length;l<u;++l){const c=t[l];if(e!=c){if(i<r[e+n-1])return null;if(i<=r[c-1])return iS(r,e,c,n,i,!1);e=c}}return null}class vl extends rh{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){ii(this.flatCoordinates,e),this.changed()}clone(){const e=new vl(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,i){return i<Yd(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(a4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),o4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,n,i))}forEachSegment(e){return ER(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,iS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return lA(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Ux(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return mO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=l_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new vl(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return u_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=o_(this.flatCoordinates,0,e,this.stride),this.changed()}}class lc extends rh{constructor(e,t,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&n)this.setFlatCoordinates(t,e),this.ends_=n;else{const i=e,a=[],s=[];for(let l=0,u=i.length;l<u;++l){const c=i[l];ii(a,c.getFlatCoordinates()),s.push(a.length)}const o=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(o,a),this.ends_=s}}appendLineString(e){ii(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new lc(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,i){return i<Yd(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(s4(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),l4(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,i))}getCoordinateAtM(e,t,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,n=n!==void 0?n:!1,rW(this.flatCoordinates,0,this.ends_,this.stride,e,t,n))}getCoordinates(){return Bv(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new vl(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,n=this.layout,i=[];let a=0;for(let s=0,o=t.length;s<o;++s){const l=t[s],u=new vl(e.slice(a,l),n);i.push(u),a=l}return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let n=0;const i=this.ends_,a=this.stride;for(let s=0,o=i.length;s<o;++s){const l=i[s],u=Ux(t,n,l,a,.5);ii(e,u),n=l}return e}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=vR(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,n),new lc(t,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return zj(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=m1(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class UA extends rh{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){ii(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new UA(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,i){if(i<Yd(this.getExtent(),e,t))return i;const a=this.flatCoordinates,s=this.stride;for(let o=0,l=a.length;o<l;o+=s){const u=Yh(e,t,a[o],a[o+1]);if(u<i){i=u;for(let c=0;c<s;++c)n[c]=a[o+c];n.length=s}}return i}getCoordinates(){return lA(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new ja(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,n=this.stride,i=[];for(let a=0,s=e.length;a<s;a+=n){const o=new ja(e.slice(a,a+n),t);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,n=this.stride;for(let i=0,a=t.length;i<a;i+=n){const s=t[i],o=t[i+1];if(q5(e,s,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=o_(this.flatCoordinates,0,e,this.stride),this.changed()}}function _O(r,e,t,n){const i=[];let a=Hl();for(let s=0,o=t.length;s<o;++s){const l=t[s];a=j5(r,e,l[0],n),i.push((a[0]+a[2])/2,(a[1]+a[3])/2),e=l[l.length-1]}return i}class af extends rh{constructor(e,t,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){const i=e,a=[],s=[];for(let o=0,l=i.length;o<l;++o){const u=i[o],c=a.length,h=u.getEnds();for(let f=0,A=h.length;f<A;++f)h[f]+=c;ii(a,u.getFlatCoordinates()),s.push(h)}t=i.length===0?this.getLayout():i[0].getLayout(),e=a,n=s}t!==void 0&&n?(this.setFlatCoordinates(t,e),this.endss_=n):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;ii(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,a=t.length;i<a;++i)t[i]+=n}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const n=new af(this.flatCoordinates.slice(),this.layout,t);return n.applyProperties(this),n}closestPointXY(e,t,n,i){return i<Yd(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Rj(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Oj(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,i))}containsXY(e,t){return Hj(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return Qj(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),$C(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,jC(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=_O(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=_R(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new UA(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;SR(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=$C(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=Uj(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,n),new af(t,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const a=this.endss_[e-1];t=a[a.length-1]}const n=this.endss_[e].slice(),i=n[n.length-1];if(t!==0)for(let a=0,s=n.length;a<s;++a)n[a]-=t;return new zl(this.flatCoordinates.slice(t,i),this.layout,n)}getPolygons(){const e=this.layout,t=this.flatCoordinates,n=this.endss_,i=[];let a=0;for(let s=0,o=n.length;s<o;++s){const l=n[s].slice(),u=l[l.length-1];if(a!==0)for(let h=0,f=l.length;h<f;++h)l[h]-=a;const c=new zl(t.slice(a,u),e,l);i.push(c),a=u}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return qj(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=mR(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const i=n[n.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const dN=Es();class hl{constructor(e,t,n,i,a,s){this.styleFunction,this.extent_,this.id_=s,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=a,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Ym(this.flatCoordinates_):j5(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Uo(this.getExtent());this.flatInteriorPoints_=h4(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=$j(this.flatCoordinates_,this.ends_),t=_O(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=_R(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Ux(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const n=this.ends_;for(let i=0,a=n.length;i<a;++i){const s=n[i],o=Ux(e,t,s,2,.5);ii(this.flatMidpoints_,o),t=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Ci(e);const t=e.getExtent(),n=e.getWorldExtent();if(t&&n){const i=qa(n)/qa(t);bu(dN,n[0],n[3],i,-i,0,0,0),wA(this.flatCoordinates_,0,this.flatCoordinates_.length,2,dN,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new hl(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Y6((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const n=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":n.length=l_(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),i=[n.length];break;case"MultiLineString":i=[],n.length=vR(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,i);break;case"Polygon":i=[],n.length=u4(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,i);break}return i&&(this.simplifiedGeometry_=new hl(this.type_,n,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}hl.prototype.getFlatCoordinates=hl.prototype.getOrientedFlatCoordinates;const ms={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function nW(r,e){return[[-1/0,-1/0,1/0,1/0]]}let iW=!1;function aW(r,e,t,n,i,a,s){const o=new XMLHttpRequest;o.open("GET",typeof r=="function"?r(t,n,i):r,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=iW,o.onload=function(l){if(!o.status||o.status>=200&&o.status<300){const u=e.getType();try{let c;u=="text"||u=="json"?c=o.responseText:u=="xml"?c=o.responseXML||o.responseText:u=="arraybuffer"&&(c=o.response),c?a(e.readFeatures(c,{extent:t,featureProjection:i}),e.readProjection(c)):s()}catch{s()}}else s()},o.onerror=s,o.send()}function gN(r,e){return function(t,n,i,a,s){const o=this;aW(r,e,t,n,i,function(l,u){o.addFeatures(l),a!==void 0&&a(l)},s||$g)}}class qf extends _l{constructor(e,t,n){super(e),this.feature=t,this.features=n}}class zo extends N4{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=$g,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(qn(this.format_,"`format` must be set when `url` is set"),this.loader_=gN(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:nW;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new nS:null,this.loadedExtentsRtree_=new nS,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,i;Array.isArray(e.features)?i=e.features:e.features&&(n=e.features,i=n.getArray()),!t&&n===void 0&&(n=new po(i)),i!==void 0&&this.addFeaturesInternal(i),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Or(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new qf(ms.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof hl||(this.featureChangeKeys_[e]=[Fn(t,$r.CHANGE,this.handleFeatureChange_,this),Fn(t,jg.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let n=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof hl){const a=this.idIndex_[i];a instanceof hl?Array.isArray(a)?a.push(t):this.idIndex_[i]=[a,t]:n=!1}else n=!1}return n&&(qn(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],i=[];for(let a=0,s=e.length;a<s;a++){const o=e[a],l=Or(o);this.addToIndex_(l,o)&&n.push(o)}for(let a=0,s=n.length;a<s;a++){const o=n[a],l=Or(o);this.setupChangeEvents_(l,o);const u=o.getGeometry();if(u){const c=u.getExtent();t.push(c),i.push(o)}else this.nullGeometryFeatures_[l]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(ms.ADDFEATURE))for(let a=0,s=n.length;a<s;a++)this.dispatchEvent(new qf(ms.ADDFEATURE,n[a]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(ms.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener(ms.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(Ha.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(Ha.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Mi);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=i=>{this.removeFeatureInternal(i)};this.featuresRtree_.forEach(n);for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new qf(ms.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(i){const a=i.getGeometry();if(a instanceof hl||a.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){const i=n.getGeometry();if(i instanceof hl||i.intersectsExtent(e)){const a=t(n);if(a)return a}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),kd(this.nullGeometryFeatures_)||ii(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=iR(e,t);return[].concat(...i.map(a=>this.featuresRtree_.getInExtent(a)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const n=e[0],i=e[1];let a=null;const s=[NaN,NaN];let o=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||eh,this.featuresRtree_.forEachInExtent(l,function(u){if(t(u)){const c=u.getGeometry(),h=o;if(o=c instanceof hl?0:c.closestPointXY(n,i,s,o),o<h){a=u;const f=Math.sqrt(o);l[0]=n-f,l[1]=i-f,l[2]=n+f,l[3]=i+f}}}),a}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=Or(t),i=t.getGeometry();if(!i)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const s=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(s,t)):this.featuresRtree_&&this.featuresRtree_.update(s,t)}const a=t.getId();if(a!==void 0){const s=a.toString();this.idIndex_[s]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[s]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new qf(ms.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Or(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&kd(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const i=this.loadedExtentsRtree_,a=this.strategy_(e,t,n);for(let s=0,o=a.length;s<o;++s){const l=a[s];i.forEachInExtent(l,function(c){return Ju(c.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new qf(ms.FEATURESLOADSTART)),this.loader_.call(this,l,t,n,c=>{--this.loadingExtentsCount_,this.dispatchEvent(new qf(ms.FEATURESLOADEND,void 0,c))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new qf(ms.FEATURESLOADERROR))}),i.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let n;t.forEachInExtent(e,function(i){if(Od(i.extent,e))return n=i,!0}),n&&t.remove(n)}removeFeatures(e){const t=[];for(let n=0,i=e.length;n<i;++n){const a=e[n],s=this.removeFeatureInternal(a);s&&t.push(s)}t.length>0&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Or(e);if(!(t in this.uidIndex_))return;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const n=this.featureChangeKeys_[t];n==null||n.forEach(Mi),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const a=i.toString(),s=this.idIndex_[a];s===e?delete this.idIndex_[a]:Array.isArray(s)&&(s.splice(s.indexOf(e),1),s.length===1&&(this.idIndex_[a]=s[0]))}return delete this.uidIndex_[t],this.hasListener(ms.REMOVEFEATURE)&&this.dispatchEvent(new qf(ms.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const n in this.idIndex_){const i=this.idIndex_[n];if(e instanceof hl&&Array.isArray(i)&&i.includes(e))i.splice(i.indexOf(e),1);else if(this.idIndex_[n]===e){delete this.idIndex_[n],t=!0;break}}return t}setLoader(e){this.loader_=e}setUrl(e){qn(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(gN(e,this.format_))}}const ab=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#84cc16"],pN={solid:null,dashed:[10,10],dotted:[2,6],"dash-dot":[10,5,2,5]};class sW{constructor(){this.layers=new Map,this.layerOrder=[],this.selectedLayerId=null,this.selectedLayerIds=new Set,this.colorIndex=0}getNextColor(){const e=ab[this.colorIndex%ab.length];return this.colorIndex++,e}getLineDash(e){return pN[e]||null}hexToRgba(e,t){if(t===void 0&&(t=1),!e||typeof e!="string")return"rgba(128, 128, 128, "+t+")";if(e.startsWith("rgba")||e.startsWith("rgb"))return e;e.startsWith("#")||(e="#"+e);const n=parseInt(e.slice(1,3),16)||0,i=parseInt(e.slice(3,5),16)||0,a=parseInt(e.slice(5,7),16)||0;return"rgba("+n+", "+i+", "+a+", "+t+")"}createStyle(e,t){t||(t="polygon");const n=this.hexToRgba(e,.3);return t==="Point"||t==="MultiPoint"?new En({image:new qs({radius:6,fill:new _n({color:e}),stroke:new hn({color:"#ffffff",width:2})})}):t==="LineString"||t==="MultiLineString"?new En({stroke:new hn({color:e,width:3})}):new En({fill:new _n({color:n}),stroke:new hn({color:e,width:2})})}addLayer(e){const t=e.name||"새 레이어",n=e.type||"vector",i=e.source||null,a=e.features||[],s=e.visible!==void 0?e.visible:!0,o=e.color||null,l=e.style||null,u=e.zIndex!==void 0?e.zIndex:null,c=e.olLayer||null,h="layer-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),f=o||this.getNextColor();let A=null,d,p=e.geometryType||"Polygon",y=0;const v=C=>{if(e.geometryType)return e.geometryType;if(C&&typeof C.getFeatures=="function"){const S=C.getFeatures()[0];if(S&&S.getGeometry())return S.getGeometry().getType()}return"Polygon"};if(console.log("addLayer 호출:",{type:n,hasExistingLayer:!!c,name:t}),n==="raster"&&c)console.log("래스터 레이어로 처리"),d=c,p=e.geometryType||"Raster",y=0;else if(c)console.log("기존 레이어로 처리 (히트맵 등)"),d=c,A=d.getSource&&d.getSource(),A&&typeof A.getFeatures=="function"&&(p=v(A),y=A.getFeatures().length);else{console.log("새 벡터 레이어 생성"),i?A=i:(A=new zo,a.length>0&&A.addFeatures(a)),p=v(A);const C=l||this.createStyle(f,p);d=new Ql({source:A,style:C,visible:s}),y=A.getFeatures().length}const w=u!==null?u:this.layerOrder.length+1;d.setZIndex(w);const x={id:h,name:t,type:n,olLayer:d,source:A,visible:s,color:f,strokeColor:f,fillColor:f,geometryType:p,featureCount:y,strokeDash:"solid",fillOpacity:.3,strokeOpacity:1,strokeWidth:2,pointRadius:6};this.layers.set(h,x),this.layerOrder.push(h);const b=Nr.getMap();return b&&b.addLayer(d),Gt.emit(Xt.LAYER_ADDED,{layer:x}),h}removeLayer(e){const t=this.layers.get(e);if(!t)return!1;const n=Nr.getMap();return n&&n.removeLayer(t.olLayer),this.layers.delete(e),this.layerOrder=this.layerOrder.filter(function(i){return i!==e}),this.selectedLayerId===e&&(this.selectedLayerId=null),this.selectedLayerIds.delete(e),Gt.emit(Xt.LAYER_REMOVED,{layerId:e}),!0}toggleVisibility(e){const t=this.layers.get(e);if(!t)return;const n=!t.visible;t.visible=n,t.olLayer.setVisible(n),Gt.emit(Xt.LAYER_VISIBILITY_CHANGED,{layerId:e,visible:n})}selectLayer(e){const t=this.selectedLayerId;this.selectedLayerId=e,this.selectedLayerIds.clear(),e&&this.selectedLayerIds.add(e),Gt.emit(Xt.LAYER_SELECTED,{layerId:e,prevLayerId:t})}selectLayerWithModifier(e,t,n){if(!t&&!n){this.selectLayer(e);return}t?this.toggleLayerSelection(e):n&&this.selectedLayerId?this.selectRange(this.selectedLayerId,e):this.selectLayer(e)}toggleLayerSelection(e){if(this.selectedLayerIds.has(e)){if(this.selectedLayerIds.delete(e),this.selectedLayerId===e){const t=Array.from(this.selectedLayerIds);this.selectedLayerId=t.length>0?t[t.length-1]:null}}else this.selectedLayerIds.add(e),this.selectedLayerId=e;Gt.emit(Xt.LAYER_SELECTED,{layerId:this.selectedLayerId,selectedIds:Array.from(this.selectedLayerIds)})}selectRange(e,t){const n=this.layerOrder.indexOf(e),i=this.layerOrder.indexOf(t);if(n===-1||i===-1)return;const a=Math.min(n,i),s=Math.max(n,i);this.selectedLayerIds.clear();for(let o=a;o<=s;o++)this.selectedLayerIds.add(this.layerOrder[o]);this.selectedLayerId=t,Gt.emit(Xt.LAYER_SELECTED,{layerId:this.selectedLayerId,selectedIds:Array.from(this.selectedLayerIds)})}addToSelection(e){this.layers.has(e)&&(this.selectedLayerIds.add(e),this.selectedLayerId=e,Gt.emit(Xt.LAYER_SELECTED,{layerId:this.selectedLayerId,selectedIds:Array.from(this.selectedLayerIds)}))}removeFromSelection(e){if(this.selectedLayerIds.delete(e),this.selectedLayerId===e){const t=Array.from(this.selectedLayerIds);this.selectedLayerId=t.length>0?t[t.length-1]:null}Gt.emit(Xt.LAYER_SELECTED,{layerId:this.selectedLayerId,selectedIds:Array.from(this.selectedLayerIds)})}clearSelection(){this.selectedLayerIds.clear(),this.selectedLayerId=null,Gt.emit(Xt.LAYER_SELECTED,{layerId:null,selectedIds:[]})}getSelectedLayerIds(){return Array.from(this.selectedLayerIds)}getSelectedLayers(){const e=this;return Array.from(this.selectedLayerIds).map(function(t){return e.layers.get(t)}).filter(Boolean)}isLayerSelected(e){return this.selectedLayerIds.has(e)}getLayer(e){return this.layers.get(e)}getAllLayers(){const e=this;return this.layerOrder.map(function(t){return e.layers.get(t)}).filter(Boolean)}reorderLayers(e){const t=this;this.layerOrder=e.slice(),this.layerOrder.forEach(function(n,i){const a=t.layers.get(n);a&&a.olLayer.setZIndex(i+1)}),Gt.emit(Xt.LAYER_ORDER_CHANGED,{order:this.layerOrder})}renameLayer(e,t){const n=this.layers.get(e);n&&(n.name=t,Gt.emit(Xt.LAYER_ADDED,{layer:n}))}setLayerColor(e,t){const n=this.layers.get(e);n&&(n.color=t,n.strokeColor=t,n.fillColor=t,this.updateLayerStyle(e))}setLayerStrokeColor(e,t){const n=this.layers.get(e);n&&(n.strokeColor=t,this.updateLayerStyle(e))}setLayerFillColor(e,t){const n=this.layers.get(e);n&&(n.fillColor=t,this.updateLayerStyle(e))}getColorPalette(){return ab}getStrokeDashOptions(){return Object.keys(pN)}setLayerStrokeDash(e,t){const n=this.layers.get(e);n&&(n.strokeDash=t,this.updateLayerStyle(e))}setLayerFillOpacity(e,t){const n=this.layers.get(e);n&&(n.fillOpacity=t,this.updateLayerStyle(e))}setLayerStrokeOpacity(e,t){const n=this.layers.get(e);n&&(n.strokeOpacity=t,this.updateLayerStyle(e))}setLayerStrokeWidth(e,t){const n=this.layers.get(e);n&&(n.strokeWidth=t,this.updateLayerStyle(e))}updateLayerStyle(e){const t=this.layers.get(e);if(!t)return;const n=this.getLineDash(t.strokeDash||"solid"),i=t.fillOpacity!==void 0?t.fillOpacity:.3,a=t.strokeOpacity!==void 0?t.strokeOpacity:1,s=t.strokeColor||t.color,o=t.fillColor||t.color,l=this.hexToRgba(o,i),u=this.hexToRgba(s,a);let c;const h=t.geometryType;h==="LineString"||h==="MultiLineString"?c=new En({stroke:new hn({color:u,width:t.strokeWidth||2,lineDash:n})}):h==="Point"||h==="MultiPoint"?c=new En({image:new qs({radius:t.pointRadius||6,fill:new _n({color:l}),stroke:new hn({color:u,width:2})})}):c=new En({fill:new _n({color:l}),stroke:new hn({color:u,width:t.strokeWidth||2,lineDash:n})});const f=t.olLayer;if(!f){console.warn("레이어 객체가 없습니다:",e);return}f._hasLabel&&f._originalStyle?(f._originalStyle=c,Gt.emit("label:refresh",{layerId:e})):f.setStyle(c),typeof f.changed=="function"&&f.changed(),t.source&&typeof t.source.changed=="function"&&t.source.changed(),Gt.emit(Xt.LAYER_STYLE_CHANGED,{layerId:e}),Gt.emit(Xt.LAYER_ADDED,{layer:t})}zoomToLayer(e){const t=this.layers.get(e);if(!t)return;const n=t.source.getExtent();n&&n[0]!==1/0&&Nr.fitExtent(n,{padding:[50,50,50,50]})}getSelectedLayerId(){return this.selectedLayerId}getLayerCount(){return this.layers.size}clear(){const e=this;Array.from(this.layers.keys()).forEach(function(n){e.removeLayer(n)})}}const pt=new sW,mN="egis-theme",Nh={LIGHT:"light",DARK:"dark"};class oW{constructor(){this.currentTheme=this.getStoredTheme()||this.getSystemTheme(),this.listeners=[]}getStoredTheme(){return localStorage.getItem(mN)}getSystemTheme(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Nh.DARK:Nh.LIGHT}getTheme(){return this.currentTheme}applyTheme(e){this.currentTheme=e,document.documentElement.setAttribute("data-theme",e),localStorage.setItem(mN,e),this.notifyListeners(e)}toggle(){const e=this.currentTheme===Nh.LIGHT?Nh.DARK:Nh.LIGHT;return this.applyTheme(e),e}isLight(){return this.currentTheme===Nh.LIGHT}isDark(){return this.currentTheme===Nh.DARK}onChange(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}notifyListeners(e){this.listeners.forEach(t=>t(e))}init(){this.applyTheme(this.currentTheme),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{this.getStoredTheme()||this.applyTheme(e.matches?Nh.DARK:Nh.LIGHT)})}}const vN=new oW;class lW{constructor(e="layer-list"){this.container=document.getElementById(e),this.draggedItem=null,this.init()}init(){this.bindEvents(),this.render()}bindEvents(){Gt.on(Xt.LAYER_ADDED,()=>this.render()),Gt.on(Xt.LAYER_REMOVED,()=>this.render()),Gt.on(Xt.LAYER_VISIBILITY_CHANGED,()=>this.render()),Gt.on(Xt.LAYER_SELECTED,()=>this.render()),Gt.on(Xt.LAYER_ORDER_CHANGED,()=>this.render()),this.container.addEventListener("click",e=>this.handleClick(e)),this.container.addEventListener("dblclick",e=>this.handleDoubleClick(e)),this.container.addEventListener("dragstart",e=>this.handleDragStart(e)),this.container.addEventListener("dragover",e=>this.handleDragOver(e)),this.container.addEventListener("drop",e=>this.handleDrop(e)),this.container.addEventListener("dragend",e=>this.handleDragEnd(e))}render(){const e=pt.getAllLayers(),t=pt.getSelectedLayerIds(),n=pt.getSelectedLayerId();if(e.length===0){this.container.innerHTML=`
        <li class="layer-empty">
          레이어가 없습니다.<br>
          파일을 드래그하여 추가하세요.
        </li>
      `;return}const i=[...e].reverse();this.container.innerHTML=i.map(a=>{const s=t.includes(a.id),o=n===a.id;let l="layer-item";return s&&(l+=" selected"),o&&(l+=" primary-selected"),`
        <li class="${l}"
            data-layer-id="${a.id}"
            draggable="true">
          <input type="checkbox"
                 class="layer-visibility"
                 ${a.visible?"checked":""}
                 title="표시/숨김">
          <span class="layer-color" style="background-color: ${a.color}"></span>
          <span class="layer-name" title="${a.name}">${a.name}</span>
          <span class="layer-count">(${a.featureCount})</span>
          <button class="layer-menu-btn" title="메뉴">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
              <circle cx="12" cy="5" r="2"/>
              <circle cx="12" cy="12" r="2"/>
              <circle cx="12" cy="19" r="2"/>
            </svg>
          </button>
        </li>
      `}).join(""),t.length>1?this.showMultiSelectInfo(t.length):this.hideMultiSelectInfo()}showMultiSelectInfo(e){let t=document.querySelector(".layer-multi-select-info");t||(t=document.createElement("div"),t.className="layer-multi-select-info",this.container.parentElement.insertBefore(t,this.container)),t.innerHTML=`<span>${e}개 레이어 선택됨</span><button class="clear-selection-btn" title="선택 해제">✕</button>`;const n=t.querySelector(".clear-selection-btn");n.onclick=()=>pt.clearSelection()}hideMultiSelectInfo(){const e=document.querySelector(".layer-multi-select-info");e&&e.remove()}handleClick(e){const t=e.target.closest(".layer-item");if(!t)return;const n=t.dataset.layerId;if(e.target.classList.contains("layer-visibility")){e.stopPropagation();const i=pt.getSelectedLayerIds();i.length>1&&i.includes(n)?i.forEach(a=>pt.toggleVisibility(a)):pt.toggleVisibility(n);return}if(e.target.classList.contains("layer-color")){e.stopPropagation(),this.showColorPicker(n);return}if(e.target.closest(".layer-menu-btn")){e.stopPropagation(),this.showContextMenu(e,n);return}pt.selectLayerWithModifier(n,e.ctrlKey||e.metaKey,e.shiftKey)}handleDoubleClick(e){const t=e.target.closest(".layer-item");if(!t)return;const n=t.dataset.layerId;pt.zoomToLayer(n)}showContextMenu(e,t){const n=document.querySelector(".layer-context-menu");n&&n.remove();const i=pt.getSelectedLayerIds(),a=i.length>1&&i.includes(t),s=document.createElement("div");s.className="layer-context-menu",a?s.innerHTML=`
        <div class="context-menu-header">${i.length}개 레이어 선택됨</div>
        <div class="context-menu-item" data-action="zoom-all">선택 레이어로 이동</div>
        <div class="context-menu-item" data-action="show-all">모두 표시</div>
        <div class="context-menu-item" data-action="hide-all">모두 숨기기</div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item danger" data-action="remove-all">선택 레이어 삭제</div>
      `:s.innerHTML=`
        <div class="context-menu-item" data-action="zoom">레이어로 이동</div>
        <div class="context-menu-item" data-action="rename">이름 변경</div>
        <div class="context-menu-item" data-action="table">속성 테이블</div>
        <div class="context-menu-item" data-action="color">색상 변경</div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item danger" data-action="remove">삭제</div>
      `;const o=e.target.getBoundingClientRect();s.style.position="fixed",s.style.left=o.right+"px",s.style.top=o.top+"px",document.body.appendChild(s),s.addEventListener("click",l=>{const u=l.target.dataset.action;u&&(this.handleMenuAction(u,t,a?i:null),s.remove())}),setTimeout(()=>{const l=u=>{s.contains(u.target)||(s.remove(),document.removeEventListener("click",l))};document.addEventListener("click",l)},0)}handleMenuAction(e,t,n=null){switch(e){case"zoom":pt.zoomToLayer(t);break;case"rename":this.promptRename(t);break;case"table":Gt.emit("layer:openTable",{layerId:t});break;case"color":this.showColorPicker(t);break;case"remove":confirm("이 레이어를 삭제하시겠습니까?")&&pt.removeLayer(t);break;case"zoom-all":n&&this.zoomToSelectedLayers(n);break;case"show-all":n&&n.forEach(i=>{const a=pt.getLayer(i);a&&!a.visible&&pt.toggleVisibility(i)});break;case"hide-all":n&&n.forEach(i=>{const a=pt.getLayer(i);a&&a.visible&&pt.toggleVisibility(i)});break;case"remove-all":n&&confirm(`${n.length}개의 레이어를 삭제하시겠습니까?`)&&(n.forEach(i=>pt.removeLayer(i)),pt.clearSelection());break}}zoomToSelectedLayers(e){let t=null;e.forEach(n=>{const i=pt.getLayer(n);if(i&&i.source){const a=i.source.getExtent();a&&a[0]!==1/0&&(t?(t[0]=Math.min(t[0],a[0]),t[1]=Math.min(t[1],a[1]),t[2]=Math.max(t[2],a[2]),t[3]=Math.max(t[3],a[3])):t=[...a])}}),t&&Nr.fitExtent(t,{padding:[50,50,50,50]})}promptRename(e){const t=pt.getLayer(e);if(!t)return;const n=prompt("새 레이어 이름:",t.name);n&&n.trim()&&pt.renameLayer(e,n.trim())}showColorPicker(e){const t=pt.getLayer(e);if(!t)return;const n=document.querySelector(".color-picker-popup");n&&n.remove();const i=pt.getColorPalette(),a=document.createElement("div");a.className="color-picker-popup",a.style.cssText="position: fixed; left: 300px; top: 100px; border: 1px solid var(--border-color); border-radius: 8px; padding: 16px; min-width: 200px; z-index: 99999; box-shadow: 0 4px 20px rgba(0,0,0,0.3);",t.geometryType==="Point"||t.geometryType;const s=t.geometryType==="LineString"||t.geometryType==="MultiLineString",o=t.geometryType==="Polygon"||t.geometryType==="MultiPolygon",l=t.strokeDash||"solid",u=t.fillOpacity!==void 0?t.fillOpacity:.3,c=t.strokeOpacity!==void 0?t.strokeOpacity:1,h=t.strokeColor||t.color,f=t.fillColor||t.color,A=t.strokeWidth!==void 0?t.strokeWidth:2;let d='<div class="color-picker-header">스타일 편집</div>';if(o){const I=i.map(function(T){return'<div class="color-item'+(T===f?" active":"")+'" data-fill-color="'+T+'" style="background-color: '+T+'"></div>'}).join("");d+='<div class="style-section"><label>면 색상:</label><div class="color-picker-grid">'+I+"</div>",d+='<div class="color-picker-custom"><input type="color" value="'+f+'" class="fill-color-input"></div></div>',d+='<div class="style-section"><label>면 투명도: <span class="fill-opacity-value">'+Math.round(u*100)+"%</span></label>",d+='<input type="range" class="opacity-slider fill-opacity-slider" min="0" max="100" value="'+Math.round(u*100)+'"></div>';const B=i.map(function(T){return'<div class="color-item'+(T===h?" active":"")+'" data-stroke-color="'+T+'" style="background-color: '+T+'"></div>'}).join("");d+='<div class="style-section"><label>선 색상:</label><div class="color-picker-grid">'+B+"</div>",d+='<div class="color-picker-custom"><input type="color" value="'+h+'" class="stroke-color-input"></div></div>',d+='<div class="style-section"><label>선 두께: <span class="stroke-width-value">'+A+"px</span></label>",d+='<input type="range" class="stroke-width-slider" min="1" max="10" value="'+A+'"></div>',d+='<div class="style-section"><label>선 스타일:</label><div class="stroke-style-options">',d+='<button class="stroke-btn'+(l==="solid"?" active":"")+'" data-stroke="solid" title="실선">━━━</button>',d+='<button class="stroke-btn'+(l==="dashed"?" active":"")+'" data-stroke="dashed" title="파선">┅┅┅</button>',d+='<button class="stroke-btn'+(l==="dotted"?" active":"")+'" data-stroke="dotted" title="점선">┈┈┈</button>',d+='<button class="stroke-btn'+(l==="dash-dot"?" active":"")+'" data-stroke="dash-dot" title="일점쇄선">━┅━</button>',d+="</div></div>"}else if(s){const I=i.map(function(B){return'<div class="color-item'+(B===t.color?" active":"")+'" data-color="'+B+'" style="background-color: '+B+'"></div>'}).join("");d+='<div class="style-section"><label>선 색상:</label><div class="color-picker-grid">'+I+"</div>",d+='<div class="color-picker-custom"><input type="color" value="'+t.color+'" class="color-input"></div></div>',d+='<div class="style-section"><label>선 투명도: <span class="stroke-opacity-value">'+Math.round(c*100)+"%</span></label>",d+='<input type="range" class="opacity-slider stroke-opacity-slider" min="0" max="100" value="'+Math.round(c*100)+'"></div>',d+='<div class="style-section"><label>선 두께: <span class="stroke-width-value">'+A+"px</span></label>",d+='<input type="range" class="stroke-width-slider" min="1" max="10" value="'+A+'"></div>',d+='<div class="style-section"><label>선 스타일:</label><div class="stroke-style-options">',d+='<button class="stroke-btn'+(l==="solid"?" active":"")+'" data-stroke="solid" title="실선">━━━</button>',d+='<button class="stroke-btn'+(l==="dashed"?" active":"")+'" data-stroke="dashed" title="파선">┅┅┅</button>',d+='<button class="stroke-btn'+(l==="dotted"?" active":"")+'" data-stroke="dotted" title="점선">┈┈┈</button>',d+='<button class="stroke-btn'+(l==="dash-dot"?" active":"")+'" data-stroke="dash-dot" title="일점쇄선">━┅━</button>',d+="</div></div>"}else{const I=i.map(function(B){return'<div class="color-item'+(B===t.color?" active":"")+'" data-color="'+B+'" style="background-color: '+B+'"></div>'}).join("");d+='<div class="style-section"><label>색상:</label><div class="color-picker-grid">'+I+"</div>",d+='<div class="color-picker-custom"><input type="color" value="'+t.color+'" class="color-input"></div></div>',d+='<div class="style-section"><label>투명도: <span class="fill-opacity-value">'+Math.round(u*100)+"%</span></label>",d+='<input type="range" class="opacity-slider fill-opacity-slider" min="0" max="100" value="'+Math.round(u*100)+'"></div>'}a.innerHTML=d,document.body.appendChild(a);const p=this.container.querySelector('[data-layer-id="'+e+'"]');if(p){const I=p.getBoundingClientRect(),B=a.getBoundingClientRect(),T=window.innerHeight,M=window.innerWidth;a.style.position="fixed",a.style.left=I.right+10+"px",a.style.top=I.top+"px",I.top+B.height>T-10&&(a.style.top=Math.max(10,T-B.height-10)+"px"),I.right+10+B.width>M&&(a.style.left=I.left-B.width-10+"px")}a.addEventListener("click",function(I){var B=I.target.closest(".color-item[data-color]");if(B){a.querySelectorAll(".color-item[data-color]").forEach(function(G){G.classList.remove("active")}),B.classList.add("active"),pt.setLayerColor(e,B.dataset.color);var T=a.querySelector(".color-input");T&&(T.value=B.dataset.color)}var M=I.target.closest(".color-item[data-fill-color]");if(M){a.querySelectorAll(".color-item[data-fill-color]").forEach(function(G){G.classList.remove("active")}),M.classList.add("active"),pt.setLayerFillColor(e,M.dataset.fillColor);var F=a.querySelector(".fill-color-input");F&&(F.value=M.dataset.fillColor)}var N=I.target.closest(".color-item[data-stroke-color]");if(N){a.querySelectorAll(".color-item[data-stroke-color]").forEach(function(G){G.classList.remove("active")}),N.classList.add("active"),pt.setLayerStrokeColor(e,N.dataset.strokeColor);var O=a.querySelector(".stroke-color-input");O&&(O.value=N.dataset.strokeColor)}var L=I.target.closest(".stroke-btn");L&&(a.querySelectorAll(".stroke-btn").forEach(function(G){G.classList.remove("active")}),L.classList.add("active"),pt.setLayerStrokeDash(e,L.dataset.stroke))});var y=a.querySelector(".color-input");y&&y.addEventListener("input",function(I){a.querySelectorAll(".color-item[data-color]").forEach(function(B){B.classList.remove("active")}),pt.setLayerColor(e,I.target.value)});var v=a.querySelector(".fill-color-input");v&&v.addEventListener("input",function(I){a.querySelectorAll(".color-item[data-fill-color]").forEach(function(B){B.classList.remove("active")}),pt.setLayerFillColor(e,I.target.value)});var w=a.querySelector(".stroke-color-input");w&&w.addEventListener("input",function(I){a.querySelectorAll(".color-item[data-stroke-color]").forEach(function(B){B.classList.remove("active")}),pt.setLayerStrokeColor(e,I.target.value)});var x=a.querySelector(".fill-opacity-slider");x&&x.addEventListener("input",function(I){var B=parseInt(I.target.value)/100,T=a.querySelector(".fill-opacity-value");T&&(T.textContent=I.target.value+"%"),pt.setLayerFillOpacity(e,B)});var b=a.querySelector(".stroke-opacity-slider");b&&b.addEventListener("input",function(I){var B=parseInt(I.target.value)/100,T=a.querySelector(".stroke-opacity-value");T&&(T.textContent=I.target.value+"%"),pt.setLayerStrokeOpacity(e,B)});var C=a.querySelector(".stroke-width-slider");C&&C.addEventListener("input",function(I){var B=parseInt(I.target.value),T=a.querySelector(".stroke-width-value");T&&(T.textContent=B+"px"),pt.setLayerStrokeWidth(e,B)});var S=Date.now();setTimeout(function(){var I=function(B){if(!document.body.contains(a)){document.removeEventListener("click",I);return}Date.now()-S<300||a.contains(B.target)||(a.remove(),document.removeEventListener("click",I))};document.addEventListener("click",I)},50)}handleDragStart(e){const t=e.target.closest(".layer-item");t&&(this.draggedItem=t,t.classList.add("dragging"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t.dataset.layerId))}handleDragOver(e){e.preventDefault(),e.dataTransfer.dropEffect="move";const t=e.target.closest(".layer-item");if(!t||t===this.draggedItem)return;const n=t.getBoundingClientRect(),i=n.top+n.height/2;this.container.querySelectorAll(".layer-item").forEach(a=>{a.classList.remove("drop-above","drop-below")}),e.clientY<i?t.classList.add("drop-above"):t.classList.add("drop-below")}handleDrop(e){e.preventDefault();const t=e.target.closest(".layer-item");if(!t||!this.draggedItem)return;const n=this.draggedItem.dataset.layerId,i=t.dataset.layerId;if(n===i)return;const s=pt.getAllLayers().map(c=>c.id).reverse().filter(c=>c!==n),o=s.indexOf(i),l=t.getBoundingClientRect(),u=l.top+l.height/2;e.clientY<u?s.splice(o,0,n):s.splice(o+1,0,n),pt.reorderLayers(s.slice().reverse())}handleDragEnd(e){this.draggedItem&&(this.draggedItem.classList.remove("dragging"),this.draggedItem=null),this.container.querySelectorAll(".layer-item").forEach(t=>{t.classList.remove("drop-above","drop-below")})}}class M4{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=yi,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let n=t.dataProjection?Ci(t.dataProjection):this.readProjection(e);t.extent&&n&&n.getUnits()==="tile-pixels"&&(n=Ci(n),n.setWorldExtent(t.extent)),t={dataProjection:n,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Vr()}readFeature(e,t){return Vr()}readFeatures(e,t){return Vr()}readGeometry(e,t){return Vr()}readProjection(e){return Vr()}writeFeature(e,t){return Vr()}writeFeatures(e,t){return Vr()}writeGeometry(e,t){return Vr()}}function ql(r,e,t){const n=t?Ci(t.featureProjection):null,i=t?Ci(t.dataProjection):null;let a=r;if(n&&i&&!Hh(n,i)){e&&(a=r.clone());const s=e?n:i,o=e?i:n;s.getUnits()==="tile-pixels"?a.transform(s,o):a.applyTransform(Yg(s,o))}if(e&&t&&t.decimals!==void 0){const s=Math.pow(10,t.decimals),o=function(l){for(let u=0,c=l.length;u<c;++u)l[u]=Math.round(l[u]*s)/s;return l};a===r&&(a=r.clone()),a.applyTransform(o)}return a}const uW={Point:ja,LineString:vl,Polygon:zl,MultiPoint:UA,MultiLineString:lc,MultiPolygon:af};function cW(r,e,t){return Array.isArray(e[0])?(SR(r,0,e,t)||(r=r.slice(),$C(r,0,e,t)),r):(A4(r,0,e,t)||(r=r.slice(),Nx(r,0,e,t)),r)}function EO(r,e){var a;const t=r.geometry;if(!t)return[];if(Array.isArray(t))return t.map(s=>EO({...r,geometry:s})).flat();const n=t.type==="MultiPolygon"?"Polygon":t.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);const i=t.layout.length;return ql(new hl(n,n==="Polygon"?cW(t.flatCoordinates,t.ends,i):t.flatCoordinates,(a=t.ends)==null?void 0:a.flat(),i,r.properties||{},r.id).enableSimplifyTransformed(),!1,e)}function L4(r,e){if(!r)return null;if(Array.isArray(r)){const n=r.map(i=>L4(i,e));return new Gs(n)}const t=uW[r.type];return ql(new t(r.flatCoordinates,r.layout,r.ends),!1,e)}class hW extends M4{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Ty(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Ty(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Vr()}readFeaturesFromObject(e,t){return Vr()}readGeometry(e,t){return this.readGeometryFromObject(Ty(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Vr()}readProjection(e){return this.readProjectionFromObject(Ty(e))}readProjectionFromObject(e){return Vr()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Vr()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Vr()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Vr()}}function Ty(r){if(typeof r=="string"){const e=JSON.parse(r);return e||null}return r!==null?r:null}class rs extends hW{constructor(e){e=e||{},super(),this.dataProjection=Ci(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Ci(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let n=null;e.type==="Feature"?n=e:n={type:"Feature",geometry:e,properties:null};const i=D4(n.geometry);if(this.featureClass===hl)return EO({geometry:i,id:n.id,properties:n.properties},t);const a=new yi;return this.geometryName_?a.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&a.setGeometryName(n.geometry_name),a.setGeometry(L4(i,t)),"id"in n&&a.setId(n.id),n.properties&&a.setProperties(n.properties,!0),a}readFeaturesFromObject(e,t){const n=e;let i=null;if(n.type==="FeatureCollection"){const a=e;i=[];const s=a.features;for(let o=0,l=s.length;o<l;++o){const u=this.readFeatureFromObject(s[o],t);u&&i.push(u)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return fW(e,t)}readProjectionFromObject(e){const t=e.crs;let n;if(t)if(t.type=="name")n=Ci(t.properties.name);else if(t.type==="EPSG")n=Ci("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else n=this.dataProjection;return n}writeFeatureObject(e,t){t=this.adaptOptions(t);const n={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(n.id=i),!e.hasProperties())return n;const a=e.getProperties(),s=e.getGeometry();return s&&(n.geometry=aS(s,t),delete a[e.getGeometryName()]),kd(a)||(n.properties=a),n}writeFeaturesObject(e,t){t=this.adaptOptions(t);const n=[];for(let i=0,a=e.length;i<a;++i)n.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:n}}writeGeometryObject(e,t){return aS(e,this.adaptOptions(t))}}function D4(r,e){if(!r)return null;let t;switch(r.type){case"Point":{t=dW(r);break}case"LineString":{t=gW(r);break}case"Polygon":{t=yW(r);break}case"MultiPoint":{t=mW(r);break}case"MultiLineString":{t=pW(r);break}case"MultiPolygon":{t=vW(r);break}case"GeometryCollection":{t=AW(r);break}default:throw new Error("Unsupported GeoJSON type: "+r.type)}return t}function fW(r,e){const t=D4(r);return L4(t,e)}function AW(r,e){return r.geometries.map(function(n){return D4(n)})}function dW(r){const e=r.coordinates;return{type:"Point",flatCoordinates:e,layout:e0(e.length)}}function gW(r){var n;const e=r.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:e0(((n=e[0])==null?void 0:n.length)||2)}}function pW(r){var a,s;const e=r.coordinates,t=((s=(a=e[0])==null?void 0:a[0])==null?void 0:s.length)||2,n=[],i=m1(n,0,e,t);return{type:"MultiLineString",flatCoordinates:n,ends:i,layout:e0(t)}}function mW(r){var t;const e=r.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:e0(((t=e[0])==null?void 0:t.length)||2)}}function vW(r){var a,s;const e=r.coordinates,t=[],n=((s=(a=e[0])==null?void 0:a[0])==null?void 0:s[0].length)||2,i=mR(t,0,e,n);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:e0(n)}}function yW(r){var a,s;const e=r.coordinates,t=[],n=(s=(a=e[0])==null?void 0:a[0])==null?void 0:s.length,i=m1(t,0,e,n);return{type:"Polygon",flatCoordinates:t,ends:i,layout:e0(n)}}function aS(r,e){r=ql(r,!0,e);const t=r.getType();let n;switch(t){case"Point":{n=CW(r);break}case"LineString":{n=wW(r);break}case"Polygon":{n=SW(r,e);break}case"MultiPoint":{n=EW(r);break}case"MultiLineString":{n=_W(r);break}case"MultiPolygon":{n=bW(r,e);break}case"GeometryCollection":{n=xW(r,e);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return n}function xW(r,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:r.getGeometriesArray().map(function(n){return aS(n,e)})}}function wW(r,e){return{type:"LineString",coordinates:r.getCoordinates()}}function _W(r,e){return{type:"MultiLineString",coordinates:r.getCoordinates()}}function EW(r,e){return{type:"MultiPoint",coordinates:r.getCoordinates()}}function bW(r,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(t)}}function CW(r,e){return{type:"Point",coordinates:r.getCoordinates()}}function SW(r,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(t)}}class BW{constructor(){this.format=new rs}async loadFromFile(e){return new Promise((t,n)=>{const i=new FileReader;i.onload=a=>{try{const s=a.target.result,o=this.loadFromString(s,e.name);t(o)}catch(s){n(new Error("GeoJSON 파싱 실패: "+s.message))}},i.onerror=()=>{n(new Error("파일 읽기 실패"))},i.readAsText(e)})}loadFromString(e,t="새 레이어"){const n=typeof e=="string"?JSON.parse(e):e,i=this.format.readFeatures(n,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});if(i.length===0)throw new Error("GeoJSON에 피처가 없습니다.");const a=t.replace(/\.(geojson|json)$/i,"");return pt.addLayer({name:a,type:"vector",features:i})}async loadFromUrl(e,t="새 레이어"){const n=await fetch(e);if(!n.ok)throw new Error("GeoJSON 로드 실패: "+n.statusText);const i=await n.text();return this.loadFromString(i,t)}}const bO=new BW,TW="modulepreload",NW=function(r){return"/e-gis/"+r},yN={},jl=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=NW(l),l in yN)return;yN[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":TW,u||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((f,A)=>{h.addEventListener("load",f),h.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function IW(r){r("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),r("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),r("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)r("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),r("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");r("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),r("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),r.WGS84=r["EPSG:4326"],r["EPSG:3785"]=r["EPSG:3857"],r.GOOGLE=r["EPSG:3857"],r["EPSG:900913"]=r["EPSG:3857"],r["EPSG:102113"]=r["EPSG:3857"]}var Ud=1,Qd=2,Tg=3,FW=4,sS=5,xN=6378137,MW=6356752314e-3,wN=.0066943799901413165,tv=484813681109536e-20,jt=Math.PI/2,LW=.16666666666666666,DW=.04722222222222222,kW=.022156084656084655,er=1e-10,Aa=.017453292519943295,ml=57.29577951308232,di=Math.PI/4,Pv=Math.PI*2,Ca=3.14159265359,El={};El.greenwich=0;El.lisbon=-9.131906111111;El.paris=2.337229166667;El.bogota=-74.080916666667;El.madrid=-3.687938888889;El.rome=12.452333333333;El.bern=7.439583333333;El.jakarta=106.807719444444;El.ferro=-17.666666666667;El.brussels=4.367975;El.stockholm=18.058277777778;El.athens=23.7163375;El.oslo=10.722916666667;const RW={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var _N=/[\s_\-\/\(\)]/g;function BA(r,e){if(r[e])return r[e];for(var t=Object.keys(r),n=e.toLowerCase().replace(_N,""),i=-1,a,s;++i<t.length;)if(a=t[i],s=a.toLowerCase().replace(_N,""),s===n)return r[a]}function oS(r){var e={},t=r.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,l){var u=l.split("=");return u.push(!0),o[u[0].toLowerCase()]=u[1],o},{}),n,i,a,s={proj:"projName",datum:"datumCode",rf:function(o){e.rf=parseFloat(o)},lat_0:function(o){e.lat0=o*Aa},lat_1:function(o){e.lat1=o*Aa},lat_2:function(o){e.lat2=o*Aa},lat_ts:function(o){e.lat_ts=o*Aa},lon_0:function(o){e.long0=o*Aa},lon_1:function(o){e.long1=o*Aa},lon_2:function(o){e.long2=o*Aa},alpha:function(o){e.alpha=parseFloat(o)*Aa},gamma:function(o){e.rectified_grid_angle=parseFloat(o)*Aa},lonc:function(o){e.longc=o*Aa},x_0:function(o){e.x0=parseFloat(o)},y_0:function(o){e.y0=parseFloat(o)},k_0:function(o){e.k0=parseFloat(o)},k:function(o){e.k0=parseFloat(o)},a:function(o){e.a=parseFloat(o)},b:function(o){e.b=parseFloat(o)},r:function(o){e.a=e.b=parseFloat(o)},r_a:function(){e.R_A=!0},zone:function(o){e.zone=parseInt(o,10)},south:function(){e.utmSouth=!0},towgs84:function(o){e.datum_params=o.split(",").map(function(l){return parseFloat(l)})},to_meter:function(o){e.to_meter=parseFloat(o)},units:function(o){e.units=o;var l=BA(RW,o);l&&(e.to_meter=l.to_meter)},from_greenwich:function(o){e.from_greenwich=o*Aa},pm:function(o){var l=BA(El,o);e.from_greenwich=(l||parseFloat(o))*Aa},nadgrids:function(o){o==="@null"?e.datumCode="none":e.nadgrids=o},axis:function(o){var l="ewnsud";o.length===3&&l.indexOf(o.substr(0,1))!==-1&&l.indexOf(o.substr(1,1))!==-1&&l.indexOf(o.substr(2,1))!==-1&&(e.axis=o)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(n in t)i=t[n],n in s?(a=s[n],typeof a=="function"?a(i):e[a]=i):e[n]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=r,e}class CO{static getId(e){const t=e.find(n=>Array.isArray(n)&&n[0]==="ID");return t&&t.length>=3?{authority:t[1],code:parseInt(t[2],10)}:null}static convertUnit(e,t="unit"){if(!e||e.length<3)return{type:t,name:"unknown",conversion_factor:null};const n=e[1],i=parseFloat(e[2])||null,a=e.find(o=>Array.isArray(o)&&o[0]==="ID"),s=a?{authority:a[1],code:parseInt(a[2],10)}:null;return{type:t,name:n,conversion_factor:i,id:s}}static convertAxis(e){const t=e[1]||"Unknown";let n;const i=t.match(/^\((.)\)$/);if(i){const u=i[1].toUpperCase();if(u==="E")n="east";else if(u==="N")n="north";else if(u==="U")n="up";else throw new Error(`Unknown axis abbreviation: ${u}`)}else n=e[2]?e[2].toLowerCase():"unknown";const a=e.find(u=>Array.isArray(u)&&u[0]==="ORDER"),s=a?parseInt(a[1],10):null,o=e.find(u=>Array.isArray(u)&&(u[0]==="LENGTHUNIT"||u[0]==="ANGLEUNIT"||u[0]==="SCALEUNIT")),l=this.convertUnit(o);return{name:t,direction:n,unit:l,order:s}}static extractAxes(e){return e.filter(t=>Array.isArray(t)&&t[0]==="AXIS").map(t=>this.convertAxis(t)).sort((t,n)=>(t.order||0)-(n.order||0))}static convert(e,t={}){switch(e[0]){case"PROJCRS":t.type="ProjectedCRS",t.name=e[1],t.base_crs=e.find(f=>Array.isArray(f)&&f[0]==="BASEGEOGCRS")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="BASEGEOGCRS")):null,t.conversion=e.find(f=>Array.isArray(f)&&f[0]==="CONVERSION")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="CONVERSION")):null;const n=e.find(f=>Array.isArray(f)&&f[0]==="CS");n&&(t.coordinate_system={type:n[1],axis:this.extractAxes(e)});const i=e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT");if(i){const f=this.convertUnit(i);t.coordinate_system.unit=f}t.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":t.type="GeographicCRS",t.name=e[1];const a=e.find(f=>Array.isArray(f)&&(f[0]==="DATUM"||f[0]==="ENSEMBLE"));if(a){const f=this.convert(a);a[0]==="ENSEMBLE"?t.datum_ensemble=f:t.datum=f;const A=e.find(d=>Array.isArray(d)&&d[0]==="PRIMEM");A&&A[1]!=="Greenwich"&&(f.prime_meridian={name:A[1],longitude:parseFloat(A[2])})}t.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},t.id=this.getId(e);break;case"DATUM":t.type="GeodeticReferenceFrame",t.name=e[1],t.ellipsoid=e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":t.type="DatumEnsemble",t.name=e[1],t.members=e.filter(f=>Array.isArray(f)&&f[0]==="MEMBER").map(f=>({type:"DatumEnsembleMember",name:f[1],id:this.getId(f)}));const s=e.find(f=>Array.isArray(f)&&f[0]==="ENSEMBLEACCURACY");s&&(t.accuracy=parseFloat(s[1]));const o=e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID");o&&(t.ellipsoid=this.convert(o)),t.id=this.getId(e);break;case"ELLIPSOID":t.type="Ellipsoid",t.name=e[1],t.semi_major_axis=parseFloat(e[2]),t.inverse_flattening=parseFloat(e[3]),e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT")&&this.convert(e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT"),t);break;case"CONVERSION":t.type="Conversion",t.name=e[1],t.method=e.find(f=>Array.isArray(f)&&f[0]==="METHOD")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="METHOD")):null,t.parameters=e.filter(f=>Array.isArray(f)&&f[0]==="PARAMETER").map(f=>this.convert(f));break;case"METHOD":t.type="Method",t.name=e[1],t.id=this.getId(e);break;case"PARAMETER":t.type="Parameter",t.name=e[1],t.value=parseFloat(e[2]),t.unit=this.convertUnit(e.find(f=>Array.isArray(f)&&(f[0]==="LENGTHUNIT"||f[0]==="ANGLEUNIT"||f[0]==="SCALEUNIT"))),t.id=this.getId(e);break;case"BOUNDCRS":t.type="BoundCRS";const l=e.find(f=>Array.isArray(f)&&f[0]==="SOURCECRS");if(l){const f=l.find(A=>Array.isArray(A));t.source_crs=f?this.convert(f):null}const u=e.find(f=>Array.isArray(f)&&f[0]==="TARGETCRS");if(u){const f=u.find(A=>Array.isArray(A));t.target_crs=f?this.convert(f):null}const c=e.find(f=>Array.isArray(f)&&f[0]==="ABRIDGEDTRANSFORMATION");c?t.transformation=this.convert(c):t.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(t.type="Transformation",t.name=e[1],t.method=e.find(f=>Array.isArray(f)&&f[0]==="METHOD")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="METHOD")):null,t.parameters=e.filter(f=>Array.isArray(f)&&(f[0]==="PARAMETER"||f[0]==="PARAMETERFILE")).map(f=>{if(f[0]==="PARAMETER")return this.convert(f);if(f[0]==="PARAMETERFILE")return{name:f[1],value:f[2],id:{authority:"EPSG",code:8656}}}),t.parameters.length===7){const f=t.parameters[6];f.name==="Scale difference"&&(f.value=Math.round((f.value-1)*1e12)/1e6)}t.id=this.getId(e);break;case"AXIS":t.coordinate_system||(t.coordinate_system={type:"unspecified",axis:[]}),t.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const h=this.convertUnit(e,"LinearUnit");t.coordinate_system&&t.coordinate_system.axis&&t.coordinate_system.axis.forEach(f=>{f.unit||(f.unit=h)}),h.conversion_factor&&h.conversion_factor!==1&&t.semi_major_axis&&(t.semi_major_axis={value:t.semi_major_axis,unit:h});break;default:t.keyword=e[0];break}return t}}class OW extends CO{static convert(e,t={}){return super.convert(e,t),t.coordinate_system&&t.coordinate_system.subtype==="Cartesian"&&delete t.coordinate_system,t.usage&&delete t.usage,t}}class PW extends CO{static convert(e,t={}){super.convert(e,t);const n=e.find(a=>Array.isArray(a)&&a[0]==="CS");n&&(t.coordinate_system={subtype:n[1],axis:this.extractAxes(e)});const i=e.find(a=>Array.isArray(a)&&a[0]==="USAGE");if(i){const a=i.find(l=>Array.isArray(l)&&l[0]==="SCOPE"),s=i.find(l=>Array.isArray(l)&&l[0]==="AREA"),o=i.find(l=>Array.isArray(l)&&l[0]==="BBOX");t.usage={},a&&(t.usage.scope=a[1]),s&&(t.usage.area=s[1]),o&&(t.usage.bbox=o.slice(1))}return t}}function UW(r){return r.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(r.find(e=>Array.isArray(e)&&e[0]==="CS")||r[0]==="BOUNDCRS"||r[0]==="PROJCRS"||r[0]==="GEOGCRS","2015")}function QW(r){return(UW(r)==="2019"?PW:OW).convert(r)}function GW(r){const e=r.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var Uv=1,SO=2,BO=3,Qx=4,TO=5,k4=-1,HW=/\s/,zW=/[A-Za-z]/,qW=/[A-Za-z84_]/,w_=/[,\]]/,NO=/[\d\.E\-\+]/;function ff(r){if(typeof r!="string")throw new Error("not a string");this.text=r.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Uv}ff.prototype.readCharicter=function(){var r=this.text[this.place++];if(this.state!==Qx)for(;HW.test(r);){if(this.place>=this.text.length)return;r=this.text[this.place++]}switch(this.state){case Uv:return this.neutral(r);case SO:return this.keyword(r);case Qx:return this.quoted(r);case TO:return this.afterquote(r);case BO:return this.number(r);case k4:return}};ff.prototype.afterquote=function(r){if(r==='"'){this.word+='"',this.state=Qx;return}if(w_.test(r)){this.word=this.word.trim(),this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in afterquote yet, index '+this.place)};ff.prototype.afterItem=function(r){if(r===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Uv;return}if(r==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Uv,this.currentObject=this.stack.pop(),this.currentObject||(this.state=k4);return}};ff.prototype.number=function(r){if(NO.test(r)){this.word+=r;return}if(w_.test(r)){this.word=parseFloat(this.word),this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in number yet, index '+this.place)};ff.prototype.quoted=function(r){if(r==='"'){this.state=TO;return}this.word+=r};ff.prototype.keyword=function(r){if(qW.test(r)){this.word+=r;return}if(r==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Uv;return}if(w_.test(r)){this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in keyword yet, index '+this.place)};ff.prototype.neutral=function(r){if(zW.test(r)){this.word=r,this.state=SO;return}if(r==='"'){this.word="",this.state=Qx;return}if(NO.test(r)){this.word=r,this.state=BO;return}if(w_.test(r)){this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in neutral yet, index '+this.place)};ff.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===k4)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function jW(r){var e=new ff(r);return e.output()}function sb(r,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var n=e?{}:r,i=t.reduce(function(a,s){return Ag(s,a),a},n);e&&(r[e]=i)}function Ag(r,e){if(!Array.isArray(r)){e[r]=!0;return}var t=r.shift();if(t==="PARAMETER"&&(t=r.shift()),r.length===1){if(Array.isArray(r[0])){e[t]={},Ag(r[0],e[t]);return}e[t]=r[0];return}if(!r.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=r;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(r);return}Array.isArray(t)||(e[t]={});var n;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:r[0].toLowerCase(),convert:r[1]},r.length===3&&Ag(r[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:r[0],a:r[1],rf:r[2]},r.length===4&&Ag(r[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":r[0]=["name",r[0]],sb(e,t,r);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":r[0]=["name",r[0]],sb(e,t,r),e[t].type=t;return;default:for(n=-1;++n<r.length;)if(!Array.isArray(r[n]))return Ag(r,e[t]);return sb(e,t,r)}}var $W=.017453292519943295;function Ku(r){return r*$W}function IO(r){const e=(r.projName||"").toLowerCase().replace(/_/g," ");!r.long0&&r.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(r.long0=r.longc),!r.lat_ts&&r.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(r.lat0=Ku(r.lat1>0?90:-90),r.lat_ts=r.lat1,delete r.lat1):!r.lat_ts&&r.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(r.lat_ts=r.lat0,r.lat0=Ku(r.lat0>0?90:-90),delete r.lat1)}function EN(r){let e={units:null,to_meter:void 0};return typeof r=="string"?(e.units=r.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):r&&r.name&&(e.units=r.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=r.conversion_factor),e}function bN(r){return typeof r=="object"?r.value*r.unit.conversion_factor:r}function CN(r,e){r.ellipsoid.radius?(e.a=r.ellipsoid.radius,e.rf=0):(e.a=bN(r.ellipsoid.semi_major_axis),r.ellipsoid.inverse_flattening!==void 0?e.rf=r.ellipsoid.inverse_flattening:r.ellipsoid.semi_major_axis!==void 0&&r.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-bN(r.ellipsoid.semi_minor_axis))))}function Gx(r,e={}){return!r||typeof r!="object"?r:r.type==="BoundCRS"?(Gx(r.source_crs,e),r.transformation&&(r.transformation.method&&r.transformation.method.name==="NTv2"?e.nadgrids=r.transformation.parameters[0].value:e.datum_params=r.transformation.parameters.map(t=>t.value)),e):(Object.keys(r).forEach(t=>{const n=r[t];if(n!==null)switch(t){case"name":if(e.srsCode)break;e.name=n,e.srsCode=n;break;case"type":n==="GeographicCRS"?e.projName="longlat":n==="ProjectedCRS"&&r.conversion&&r.conversion.method&&(e.projName=r.conversion.method.name);break;case"datum":case"datum_ensemble":n.ellipsoid&&(e.ellps=n.ellipsoid.name,CN(n,e)),n.prime_meridian&&(e.from_greenwich=n.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=n.name,CN(n,e);break;case"prime_meridian":e.long0=(n.longitude||0)*Math.PI/180;break;case"coordinate_system":if(n.axis){if(e.axis=n.axis.map(i=>{const a=i.direction;if(a==="east")return"e";if(a==="north")return"n";if(a==="west")return"w";if(a==="south")return"s";throw new Error(`Unknown axis direction: ${a}`)}).join("")+"u",n.unit){const{units:i,to_meter:a}=EN(n.unit);e.units=i,e.to_meter=a}else if(n.axis[0]&&n.axis[0].unit){const{units:i,to_meter:a}=EN(n.axis[0].unit);e.units=i,e.to_meter=a}}break;case"id":n.authority&&n.code&&(e.title=n.authority+":"+n.code);break;case"conversion":n.method&&n.method.name&&(e.projName=n.method.name),n.parameters&&n.parameters.forEach(i=>{const a=i.name.toLowerCase().replace(/\s+/g,"_"),s=i.value;i.unit&&i.unit.conversion_factor?e[a]=s*i.unit.conversion_factor:i.unit==="degree"?e[a]=s*Math.PI/180:e[a]=s});break;case"unit":n.name&&(e.units=n.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),n.conversion_factor&&(e.to_meter=n.conversion_factor);break;case"base_crs":Gx(n,e),e.datumCode=n.id?n.id.authority+"_"+n.id.code:n.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),IO(e),e)}var KW=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function VW(r,e){var t=e[0],n=e[1];!(t in r)&&n in r&&(r[t]=r[n],e.length===3&&(r[t]=e[2](r[t])))}function FO(r){for(var e=Object.keys(r),t=0,n=e.length;t<n;++t){var i=e[t];KW.indexOf(i)!==-1&&WW(r[i]),typeof r[i]=="object"&&FO(r[i])}}function WW(r){if(r.AUTHORITY){var e=Object.keys(r.AUTHORITY)[0];e&&e in r.AUTHORITY&&(r.title=e+":"+r.AUTHORITY[e])}if(r.type==="GEOGCS"?r.projName="longlat":r.type==="LOCAL_CS"?(r.projName="identity",r.local=!0):typeof r.PROJECTION=="object"?r.projName=Object.keys(r.PROJECTION)[0]:r.projName=r.PROJECTION,r.AXIS){for(var t="",n=0,i=r.AXIS.length;n<i;++n){var a=[r.AXIS[n][0].toLowerCase(),r.AXIS[n][1].toLowerCase()];a[0].indexOf("north")!==-1||(a[0]==="y"||a[0]==="lat")&&a[1]==="north"?t+="n":a[0].indexOf("south")!==-1||(a[0]==="y"||a[0]==="lat")&&a[1]==="south"?t+="s":a[0].indexOf("east")!==-1||(a[0]==="x"||a[0]==="lon")&&a[1]==="east"?t+="e":(a[0].indexOf("west")!==-1||(a[0]==="x"||a[0]==="lon")&&a[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(r.axis=t)}r.UNIT&&(r.units=r.UNIT.name.toLowerCase(),r.units==="metre"&&(r.units="meter"),r.UNIT.convert&&(r.type==="GEOGCS"?r.DATUM&&r.DATUM.SPHEROID&&(r.to_meter=r.UNIT.convert*r.DATUM.SPHEROID.a):r.to_meter=r.UNIT.convert));var s=r.GEOGCS;r.type==="GEOGCS"&&(s=r),s&&(s.DATUM?r.datumCode=s.DATUM.name.toLowerCase():r.datumCode=s.name.toLowerCase(),r.datumCode.slice(0,2)==="d_"&&(r.datumCode=r.datumCode.slice(2)),r.datumCode==="new_zealand_1949"&&(r.datumCode="nzgd49"),(r.datumCode==="wgs_1984"||r.datumCode==="world_geodetic_system_1984")&&(r.PROJECTION==="Mercator_Auxiliary_Sphere"&&(r.sphere=!0),r.datumCode="wgs84"),r.datumCode==="belge_1972"&&(r.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(r.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),r.ellps.toLowerCase().slice(0,13)==="international"&&(r.ellps="intl"),r.a=s.DATUM.SPHEROID.a,r.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(r.datum_params=s.DATUM.TOWGS84),~r.datumCode.indexOf("osgb_1936")&&(r.datumCode="osgb36"),~r.datumCode.indexOf("osni_1952")&&(r.datumCode="osni52"),(~r.datumCode.indexOf("tm65")||~r.datumCode.indexOf("geodetic_datum_of_1965"))&&(r.datumCode="ire65"),r.datumCode==="ch1903+"&&(r.datumCode="ch1903"),~r.datumCode.indexOf("israel")&&(r.datumCode="isr93")),r.b&&!isFinite(r.b)&&(r.b=r.a),r.rectified_grid_angle&&(r.rectified_grid_angle=Ku(r.rectified_grid_angle));function o(c){var h=r.to_meter||1;return c*h}var l=function(c){return VW(r,c)},u=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Ku],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Ku],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Ku],["lat0","latitude_of_origin",Ku],["lat0","standard_parallel_1",Ku],["lat1","standard_parallel_1",Ku],["lat2","standard_parallel_2",Ku],["azimuth","Azimuth"],["alpha","azimuth",Ku],["srsCode","name"]];u.forEach(l),IO(r)}function Hx(r){if(typeof r=="object")return Gx(r);const e=GW(r);var t=jW(r);if(e==="WKT2"){const a=QW(t);return Gx(a)}var n=t[0],i={};return Ag(t,i),FO(i),i[n]}function Ds(r){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?Ds[r]=oS(arguments[1]):Ds[r]=Hx(arguments[1]):t&&typeof t=="object"&&!("projName"in t)?Ds[r]=Hx(arguments[1]):(Ds[r]=t,t||delete Ds[r])}else if(arguments.length===1){if(Array.isArray(r))return r.map(function(n){return Array.isArray(n)?Ds.apply(e,n):Ds(n)});if(typeof r=="string"){if(r in Ds)return Ds[r]}else"EPSG"in r?Ds["EPSG:"+r.EPSG]=r:"ESRI"in r?Ds["ESRI:"+r.ESRI]=r:"IAU2000"in r?Ds["IAU2000:"+r.IAU2000]=r:console.log(r);return}}IW(Ds);function YW(r){return typeof r=="string"}function XW(r){return r in Ds}function ZW(r){return r.indexOf("+")!==0&&r.indexOf("[")!==-1||typeof r=="object"&&!("srsCode"in r)}var JW=["3857","900913","3785","102113"];function eY(r){var e=BA(r,"authority");if(e){var t=BA(e,"epsg");return t&&JW.indexOf(t)>-1}}function tY(r){var e=BA(r,"extension");if(e)return BA(e,"proj4")}function rY(r){return r[0]==="+"}function nY(r){if(YW(r)){if(XW(r))return Ds[r];if(ZW(r)){var e=Hx(r);if(eY(e))return Ds["EPSG:3857"];var t=tY(e);return t?oS(t):e}if(rY(r))return oS(r)}else return"projName"in r?r:Hx(r)}function SN(r,e){r=r||{};var t,n;if(!e)return r;for(n in e)t=e[n],t!==void 0&&(r[n]=t);return r}function nh(r,e,t){var n=r*e;return t/Math.sqrt(1-n*n)}function _1(r){return r<0?-1:1}function or(r,e){return e||Math.abs(r)<=Ca?r:r-_1(r)*Pv}function nc(r,e,t){var n=r*t,i=.5*r;return n=Math.pow((1-n)/(1+n),i),Math.tan(.5*(jt-e))/n}function Qv(r,e){for(var t=.5*r,n,i,a=jt-2*Math.atan(e),s=0;s<=15;s++)if(n=r*Math.sin(a),i=jt-2*Math.atan(e*Math.pow((1-n)/(1+n),t))-a,a+=i,Math.abs(i)<=1e-10)return a;return-9999}function iY(){var r=this.b/this.a;this.es=1-r*r,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=nh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function aY(r){var e=r.x,t=r.y;if(t*ml>90&&t*ml<-90&&e*ml>180&&e*ml<-180)return null;var n,i;if(Math.abs(Math.abs(t)-jt)<=er)return null;if(this.sphere)n=this.x0+this.a*this.k0*or(e-this.long0,this.over),i=this.y0+this.a*this.k0*Math.log(Math.tan(di+.5*t));else{var a=Math.sin(t),s=nc(this.e,t,a);n=this.x0+this.a*this.k0*or(e-this.long0,this.over),i=this.y0-this.a*this.k0*Math.log(s)}return r.x=n,r.y=i,r}function sY(r){var e=r.x-this.x0,t=r.y-this.y0,n,i;if(this.sphere)i=jt-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var a=Math.exp(-t/(this.a*this.k0));if(i=Qv(this.e,a),i===-9999)return null}return n=or(this.long0+e/(this.a*this.k0),this.over),r.x=n,r.y=i,r}var oY=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const lY={init:iY,forward:aY,inverse:sY,names:oY};function uY(){}function BN(r){return r}var MO=["longlat","identity"];const cY={init:uY,forward:BN,inverse:BN,names:MO};var hY=[lY,cY],dd={},dg=[];function LO(r,e){var t=dg.length;return r.names?(dg[t]=r,r.names.forEach(function(n){dd[n.toLowerCase()]=t}),this):(console.log(e),!0)}function DO(r){return r.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function fY(r){if(!r)return!1;var e=r.toLowerCase();if(typeof dd[e]<"u"&&dg[dd[e]]||(e=DO(e),e in dd&&dg[dd[e]]))return dg[dd[e]]}function AY(){hY.forEach(LO)}const dY={start:AY,add:LO,get:fY};var kO={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const gY=kO.WGS84;function pY(r,e,t,n){var i=r*r,a=e*e,s=(i-a)/i,o=0;n?(r*=1-s*(LW+s*(DW+s*kW)),i=r*r,s=0):o=Math.sqrt(s);var l=(i-a)/a;return{es:s,e:o,ep2:l}}function mY(r,e,t,n,i){if(!r){var a=BA(kO,n);a||(a=gY),r=a.a,e=a.b,t=a.rf}return t&&!e&&(e=(1-1/t)*r),(t===0||Math.abs(r-e)<er)&&(i=!0,e=r),{a:r,b:e,rf:t,sphere:i}}var J2={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var vY in J2){var ob=J2[vY];ob.datumName&&(J2[ob.datumName]=ob)}function yY(r,e,t,n,i,a,s){var o={};return r===void 0||r==="none"?o.datum_type=sS:o.datum_type=FW,e&&(o.datum_params=e.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=Ud),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=Qd,o.datum_params[3]*=tv,o.datum_params[4]*=tv,o.datum_params[5]*=tv,o.datum_params[6]=o.datum_params[6]/1e6+1)),s&&(o.datum_type=Tg,o.grids=s),o.a=t,o.b=n,o.es=i,o.ep2=a,o}var R4={};function xY(r,e,t){return e instanceof ArrayBuffer?wY(r,e,t):{ready:_Y(r,e)}}function wY(r,e,t){var n=!0;t!==void 0&&t.includeErrorFields===!1&&(n=!1);var i=new DataView(e),a=CY(i),s=SY(i,a),o=BY(i,s,a,n),l={header:s,subgrids:o};return R4[r]=l,l}async function _Y(r,e){for(var t=[],n=await e.getImageCount(),i=n-1;i>=0;i--){var a=await e.getImage(i),s=await a.readRasters(),o=s,l=[a.getWidth(),a.getHeight()],u=a.getBoundingBox().map(TN),c=[a.fileDirectory.ModelPixelScale[0],a.fileDirectory.ModelPixelScale[1]].map(TN),h=u[0]+(l[0]-1)*c[0],f=u[3]-(l[1]-1)*c[1],A=o[0],d=o[1],p=[];for(let w=l[1]-1;w>=0;w--)for(let x=l[0]-1;x>=0;x--){var y=w*l[0]+x;p.push([-hA(d[y]),hA(A[y])])}t.push({del:c,lim:l,ll:[-h,f],cvs:p})}var v={header:{nSubgrids:n},subgrids:t};return R4[r]=v,v}function EY(r){if(r===void 0)return null;var e=r.split(",");return e.map(bY)}function bY(r){if(r.length===0)return null;var e=r[0]==="@";return e&&(r=r.slice(1)),r==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:r,mandatory:!e,grid:R4[r]||null,isNull:!1}}function TN(r){return r*Math.PI/180}function hA(r){return r/3600*Math.PI/180}function CY(r){var e=r.getInt32(8,!1);return e===11?!1:(e=r.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function SY(r,e){return{nFields:r.getInt32(8,e),nSubgridFields:r.getInt32(24,e),nSubgrids:r.getInt32(40,e),shiftType:lS(r,56,64).trim(),fromSemiMajorAxis:r.getFloat64(120,e),fromSemiMinorAxis:r.getFloat64(136,e),toSemiMajorAxis:r.getFloat64(152,e),toSemiMinorAxis:r.getFloat64(168,e)}}function lS(r,e,t){return String.fromCharCode.apply(null,new Uint8Array(r.buffer.slice(e,t)))}function BY(r,e,t,n){for(var i=176,a=[],s=0;s<e.nSubgrids;s++){var o=NY(r,i,t),l=IY(r,i,o,t,n),u=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),c=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);a.push({ll:[hA(o.lowerLongitude),hA(o.lowerLatitude)],del:[hA(o.longitudeInterval),hA(o.latitudeInterval)],lim:[u,c],count:o.gridNodeCount,cvs:TY(l)});var h=16;n===!1&&(h=8),i+=176+o.gridNodeCount*h}return a}function TY(r){return r.map(function(e){return[hA(e.longitudeShift),hA(e.latitudeShift)]})}function NY(r,e,t){return{name:lS(r,e+8,e+16).trim(),parent:lS(r,e+24,e+24+8).trim(),lowerLatitude:r.getFloat64(e+72,t),upperLatitude:r.getFloat64(e+88,t),lowerLongitude:r.getFloat64(e+104,t),upperLongitude:r.getFloat64(e+120,t),latitudeInterval:r.getFloat64(e+136,t),longitudeInterval:r.getFloat64(e+152,t),gridNodeCount:r.getInt32(e+168,t)}}function IY(r,e,t,n,i){var a=e+176,s=16;i===!1&&(s=8);for(var o=[],l=0;l<t.gridNodeCount;l++){var u={latitudeShift:r.getFloat32(a+l*s,n),longitudeShift:r.getFloat32(a+l*s+4,n)};i!==!1&&(u.latitudeAccuracy=r.getFloat32(a+l*s+8,n),u.longitudeAccuracy=r.getFloat32(a+l*s+12,n)),o.push(u)}return o}function Eu(r,e){if(!(this instanceof Eu))return new Eu(r);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(u){if(u)throw u};var t=nY(r);if(typeof t!="object"){e("Could not parse to valid json: "+r);return}var n=Eu.projections.get(t.projName);if(!n){e("Could not get projection name from: "+r);return}if(t.datumCode&&t.datumCode!=="none"){var i=BA(J2,t.datumCode);i&&(t.datum_params=t.datum_params||(i.towgs84?i.towgs84.split(","):null),t.ellps=i.ellipse,t.datumName=i.datumName?i.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var a=mY(t.a,t.b,t.rf,t.ellps,t.sphere),s=pY(a.a,a.b,a.rf,t.R_A),o=EY(t.nadgrids),l=t.datum||yY(t.datumCode,t.datum_params,a.a,a.b,s.es,s.ep2,o);SN(this,t),SN(this,n),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=l,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}Eu.projections=dY;Eu.projections.start();function FY(r,e){return r.datum_type!==e.datum_type||r.a!==e.a||Math.abs(r.es-e.es)>5e-11?!1:r.datum_type===Ud?r.datum_params[0]===e.datum_params[0]&&r.datum_params[1]===e.datum_params[1]&&r.datum_params[2]===e.datum_params[2]:r.datum_type===Qd?r.datum_params[0]===e.datum_params[0]&&r.datum_params[1]===e.datum_params[1]&&r.datum_params[2]===e.datum_params[2]&&r.datum_params[3]===e.datum_params[3]&&r.datum_params[4]===e.datum_params[4]&&r.datum_params[5]===e.datum_params[5]&&r.datum_params[6]===e.datum_params[6]:!0}function RO(r,e,t){var n=r.x,i=r.y,a=r.z?r.z:0,s,o,l,u;if(i<-jt&&i>-1.001*jt)i=-jt;else if(i>jt&&i<1.001*jt)i=jt;else{if(i<-jt)return{x:-1/0,y:-1/0,z:r.z};if(i>jt)return{x:1/0,y:1/0,z:r.z}}return n>Math.PI&&(n-=2*Math.PI),o=Math.sin(i),u=Math.cos(i),l=o*o,s=t/Math.sqrt(1-e*l),{x:(s+a)*u*Math.cos(n),y:(s+a)*u*Math.sin(n),z:(s*(1-e)+a)*o}}function OO(r,e,t,n){var i=1e-12,a=i*i,s=30,o,l,u,c,h,f,A,d,p,y,v,w,x,b=r.x,C=r.y,S=r.z?r.z:0,I,B,T;if(o=Math.sqrt(b*b+C*C),l=Math.sqrt(b*b+C*C+S*S),o/t<i){if(I=0,l/t<i)return B=jt,T=-n,{x:r.x,y:r.y,z:r.z}}else I=Math.atan2(C,b);u=S/l,c=o/l,h=1/Math.sqrt(1-e*(2-e)*c*c),d=c*(1-e)*h,p=u*h,x=0;do x++,A=t/Math.sqrt(1-e*p*p),T=o*d+S*p-A*(1-e*p*p),f=e*A/(A+T),h=1/Math.sqrt(1-f*(2-f)*c*c),y=c*(1-f)*h,v=u*h,w=v*d-y*p,d=y,p=v;while(w*w>a&&x<s);return B=Math.atan(v/Math.abs(y)),{x:I,y:B,z:T}}function MY(r,e,t){if(e===Ud)return{x:r.x+t[0],y:r.y+t[1],z:r.z+t[2]};if(e===Qd){var n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],l=t[5],u=t[6];return{x:u*(r.x-l*r.y+o*r.z)+n,y:u*(l*r.x+r.y-s*r.z)+i,z:u*(-o*r.x+s*r.y+r.z)+a}}}function LY(r,e,t){if(e===Ud)return{x:r.x-t[0],y:r.y-t[1],z:r.z-t[2]};if(e===Qd){var n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],l=t[5],u=t[6],c=(r.x-n)/u,h=(r.y-i)/u,f=(r.z-a)/u;return{x:c+l*h-o*f,y:-l*c+h+s*f,z:o*c-s*h+f}}}function Ny(r){return r===Ud||r===Qd}function DY(r,e,t){if(FY(r,e)||r.datum_type===sS||e.datum_type===sS)return t;var n=r.a,i=r.es;if(r.datum_type===Tg){var a=NN(r,!1,t);if(a!==0)return;n=xN,i=wN}var s=e.a,o=e.b,l=e.es;if(e.datum_type===Tg&&(s=xN,o=MW,l=wN),i===l&&n===s&&!Ny(r.datum_type)&&!Ny(e.datum_type))return t;if(t=RO(t,i,n),Ny(r.datum_type)&&(t=MY(t,r.datum_type,r.datum_params)),Ny(e.datum_type)&&(t=LY(t,e.datum_type,e.datum_params)),t=OO(t,l,s,o),e.datum_type===Tg){var u=NN(e,!0,t);if(u!==0)return}return t}function NN(r,e,t){if(r.grids===null||r.grids.length===0)return console.log("Grid shift grids not found"),-1;var n={x:-t.x,y:t.y},i={x:Number.NaN,y:Number.NaN},a=[];e:for(var s=0;s<r.grids.length;s++){var o=r.grids[s];if(a.push(o.name),o.isNull){i=n;break}if(o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var l=o.grid.subgrids,u=0,c=l.length;u<c;u++){var h=l[u],f=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,A=h.ll[0]-f,d=h.ll[1]-f,p=h.ll[0]+(h.lim[0]-1)*h.del[0]+f,y=h.ll[1]+(h.lim[1]-1)*h.del[1]+f;if(!(d>n.y||A>n.x||y<n.y||p<n.x)&&(i=kY(n,e,h),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*ml+" "+n.y*ml+" tried: '"+a+"'"),-1):(t.x=-i.x,t.y=i.y,0)}function kY(r,e,t){var n={x:Number.NaN,y:Number.NaN};if(isNaN(r.x))return n;var i={x:r.x,y:r.y};i.x-=t.ll[0],i.y-=t.ll[1],i.x=or(i.x-Math.PI)+Math.PI;var a=IN(i,t);if(e){if(isNaN(a.x))return n;a.x=i.x-a.x,a.y=i.y-a.y;var s=9,o=1e-12,l,u;do{if(u=IN(a,t),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:i.x-(u.x+a.x),y:i.y-(u.y+a.y)},a.x+=l.x,a.y+=l.y}while(s--&&Math.abs(l.x)>o&&Math.abs(l.y)>o);if(s<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=or(a.x+t.ll[0]),n.y=a.y+t.ll[1]}else isNaN(a.x)||(n.x=r.x+a.x,n.y=r.y+a.y);return n}function IN(r,e){var t={x:r.x/e.del[0],y:r.y/e.del[1]},n={x:Math.floor(t.x),y:Math.floor(t.y)},i={x:t.x-1*n.x,y:t.y-1*n.y},a={x:Number.NaN,y:Number.NaN},s;if(n.x<0||n.x>=e.lim[0]||n.y<0||n.y>=e.lim[1])return a;s=n.y*e.lim[0]+n.x;var o={x:e.cvs[s][0],y:e.cvs[s][1]};s++;var l={x:e.cvs[s][0],y:e.cvs[s][1]};s+=e.lim[0];var u={x:e.cvs[s][0],y:e.cvs[s][1]};s--;var c={x:e.cvs[s][0],y:e.cvs[s][1]},h=i.x*i.y,f=i.x*(1-i.y),A=(1-i.x)*(1-i.y),d=(1-i.x)*i.y;return a.x=A*o.x+f*l.x+d*c.x+h*u.x,a.y=A*o.y+f*l.y+d*c.y+h*u.y,a}function FN(r,e,t){var n=t.x,i=t.y,a=t.z||0,s,o,l,u={};for(l=0;l<3;l++)if(!(e&&l===2&&t.z===void 0))switch(l===0?(s=n,"ew".indexOf(r.axis[l])!==-1?o="x":o="y"):l===1?(s=i,"ns".indexOf(r.axis[l])!==-1?o="y":o="x"):(s=a,o="z"),r.axis[l]){case"e":u[o]=s;break;case"w":u[o]=-s;break;case"n":u[o]=s;break;case"s":u[o]=-s;break;case"u":t[o]!==void 0&&(u.z=s);break;case"d":t[o]!==void 0&&(u.z=-s);break;default:return null}return u}function PO(r){var e={x:r[0],y:r[1]};return r.length>2&&(e.z=r[2]),r.length>3&&(e.m=r[3]),e}function RY(r){MN(r.x),MN(r.y)}function MN(r){if(typeof Number.isFinite=="function"){if(Number.isFinite(r))return;throw new TypeError("coordinates must be finite numbers")}if(typeof r!="number"||r!==r||!isFinite(r))throw new TypeError("coordinates must be finite numbers")}function OY(r,e){return(r.datum.datum_type===Ud||r.datum.datum_type===Qd||r.datum.datum_type===Tg)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Ud||e.datum.datum_type===Qd||e.datum.datum_type===Tg)&&r.datumCode!=="WGS84"}function zx(r,e,t,n){var i;Array.isArray(t)?t=PO(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var a=t.z!==void 0;if(RY(t),r.datum&&e.datum&&OY(r,e)&&(i=new Eu("WGS84"),t=zx(r,i,t,n),r=i),n&&r.axis!=="enu"&&(t=FN(r,!1,t)),r.projName==="longlat")t={x:t.x*Aa,y:t.y*Aa,z:t.z||0};else if(r.to_meter&&(t={x:t.x*r.to_meter,y:t.y*r.to_meter,z:t.z||0}),t=r.inverse(t),!t)return;if(r.from_greenwich&&(t.x+=r.from_greenwich),t=DY(r.datum,e.datum,t),!!t)return t=t,e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*ml,y:t.y*ml,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),n&&e.axis!=="enu"?FN(e,!0,t):(t&&!a&&delete t.z,t)}var LN=Eu("WGS84");function lb(r,e,t,n){var i,a,s;return Array.isArray(t)?(i=zx(r,e,t,n)||{x:NaN,y:NaN},t.length>2?typeof r.name<"u"&&r.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(t.slice(3)):[i.x,i.y,t[2]].concat(t.slice(3)):[i.x,i.y].concat(t.slice(2)):[i.x,i.y]):(a=zx(r,e,t,n),s=Object.keys(t),s.length===2||s.forEach(function(o){if(typeof r.name<"u"&&r.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;a[o]=t[o]}),a)}function Iy(r){return r instanceof Eu?r:typeof r=="object"&&"oProj"in r?r.oProj:Eu(r)}function PY(r,e,t){var n,i,a=!1,s;return typeof e>"u"?(i=Iy(r),n=LN,a=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,i=Iy(r),n=LN,a=!0),n||(n=Iy(r)),i||(i=Iy(e)),t?lb(n,i,t):(s={forward:function(o,l){return lb(n,i,o,l)},inverse:function(o,l){return lb(i,n,o,l)}},a&&(s.oProj=i),s)}var DN=6,UO="AJSAJS",QO="AFAFAF",gg=65,ol=73,fu=79,Im=86,Fm=90;const UY={forward:GO,inverse:QY,toPoint:HO};function GO(r,e){return e=e||5,zY(GY({lat:r[1],lon:r[0]}),e)}function QY(r){var e=O4(qO(r.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function HO(r){var e=O4(qO(r.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function ub(r){return r*(Math.PI/180)}function kN(r){return 180*(r/Math.PI)}function GY(r){var e=r.lat,t=r.lon,n=6378137,i=.00669438,a=.9996,s,o,l,u,c,h,f,A=ub(e),d=ub(t),p,y;y=Math.floor((t+180)/6)+1,t===180&&(y=60),e>=56&&e<64&&t>=3&&t<12&&(y=32),e>=72&&e<84&&(t>=0&&t<9?y=31:t>=9&&t<21?y=33:t>=21&&t<33?y=35:t>=33&&t<42&&(y=37)),s=(y-1)*6-180+3,p=ub(s),o=i/(1-i),l=n/Math.sqrt(1-i*Math.sin(A)*Math.sin(A)),u=Math.tan(A)*Math.tan(A),c=o*Math.cos(A)*Math.cos(A),h=Math.cos(A)*(d-p),f=n*((1-i/4-3*i*i/64-5*i*i*i/256)*A-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*A)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*A)-35*i*i*i/3072*Math.sin(6*A));var v=a*l*(h+(1-u+c)*h*h*h/6+(5-18*u+u*u+72*c-58*o)*h*h*h*h*h/120)+5e5,w=a*(f+l*Math.tan(A)*(h*h/2+(5-u+9*c+4*c*c)*h*h*h*h/24+(61-58*u+u*u+600*c-330*o)*h*h*h*h*h*h/720));return e<0&&(w+=1e7),{northing:Math.round(w),easting:Math.round(v),zoneNumber:y,zoneLetter:HY(e)}}function O4(r){var e=r.northing,t=r.easting,n=r.zoneLetter,i=r.zoneNumber;if(i<0||i>60)return null;var a=.9996,s=6378137,o=.00669438,l,u=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),c,h,f,A,d,p,y,v,w,x=t-5e5,b=e;n<"N"&&(b-=1e7),y=(i-1)*6-180+3,l=o/(1-o),p=b/a,v=p/(s*(1-o/4-3*o*o/64-5*o*o*o/256)),w=v+(3*u/2-27*u*u*u/32)*Math.sin(2*v)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*v)+151*u*u*u/96*Math.sin(6*v),c=s/Math.sqrt(1-o*Math.sin(w)*Math.sin(w)),h=Math.tan(w)*Math.tan(w),f=l*Math.cos(w)*Math.cos(w),A=s*(1-o)/Math.pow(1-o*Math.sin(w)*Math.sin(w),1.5),d=x/(c*a);var C=w-c*Math.tan(w)/A*(d*d/2-(5+3*h+10*f-4*f*f-9*l)*d*d*d*d/24+(61+90*h+298*f+45*h*h-252*l-3*f*f)*d*d*d*d*d*d/720);C=kN(C);var S=(d-(1+2*h+f)*d*d*d/6+(5-2*f+28*h-3*f*f+8*l+24*h*h)*d*d*d*d*d/120)/Math.cos(w);S=y+kN(S);var I;if(r.accuracy){var B=O4({northing:r.northing+r.accuracy,easting:r.easting+r.accuracy,zoneLetter:r.zoneLetter,zoneNumber:r.zoneNumber});I={top:B.lat,right:B.lon,bottom:C,left:S}}else I={lat:C,lon:S};return I}function HY(r){var e="Z";return 84>=r&&r>=72?e="X":72>r&&r>=64?e="W":64>r&&r>=56?e="V":56>r&&r>=48?e="U":48>r&&r>=40?e="T":40>r&&r>=32?e="S":32>r&&r>=24?e="R":24>r&&r>=16?e="Q":16>r&&r>=8?e="P":8>r&&r>=0?e="N":0>r&&r>=-8?e="M":-8>r&&r>=-16?e="L":-16>r&&r>=-24?e="K":-24>r&&r>=-32?e="J":-32>r&&r>=-40?e="H":-40>r&&r>=-48?e="G":-48>r&&r>=-56?e="F":-56>r&&r>=-64?e="E":-64>r&&r>=-72?e="D":-72>r&&r>=-80&&(e="C"),e}function zY(r,e){var t="00000"+r.easting,n="00000"+r.northing;return r.zoneNumber+r.zoneLetter+qY(r.easting,r.northing,r.zoneNumber)+t.substr(t.length-5,e)+n.substr(n.length-5,e)}function qY(r,e,t){var n=zO(t),i=Math.floor(r/1e5),a=Math.floor(e/1e5)%20;return jY(i,a,n)}function zO(r){var e=r%DN;return e===0&&(e=DN),e}function jY(r,e,t){var n=t-1,i=UO.charCodeAt(n),a=QO.charCodeAt(n),s=i+r-1,o=a+e,l=!1;s>Fm&&(s=s-Fm+gg-1,l=!0),(s===ol||i<ol&&s>ol||(s>ol||i<ol)&&l)&&s++,(s===fu||i<fu&&s>fu||(s>fu||i<fu)&&l)&&(s++,s===ol&&s++),s>Fm&&(s=s-Fm+gg-1),o>Im?(o=o-Im+gg-1,l=!0):l=!1,(o===ol||a<ol&&o>ol||(o>ol||a<ol)&&l)&&o++,(o===fu||a<fu&&o>fu||(o>fu||a<fu)&&l)&&(o++,o===ol&&o++),o>Im&&(o=o-Im+gg-1);var u=String.fromCharCode(s)+String.fromCharCode(o);return u}function qO(r){if(r&&r.length===0)throw"MGRSPoint coverting from nothing";for(var e=r.length,t=null,n="",i,a=0;!/[A-Z]/.test(i=r.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+r;n+=i,a++}var s=parseInt(n,10);if(a===0||a+3>e)throw"MGRSPoint bad conversion from: "+r;var o=r.charAt(a++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+r;t=r.substring(a,a+=2);for(var l=zO(s),u=$Y(t.charAt(0),l),c=KY(t.charAt(1),l);c<VY(o);)c+=2e6;var h=e-a;if(h%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+r;var f=h/2,A=0,d=0,p,y,v,w,x;return f>0&&(p=1e5/Math.pow(10,f),y=r.substring(a,a+f),A=parseFloat(y)*p,v=r.substring(a+f),d=parseFloat(v)*p),w=A+u,x=d+c,{easting:w,northing:x,zoneLetter:o,zoneNumber:s,accuracy:p}}function $Y(r,e){for(var t=UO.charCodeAt(e-1),n=1e5,i=!1;t!==r.charCodeAt(0);){if(t++,t===ol&&t++,t===fu&&t++,t>Fm){if(i)throw"Bad character: "+r;t=gg,i=!0}n+=1e5}return n}function KY(r,e){if(r>"V")throw"MGRSPoint given invalid Northing "+r;for(var t=QO.charCodeAt(e-1),n=0,i=!1;t!==r.charCodeAt(0);){if(t++,t===ol&&t++,t===fu&&t++,t>Im){if(i)throw"Bad character: "+r;t=gg,i=!0}n+=1e5}return n}function VY(r){var e;switch(r){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+r}function ep(r,e,t){if(!(this instanceof ep))return new ep(r,e,t);if(Array.isArray(r))this.x=r[0],this.y=r[1],this.z=r[2]||0;else if(typeof r=="object")this.x=r.x,this.y=r.y,this.z=r.z||0;else if(typeof r=="string"&&typeof e>"u"){var n=r.split(",");this.x=parseFloat(n[0]),this.y=parseFloat(n[1]),this.z=parseFloat(n[2])||0}else this.x=r,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}ep.fromMGRS=function(r){return new ep(HO(r))};ep.prototype.toMGRS=function(r){return GO([this.x,this.y],r)};var WY=1,YY=.25,RN=.046875,ON=.01953125,PN=.01068115234375,XY=.75,ZY=.46875,JY=.013020833333333334,eX=.007120768229166667,tX=.3645833333333333,rX=.005696614583333333,nX=.3076171875;function P4(r){var e=[];e[0]=WY-r*(YY+r*(RN+r*(ON+r*PN))),e[1]=r*(XY-r*(RN+r*(ON+r*PN)));var t=r*r;return e[2]=t*(ZY-r*(JY+r*eX)),t*=r,e[3]=t*(tX-r*rX),e[4]=t*r*nX,e}function bp(r,e,t,n){return t*=e,e*=e,n[0]*r-t*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}var iX=20;function U4(r,e,t){for(var n=1/(1-e),i=r,a=iX;a;--a){var s=Math.sin(i),o=1-e*s*s;if(o=(bp(i,s,Math.cos(i),t)-r)*(o*Math.sqrt(o))*n,i-=o,Math.abs(o)<er)return i}return i}function aX(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=P4(this.es),this.ml0=bp(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function sX(r){var e=r.x,t=r.y,n=or(e-this.long0,this.over),i,a,s,o=Math.sin(t),l=Math.cos(t);if(this.es){var c=l*n,h=Math.pow(c,2),f=this.ep2*Math.pow(l,2),A=Math.pow(f,2),d=Math.abs(l)>er?Math.tan(t):0,p=Math.pow(d,2),y=Math.pow(p,2);i=1-this.es*Math.pow(o,2),c=c/Math.sqrt(i);var v=bp(t,o,l,this.en);a=this.a*(this.k0*c*(1+h/6*(1-p+f+h/20*(5-18*p+y+14*f-58*p*f+h/42*(61+179*y-y*p-479*p)))))+this.x0,s=this.a*(this.k0*(v-this.ml0+o*n*c/2*(1+h/12*(5-p+9*f+4*A+h/30*(61+y-58*p+270*f-330*p*f+h/56*(1385+543*y-y*p-3111*p))))))+this.y0}else{var u=l*Math.sin(n);if(Math.abs(Math.abs(u)-1)<er)return 93;if(a=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,s=l*Math.cos(n)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(s),u>=1){if(u-1>er)return 93;s=0}else s=Math.acos(s);t<0&&(s=-s),s=this.a*this.k0*(s-this.lat0)+this.y0}return r.x=a,r.y=s,r}function oX(r){var e,t,n,i,a=(r.x-this.x0)*(1/this.a),s=(r.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+s/this.k0,t=U4(e,this.es,this.en),Math.abs(t)<jt){var h=Math.sin(t),f=Math.cos(t),A=Math.abs(f)>er?Math.tan(t):0,d=this.ep2*Math.pow(f,2),p=Math.pow(d,2),y=Math.pow(A,2),v=Math.pow(y,2);e=1-this.es*Math.pow(h,2);var w=a*Math.sqrt(e)/this.k0,x=Math.pow(w,2);e=e*A,n=t-e*x/(1-this.es)*.5*(1-x/12*(5+3*y-9*d*y+d-4*p-x/30*(61+90*y-252*d*y+45*v+46*d-x/56*(1385+3633*y+4095*v+1574*v*y)))),i=or(this.long0+w*(1-x/6*(1+2*y+d-x/20*(5+28*y+24*v+8*d*y+6*d-x/42*(61+662*y+1320*v+720*v*y))))/f,this.over)}else n=jt*_1(s),i=0;else{var o=Math.exp(a/this.k0),l=.5*(o-1/o),u=this.lat0+s/this.k0,c=Math.cos(u);e=Math.sqrt((1-Math.pow(c,2))/(1+Math.pow(l,2))),n=Math.asin(e),s<0&&(n=-n),l===0&&c===0?i=0:i=or(Math.atan2(l,c)+this.long0,this.over)}return r.x=i,r.y=n,r}var lX=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const ex={init:aX,forward:sX,inverse:oX,names:lX};function jO(r){var e=Math.exp(r);return e=(e-1/e)/2,e}function pl(r,e){r=Math.abs(r),e=Math.abs(e);var t=Math.max(r,e),n=Math.min(r,e)/(t||1);return t*Math.sqrt(1+Math.pow(n,2))}function uX(r){var e=1+r,t=e-1;return t===0?r:r*Math.log(e)/t}function cX(r){var e=Math.abs(r);return e=uX(e*(1+e/(pl(1,e)+1))),r<0?-e:e}function Q4(r,e){for(var t=2*Math.cos(2*e),n=r.length-1,i=r[n],a=0,s;--n>=0;)s=-a+t*i+r[n],a=i,i=s;return e+s*Math.sin(2*e)}function hX(r,e){for(var t=2*Math.cos(e),n=r.length-1,i=r[n],a=0,s;--n>=0;)s=-a+t*i+r[n],a=i,i=s;return Math.sin(e)*s}function fX(r){var e=Math.exp(r);return e=(e+1/e)/2,e}function $O(r,e,t){for(var n=Math.sin(e),i=Math.cos(e),a=jO(t),s=fX(t),o=2*i*s,l=-2*n*a,u=r.length-1,c=r[u],h=0,f=0,A=0,d,p;--u>=0;)d=f,p=h,f=c,h=A,c=-d+o*f-l*h+r[u],A=-p+l*f+o*h;return o=n*s,l=i*a,[o*c-l*A,o*A+l*c]}function AX(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(ex.init.apply(this),this.forward=ex.forward,this.inverse=ex.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var r=this.es/(1+Math.sqrt(1-this.es)),e=r/(2-r),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var n=Q4(this.cbg,this.lat0);this.Zb=-this.Qn*(n+hX(this.gtu,2*n))}function dX(r){var e=or(r.x-this.long0,this.over),t=r.y;t=Q4(this.cbg,t);var n=Math.sin(t),i=Math.cos(t),a=Math.sin(e),s=Math.cos(e);t=Math.atan2(n,s*i),e=Math.atan2(a*i,pl(n,i*s)),e=cX(Math.tan(e));var o=$O(this.gtu,2*t,2*e);t=t+o[0],e=e+o[1];var l,u;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*t+this.Zb)+this.y0):(l=1/0,u=1/0),r.x=l,r.y=u,r}function gX(r){var e=(r.x-this.x0)*(1/this.a),t=(r.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var n,i;if(Math.abs(e)<=2.623395162778){var a=$O(this.utg,2*t,2*e);t=t+a[0],e=e+a[1],e=Math.atan(jO(e));var s=Math.sin(t),o=Math.cos(t),l=Math.sin(e),u=Math.cos(e);t=Math.atan2(s*u,pl(l,u*o)),e=Math.atan2(l,u*o),n=or(e+this.long0,this.over),i=Q4(this.cgb,t)}else n=1/0,i=1/0;return r.x=n,r.y=i,r}var pX=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const tx={init:AX,forward:dX,inverse:gX,names:pX};function mX(r,e){if(r===void 0){if(r=Math.floor((or(e)+Math.PI)*30/Math.PI)+1,r<0)return 0;if(r>60)return 60}return r}var vX="etmerc";function yX(){var r=mX(this.zone,this.long0);if(r===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(r)-183)*Aa,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,tx.init.apply(this),this.forward=tx.forward,this.inverse=tx.inverse}var xX=["Universal Transverse Mercator System","utm"];const wX={init:yX,names:xX,dependsOn:vX};function G4(r,e){return Math.pow((1-r)/(1+r),e)}var _X=20;function EX(){var r=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*r*r),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(r/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+di)/(Math.pow(Math.tan(.5*this.lat0+di),this.C)*G4(this.e*r,this.ratexp))}function bX(r){var e=r.x,t=r.y;return r.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+di),this.C)*G4(this.e*Math.sin(t),this.ratexp))-jt,r.x=this.C*e,r}function CX(r){for(var e=1e-14,t=r.x/this.C,n=r.y,i=Math.pow(Math.tan(.5*n+di)/this.K,1/this.C),a=_X;a>0&&(n=2*Math.atan(i*G4(this.e*Math.sin(r.y),-.5*this.e))-jt,!(Math.abs(n-r.y)<e));--a)r.y=n;return a?(r.x=t,r.y=n,r):null}const H4={init:EX,forward:bX,inverse:CX};function SX(){H4.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function BX(r){var e,t,n,i;return r.x=or(r.x-this.long0,this.over),H4.forward.apply(this,[r]),e=Math.sin(r.y),t=Math.cos(r.y),n=Math.cos(r.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*n),r.x=i*t*Math.sin(r.x),r.y=i*(this.cosc0*e-this.sinc0*t*n),r.x=this.a*r.x+this.x0,r.y=this.a*r.y+this.y0,r}function TX(r){var e,t,n,i,a;if(r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,r.x/=this.k0,r.y/=this.k0,a=pl(r.x,r.y)){var s=2*Math.atan2(a,this.R2);e=Math.sin(s),t=Math.cos(s),i=Math.asin(t*this.sinc0+r.y*e*this.cosc0/a),n=Math.atan2(r.x*e,a*this.cosc0*t-r.y*this.sinc0*e)}else i=this.phic0,n=0;return r.x=n,r.y=i,H4.inverse.apply(this,[r]),r.x=or(r.x+this.long0,this.over),r}var NX=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const IX={init:SX,forward:BX,inverse:TX,names:NX};function z4(r,e,t){return e*=t,Math.tan(.5*(jt+r))*Math.pow((1-e)/(1+e),.5*t)}function FX(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=er&&(this.k0=.5*(1+_1(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=er&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=er&&Math.abs(Math.cos(this.lat_ts))>er&&(this.k0=.5*this.cons*nh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/nc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=nh(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(z4(this.lat0,this.sinlat0,this.e))-jt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function MX(r){var e=r.x,t=r.y,n=Math.sin(t),i=Math.cos(t),a,s,o,l,u,c,h=or(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=er&&Math.abs(t+this.lat0)<=er?(r.x=NaN,r.y=NaN,r):this.sphere?(a=2*this.k0/(1+this.sinlat0*n+this.coslat0*i*Math.cos(h)),r.x=this.a*a*i*Math.sin(h)+this.x0,r.y=this.a*a*(this.coslat0*n-this.sinlat0*i*Math.cos(h))+this.y0,r):(s=2*Math.atan(z4(t,n,this.e))-jt,l=Math.cos(s),o=Math.sin(s),Math.abs(this.coslat0)<=er?(u=nc(this.e,t*this.con,this.con*n),c=2*this.a*this.k0*u/this.cons,r.x=this.x0+c*Math.sin(e-this.long0),r.y=this.y0-this.con*c*Math.cos(e-this.long0),r):(Math.abs(this.sinlat0)<er?(a=2*this.a*this.k0/(1+l*Math.cos(h)),r.y=a*o):(a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*l*Math.cos(h))),r.y=a*(this.cosX0*o-this.sinX0*l*Math.cos(h))+this.y0),r.x=a*l*Math.sin(h)+this.x0,r))}function LX(r){r.x-=this.x0,r.y-=this.y0;var e,t,n,i,a,s=Math.sqrt(r.x*r.x+r.y*r.y);if(this.sphere){var o=2*Math.atan(s/(2*this.a*this.k0));return e=this.long0,t=this.lat0,s<=er?(r.x=e,r.y=t,r):(t=Math.asin(Math.cos(o)*this.sinlat0+r.y*Math.sin(o)*this.coslat0/s),Math.abs(this.coslat0)<er?this.lat0>0?e=or(this.long0+Math.atan2(r.x,-1*r.y),this.over):e=or(this.long0+Math.atan2(r.x,r.y),this.over):e=or(this.long0+Math.atan2(r.x*Math.sin(o),s*this.coslat0*Math.cos(o)-r.y*this.sinlat0*Math.sin(o)),this.over),r.x=e,r.y=t,r)}else if(Math.abs(this.coslat0)<=er){if(s<=er)return t=this.lat0,e=this.long0,r.x=e,r.y=t,r;r.x*=this.con,r.y*=this.con,n=s*this.cons/(2*this.a*this.k0),t=this.con*Qv(this.e,n),e=this.con*or(this.con*this.long0+Math.atan2(r.x,-1*r.y),this.over)}else i=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,s<=er?a=this.X0:(a=Math.asin(Math.cos(i)*this.sinX0+r.y*Math.sin(i)*this.cosX0/s),e=or(this.long0+Math.atan2(r.x*Math.sin(i),s*this.cosX0*Math.cos(i)-r.y*this.sinX0*Math.sin(i)),this.over)),t=-1*Qv(this.e,Math.tan(.5*(jt+a)));return r.x=e,r.y=t,r}var DX=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const kX={init:FX,forward:MX,inverse:LX,names:DX,ssfn_:z4};function RX(){var r=this.lat0;this.lambda0=this.long0;var e=Math.sin(r),t=this.a,n=this.rf,i=1/n,a=2*i-Math.pow(i,2),s=this.e=Math.sqrt(a);this.R=this.k0*t*Math.sqrt(1-a)/(1-a*Math.pow(e,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(r),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+r/2)),u=Math.log((1+s*e)/(1-s*e));this.K=o-this.alpha*l+this.alpha*s/2*u}function OX(r){var e=Math.log(Math.tan(Math.PI/4-r.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(r.y))/(1-this.e*Math.sin(r.y))),n=-this.alpha*(e+t)+this.K,i=2*(Math.atan(Math.exp(n))-Math.PI/4),a=this.alpha*(r.x-this.lambda0),s=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(a))),o=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(a));return r.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,r.x=this.R*s+this.x0,r}function PX(r){for(var e=r.x-this.x0,t=r.y-this.y0,n=e/this.R,i=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n)),s=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i))),o=this.lambda0+s/this.alpha,l=0,u=a,c=-1e3,h=0;Math.abs(u-c)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return r.x=o,r.y=u,r}var UX=["somerc"];const QX={init:RX,forward:OX,inverse:PX,names:UX};var ag=1e-7;function GX(r){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof r.projName=="object"?Object.keys(r.projName)[0]:r.projName;return"no_uoff"in r||"no_off"in r||e.indexOf(t)!==-1||e.indexOf(DO(t))!==-1}function HX(){var r,e,t,n,i,a,s,o,l,u,c=0,h,f=0,A=0,d=0,p=0,y=0,v=0;this.no_off=GX(this),this.no_rot="no_rot"in this;var w=!1;"alpha"in this&&(w=!0);var x=!1;if("rectified_grid_angle"in this&&(x=!0),w&&(v=this.alpha),x&&(c=this.rectified_grid_angle),w||x)f=this.longc;else if(A=this.long1,p=this.lat1,d=this.long2,y=this.lat2,Math.abs(p-y)<=ag||(r=Math.abs(p))<=ag||Math.abs(r-jt)<=ag||Math.abs(Math.abs(this.lat0)-jt)<=ag||Math.abs(Math.abs(y)-jt)<=ag)throw new Error;var b=1-this.es;e=Math.sqrt(b),Math.abs(this.lat0)>er?(o=Math.sin(this.lat0),t=Math.cos(this.lat0),r=1-this.es*o*o,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/b),this.A=this.B*this.k0*e/r,n=this.B*e/(t*Math.sqrt(r)),i=n*n-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=n,this.E*=Math.pow(nc(this.e,this.lat0,o),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=i=1),w||x?(w?(h=Math.asin(Math.sin(v)/n),x||(c=v)):(h=c,v=Math.asin(n*Math.sin(h))),this.lam0=f-Math.asin(.5*(i-1/i)*Math.tan(h))/this.B):(a=Math.pow(nc(this.e,p,Math.sin(p)),this.B),s=Math.pow(nc(this.e,y,Math.sin(y)),this.B),i=this.E/a,l=(s-a)/(s+a),u=this.E*this.E,u=(u-s*a)/(u+s*a),r=A-d,r<-Math.PI?d-=Pv:r>Math.PI&&(d+=Pv),this.lam0=or(.5*(A+d)-Math.atan(u*Math.tan(.5*this.B*(A-d))/l)/this.B,this.over),h=Math.atan(2*Math.sin(this.B*or(A-this.lam0,this.over))/(i-1/i)),c=v=Math.asin(n*Math.sin(h))),this.singam=Math.sin(h),this.cosgam=Math.cos(h),this.sinrot=Math.sin(c),this.cosrot=Math.cos(c),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(v))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*h,this.v_pole_n=this.ArB*Math.log(Math.tan(di-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(di+i))}function zX(r){var e={},t,n,i,a,s,o,l,u;if(r.x=r.x-this.lam0,Math.abs(Math.abs(r.y)-jt)>er){if(s=this.E/Math.pow(nc(this.e,r.y,Math.sin(r.y)),this.B),o=1/s,t=.5*(s-o),n=.5*(s+o),a=Math.sin(this.B*r.x),i=(t*this.singam-a*this.cosgam)/n,Math.abs(Math.abs(i)-1)<er)throw new Error;u=.5*this.ArB*Math.log((1-i)/(1+i)),o=Math.cos(this.B*r.x),Math.abs(o)<ag?l=this.A*r.x:l=this.ArB*Math.atan2(t*this.cosgam+a*this.singam,o)}else u=r.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*r.y;return this.no_rot?(e.x=l,e.y=u):(l-=this.u_0,e.x=u*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-u*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function qX(r){var e,t,n,i,a,s,o,l={};if(r.x=(r.x-this.x0)*(1/this.a),r.y=(r.y-this.y0)*(1/this.a),this.no_rot?(t=r.y,e=r.x):(t=r.x*this.cosrot-r.y*this.sinrot,e=r.y*this.cosrot+r.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*t),i=.5*(n-1/n),a=.5*(n+1/n),s=Math.sin(this.BrA*e),o=(s*this.cosgam+i*this.singam)/a,Math.abs(Math.abs(o)-1)<er)l.x=0,l.y=o<0?-jt:jt;else{if(l.y=this.E/Math.sqrt((1+o)/(1-o)),l.y=Qv(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-s*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var jX=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const $X={init:HX,forward:zX,inverse:qX,names:jX};function KX(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<er)){var r=this.b/this.a;this.e=Math.sqrt(1-r*r);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),n=nh(this.e,e,t),i=nc(this.e,this.lat1,e),a=Math.sin(this.lat2),s=Math.cos(this.lat2),o=nh(this.e,a,s),l=nc(this.e,this.lat2,a),u=Math.abs(Math.abs(this.lat0)-jt)<er?0:nc(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>er?this.ns=Math.log(n/o)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function VX(r){var e=r.x,t=r.y;Math.abs(2*Math.abs(t)-Math.PI)<=er&&(t=_1(t)*(jt-2*er));var n=Math.abs(Math.abs(t)-jt),i,a;if(n>er)i=nc(this.e,t,Math.sin(t)),a=this.a*this.f0*Math.pow(i,this.ns);else{if(n=t*this.ns,n<=0)return null;a=0}var s=this.ns*or(e-this.long0,this.over);return r.x=this.k0*(a*Math.sin(s))+this.x0,r.y=this.k0*(this.rh-a*Math.cos(s))+this.y0,r}function WX(r){var e,t,n,i,a,s=(r.x-this.x0)/this.k0,o=this.rh-(r.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(s*s+o*o),t=1):(e=-Math.sqrt(s*s+o*o),t=-1);var l=0;if(e!==0&&(l=Math.atan2(t*s,t*o)),e!==0||this.ns>0){if(t=1/this.ns,n=Math.pow(e/(this.a*this.f0),t),i=Qv(this.e,n),i===-9999)return null}else i=-jt;return a=or(l/this.ns+this.long0,this.over),r.x=a,r.y=i,r}var YX=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const XX={init:KX,forward:VX,inverse:WX,names:YX};function ZX(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function JX(r){var e,t,n,i,a,s,o,l=r.x,u=r.y,c=or(l-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(n)),a=Math.asin(Math.cos(t)*Math.sin(n)/Math.cos(i)),s=this.n*a,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),r.y=o*Math.cos(s)/1,r.x=o*Math.sin(s)/1,this.czech||(r.y*=-1,r.x*=-1),r}function eZ(r){var e,t,n,i,a,s,o,l,u=r.x;r.x=r.y,r.y=u,this.czech||(r.y*=-1,r.x*=-1),s=Math.sqrt(r.x*r.x+r.y*r.y),a=Math.atan2(r.y,r.x),i=a/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),t=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(e)),r.x=this.long0-t/this.alfa,o=e,l=0;var c=0;do r.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-r.y)<1e-10&&(l=1),o=r.y,c+=1;while(l===0&&c<15);return c>=15?null:r}var tZ=["Krovak","krovak"];const rZ={init:ZX,forward:JX,inverse:eZ,names:tZ};function Qo(r,e,t,n,i){return r*i-e*Math.sin(2*i)+t*Math.sin(4*i)-n*Math.sin(6*i)}function E1(r){return 1-.25*r*(1+r/16*(3+1.25*r))}function b1(r){return .375*r*(1+.25*r*(1+.46875*r))}function C1(r){return .05859375*r*r*(1+.75*r)}function S1(r){return r*r*r*(35/3072)}function q4(r,e,t){var n=e*t;return r/Math.sqrt(1-n*n)}function QA(r){return Math.abs(r)<jt?r:r-_1(r)*Math.PI}function qx(r,e,t,n,i){var a,s;a=r/e;for(var o=0;o<15;o++)if(s=(r-(e*a-t*Math.sin(2*a)+n*Math.sin(4*a)-i*Math.sin(6*a)))/(e-2*t*Math.cos(2*a)+4*n*Math.cos(4*a)-6*i*Math.cos(6*a)),a+=s,Math.abs(s)<=1e-10)return a;return NaN}function nZ(){this.sphere||(this.e0=E1(this.es),this.e1=b1(this.es),this.e2=C1(this.es),this.e3=S1(this.es),this.ml0=this.a*Qo(this.e0,this.e1,this.e2,this.e3,this.lat0))}function iZ(r){var e,t,n=r.x,i=r.y;if(n=or(n-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(n)),t=this.a*(Math.atan2(Math.tan(i),Math.cos(n))-this.lat0);else{var a=Math.sin(i),s=Math.cos(i),o=q4(this.a,this.e,a),l=Math.tan(i)*Math.tan(i),u=n*Math.cos(i),c=u*u,h=this.es*s*s/(1-this.es),f=this.a*Qo(this.e0,this.e1,this.e2,this.e3,i);e=o*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),t=f-this.ml0+o*a/s*c*(.5+(5-l+6*h)*c/24)}return r.x=e+this.x0,r.y=t+this.y0,r}function aZ(r){r.x-=this.x0,r.y-=this.y0;var e=r.x/this.a,t=r.y/this.a,n,i;if(this.sphere){var a=t+this.lat0;n=Math.asin(Math.sin(a)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(a))}else{var s=this.ml0/this.a+t,o=qx(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-jt)<=er)return r.x=this.long0,r.y=jt,t<0&&(r.y*=-1),r;var l=q4(this.a,this.e,Math.sin(o)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(o),2),h=e*this.a/l,f=h*h;n=o-l*Math.tan(o)/u*h*h*(.5-(1+3*c)*h*h/24),i=h*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(o)}return r.x=or(i+this.long0,this.over),r.y=QA(n),r}var sZ=["Cassini","Cassini_Soldner","cass"];const oZ={init:nZ,forward:iZ,inverse:aZ,names:sZ};function _A(r,e){var t;return r>1e-7?(t=r*e,(1-r*r)*(e/(1-t*t)-.5/r*Math.log((1-t)/(1+t)))):2*e}var uS=1,cS=2,hS=3,rx=4;function lZ(){var r=Math.abs(this.lat0);if(Math.abs(r-jt)<er?this.mode=this.lat0<0?uS:cS:Math.abs(r)<er?this.mode=hS:this.mode=rx,this.es>0){var e;switch(this.qp=_A(this.e,1),this.mmf=.5/(1-this.es),this.apa=mZ(this.es),this.mode){case cS:this.dd=1;break;case uS:this.dd=1;break;case hS:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case rx:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=_A(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===rx&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function uZ(r){var e,t,n,i,a,s,o,l,u,c,h=r.x,f=r.y;if(h=or(h-this.long0,this.over),this.sphere){if(a=Math.sin(f),c=Math.cos(f),n=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+c*n:1+this.sinph0*a+this.cosph0*c*n,t<=er)return null;t=Math.sqrt(2/t),e=t*c*Math.sin(h),t*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(f+this.lat0)<er)return null;t=di-f*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(h),t*=n}}else{switch(o=0,l=0,u=0,n=Math.cos(h),i=Math.sin(h),a=Math.sin(f),s=_A(this.e,a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=s/this.qp,l=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:u=1+this.sinb1*o+this.cosb1*l*n;break;case this.EQUIT:u=1+l*n;break;case this.N_POLE:u=jt+f,s=this.qp-s;break;case this.S_POLE:u=f-jt,s=this.qp+s;break}if(Math.abs(u)<er)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?t=this.ymf*u*(this.cosb1*o-this.sinb1*l*n):t=(u=Math.sqrt(2/(1+l*n)))*o*this.ymf,e=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:s>=0?(e=(u=Math.sqrt(s))*i,t=n*(this.mode===this.S_POLE?u:-u)):e=t=0;break}}return r.x=this.a*e+this.x0,r.y=this.a*t+this.y0,r}function cZ(r){r.x-=this.x0,r.y-=this.y0;var e=r.x/this.a,t=r.y/this.a,n,i,a,s,o,l,u;if(this.sphere){var c=0,h,f=0;if(h=Math.sqrt(e*e+t*t),i=h*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=Math.sin(i),c=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(h)<=er?0:Math.asin(t*f/h),e*=f,t=c*h;break;case this.OBLIQ:i=Math.abs(h)<=er?this.lat0:Math.asin(c*this.sinph0+t*f*this.cosph0/h),e*=f*this.cosph0,t=(c-Math.sin(i)*this.sinph0)*h;break;case this.N_POLE:t=-t,i=jt-i;break;case this.S_POLE:i-=jt;break}n=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,l=Math.sqrt(e*e+t*t),l<er)return r.x=this.long0,r.y=this.lat0,r;s=2*Math.asin(.5*l/this.rq),a=Math.cos(s),e*=s=Math.sin(s),this.mode===this.OBLIQ?(u=a*this.sinb1+t*s*this.cosb1/l,o=this.qp*u,t=l*this.cosb1*a-t*this.sinb1*s):(u=t*s/l,o=this.qp*u,t=l*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),o=e*e+t*t,!o)return r.x=this.long0,r.y=this.lat0,r;u=1-o/this.qp,this.mode===this.S_POLE&&(u=-u)}n=Math.atan2(e,t),i=vZ(Math.asin(u),this.apa)}return r.x=or(this.long0+n,this.over),r.y=i,r}var hZ=.3333333333333333,fZ=.17222222222222222,AZ=.10257936507936508,dZ=.06388888888888888,gZ=.0664021164021164,pZ=.016415012942191543;function mZ(r){var e,t=[];return t[0]=r*hZ,e=r*r,t[0]+=e*fZ,t[1]=e*dZ,e*=r,t[0]+=e*AZ,t[1]+=e*gZ,t[2]=e*pZ,t}function vZ(r,e){var t=r+r;return r+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var yZ=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const xZ={init:lZ,forward:uZ,inverse:cZ,names:yZ,S_POLE:uS,N_POLE:cS,EQUIT:hS,OBLIQ:rx};function TA(r){return Math.abs(r)>1&&(r=r>1?1:-1),Math.asin(r)}function wZ(){Math.abs(this.lat1+this.lat2)<er||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=nh(this.e3,this.sin_po,this.cos_po),this.qs1=_A(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=nh(this.e3,this.sin_po,this.cos_po),this.qs2=_A(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=_A(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>er?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function _Z(r){var e=r.x,t=r.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var n=_A(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,a=this.ns0*or(e-this.long0,this.over),s=i*Math.sin(a)+this.x0,o=this.rh-i*Math.cos(a)+this.y0;return r.x=s,r.y=o,r}function EZ(r){var e,t,n,i,a,s;return r.x-=this.x0,r.y=this.rh-r.y+this.y0,this.ns0>=0?(e=Math.sqrt(r.x*r.x+r.y*r.y),n=1):(e=-Math.sqrt(r.x*r.x+r.y*r.y),n=-1),i=0,e!==0&&(i=Math.atan2(n*r.x,n*r.y)),n=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-n*n)/(2*this.ns0)):(t=(this.c-n*n)/this.ns0,s=this.phi1z(this.e3,t)),a=or(i/this.ns0+this.long0,this.over),r.x=a,r.y=s,r}function bZ(r,e){var t,n,i,a,s,o=TA(.5*e);if(r<er)return o;for(var l=r*r,u=1;u<=25;u++)if(t=Math.sin(o),n=Math.cos(o),i=r*t,a=1-i*i,s=.5*a*a/n*(e/(1-l)-t/a+.5/r*Math.log((1-i)/(1+i))),o=o+s,Math.abs(s)<=1e-7)return o;return null}var CZ=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const SZ={init:wZ,forward:_Z,inverse:EZ,names:CZ,phi1z:bZ};function BZ(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function TZ(r){var e,t,n,i,a,s,o,l,u=r.x,c=r.y;return n=or(u-this.long0,this.over),e=Math.sin(c),t=Math.cos(c),i=Math.cos(n),s=this.sin_p14*e+this.cos_p14*t*i,a=1,s>0||Math.abs(s)<=er?(o=this.x0+this.a*a*t*Math.sin(n)/s,l=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*t*i)/s):(o=this.x0+this.infinity_dist*t*Math.sin(n),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*i)),r.x=o,r.y=l,r}function NZ(r){var e,t,n,i,a,s;return r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,r.x/=this.k0,r.y/=this.k0,(e=Math.sqrt(r.x*r.x+r.y*r.y))?(i=Math.atan2(e,this.rc),t=Math.sin(i),n=Math.cos(i),s=TA(n*this.sin_p14+r.y*t*this.cos_p14/e),a=Math.atan2(r.x*t,e*this.cos_p14*n-r.y*this.sin_p14*t),a=or(this.long0+a,this.over)):(s=this.phic0,a=0),r.x=a,r.y=s,r}var IZ=["gnom"];const FZ={init:BZ,forward:TZ,inverse:NZ,names:IZ};function MZ(r,e){var t=1-(1-r*r)/(2*r)*Math.log((1-r)/(1+r));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*jt:jt;for(var n=Math.asin(.5*e),i,a,s,o,l=0;l<30;l++)if(a=Math.sin(n),s=Math.cos(n),o=r*a,i=Math.pow(1-o*o,2)/(2*s)*(e/(1-r*r)-a/(1-o*o)+.5/r*Math.log((1-o)/(1+o))),n+=i,Math.abs(i)<=1e-10)return n;return NaN}function LZ(){this.sphere||(this.k0=nh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function DZ(r){var e=r.x,t=r.y,n,i,a=or(e-this.long0,this.over);if(this.sphere)n=this.x0+this.a*a*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var s=_A(this.e,Math.sin(t));n=this.x0+this.a*this.k0*a,i=this.y0+this.a*s*.5/this.k0}return r.x=n,r.y=i,r}function kZ(r){r.x-=this.x0,r.y-=this.y0;var e,t;return this.sphere?(e=or(this.long0+r.x/this.a/Math.cos(this.lat_ts),this.over),t=Math.asin(r.y/this.a*Math.cos(this.lat_ts))):(t=MZ(this.e,2*r.y*this.k0/this.a),e=or(this.long0+r.x/(this.a*this.k0),this.over)),r.x=e,r.y=t,r}var RZ=["cea"];const OZ={init:LZ,forward:DZ,inverse:kZ,names:RZ};function PZ(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function UZ(r){var e=r.x,t=r.y,n=or(e-this.long0,this.over),i=QA(t-this.lat0);return r.x=this.x0+this.a*n*this.rc,r.y=this.y0+this.a*i,r}function QZ(r){var e=r.x,t=r.y;return r.x=or(this.long0+(e-this.x0)/(this.a*this.rc),this.over),r.y=QA(this.lat0+(t-this.y0)/this.a),r}var GZ=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const HZ={init:PZ,forward:UZ,inverse:QZ,names:GZ};var UN=20;function zZ(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=E1(this.es),this.e1=b1(this.es),this.e2=C1(this.es),this.e3=S1(this.es),this.ml0=this.a*Qo(this.e0,this.e1,this.e2,this.e3,this.lat0)}function qZ(r){var e=r.x,t=r.y,n,i,a,s=or(e-this.long0,this.over);if(a=s*Math.sin(t),this.sphere)Math.abs(t)<=er?(n=this.a*s,i=-1*this.a*this.lat0):(n=this.a*Math.sin(a)/Math.tan(t),i=this.a*(QA(t-this.lat0)+(1-Math.cos(a))/Math.tan(t)));else if(Math.abs(t)<=er)n=this.a*s,i=-1*this.ml0;else{var o=q4(this.a,this.e,Math.sin(t))/Math.tan(t);n=o*Math.sin(a),i=this.a*Qo(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+o*(1-Math.cos(a))}return r.x=n+this.x0,r.y=i+this.y0,r}function jZ(r){var e,t,n,i,a,s,o,l,u;if(n=r.x-this.x0,i=r.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=er)e=or(n/this.a+this.long0,this.over),t=0;else{s=this.lat0+i/this.a,o=n*n/this.a/this.a+s*s,l=s;var c;for(a=UN;a;--a)if(c=Math.tan(l),u=-1*(s*(l*c+1)-l-.5*(l*l+o)*c)/((l-s)/c-1),l+=u,Math.abs(u)<=er){t=l;break}e=or(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(t),this.over)}else if(Math.abs(i+this.ml0)<=er)t=0,e=or(this.long0+n/this.a,this.over);else{s=(this.ml0+i)/this.a,o=n*n/this.a/this.a+s*s,l=s;var h,f,A,d,p;for(a=UN;a;--a)if(p=this.e*Math.sin(l),h=Math.sqrt(1-p*p)*Math.tan(l),f=this.a*Qo(this.e0,this.e1,this.e2,this.e3,l),A=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),d=f/this.a,u=(s*(h*d+1)-d-.5*h*(d*d+o))/(this.es*Math.sin(2*l)*(d*d+o-2*s*d)/(4*h)+(s-d)*(h*A-2/Math.sin(2*l))-A),l-=u,Math.abs(u)<=er){t=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=or(this.long0+Math.asin(n*h/this.a)/Math.sin(t),this.over)}return r.x=e,r.y=t,r}var $Z=["Polyconic","American_Polyconic","poly"];const KZ={init:zZ,forward:qZ,inverse:jZ,names:$Z};function VZ(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function WZ(r){var e,t=r.x,n=r.y,i=n-this.lat0,a=t-this.long0,s=i/tv*1e-5,o=a,l=1,u=0;for(e=1;e<=10;e++)l=l*s,u=u+this.A[e]*l;var c=u,h=o,f=1,A=0,d,p,y=0,v=0;for(e=1;e<=6;e++)d=f*c-A*h,p=A*c+f*h,f=d,A=p,y=y+this.B_re[e]*f-this.B_im[e]*A,v=v+this.B_im[e]*f+this.B_re[e]*A;return r.x=v*this.a+this.x0,r.y=y*this.a+this.y0,r}function YZ(r){var e,t=r.x,n=r.y,i=t-this.x0,a=n-this.y0,s=a/this.a,o=i/this.a,l=1,u=0,c,h,f=0,A=0;for(e=1;e<=6;e++)c=l*s-u*o,h=u*s+l*o,l=c,u=h,f=f+this.C_re[e]*l-this.C_im[e]*u,A=A+this.C_im[e]*l+this.C_re[e]*u;for(var d=0;d<this.iterations;d++){var p=f,y=A,v,w,x=s,b=o;for(e=2;e<=6;e++)v=p*f-y*A,w=y*f+p*A,p=v,y=w,x=x+(e-1)*(this.B_re[e]*p-this.B_im[e]*y),b=b+(e-1)*(this.B_im[e]*p+this.B_re[e]*y);p=1,y=0;var C=this.B_re[1],S=this.B_im[1];for(e=2;e<=6;e++)v=p*f-y*A,w=y*f+p*A,p=v,y=w,C=C+e*(this.B_re[e]*p-this.B_im[e]*y),S=S+e*(this.B_im[e]*p+this.B_re[e]*y);var I=C*C+S*S;f=(x*C+b*S)/I,A=(b*C-x*S)/I}var B=f,T=A,M=1,F=0;for(e=1;e<=9;e++)M=M*B,F=F+this.D[e]*M;var N=this.lat0+F*tv*1e5,O=this.long0+T;return r.x=O,r.y=N,r}var XZ=["New_Zealand_Map_Grid","nzmg"];const ZZ={init:VZ,forward:WZ,inverse:YZ,names:XZ};function JZ(){}function eJ(r){var e=r.x,t=r.y,n=or(e-this.long0,this.over),i=this.x0+this.a*n,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return r.x=i,r.y=a,r}function tJ(r){r.x-=this.x0,r.y-=this.y0;var e=or(this.long0+r.x/this.a,this.over),t=2.5*(Math.atan(Math.exp(.8*r.y/this.a))-Math.PI/4);return r.x=e,r.y=t,r}var rJ=["Miller_Cylindrical","mill"];const nJ={init:JZ,forward:eJ,inverse:tJ,names:rJ};var iJ=20;function aJ(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=P4(this.es)}function sJ(r){var e,t,n=r.x,i=r.y;if(n=or(n-this.long0,this.over),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var a=this.n*Math.sin(i),s=iJ;s;--s){var o=(this.m*i+Math.sin(i)-a)/(this.m+Math.cos(i));if(i-=o,Math.abs(o)<er)break}e=this.a*this.C_x*n*(this.m+Math.cos(i)),t=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);t=this.a*bp(i,l,u,this.en),e=this.a*n*u/Math.sqrt(1-this.es*l*l)}return r.x=e,r.y=t,r}function oJ(r){var e,t,n,i;return r.x-=this.x0,n=r.x/this.a,r.y-=this.y0,e=r.y/this.a,this.sphere?(e/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(e))),this.m?e=TA((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=TA(Math.sin(e)/this.n)),n=or(n+this.long0,this.over),e=QA(e)):(e=U4(r.y/this.a,this.es,this.en),i=Math.abs(e),i<jt?(i=Math.sin(e),t=this.long0+r.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),n=or(t,this.over)):i-er<jt&&(n=this.long0)),r.x=n,r.y=e,r}var lJ=["Sinusoidal","sinu"];const uJ={init:aJ,forward:sJ,inverse:oJ,names:lJ};function cJ(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function hJ(r){for(var e=r.x,t=r.y,n=or(e-this.long0,this.over),i=t,a=Math.PI*Math.sin(t);;){var s=-(i+Math.sin(i)-a)/(1+Math.cos(i));if(i+=s,Math.abs(s)<er)break}i/=2,Math.PI/2-Math.abs(t)<er&&(n=0);var o=.900316316158*this.a*n*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return r.x=o,r.y=l,r}function fJ(r){var e,t;r.x-=this.x0,r.y-=this.y0,t=r.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var n=or(this.long0+r.x/(.900316316158*this.a*Math.cos(e)),this.over);n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var i=Math.asin(t);return r.x=n,r.y=i,r}var AJ=["Mollweide","moll"];const dJ={init:cJ,forward:hJ,inverse:fJ,names:AJ};function gJ(){Math.abs(this.lat1+this.lat2)<er||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=E1(this.es),this.e1=b1(this.es),this.e2=C1(this.es),this.e3=S1(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=nh(this.e,this.sin_phi,this.cos_phi),this.ml1=Qo(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<er?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=nh(this.e,this.sin_phi,this.cos_phi),this.ml2=Qo(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Qo(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function pJ(r){var e=r.x,t=r.y,n;if(this.sphere)n=this.a*(this.g-t);else{var i=Qo(this.e0,this.e1,this.e2,this.e3,t);n=this.a*(this.g-i)}var a=this.ns*or(e-this.long0,this.over),s=this.x0+n*Math.sin(a),o=this.y0+this.rh-n*Math.cos(a);return r.x=s,r.y=o,r}function mJ(r){r.x-=this.x0,r.y=this.rh-r.y+this.y0;var e,t,n,i;this.ns>=0?(t=Math.sqrt(r.x*r.x+r.y*r.y),e=1):(t=-Math.sqrt(r.x*r.x+r.y*r.y),e=-1);var a=0;if(t!==0&&(a=Math.atan2(e*r.x,e*r.y)),this.sphere)return i=or(this.long0+a/this.ns,this.over),n=QA(this.g-t/this.a),r.x=i,r.y=n,r;var s=this.g-t/this.a;return n=qx(s,this.e0,this.e1,this.e2,this.e3),i=or(this.long0+a/this.ns,this.over),r.x=i,r.y=n,r}var vJ=["Equidistant_Conic","eqdc"];const yJ={init:gJ,forward:pJ,inverse:mJ,names:vJ};function xJ(){this.R=this.a}function wJ(r){var e=r.x,t=r.y,n=or(e-this.long0,this.over),i,a;Math.abs(t)<=er&&(i=this.x0+this.R*n,a=this.y0);var s=TA(2*Math.abs(t/Math.PI));(Math.abs(n)<=er||Math.abs(Math.abs(t)-jt)<=er)&&(i=this.x0,t>=0?a=this.y0+Math.PI*this.R*Math.tan(.5*s):a=this.y0+Math.PI*this.R*-Math.tan(.5*s));var o=.5*Math.abs(Math.PI/n-n/Math.PI),l=o*o,u=Math.sin(s),c=Math.cos(s),h=c/(u+c-1),f=h*h,A=h*(2/u-1),d=A*A,p=Math.PI*this.R*(o*(h-d)+Math.sqrt(l*(h-d)*(h-d)-(d+l)*(f-d)))/(d+l);n<0&&(p=-p),i=this.x0+p;var y=l+h;return p=Math.PI*this.R*(A*y-o*Math.sqrt((d+l)*(l+1)-y*y))/(d+l),t>=0?a=this.y0+p:a=this.y0-p,r.x=i,r.y=a,r}function _J(r){var e,t,n,i,a,s,o,l,u,c,h,f,A;return r.x-=this.x0,r.y-=this.y0,h=Math.PI*this.R,n=r.x/h,i=r.y/h,a=n*n+i*i,s=-Math.abs(i)*(1+a),o=s-2*i*i+n*n,l=-2*s+1+2*i*i+a*a,A=i*i/l+(2*o*o*o/l/l/l-9*s*o/l/l)/27,u=(s-o*o/3/l)/l,c=2*Math.sqrt(-u/3),h=3*A/u/c,Math.abs(h)>1&&(h>=0?h=1:h=-1),f=Math.acos(h)/3,r.y>=0?t=(-c*Math.cos(f+Math.PI/3)-o/3/l)*Math.PI:t=-(-c*Math.cos(f+Math.PI/3)-o/3/l)*Math.PI,Math.abs(n)<er?e=this.long0:e=or(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(n*n-i*i)+a*a))/2/n,this.over),r.x=e,r.y=t,r}var EJ=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const bJ={init:xJ,forward:wJ,inverse:_J,names:EJ};function CJ(r,e,t,n,i,a){const s=n-e,o=Math.atan((1-a)*Math.tan(r)),l=Math.atan((1-a)*Math.tan(t)),u=Math.sin(o),c=Math.cos(o),h=Math.sin(l),f=Math.cos(l);let A=s,d,p=100,y,v,w,x,b,C,S,I,B,T,M,F,N,O;do{if(y=Math.sin(A),v=Math.cos(A),w=Math.sqrt(f*y*(f*y)+(c*h-u*f*v)*(c*h-u*f*v)),w===0)return{azi1:0,s12:0};x=u*h+c*f*v,b=Math.atan2(w,x),C=c*f*y/w,S=1-C*C,I=S!==0?x-2*u*h/S:0,B=a/16*S*(4+a*(4-3*S)),d=A,A=s+(1-B)*a*C*(b+B*w*(I+B*x*(-1+2*I*I)))}while(Math.abs(A-d)>1e-12&&--p>0);return p===0?{azi1:NaN,s12:NaN}:(T=S*(i*i-i*(1-a)*(i*(1-a)))/(i*(1-a)*(i*(1-a))),M=1+T/16384*(4096+T*(-768+T*(320-175*T))),F=T/1024*(256+T*(-128+T*(74-47*T))),N=F*w*(I+F/4*(x*(-1+2*I*I)-F/6*I*(-3+4*w*w)*(-3+4*I*I))),O=i*(1-a)*M*(b-N),{azi1:Math.atan2(f*y,c*h-u*f*v),s12:O})}function SJ(r,e,t,n,i,a){const s=Math.atan((1-a)*Math.tan(r)),o=Math.sin(s),l=Math.cos(s),u=Math.sin(t),c=Math.cos(t),h=Math.atan2(o,l*c),f=l*u,A=1-f*f,d=A*(i*i-i*(1-a)*(i*(1-a)))/(i*(1-a)*(i*(1-a))),p=1+d/16384*(4096+d*(-768+d*(320-175*d))),y=d/1024*(256+d*(-128+d*(74-47*d)));let v=n/(i*(1-a)*p),w,x=100,b,C,S,I;do b=Math.cos(2*h+v),C=Math.sin(v),S=Math.cos(v),I=y*C*(b+y/4*(S*(-1+2*b*b)-y/6*b*(-3+4*C*C)*(-3+4*b*b))),w=v,v=n/(i*(1-a)*p)+I;while(Math.abs(v-w)>1e-12&&--x>0);if(x===0)return{lat2:NaN,lon2:NaN};const B=o*C-l*S*c,T=Math.atan2(o*S+l*C*c,(1-a)*Math.sqrt(f*f+B*B)),M=Math.atan2(C*u,l*S-o*C*c),F=a/16*A*(4+a*(4-3*A)),N=M-(1-F)*a*f*(v+F*C*(b+F*S*(-1+2*b*b))),O=e+N;return{lat2:T,lon2:O}}function BJ(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function TJ(r){var e=r.x,t=r.y,n=Math.sin(r.y),i=Math.cos(r.y),a=or(e-this.long0,this.over),s,o,l,u,c,h,f,A,d,p,y;return this.sphere?Math.abs(this.sin_p12-1)<=er?(r.x=this.x0+this.a*(jt-t)*Math.sin(a),r.y=this.y0-this.a*(jt-t)*Math.cos(a),r):Math.abs(this.sin_p12+1)<=er?(r.x=this.x0+this.a*(jt+t)*Math.sin(a),r.y=this.y0+this.a*(jt+t)*Math.cos(a),r):(d=this.sin_p12*n+this.cos_p12*i*Math.cos(a),f=Math.acos(d),A=f?f/Math.sin(f):1,r.x=this.x0+this.a*A*i*Math.sin(a),r.y=this.y0+this.a*A*(this.cos_p12*n-this.sin_p12*i*Math.cos(a)),r):(s=E1(this.es),o=b1(this.es),l=C1(this.es),u=S1(this.es),Math.abs(this.sin_p12-1)<=er?(c=this.a*Qo(s,o,l,u,jt),h=this.a*Qo(s,o,l,u,t),r.x=this.x0+(c-h)*Math.sin(a),r.y=this.y0-(c-h)*Math.cos(a),r):Math.abs(this.sin_p12+1)<=er?(c=this.a*Qo(s,o,l,u,jt),h=this.a*Qo(s,o,l,u,t),r.x=this.x0+(c+h)*Math.sin(a),r.y=this.y0+(c+h)*Math.cos(a),r):Math.abs(e)<er&&Math.abs(t-this.lat0)<er?(r.x=r.y=0,r):(p=CJ(this.lat0,this.long0,t,e,this.a,this.f),y=p.azi1,r.x=p.s12*Math.sin(y),r.y=p.s12*Math.cos(y),r))}function NJ(r){r.x-=this.x0,r.y-=this.y0;var e,t,n,i,a,s,o,l,u,c,h,f,A,d,p,y;return this.sphere?(e=Math.sqrt(r.x*r.x+r.y*r.y),e>2*jt*this.a?void 0:(t=e/this.a,n=Math.sin(t),i=Math.cos(t),a=this.long0,Math.abs(e)<=er?s=this.lat0:(s=TA(i*this.sin_p12+r.y*n*this.cos_p12/e),o=Math.abs(this.lat0)-jt,Math.abs(o)<=er?this.lat0>=0?a=or(this.long0+Math.atan2(r.x,-r.y),this.over):a=or(this.long0-Math.atan2(-r.x,r.y),this.over):a=or(this.long0+Math.atan2(r.x*n,e*this.cos_p12*i-r.y*this.sin_p12*n),this.over)),r.x=a,r.y=s,r)):(l=E1(this.es),u=b1(this.es),c=C1(this.es),h=S1(this.es),Math.abs(this.sin_p12-1)<=er?(f=this.a*Qo(l,u,c,h,jt),e=Math.sqrt(r.x*r.x+r.y*r.y),A=f-e,s=qx(A/this.a,l,u,c,h),a=or(this.long0+Math.atan2(r.x,-1*r.y),this.over),r.x=a,r.y=s,r):Math.abs(this.sin_p12+1)<=er?(f=this.a*Qo(l,u,c,h,jt),e=Math.sqrt(r.x*r.x+r.y*r.y),A=e-f,s=qx(A/this.a,l,u,c,h),a=or(this.long0+Math.atan2(r.x,r.y),this.over),r.x=a,r.y=s,r):(d=Math.atan2(r.x,r.y),p=Math.sqrt(r.x*r.x+r.y*r.y),y=SJ(this.lat0,this.long0,d,p,this.a,this.f),r.x=y.lon2,r.y=y.lat2,r))}var IJ=["Azimuthal_Equidistant","aeqd"];const FJ={init:BJ,forward:TJ,inverse:NJ,names:IJ};function MJ(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function LJ(r){var e,t,n,i,a,s,o,l,u=r.x,c=r.y;return n=or(u-this.long0,this.over),e=Math.sin(c),t=Math.cos(c),i=Math.cos(n),s=this.sin_p14*e+this.cos_p14*t*i,a=1,(s>0||Math.abs(s)<=er)&&(o=this.a*a*t*Math.sin(n),l=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*t*i)),r.x=o,r.y=l,r}function DJ(r){var e,t,n,i,a,s,o;return r.x-=this.x0,r.y-=this.y0,e=Math.sqrt(r.x*r.x+r.y*r.y),t=TA(e/this.a),n=Math.sin(t),i=Math.cos(t),s=this.long0,Math.abs(e)<=er?(o=this.lat0,r.x=s,r.y=o,r):(o=TA(i*this.sin_p14+r.y*n*this.cos_p14/e),a=Math.abs(this.lat0)-jt,Math.abs(a)<=er?(this.lat0>=0?s=or(this.long0+Math.atan2(r.x,-r.y),this.over):s=or(this.long0-Math.atan2(-r.x,r.y),this.over),r.x=s,r.y=o,r):(s=or(this.long0+Math.atan2(r.x*n,e*this.cos_p14*i-r.y*this.sin_p14*n),this.over),r.x=s,r.y=o,r))}var kJ=["ortho"];const RJ={init:MJ,forward:LJ,inverse:DJ,names:kJ};var na={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},gi={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function OJ(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=jt-di/2?this.face=na.TOP:this.lat0<=-(jt-di/2)?this.face=na.BOTTOM:Math.abs(this.long0)<=di?this.face=na.FRONT:Math.abs(this.long0)<=jt+di?this.face=this.long0>0?na.RIGHT:na.LEFT:this.face=na.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function PJ(r){var e={x:0,y:0},t,n,i,a,s,o,l={value:0};if(r.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(r.y)):t=r.y,n=r.x,this.face===na.TOP)a=jt-t,n>=di&&n<=jt+di?(l.value=gi.AREA_0,i=n-jt):n>jt+di||n<=-(jt+di)?(l.value=gi.AREA_1,i=n>0?n-Ca:n+Ca):n>-(jt+di)&&n<=-di?(l.value=gi.AREA_2,i=n+jt):(l.value=gi.AREA_3,i=n);else if(this.face===na.BOTTOM)a=jt+t,n>=di&&n<=jt+di?(l.value=gi.AREA_0,i=-n+jt):n<di&&n>=-di?(l.value=gi.AREA_1,i=-n):n<-di&&n>=-(jt+di)?(l.value=gi.AREA_2,i=-n-jt):(l.value=gi.AREA_3,i=n>0?-n+Ca:-n-Ca);else{var u,c,h,f,A,d,p;this.face===na.RIGHT?n=Ng(n,+jt):this.face===na.BACK?n=Ng(n,+Ca):this.face===na.LEFT&&(n=Ng(n,-jt)),f=Math.sin(t),A=Math.cos(t),d=Math.sin(n),p=Math.cos(n),u=A*p,c=A*d,h=f,this.face===na.FRONT?(a=Math.acos(u),i=Fy(a,h,c,l)):this.face===na.RIGHT?(a=Math.acos(c),i=Fy(a,h,-u,l)):this.face===na.BACK?(a=Math.acos(-u),i=Fy(a,h,-c,l)):this.face===na.LEFT?(a=Math.acos(-c),i=Fy(a,h,u,l)):(a=i=0,l.value=gi.AREA_0)}return o=Math.atan(12/Ca*(i+Math.acos(Math.sin(i)*Math.cos(di))-jt)),s=Math.sqrt((1-Math.cos(a))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===gi.AREA_1?o+=jt:l.value===gi.AREA_2?o+=Ca:l.value===gi.AREA_3&&(o+=1.5*Ca),e.x=s*Math.cos(o),e.y=s*Math.sin(o),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,r.x=e.x,r.y=e.y,r}function UJ(r){var e={lam:0,phi:0},t,n,i,a,s,o,l,u,c,h={value:0};if(r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,n=Math.atan(Math.sqrt(r.x*r.x+r.y*r.y)),t=Math.atan2(r.y,r.x),r.x>=0&&r.x>=Math.abs(r.y)?h.value=gi.AREA_0:r.y>=0&&r.y>=Math.abs(r.x)?(h.value=gi.AREA_1,t-=jt):r.x<0&&-r.x>=Math.abs(r.y)?(h.value=gi.AREA_2,t=t<0?t+Ca:t-Ca):(h.value=gi.AREA_3,t+=jt),c=Ca/12*Math.tan(t),s=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),o=Math.atan(s),i=Math.cos(t),a=Math.tan(n),l=1-i*i*a*a*(1-Math.cos(Math.atan(1/Math.cos(o)))),l<-1?l=-1:l>1&&(l=1),this.face===na.TOP)u=Math.acos(l),e.phi=jt-u,h.value===gi.AREA_0?e.lam=o+jt:h.value===gi.AREA_1?e.lam=o<0?o+Ca:o-Ca:h.value===gi.AREA_2?e.lam=o-jt:e.lam=o;else if(this.face===na.BOTTOM)u=Math.acos(l),e.phi=u-jt,h.value===gi.AREA_0?e.lam=-o+jt:h.value===gi.AREA_1?e.lam=-o:h.value===gi.AREA_2?e.lam=-o-jt:e.lam=o<0?-o-Ca:-o+Ca;else{var f,A,d;f=l,c=f*f,c>=1?d=0:d=Math.sqrt(1-c)*Math.sin(o),c+=d*d,c>=1?A=0:A=Math.sqrt(1-c),h.value===gi.AREA_1?(c=A,A=-d,d=c):h.value===gi.AREA_2?(A=-A,d=-d):h.value===gi.AREA_3&&(c=A,A=d,d=-c),this.face===na.RIGHT?(c=f,f=-A,A=c):this.face===na.BACK?(f=-f,A=-A):this.face===na.LEFT&&(c=f,f=A,A=-c),e.phi=Math.acos(-d)-jt,e.lam=Math.atan2(A,f),this.face===na.RIGHT?e.lam=Ng(e.lam,-jt):this.face===na.BACK?e.lam=Ng(e.lam,-Ca):this.face===na.LEFT&&(e.lam=Ng(e.lam,+jt))}if(this.es!==0){var p,y,v;p=e.phi<0?1:0,y=Math.tan(e.phi),v=this.b/Math.sqrt(y*y+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-v*v)/(this.one_minus_f*v)),p&&(e.phi=-e.phi)}return e.lam+=this.long0,r.x=e.lam,r.y=e.phi,r}function Fy(r,e,t,n){var i;return r<er?(n.value=gi.AREA_0,i=0):(i=Math.atan2(e,t),Math.abs(i)<=di?n.value=gi.AREA_0:i>di&&i<=jt+di?(n.value=gi.AREA_1,i-=jt):i>jt+di||i<=-(jt+di)?(n.value=gi.AREA_2,i=i>=0?i-Ca:i+Ca):(n.value=gi.AREA_3,i+=jt)),i}function Ng(r,e){var t=r+e;return t<-Ca?t+=Pv:t>+Ca&&(t-=Pv),t}var QJ=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const GJ={init:OJ,forward:PJ,inverse:UJ,names:QJ};var fS=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Mm=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],KO=.8487,VO=1.3523,WO=ml/5,HJ=1/WO,pg=18,jx=function(r,e){return r[0]+e*(r[1]+e*(r[2]+e*r[3]))},zJ=function(r,e){return r[1]+e*(2*r[2]+e*3*r[3])};function qJ(r,e,t,n){for(var i=e;n;--n){var a=r(i);if(i-=a,Math.abs(a)<t)break}return i}function jJ(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function $J(r){var e=or(r.x-this.long0,this.over),t=Math.abs(r.y),n=Math.floor(t*WO);n<0?n=0:n>=pg&&(n=pg-1),t=ml*(t-HJ*n);var i={x:jx(fS[n],t)*e,y:jx(Mm[n],t)};return r.y<0&&(i.y=-i.y),i.x=i.x*this.a*KO+this.x0,i.y=i.y*this.a*VO+this.y0,i}function KJ(r){var e={x:(r.x-this.x0)/(this.a*KO),y:Math.abs(r.y-this.y0)/(this.a*VO)};if(e.y>=1)e.x/=fS[pg][0],e.y=r.y<0?-jt:jt;else{var t=Math.floor(e.y*pg);for(t<0?t=0:t>=pg&&(t=pg-1);;)if(Mm[t][0]>e.y)--t;else if(Mm[t+1][0]<=e.y)++t;else break;var n=Mm[t],i=5*(e.y-n[0])/(Mm[t+1][0]-n[0]);i=qJ(function(a){return(jx(n,a)-e.y)/zJ(n,a)},i,er,100),e.x/=jx(fS[t],i),e.y=(5*t+i)*Aa,r.y<0&&(e.y=-e.y)}return e.x=or(e.x+this.long0,this.over),e}var VJ=["Robinson","robin"];const WJ={init:jJ,forward:$J,inverse:KJ,names:VJ};function YJ(){this.name="geocent"}function XJ(r){var e=RO(r,this.es,this.a);return e}function ZJ(r){var e=OO(r,this.es,this.a,this.b);return e}var JJ=["Geocentric","geocentric","geocent","Geocent"];const eee={init:YJ,forward:XJ,inverse:ZJ,names:JJ};var lo={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},hm={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function tee(){if(Object.keys(hm).forEach((function(t){if(typeof this[t]>"u")this[t]=hm[t].def;else{if(hm[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);hm[t].num&&(this[t]=parseFloat(this[t]))}hm[t].degrees&&(this[t]=this[t]*Aa)}).bind(this)),Math.abs(Math.abs(this.lat0)-jt)<er?this.mode=this.lat0<0?lo.S_POLE:lo.N_POLE:Math.abs(this.lat0)<er?this.mode=lo.EQUIT:(this.mode=lo.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var r=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(r),this.sw=Math.sin(r)}function ree(r){r.x-=this.long0;var e=Math.sin(r.y),t=Math.cos(r.y),n=Math.cos(r.x),i,a;switch(this.mode){case lo.OBLIQ:a=this.sinph0*e+this.cosph0*t*n;break;case lo.EQUIT:a=t*n;break;case lo.S_POLE:a=-e;break;case lo.N_POLE:a=e;break}switch(a=this.pn1/(this.p-a),i=a*t*Math.sin(r.x),this.mode){case lo.OBLIQ:a*=this.cosph0*e-this.sinph0*t*n;break;case lo.EQUIT:a*=e;break;case lo.N_POLE:a*=-(t*n);break;case lo.S_POLE:a*=t*n;break}var s,o;return s=a*this.cg+i*this.sg,o=1/(s*this.sw*this.h1+this.cw),i=(i*this.cg-a*this.sg)*this.cw*o,a=s*o,r.x=i*this.a,r.y=a*this.a,r}function nee(r){r.x/=this.a,r.y/=this.a;var e={x:r.x,y:r.y},t,n,i;i=1/(this.pn1-r.y*this.sw),t=this.pn1*r.x*i,n=this.pn1*r.y*this.cw*i,r.x=t*this.cg+n*this.sg,r.y=n*this.cg-t*this.sg;var a=pl(r.x,r.y);if(Math.abs(a)<er)e.x=0,e.y=r.y;else{var s,o;switch(o=1-a*a*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/a+a/this.pn1),s=Math.sqrt(1-o*o),this.mode){case lo.OBLIQ:e.y=Math.asin(s*this.sinph0+r.y*o*this.cosph0/a),r.y=(s-this.sinph0*Math.sin(e.y))*a,r.x*=o*this.cosph0;break;case lo.EQUIT:e.y=Math.asin(r.y*o/a),r.y=s*a,r.x*=o;break;case lo.N_POLE:e.y=Math.asin(s),r.y=-r.y;break;case lo.S_POLE:e.y=-Math.asin(s);break}e.x=Math.atan2(r.x,r.y)}return r.x=e.x+this.long0,r.y=e.y,r}var iee=["Tilted_Perspective","tpers"];const aee={init:tee,forward:ree,inverse:nee,names:iee};function see(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var r=1-this.es,e=1/r;this.radius_p=Math.sqrt(r),this.radius_p2=r,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function oee(r){var e=r.x,t=r.y,n,i,a,s;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var o=this.radius_p/pl(this.radius_p*Math.cos(t),Math.sin(t));if(i=o*Math.cos(e)*Math.cos(t),a=o*Math.sin(e)*Math.cos(t),s=o*Math.sin(t),(this.radius_g-i)*i-a*a-s*s*this.radius_p_inv2<0)return r.x=Number.NaN,r.y=Number.NaN,r;n=this.radius_g-i,this.flip_axis?(r.x=this.radius_g_1*Math.atan(a/pl(s,n)),r.y=this.radius_g_1*Math.atan(s/n)):(r.x=this.radius_g_1*Math.atan(a/n),r.y=this.radius_g_1*Math.atan(s/pl(a,n)))}else this.shape==="sphere"&&(n=Math.cos(t),i=Math.cos(e)*n,a=Math.sin(e)*n,s=Math.sin(t),n=this.radius_g-i,this.flip_axis?(r.x=this.radius_g_1*Math.atan(a/pl(s,n)),r.y=this.radius_g_1*Math.atan(s/n)):(r.x=this.radius_g_1*Math.atan(a/n),r.y=this.radius_g_1*Math.atan(s/pl(a,n))));return r.x=r.x*this.a,r.y=r.y*this.a,r}function lee(r){var e=-1,t=0,n=0,i,a,s,o;if(r.x=r.x/this.a,r.y=r.y/this.a,this.shape==="ellipse"){this.flip_axis?(n=Math.tan(r.y/this.radius_g_1),t=Math.tan(r.x/this.radius_g_1)*pl(1,n)):(t=Math.tan(r.x/this.radius_g_1),n=Math.tan(r.y/this.radius_g_1)*pl(1,t));var l=n/this.radius_p;if(i=t*t+l*l+e*e,a=2*this.radius_g*e,s=a*a-4*i*this.C,s<0)return r.x=Number.NaN,r.y=Number.NaN,r;o=(-a-Math.sqrt(s))/(2*i),e=this.radius_g+o*e,t*=o,n*=o,r.x=Math.atan2(t,e),r.y=Math.atan(n*Math.cos(r.x)/e),r.y=Math.atan(this.radius_p_inv2*Math.tan(r.y))}else if(this.shape==="sphere"){if(this.flip_axis?(n=Math.tan(r.y/this.radius_g_1),t=Math.tan(r.x/this.radius_g_1)*Math.sqrt(1+n*n)):(t=Math.tan(r.x/this.radius_g_1),n=Math.tan(r.y/this.radius_g_1)*Math.sqrt(1+t*t)),i=t*t+n*n+e*e,a=2*this.radius_g*e,s=a*a-4*i*this.C,s<0)return r.x=Number.NaN,r.y=Number.NaN,r;o=(-a-Math.sqrt(s))/(2*i),e=this.radius_g+o*e,t*=o,n*=o,r.x=Math.atan2(t,e),r.y=Math.atan(n*Math.cos(r.x)/e)}return r.x=r.x+this.long0,r}var uee=["Geostationary Satellite View","Geostationary_Satellite","geos"];const cee={init:see,forward:oee,inverse:lee,names:uee};var rv=1.340264,nv=-.081106,iv=893e-6,av=.003796,$x=Math.sqrt(3)/2;function hee(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function fee(r){var e=or(r.x-this.long0,this.over),t=r.y,n=Math.asin($x*Math.sin(t)),i=n*n,a=i*i*i;return r.x=e*Math.cos(n)/($x*(rv+3*nv*i+a*(7*iv+9*av*i))),r.y=n*(rv+nv*i+a*(iv+av*i)),r.x=this.a*r.x+this.x0,r.y=this.a*r.y+this.y0,r}function Aee(r){r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a;var e=1e-9,t=12,n=r.y,i,a,s,o,l,u;for(u=0;u<t&&(i=n*n,a=i*i*i,s=n*(rv+nv*i+a*(iv+av*i))-r.y,o=rv+3*nv*i+a*(7*iv+9*av*i),n-=l=s/o,!(Math.abs(l)<e));++u);return i=n*n,a=i*i*i,r.x=$x*r.x*(rv+3*nv*i+a*(7*iv+9*av*i))/Math.cos(n),r.y=Math.asin(Math.sin(n)/$x),r.x=or(r.x+this.long0,this.over),r}var dee=["eqearth","Equal Earth","Equal_Earth"];const gee={init:hee,forward:fee,inverse:Aee,names:dee};var Gv=1e-10;function pee(){var r;if(this.phi1=this.lat1,Math.abs(this.phi1)<Gv)throw new Error;this.es?(this.en=P4(this.es),this.m1=bp(this.phi1,this.am1=Math.sin(this.phi1),r=Math.cos(this.phi1),this.en),this.am1=r/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=vee,this.forward=mee):(Math.abs(this.phi1)+Gv>=jt?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=xee,this.forward=yee)}function mee(r){var e=or(r.x-(this.long0||0),this.over),t=r.y,n,i,a;return n=this.am1+this.m1-bp(t,i=Math.sin(t),a=Math.cos(t),this.en),i=a*e/(n*Math.sqrt(1-this.es*i*i)),r.x=n*Math.sin(i),r.y=this.am1-n*Math.cos(i),r.x=this.a*r.x+(this.x0||0),r.y=this.a*r.y+(this.y0||0),r}function vee(r){r.x=(r.x-(this.x0||0))/this.a,r.y=(r.y-(this.y0||0))/this.a;var e,t,n,i;if(t=pl(r.x,r.y=this.am1-r.y),i=U4(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(i))<jt)e=Math.sin(i),n=t*Math.atan2(r.x,r.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-jt)<=Gv)n=0;else throw new Error;return r.x=or(n+(this.long0||0),this.over),r.y=QA(i),r}function yee(r){var e=or(r.x-(this.long0||0),this.over),t=r.y,n,i;return i=this.cphi1+this.phi1-t,Math.abs(i)>Gv?(r.x=i*Math.sin(n=e*Math.cos(t)/i),r.y=this.cphi1-i*Math.cos(n)):r.x=r.y=0,r.x=this.a*r.x+(this.x0||0),r.y=this.a*r.y+(this.y0||0),r}function xee(r){r.x=(r.x-(this.x0||0))/this.a,r.y=(r.y-(this.y0||0))/this.a;var e,t,n=pl(r.x,r.y=this.cphi1-r.y);if(t=this.cphi1+this.phi1-n,Math.abs(t)>jt)throw new Error;return Math.abs(Math.abs(t)-jt)<=Gv?e=0:e=n*Math.atan2(r.x,r.y)/Math.cos(t),r.x=or(e+(this.long0||0),this.over),r.y=QA(t),r}var wee=["bonne","Bonne (Werner lat_1=90)"];const _ee={init:pee,names:wee},QN={OBLIQUE:{forward:Bee,inverse:Nee},TRANSVERSE:{forward:Tee,inverse:Iee}},Kx={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function Eee(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=MO.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const r=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=Eu(r);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let t;const n=Object.keys(Kx),i=o=>{if(typeof this[o]>"u")return;const l=parseFloat(this[o])*Aa;if(isNaN(l))throw new Error("Invalid value for "+o+": "+this[o]);return l};for(let o=0;o<n.length;o++){const l=n[o],u=Kx[l],c=Object.entries(u);if(c.some(([f])=>typeof this[f]<"u")){t=u;for(let f=0;f<c.length;f++){const[A,d]=c[f],p=i(A);if(typeof p>"u")throw new Error("Missing parameter: "+A+".");this[d]=p}break}}if(!t)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:a,phip:s}=See(this,t);this.lamp=a,Math.abs(s)>er?(this.cphip=Math.cos(s),this.sphip=Math.sin(s),this.projectionType=QN.OBLIQUE):this.projectionType=QN.TRANSVERSE}function bee(r){return this.projectionType.forward(this,r)}function Cee(r){return this.projectionType.inverse(this,r)}function See(r,e){let t,n;if(e===Kx.ROTATE){let i=r.oLongC,a=r.oLatC,s=r.oAlpha;if(Math.abs(Math.abs(a)-jt)<=er)throw new Error("Invalid value for o_lat_c: "+r.o_lat_c+" should be < 90°");n=i+Math.atan2(-1*Math.cos(s),-1*Math.sin(s)*Math.sin(a)),t=Math.asin(Math.cos(a)*Math.sin(s))}else if(e===Kx.NEW_POLE)n=r.oLongP,t=r.oLatP;else{let i=r.oLong1,a=r.oLat1,s=r.oLong2,o=r.oLat2,l=Math.abs(a);if(Math.abs(a)>jt-er)throw new Error("Invalid value for o_lat_1: "+r.o_lat_1+" should be < 90°");if(Math.abs(o)>jt-er)throw new Error("Invalid value for o_lat_2: "+r.o_lat_2+" should be < 90°");if(Math.abs(a-o)<er)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(l<er)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");n=Math.atan2(Math.cos(a)*Math.sin(o)*Math.cos(i)-Math.sin(a)*Math.cos(o)*Math.cos(s),Math.sin(a)*Math.cos(o)*Math.sin(s)-Math.cos(a)*Math.sin(o)*Math.sin(i)),t=Math.atan(-1*Math.cos(n-i)/Math.tan(a))}return{lamp:n,phip:t}}function Bee(r,e){let{x:t,y:n}=e;t+=r.long0;const i=Math.cos(t),a=Math.sin(n),s=Math.cos(n);e.x=or(Math.atan2(s*Math.sin(t),r.sphip*s*i+r.cphip*a)+r.lamp),e.y=Math.asin(r.sphip*a-r.cphip*s*i);const o=r.obliqueProjection.forward(e);return r.isIdentity&&(o.x*=ml,o.y*=ml),o}function Tee(r,e){let{x:t,y:n}=e;t+=r.long0;const i=Math.cos(n),a=Math.cos(t);e.x=or(Math.atan2(i*Math.sin(t),Math.sin(n))+r.lamp),e.y=Math.asin(-1*i*a);const s=r.obliqueProjection.forward(e);return r.isIdentity&&(s.x*=ml,s.y*=ml),s}function Nee(r,e){r.isIdentity&&(e.x*=Aa,e.y*=Aa);const t=r.obliqueProjection.inverse(e);let{x:n,y:i}=t;if(n<Number.MAX_VALUE){n-=r.lamp;const a=Math.cos(n),s=Math.sin(i),o=Math.cos(i);e.x=Math.atan2(o*Math.sin(n),r.sphip*o*a-r.cphip*s),e.y=Math.asin(r.sphip*s+r.cphip*o*a)}return e.x=or(e.x+r.long0),e}function Iee(r,e){r.isIdentity&&(e.x*=Aa,e.y*=Aa);const t=r.obliqueProjection.inverse(e);let{x:n,y:i}=t;if(n<Number.MAX_VALUE){const a=Math.cos(i);n-=r.lamp,e.x=Math.atan2(a*Math.sin(n),-1*Math.sin(i)),e.y=Math.asin(a*Math.cos(n))}return e.x=or(e.x+r.long0),e}var Fee=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const Mee={init:Eee,forward:bee,inverse:Cee,names:Fee};function Lee(r){r.Proj.projections.add(ex),r.Proj.projections.add(tx),r.Proj.projections.add(wX),r.Proj.projections.add(IX),r.Proj.projections.add(kX),r.Proj.projections.add(QX),r.Proj.projections.add($X),r.Proj.projections.add(XX),r.Proj.projections.add(rZ),r.Proj.projections.add(oZ),r.Proj.projections.add(xZ),r.Proj.projections.add(SZ),r.Proj.projections.add(FZ),r.Proj.projections.add(OZ),r.Proj.projections.add(HZ),r.Proj.projections.add(KZ),r.Proj.projections.add(ZZ),r.Proj.projections.add(nJ),r.Proj.projections.add(uJ),r.Proj.projections.add(dJ),r.Proj.projections.add(yJ),r.Proj.projections.add(bJ),r.Proj.projections.add(FJ),r.Proj.projections.add(RJ),r.Proj.projections.add(GJ),r.Proj.projections.add(WJ),r.Proj.projections.add(eee),r.Proj.projections.add(aee),r.Proj.projections.add(cee),r.Proj.projections.add(gee),r.Proj.projections.add(_ee),r.Proj.projections.add(Mee)}const Go=Object.assign(PY,{defaultDatum:"WGS84",Proj:Eu,WGS84:new Eu("WGS84"),Point:ep,toPoint:PO,defs:Ds,nadgrid:xY,transform:zx,mgrs:UY,version:"__VERSION__"});Lee(Go);var YO,GN=()=>new DecompressionStream("deflate-raw");try{GN(),YO=async r=>{let e=GN(),t=e.writable.getWriter(),n=e.readable.getReader(),i,a=[],s=0,o=0,l;for(t.write(r),t.close();!(l=await n.read()).done;)i=l.value,a.push(i),s+=i.length;return!a[1]&&i||(i=new Uint8Array(s),a.map(u=>(i.set(u,o),o+=u.length))),i}}catch{}var Dee=new TextDecoder,cb=r=>{throw new Error("but-unzip~"+r)},HN=r=>Dee.decode(r);function*kee(r,e=YO){let t=r.length-20,n=Math.max(t-65516,2);for(;(t=r.lastIndexOf(80,t-1))!==-1&&!(r[t+1]===75&&r[t+2]===5&&r[t+3]===6)&&t>n;);t===-1&&cb(2);let i=(u,c)=>r.subarray(t+=u,t+=c),a=new DataView(r.buffer,r.byteOffset),s=u=>a.getUint16(u+t,!0),o=u=>a.getUint32(u+t,!0),l=s(10);for(l!==s(8)&&cb(3),t=o(16);l--;){let u=s(10),c=s(30),h=s(32),f=o(20),A=o(42),d=HN(i(46,s(28))),p=HN(i(c,h)),y=t,v;t=A,v=i(30+s(26)+s(28),f),yield{filename:d,comment:p,read:()=>u&8?e(v):u?cb(1):v},t=y}}const Ree=/.+\.(shp|dbf|json|prj|cpg)$/i,Oee=async r=>{const e={},t=[];for(const a of kee(r))Ree.test(a.filename)&&t.push(Promise.resolve(a.read()).then(s=>e[a.filename]=s));await Promise.all(t);const n={},i=new TextDecoder;for(const[a,s]of Object.entries(e))a.slice(-3).toLowerCase()==="shp"||a.slice(-3).toLowerCase()==="dbf"?n[a]=new DataView(s.buffer,s.byteOffset,s.byteLength):n[a]=i.decode(s);return n},Pee=globalThis.URL,Uee=(r,e)=>{if(!e)return r;const t=new Pee(r);return t.pathname=`${t.pathname}.${e}`,t.href};async function Hv(r,e){const t=Uee(r,e),n=e==="prj"||e==="cpg";try{const i=await fetch(t);if(i.status>399)throw new Error(i.statusText);if(n)return i.text();const a=await i.arrayBuffer();return new DataView(a)}catch(i){if(n||e==="dbf")return!1;throw i}}function Qee(r){let e=0,t=1;const n=r.length;let i,a;const s=[r[0][0],r[0][1],r[0][0],r[0][1]];for(;t<n;)i=a||r[0],a=r[t],e+=(a[0]-i[0])*(a[1]+i[1]),t++,a[0]<s[0]&&(s[0]=a[0]),a[1]<s[1]&&(s[1]=a[1]),a[0]>s[2]&&(s[2]=a[0]),a[1]>s[3]&&(s[3]=a[1]);return{ring:r,clockWise:e>0,bbox:s,children:[]}}function zN(r,e){return!(r.bbox[0]>e.bbox[0]||r.bbox[1]>e.bbox[1]||r.bbox[2]<e.bbox[2]||r.bbox[3]<e.bbox[3])}function XO(r,e=!1){const t=[],n=[];for(const s of r){const o=Qee(s);o.clockWise!==e?t.push(o):n.push(o)}const i=[];for(const s of n){let o;for(const l of t)zN(l,s)&&(o?zN(o,l)&&(o=l):o=l);o?o.children.push(s.ring):i.push(s)}if(e)return{outers:t,orphens:i};if(i.length&&!e){const s=XO(r,!0);if(s.orphens.length===0){const o=[];for(const l of s.outers)o.push([l.ring.toReversed()].concat(l.children.map(u=>u.toReversed())));return o}}const a=[];for(const s of t)a.push([s.ring].concat(s.children));return a}Na.prototype.parsePoint=function(r){return{type:"Point",coordinates:this.parseCoord(r,0)}};Na.prototype.parseZPoint=function(r){const e=this.parsePoint(r);return e.coordinates.push(r.getFloat64(16,!0)),e};Na.prototype.parsePointArray=function(r,e,t){const n=[];let i=0;for(;i<t;)n.push(this.parseCoord(r,e)),e+=16,i++;return n};Na.prototype.parseZPointArray=function(r,e,t,n){let i=0;for(;i<t;)n[i].push(r.getFloat64(e,!0)),i++,e+=8;return n};Na.prototype.parseArrayGroup=function(r,e,t,n,i){const a=[];let s=0,o,l=0,u;for(;s<n;)s++,t+=4,o=l,s===n?l=i:l=r.getInt32(t,!0),u=l-o,u&&(a.push(this.parsePointArray(r,e,u)),e+=u<<4);return a};Na.prototype.parseZArrayGroup=function(r,e,t,n){let i=0;for(;i<t;)n[i]=this.parseZPointArray(r,e,n[i].length,n[i]),e+=n[i].length<<3,i++;return n};Na.prototype.parseMultiPoint=function(r){const e={},t=r.getInt32(32,!0);if(!t)return null;const n=this.parseCoord(r,0),i=this.parseCoord(r,16);e.bbox=[n[0],n[1],i[0],i[1]];const a=36;return t===1?(e.type="Point",e.coordinates=this.parseCoord(r,a)):(e.type="MultiPoint",e.coordinates=this.parsePointArray(r,a,t)),e};Na.prototype.parseZMultiPoint=function(r){const e=this.parseMultiPoint(r);if(!e)return null;let t;if(e.type==="Point")return e.coordinates.push(r.getFloat64(72,!0)),e;t=e.coordinates.length;const n=52+(t<<4);return e.coordinates=this.parseZPointArray(r,n,t,e.coordinates),e};Na.prototype.parsePolyline=function(r){const e={},t=r.getInt32(32,!0);if(!t)return null;const n=this.parseCoord(r,0),i=this.parseCoord(r,16);e.bbox=[n[0],n[1],i[0],i[1]];const a=r.getInt32(36,!0);let s,o;return t===1?(e.type="LineString",s=44,e.coordinates=this.parsePointArray(r,s,a)):(e.type="MultiLineString",s=40+(t<<2),o=40,e.coordinates=this.parseArrayGroup(r,s,o,t,a)),e};Na.prototype.parseZPolyline=function(r){const e=this.parsePolyline(r);if(!e)return null;const t=e.coordinates.length;let n;return e.type==="LineString"?(n=60+(t<<4),e.coordinates=this.parseZPointArray(r,n,t,e.coordinates),e):(n=56+(e.coordinates.reduce(function(a,s){return a+s.length},0)<<4)+(t<<2),e.coordinates=this.parseZArrayGroup(r,n,t,e.coordinates),e)};Na.prototype.polyFuncs=function(r){return r&&(r.type==="LineString"?(r.type="Polygon",r.coordinates=[r.coordinates],r):(r.coordinates=XO(r.coordinates),r.coordinates.length===1?(r.type="Polygon",r.coordinates=r.coordinates[0],r):(r.type="MultiPolygon",r)))};Na.prototype.parsePolygon=function(r){return this.polyFuncs(this.parsePolyline(r))};Na.prototype.parseZPolygon=function(r){return this.polyFuncs(this.parseZPolyline(r))};const qN={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function Gee(r){return r?function(e,t){const n=[e.getFloat64(t,!0),e.getFloat64(t+8,!0)];return r.inverse(n)}:function(e,t){return[e.getFloat64(t,!0),e.getFloat64(t+8,!0)]}}function Na(r,e){if(!(this instanceof Na))return new Na(r,e);this.buffer=r,this.headers=this.parseHeader(),this.shpFuncs(e),this.rows=this.getRows()}Na.prototype.shpFuncs=function(r){let e=this.headers.shpCode;if(e>20&&(e-=20),!(e in qN))throw new Error(`I don't know shp type "${e}"`);this.parseFunc=this[qN[e]],this.parseCoord=Gee(r)};Na.prototype.getShpCode=function(){return this.parseHeader().shpCode};Na.prototype.parseHeader=function(){const r=this.buffer;return{length:r.getInt32(24)<<1,version:r.getInt32(28,!0),shpCode:r.getInt32(32,!0),bbox:[r.getFloat64(36,!0),r.getFloat64(44,!0),r.getFloat64(52,!0),r.getFloat64(60,!0)]}};Na.prototype.getRows=function(){let r=100;const e=this.buffer.byteLength-8,t=[];let n;for(;r<=e&&(n=this.getRow(r),!!n);)r+=8,r+=n.len,n.type?t.push(this.parseFunc(n.data)):t.push(null);return t};Na.prototype.getRow=function(r){const e=this.buffer.getInt32(r),t=this.buffer.getInt32(r+4)<<1;if(t===0)return{id:e,len:t,type:0};if(!(r+t+8>this.buffer.byteLength))return{id:e,len:t,data:new DataView(this.buffer.buffer,this.buffer.byteOffset+r+12,t-4),type:this.buffer.getInt32(r+8,!0)}};function j4(r,e){return new Na(r,e).rows}var Hee=/^(?:ANSI\s)?(\d+)$/m;function ZO(r,e){if(!r)return n;try{new TextDecoder(r.trim())}catch{var t=Hee.exec(r);return t&&!e?ZO("windows-"+t[1],!0):(r=void 0,n)}return n;function n(i){var a=new TextDecoder(r||void 0),s=a.decode(i,{stream:!0})+a.decode();return s.replace(/\0/g,"").trim()}}function zee(r){var e={};return e.lastUpdated=new Date(r.getUint8(1)+1900,r.getUint8(2),r.getUint8(3)),e.records=r.getUint32(4,!0),e.headerLen=r.getUint16(8,!0),e.recLen=r.getUint16(10,!0),e}function qee(r,e,t){for(var n=[],i=32;i<e&&(n.push({name:t(new Uint8Array(r.buffer.slice(r.byteOffset+i,r.byteOffset+i+11))),dataType:String.fromCharCode(r.getUint8(i+11)),len:r.getUint8(i+16),decimal:r.getUint8(i+17)}),r.getUint8(i+32)!==13);)i+=32;return n}function jee(r,e,t,n,i){const a=new Uint8Array(r.buffer.slice(r.byteOffset+e,r.byteOffset+e+t));var s=i(a);switch(n){case"N":case"F":case"O":return parseFloat(s,10);case"D":return new Date(s.slice(0,4),parseInt(s.slice(4,6),10)-1,s.slice(6,8));case"L":return s.toLowerCase()==="y"||s.toLowerCase()==="t";default:return s}}function $ee(r,e,t,n){for(var i={},a=0,s=t.length,o,l;a<s;)l=t[a],o=jee(r,e,l.len,l.dataType,n),e+=l.len,typeof o<"u"&&(i[l.name]=o),a++;return i}function $4(r,e){for(var t=ZO(e),n=zee(r),i=qee(r,n.headerLen-1,t),a=(i.length+1<<5)+2,s=n.recLen,o=n.records,l=[];o;)l.push($ee(r,a,i,t)),a+=s,o--;return l}const Kee=globalThis.URL,Vee=r=>{if(!r)throw new Error("forgot to pass buffer");if(tp(r))return new Uint8Array(r);if(tp(r.buffer))return r.BYTES_PER_ELEMENT===1?r:new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("invalid buffer like object")},Wee=new TextDecoder,JO=r=>{if(r){if(typeof r=="string")return r;if(tp(r)||ArrayBuffer.isView(r)||K4(r))return Wee.decode(r)}},eP=r=>{if(!r)throw new Error("forgot to pass buffer");if(K4(r))return r;if(tp(r))return new DataView(r);if(tp(r.buffer))return new DataView(r.buffer,r.byteOffset,r.byteLength);throw new Error("invalid buffer like object")};function tp(r){return r instanceof globalThis.ArrayBuffer||Object.prototype.toString.call(r)==="[object ArrayBuffer]"}function K4(r){return r instanceof globalThis.DataView||Object.prototype.toString.call(r)==="[object DataView]"}const V4=function([r,e]){const t={};t.type="FeatureCollection",t.features=[];let n=0;const i=r.length;for(e||(e=[]);n<i;)t.features.push({type:"Feature",geometry:r[n],properties:e[n]||{}}),n++;return t},tP=async function(r,e){let t;r=Vee(r);const n=await Oee(r),i=[];e=e||[];for(t in n)t.indexOf("__MACOSX")===-1&&(t.slice(-4).toLowerCase()===".shp"?(i.push(t.slice(0,-4)),n[t.slice(0,-3)+t.slice(-3).toLowerCase()]=n[t]):t.slice(-4).toLowerCase()===".prj"?n[t.slice(0,-3)+t.slice(-3).toLowerCase()]=Go(n[t]):t.slice(-5).toLowerCase()===".json"||e.indexOf(t.split(".").pop())>-1?i.push(t.slice(0,-3)+t.slice(-3).toLowerCase()):(t.slice(-4).toLowerCase()===".dbf"||t.slice(-4).toLowerCase()===".cpg")&&(n[t.slice(0,-3)+t.slice(-3).toLowerCase()]=n[t]));if(!i.length)throw new Error("no layers founds");const a=i.map(function(s){let o,l;const u=s.lastIndexOf(".");return u>-1&&s.slice(u).indexOf("json")>-1?(o=JSON.parse(n[s]),o.fileName=s.slice(0,u)):e.indexOf(s.slice(u+1))>-1?(o=n[s],o.fileName=s):(n[s+".dbf"]&&(l=$4(n[s+".dbf"],n[s+".cpg"])),o=V4([j4(n[s+".shp"],n[s+".prj"]),l]),o.fileName=s),o});return a.length===1?a[0]:a};async function Yee(r,e){const t=await Hv(r);return tP(t,e)}const Xee=async r=>{const e=await Promise.all([Hv(r,"shp"),Hv(r,"prj")]);let t=!1;try{e[1]&&(t=Go(e[1]))}catch{t=!1}return j4(e[0],t)},Zee=async r=>{const[e,t]=await Promise.all([Hv(r,"dbf"),Hv(r,"cpg")]);if(e)return $4(e,t)},jN=(r,e)=>{var n;return new Kee(r,(n=globalThis==null?void 0:globalThis.document)==null?void 0:n.location).pathname.slice(-4).toLowerCase()===e},Jee=({shp:r,dbf:e,cpg:t,prj:n})=>{const i=[ete(r,n)];return e&&i.push(tte(e,t)),V4(i)},hb=async function(r,e){if(typeof r!="string"){if(tp(r)||ArrayBuffer.isView(r)||K4(r))return tP(r);if(r.shp)return Jee(r);throw new TypeError("must be a string, some sort of Buffer, or an object with at least a .shp property")}if(jN(r,".zip"))return Yee(r,e);jN(r,".shp")&&(r=r.slice(0,-4));const t=await Promise.all([Xee(r),Zee(r)]);return V4(t)},ete=function(r,e){if(r=eP(r),e=JO(e),typeof e=="string")try{e=Go(e)}catch{e=!1}return j4(r,e)},tte=function(r,e){return r=eP(r),e=JO(e),$4(r,e)};function rP(r){const e=Object.keys(r.defs),t=e.length;let n,i;for(n=0;n<t;++n){const a=e[n];if(!Ci(a)){const s=r.defs(a);let o=s.units;!o&&s.projName==="longlat"&&(o="degrees"),hR(new z5({code:a,axisOrientation:s.axis,metersPerUnit:s.to_meter,units:o}))}}for(n=0;n<t;++n){const a=e[n],s=Ci(a);for(i=0;i<t;++i){const o=e[i],l=Ci(o);if(!J6(a,o))if(r.defs[a]===r.defs[o])qC([s,l]);else{const u=r(a,o);vj(s,l,FT(s,l,u.forward),FT(l,s,u.inverse))}}}}Go.defs("EPSG:5179","+proj=tmerc +lat_0=38 +lon_0=127.5 +k=0.9996 +x_0=1000000 +y_0=2000000 +ellps=GRS80 +units=m +no_defs");Go.defs("EPSG:5186","+proj=tmerc +lat_0=38 +lon_0=127 +k=1 +x_0=200000 +y_0=600000 +ellps=GRS80 +units=m +no_defs");Go.defs("EPSG:5187","+proj=tmerc +lat_0=38 +lon_0=129 +k=1 +x_0=200000 +y_0=600000 +ellps=GRS80 +units=m +no_defs");Go.defs("EPSG:5188","+proj=tmerc +lat_0=38 +lon_0=131 +k=1 +x_0=200000 +y_0=600000 +ellps=GRS80 +units=m +no_defs");Go.defs("EPSG:2097","+proj=tmerc +lat_0=38 +lon_0=127 +k=1 +x_0=200000 +y_0=500000 +ellps=bessel +units=m +no_defs +towgs84=-115.80,474.99,674.11,1.16,-2.31,-1.63,6.43");Go.defs("EPSG:5174","+proj=tmerc +lat_0=38 +lon_0=127.0028902777778 +k=1 +x_0=200000 +y_0=500000 +ellps=bessel +units=m +no_defs +towgs84=-115.80,474.99,674.11,1.16,-2.31,-1.63,6.43");rP(Go);class rte{constructor(){this.format=new rs,this.pendingFiles=new Map}async loadFromFile(e){const t=e.name.split(".").pop().toLowerCase();if(t==="zip")return this.loadFromZip(e);if(t==="shp"||t==="dbf"||t==="shx"||t==="prj")return this.handleShapefileComponent(e);throw new Error("지원하지 않는 파일 형식입니다.")}async handleShapefileComponent(e){const t=e.name.replace(/\.(shp|dbf|shx|prj)$/i,""),n=e.name.split(".").pop().toLowerCase();this.pendingFiles.has(t)||this.pendingFiles.set(t,{});const i=this.pendingFiles.get(t);if(n==="prj"?i.prj=await this.readFileAsText(e):i[n]=await this.readFileAsArrayBuffer(e),i.shp&&i.dbf){const a=await this.loadFromComponents(i,t);return this.pendingFiles.delete(t),a}return i.shp&&!i.dbf&&!i.timer&&(i.timer=setTimeout(async()=>{if(this.pendingFiles.has(t)){const a=this.pendingFiles.get(t);if(a.shp){console.warn("DBF 파일 없이 SHP 로드");try{await this.loadFromComponents(a,t)}catch(s){console.error("SHP 로드 실패:",s)}this.pendingFiles.delete(t)}}},2e3)),null}readFileAsArrayBuffer(e){return new Promise((t,n)=>{const i=new FileReader;i.onload=a=>t(a.target.result),i.onerror=()=>n(new Error("파일 읽기 실패")),i.readAsArrayBuffer(e)})}readFileAsText(e){return new Promise((t,n)=>{const i=new FileReader;i.onload=a=>t(a.target.result),i.onerror=()=>n(new Error("파일 읽기 실패")),i.readAsText(e)})}detectProjection(e){if(!e)return"EPSG:4326";const t=e.toUpperCase();if(t.includes("KOREA")||t.includes("KOREAN")){if(t.includes("2000")&&t.includes("CENTRAL"))return"EPSG:5186";if(t.includes("2000")&&t.includes("WEST"))return"EPSG:5185";if(t.includes("2000")&&t.includes("EAST"))return"EPSG:5187";if(t.includes("UNIFIED")||t.includes("5179"))return"EPSG:5179";if(t.includes("BESSEL"))return"EPSG:2097"}if(t.includes("UTM")&&t.includes("52N"))return"EPSG:32652";if(t.includes("UTM")&&t.includes("51N"))return"EPSG:32651";if(t.includes("WGS")&&t.includes("84"))return"EPSG:4326";if(t.includes("GRS")&&t.includes("80")&&t.includes("TRANSVERSE")){if(t.includes("127.5")||t.includes("127.50"))return"EPSG:5179";if(t.includes("127.0")||t.includes("127"))return"EPSG:5186"}return"EPSG:4326"}guessProjectionFromExtent(e){if(!e.features||e.features.length===0)return"EPSG:4326";let t=null;const i=e.features[0].geometry;if(i.type==="Point"?t=i.coordinates:i.type==="LineString"||i.type==="MultiPoint"?t=i.coordinates[0]:i.type==="Polygon"||i.type==="MultiLineString"?t=i.coordinates[0][0]:i.type==="MultiPolygon"&&(t=i.coordinates[0][0][0]),!t)return"EPSG:4326";const[a,s]=t;return a>1e5&&a<15e5&&s>1e5&&s<25e5?a>8e5&&a<13e5&&s>14e5&&s<22e5?"EPSG:5179":(a>1e5&&a<4e5&&s>3e5&&s<8e5,"EPSG:5186"):(a>124&&a<132&&s>33&&s<43,"EPSG:4326")}async loadFromComponents(e,t){const n=(await jl(async()=>{const{default:l}=await Promise.resolve().then(()=>$6);return{default:l}},void 0)).default,i=new n;e.shp&&i.file(t+".shp",e.shp),e.dbf&&i.file(t+".dbf",e.dbf),e.shx&&i.file(t+".shx",e.shx),e.prj&&i.file(t+".prj",e.prj);const a=await i.generateAsync({type:"arraybuffer"}),s=await hb(a);let o=this.detectProjection(e.prj);if(o==="EPSG:4326"){const l=Array.isArray(s)?s[0]:s;o=this.guessProjectionFromExtent(l)}if(console.log("감지된 좌표계:",o),Array.isArray(s)){const l=[];for(let u=0;u<s.length;u++){const c=this.createLayerFromGeoJSON(s[u],t+"_"+(u+1),o);l.push(c)}return l}else return this.createLayerFromGeoJSON(s,t,o)}async loadFromZip(e){return new Promise((t,n)=>{const i=new FileReader;i.onload=async a=>{try{const s=a.target.result,l=await(await jl(async()=>{const{default:A}=await Promise.resolve().then(()=>$6);return{default:A}},void 0)).default.loadAsync(s);let u=null;for(const A of Object.keys(l.files))if(A.toLowerCase().endsWith(".prj")){u=await l.files[A].async("string");break}const c=await hb(s);let h=this.detectProjection(u);if(h==="EPSG:4326"){const A=Array.isArray(c)?c[0]:c;h=this.guessProjectionFromExtent(A)}console.log("감지된 좌표계:",h);const f=e.name.replace(".zip","");if(Array.isArray(c)){const A=[];for(let d=0;d<c.length;d++){const p=this.createLayerFromGeoJSON(c[d],f+"_"+(d+1),h);A.push(p)}t(A)}else{const A=this.createLayerFromGeoJSON(c,f,h);t(A)}}catch(s){n(new Error("Shapefile 파싱 실패: "+s.message))}},i.onerror=()=>n(new Error("파일 읽기 실패")),i.readAsArrayBuffer(e)})}createLayerFromGeoJSON(e,t,n="EPSG:4326"){const i=this.format.readFeatures(e,{dataProjection:n,featureProjection:"EPSG:3857"});if(i.length===0)throw new Error("Shapefile에 피처가 없습니다.");const a=pt.addLayer({name:t,type:"vector",features:i});return setTimeout(()=>{pt.zoomToLayer(a)},100),a}async loadFromUrl(e,t="새 레이어"){try{const n=await hb(e);if(Array.isArray(n)){const i=[];for(let a=0;a<n.length;a++){const s=this.createLayerFromGeoJSON(n[a],t+"_"+(a+1));i.push(s)}return i}else return this.createLayerFromGeoJSON(n,t)}catch(n){throw new Error("Shapefile 로드 실패: "+n.message)}}}const nP=new rte;var Os=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Af(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function nte(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var iP={exports:{}};const nx={},ite=Object.freeze(Object.defineProperty({__proto__:null,default:nx},Symbol.toStringTag,{value:"Module"})),AS=nte(ite);(function(r,e){var t=void 0,n=function(i){return t||(t=new Promise(function(a,s){var o=typeof i<"u"?i:{},l=o.onAbort;o.onAbort=function(q){s(new Error(q)),l&&l(q)},o.postRun=o.postRun||[],o.postRun.push(function(){a(o)}),r=void 0;var u;u||(u=typeof o<"u"?o:{});var c=typeof window=="object",h=typeof WorkerGlobalScope<"u",f=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";u.onRuntimeInitialized=function(){function q(tt,St){switch(typeof St){case"boolean":Ut(tt,St?1:0);break;case"number":je(tt,St);break;case"string":ut(tt,St,-1,-1);break;case"object":if(St===null)Xe(tt);else if(St.length!=null){var Yt=_c(St,Mu);_t(tt,Yt,St.length,-1),Ec(Yt)}else nr(tt,"Wrong API use : tried to return a value of an unknown type ("+St+").",-1);break;default:Xe(tt)}}function ee(tt,St){for(var Yt=[],ur=0;ur<tt;ur+=1){var _r=Y(St+4*ur,"i32"),Gr=Bc(_r);if(Gr===1||Gr===2)_r=ye(_r);else if(Gr===3)_r=Du(_r);else if(Gr===4){Gr=_r,_r=Jl(Gr),Gr=V(Gr);for(var $i=new Uint8Array(_r),Ni=0;Ni<_r;Ni+=1)$i[Ni]=M[Gr+Ni];_r=$i}else _r=null;Yt.push(_r)}return Yt}function ve(tt,St){this.Qa=tt,this.db=St,this.Oa=1,this.lb=[]}function Ne(tt,St){if(this.db=St,St=Ge(tt)+1,this.eb=Fr(St),this.eb===null)throw Error("Unable to allocate memory for the SQL string");Ze(tt,F,this.eb,St),this.kb=this.eb,this.Za=this.pb=null}function We(tt){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),tt!=null){var St=this.filename,Yt="/",ur=St;if(Yt&&(Yt=typeof Yt=="string"?Yt:Ln(Yt),ur=St?ae(Yt+"/"+St):Yt),St=yt(!0,!0),ur=Pt(ur,St),tt){if(typeof tt=="string"){Yt=Array(tt.length);for(var _r=0,Gr=tt.length;_r<Gr;++_r)Yt[_r]=tt.charCodeAt(_r);tt=Yt}Vn(ur,St|146),Yt=Ti(ur,577),Fa(Yt,tt,0,tt.length,0),ya(Yt),Vn(ur,St)}}this.handleError(mr(this.filename,at)),this.db=Y(at,"i32"),qr(this.db),this.fb={},this.Sa={}}var at=Mo(4),Bt=u.cwrap,mr=Bt("sqlite3_open","number",["string","number"]),Wr=Bt("sqlite3_close_v2","number",["number"]),Ur=Bt("sqlite3_exec","number",["number","string","number","number","number"]),xi=Bt("sqlite3_changes","number",["number"]),la=Bt("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Ns=Bt("sqlite3_sql","string",["number"]),Lu=Bt("sqlite3_normalized_sql","string",["number"]),Do=Bt("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Xi=Bt("sqlite3_bind_text","number",["number","number","number","number","number"]),Tl=Bt("sqlite3_bind_blob","number",["number","number","number","number","number"]),Xl=Bt("sqlite3_bind_double","number",["number","number","number"]),Ma=Bt("sqlite3_bind_int","number",["number","number","number"]),bc=Bt("sqlite3_bind_parameter_index","number",["number","string"]),Ws=Bt("sqlite3_step","number",["number"]),ed=Bt("sqlite3_errmsg","string",["number"]),Va=Bt("sqlite3_column_count","number",["number"]),_f=Bt("sqlite3_data_count","number",["number"]),vh=Bt("sqlite3_column_double","number",["number","number"]),Cc=Bt("sqlite3_column_text","string",["number","number"]),Ef=Bt("sqlite3_column_blob","number",["number","number"]),Sc=Bt("sqlite3_column_bytes","number",["number","number"]),yh=Bt("sqlite3_column_type","number",["number","number"]),xh=Bt("sqlite3_column_name","string",["number","number"]),bf=Bt("sqlite3_reset","number",["number"]),Nl=Bt("sqlite3_clear_bindings","number",["number"]),ua=Bt("sqlite3_finalize","number",["number"]),Zl=Bt("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Bc=Bt("sqlite3_value_type","number",["number"]),Jl=Bt("sqlite3_value_bytes","number",["number"]),Du=Bt("sqlite3_value_text","string",["number"]),V=Bt("sqlite3_value_blob","number",["number"]),ye=Bt("sqlite3_value_double","number",["number"]),je=Bt("sqlite3_result_double","",["number","number"]),Xe=Bt("sqlite3_result_null","",["number"]),ut=Bt("sqlite3_result_text","",["number","string","number","number"]),_t=Bt("sqlite3_result_blob","",["number","number","number","number"]),Ut=Bt("sqlite3_result_int","",["number","number"]),nr=Bt("sqlite3_result_error","",["number","string","number"]),br=Bt("sqlite3_aggregate_context","number",["number","number"]),qr=Bt("RegisterExtensionFunctions","number",["number"]),Qr=Bt("sqlite3_update_hook","number",["number","number","number"]);ve.prototype.bind=function(tt){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(tt)?this.Cb(tt):tt!=null&&typeof tt=="object"?this.Db(tt):!0},ve.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var tt=Ws(this.Qa);switch(tt){case 100:return!0;case 101:return!1;default:throw this.db.handleError(tt)}},ve.prototype.wb=function(tt){return tt==null&&(tt=this.Oa,this.Oa+=1),vh(this.Qa,tt)},ve.prototype.Gb=function(tt){if(tt==null&&(tt=this.Oa,this.Oa+=1),tt=Cc(this.Qa,tt),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(tt)},ve.prototype.Hb=function(tt){return tt==null&&(tt=this.Oa,this.Oa+=1),Cc(this.Qa,tt)},ve.prototype.getBlob=function(tt){tt==null&&(tt=this.Oa,this.Oa+=1);var St=Sc(this.Qa,tt);tt=Ef(this.Qa,tt);for(var Yt=new Uint8Array(St),ur=0;ur<St;ur+=1)Yt[ur]=M[tt+ur];return Yt},ve.prototype.get=function(tt,St){St=St||{},tt!=null&&this.bind(tt)&&this.step(),tt=[];for(var Yt=_f(this.Qa),ur=0;ur<Yt;ur+=1)switch(yh(this.Qa,ur)){case 1:var _r=St.useBigInt?this.Gb(ur):this.wb(ur);tt.push(_r);break;case 2:tt.push(this.wb(ur));break;case 3:tt.push(this.Hb(ur));break;case 4:tt.push(this.getBlob(ur));break;default:tt.push(null)}return tt},ve.prototype.getColumnNames=function(){for(var tt=[],St=Va(this.Qa),Yt=0;Yt<St;Yt+=1)tt.push(xh(this.Qa,Yt));return tt},ve.prototype.getAsObject=function(tt,St){tt=this.get(tt,St),St=this.getColumnNames();for(var Yt={},ur=0;ur<St.length;ur+=1)Yt[St[ur]]=tt[ur];return Yt},ve.prototype.getSQL=function(){return Ns(this.Qa)},ve.prototype.getNormalizedSQL=function(){return Lu(this.Qa)},ve.prototype.run=function(tt){return tt!=null&&this.bind(tt),this.step(),this.reset()},ve.prototype.sb=function(tt,St){St==null&&(St=this.Oa,this.Oa+=1),tt=He(tt);var Yt=_c(tt,Mu);this.lb.push(Yt),this.db.handleError(Xi(this.Qa,St,Yt,tt.length-1,0))},ve.prototype.Bb=function(tt,St){St==null&&(St=this.Oa,this.Oa+=1);var Yt=_c(tt,Mu);this.lb.push(Yt),this.db.handleError(Tl(this.Qa,St,Yt,tt.length,0))},ve.prototype.rb=function(tt,St){St==null&&(St=this.Oa,this.Oa+=1),this.db.handleError((tt===(tt|0)?Ma:Xl)(this.Qa,St,tt))},ve.prototype.Eb=function(tt){tt==null&&(tt=this.Oa,this.Oa+=1),Tl(this.Qa,tt,0,0,0)},ve.prototype.tb=function(tt,St){switch(St==null&&(St=this.Oa,this.Oa+=1),typeof tt){case"string":this.sb(tt,St);return;case"number":this.rb(tt,St);return;case"bigint":this.sb(tt.toString(),St);return;case"boolean":this.rb(tt+0,St);return;case"object":if(tt===null){this.Eb(St);return}if(tt.length!=null){this.Bb(tt,St);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+tt+")."},ve.prototype.Db=function(tt){var St=this;return Object.keys(tt).forEach(function(Yt){var ur=bc(St.Qa,Yt);ur!==0&&St.tb(tt[Yt],ur)}),!0},ve.prototype.Cb=function(tt){for(var St=0;St<tt.length;St+=1)this.tb(tt[St],St+1);return!0},ve.prototype.reset=function(){return this.freemem(),Nl(this.Qa)===0&&bf(this.Qa)===0},ve.prototype.freemem=function(){for(var tt;(tt=this.lb.pop())!==void 0;)Ec(tt)},ve.prototype.free=function(){this.freemem();var tt=ua(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,tt},Ne.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var tt=Lo(),St=Mo(4);te(at),te(St);try{this.db.handleError(Do(this.db.db,this.kb,-1,at,St)),this.kb=Y(St,"i32");var Yt=Y(at,"i32");return Yt===0?(this.mb(),{done:!0}):(this.Za=new ve(Yt,this.db),this.db.fb[Yt]=this.Za,{value:this.Za,done:!1})}catch(ur){throw this.pb=he(this.kb),this.mb(),ur}finally{Fo(tt)}},Ne.prototype.mb=function(){Ec(this.eb),this.eb=null},Ne.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:he(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(Ne.prototype[Symbol.iterator]=function(){return this}),We.prototype.run=function(tt,St){if(!this.db)throw"Database closed";if(St){tt=this.prepare(tt,St);try{tt.step()}finally{tt.free()}}else this.handleError(Ur(this.db,tt,0,0,at));return this},We.prototype.exec=function(tt,St,Yt){if(!this.db)throw"Database closed";var ur=Lo(),_r=null;try{var Gr=Yl(tt),$i=Mo(4);for(tt=[];Y(Gr,"i8")!==0;){te(at),te($i),this.handleError(Do(this.db,Gr,-1,at,$i));var Ni=Y(at,"i32");if(Gr=Y($i,"i32"),Ni!==0){var Gi=null;for(_r=new ve(Ni,this),St!=null&&_r.bind(St);_r.step();)Gi===null&&(Gi={columns:_r.getColumnNames(),values:[]},tt.push(Gi)),Gi.values.push(_r.get(null,Yt));_r.free()}}return tt}catch(Wa){throw _r&&_r.free(),Wa}finally{Fo(ur)}},We.prototype.each=function(tt,St,Yt,ur,_r){typeof St=="function"&&(ur=Yt,Yt=St,St=void 0),tt=this.prepare(tt,St);try{for(;tt.step();)Yt(tt.getAsObject(null,_r))}finally{tt.free()}if(typeof ur=="function")return ur()},We.prototype.prepare=function(tt,St){if(te(at),this.handleError(la(this.db,tt,-1,at,0)),tt=Y(at,"i32"),tt===0)throw"Nothing to prepare";var Yt=new ve(tt,this);return St!=null&&Yt.bind(St),this.fb[tt]=Yt},We.prototype.iterateStatements=function(tt){return new Ne(tt,this)},We.prototype.export=function(){Object.values(this.fb).forEach(function(St){St.free()}),Object.values(this.Sa).forEach(Io),this.Sa={},this.handleError(Wr(this.db));var tt=ji(this.filename);return this.handleError(mr(this.filename,at)),this.db=Y(at,"i32"),qr(this.db),tt},We.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(tt){tt.free()}),Object.values(this.Sa).forEach(Io),this.Sa={},this.Ya&&(Io(this.Ya),this.Ya=void 0),this.handleError(Wr(this.db)),hr("/"+this.filename),this.db=null)},We.prototype.handleError=function(tt){if(tt===0)return null;throw tt=ed(this.db),Error(tt)},We.prototype.getRowsModified=function(){return xi(this.db)},We.prototype.create_function=function(tt,St){Object.prototype.hasOwnProperty.call(this.Sa,tt)&&(Io(this.Sa[tt]),delete this.Sa[tt]);var Yt=Qi(function(ur,_r,Gr){_r=ee(_r,Gr);try{var $i=St.apply(null,_r)}catch(Ni){nr(ur,Ni,-1);return}q(ur,$i)},"viii");return this.Sa[tt]=Yt,this.handleError(Zl(this.db,tt,St.length,1,0,Yt,0,0,0)),this},We.prototype.create_aggregate=function(tt,St){var Yt=St.init||function(){return null},ur=St.finalize||function(Gi){return Gi},_r=St.step;if(!_r)throw"An aggregate function must have a step function in "+tt;var Gr={};Object.hasOwnProperty.call(this.Sa,tt)&&(Io(this.Sa[tt]),delete this.Sa[tt]),St=tt+"__finalize",Object.hasOwnProperty.call(this.Sa,St)&&(Io(this.Sa[St]),delete this.Sa[St]);var $i=Qi(function(Gi,Wa,ku){var Ys=br(Gi,1);Object.hasOwnProperty.call(Gr,Ys)||(Gr[Ys]=Yt()),Wa=ee(Wa,ku),Wa=[Gr[Ys]].concat(Wa);try{Gr[Ys]=_r.apply(null,Wa)}catch(Tc){delete Gr[Ys],nr(Gi,Tc,-1)}},"viii"),Ni=Qi(function(Gi){var Wa=br(Gi,1);try{var ku=ur(Gr[Wa])}catch(Ys){delete Gr[Wa],nr(Gi,Ys,-1);return}q(Gi,ku),delete Gr[Wa]},"vi");return this.Sa[tt]=$i,this.Sa[St]=Ni,this.handleError(Zl(this.db,tt,_r.length-1,1,0,0,$i,Ni,0)),this},We.prototype.updateHook=function(tt){this.Ya&&(Qr(this.db,0,0),Io(this.Ya),this.Ya=void 0),tt&&(this.Ya=Qi(function(St,Yt,ur,_r,Gr){switch(Yt){case 18:St="insert";break;case 23:St="update";break;case 9:St="delete";break;default:throw"unknown operationCode in updateHook callback: "+Yt}if(ur=ur?Z(F,ur):"",_r=_r?Z(F,_r):"",Gr>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";tt(St,ur,_r,Number(Gr))},"viiiij"),Qr(this.db,this.Ya,0))},u.Database=We};var A={...u},d="./this.program",p=(q,ee)=>{throw ee},y="",v,w;if(f){var x=AS;y=__dirname+"/",w=q=>(q=W(q)?new URL(q):q,x.readFileSync(q)),v=async q=>(q=W(q)?new URL(q):q,x.readFileSync(q,void 0)),!u.thisProgram&&1<process.argv.length&&(d=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),r.exports=u,p=(q,ee)=>{throw process.exitCode=q,ee}}else(c||h)&&(h?y=self.location.href:typeof document<"u"&&document.currentScript&&(y=document.currentScript.src),y=y.startsWith("blob:")?"":y.slice(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1),h&&(w=q=>{var ee=new XMLHttpRequest;return ee.open("GET",q,!1),ee.responseType="arraybuffer",ee.send(null),new Uint8Array(ee.response)}),v=async q=>{if(W(q))return new Promise((ve,Ne)=>{var We=new XMLHttpRequest;We.open("GET",q,!0),We.responseType="arraybuffer",We.onload=()=>{We.status==200||We.status==0&&We.response?ve(We.response):Ne(We.status)},We.onerror=Ne,We.send(null)});var ee=await fetch(q,{credentials:"same-origin"});if(ee.ok)return ee.arrayBuffer();throw Error(ee.status+" : "+ee.url)});var b=u.print||console.log.bind(console),C=u.printErr||console.error.bind(console);Object.assign(u,A),A=null,u.thisProgram&&(d=u.thisProgram);var S=u.wasmBinary,I,B=!1,T,M,F,N,O,L,G,R,U,W=q=>q.startsWith("file://");function Q(){var q=I.buffer;u.HEAP8=M=new Int8Array(q),u.HEAP16=N=new Int16Array(q),u.HEAPU8=F=new Uint8Array(q),u.HEAPU16=new Uint16Array(q),u.HEAP32=O=new Int32Array(q),u.HEAPU32=L=new Uint32Array(q),u.HEAPF32=G=new Float32Array(q),u.HEAPF64=U=new Float64Array(q),u.HEAP64=R=new BigInt64Array(q),u.HEAPU64=new BigUint64Array(q)}var re=0,oe=null;function P(q){var ee;throw(ee=u.onAbort)==null||ee.call(u,q),q="Aborted("+q+")",C(q),B=!0,new WebAssembly.RuntimeError(q+". Build with -sASSERTIONS for more info.")}var z;async function K(q){if(!S)try{var ee=await v(q);return new Uint8Array(ee)}catch{}if(q==z&&S)q=new Uint8Array(S);else if(w)q=w(q);else throw"both async and sync fetching of the wasm failed";return q}async function J(q,ee){try{var ve=await K(q);return await WebAssembly.instantiate(ve,ee)}catch(Ne){C(`failed to asynchronously prepare wasm: ${Ne}`),P(Ne)}}async function ue(q){var ee=z;if(!S&&typeof WebAssembly.instantiateStreaming=="function"&&!W(ee)&&!f)try{var ve=fetch(ee,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(ve,q)}catch(Ne){C(`wasm streaming compile failed: ${Ne}`),C("falling back to ArrayBuffer instantiation")}return J(ee,q)}class ge{constructor(ee){yr(this,"name","ExitStatus");this.message=`Program terminated with exit(${ee})`,this.status=ee}}var le=q=>{for(;0<q.length;)q.shift()(u)},me=[],xe=[],Be=()=>{var q=u.preRun.shift();xe.unshift(q)};function Y(q,ee="i8"){switch(ee.endsWith("*")&&(ee="*"),ee){case"i1":return M[q];case"i8":return M[q];case"i16":return N[q>>1];case"i32":return O[q>>2];case"i64":return R[q>>3];case"float":return G[q>>2];case"double":return U[q>>3];case"*":return L[q>>2];default:P(`invalid type for getValue: ${ee}`)}}var Ve=u.noExitRuntime||!0;function te(q){var ee="i32";switch(ee.endsWith("*")&&(ee="*"),ee){case"i1":M[q]=0;break;case"i8":M[q]=0;break;case"i16":N[q>>1]=0;break;case"i32":O[q>>2]=0;break;case"i64":R[q>>3]=BigInt(0);break;case"float":G[q>>2]=0;break;case"double":U[q>>3]=0;break;case"*":L[q>>2]=0;break;default:P(`invalid type for setValue: ${ee}`)}}var se=typeof TextDecoder<"u"?new TextDecoder:void 0,Z=(q,ee=0,ve=NaN)=>{var Ne=ee+ve;for(ve=ee;q[ve]&&!(ve>=Ne);)++ve;if(16<ve-ee&&q.buffer&&se)return se.decode(q.subarray(ee,ve));for(Ne="";ee<ve;){var We=q[ee++];if(We&128){var at=q[ee++]&63;if((We&224)==192)Ne+=String.fromCharCode((We&31)<<6|at);else{var Bt=q[ee++]&63;We=(We&240)==224?(We&15)<<12|at<<6|Bt:(We&7)<<18|at<<12|Bt<<6|q[ee++]&63,65536>We?Ne+=String.fromCharCode(We):(We-=65536,Ne+=String.fromCharCode(55296|We>>10,56320|We&1023))}}else Ne+=String.fromCharCode(We)}return Ne},he=(q,ee)=>q?Z(F,q,ee):"",ne=(q,ee)=>{for(var ve=0,Ne=q.length-1;0<=Ne;Ne--){var We=q[Ne];We==="."?q.splice(Ne,1):We===".."?(q.splice(Ne,1),ve++):ve&&(q.splice(Ne,1),ve--)}if(ee)for(;ve;ve--)q.unshift("..");return q},ae=q=>{var ee=q.charAt(0)==="/",ve=q.slice(-1)==="/";return(q=ne(q.split("/").filter(Ne=>!!Ne),!ee).join("/"))||ee||(q="."),q&&ve&&(q+="/"),(ee?"/":"")+q},_e=q=>{var ee=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(q).slice(1);return q=ee[0],ee=ee[1],!q&&!ee?".":(ee&&(ee=ee.slice(0,-1)),q+ee)},Me=q=>q&&q.match(/([^\/]+|\/)\/*$/)[1],be=()=>{if(f){var q=AS;return ee=>q.randomFillSync(ee)}return ee=>crypto.getRandomValues(ee)},Ae=q=>{(Ae=be())(q)},pe=(...q)=>{for(var ee="",ve=!1,Ne=q.length-1;-1<=Ne&&!ve;Ne--){if(ve=0<=Ne?q[Ne]:"/",typeof ve!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!ve)return"";ee=ve+"/"+ee,ve=ve.charAt(0)==="/"}return ee=ne(ee.split("/").filter(We=>!!We),!ve).join("/"),(ve?"/":"")+ee||"."},Fe=[],Ge=q=>{for(var ee=0,ve=0;ve<q.length;++ve){var Ne=q.charCodeAt(ve);127>=Ne?ee++:2047>=Ne?ee+=2:55296<=Ne&&57343>=Ne?(ee+=4,++ve):ee+=3}return ee},Ze=(q,ee,ve,Ne)=>{if(!(0<Ne))return 0;var We=ve;Ne=ve+Ne-1;for(var at=0;at<q.length;++at){var Bt=q.charCodeAt(at);if(55296<=Bt&&57343>=Bt){var mr=q.charCodeAt(++at);Bt=65536+((Bt&1023)<<10)|mr&1023}if(127>=Bt){if(ve>=Ne)break;ee[ve++]=Bt}else{if(2047>=Bt){if(ve+1>=Ne)break;ee[ve++]=192|Bt>>6}else{if(65535>=Bt){if(ve+2>=Ne)break;ee[ve++]=224|Bt>>12}else{if(ve+3>=Ne)break;ee[ve++]=240|Bt>>18,ee[ve++]=128|Bt>>12&63}ee[ve++]=128|Bt>>6&63}ee[ve++]=128|Bt&63}}return ee[ve]=0,ve-We},He=(q,ee)=>{var ve=Array(Ge(q)+1);return q=Ze(q,ve,0,ve.length),ee&&(ve.length=q),ve},Je=[];function Ye(q,ee){Je[q]={input:[],output:[],cb:ee},lt(q,Ke)}var Ke={open(q){var ee=Je[q.node.rdev];if(!ee)throw new Ct(43);q.tty=ee,q.seekable=!1},close(q){q.tty.cb.fsync(q.tty)},fsync(q){q.tty.cb.fsync(q.tty)},read(q,ee,ve,Ne){if(!q.tty||!q.tty.cb.xb)throw new Ct(60);for(var We=0,at=0;at<Ne;at++){try{var Bt=q.tty.cb.xb(q.tty)}catch{throw new Ct(29)}if(Bt===void 0&&We===0)throw new Ct(6);if(Bt==null)break;We++,ee[ve+at]=Bt}return We&&(q.node.atime=Date.now()),We},write(q,ee,ve,Ne){if(!q.tty||!q.tty.cb.qb)throw new Ct(60);try{for(var We=0;We<Ne;We++)q.tty.cb.qb(q.tty,ee[ve+We])}catch{throw new Ct(29)}return Ne&&(q.node.mtime=q.node.ctime=Date.now()),We}},mt={xb(){e:{if(!Fe.length){var q=null;if(f){var ee=Buffer.alloc(256),ve=0,Ne=process.stdin.fd;try{ve=x.readSync(Ne,ee,0,256)}catch(We){if(We.toString().includes("EOF"))ve=0;else throw We}0<ve&&(q=ee.slice(0,ve).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(q=window.prompt("Input: "),q!==null&&(q+=`
`));if(!q){q=null;break e}Fe=He(q,!0)}q=Fe.shift()}return q},qb(q,ee){ee===null||ee===10?(b(Z(q.output)),q.output=[]):ee!=0&&q.output.push(ee)},fsync(q){var ee;0<((ee=q.output)==null?void 0:ee.length)&&(b(Z(q.output)),q.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},vt={qb(q,ee){ee===null||ee===10?(C(Z(q.output)),q.output=[]):ee!=0&&q.output.push(ee)},fsync(q){var ee;0<((ee=q.output)==null?void 0:ee.length)&&(C(Z(q.output)),q.output=[])}},Dt={Wa:null,Xa(){return Dt.createNode(null,"/",16895,0)},createNode(q,ee,ve,Ne){if((ve&61440)===24576||(ve&61440)===4096)throw new Ct(63);return Dt.Wa||(Dt.Wa={dir:{node:{Ta:Dt.La.Ta,Ua:Dt.La.Ua,lookup:Dt.La.lookup,hb:Dt.La.hb,rename:Dt.La.rename,unlink:Dt.La.unlink,rmdir:Dt.La.rmdir,readdir:Dt.La.readdir,symlink:Dt.La.symlink},stream:{Va:Dt.Ma.Va}},file:{node:{Ta:Dt.La.Ta,Ua:Dt.La.Ua},stream:{Va:Dt.Ma.Va,read:Dt.Ma.read,write:Dt.Ma.write,ib:Dt.Ma.ib,jb:Dt.Ma.jb}},link:{node:{Ta:Dt.La.Ta,Ua:Dt.La.Ua,readlink:Dt.La.readlink},stream:{}},ub:{node:{Ta:Dt.La.Ta,Ua:Dt.La.Ua},stream:xt}}),ve=Zn(q,ee,ve,Ne),Br(ve.mode)?(ve.La=Dt.Wa.dir.node,ve.Ma=Dt.Wa.dir.stream,ve.Na={}):(ve.mode&61440)===32768?(ve.La=Dt.Wa.file.node,ve.Ma=Dt.Wa.file.stream,ve.Ra=0,ve.Na=null):(ve.mode&61440)===40960?(ve.La=Dt.Wa.link.node,ve.Ma=Dt.Wa.link.stream):(ve.mode&61440)===8192&&(ve.La=Dt.Wa.ub.node,ve.Ma=Dt.Wa.ub.stream),ve.atime=ve.mtime=ve.ctime=Date.now(),q&&(q.Na[ee]=ve,q.atime=q.mtime=q.ctime=ve.atime),ve},Sb(q){return q.Na?q.Na.subarray?q.Na.subarray(0,q.Ra):new Uint8Array(q.Na):new Uint8Array(0)},La:{Ta(q){var ee={};return ee.dev=(q.mode&61440)===8192?q.id:1,ee.ino=q.id,ee.mode=q.mode,ee.nlink=1,ee.uid=0,ee.gid=0,ee.rdev=q.rdev,Br(q.mode)?ee.size=4096:(q.mode&61440)===32768?ee.size=q.Ra:(q.mode&61440)===40960?ee.size=q.link.length:ee.size=0,ee.atime=new Date(q.atime),ee.mtime=new Date(q.mtime),ee.ctime=new Date(q.ctime),ee.blksize=4096,ee.blocks=Math.ceil(ee.size/ee.blksize),ee},Ua(q,ee){for(var ve of["mode","atime","mtime","ctime"])ee[ve]!=null&&(q[ve]=ee[ve]);ee.size!==void 0&&(ee=ee.size,q.Ra!=ee&&(ee==0?(q.Na=null,q.Ra=0):(ve=q.Na,q.Na=new Uint8Array(ee),ve&&q.Na.set(ve.subarray(0,Math.min(ee,q.Ra))),q.Ra=ee)))},lookup(){throw Dt.vb},hb(q,ee,ve,Ne){return Dt.createNode(q,ee,ve,Ne)},rename(q,ee,ve){try{var Ne=Dn(ee,ve)}catch{}if(Ne){if(Br(q.mode))for(var We in Ne.Na)throw new Ct(55);ir(Ne)}delete q.parent.Na[q.name],ee.Na[ve]=q,q.name=ve,ee.ctime=ee.mtime=q.parent.ctime=q.parent.mtime=Date.now()},unlink(q,ee){delete q.Na[ee],q.ctime=q.mtime=Date.now()},rmdir(q,ee){var ve=Dn(q,ee),Ne;for(Ne in ve.Na)throw new Ct(55);delete q.Na[ee],q.ctime=q.mtime=Date.now()},readdir(q){return[".","..",...Object.keys(q.Na)]},symlink(q,ee,ve){return q=Dt.createNode(q,ee,41471,0),q.link=ve,q},readlink(q){if((q.mode&61440)!==40960)throw new Ct(28);return q.link}},Ma:{read(q,ee,ve,Ne,We){var at=q.node.Na;if(We>=q.node.Ra)return 0;if(q=Math.min(q.node.Ra-We,Ne),8<q&&at.subarray)ee.set(at.subarray(We,We+q),ve);else for(Ne=0;Ne<q;Ne++)ee[ve+Ne]=at[We+Ne];return q},write(q,ee,ve,Ne,We,at){if(ee.buffer===M.buffer&&(at=!1),!Ne)return 0;if(q=q.node,q.mtime=q.ctime=Date.now(),ee.subarray&&(!q.Na||q.Na.subarray)){if(at)return q.Na=ee.subarray(ve,ve+Ne),q.Ra=Ne;if(q.Ra===0&&We===0)return q.Na=ee.slice(ve,ve+Ne),q.Ra=Ne;if(We+Ne<=q.Ra)return q.Na.set(ee.subarray(ve,ve+Ne),We),Ne}at=We+Ne;var Bt=q.Na?q.Na.length:0;if(Bt>=at||(at=Math.max(at,Bt*(1048576>Bt?2:1.125)>>>0),Bt!=0&&(at=Math.max(at,256)),Bt=q.Na,q.Na=new Uint8Array(at),0<q.Ra&&q.Na.set(Bt.subarray(0,q.Ra),0)),q.Na.subarray&&ee.subarray)q.Na.set(ee.subarray(ve,ve+Ne),We);else for(at=0;at<Ne;at++)q.Na[We+at]=ee[ve+at];return q.Ra=Math.max(q.Ra,We+Ne),Ne},Va(q,ee,ve){if(ve===1?ee+=q.position:ve===2&&(q.node.mode&61440)===32768&&(ee+=q.node.Ra),0>ee)throw new Ct(28);return ee},ib(q,ee,ve,Ne,We){if((q.node.mode&61440)!==32768)throw new Ct(43);if(q=q.node.Na,We&2||!q||q.buffer!==M.buffer){We=!0,Ne=65536*Math.ceil(ee/65536);var at=wf(65536,Ne);if(at&&F.fill(0,at,at+Ne),Ne=at,!Ne)throw new Ct(48);q&&((0<ve||ve+ee<q.length)&&(q.subarray?q=q.subarray(ve,ve+ee):q=Array.prototype.slice.call(q,ve,ve+ee)),M.set(q,Ne))}else We=!1,Ne=q.byteOffset;return{Kb:Ne,Ab:We}},jb(q,ee,ve,Ne){return Dt.Ma.write(q,ee,0,Ne,ve,!1),0}}},yt=(q,ee)=>{var ve=0;return q&&(ve|=365),ee&&(ve|=146),ve},Ar=null,ce={},Ue=[],st=1,wt=null,Wt=!1,rr=!0,wr={},Ct=class{constructor(q){yr(this,"name","ErrnoError");this.Pa=q}},fn=class{constructor(){yr(this,"gb",{});yr(this,"node",null)}get flags(){return this.gb.flags}set flags(q){this.gb.flags=q}get position(){return this.gb.position}set position(q){this.gb.position=q}},$n=class{constructor(q,ee,ve,Ne){yr(this,"La",{});yr(this,"Ma",{});yr(this,"ab",null);q||(q=this),this.parent=q,this.Xa=q.Xa,this.id=st++,this.name=ee,this.mode=ve,this.rdev=Ne,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(q){q?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(q){q?this.mode|=146:this.mode&=-147}};function Tt(q,ee={}){if(!q)throw new Ct(44);ee.nb??(ee.nb=!0),q.charAt(0)==="/"||(q="//"+q);var ve=0;e:for(;40>ve;ve++){q=q.split("/").filter(mr=>!!mr);for(var Ne=Ar,We="/",at=0;at<q.length;at++){var Bt=at===q.length-1;if(Bt&&ee.parent)break;if(q[at]!==".")if(q[at]==="..")We=_e(We),Ne=Ne.parent;else{We=ae(We+"/"+q[at]);try{Ne=Dn(Ne,q[at])}catch(mr){if((mr==null?void 0:mr.Pa)===44&&Bt&&ee.Jb)return{path:We};throw mr}if(!Ne.ab||Bt&&!ee.nb||(Ne=Ne.ab.root),(Ne.mode&61440)===40960&&(!Bt||ee.$a)){if(!Ne.La.readlink)throw new Ct(52);Ne=Ne.La.readlink(Ne),Ne.charAt(0)==="/"||(Ne=_e(We)+"/"+Ne),q=Ne+"/"+q.slice(at+1).join("/");continue e}}}return{path:We,node:Ne}}throw new Ct(32)}function Ln(q){for(var ee;;){if(q===q.parent)return q=q.Xa.zb,ee?q[q.length-1]!=="/"?`${q}/${ee}`:q+ee:q;ee=ee?`${q.name}/${ee}`:q.name,q=q.parent}}function Kn(q,ee){for(var ve=0,Ne=0;Ne<ee.length;Ne++)ve=(ve<<5)-ve+ee.charCodeAt(Ne)|0;return(q+ve>>>0)%wt.length}function ir(q){var ee=Kn(q.parent.id,q.name);if(wt[ee]===q)wt[ee]=q.bb;else for(ee=wt[ee];ee;){if(ee.bb===q){ee.bb=q.bb;break}ee=ee.bb}}function Dn(q,ee){var ve=Br(q.mode)?(ve=tn(q,"x"))?ve:q.La.lookup?0:2:54;if(ve)throw new Ct(ve);for(ve=wt[Kn(q.id,ee)];ve;ve=ve.bb){var Ne=ve.name;if(ve.parent.id===q.id&&Ne===ee)return ve}return q.La.lookup(q,ee)}function Zn(q,ee,ve,Ne){return q=new $n(q,ee,ve,Ne),ee=Kn(q.parent.id,q.name),q.bb=wt[ee],wt[ee]=q}function Br(q){return(q&61440)===16384}function Pr(q){var ee=["r","w","rw"][q&3];return q&512&&(ee+="w"),ee}function tn(q,ee){if(rr)return 0;if(!ee.includes("r")||q.mode&292){if(ee.includes("w")&&!(q.mode&146)||ee.includes("x")&&!(q.mode&73))return 2}else return 2;return 0}function Ee(q,ee){if(!Br(q.mode))return 54;try{return Dn(q,ee),20}catch{}return tn(q,"wx")}function ze(q,ee,ve){try{var Ne=Dn(q,ee)}catch(We){return We.Pa}if(q=tn(q,"wx"))return q;if(ve){if(!Br(Ne.mode))return 54;if(Ne===Ne.parent||Ln(Ne)==="/")return 10}else if(Br(Ne.mode))return 31;return 0}function ke(q){if(!q)throw new Ct(63);return q}function Re(q){if(q=Ue[q],!q)throw new Ct(8);return q}function Oe(q,ee=-1){if(q=Object.assign(new fn,q),ee==-1)e:{for(ee=0;4096>=ee;ee++)if(!Ue[ee])break e;throw new Ct(33)}return q.fd=ee,Ue[ee]=q}function qe(q,ee=-1){var ve,Ne;return q=Oe(q,ee),(Ne=(ve=q.Ma)==null?void 0:ve.Rb)==null||Ne.call(ve,q),q}function ct(q,ee,ve){var Ne=q==null?void 0:q.Ma.Ua;q=Ne?q:ee,Ne??(Ne=ee.La.Ua),ke(Ne),Ne(q,ve)}var xt={open(q){var ee,ve;q.Ma=ce[q.node.rdev].Ma,(ve=(ee=q.Ma).open)==null||ve.call(ee,q)},Va(){throw new Ct(70)}};function lt(q,ee){ce[q]={Ma:ee}}function ft(q,ee){var ve=ee==="/";if(ve&&Ar)throw new Ct(10);if(!ve&&ee){var Ne=Tt(ee,{nb:!1});if(ee=Ne.path,Ne=Ne.node,Ne.ab)throw new Ct(10);if(!Br(Ne.mode))throw new Ct(54)}ee={type:q,Wb:{},zb:ee,Ib:[]},q=q.Xa(ee),q.Xa=ee,ee.root=q,ve?Ar=q:Ne&&(Ne.ab=ee,Ne.Xa&&Ne.Xa.Ib.push(ee))}function At(q,ee,ve){var Ne=Tt(q,{parent:!0}).node;if(q=Me(q),!q)throw new Ct(28);if(q==="."||q==="..")throw new Ct(20);var We=Ee(Ne,q);if(We)throw new Ct(We);if(!Ne.La.hb)throw new Ct(63);return Ne.La.hb(Ne,q,ee,ve)}function Pt(q,ee=438){return At(q,ee&4095|32768,0)}function It(q,ee=511){return At(q,ee&1023|16384,0)}function Jt(q,ee,ve){typeof ve>"u"&&(ve=ee,ee=438),At(q,ee|8192,ve)}function qt(q,ee){if(!pe(q))throw new Ct(44);var ve=Tt(ee,{parent:!0}).node;if(!ve)throw new Ct(44);ee=Me(ee);var Ne=Ee(ve,ee);if(Ne)throw new Ct(Ne);if(!ve.La.symlink)throw new Ct(63);ve.La.symlink(ve,ee,q)}function Rt(q){var ee=Tt(q,{parent:!0}).node;q=Me(q);var ve=Dn(ee,q),Ne=ze(ee,q,!0);if(Ne)throw new Ct(Ne);if(!ee.La.rmdir)throw new Ct(63);if(ve.ab)throw new Ct(10);ee.La.rmdir(ee,q),ir(ve)}function hr(q){var ee=Tt(q,{parent:!0}).node;if(!ee)throw new Ct(44);q=Me(q);var ve=Dn(ee,q),Ne=ze(ee,q,!1);if(Ne)throw new Ct(Ne);if(!ee.La.unlink)throw new Ct(63);if(ve.ab)throw new Ct(10);ee.La.unlink(ee,q),ir(ve)}function An(q,ee){return q=Tt(q,{$a:!ee}).node,ke(q.La.Ta)(q)}function Cn(q,ee,ve,Ne){ct(q,ee,{mode:ve&4095|ee.mode&-4096,ctime:Date.now(),Fb:Ne})}function Vn(q,ee){q=typeof q=="string"?Tt(q,{$a:!0}).node:q,Cn(null,q,ee)}function ls(q,ee,ve){if(Br(ee.mode))throw new Ct(31);if((ee.mode&61440)!==32768)throw new Ct(28);var Ne=tn(ee,"w");if(Ne)throw new Ct(Ne);ct(q,ee,{size:ve,timestamp:Date.now()})}function Ti(q,ee,ve=438){if(q==="")throw new Ct(44);if(typeof ee=="string"){var Ne={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[ee];if(typeof Ne>"u")throw Error(`Unknown file open mode: ${ee}`);ee=Ne}if(ve=ee&64?ve&4095|32768:0,typeof q=="object")Ne=q;else{var We=q.endsWith("/");q=Tt(q,{$a:!(ee&131072),Jb:!0}),Ne=q.node,q=q.path}var at=!1;if(ee&64)if(Ne){if(ee&128)throw new Ct(20)}else{if(We)throw new Ct(31);Ne=At(q,ve|511,0),at=!0}if(!Ne)throw new Ct(44);if((Ne.mode&61440)===8192&&(ee&=-513),ee&65536&&!Br(Ne.mode))throw new Ct(54);if(!at&&(We=Ne?(Ne.mode&61440)===40960?32:Br(Ne.mode)&&(Pr(ee)!=="r"||ee&576)?31:tn(Ne,Pr(ee)):44))throw new Ct(We);return ee&512&&!at&&(We=Ne,We=typeof We=="string"?Tt(We,{$a:!0}).node:We,ls(null,We,0)),ee&=-131713,We=Oe({node:Ne,path:Ln(Ne),flags:ee,seekable:!0,position:0,Ma:Ne.Ma,Lb:[],error:!1}),We.Ma.open&&We.Ma.open(We),at&&Vn(Ne,ve&511),!u.logReadFiles||ee&1||q in wr||(wr[q]=1),We}function ya(q){if(q.fd===null)throw new Ct(8);q.ob&&(q.ob=null);try{q.Ma.close&&q.Ma.close(q)}catch(ee){throw ee}finally{Ue[q.fd]=null}q.fd=null}function us(q,ee,ve){if(q.fd===null)throw new Ct(8);if(!q.seekable||!q.Ma.Va)throw new Ct(70);if(ve!=0&&ve!=1&&ve!=2)throw new Ct(28);q.position=q.Ma.Va(q,ee,ve),q.Lb=[]}function Ia(q,ee,ve,Ne,We){if(0>Ne||0>We)throw new Ct(28);if(q.fd===null)throw new Ct(8);if((q.flags&2097155)===1)throw new Ct(8);if(Br(q.node.mode))throw new Ct(31);if(!q.Ma.read)throw new Ct(28);var at=typeof We<"u";if(!at)We=q.position;else if(!q.seekable)throw new Ct(70);return ee=q.Ma.read(q,ee,ve,Ne,We),at||(q.position+=ee),ee}function Fa(q,ee,ve,Ne,We){if(0>Ne||0>We)throw new Ct(28);if(q.fd===null)throw new Ct(8);if(!(q.flags&2097155))throw new Ct(8);if(Br(q.node.mode))throw new Ct(31);if(!q.Ma.write)throw new Ct(28);q.seekable&&q.flags&1024&&us(q,0,2);var at=typeof We<"u";if(!at)We=q.position;else if(!q.seekable)throw new Ct(70);return ee=q.Ma.write(q,ee,ve,Ne,We,void 0),at||(q.position+=ee),ee}function ji(q){var ee,ve=Ti(q,ve||0);q=An(q).size;var Ne=new Uint8Array(q);return Ia(ve,Ne,0,q,0),ee=Ne,ya(ve),ee}function To(q,ee,ve){q=ae("/dev/"+q);var Ne=yt(!!ee,!!ve);To.yb??(To.yb=64);var We=To.yb++<<8|0;lt(We,{open(at){at.seekable=!1},close(){var at;(at=ve==null?void 0:ve.buffer)!=null&&at.length&&ve(10)},read(at,Bt,mr,Wr){for(var Ur=0,xi=0;xi<Wr;xi++){try{var la=ee()}catch{throw new Ct(29)}if(la===void 0&&Ur===0)throw new Ct(6);if(la==null)break;Ur++,Bt[mr+xi]=la}return Ur&&(at.node.atime=Date.now()),Ur},write(at,Bt,mr,Wr){for(var Ur=0;Ur<Wr;Ur++)try{ve(Bt[mr+Ur])}catch{throw new Ct(29)}return Wr&&(at.node.mtime=at.node.ctime=Date.now()),Ur}}),Jt(q,Ne,We)}var ni={};function No(q,ee,ve){if(ee.charAt(0)==="/")return ee;if(q=q===-100?"/":Re(q).path,ee.length==0){if(!ve)throw new Ct(44);return q}return q+"/"+ee}function Cl(q,ee){O[q>>2]=ee.dev,O[q+4>>2]=ee.mode,L[q+8>>2]=ee.nlink,O[q+12>>2]=ee.uid,O[q+16>>2]=ee.gid,O[q+20>>2]=ee.rdev,R[q+24>>3]=BigInt(ee.size),O[q+32>>2]=4096,O[q+36>>2]=ee.blocks;var ve=ee.atime.getTime(),Ne=ee.mtime.getTime(),We=ee.ctime.getTime();return R[q+40>>3]=BigInt(Math.floor(ve/1e3)),L[q+48>>2]=ve%1e3*1e6,R[q+56>>3]=BigInt(Math.floor(Ne/1e3)),L[q+64>>2]=Ne%1e3*1e6,R[q+72>>3]=BigInt(Math.floor(We/1e3)),L[q+80>>2]=We%1e3*1e6,R[q+88>>3]=BigInt(ee.ino),0}var Sl=void 0,Ui=()=>{var q=O[+Sl>>2];return Sl+=4,q},$a=0,Ka=[0,31,60,91,121,152,182,213,244,274,305,335],tl=[0,31,59,90,120,151,181,212,243,273,304,334],Wl={},yf=q=>{var ee;T=q,Ve||0<$a||((ee=u.onExit)==null||ee.call(u,q),B=!0),p(q,new ge(q))},xf=q=>{if(!B)try{if(q(),!(Ve||0<$a))try{T=q=T,yf(q)}catch(ee){ee instanceof ge||ee=="unwind"||p(1,ee)}}catch(ee){ee instanceof ge||ee=="unwind"||p(1,ee)}},mh={},wc=()=>{if(!Bl){var q={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d||"./this.program"},ee;for(ee in mh)mh[ee]===void 0?delete q[ee]:q[ee]=mh[ee];var ve=[];for(ee in q)ve.push(`${ee}=${q[ee]}`);Bl=ve}return Bl},Bl,Yl=q=>{var ee=Ge(q)+1,ve=Mo(ee);return Ze(q,F,ve,ee),ve},JA=(q,ee,ve,Ne)=>{var We={string:Ur=>{var xi=0;return Ur!=null&&Ur!==0&&(xi=Yl(Ur)),xi},array:Ur=>{var xi=Mo(Ur.length);return M.set(Ur,xi),xi}};q=u["_"+q];var at=[],Bt=0;if(Ne)for(var mr=0;mr<Ne.length;mr++){var Wr=We[ve[mr]];Wr?(Bt===0&&(Bt=Lo()),at[mr]=Wr(Ne[mr])):at[mr]=Ne[mr]}return ve=q(...at),ve=function(Ur){return Bt!==0&&Fo(Bt),ee==="string"?Ur?Z(F,Ur):"":ee==="boolean"?!!Ur:Ur}(ve)},Mu=0,_c=(q,ee)=>(ee=ee==1?Mo(q.length):Fr(q.length),q.subarray||q.slice||(q=new Uint8Array(q)),F.set(q,ee),ee),xa,Gn=[],Yi,Io=q=>{xa.delete(Yi.get(q)),Yi.set(q,null),Gn.push(q)},Qi=(q,ee)=>{if(!xa){xa=new WeakMap;var ve=Yi.length;if(xa)for(var Ne=0;Ne<0+ve;Ne++){var We=Yi.get(Ne);We&&xa.set(We,Ne)}}if(ve=xa.get(q)||0)return ve;if(Gn.length)ve=Gn.pop();else{try{Yi.grow(1)}catch(Wr){throw Wr instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Wr}ve=Yi.length-1}try{Yi.set(ve,q)}catch(Wr){if(!(Wr instanceof TypeError))throw Wr;if(typeof WebAssembly.Function=="function"){var at=WebAssembly.Function;Ne={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},We={parameters:[],results:ee[0]=="v"?[]:[Ne[ee[0]]]};for(var Bt=1;Bt<ee.length;++Bt)We.parameters.push(Ne[ee[Bt]]);ee=new at(We,q)}else{Ne=[1],We=ee.slice(0,1),ee=ee.slice(1),Bt={i:127,p:127,j:126,f:125,d:124,e:111},Ne.push(96);var mr=ee.length;128>mr?Ne.push(mr):Ne.push(mr%128|128,mr>>7);for(at of ee)Ne.push(Bt[at]);We=="v"?Ne.push(0):Ne.push(1,Bt[We]),ee=[0,97,115,109,1,0,0,0,1],at=Ne.length,128>at?ee.push(at):ee.push(at%128|128,at>>7),ee.push(...Ne),ee.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),ee=new WebAssembly.Module(new Uint8Array(ee)),ee=new WebAssembly.Instance(ee,{e:{f:q}}).exports.f}Yi.set(ve,ee)}return xa.set(q,ve),ve};wt=Array(4096),ft(Dt,"/"),It("/tmp"),It("/home"),It("/home/web_user"),function(){It("/dev"),lt(259,{read:()=>0,write:(Ne,We,at,Bt)=>Bt,Va:()=>0}),Jt("/dev/null",259),Ye(1280,mt),Ye(1536,vt),Jt("/dev/tty",1280),Jt("/dev/tty1",1536);var q=new Uint8Array(1024),ee=0,ve=()=>(ee===0&&(Ae(q),ee=q.byteLength),q[--ee]);To("random",ve),To("urandom",ve),It("/dev/shm"),It("/dev/shm/tmp")}(),function(){It("/proc");var q=It("/proc/self");It("/proc/self/fd"),ft({Xa(){var ee=Zn(q,"fd",16895,73);return ee.Ma={Va:Dt.Ma.Va},ee.La={lookup(ve,Ne){ve=+Ne;var We=Re(ve);return ve={parent:null,Xa:{zb:"fake"},La:{readlink:()=>We.path},id:ve+1},ve.parent=ve},readdir(){return Array.from(Ue.entries()).filter(([,ve])=>ve).map(([ve])=>ve.toString())}},ee}},"/proc/self/fd")}(),Dt.vb=new Ct(44),Dt.vb.stack="<generic error, no stack>";var cs={a:(q,ee,ve,Ne)=>P(`Assertion failed: ${q?Z(F,q):""}, at: `+[ee?ee?Z(F,ee):"":"unknown filename",ve,Ne?Ne?Z(F,Ne):"":"unknown function"]),i:function(q,ee){try{return q=q?Z(F,q):"",Vn(q,ee),0}catch(ve){if(typeof ni>"u"||ve.name!=="ErrnoError")throw ve;return-ve.Pa}},L:function(q,ee,ve){try{if(ee=ee?Z(F,ee):"",ee=No(q,ee),ve&-8)return-28;var Ne=Tt(ee,{$a:!0}).node;return Ne?(q="",ve&4&&(q+="r"),ve&2&&(q+="w"),ve&1&&(q+="x"),q&&tn(Ne,q)?-2:0):-44}catch(We){if(typeof ni>"u"||We.name!=="ErrnoError")throw We;return-We.Pa}},j:function(q,ee){try{var ve=Re(q);return Cn(ve,ve.node,ee,!1),0}catch(Ne){if(typeof ni>"u"||Ne.name!=="ErrnoError")throw Ne;return-Ne.Pa}},h:function(q){try{var ee=Re(q);return ct(ee,ee.node,{timestamp:Date.now(),Fb:!1}),0}catch(ve){if(typeof ni>"u"||ve.name!=="ErrnoError")throw ve;return-ve.Pa}},b:function(q,ee,ve){Sl=ve;try{var Ne=Re(q);switch(ee){case 0:var We=Ui();if(0>We)break;for(;Ue[We];)We++;return qe(Ne,We).fd;case 1:case 2:return 0;case 3:return Ne.flags;case 4:return We=Ui(),Ne.flags|=We,0;case 12:return We=Ui(),N[We+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(at){if(typeof ni>"u"||at.name!=="ErrnoError")throw at;return-at.Pa}},g:function(q,ee){try{var ve=Re(q),Ne=ve.node,We=ve.Ma.Ta;q=We?ve:Ne,We??(We=Ne.La.Ta),ke(We);var at=We(q);return Cl(ee,at)}catch(Bt){if(typeof ni>"u"||Bt.name!=="ErrnoError")throw Bt;return-Bt.Pa}},H:function(q,ee){ee=-9007199254740992>ee||9007199254740992<ee?NaN:Number(ee);try{if(isNaN(ee))return 61;var ve=Re(q);if(0>ee||!(ve.flags&2097155))throw new Ct(28);return ls(ve,ve.node,ee),0}catch(Ne){if(typeof ni>"u"||Ne.name!=="ErrnoError")throw Ne;return-Ne.Pa}},G:function(q,ee){try{if(ee===0)return-28;var ve=Ge("/")+1;return ee<ve?-68:(Ze("/",F,q,ee),ve)}catch(Ne){if(typeof ni>"u"||Ne.name!=="ErrnoError")throw Ne;return-Ne.Pa}},K:function(q,ee){try{return q=q?Z(F,q):"",Cl(ee,An(q,!0))}catch(ve){if(typeof ni>"u"||ve.name!=="ErrnoError")throw ve;return-ve.Pa}},C:function(q,ee,ve){try{return ee=ee?Z(F,ee):"",ee=No(q,ee),It(ee,ve),0}catch(Ne){if(typeof ni>"u"||Ne.name!=="ErrnoError")throw Ne;return-Ne.Pa}},J:function(q,ee,ve,Ne){try{ee=ee?Z(F,ee):"";var We=Ne&256;return ee=No(q,ee,Ne&4096),Cl(ve,We?An(ee,!0):An(ee))}catch(at){if(typeof ni>"u"||at.name!=="ErrnoError")throw at;return-at.Pa}},x:function(q,ee,ve,Ne){Sl=Ne;try{ee=ee?Z(F,ee):"",ee=No(q,ee);var We=Ne?Ui():0;return Ti(ee,ve,We).fd}catch(at){if(typeof ni>"u"||at.name!=="ErrnoError")throw at;return-at.Pa}},v:function(q,ee,ve,Ne){try{if(ee=ee?Z(F,ee):"",ee=No(q,ee),0>=Ne)return-28;var We=Tt(ee).node;if(!We)throw new Ct(44);if(!We.La.readlink)throw new Ct(28);var at=We.La.readlink(We),Bt=Math.min(Ne,Ge(at)),mr=M[ve+Bt];return Ze(at,F,ve,Ne+1),M[ve+Bt]=mr,Bt}catch(Wr){if(typeof ni>"u"||Wr.name!=="ErrnoError")throw Wr;return-Wr.Pa}},u:function(q){try{return q=q?Z(F,q):"",Rt(q),0}catch(ee){if(typeof ni>"u"||ee.name!=="ErrnoError")throw ee;return-ee.Pa}},f:function(q,ee){try{return q=q?Z(F,q):"",Cl(ee,An(q))}catch(ve){if(typeof ni>"u"||ve.name!=="ErrnoError")throw ve;return-ve.Pa}},r:function(q,ee,ve){try{return ee=ee?Z(F,ee):"",ee=No(q,ee),ve===0?hr(ee):ve===512?Rt(ee):P("Invalid flags passed to unlinkat"),0}catch(Ne){if(typeof ni>"u"||Ne.name!=="ErrnoError")throw Ne;return-Ne.Pa}},q:function(q,ee,ve){try{ee=ee?Z(F,ee):"",ee=No(q,ee,!0);var Ne=Date.now(),We,at;if(ve){var Bt=L[ve>>2]+4294967296*O[ve+4>>2],mr=O[ve+8>>2];mr==1073741823?We=Ne:mr==1073741822?We=null:We=1e3*Bt+mr/1e6,ve+=16,Bt=L[ve>>2]+4294967296*O[ve+4>>2],mr=O[ve+8>>2],mr==1073741823?at=Ne:mr==1073741822?at=null:at=1e3*Bt+mr/1e6}else at=We=Ne;if((at??We)!==null){q=We;var Wr=Tt(ee,{$a:!0}).node;ke(Wr.La.Ua)(Wr,{atime:q,mtime:at})}return 0}catch(Ur){if(typeof ni>"u"||Ur.name!=="ErrnoError")throw Ur;return-Ur.Pa}},m:()=>P(""),l:()=>{Ve=!1,$a=0},A:function(q,ee){q=-9007199254740992>q||9007199254740992<q?NaN:Number(q),q=new Date(1e3*q),O[ee>>2]=q.getSeconds(),O[ee+4>>2]=q.getMinutes(),O[ee+8>>2]=q.getHours(),O[ee+12>>2]=q.getDate(),O[ee+16>>2]=q.getMonth(),O[ee+20>>2]=q.getFullYear()-1900,O[ee+24>>2]=q.getDay();var ve=q.getFullYear();O[ee+28>>2]=(ve%4!==0||ve%100===0&&ve%400!==0?tl:Ka)[q.getMonth()]+q.getDate()-1|0,O[ee+36>>2]=-(60*q.getTimezoneOffset()),ve=new Date(q.getFullYear(),6,1).getTimezoneOffset();var Ne=new Date(q.getFullYear(),0,1).getTimezoneOffset();O[ee+32>>2]=(ve!=Ne&&q.getTimezoneOffset()==Math.min(Ne,ve))|0},y:function(q,ee,ve,Ne,We,at,Bt){We=-9007199254740992>We||9007199254740992<We?NaN:Number(We);try{if(isNaN(We))return 61;var mr=Re(Ne);if(ee&2&&!(ve&2)&&(mr.flags&2097155)!==2)throw new Ct(2);if((mr.flags&2097155)===1)throw new Ct(2);if(!mr.Ma.ib)throw new Ct(43);if(!q)throw new Ct(28);var Wr=mr.Ma.ib(mr,q,We,ee,ve),Ur=Wr.Kb;return O[at>>2]=Wr.Ab,L[Bt>>2]=Ur,0}catch(xi){if(typeof ni>"u"||xi.name!=="ErrnoError")throw xi;return-xi.Pa}},z:function(q,ee,ve,Ne,We,at){at=-9007199254740992>at||9007199254740992<at?NaN:Number(at);try{var Bt=Re(We);if(ve&2){if(ve=at,(Bt.node.mode&61440)!==32768)throw new Ct(43);if(!(Ne&2)){var mr=F.slice(q,q+ee);Bt.Ma.jb&&Bt.Ma.jb(Bt,mr,ve,ee,Ne)}}}catch(Wr){if(typeof ni>"u"||Wr.name!=="ErrnoError")throw Wr;return-Wr.Pa}},n:(q,ee)=>{if(Wl[q]&&(clearTimeout(Wl[q].id),delete Wl[q]),!ee)return 0;var ve=setTimeout(()=>{delete Wl[q],xf(()=>Vs(q,performance.now()))},ee);return Wl[q]={id:ve,Xb:ee},0},B:(q,ee,ve,Ne)=>{var We=new Date().getFullYear(),at=new Date(We,0,1).getTimezoneOffset();We=new Date(We,6,1).getTimezoneOffset(),L[q>>2]=60*Math.max(at,We),O[ee>>2]=+(at!=We),ee=Bt=>{var mr=Math.abs(Bt);return`UTC${0<=Bt?"-":"+"}${String(Math.floor(mr/60)).padStart(2,"0")}${String(mr%60).padStart(2,"0")}`},q=ee(at),ee=ee(We),We<at?(Ze(q,F,ve,17),Ze(ee,F,Ne,17)):(Ze(q,F,Ne,17),Ze(ee,F,ve,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:q=>{var ee=F.length;if(q>>>=0,2147483648<q)return!1;for(var ve=1;4>=ve;ve*=2){var Ne=ee*(1+.2/ve);Ne=Math.min(Ne,q+100663296);e:{Ne=(Math.min(2147483648,65536*Math.ceil(Math.max(q,Ne)/65536))-I.buffer.byteLength+65535)/65536|0;try{I.grow(Ne),Q();var We=1;break e}catch{}We=void 0}if(We)return!0}return!1},E:(q,ee)=>{var ve=0;return wc().forEach((Ne,We)=>{var at=ee+ve;for(We=L[q+4*We>>2]=at,at=0;at<Ne.length;++at)M[We++]=Ne.charCodeAt(at);M[We]=0,ve+=Ne.length+1}),0},F:(q,ee)=>{var ve=wc();L[q>>2]=ve.length;var Ne=0;return ve.forEach(We=>Ne+=We.length+1),L[ee>>2]=Ne,0},e:function(q){try{var ee=Re(q);return ya(ee),0}catch(ve){if(typeof ni>"u"||ve.name!=="ErrnoError")throw ve;return ve.Pa}},p:function(q,ee){try{var ve=Re(q);return M[ee]=ve.tty?2:Br(ve.mode)?3:(ve.mode&61440)===40960?7:4,N[ee+2>>1]=0,R[ee+8>>3]=BigInt(0),R[ee+16>>3]=BigInt(0),0}catch(Ne){if(typeof ni>"u"||Ne.name!=="ErrnoError")throw Ne;return Ne.Pa}},w:function(q,ee,ve,Ne){try{e:{var We=Re(q);q=ee;for(var at,Bt=ee=0;Bt<ve;Bt++){var mr=L[q>>2],Wr=L[q+4>>2];q+=8;var Ur=Ia(We,M,mr,Wr,at);if(0>Ur){var xi=-1;break e}if(ee+=Ur,Ur<Wr)break;typeof at<"u"&&(at+=Ur)}xi=ee}return L[Ne>>2]=xi,0}catch(la){if(typeof ni>"u"||la.name!=="ErrnoError")throw la;return la.Pa}},D:function(q,ee,ve,Ne){ee=-9007199254740992>ee||9007199254740992<ee?NaN:Number(ee);try{if(isNaN(ee))return 61;var We=Re(q);return us(We,ee,ve),R[Ne>>3]=BigInt(We.position),We.ob&&ee===0&&ve===0&&(We.ob=null),0}catch(at){if(typeof ni>"u"||at.name!=="ErrnoError")throw at;return at.Pa}},I:function(q){var ve;try{var ee=Re(q);return(ve=ee.Ma)!=null&&ve.fsync?ee.Ma.fsync(ee):0}catch(Ne){if(typeof ni>"u"||Ne.name!=="ErrnoError")throw Ne;return Ne.Pa}},t:function(q,ee,ve,Ne){try{e:{var We=Re(q);q=ee;for(var at,Bt=ee=0;Bt<ve;Bt++){var mr=L[q>>2],Wr=L[q+4>>2];q+=8;var Ur=Fa(We,M,mr,Wr,at);if(0>Ur){var xi=-1;break e}if(ee+=Ur,Ur<Wr)break;typeof at<"u"&&(at+=Ur)}xi=ee}return L[Ne>>2]=xi,0}catch(la){if(typeof ni>"u"||la.name!=="ErrnoError")throw la;return la.Pa}},k:yf},lr;(async function(){var ve;function q(Ne){var We;return lr=Ne.exports,I=lr.M,Q(),Yi=lr.O,re--,(We=u.monitorRunDependencies)==null||We.call(u,re),re==0&&oe&&(Ne=oe,oe=null,Ne()),lr}re++,(ve=u.monitorRunDependencies)==null||ve.call(u,re);var ee={a:cs};return u.instantiateWasm?new Promise(Ne=>{u.instantiateWasm(ee,(We,at)=>{q(We),Ne(We.exports)})}):(z??(z=u.locateFile?u.locateFile("sql-wasm.wasm",y):y+"sql-wasm.wasm"),q((await ue(ee)).instance))})(),u._sqlite3_free=q=>(u._sqlite3_free=lr.P)(q),u._sqlite3_value_text=q=>(u._sqlite3_value_text=lr.Q)(q),u._sqlite3_prepare_v2=(q,ee,ve,Ne,We)=>(u._sqlite3_prepare_v2=lr.R)(q,ee,ve,Ne,We),u._sqlite3_step=q=>(u._sqlite3_step=lr.S)(q),u._sqlite3_reset=q=>(u._sqlite3_reset=lr.T)(q),u._sqlite3_exec=(q,ee,ve,Ne,We)=>(u._sqlite3_exec=lr.U)(q,ee,ve,Ne,We),u._sqlite3_finalize=q=>(u._sqlite3_finalize=lr.V)(q),u._sqlite3_column_name=(q,ee)=>(u._sqlite3_column_name=lr.W)(q,ee),u._sqlite3_column_text=(q,ee)=>(u._sqlite3_column_text=lr.X)(q,ee),u._sqlite3_column_type=(q,ee)=>(u._sqlite3_column_type=lr.Y)(q,ee),u._sqlite3_errmsg=q=>(u._sqlite3_errmsg=lr.Z)(q),u._sqlite3_clear_bindings=q=>(u._sqlite3_clear_bindings=lr._)(q),u._sqlite3_value_blob=q=>(u._sqlite3_value_blob=lr.$)(q),u._sqlite3_value_bytes=q=>(u._sqlite3_value_bytes=lr.aa)(q),u._sqlite3_value_double=q=>(u._sqlite3_value_double=lr.ba)(q),u._sqlite3_value_int=q=>(u._sqlite3_value_int=lr.ca)(q),u._sqlite3_value_type=q=>(u._sqlite3_value_type=lr.da)(q),u._sqlite3_result_blob=(q,ee,ve,Ne)=>(u._sqlite3_result_blob=lr.ea)(q,ee,ve,Ne),u._sqlite3_result_double=(q,ee)=>(u._sqlite3_result_double=lr.fa)(q,ee),u._sqlite3_result_error=(q,ee,ve)=>(u._sqlite3_result_error=lr.ga)(q,ee,ve),u._sqlite3_result_int=(q,ee)=>(u._sqlite3_result_int=lr.ha)(q,ee),u._sqlite3_result_int64=(q,ee)=>(u._sqlite3_result_int64=lr.ia)(q,ee),u._sqlite3_result_null=q=>(u._sqlite3_result_null=lr.ja)(q),u._sqlite3_result_text=(q,ee,ve,Ne)=>(u._sqlite3_result_text=lr.ka)(q,ee,ve,Ne),u._sqlite3_aggregate_context=(q,ee)=>(u._sqlite3_aggregate_context=lr.la)(q,ee),u._sqlite3_column_count=q=>(u._sqlite3_column_count=lr.ma)(q),u._sqlite3_data_count=q=>(u._sqlite3_data_count=lr.na)(q),u._sqlite3_column_blob=(q,ee)=>(u._sqlite3_column_blob=lr.oa)(q,ee),u._sqlite3_column_bytes=(q,ee)=>(u._sqlite3_column_bytes=lr.pa)(q,ee),u._sqlite3_column_double=(q,ee)=>(u._sqlite3_column_double=lr.qa)(q,ee),u._sqlite3_bind_blob=(q,ee,ve,Ne,We)=>(u._sqlite3_bind_blob=lr.ra)(q,ee,ve,Ne,We),u._sqlite3_bind_double=(q,ee,ve)=>(u._sqlite3_bind_double=lr.sa)(q,ee,ve),u._sqlite3_bind_int=(q,ee,ve)=>(u._sqlite3_bind_int=lr.ta)(q,ee,ve),u._sqlite3_bind_text=(q,ee,ve,Ne,We)=>(u._sqlite3_bind_text=lr.ua)(q,ee,ve,Ne,We),u._sqlite3_bind_parameter_index=(q,ee)=>(u._sqlite3_bind_parameter_index=lr.va)(q,ee),u._sqlite3_sql=q=>(u._sqlite3_sql=lr.wa)(q),u._sqlite3_normalized_sql=q=>(u._sqlite3_normalized_sql=lr.xa)(q),u._sqlite3_changes=q=>(u._sqlite3_changes=lr.ya)(q),u._sqlite3_close_v2=q=>(u._sqlite3_close_v2=lr.za)(q),u._sqlite3_create_function_v2=(q,ee,ve,Ne,We,at,Bt,mr,Wr)=>(u._sqlite3_create_function_v2=lr.Aa)(q,ee,ve,Ne,We,at,Bt,mr,Wr),u._sqlite3_update_hook=(q,ee,ve)=>(u._sqlite3_update_hook=lr.Ba)(q,ee,ve),u._sqlite3_open=(q,ee)=>(u._sqlite3_open=lr.Ca)(q,ee);var Fr=u._malloc=q=>(Fr=u._malloc=lr.Da)(q),Ec=u._free=q=>(Ec=u._free=lr.Ea)(q);u._RegisterExtensionFunctions=q=>(u._RegisterExtensionFunctions=lr.Fa)(q);var wf=(q,ee)=>(wf=lr.Ga)(q,ee),Vs=(q,ee)=>(Vs=lr.Ha)(q,ee),Fo=q=>(Fo=lr.Ia)(q),Mo=q=>(Mo=lr.Ja)(q),Lo=()=>(Lo=lr.Ka)();u.stackSave=()=>Lo(),u.stackRestore=q=>Fo(q),u.stackAlloc=q=>Mo(q),u.cwrap=(q,ee,ve,Ne)=>{var We=!ve||ve.every(at=>at==="number"||at==="boolean");return ee!=="string"&&We&&!Ne?u["_"+q]:(...at)=>JA(q,ee,ve,at)},u.addFunction=Qi,u.removeFunction=Io,u.UTF8ToString=he,u.ALLOC_NORMAL=Mu,u.allocate=_c,u.allocateUTF8OnStack=Yl;function yn(){function q(){var We;if(u.calledRun=!0,!B){if(!u.noFSInit&&!Wt){var ee,ve;Wt=!0,Ne??(Ne=u.stdin),ee??(ee=u.stdout),ve??(ve=u.stderr),Ne?To("stdin",Ne):qt("/dev/tty","/dev/stdin"),ee?To("stdout",null,ee):qt("/dev/tty","/dev/stdout"),ve?To("stderr",null,ve):qt("/dev/tty1","/dev/stderr"),Ti("/dev/stdin",0),Ti("/dev/stdout",1),Ti("/dev/stderr",1)}if(lr.N(),rr=!1,(We=u.onRuntimeInitialized)==null||We.call(u),u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;){var Ne=u.postRun.shift();me.unshift(Ne)}le(me)}}if(0<re)oe=yn;else{if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)Be();le(xe),0<re?oe=yn:u.setStatus?(u.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>u.setStatus(""),1),q()},1)):q()}}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return yn(),o}),t)};r.exports=n,r.exports.default=n})(iP);var ate=iP.exports;const aP=Af(ate),ste=Object.freeze(Object.defineProperty({__proto__:null,default:aP},Symbol.toStringTag,{value:"Module"})),Ai={POINT:1,LINE_STRING:2,POLYGON:3,MULTI_POINT:4,MULTI_LINE_STRING:5,MULTI_POLYGON:6,GEOMETRY_COLLECTION:7,POLYHEDRAL_SURFACE:15,TIN:16,TRIANGLE:17};class $N{constructor(e){this.view_=e,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"}readUint8(){return this.view_.getUint8(this.pos_++)}readUint32(e){return this.view_.getUint32((this.pos_+=4)-4,e!==void 0?e:this.isLittleEndian_)}readDouble(e){return this.view_.getFloat64((this.pos_+=8)-8,e!==void 0?e:this.isLittleEndian_)}readPoint(){const e=[];return e.push(this.readDouble()),e.push(this.readDouble()),this.hasZ_&&e.push(this.readDouble()),this.hasM_&&e.push(this.readDouble()),e}readLineString(){const e=this.readUint32(),t=[];for(let n=0;n<e;n++)t.push(this.readPoint());return t}readPolygon(){const e=this.readUint32(),t=[];for(let n=0;n<e;n++)t.push(this.readLineString());return t}readWkbHeader(e){const n=this.readUint8()>0,i=this.readUint32(n),a=Math.floor((i&268435455)/1e3),s=!!(i&2147483648)||a===1||a===3,o=!!(i&1073741824)||a===2||a===3,l=!!(i&536870912),u=(i&268435455)%1e3,c=["XY",s?"Z":"",o?"M":""].join(""),h=l?this.readUint32(n):null;if(e!==void 0&&e!==u)throw new Error("Unexpected WKB geometry type "+u);if(this.initialized_){if(this.isLittleEndian_!==n)throw new Error("Inconsistent endian");if(this.layout_!==c)throw new Error("Inconsistent geometry layout");if(h&&this.srid_!==h)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=n,this.hasZ_=s,this.hasM_=o,this.layout_=c,this.srid_=h,this.initialized_=!0;return u}readWkbPayload(e){switch(e){case Ai.POINT:return this.readPoint();case Ai.LINE_STRING:return this.readLineString();case Ai.POLYGON:case Ai.TRIANGLE:return this.readPolygon();case Ai.MULTI_POINT:return this.readMultiPoint();case Ai.MULTI_LINE_STRING:return this.readMultiLineString();case Ai.MULTI_POLYGON:case Ai.POLYHEDRAL_SURFACE:case Ai.TIN:return this.readMultiPolygon();case Ai.GEOMETRY_COLLECTION:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+e+" is found")}}readWkbBlock(e){return this.readWkbPayload(this.readWkbHeader(e))}readWkbCollection(e,t){const n=this.readUint32(),i=[];for(let a=0;a<n;a++){const s=e.call(this,t);s&&i.push(s)}return i}readMultiPoint(){return this.readWkbCollection(this.readWkbBlock,Ai.POINT)}readMultiLineString(){return this.readWkbCollection(this.readWkbBlock,Ai.LINE_STRING)}readMultiPolygon(){return this.readWkbCollection(this.readWkbBlock,Ai.POLYGON)}readGeometryCollection(){return this.readWkbCollection(this.readGeometry)}readGeometry(){const e=this.readWkbHeader(),t=this.readWkbPayload(e);switch(e){case Ai.POINT:return new ja(t,this.layout_);case Ai.LINE_STRING:return new vl(t,this.layout_);case Ai.POLYGON:case Ai.TRIANGLE:return new zl(t,this.layout_);case Ai.MULTI_POINT:return new UA(t,this.layout_);case Ai.MULTI_LINE_STRING:return new lc(t,this.layout_);case Ai.MULTI_POLYGON:case Ai.POLYHEDRAL_SURFACE:case Ai.TIN:return new af(t,this.layout_);case Ai.GEOMETRY_COLLECTION:return new Gs(t);default:return null}}getSrid(){return this.srid_}}class ote{constructor(e){e=e||{},this.layout_=e.layout,this.isLittleEndian_=e.littleEndian!==!1,this.isEWKB_=e.ewkb!==!1,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},e.nodata)}writeUint8(e){this.writeQueue_.push([1,e])}writeUint32(e){this.writeQueue_.push([4,e])}writeDouble(e){this.writeQueue_.push([8,e])}writePoint(e,t){const n=Object.assign.apply(null,t.split("").map((i,a)=>({[i]:e[a]})));for(const i of this.layout_)this.writeDouble(i in n?n[i]:this.nodata_[i])}writeLineString(e,t){this.writeUint32(e.length);for(let n=0;n<e.length;n++)this.writePoint(e[n],t)}writePolygon(e,t){this.writeUint32(e.length);for(let n=0;n<e.length;n++)this.writeLineString(e[n],t)}writeWkbHeader(e,t){e%=1e3,this.layout_.includes("Z")&&(e+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(e+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(t)&&(e|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(e),this.isEWKB_&&Number.isInteger(t)&&this.writeUint32(t)}writeMultiPoint(e,t){this.writeUint32(e.length);for(let n=0;n<e.length;n++)this.writeWkbHeader(1),this.writePoint(e[n],t)}writeMultiLineString(e,t){this.writeUint32(e.length);for(let n=0;n<e.length;n++)this.writeWkbHeader(2),this.writeLineString(e[n],t)}writeMultiPolygon(e,t){this.writeUint32(e.length);for(let n=0;n<e.length;n++)this.writeWkbHeader(3),this.writePolygon(e[n],t)}writeGeometryCollection(e){this.writeUint32(e.length);for(let t=0;t<e.length;t++)this.writeGeometry(e[t])}findMinimumLayout(e,t="XYZM"){const n=(i,a)=>i===a?i:i==="XYZM"?a:a==="XYZM"?i:"XY";if(e instanceof rh)return n(e.getLayout(),t);if(e instanceof Gs){const i=e.getGeometriesArray();for(let a=0;a<i.length&&t!=="XY";a++)t=this.findMinimumLayout(i[a],t)}return t}writeGeometry(e,t){const n={Point:Ai.POINT,LineString:Ai.LINE_STRING,Polygon:Ai.POLYGON,MultiPoint:Ai.MULTI_POINT,MultiLineString:Ai.MULTI_LINE_STRING,MultiPolygon:Ai.MULTI_POLYGON,GeometryCollection:Ai.GEOMETRY_COLLECTION},i=e.getType(),a=n[i];if(!a)throw new Error("GeometryType "+i+" is not supported");this.layout_||(this.layout_=this.findMinimumLayout(e)),this.writeWkbHeader(a,t),e instanceof rh?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[i].call(this,e.getCoordinates(),e.getLayout()):e instanceof Gs&&this.writeGeometryCollection(e.getGeometriesArray())}getBuffer(){const e=this.writeQueue_.reduce((a,s)=>a+s[0],0),t=new ArrayBuffer(e),n=new DataView(t);let i=0;return this.writeQueue_.forEach(a=>{switch(a[0]){case 1:n.setUint8(i,a[1]);break;case 4:n.setUint32(i,a[1],this.isLittleEndian_);break;case 8:n.setFloat64(i,a[1],this.isLittleEndian_);break}i+=a[0]}),t}}class lte extends M4{constructor(e){super(),e=e||{},this.splitCollection=!!e.splitCollection,this.viewCache_=null,this.hex_=e.hex!==!1,this.littleEndian_=e.littleEndian!==!1,this.ewkb_=e.ewkb!==!1,this.layout_=e.geometryLayout,this.nodataZ_=e.nodataZ||0,this.nodataM_=e.nodataM||0,this.srid_=e.srid}getType(){return this.hex_?"text":"arraybuffer"}readFeature(e,t){return new yi({geometry:this.readGeometry(e,t)})}readFeatures(e,t){let n=[];const i=this.readGeometry(e,t);return this.splitCollection&&i instanceof Gs?n=i.getGeometriesArray():n=[i],n.map(a=>new yi({geometry:a}))}readGeometry(e,t){const n=KN(e);if(!n)return null;const a=new $N(n).readGeometry();return this.viewCache_=n,t=this.getReadOptions(e,t),this.viewCache_=null,ql(a,!1,t)}readProjection(e){const t=this.viewCache_||KN(e);if(!t)return;const n=new $N(t);return n.readWkbHeader(),n.getSrid()&&Ci("EPSG:"+n.getSrid())||void 0}writeFeature(e,t){return this.writeGeometry(e.getGeometry(),t)}writeFeatures(e,t){return this.writeGeometry(new Gs(e.map(n=>n.getGeometry())),t)}writeGeometry(e,t){t=this.adaptOptions(t);const n=new ote({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}});let i=Number.isInteger(this.srid_)?Number(this.srid_):null;if(this.srid_!==!1&&!Number.isInteger(this.srid_)){const s=t.dataProjection&&Ci(t.dataProjection);if(s){const o=s.getCode();o.startsWith("EPSG:")&&(i=Number(o.substring(5)))}}n.writeGeometry(ql(e,!0,t),i);const a=n.getBuffer();return this.hex_?ute(a):a}}function ute(r){const e=new Uint8Array(r);return Array.from(e.values()).map(t=>(t<16?"0":"")+Number(t).toString(16).toUpperCase()).join("")}function cte(r){const e=new Uint8Array(r.length/2);for(let t=0;t<r.length/2;t++)e[t]=parseInt(r.substr(t*2,2),16);return new DataView(e.buffer)}function KN(r){return typeof r=="string"?cte(r):ArrayBuffer.isView(r)?r instanceof DataView?r:new DataView(r.buffer,r.byteOffset,r.byteLength):r instanceof ArrayBuffer?new DataView(r):null}class hte{constructor(){this.SQL=null,this.format=new rs,this.wkbFormat=new lte}async initSQL(){return this.SQL||(this.SQL=await aP({locateFile:e=>`https://sql.js.org/dist/${e}`})),this.SQL}async loadFromFile(e){return new Promise((t,n)=>{const i=new FileReader;i.onload=async a=>{try{const s=a.target.result,o=await this.loadFromArrayBuffer(s,e.name);t(o)}catch(s){n(new Error("GeoPackage 파싱 실패: "+s.message))}},i.onerror=()=>{n(new Error("파일 읽기 실패"))},i.readAsArrayBuffer(e)})}async loadFromArrayBuffer(e,t){const n=await this.initSQL(),i=new n.Database(new Uint8Array(e));try{const a=this.getGeometryTables(i);if(a.length===0)throw new Error("GeoPackage에 지오메트리 레이어가 없습니다.");const s=[],o=t.replace(".gpkg","");for(const l of a)try{const u=await this.loadTable(i,l,o);u&&s.push(u)}catch(u){console.warn("테이블 로드 실패:",l.table_name,u)}if(s.length===0)throw new Error("로드할 수 있는 레이어가 없습니다.");return s}finally{i.close()}}getGeometryTables(e){try{const t=e.exec(`
        SELECT table_name, column_name, geometry_type_name, srs_id
        FROM gpkg_geometry_columns
      `);return!t.length||!t[0].values.length?[]:t[0].values.map(n=>({table_name:n[0],column_name:n[1],geometry_type:n[2],srs_id:n[3]}))}catch(t){return console.warn("gpkg_geometry_columns 조회 실패:",t),[]}}loadTable(e,t,n){const{table_name:i,column_name:a,srs_id:s}=t,o=e.exec(`SELECT * FROM "${i}"`);if(!o.length||!o[0].values.length)return null;const l=o[0].columns,u=o[0].values,c=l.indexOf(a);if(c===-1)throw new Error("지오메트리 컬럼을 찾을 수 없습니다: "+a);const h=[];for(const y of u)try{const v=y[c];if(!v)continue;const w=this.parseGpkgGeometry(v);if(!w)continue;const x={};l.forEach((b,C)=>{C!==c&&b!=="fid"&&(x[b]=y[C])}),h.push({type:"Feature",geometry:w,properties:x})}catch(v){console.warn("피처 파싱 실패:",v)}if(h.length===0)return null;const f={type:"FeatureCollection",features:h},A=this.format.readFeatures(f,{dataProjection:s===4326?"EPSG:4326":"EPSG:"+s,featureProjection:"EPSG:3857"}),d=n+" - "+i;return pt.addLayer({name:d,type:"vector",features:A})}parseGpkgGeometry(e){if(!e||e.length<8)return null;const t=new Uint8Array(e.buffer?e.buffer:e);if(t[0]===71&&t[1]===80){const i=t[3]>>1&7;let a=0;switch(i){case 1:a=32;break;case 2:a=48;break;case 3:a=48;break;case 4:a=64;break}const s=8+a,o=t.slice(s);return this.wkbToGeoJSON(o)}else return this.wkbToGeoJSON(t)}wkbToGeoJSON(e){try{const t=this.wkbFormat.readFeature(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});if(t){const n=t.getGeometry(),i=new rs;return JSON.parse(i.writeGeometry(n))}}catch{return this.parseWKBManual(e)}return null}parseWKBManual(e){if(!e||e.length<5)return null;const t=new DataView(e.buffer||new ArrayBuffer(e.length));let n=0;const a=e[n++]===1,s=t.getUint32(n,a);if(n+=4,s===1){const o=t.getFloat64(n,a);n+=8;const l=t.getFloat64(n,a);return{type:"Point",coordinates:[o,l]}}return null}}const sP=new hte;function js(r){return(e,...t)=>fte(r,e,t)}function Cp(r,e){return js(oP(r,e).get)}const{apply:fte,getOwnPropertyDescriptor:oP,getPrototypeOf:W4,ownKeys:Ate}=Reflect,{iterator:B1,toStringTag:dte}=Symbol,gte=Object,{create:Y4,defineProperty:pte}=gte,mte=Array,vte=mte.prototype,lP=vte[B1],yte=js(lP),uP=ArrayBuffer,xte=uP.prototype;Cp(xte,"byteLength");const VN=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;VN&&Cp(VN.prototype,"byteLength");const cP=W4(Uint8Array);cP.from;const Xo=cP.prototype;Xo[B1];js(Xo.keys);js(Xo.values);js(Xo.entries);js(Xo.set);js(Xo.reverse);js(Xo.fill);js(Xo.copyWithin);js(Xo.sort);js(Xo.slice);js(Xo.subarray);Cp(Xo,"buffer");Cp(Xo,"byteOffset");Cp(Xo,"length");Cp(Xo,dte);const wte=Uint8Array,hP=Uint16Array,X4=Uint32Array,_te=Float32Array,zv=W4([][B1]()),fP=js(zv.next),Ete=js(function*(){}().next),bte=W4(zv),Cte=DataView.prototype,Ste=js(Cte.getUint16),Z4=WeakMap,AP=Z4.prototype,dP=js(AP.get),Bte=js(AP.set),gP=new Z4,Tte=Y4(null,{next:{value:function(){const e=dP(gP,this);return fP(e)}},[B1]:{value:function(){return this}}});function Nte(r){if(r[B1]===lP&&zv.next===fP)return r;const e=Y4(Tte);return Bte(gP,e,yte(r)),e}const Ite=new Z4,Fte=Y4(bte,{next:{value:function(){const e=dP(Ite,this);return Ete(e)},writable:!0,configurable:!0}});for(const r of Ate(zv))r!=="next"&&pte(Fte,r,oP(zv,r));const pP=new uP(4),Mte=new _te(pP),Lte=new X4(pP),Fc=new hP(512),Mc=new wte(512);for(let r=0;r<256;++r){const e=r-127;e<-24?(Fc[r]=0,Fc[r|256]=32768,Mc[r]=24,Mc[r|256]=24):e<-14?(Fc[r]=1024>>-e-14,Fc[r|256]=1024>>-e-14|32768,Mc[r]=-e-1,Mc[r|256]=-e-1):e<=15?(Fc[r]=e+15<<10,Fc[r|256]=e+15<<10|32768,Mc[r]=13,Mc[r|256]=13):e<128?(Fc[r]=31744,Fc[r|256]=64512,Mc[r]=24,Mc[r|256]=24):(Fc[r]=31744,Fc[r|256]=64512,Mc[r]=13,Mc[r|256]=13)}const J4=new X4(2048);for(let r=1;r<1024;++r){let e=r<<13,t=0;for(;!(e&8388608);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,J4[r]=e|t}for(let r=1024;r<2048;++r)J4[r]=939524096+(r-1024<<13);const Sp=new X4(64);for(let r=1;r<31;++r)Sp[r]=r<<23;Sp[31]=1199570944;Sp[32]=2147483648;for(let r=33;r<63;++r)Sp[r]=2147483648+(r-32<<23);Sp[63]=3347054592;const mP=new hP(64);for(let r=1;r<64;++r)r!==32&&(mP[r]=1024);function Dte(r){const e=r>>10;return Lte[0]=J4[mP[e]+(r&1023)]+Sp[e],Mte[0]}function vP(r,e,...t){return Dte(Ste(r,e,...Nte(t)))}var eB={exports:{}};function yP(r,e,t){const n=t&&t.debug||!1;n&&console.log("[xml-utils] getting "+e+" in "+r);const i=typeof r=="object"?r.outer:r,a=i.slice(0,i.indexOf(">")+1),s=['"',"'"];for(let o=0;o<s.length;o++){const l=s[o],u=e+"\\="+l+"([^"+l+"]*)"+l;n&&console.log("[xml-utils] pattern:",u);const h=new RegExp(u).exec(a);if(n&&console.log("[xml-utils] match:",h),h)return h[1]}}eB.exports=yP;eB.exports.default=yP;var kte=eB.exports;const fb=Af(kte);var tB={exports:{}},rB={exports:{}},nB={exports:{}};function xP(r,e,t){const i=new RegExp(e).exec(r.slice(t));return i?t+i.index:-1}nB.exports=xP;nB.exports.default=xP;var Rte=nB.exports,iB={exports:{}};function wP(r,e,t){const i=new RegExp(e).exec(r.slice(t));return i?t+i.index+i[0].length-1:-1}iB.exports=wP;iB.exports.default=wP;var Ote=iB.exports,aB={exports:{}};function _P(r,e){const t=new RegExp(e,"g"),n=r.match(t);return n?n.length:0}aB.exports=_P;aB.exports.default=_P;var Pte=aB.exports;const Ute=Rte,Ab=Ote,WN=Pte;function EP(r,e,t){const n=t&&t.debug||!1,i=!(t&&typeof t.nested===!1),a=t&&t.startIndex||0;n&&console.log("[xml-utils] starting findTagByName with",e," and ",t);const s=Ute(r,`<${e}[ 
>/]`,a);if(n&&console.log("[xml-utils] start:",s),s===-1)return;const o=r.slice(s+e.length);let l=Ab(o,"^[^<]*[ /]>",0);const u=l!==-1&&o[l-1]==="/";if(n&&console.log("[xml-utils] selfClosing:",u),u===!1)if(i){let A=0,d=1,p=0;for(;(l=Ab(o,"[ /]"+e+">",A))!==-1;){const y=o.substring(A,l+1);if(d+=WN(y,"<"+e+`[ 
	>]`),p+=WN(y,"</"+e+">"),p>=d)break;A=l}}else l=Ab(o,"[ /]"+e+">",0);const c=s+e.length+l+1;if(n&&console.log("[xml-utils] end:",c),c===-1)return;const h=r.slice(s,c);let f;return u?f=null:f=h.slice(h.indexOf(">")+1,h.lastIndexOf("<")),{inner:f,outer:h,start:s,end:c}}rB.exports=EP;rB.exports.default=EP;var Qte=rB.exports;const Gte=Qte;function bP(r,e,t){const n=[],i=t&&t.debug||!1,a=t&&typeof t.nested=="boolean"?t.nested:!0;let s=t&&t.startIndex||0,o;for(;o=Gte(r,e,{debug:i,startIndex:s});)a?s=o.start+1+e.length:s=o.end,n.push(o);return i&&console.log("findTagsByName found",n.length,"tags"),n}tB.exports=bP;tB.exports.default=bP;var Hte=tB.exports;const zte=Af(Hte),sv={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},Rc={};for(const r in sv)sv.hasOwnProperty(r)&&(Rc[sv[r]]=parseInt(r,10));const qte=[Rc.BitsPerSample,Rc.ExtraSamples,Rc.SampleFormat,Rc.StripByteCounts,Rc.StripOffsets,Rc.StripRowCounts,Rc.TileByteCounts,Rc.TileOffsets,Rc.SubIFDs],db={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},wn={};for(const r in db)db.hasOwnProperty(r)&&(wn[db[r]]=parseInt(r,10));const Ml={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,CMYK:5,YCbCr:6,CIELab:8},jte={Unspecified:0},vQe={AddCompression:1},yQe={None:0,Deflate:1,Zstandard:2},$te={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function Kte(r,e){const{width:t,height:n}=r,i=new Uint8Array(t*n*3);let a;for(let s=0,o=0;s<r.length;++s,o+=3)a=256-r[s]/e*256,i[o]=a,i[o+1]=a,i[o+2]=a;return i}function Vte(r,e){const{width:t,height:n}=r,i=new Uint8Array(t*n*3);let a;for(let s=0,o=0;s<r.length;++s,o+=3)a=r[s]/e*256,i[o]=a,i[o+1]=a,i[o+2]=a;return i}function Wte(r,e){const{width:t,height:n}=r,i=new Uint8Array(t*n*3),a=e.length/3,s=e.length/3*2;for(let o=0,l=0;o<r.length;++o,l+=3){const u=r[o];i[l]=e[u]/65536*256,i[l+1]=e[u+a]/65536*256,i[l+2]=e[u+s]/65536*256}return i}function Yte(r){const{width:e,height:t}=r,n=new Uint8Array(e*t*3);for(let i=0,a=0;i<r.length;i+=4,a+=3){const s=r[i],o=r[i+1],l=r[i+2],u=r[i+3];n[a]=255*((255-s)/256)*((255-u)/256),n[a+1]=255*((255-o)/256)*((255-u)/256),n[a+2]=255*((255-l)/256)*((255-u)/256)}return n}function Xte(r){const{width:e,height:t}=r,n=new Uint8ClampedArray(e*t*3);for(let i=0,a=0;i<r.length;i+=3,a+=3){const s=r[i],o=r[i+1],l=r[i+2];n[a]=s+1.402*(l-128),n[a+1]=s-.34414*(o-128)-.71414*(l-128),n[a+2]=s+1.772*(o-128)}return n}const Zte=.95047,Jte=1,ere=1.08883;function tre(r){const{width:e,height:t}=r,n=new Uint8Array(e*t*3);for(let i=0,a=0;i<r.length;i+=3,a+=3){const s=r[i+0],o=r[i+1]<<24>>24,l=r[i+2]<<24>>24;let u=(s+16)/116,c=o/500+u,h=u-l/200,f,A,d;c=Zte*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),u=Jte*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),h=ere*(h*h*h>.008856?h*h*h:(h-16/116)/7.787),f=c*3.2406+u*-1.5372+h*-.4986,A=c*-.9689+u*1.8758+h*.0415,d=c*.0557+u*-.204+h*1.057,f=f>.0031308?1.055*f**(1/2.4)-.055:12.92*f,A=A>.0031308?1.055*A**(1/2.4)-.055:12.92*A,d=d>.0031308?1.055*d**(1/2.4)-.055:12.92*d,n[a]=Math.max(0,Math.min(1,f))*255,n[a+1]=Math.max(0,Math.min(1,A))*255,n[a+2]=Math.max(0,Math.min(1,d))*255}return n}const CP=new Map;function GA(r,e){Array.isArray(r)||(r=[r]),r.forEach(t=>CP.set(t,e))}async function rre(r){const e=CP.get(r.Compression);if(!e)throw new Error(`Unknown compression method identifier: ${r.Compression}`);const t=await e();return new t(r)}GA([void 0,1],()=>jl(()=>import("./raw-in9isEBO.js"),__vite__mapDeps([0,1])).then(r=>r.default));GA(5,()=>jl(()=>import("./lzw-_aCqfs4w.js"),__vite__mapDeps([2,1])).then(r=>r.default));GA(6,()=>{throw new Error("old style JPEG compression is not supported.")});GA(7,()=>jl(()=>import("./jpeg-JhJy4lL1.js"),__vite__mapDeps([3,1])).then(r=>r.default));GA([8,32946],()=>jl(()=>import("./deflate-Dthki0TA.js"),__vite__mapDeps([4,5,1])).then(r=>r.default));GA(32773,()=>jl(()=>import("./packbits-DDWKfGV_.js"),__vite__mapDeps([6,1])).then(r=>r.default));GA(34887,()=>jl(()=>import("./lerc-BLb85pLQ.js"),__vite__mapDeps([7,5,1])).then(async r=>(await r.zstd.init(),r)).then(r=>r.default));GA(50001,()=>jl(()=>import("./webimage-DBgUwIbt.js"),__vite__mapDeps([8,1])).then(r=>r.default));function __(r,e,t,n=1){return new(Object.getPrototypeOf(r)).constructor(e*t*n)}function nre(r,e,t,n,i){const a=e/n,s=t/i;return r.map(o=>{const l=__(o,n,i);for(let u=0;u<i;++u){const c=Math.min(Math.round(s*u),t-1);for(let h=0;h<n;++h){const f=Math.min(Math.round(a*h),e-1),A=o[c*e+f];l[u*n+h]=A}}return l})}function Ig(r,e,t){return(1-t)*r+t*e}function ire(r,e,t,n,i){const a=e/n,s=t/i;return r.map(o=>{const l=__(o,n,i);for(let u=0;u<i;++u){const c=s*u,h=Math.floor(c),f=Math.min(Math.ceil(c),t-1);for(let A=0;A<n;++A){const d=a*A,p=d%1,y=Math.floor(d),v=Math.min(Math.ceil(d),e-1),w=o[h*e+y],x=o[h*e+v],b=o[f*e+y],C=o[f*e+v],S=Ig(Ig(w,x,p),Ig(b,C,p),c%1);l[u*n+A]=S}}return l})}function are(r,e,t,n,i,a="nearest"){switch(a.toLowerCase()){case"nearest":return nre(r,e,t,n,i);case"bilinear":case"linear":return ire(r,e,t,n,i);default:throw new Error(`Unsupported resampling method: '${a}'`)}}function sre(r,e,t,n,i,a){const s=e/n,o=t/i,l=__(r,n,i,a);for(let u=0;u<i;++u){const c=Math.min(Math.round(o*u),t-1);for(let h=0;h<n;++h){const f=Math.min(Math.round(s*h),e-1);for(let A=0;A<a;++A){const d=r[c*e*a+f*a+A];l[u*n*a+h*a+A]=d}}}return l}function ore(r,e,t,n,i,a){const s=e/n,o=t/i,l=__(r,n,i,a);for(let u=0;u<i;++u){const c=o*u,h=Math.floor(c),f=Math.min(Math.ceil(c),t-1);for(let A=0;A<n;++A){const d=s*A,p=d%1,y=Math.floor(d),v=Math.min(Math.ceil(d),e-1);for(let w=0;w<a;++w){const x=r[h*e*a+y*a+w],b=r[h*e*a+v*a+w],C=r[f*e*a+y*a+w],S=r[f*e*a+v*a+w],I=Ig(Ig(x,b,p),Ig(C,S,p),c%1);l[u*n*a+A*a+w]=I}}}return l}function lre(r,e,t,n,i,a,s="nearest"){switch(s.toLowerCase()){case"nearest":return sre(r,e,t,n,i,a);case"bilinear":case"linear":return ore(r,e,t,n,i,a);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function ure(r,e,t){let n=0;for(let i=e;i<t;++i)n+=r[i];return n}function dS(r,e,t){switch(r){case 1:if(e<=8)return new Uint8Array(t);if(e<=16)return new Uint16Array(t);if(e<=32)return new Uint32Array(t);break;case 2:if(e===8)return new Int8Array(t);if(e===16)return new Int16Array(t);if(e===32)return new Int32Array(t);break;case 3:switch(e){case 16:case 32:return new Float32Array(t);case 64:return new Float64Array(t)}break}throw Error("Unsupported data format/bitsPerSample")}function cre(r,e){return(r===1||r===2)&&e<=32&&e%8===0?!1:!(r===3&&(e===16||e===32||e===64))}function hre(r,e,t,n,i,a,s){const o=new DataView(r),l=t===2?s*a:s*a*n,u=t===2?1:n,c=dS(e,i,l),h=parseInt("1".repeat(i),2);if(e===1){let f;t===1?f=n*i:f=i;let A=a*f;A&7&&(A=A+7&-8);for(let d=0;d<s;++d){const p=d*A;for(let y=0;y<a;++y){const v=p+y*u*i;for(let w=0;w<u;++w){const x=v+w*i,b=(d*a+y)*u+w,C=Math.floor(x/8),S=x%8;if(S+i<=8)c[b]=o.getUint8(C)>>8-i-S&h;else if(S+i<=16)c[b]=o.getUint16(C)>>16-i-S&h;else if(S+i<=24){const I=o.getUint16(C)<<8|o.getUint8(C+2);c[b]=I>>24-i-S&h}else c[b]=o.getUint32(C)>>32-i-S&h}}}}return c.buffer}class fre{constructor(e,t,n,i,a,s){this.fileDirectory=e,this.geoKeys=t,this.dataView=n,this.littleEndian=i,this.tiles=a?{}:null,this.isTiled=!e.StripOffsets;const o=e.PlanarConfiguration;if(this.planarConfiguration=typeof o>"u"?1:o,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=s}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){const t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,n=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(n<=8)return DataView.prototype.getUint8;if(n<=16)return DataView.prototype.getUint16;if(n<=32)return DataView.prototype.getUint32;break;case 2:if(n<=8)return DataView.prototype.getInt8;if(n<=16)return DataView.prototype.getInt16;if(n<=32)return DataView.prototype.getInt32;break;case 3:switch(n){case 16:return function(i,a){return vP(this,i,a)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,t){const n=this.getSampleFormat(e),i=this.getBitsPerSample(e);return dS(n,i,t)}async getTileOrStrip(e,t,n,i,a){const s=Math.ceil(this.getWidth()/this.getTileWidth()),o=Math.ceil(this.getHeight()/this.getTileHeight());let l;const{tiles:u}=this;this.planarConfiguration===1?l=t*s+e:this.planarConfiguration===2&&(l=n*s*o+t*s+e);let c,h;this.isTiled?(c=this.fileDirectory.TileOffsets[l],h=this.fileDirectory.TileByteCounts[l]):(c=this.fileDirectory.StripOffsets[l],h=this.fileDirectory.StripByteCounts[l]);const f=(await this.source.fetch([{offset:c,length:h}],a))[0];let A;return u===null||!u[l]?(A=(async()=>{let d=await i.decode(this.fileDirectory,f);const p=this.getSampleFormat(),y=this.getBitsPerSample();return cre(p,y)&&(d=hre(d,p,this.planarConfiguration,this.getSamplesPerPixel(),y,this.getTileWidth(),this.getBlockHeight(t))),d})(),u!==null&&(u[l]=A)):A=u[l],{x:e,y:t,sample:n,data:await A}}async _readRaster(e,t,n,i,a,s,o,l,u){const c=this.getTileWidth(),h=this.getTileHeight(),f=this.getWidth(),A=this.getHeight(),d=Math.max(Math.floor(e[0]/c),0),p=Math.min(Math.ceil(e[2]/c),Math.ceil(f/c)),y=Math.max(Math.floor(e[1]/h),0),v=Math.min(Math.ceil(e[3]/h),Math.ceil(A/h)),w=e[2]-e[0];let x=this.getBytesPerPixel();const b=[],C=[];for(let B=0;B<t.length;++B)this.planarConfiguration===1?b.push(ure(this.fileDirectory.BitsPerSample,0,t[B])/8):b.push(0),C.push(this.getReaderForSample(t[B]));const S=[],{littleEndian:I}=this;for(let B=y;B<v;++B)for(let T=d;T<p;++T){let M;this.planarConfiguration===1&&(M=this.getTileOrStrip(T,B,0,a,u));for(let F=0;F<t.length;++F){const N=F,O=t[F];this.planarConfiguration===2&&(x=this.getSampleByteSize(O),M=this.getTileOrStrip(T,B,O,a,u));const L=M.then(G=>{const R=G.data,U=new DataView(R),W=this.getBlockHeight(G.y),Q=G.y*h,re=G.x*c,oe=Q+W,P=(G.x+1)*c,z=C[N],K=Math.min(W,W-(oe-e[3]),A-Q),J=Math.min(c,c-(P-e[2]),f-re);for(let ue=Math.max(0,e[1]-Q);ue<K;++ue)for(let ge=Math.max(0,e[0]-re);ge<J;++ge){const le=(ue*c+ge)*x,me=z.call(U,le+b[N],I);let xe;i?(xe=(ue+Q-e[1])*w*t.length+(ge+re-e[0])*t.length+N,n[xe]=me):(xe=(ue+Q-e[1])*w+ge+re-e[0],n[N][xe]=me)}});S.push(L)}}if(await Promise.all(S),s&&e[2]-e[0]!==s||o&&e[3]-e[1]!==o){let B;return i?B=lre(n,e[2]-e[0],e[3]-e[1],s,o,t.length,l):B=are(n,e[2]-e[0],e[3]-e[1],s,o,l),B.width=s,B.height=o,B}return n.width=s||e[2]-e[0],n.height=o||e[3]-e[1],n}async readRasters({window:e,samples:t=[],interleave:n,pool:i=null,width:a,height:s,resampleMethod:o,fillValue:l,signal:u}={}){const c=e||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");const h=c[2]-c[0],f=c[3]-c[1],A=h*f,d=this.getSamplesPerPixel();if(!t||!t.length)for(let w=0;w<d;++w)t.push(w);else for(let w=0;w<t.length;++w)if(t[w]>=d)return Promise.reject(new RangeError(`Invalid sample index '${t[w]}'.`));let p;if(n){const w=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,x=Math.max.apply(null,this.fileDirectory.BitsPerSample);p=dS(w,x,A*t.length),l&&p.fill(l)}else{p=[];for(let w=0;w<t.length;++w){const x=this.getArrayForSample(t[w],A);Array.isArray(l)&&w<l.length?x.fill(l[w]):l&&!Array.isArray(l)&&x.fill(l),p.push(x)}}const y=i||await rre(this.fileDirectory);return await this._readRaster(c,t,p,n,y,a,s,o,u)}async readRGB({window:e,interleave:t=!0,pool:n=null,width:i,height:a,resampleMethod:s,enableAlpha:o=!1,signal:l}={}){const u=e||[0,0,this.getWidth(),this.getHeight()];if(u[0]>u[2]||u[1]>u[3])throw new Error("Invalid subsets");const c=this.fileDirectory.PhotometricInterpretation;if(c===Ml.RGB){let v=[0,1,2];if(this.fileDirectory.ExtraSamples!==jte.Unspecified&&o){v=[];for(let w=0;w<this.fileDirectory.BitsPerSample.length;w+=1)v.push(w)}return this.readRasters({window:e,interleave:t,samples:v,pool:n,width:i,height:a,resampleMethod:s,signal:l})}let h;switch(c){case Ml.WhiteIsZero:case Ml.BlackIsZero:case Ml.Palette:h=[0];break;case Ml.CMYK:h=[0,1,2,3];break;case Ml.YCbCr:case Ml.CIELab:h=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const f={window:u,interleave:!0,samples:h,pool:n,width:i,height:a,resampleMethod:s,signal:l},{fileDirectory:A}=this,d=await this.readRasters(f),p=2**this.fileDirectory.BitsPerSample[0];let y;switch(c){case Ml.WhiteIsZero:y=Kte(d,p);break;case Ml.BlackIsZero:y=Vte(d,p);break;case Ml.Palette:y=Wte(d,A.ColorMap);break;case Ml.CMYK:y=Yte(d);break;case Ml.YCbCr:y=Xte(d);break;case Ml.CIELab:y=tre(d);break;default:throw new Error("Unsupported photometric interpretation.")}if(!t){const v=new Uint8Array(y.length/3),w=new Uint8Array(y.length/3),x=new Uint8Array(y.length/3);for(let b=0,C=0;b<y.length;b+=3,++C)v[C]=y[b],w[C]=y[b+1],x[C]=y[b+2];y=[v,w,x]}return y.width=d.width,y.height=d.height,y}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}getGDALMetadata(e=null){const t={};if(!this.fileDirectory.GDAL_METADATA)return null;const n=this.fileDirectory.GDAL_METADATA;let i=zte(n,"Item");e===null?i=i.filter(a=>fb(a,"sample")===void 0):i=i.filter(a=>Number(fb(a,"sample"))===e);for(let a=0;a<i.length;++a){const s=i[a];t[fb(s,"name")]=s.inner}return t}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&e.length===6)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const t=this.fileDirectory.ModelPixelScale,n=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(n)return n[1]===0&&n[4]===0?[n[0],-n[5],n[10]]:[Math.sqrt(n[0]*n[0]+n[4]*n[4]),-Math.sqrt(n[1]*n[1]+n[5]*n[5]),n[10]];if(e){const[i,a,s]=e.getResolution();return[i*e.getWidth()/this.getWidth(),a*e.getHeight()/this.getHeight(),s*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(e=!1){const t=this.getHeight(),n=this.getWidth();if(this.fileDirectory.ModelTransformation&&!e){const[i,a,s,o,l,u,c,h]=this.fileDirectory.ModelTransformation,A=[[0,0],[0,t],[n,0],[n,t]].map(([y,v])=>[o+i*y+a*v,h+l*y+u*v]),d=A.map(y=>y[0]),p=A.map(y=>y[1]);return[Math.min(...d),Math.min(...p),Math.max(...d),Math.max(...p)]}else{const i=this.getOrigin(),a=this.getResolution(),s=i[0],o=i[1],l=s+a[0]*n,u=o+a[1]*t;return[Math.min(s,l),Math.min(o,u),Math.max(s,l),Math.max(o,u)]}}}class Are{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){const n=this.getUint32(e,t),i=this.getUint32(e+4,t);let a;if(t){if(a=n+2**32*i,!Number.isSafeInteger(a))throw new Error(`${a} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return a}if(a=2**32*n+i,!Number.isSafeInteger(a))throw new Error(`${a} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return a}getInt64(e,t){let n=0;const i=(this._dataView.getUint8(e+(t?7:0))&128)>0;let a=!0;for(let s=0;s<8;s++){let o=this._dataView.getUint8(e+(t?s:7-s));i&&(a?o!==0&&(o=~(o-1)&255,a=!1):o=~o&255),n+=o*256**s}return i&&(n=-n),n}getUint8(e,t){return this._dataView.getUint8(e,t)}getInt8(e,t){return this._dataView.getInt8(e,t)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat16(e,t){return vP(this._dataView,e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}}class dre{constructor(e,t,n,i){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=n,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const t=this.readUint32(e),n=this.readUint32(e+4);let i;if(this._littleEndian){if(i=t+2**32*n,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*t+n,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(e){let t=0;const n=(this._dataView.getUint8(e+(this._littleEndian?7:0))&128)>0;let i=!0;for(let a=0;a<8;a++){let s=this._dataView.getUint8(e+(this._littleEndian?a:7-a));n&&(i?s!==0&&(s=~(s-1)&255,i=!1):s=~s&255),t+=s*256**a}return n&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}const YN=`\r
\r
`;function SP(r){if(typeof Object.fromEntries<"u")return Object.fromEntries(r);const e={};for(const[t,n]of r)e[t.toLowerCase()]=n;return e}function gre(r){const e=r.split(`\r
`).map(t=>{const n=t.split(":").map(i=>i.trim());return n[0]=n[0].toLowerCase(),n});return SP(e)}function pre(r){const[e,...t]=r.split(";").map(i=>i.trim()),n=t.map(i=>i.split("="));return{type:e,params:SP(n)}}function gS(r){let e,t,n;return r&&([,e,t,n]=r.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),t=parseInt(t,10),n=parseInt(n,10)),{start:e,end:t,total:n}}function mre(r,e){let t=null;const n=new TextDecoder("ascii"),i=[],a=`--${e}`,s=`${a}--`;for(let o=0;o<10;++o)n.decode(new Uint8Array(r,o,a.length))===a&&(t=o);if(t===null)throw new Error("Could not find initial boundary");for(;t<r.byteLength;){const o=n.decode(new Uint8Array(r,t,Math.min(a.length+1024,r.byteLength-t)));if(o.length===0||o.startsWith(s))break;if(!o.startsWith(a))throw new Error("Part does not start with boundary");const l=o.substr(a.length+2);if(l.length===0)break;const u=l.indexOf(YN),c=gre(l.substr(0,u)),{start:h,end:f,total:A}=gS(c["content-range"]),d=t+a.length+u+YN.length,p=parseInt(f,10)+1-parseInt(h,10);i.push({headers:c,data:r.slice(d,d+p),offset:h,length:p,fileSize:A}),t=d+p+4}return i}class sB{async fetch(e,t=void 0){return Promise.all(e.map(n=>this.fetchSlice(n,t)))}async fetchSlice(e){throw new Error(`fetching of slice ${e} not possible, not implemented`)}get fileSize(){return null}async close(){}}class vre extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(const[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)===!1&&(yield e)}for(const e of this.cache){const[t,n]=e;this._deleteIfExpired(t,n)===!1&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){const i=typeof n=="number"&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;return this.cache.has(e)?this.cache.set(e,{value:t,expiry:i}):this._set(e,{value:t,expiry:i}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,n]=e;this._deleteIfExpired(t,n)===!1&&(yield[t,n.value])}for(const e of this.oldCache){const[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)===!1&&(yield[t,n.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const n=e[t],[i,a]=n;this._deleteIfExpired(i,a)===!1&&(yield[i,a.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const n=e[t],[i,a]=n;this.cache.has(i)||this._deleteIfExpired(i,a)===!1&&(yield[i,a.value])}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[n,i]of this.entriesAscending())e.call(t,i,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function yre(r){return new Promise(e=>setTimeout(e,r))}function xre(r,e){const t=Array.isArray(r)?r:Array.from(r),n=Array.isArray(e)?e:Array.from(e);return t.map((i,a)=>[i,n[a]])}class Gd extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,Gd),this.name="AbortError"}}class wre extends Error{constructor(e,t){super(t),this.errors=e,this.message=t,this.name="AggregateError"}}const _re=wre;class Ere{constructor(e,t,n=null){this.offset=e,this.length=t,this.data=n}get top(){return this.offset+this.length}}class XN{constructor(e,t,n){this.offset=e,this.length=t,this.blockIds=n}}class bre extends sB{constructor(e,{blockSize:t=65536,cacheSize:n=100}={}){super(),this.source=e,this.blockSize=t,this.blockCache=new vre({maxSize:n,onEviction:(i,a)=>{this.evictedBlocks.set(i,a)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(e,t){const n=[],i=[],a=[];this.evictedBlocks.clear();for(const{offset:f,length:A}of e){let d=f+A;const{fileSize:p}=this;p!==null&&(d=Math.min(d,p));const y=Math.floor(f/this.blockSize)*this.blockSize;for(let v=y;v<d;v+=this.blockSize){const w=Math.floor(v/this.blockSize);!this.blockCache.has(w)&&!this.blockRequests.has(w)&&(this.blockIdsToFetch.add(w),i.push(w)),this.blockRequests.has(w)&&n.push(this.blockRequests.get(w)),a.push(w)}}await yre(),this.fetchBlocks(t);const s=[];for(const f of i)this.blockRequests.has(f)&&s.push(this.blockRequests.get(f));await Promise.allSettled(n),await Promise.allSettled(s);const o=[],l=a.filter(f=>this.abortedBlockIds.has(f)||!this.blockCache.has(f));if(l.forEach(f=>this.blockIdsToFetch.add(f)),l.length>0&&t&&!t.aborted){this.fetchBlocks(null);for(const f of l){const A=this.blockRequests.get(f);if(!A)throw new Error(`Block ${f} is not in the block requests`);o.push(A)}await Promise.allSettled(o)}if(t&&t.aborted)throw new Gd("Request was aborted");const u=a.map(f=>this.blockCache.get(f)||this.evictedBlocks.get(f)),c=u.filter(f=>!f);if(c.length)throw new _re(c,"Request failed");const h=new Map(xre(a,u));return this.readSliceData(e,h)}fetchBlocks(e){if(this.blockIdsToFetch.size>0){const t=this.groupBlocks(this.blockIdsToFetch),n=this.source.fetch(t,e);for(let i=0;i<t.length;++i){const a=t[i];for(const s of a.blockIds)this.blockRequests.set(s,(async()=>{try{const o=(await n)[i],l=s*this.blockSize,u=l-o.offset,c=Math.min(u+this.blockSize,o.data.byteLength),h=o.data.slice(u,c),f=new Ere(l,h.byteLength,h,s);this.blockCache.set(s,f),this.abortedBlockIds.delete(s)}catch(o){if(o.name==="AbortError")o.signal=e,this.blockCache.delete(s),this.abortedBlockIds.add(s);else throw o}finally{this.blockRequests.delete(s)}})())}this.blockIdsToFetch.clear()}}groupBlocks(e){const t=Array.from(e).sort((s,o)=>s-o);if(t.length===0)return[];let n=[],i=null;const a=[];for(const s of t)i===null||i+1===s?(n.push(s),i=s):(a.push(new XN(n[0]*this.blockSize,n.length*this.blockSize,n)),n=[s],i=s);return a.push(new XN(n[0]*this.blockSize,n.length*this.blockSize,n)),a}readSliceData(e,t){return e.map(n=>{let i=n.offset+n.length;this.fileSize!==null&&(i=Math.min(this.fileSize,i));const a=Math.floor(n.offset/this.blockSize),s=Math.floor(i/this.blockSize),o=new ArrayBuffer(n.length),l=new Uint8Array(o);for(let u=a;u<=s;++u){const c=t.get(u),h=c.offset-n.offset,f=c.top-i;let A=0,d=0,p;h<0?A=-h:h>0&&(d=h),f<0?p=c.length-A:p=i-c.offset-A;const y=new Uint8Array(c.data,A,p);l.set(y,d)}return o})}}class oB{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class lB{constructor(e){this.url=e}async request({headers:e,signal:t}={}){throw new Error("request is not implemented")}}class Cre extends oB{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class Sre extends lB{constructor(e,t){super(e),this.credentials=t}async request({headers:e,signal:t}={}){const n=await fetch(this.url,{headers:e,credentials:this.credentials,signal:t});return new Cre(n)}}class Bre extends oB{constructor(e,t){super(),this.xhr=e,this.data=t}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}async getData(){return this.data}}class Tre extends lB{constructRequest(e,t){return new Promise((n,i)=>{const a=new XMLHttpRequest;a.open("GET",this.url),a.responseType="arraybuffer";for(const[s,o]of Object.entries(e))a.setRequestHeader(s,o);a.onload=()=>{const s=a.response;n(new Bre(a,s))},a.onerror=i,a.onabort=()=>i(new Gd("Request aborted")),a.send(),t&&(t.aborted&&a.abort(),t.addEventListener("abort",()=>a.abort()))})}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}class Nre extends oB{constructor(e,t){super(),this.response=e,this.dataPromise=t}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}async getData(){return await this.dataPromise}}class Ire extends lB{constructor(e){super(e),this.parsedUrl=nx.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",nx)}constructRequest(e,t){return new Promise((n,i)=>{const a=this.httpApi.get({...this.parsedUrl,headers:e},s=>{const o=new Promise(l=>{const u=[];s.on("data",c=>{u.push(c)}),s.on("end",()=>{const c=Buffer.concat(u).buffer;l(c)}),s.on("error",i)});n(new Nre(s,o))});a.on("error",i),t&&(t.aborted&&a.destroy(new Gd("Request aborted")),t.addEventListener("abort",()=>a.destroy(new Gd("Request aborted"))))})}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}class uB extends sB{constructor(e,t,n,i){super(),this.client=e,this.headers=t,this.maxRanges=n,this.allowFullFile=i,this._fileSize=null}async fetch(e,t){return this.maxRanges>=e.length?this.fetchSlices(e,t):(this.maxRanges>0&&e.length>1,Promise.all(e.map(n=>this.fetchSlice(n,t))))}async fetchSlices(e,t){const n=await this.client.request({headers:{...this.headers,Range:`bytes=${e.map(({offset:i,length:a})=>`${i}-${i+a}`).join(",")}`},signal:t});if(n.ok)if(n.status===206){const{type:i,params:a}=pre(n.getHeader("content-type"));if(i==="multipart/byteranges"){const h=mre(await n.getData(),a.boundary);return this._fileSize=h[0].fileSize||null,h}const s=await n.getData(),{start:o,end:l,total:u}=gS(n.getHeader("content-range"));this._fileSize=u||null;const c=[{data:s,offset:o,length:l-o}];if(e.length>1){const h=await Promise.all(e.slice(1).map(f=>this.fetchSlice(f,t)));return c.concat(h)}return c}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const i=await n.getData();return this._fileSize=i.byteLength,[{data:i,offset:0,length:i.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(e,t){const{offset:n,length:i}=e,a=await this.client.request({headers:{...this.headers,Range:`bytes=${n}-${n+i}`},signal:t});if(a.ok)if(a.status===206){const s=await a.getData(),{total:o}=gS(a.getHeader("content-range"));return this._fileSize=o||null,{data:s,offset:n,length:i}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const s=await a.getData();return this._fileSize=s.byteLength,{data:s,offset:0,length:s.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function cB(r,{blockSize:e,cacheSize:t}){return e===null?r:new bre(r,{blockSize:e,cacheSize:t})}function Fre(r,{headers:e={},credentials:t,maxRanges:n=0,allowFullFile:i=!1,...a}={}){const s=new Sre(r,t),o=new uB(s,e,n,i);return cB(o,a)}function Mre(r,{headers:e={},maxRanges:t=0,allowFullFile:n=!1,...i}={}){const a=new Tre(r),s=new uB(a,e,t,n);return cB(s,i)}function Lre(r,{headers:e={},maxRanges:t=0,allowFullFile:n=!1,...i}={}){const a=new Ire(r),s=new uB(a,e,t,n);return cB(s,i)}function Dre(r,{forceXHR:e=!1,...t}={}){return typeof fetch=="function"&&!e?Fre(r,t):typeof XMLHttpRequest<"u"?Mre(r,t):Lre(r,t)}class kre extends sB{constructor(e){super(),this.arrayBuffer=e}fetchSlice(e,t){if(t&&t.aborted)throw new Gd("Request aborted");return this.arrayBuffer.slice(e.offset,e.offset+e.length)}}function Rre(r){return new kre(r)}function pS(r){switch(r){case wn.BYTE:case wn.ASCII:case wn.SBYTE:case wn.UNDEFINED:return 1;case wn.SHORT:case wn.SSHORT:return 2;case wn.LONG:case wn.SLONG:case wn.FLOAT:case wn.IFD:return 4;case wn.RATIONAL:case wn.SRATIONAL:case wn.DOUBLE:case wn.LONG8:case wn.SLONG8:case wn.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${r}`)}}function Ore(r){const e=r.GeoKeyDirectory;if(!e)return null;const t={};for(let n=4;n<=e[3]*4;n+=4){const i=$te[e[n]],a=e[n+1]?sv[e[n+1]]:null,s=e[n+2],o=e[n+3];let l=null;if(!a)l=o;else{if(l=r[a],typeof l>"u"||l===null)throw new Error(`Could not get value of geoKey '${i}'.`);typeof l=="string"?l=l.substring(o,o+s-1):l.subarray&&(l=l.subarray(o,o+s),s===1&&(l=l[0]))}t[i]=l}return t}function M0(r,e,t,n){let i=null,a=null;const s=pS(e);switch(e){case wn.BYTE:case wn.ASCII:case wn.UNDEFINED:i=new Uint8Array(t),a=r.readUint8;break;case wn.SBYTE:i=new Int8Array(t),a=r.readInt8;break;case wn.SHORT:i=new Uint16Array(t),a=r.readUint16;break;case wn.SSHORT:i=new Int16Array(t),a=r.readInt16;break;case wn.LONG:case wn.IFD:i=new Uint32Array(t),a=r.readUint32;break;case wn.SLONG:i=new Int32Array(t),a=r.readInt32;break;case wn.LONG8:case wn.IFD8:i=new Array(t),a=r.readUint64;break;case wn.SLONG8:i=new Array(t),a=r.readInt64;break;case wn.RATIONAL:i=new Uint32Array(t*2),a=r.readUint32;break;case wn.SRATIONAL:i=new Int32Array(t*2),a=r.readInt32;break;case wn.FLOAT:i=new Float32Array(t),a=r.readFloat32;break;case wn.DOUBLE:i=new Float64Array(t),a=r.readFloat64;break;default:throw new RangeError(`Invalid field type: ${e}`)}if(e===wn.RATIONAL||e===wn.SRATIONAL)for(let o=0;o<t;o+=2)i[o]=a.call(r,n+o*s),i[o+1]=a.call(r,n+(o*s+4));else for(let o=0;o<t;++o)i[o]=a.call(r,n+o*s);return e===wn.ASCII?new TextDecoder("utf-8").decode(i):i}class Pre{constructor(e,t,n){this.fileDirectory=e,this.geoKeyDirectory=t,this.nextIFDByteOffset=n}}class My extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}}class Ure{async readRasters(e={}){const{window:t,width:n,height:i}=e;let{resX:a,resY:s,bbox:o}=e;const l=await this.getImage();let u=l;const c=await this.getImageCount(),h=l.getBoundingBox();if(t&&o)throw new Error('Both "bbox" and "window" passed.');if(n||i){if(t){const[d,p]=l.getOrigin(),[y,v]=l.getResolution();o=[d+t[0]*y,p+t[1]*v,d+t[2]*y,p+t[3]*v]}const A=o||h;if(n){if(a)throw new Error("Both width and resX passed");a=(A[2]-A[0])/n}if(i){if(s)throw new Error("Both width and resY passed");s=(A[3]-A[1])/i}}if(a||s){const A=[];for(let d=0;d<c;++d){const p=await this.getImage(d),{SubfileType:y,NewSubfileType:v}=p.fileDirectory;(d===0||y===2||v&1)&&A.push(p)}A.sort((d,p)=>d.getWidth()-p.getWidth());for(let d=0;d<A.length;++d){const p=A[d],y=(h[2]-h[0])/p.getWidth(),v=(h[3]-h[1])/p.getHeight();if(u=p,a&&a>y||s&&s>v)break}}let f=t;if(o){const[A,d]=l.getOrigin(),[p,y]=u.getResolution(l);f=[Math.round((o[0]-A)/p),Math.round((o[1]-d)/y),Math.round((o[2]-A)/p),Math.round((o[3]-d)/y)],f=[Math.min(f[0],f[2]),Math.min(f[1],f[3]),Math.max(f[0],f[2]),Math.max(f[1],f[3])]}return u.readRasters({...e,window:f})}}class E_ extends Ure{constructor(e,t,n,i,a={}){super(),this.source=e,this.littleEndian=t,this.bigTiff=n,this.firstIFDOffset=i,this.cache=a.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,t){const n=this.bigTiff?4048:1024;return new dre((await this.source.fetch([{offset:e,length:typeof t<"u"?t:n}]))[0],e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){const t=this.bigTiff?20:12,n=this.bigTiff?8:2;let i=await this.getSlice(e);const a=this.bigTiff?i.readUint64(e):i.readUint16(e),s=a*t+(this.bigTiff?16:6);i.covers(e,s)||(i=await this.getSlice(e,s));const o={};let l=e+(this.bigTiff?8:2);for(let h=0;h<a;l+=t,++h){const f=i.readUint16(l),A=i.readUint16(l+2),d=this.bigTiff?i.readUint64(l+4):i.readUint32(l+4);let p,y;const v=pS(A),w=l+(this.bigTiff?12:8);if(v*d<=(this.bigTiff?8:4))p=M0(i,A,d,w);else{const x=i.readOffset(w),b=pS(A)*d;if(i.covers(x,b))p=M0(i,A,d,x);else{const C=await this.getSlice(x,b);p=M0(C,A,d,x)}}d===1&&qte.indexOf(f)===-1&&!(A===wn.RATIONAL||A===wn.SRATIONAL)?y=p[0]:y=p,o[sv[f]]=y}const u=Ore(o),c=i.readOffset(e+n+t*a);return new Pre(o,u,c)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(e===0)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(t){throw t instanceof My?new My(e):t}return this.ifdRequests[e]=(async()=>{const t=await this.ifdRequests[e-1];if(t.nextIFDByteOffset===0)throw new My(e);return this.parseFileDirectoryAt(t.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){const t=await this.requestIFD(e);return new fre(t.fileDirectory,t.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0,t=!0;for(;t;)try{await this.requestIFD(e),++e}catch(n){if(n instanceof My)t=!1;else throw n}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const t="GDAL_STRUCTURAL_METADATA_SIZE=",n=t.length+100;let i=await this.getSlice(e,n);if(t===M0(i,wn.ASCII,t.length,e)){const s=M0(i,wn.ASCII,n,e).split(`
`)[0],o=Number(s.split("=")[1].split(" ")[0])+s.length;o>n&&(i=await this.getSlice(e,o));const l=M0(i,wn.ASCII,o,e);this.ghostValues={},l.split(`
`).filter(u=>u.length>0).map(u=>u.split("=")).forEach(([u,c])=>{this.ghostValues[u]=c})}return this.ghostValues}static async fromSource(e,t,n){const i=(await e.fetch([{offset:0,length:1024}],n))[0],a=new Are(i),s=a.getUint16(0,0);let o;if(s===18761)o=!0;else if(s===19789)o=!1;else throw new TypeError("Invalid byte order value.");const l=a.getUint16(2,o);let u;if(l===42)u=!1;else if(l===43){if(u=!0,a.getUint16(4,o)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const c=u?a.getUint64(8,o):a.getUint32(4,o);return new E_(e,o,u,c,t)}close(){return typeof this.source.close=="function"?this.source.close():!1}}async function Qre(r,e={},t){return E_.fromSource(Dre(r,e),t)}async function Gre(r,e){return E_.fromSource(Rre(r),e)}class Hre extends v1{constructor(e){e=e||{},super(e)}}class zre extends B4{constructor(e){super(e),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],n=e.pixelRatio,i=e.viewState,a=i.resolution,s=this.getLayer().getSource(),o=e.viewHints;let l=e.extent;if(t.extent!==void 0&&(l=Td(l,Hc(t.extent,i.projection))),!o[Qa.ANIMATING]&&!o[Qa.INTERACTING]&&!Zd(l))if(s){const u=i.projection,c=s.getImage(l,a,n,u);c&&(this.loadImage(c)?this.image_=c:c.getState()===pr.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),i=Ga(t.pixelToCoordinateTransform,e.slice()),a=n.getExtent();if(a&&!Rd(a,i))return null;const s=this.image_.getExtent(),o=this.image_.getImage(),l=Mn(s),u=Math.floor(o.width*((i[0]-s[0])/l));if(u<0||u>=o.width)return null;const c=qa(s),h=Math.floor(o.height*((s[3]-i[1])/c));return h<0||h>=o.height?null:this.getImageData(o,u,h)}renderFrame(e,t){const n=this.image_,i=n.getExtent(),a=n.getResolution(),[s,o]=Array.isArray(a)?a:[a,a],l=n.getPixelRatio(),u=e.layerStatesArray[e.layerIndex],c=e.pixelRatio,h=e.viewState,f=h.center,A=h.resolution,d=c*s/(A*l),p=c*o/(A*l);this.prepareContainer(e,t);const y=this.context.canvas.width,v=this.context.canvas.height,w=this.getRenderContext(e);let x=!1,b=!0;if(u.extent){const T=Hc(u.extent,h.projection);b=fo(T,e.extent),x=b&&!Ju(T,e.extent),x&&this.clipUnrotated(w,e,T)}const C=n.getImage(),S=bu(this.tempTransform,y/2,v/2,d,p,0,l*(i[0]-f[0])/s,l*(f[1]-i[3])/o);this.renderedResolution=o*c/l;const I=C.width*S[0],B=C.height*S[3];if(this.getLayer().getSource().getInterpolate()||(w.imageSmoothingEnabled=!1),this.preRender(w,e),b&&I>=.5&&B>=.5){const T=S[4],M=S[5],F=u.opacity;F!==1&&(w.save(),w.globalAlpha=F),w.drawImage(C,0,0,+C.width,+C.height,T,M,I,B),F!==1&&w.restore()}return this.postRender(this.context,e),x&&w.restore(),w.imageSmoothingEnabled=!0,this.container}}class qre extends Hre{constructor(e){super(e)}createRenderer(){return new zre(this)}getData(e){return super.getData(e)}}class jre extends y4{constructor(e,t,n,i,a){const s=a!==void 0?pr.IDLE:pr.LOADED;super(e,t,n,s),this.loader_=a!==void 0?a:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=pr.ERROR):this.state=pr.LOADED,this.changed()}load(){this.state==pr.IDLE&&(this.state=pr.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}function mS(r){return Array.isArray(r)?Math.min(...r):r}class $re extends y4{constructor(e,t,n,i,a,s,o){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let u=t.getExtent();u&&t.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);const c=u?Td(n,u):n,h=Uo(c),f=tS(e,t,h,i),A=oO,d=new lO(e,t,c,l,f*A,i),p=d.calculateSourceExtent(),y=Zd(p)?null:s(p,f,a),v=y?pr.IDLE:pr.EMPTY,w=y?y.getPixelRatio():1;super(n,i,w,v),this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=d,this.targetResolution_=i,this.targetExtent_=n,this.sourceImage_=y,this.sourcePixelRatio_=w,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==pr.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==pr.LOADED){const t=Mn(this.targetExtent_)/this.targetResolution_,n=qa(this.targetExtent_)/this.targetResolution_;this.canvas_=uO(t,n,this.sourcePixelRatio_,mS(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==pr.IDLE){this.state=pr.LOADING,this.changed();const e=this.sourceImage_.getState();e==pr.LOADED||e==pr.ERROR?this.reproject_():(this.sourceListenerKey_=Fn(this.sourceImage_,$r.CHANGE,function(t){const n=this.sourceImage_.getState();(n==pr.LOADED||n==pr.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){Mi(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Ly=4,gb={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class Kre extends _l{constructor(e,t){super(e),this.image=t}}class Vre extends N4{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const n=r_(t,e,0);e=t[n]}return e}getImage(e,t,n,i){const a=this.getProjection();if(!a||!i||Hh(a,i))return a&&(i=a),this.getImageInternal(e,t,n,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Hh(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&Od(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new $re(a,i,e,t,n,(s,o,l)=>this.getImageInternal(s,o,l,a),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,n,i){if(this.loader){const a=Wre(e,t,n,1),s=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&Ju(this.wantedExtent_,a)||Ju(this.image.getExtent(),a))&&(this.wantedResolution_&&mS(this.wantedResolution_)===s||mS(this.image.getResolution())===s)))return this.image;this.wantedProjection_=i,this.wantedExtent_=a,this.wantedResolution_=s,this.image=new y4(a,s,n,this.loader),this.image.addEventListener($r.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let n;switch(t.getState()){case pr.LOADING:this.loading=!0,n=gb.IMAGELOADSTART;break;case pr.LOADED:this.loading=!1,n=gb.IMAGELOADEND;break;case pr.ERROR:this.loading=!1,n=gb.IMAGELOADERROR;break;default:return}this.hasListener(n)&&this.dispatchEvent(new Kre(n,t))}}function Wre(r,e,t,n){const i=e/t,a=Uo(r),s=oA(Mn(r)/i,Ly),o=oA(qa(r)/i,Ly),l=oA((n-1)*s/2,Ly),u=s+2*l,c=oA((n-1)*o/2,Ly),h=o+2*c;return bx(a,i,0,[u,h])}class Yre extends Vre{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions,state:e.state}),this.canvasFunction_=e.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5}getImageInternal(e,t,n,i){t=this.findNearestResolution(t);let a=this.canvas_;if(a&&this.renderedRevision_==this.getRevision()&&a.getResolution()==t&&a.getPixelRatio()==n&&Ju(a.getExtent(),e))return a;e=e.slice(),cj(e,this.ratio_);const s=Mn(e)/t,o=qa(e)/t,l=[s*n,o*n],u=this.canvasFunction_.call(this,e,t,n,l,i);return u&&(a=new jre(e,t,n,u)),this.canvas_=a,this.renderedRevision_=this.getRevision(),a}}const pb=[{value:0,color:[0,97,71]},{value:.15,color:[34,139,34]},{value:.3,color:[154,205,50]},{value:.45,color:[255,255,0]},{value:.6,color:[255,165,0]},{value:.75,color:[255,69,0]},{value:.9,color:[139,69,19]},{value:1,color:[255,255,255]}];class BP{constructor(){this.colorRamp=pb}async loadFromFile(e){try{console.log("DEM 파일 로드 시작:",e.name);const t=await e.arrayBuffer();console.log("ArrayBuffer 크기:",t.byteLength);const n=await Gre(t);console.log("GeoTIFF 파싱 완료");const i=await n.getImage();console.log("이미지 로드 완료:",i.getWidth(),"x",i.getHeight());const a=e.name.replace(/\.(tif|tiff|geotiff|img)$/i,"");return await this.createDEMLayer(i,a)}catch(t){throw console.error("DEM 로드 에러:",t),e.name.toLowerCase().endsWith(".img")?new Error("IMG 파일을 읽을 수 없습니다. GeoTIFF 형식의 IMG 파일만 지원됩니다."):new Error("래스터 파일 로드 실패: "+t.message)}}async loadFromUrl(e,t="DEM"){const i=await(await Qre(e)).getImage();return await this.createDEMLayer(i,t)}async createDEMLayer(e,t){const n=await e.readRasters(),i=e.getWidth(),a=e.getHeight(),s=n[0],o=e.getBoundingBox(),l=e.getGeoKeys();let u=o,c=null;if(l&&l.ProjectedCSTypeGeoKey){const C=l.ProjectedCSTypeGeoKey;C!==32767&&(c=`EPSG:${C}`)}else if(l&&l.GeographicTypeGeoKey){const C=l.GeographicTypeGeoKey;C!==32767&&(c=`EPSG:${C}`)}console.log("DEM 좌표계:",c||"정의되지 않음","bbox:",o);const h=C=>{const[S,I,B,T]=C;return S>=-180&&B<=180&&I>=-90&&T<=90?"EPSG:4326":Math.abs(S)>180&&Math.abs(B)<20037509&&Math.abs(I)>90&&Math.abs(T)<20037509?"EPSG:3857":S>1e5&&B<1e6&&I>0?"UTM":null},f=(C,S)=>{const I=C*2003750834e-2/180;let B=Math.log(Math.tan((90+S)*Math.PI/360))/(Math.PI/180);return B=B*2003750834e-2/180,[I,B]};if(c)try{c==="EPSG:3857"?u=o:u=fR(o,c,"EPSG:3857")}catch(C){if(console.warn("좌표계 변환 실패:",C),h(o)==="EPSG:4326"){const I=f(o[0],o[1]),B=f(o[2],o[3]);u=[I[0],I[1],B[0],B[1]]}else u=o}else{const C=h(o);if(console.log("좌표계 추측 결과:",C),C==="EPSG:3857")u=o;else if(C==="EPSG:4326"){const S=f(o[0],o[1]),I=f(o[2],o[3]);u=[S[0],S[1],I[0],I[1]]}else console.warn("알 수 없는 좌표계, bbox 그대로 사용"),u=o}console.log("최종 extent:",u);let A=1/0,d=-1/0;const p=e.getGDALNoData()||-9999;for(let C=0;C<s.length;C++){const S=s[C];S!==p&&!isNaN(S)&&isFinite(S)&&(S<A&&(A=S),S>d&&(d=S))}const y={data:s,width:i,height:a,extent:u,minVal:A,maxVal:d,noDataValue:p},v=new Yre({canvasFunction:(C,S,I,B)=>this.renderDEM(y,C,S,B),ratio:1}),w=new qre({source:v,extent:u,opacity:.8}),x=pt.addLayer({name:t,type:"raster",olLayer:w,source:null,geometryType:"Raster"}),b=pt.getLayer(x);return b&&(b.demData=y,b.featureCount=`${i}×${a}`),Nr.fitExtent(u),x}renderDEM(e,t,n,i){const a=document.createElement("canvas");a.width=i[0],a.height=i[1];const s=a.getContext("2d"),{data:o,width:l,height:u,extent:c,minVal:h,maxVal:f,noDataValue:A}=e,d=c[2]-c[0],p=c[3]-c[1],y=t[2]-t[0],v=t[3]-t[1],w=s.createImageData(i[0],i[1]),x=w.data;for(let b=0;b<i[1];b++)for(let C=0;C<i[0];C++){const S=t[0]+C/i[0]*y,I=t[3]-b/i[1]*v,B=Math.floor((S-c[0])/d*l),T=Math.floor((c[3]-I)/p*u),M=(b*i[0]+C)*4;if(B>=0&&B<l&&T>=0&&T<u){const F=T*l+B,N=o[F];if(N!==A&&!isNaN(N)&&isFinite(N)){const O=(N-h)/(f-h),L=this.getColorForValue(O);x[M]=L[0],x[M+1]=L[1],x[M+2]=L[2],x[M+3]=255}else x[M+3]=0}else x[M+3]=0}return s.putImageData(w,0,0),a}getColorForValue(e){const t=this.colorRamp;for(let n=0;n<t.length-1;n++)if(e>=t[n].value&&e<=t[n+1].value){const i=(e-t[n].value)/(t[n+1].value-t[n].value),a=t[n].color,s=t[n+1].color;return[Math.round(a[0]+(s[0]-a[0])*i),Math.round(a[1]+(s[1]-a[1])*i),Math.round(a[2]+(s[2]-a[2])*i)]}return e<=0?t[0].color:t[t.length-1].color}setColorRamp(e){this.colorRamp=e}resetColorRamp(){this.colorRamp=pb}}yr(BP,"COLOR_RAMPS",{terrain:pb,grayscale:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}],viridis:[{value:0,color:[68,1,84]},{value:.25,color:[59,82,139]},{value:.5,color:[33,145,140]},{value:.75,color:[94,201,98]},{value:1,color:[253,231,37]}],cool:[{value:0,color:[0,0,139]},{value:.5,color:[0,191,255]},{value:1,color:[255,255,255]}],hot:[{value:0,color:[0,0,0]},{value:.33,color:[230,0,0]},{value:.66,color:[255,200,0]},{value:1,color:[255,255,255]}]});const TP=new BP;class Xre{constructor(e="file-drop-zone"){this.dropZone=document.getElementById(e),this.fileInput=null,this.init()}init(){this.createFileInput(),this.bindEvents()}createFileInput(){this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.accept=".geojson,.json,.zip,.shp,.dbf,.shx,.prj,.gpkg,.tif,.tiff,.img,image/tiff,application/octet-stream,*/*",this.fileInput.multiple=!0,this.fileInput.style.display="none",document.body.appendChild(this.fileInput),this.fileInput.addEventListener("change",e=>{this.handleFiles(e.target.files),this.fileInput.value=""})}bindEvents(){this.dropZone.addEventListener("click",()=>{this.fileInput.click()}),this.dropZone.addEventListener("dragenter",e=>{e.preventDefault(),e.stopPropagation(),this.dropZone.classList.add("dragover")}),this.dropZone.addEventListener("dragover",e=>{e.preventDefault(),e.stopPropagation(),this.dropZone.classList.add("dragover")}),this.dropZone.addEventListener("dragleave",e=>{e.preventDefault(),e.stopPropagation(),this.dropZone.classList.remove("dragover")}),this.dropZone.addEventListener("drop",e=>{e.preventDefault(),e.stopPropagation(),this.dropZone.classList.remove("dragover"),this.handleFiles(e.dataTransfer.files)}),document.addEventListener("dragover",e=>{e.preventDefault()}),document.addEventListener("drop",e=>{e.preventDefault(),this.dropZone.contains(e.target)||this.handleFiles(e.dataTransfer.files)})}async handleFiles(e){const t=Array.from(e);for(const n of t)try{await this.loadFile(n),this.showMessage(`${n.name} 로드 완료`,"success")}catch(i){console.error("파일 로드 실패:",i),this.showMessage(`${n.name}: ${i.message}`,"error")}}async loadFile(e){switch(e.name.split(".").pop().toLowerCase()){case"geojson":case"json":return await bO.loadFromFile(e);case"zip":case"shp":case"dbf":case"shx":case"prj":return await nP.loadFromFile(e);case"gpkg":return await sP.loadFromFile(e);case"tif":case"tiff":case"img":return await TP.loadFromFile(e);default:throw new Error("지원하지 않는 파일 형식입니다. (GeoJSON, ZIP, GPKG, TIF, IMG 지원)")}}showMessage(e,t="info"){const n=document.getElementById("status-message");n&&(n.textContent=e,t==="error"?n.style.color="var(--color-danger)":t==="success"?n.style.color="var(--color-accent)":n.style.color="",setTimeout(()=>{n.textContent="준비",n.style.color=""},3e3))}}const Dy={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class ky extends _l{constructor(e,t){super(e),this.feature=t}}function Zre(r,e){const t=[];for(let n=0;n<e.length;++n){const a=e[n].getGeometry();NP(r,a,t)}return t}function Ry(r,e){return Yh(r[0],r[1],e[0],e[1])}function mg(r,e){const t=r.length;return e<0?r[e+t]:e>=t?r[e-t]:r[e]}function Oy(r,e,t){let n,i;e<t?(n=e,i=t):(n=t,i=e);const a=Math.ceil(n),s=Math.floor(i);if(a>s){const l=vg(r,n),u=vg(r,i);return Ry(l,u)}let o=0;if(n<a){const l=vg(r,n),u=mg(r,a);o+=Ry(l,u)}if(s<i){const l=mg(r,s),u=vg(r,i);o+=Ry(l,u)}for(let l=a;l<s-1;++l){const u=mg(r,l),c=mg(r,l+1);o+=Ry(u,c)}return o}function NP(r,e,t){if(e instanceof vl){Py(r,e.getCoordinates(),!1,t);return}if(e instanceof lc){const n=e.getCoordinates();for(let i=0,a=n.length;i<a;++i)Py(r,n[i],!1,t);return}if(e instanceof zl){const n=e.getCoordinates();for(let i=0,a=n.length;i<a;++i)Py(r,n[i],!0,t);return}if(e instanceof af){const n=e.getCoordinates();for(let i=0,a=n.length;i<a;++i){const s=n[i];for(let o=0,l=s.length;o<l;++o)Py(r,s[o],!0,t)}return}if(e instanceof Gs){const n=e.getGeometries();for(let i=0;i<n.length;++i)NP(r,n[i],t);return}}const mb={index:-1,endIndex:NaN};function Jre(r,e,t,n){const i=r[0],a=r[1];let s=1/0,o=-1,l=NaN;for(let h=0;h<e.targets.length;++h){const f=e.targets[h],A=f.coordinates;let d=1/0,p;for(let y=0;y<A.length-1;++y){const v=A[y],w=A[y+1],x=IP(i,a,v,w);x.squaredDistance<d&&(d=x.squaredDistance,p=y+x.along)}d<s&&(s=d,f.ring&&e.targetIndex===h&&(f.endIndex>f.startIndex?p<f.startIndex&&(p+=A.length):f.endIndex<f.startIndex&&p>f.startIndex&&(p-=A.length)),l=p,o=h)}const u=e.targets[o];let c=u.ring;if(e.targetIndex===o&&c){const h=vg(u.coordinates,l),f=t.getPixelFromCoordinate(h);Cx(f,e.startPx)>n&&(c=!1)}if(c){const h=u.coordinates,f=h.length,A=u.startIndex,d=l;if(A<d){const p=Oy(h,A,d);Oy(h,A,d-f)<p&&(l-=f)}else{const p=Oy(h,A,d);Oy(h,A,d+f)<p&&(l+=f)}}return mb.index=o,mb.endIndex=l,mb}function Py(r,e,t,n){const i=r[0],a=r[1];for(let s=0,o=e.length-1;s<o;++s){const l=e[s],u=e[s+1],c=IP(i,a,l,u);if(c.squaredDistance===0){const h=s+c.along;n.push({coordinates:e,ring:t,startIndex:h,endIndex:h});return}}}const vb={along:0,squaredDistance:0};function IP(r,e,t,n){const i=t[0],a=t[1],s=n[0],o=n[1],l=s-i,u=o-a;let c=0,h=i,f=a;return(l!==0||u!==0)&&(c=ea(((r-i)*l+(e-a)*u)/(l*l+u*u),0,1),h+=l*c,f+=u*c),vb.along=c,vb.squaredDistance=n_(Yh(r,e,h,f),10),vb}function vg(r,e){const t=r.length;let n=Math.floor(e);const i=e-n;n>=t?n-=t:n<0&&(n+=t);let a=n+1;a>=t&&(a-=t);const s=r[n],o=s[0],l=s[1],u=r[a],c=u[0]-o,h=u[1]-l;return[o+c*i,l+h*i]}class FP extends PA{constructor(e){const t=e;t.stopDown||(t.stopDown=mp),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=tne(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:eh,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let n=e.geometryFunction;if(!n){const i=this.mode_;if(i==="Circle")n=function(a,s,o){const l=s||new x_([NaN,NaN]),u=ia(a[0]),c=Wg(u,ia(a[a.length-1]));return l.setCenterAndRadius(u,Math.sqrt(c),this.geometryLayout_),l};else{let a;i==="Point"?a=ja:i==="LineString"?a=vl:i==="Polygon"&&(a=zl),n=function(s,o,l){return o?i==="Polygon"?s[0].length?o.setCoordinates([s[0].concat([s[0][0]])],this.geometryLayout_):o.setCoordinates([],this.geometryLayout_):o.setCoordinates(s,this.geometryLayout_):o=new a(s,this.geometryLayout_),o}}}this.geometryFunction_=n,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Ql({source:new zo({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:ene(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:S4,this.freehandCondition_,e.freehand?this.freehandCondition_=Ov:this.freehandCondition_=e.freehandCondition?e.freehandCondition:v_,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(Ox.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=Ov:t=e:t=eS,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===$r.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===On.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&e.type===On.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===On.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===On.POINTERDOWN?n=!1:t&&this.getPointerCount()<2?(n=e.type===On.POINTERMOVE,n&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===On.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===On.DBLCLICK&&(n=!1),super.handleEvent(e)&&n}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Uh(On.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),n=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),i=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),a=Au([n,i]),s=this.traceSource_.getFeaturesInExtent(a);if(s.length===0)return;const o=Zre(e.coordinate,s);o.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:o,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const n=e.startIndex<=e.endIndex,i=e.startIndex<=t;n===i?n&&t>e.endIndex||!n&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(n&&t<e.endIndex||!n&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let n=0;if(e<t){const i=Math.ceil(e);let a=Math.floor(t);a===t&&(a-=1),n=a-i+1}else{const i=Math.floor(e);let a=Math.ceil(t);a===t&&(a+=1),n=i-a+1}n>0&&this.removeLastPoints_(n)}addTracedCoordinates_(e,t,n){if(t===n)return;const i=[];if(t<n){const a=Math.ceil(t);let s=Math.floor(n);s===n&&(s-=1);for(let o=a;o<=s;++o)i.push(mg(e.coordinates,o))}else{const a=Math.floor(t);let s=Math.ceil(n);s===n&&(s+=1);for(let o=a;o>=s;--o)i.push(mg(e.coordinates,o))}i.length&&this.appendCoordinates(i)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&Cx(t.startPx,e.pixel)<this.snapTolerance_)return;const n=Jre(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==n.index){if(t.targetIndex!==-1){const l=t.targets[t.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const o=t.targets[n.index];this.addTracedCoordinates_(o,o.startIndex,n.endIndex)}else{const o=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(o,n.endIndex)}t.targetIndex=n.index;const i=t.targets[t.targetIndex];i.endIndex=n.endIndex;const a=vg(i.coordinates,i.endIndex),s=this.getMap().getPixelFromCoordinate(a);e.coordinate=a,e.pixel=[Math.round(s[0]),Math.round(s[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const n=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const i=!this.finishCoordinate_;i&&this.startDrawing_(e.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_==="Point")&&(this.atFinish_(e.pixel,n)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,n=e.pixel,i=t[0]-n[0],a=t[1]-n[1],s=i*i+a*a;if(this.shouldHandle_=this.freehand_?s>this.squaredClickTolerance_:s<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let n=!1;if(this.sketchFeature_){let i=!1,a=[this.finishCoordinate_];const s=this.mode_;if(s==="Point")n=!0;else if(s==="Circle")n=this.sketchCoords_.length===2;else if(s==="LineString")i=!t&&this.sketchCoords_.length>this.minPoints_;else if(s==="Polygon"){const o=this.sketchCoords_;i=o[0].length>this.minPoints_,a=[o[0][0],o[0][o[0].length-2]],t?a=[o[0][0]]:a=[o[0][0],o[0][o[0].length-2]]}if(i){const o=this.getMap();for(let l=0,u=a.length;l<u;l++){const c=a[l],h=o.getPixelFromCoordinate(c),f=e[0]-h[0],A=e[1]-h[1],d=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(f*f+A*A)<=d,n){this.finishCoordinate_=c;break}}}}return n}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new yi(new ja(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new yi);const t=e.getLinearRing(0);let n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),n.changed()):(n=new vl(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(n))}startDrawing_(e){const t=this.getMap().getView().getProjection(),n=Tx(this.geometryLayout_);for(;e.length<n;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new yi(new vl(this.sketchLineCoords_)));const i=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new yi,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new ky(Dy.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),n=this.sketchFeature_.getGeometry(),i=t.getView().getProjection(),a=Tx(this.geometryLayout_);let s,o;for(;e.length<a;)e.push(0);this.mode_==="Point"?o=this.sketchCoords_:this.mode_==="Polygon"?(s=this.sketchCoords_[0],o=s[s.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(s=this.sketchCoords_,o=s[s.length-1]),o[0]=e[0],o[1]=e[1],this.geometryFunction_(this.sketchCoords_,n,i),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),n.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(n):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection();let i,a;const s=this.mode_;return s==="LineString"||s==="Circle"?(this.finishCoordinate_=e.slice(),a=this.sketchCoords_,a.length>=this.maxPoints_&&(this.freehand_?a.pop():i=!0),a.push(e.slice()),this.geometryFunction_(a,t,n)):s==="Polygon"&&(a=this.sketchCoords_[0],a.length>=this.maxPoints_&&(this.freehand_?a.pop():i=!0),a.push(e.slice()),i&&(this.finishCoordinate_=a[0]),this.geometryFunction_(this.sketchCoords_,t,n)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),i?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),i=this.mode_;for(let a=0;a<e;++a){let s;if(i==="LineString"||i==="Circle"){if(s=this.sketchCoords_,s.splice(-2,1),s.length>=2){this.finishCoordinate_=s[s.length-2].slice();const o=this.finishCoordinate_.slice();s[s.length-1]=o,this.createOrUpdateSketchPoint_(o)}this.geometryFunction_(s,t,n),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(i==="Polygon"){s=this.sketchCoords_[0],s.splice(-2,1);const o=this.sketchLine_.getGeometry();if(s.length>=2){const l=s[s.length-2].slice();s[s.length-1]=l,this.createOrUpdateSketchPoint_(l)}o.setCoordinates(s),this.geometryFunction_(this.sketchCoords_,t,n)}if(s.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const n=e.getGeometry(),i=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,n,i)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,n,i),t=n.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new UA([t])):this.type_==="MultiLineString"?e.setGeometry(new lc([t])):this.type_==="MultiPolygon"&&e.setGeometry(new af([t])),this.dispatchEvent(new ky(Dy.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new ky(Dy.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,n=!this.sketchFeature_;n&&this.startDrawing_(e[0]);let i;if(t==="LineString"||t==="Circle")i=this.sketchCoords_;else if(t==="Polygon")i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;n&&i.shift(),i.pop();for(let s=0;s<e.length;s++)this.addToDrawing_(e[s]);const a=e[e.length-1];this.sketchFeature_=this.addToDrawing_(a),this.modifyDrawing_(a)}extend(e){const n=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=n.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new yi(new ja(i)),this.updateSketchFeatures_(),this.dispatchEvent(new ky(Dy.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function ene(){const r=_4();return function(e,t){return r[e.getGeometry().getType()]}}function tne(r){switch(r){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+r)}}const ZN=new En({fill:new _n({color:"rgba(59, 130, 246, 0.2)"}),stroke:new hn({color:"#3b82f6",width:2,lineDash:[5,5]}),image:new qs({radius:6,fill:new _n({color:"#3b82f6"}),stroke:new hn({color:"#ffffff",width:2})})});class rne{constructor(){this.map=null,this.draw=null,this.currentType=null,this.tempSource=null,this.tempLayer=null,this.isActive=!1,this.contextMenuHandler=null,this.isMultiMode=!1,this.multiFeatures=[]}init(){this.map=Nr.getMap(),this.tempSource=new zo,this.tempLayer=new Ql({source:this.tempSource,style:ZN,zIndex:1e3})}activate(e){this.map||this.init(),this.deactivate(),this.currentType=e,this.isMultiMode=e.startsWith("Multi");const t=this.isMultiMode?e.replace("Multi",""):e;this.multiFeatures=[];const n=i=>i.originalEvent.button===0;this.draw=new FP({source:this.tempSource,type:t,style:ZN,condition:n}),this.draw.on("drawend",i=>{this.handleDrawEnd(i)}),this.map.addLayer(this.tempLayer),this.map.addInteraction(this.draw),this.contextMenuHandler=i=>{i.preventDefault(),this.draw&&(t==="LineString"||t==="Polygon")&&this.draw.finishDrawing()},this.map.getViewport().addEventListener("contextmenu",this.contextMenuHandler),this.isActive=!0,this.updateStatusMessage(e),Gt.emit(Xt.TOOL_ACTIVATED,{tool:"draw",type:e})}handleDrawEnd(e){const t=e.feature;if(this.isMultiMode){this.multiFeatures.push(t.clone());const o=document.getElementById("status-message");o&&(o.textContent=`${this.getTypeName(this.currentType)} 그리기 중 (${this.multiFeatures.length}개) - 버튼을 다시 클릭하면 저장`);return}const i=t.getGeometry().getType(),a=new Date().toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),s=this.getTypeName(i)+" "+a;setTimeout(()=>{this.tempSource.clear();const o=pt.addLayer({name:s,type:"vector",features:[t],geometryType:i});Gt.emit(Xt.FEATURE_CREATED,{layerId:o,feature:t,geometryType:i});const l=document.getElementById("status-message");l&&(l.textContent=s+" 생성됨",setTimeout(()=>{this.updateStatusMessage(this.currentType)},2e3))},100)}saveMultiFeature(){if(!this.isMultiMode||this.multiFeatures.length===0)return null;const e=this.multiFeatures.map(u=>u.getGeometry());let t;switch(this.currentType){case"MultiPoint":const u=e.map(f=>f.getCoordinates());t=new UA(u);break;case"MultiLineString":const c=e.map(f=>f.getCoordinates());t=new lc(c);break;case"MultiPolygon":const h=e.map(f=>f.getCoordinates());t=new af(h);break;default:return null}const n=new yi({geometry:t}),i=new Date().toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),a=this.getTypeName(this.currentType)+" "+i,s=pt.addLayer({name:a,type:"vector",features:[n],geometryType:this.currentType}),o=this.multiFeatures.length;this.tempSource.clear(),this.multiFeatures=[],Gt.emit(Xt.FEATURE_CREATED,{layerId:s,feature:n,geometryType:this.currentType});const l=document.getElementById("status-message");return l&&(l.textContent=`${a} 생성됨 (${o}개 도형)`),s}getTypeName(e){return{Point:"포인트",LineString:"라인",Polygon:"폴리곤",MultiPoint:"멀티포인트",MultiLineString:"멀티라인",MultiPolygon:"멀티폴리곤"}[e]||e}updateStatusMessage(e){const t=document.getElementById("status-message");if(!t)return;const n={Point:"지도를 클릭하여 점을 찍으세요",LineString:"클릭으로 선을 그리세요. 더블클릭 또는 우클릭으로 완료",Polygon:"클릭으로 면을 그리세요. 더블클릭 또는 우클릭으로 완료",MultiPoint:"여러 점을 클릭하세요. 버튼을 다시 클릭하면 저장",MultiLineString:"여러 선을 그리세요. 버튼을 다시 클릭하면 저장",MultiPolygon:"여러 면을 그리세요. 버튼을 다시 클릭하면 저장"};t.textContent=n[e]||"그리기 모드"}getIsMultiMode(){return this.isMultiMode}getMultiFeatureCount(){return this.multiFeatures.length}deactivate(){this.draw&&(this.map.removeInteraction(this.draw),this.contextMenuHandler&&(this.map.getViewport().removeEventListener("contextmenu",this.contextMenuHandler),this.contextMenuHandler=null),this.draw=null),this.tempLayer&&this.map&&this.map.removeLayer(this.tempLayer),this.tempSource&&this.tempSource.clear(),this.isActive=!1,this.contextMenuHandler=null,this.currentType=null,this.isMultiMode=!1,this.multiFeatures=[];const e=document.getElementById("status-message");e&&(e.textContent="준비"),Gt.emit(Xt.TOOL_DEACTIVATED,{tool:"draw"})}getIsActive(){return this.isActive}getCurrentType(){return this.currentType}}const Ls=new rne,nne={SELECT:"select"};class ine extends _l{constructor(e,t,n,i){super(e),this.selected=t,this.deselected=n,this.mapBrowserEvent=i}}const Uy={};class b_ extends Ep{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:ZR,this.addCondition_=e.addCondition?e.addCondition:eS,this.removeCondition_=e.removeCondition?e.removeCondition:eS,this.toggleCondition_=e.toggleCondition?e.toggleCondition:v_,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:eh,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:ane(),this.features_=e.features||new po;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const n=e.layers;t=function(i){return n.includes(i)}}else t=eh;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[Or(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[Or(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(Ha.ADD,this.boundAddFeature_),this.features_.addEventListener(Ha.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(Ha.ADD,this.boundAddFeature_),this.features_.removeEventListener(Ha.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const n=this.getMap().getAllLayers().find(function(i){if(i instanceof Ql&&i.getSource()&&i.getSource().hasFeature(t))return i});n&&this.addFeatureLayerAssociation_(t,n)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=Or(e);t in Uy||(Uy[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let i=t.length-1;i>=0;--i){const a=t[i];if(a!==this&&a instanceof b_&&a.getStyle()&&a.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(a.getStyle());return}}const n=Or(e);e.setStyle(Uy[n]),delete Uy[n]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[Or(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),n=this.removeCondition_(e),i=this.toggleCondition_(e),a=!t&&!n&&!i,s=e.map,o=this.getFeatures(),l=[],u=[];if(a){Wd(this.featureLayerAssociation_),s.forEachFeatureAtPixel(e.pixel,(c,h)=>{if(!(!(c instanceof yi)||!this.filter_(c,h)))return this.addFeatureLayerAssociation_(c,h),u.push(c),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let c=o.getLength()-1;c>=0;--c){const h=o.item(c),f=u.indexOf(h);f>-1?u.splice(f,1):(o.remove(h),l.push(h))}u.length!==0&&o.extend(u)}else{s.forEachFeatureAtPixel(e.pixel,(c,h)=>{if(!(!(c instanceof yi)||!this.filter_(c,h)))return(t||i)&&!o.getArray().includes(c)?(this.addFeatureLayerAssociation_(c,h),u.push(c)):(n||i)&&o.getArray().includes(c)&&(l.push(c),this.removeFeatureLayerAssociation_(c)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let c=l.length-1;c>=0;--c)o.remove(l[c]);o.extend(u)}return(u.length>0||l.length>0)&&this.dispatchEvent(new ine(nne.SELECT,u,l,e)),!0}}function ane(){const r=_4();return ii(r.Polygon,r.LineString),ii(r.GeometryCollection,r.LineString),function(e){return e.getGeometry()?r[e.getGeometry().getType()]:null}}const JN=0,ov=1,eI=[0,0,0,0],Fg=[],yb={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class xb extends _l{constructor(e,t,n){super(e),this.features=t,this.mapBrowserEvent=n}}class sne extends PA{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:eO,this.defaultDeleteCondition_=function(n){return MK(n)&&ZR(n)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:Ov,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new nS,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Ql({source:new zo({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:lne(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new po(this.source_.getFeatures()),this.source_.addEventListener(ms.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(ms.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(Ha.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(Ha.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const i=this.SEGMENT_WRITERS_[t.getType()];i&&i(e,t)}const n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),e.addEventListener($r.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new po;const n=this.featuresBeingModified_.getArray();for(let i=0,a=t.length;i<a;++i){const s=t[i];for(let o=0,l=s.length;o<l;++o){const u=s[o].feature;u&&!n.includes(u)&&this.featuresBeingModified_.push(u)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new xb(yb.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener($r.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,n=[];t.forEach(function(i){e===i.feature&&n.push(i)});for(let i=n.length-1;i>=0;--i){const a=n[i];for(let s=this.dragSegments_.length-1;s>=0;--s)this.dragSegments_[s][0]===a&&this.dragSegments_.splice(s,1);t.remove(a)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const n=t.getCoordinates(),i={feature:e,geometry:t,segment:[n,n]};this.rBush_.insert(t.getExtent(),i)}writeMultiPointGeometry_(e,t){const n=t.getCoordinates();for(let i=0,a=n.length;i<a;++i){const s=n[i],o={feature:e,geometry:t,depth:[i],index:i,segment:[s,s]};this.rBush_.insert(t.getExtent(),o)}}writeLineStringGeometry_(e,t){const n=t.getCoordinates();for(let i=0,a=n.length-1;i<a;++i){const s=n.slice(i,i+2),o={feature:e,geometry:t,index:i,segment:s};this.rBush_.insert(Au(s),o)}}writeMultiLineStringGeometry_(e,t){const n=t.getCoordinates();for(let i=0,a=n.length;i<a;++i){const s=n[i];for(let o=0,l=s.length-1;o<l;++o){const u=s.slice(o,o+2),c={feature:e,geometry:t,depth:[i],index:o,segment:u};this.rBush_.insert(Au(u),c)}}}writePolygonGeometry_(e,t){const n=t.getCoordinates();for(let i=0,a=n.length;i<a;++i){const s=n[i];for(let o=0,l=s.length-1;o<l;++o){const u=s.slice(o,o+2),c={feature:e,geometry:t,depth:[i],index:o,segment:u};this.rBush_.insert(Au(u),c)}}}writeMultiPolygonGeometry_(e,t){const n=t.getCoordinates();for(let i=0,a=n.length;i<a;++i){const s=n[i];for(let o=0,l=s.length;o<l;++o){const u=s[o];for(let c=0,h=u.length-1;c<h;++c){const f=u.slice(c,c+2),A={feature:e,geometry:t,depth:[o,i],index:c,segment:f};this.rBush_.insert(Au(f),A)}}}}writeCircleGeometry_(e,t){const n=t.getCenter(),i={feature:e,geometry:t,index:JN,segment:[n,n]},a={feature:e,geometry:t,index:ov,segment:[n,n]},s=[i,a];i.featureSegments=s,a.featureSegments=s,this.rBush_.insert(Ym(n),i);let o=t;this.rBush_.insert(o.getExtent(),a)}writeGeometryCollectionGeometry_(e,t){const n=t.getGeometriesArray();for(let i=0;i<n.length;++i){const a=n[i],s=this.SEGMENT_WRITERS_[a.getType()];s(e,a)}}createOrUpdateVertexFeature_(e,t,n){let i=this.vertexFeature_;return i?i.getGeometry().setCoordinates(e):(i=new yi(new ja(e)),this.vertexFeature_=i,this.overlay_.getSource().addFeature(i)),i.set("features",t),i.set("geometries",n),i}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==On.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=On.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==On.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],n=[],i=[];for(let a=0,s=this.dragSegments_.length;a<s;++a){const o=this.dragSegments_[a],l=o[0],u=l.feature;n.includes(u)||n.push(u);const c=l.geometry;i.includes(c)||i.push(c);const h=l.depth;let f;const A=l.segment,d=o[1];for(;t.length<c.getStride();)t.push(A[d][t.length]);switch(c.getType()){case"Point":f=t,A[0]=t,A[1]=t;break;case"MultiPoint":f=c.getCoordinates(),f[l.index]=t,A[0]=t,A[1]=t;break;case"LineString":f=c.getCoordinates(),f[l.index+d]=t,A[d]=t;break;case"MultiLineString":f=c.getCoordinates(),f[h[0]][l.index+d]=t,A[d]=t;break;case"Polygon":f=c.getCoordinates(),f[h[0]][l.index+d]=t,A[d]=t;break;case"MultiPolygon":f=c.getCoordinates(),f[h[1]][h[0]][l.index+d]=t,A[d]=t;break;case"Circle":if(A[0]=t,A[1]=t,l.index===JN)this.changingFeature_=!0,c.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let p=Cx(ia(c.getCenter()),ia(t));c.setRadius(p),this.changingFeature_=!1}break}f&&this.setGeometryCoordinates_(c,f)}this.createOrUpdateVertexFeature_(t,n,i)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const n=this.vertexFeature_;if(n){e.map.getView().getProjection();const i=[],a=n.getGeometry().getCoordinates(),s=Au([a]),o=this.rBush_.getInExtent(s),l={};o.sort(one);for(let u=0,c=o.length;u<c;++u){const h=o[u],f=h.segment;let A=Or(h.geometry);const d=h.depth;if(d&&(A+="-"+d.join("-")),l[A]||(l[A]=new Array(2)),h.geometry.getType()==="Circle"&&h.index===ov){const p=rI(t,h);Wu(p,a)&&!l[A][0]&&(this.dragSegments_.push([h,0]),l[A][0]=h);continue}if(Wu(f[0],a)&&!l[A][0]){this.dragSegments_.push([h,0]),l[A][0]=h;continue}if(Wu(f[1],a)&&!l[A][1]){if(l[A][0]&&l[A][0].index===0){let p=h.geometry.getCoordinates();switch(h.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":p=p[d[1]];case"Polygon":if(h.index!==p[d[0]].length-2)continue;break}}this.dragSegments_.push([h,1]),l[A][1]=h;continue}Or(f)in this.vertexSegments_&&!l[A][0]&&!l[A][1]&&this.insertVertexCondition_(e)&&i.push(h)}i.length&&this.willModifyFeatures_(e,[i]);for(let u=i.length-1;u>=0;--u)this.insertVertex_(i[u],a)}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const n=this.dragSegments_[t][0],i=n.geometry;if(i.getType()==="Circle"){const a=i.getCenter(),s=n.featureSegments[0],o=n.featureSegments[1];s.segment[0]=a,s.segment[1]=a,o.segment[0]=a,o.segment[1]=a,this.rBush_.update(Ym(a),s);let l=i;this.rBush_.update(l.getExtent(),o)}else this.rBush_.update(Au(n.segment),n)}return this.featuresBeingModified_&&(this.dispatchEvent(new xb(yb.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,t,n){const i=n||t.getCoordinateFromPixel(e);t.getView().getProjection();const a=function(l,u){return tI(i,l)-tI(i,u)};let s,o;if(this.hitDetection_){const l=typeof this.hitDetection_=="object"?u=>u===this.hitDetection_:void 0;t.forEachFeatureAtPixel(e,(u,c,h)=>{h&&h.getType()==="Point"&&(h=new ja(Xg(h.getCoordinates())));const f=h||u.getGeometry();if(u instanceof yi&&this.features_.getArray().includes(u)){o=f;const A=u.getGeometry().getFlatCoordinates().slice(0,2);s=[{feature:u,geometry:o,segment:[A,A]}]}return!0},{layerFilter:l})}if(!s){const l=Hc(Ym(i,eI)),u=t.getView().getResolution()*this.pixelTolerance_,c=J5(p1(l,u,eI));s=this.rBush_.getInExtent(c)}if(s&&s.length>0){const l=s.sort(a)[0],u=l.segment;let c=rI(i,l);const h=t.getPixelFromCoordinate(c);let f=Cx(e,h);if(o||f<=this.pixelTolerance_){const A={};if(A[Or(u)]=!0,this.snapToPointer_||(this.delta_[0]=c[0]-i[0],this.delta_[1]=c[1]-i[1]),l.geometry.getType()==="Circle"&&l.index===ov)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(c,[l.feature],[l.geometry]);else{const d=t.getPixelFromCoordinate(u[0]),p=t.getPixelFromCoordinate(u[1]),y=Wg(h,d),v=Wg(h,p);f=Math.sqrt(Math.min(y,v)),this.snappedToVertex_=f<=this.pixelTolerance_,this.snappedToVertex_&&(c=y>v?u[1]:u[0]),this.createOrUpdateVertexFeature_(c,[l.feature],[l.geometry]);const w={};w[Or(l.geometry)]=!0;for(let x=1,b=s.length;x<b;++x){const C=s[x].segment;if(Wu(u[0],C[0])&&Wu(u[1],C[1])||Wu(u[0],C[1])&&Wu(u[1],C[0])){const S=Or(s[x].geometry);S in w||(w[S]=!0,A[Or(C)]=!0)}else break}}this.vertexSegments_=A;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const n=e.segment,i=e.feature,a=e.geometry,s=e.depth,o=e.index;let l;for(;t.length<a.getStride();)t.push(0);switch(a.getType()){case"MultiLineString":l=a.getCoordinates(),l[s[0]].splice(o+1,0,t);break;case"Polygon":l=a.getCoordinates(),l[s[0]].splice(o+1,0,t);break;case"MultiPolygon":l=a.getCoordinates(),l[s[1]][s[0]].splice(o+1,0,t);break;case"LineString":l=a.getCoordinates(),l.splice(o+1,0,t);break;default:return}this.setGeometryCoordinates_(a,l);const u=this.rBush_;u.remove(e),this.updateSegmentIndices_(a,o,s,1);const c={segment:[n[0],t],feature:i,geometry:a,depth:s,index:o};u.insert(Au(c.segment),c),this.dragSegments_.push([c,1]);const h={segment:[t,n[1]],feature:i,geometry:a,depth:s,index:o+1};u.insert(Au(h.segment),h),this.dragSegments_.push([h,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=On.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new xb(yb.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1}removeVertex_(){const e=this.dragSegments_,t={};let n=!1,i,a,s,o,l,u,c,h,f,A,d;for(l=e.length-1;l>=0;--l)s=e[l],A=s[0],d=Or(A.feature),A.depth&&(d+="-"+A.depth.join("-")),d in t||(t[d]={}),s[1]===0?(t[d].right=A,t[d].index=A.index):s[1]==1&&(t[d].left=A,t[d].index=A.index+1);for(d in t){switch(f=t[d].right,c=t[d].left,u=t[d].index,h=u-1,c!==void 0?A=c:A=f,h<0&&(h=0),o=A.geometry,a=o.getCoordinates(),i=a,n=!1,o.getType()){case"MultiLineString":a[A.depth[0]].length>2&&(a[A.depth[0]].splice(u,1),n=!0);break;case"LineString":a.length>2&&(a.splice(u,1),n=!0);break;case"MultiPolygon":i=i[A.depth[1]];case"Polygon":i=i[A.depth[0]],i.length>4&&(u==i.length-1&&(u=0),i.splice(u,1),n=!0,u===0&&(i.pop(),i.push(i[0]),h=i.length-1));break}if(n){this.setGeometryCoordinates_(o,a);const p=[];if(c!==void 0&&(this.rBush_.remove(c),p.push(c.segment[0])),f!==void 0&&(this.rBush_.remove(f),p.push(f.segment[1])),c!==void 0&&f!==void 0){const y={depth:A.depth,feature:A.feature,geometry:A.geometry,index:h,segment:p};this.rBush_.insert(Au(y.segment),y)}this.updateSegmentIndices_(o,u,A.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return n}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,n,i){this.rBush_.forEachInExtent(e.getExtent(),function(a){a.geometry===e&&(n===void 0||a.depth===void 0||oh(a.depth,n))&&a.index>t&&(a.index+=i)})}}function one(r,e){return r.index-e.index}function tI(r,e,t){const n=e.geometry;if(n.getType()==="Circle"){let a=n;if(e.index===ov){const s=Wg(a.getCenter(),ia(r)),o=Math.sqrt(s)-a.getRadius();return o*o}}const i=ia(r);return Fg[0]=ia(e.segment[0]),Fg[1]=ia(e.segment[1]),gj(i,Fg)}function rI(r,e,t){const n=e.geometry;if(n.getType()==="Circle"&&e.index===ov)return Xg(n.getClosestPoint(ia(r)));const i=ia(r);return Fg[0]=ia(e.segment[0]),Fg[1]=ia(e.segment[1]),Xg(aR(i,Fg))}function lne(){const r=_4();return function(e,t){return r.Point}}const une=new En({fill:new _n({color:"rgba(255, 193, 7, 0.3)"}),stroke:new hn({color:"#ffc107",width:3}),image:new qs({radius:8,fill:new _n({color:"#ffc107"}),stroke:new hn({color:"#ffffff",width:2})})});class cne{constructor(){this.map=null,this.select=null,this.modify=null,this.isActive=!1,this.selectedFeatures=null}init(){this.map=Nr.getMap()}activate(e={}){this.map||this.init();const{enableModify:t=!0}=e;this.deactivate(),this.select=new b_({condition:rN,toggleCondition:v_,multi:!0,style:une,filter:(i,a)=>a?a.getProperties().type!=="base":!1}),this.selectedFeatures=this.select.getFeatures(),this.select.on("select",i=>{this.handleSelect(i)}),this.map.addInteraction(this.select),t&&(this.modify=new sne({features:this.selectedFeatures,deleteCondition:i=>kK(i)&&rN(i)}),this.modify.on("modifystart",i=>{this.handleModifyStart(i)}),this.modify.on("modifyend",i=>{this.handleModifyEnd(i)}),this.map.addInteraction(this.modify)),this.isActive=!0;const n=document.getElementById("status-message");n&&(n.textContent="피처를 클릭하여 선택 (Shift+클릭: 다중 선택)"),this.handleKeyDown=this.handleKeyDown.bind(this),document.addEventListener("keydown",this.handleKeyDown),Gt.emit(Xt.TOOL_ACTIVATED,{tool:"select"})}handleSelect(e){const t=e.selected,n=e.deselected,i=this.selectedFeatures?this.selectedFeatures.getLength():0;if(t.length>0){const a=t[0],s=a.getGeometry();Gt.emit(Xt.FEATURE_SELECTED,{feature:a,geometryType:s.getType(),count:i});const o=document.getElementById("status-message");o&&(i>1?o.textContent=`${i}개 선택됨 (Delete로 삭제)`:o.textContent="선택됨 (Delete로 삭제, 꼭짓점 드래그로 수정)")}if(n.length>0)if(Gt.emit(Xt.FEATURE_DESELECTED,{features:n}),i===0){const a=document.getElementById("status-message");a&&(a.textContent="피처를 클릭하여 선택 (Shift+클릭: 다중 선택)")}else{const a=document.getElementById("status-message");a&&(i>1?a.textContent=`${i}개 선택됨 (Delete로 삭제)`:a.textContent="선택됨 (Delete로 삭제, 꼭짓점 드래그로 수정)")}}handleModifyStart(e){e.features.getArray().forEach(n=>{const i=pt.getAllLayers();for(const a of i)if(a.source.hasFeature(n)){Gt.emit(Xt.FEATURE_MODIFY_START,{feature:n,layerId:a.id});break}})}handleModifyEnd(e){e.features.getArray().forEach(i=>{Gt.emit(Xt.FEATURE_MODIFIED,{feature:i})});const n=document.getElementById("status-message");n&&(n.textContent="도형이 수정되었습니다",setTimeout(()=>{n.textContent="피처를 클릭하여 선택하세요"},2e3))}handleKeyDown(e){e.key==="Delete"||e.key==="Backspace"?this.deleteSelectedFeatures():e.key==="Escape"&&this.clearSelection()}deleteSelectedFeatures(){if(!this.selectedFeatures||this.selectedFeatures.getLength()===0)return;this.selectedFeatures.getArray().slice().forEach(n=>{const i=pt.getAllLayers();for(const a of i){const s=a.source;if(s.hasFeature(n)){s.removeFeature(n),a.featureCount=s.getFeatures().length,a.featureCount===0&&confirm(`"${a.name}" 레이어에 피처가 없습니다. 레이어를 삭제할까요?`)&&pt.removeLayer(a.id),Gt.emit(Xt.FEATURE_DELETED,{feature:n,layerId:a.id});break}}}),this.selectedFeatures.clear();const t=document.getElementById("status-message");t&&(t.textContent="삭제되었습니다",setTimeout(()=>{t.textContent="피처를 클릭하여 선택하세요"},2e3)),Gt.emit(Xt.LAYER_ADDED,{})}clearSelection(){this.selectedFeatures&&this.selectedFeatures.clear(),Gt.emit(Xt.FEATURE_DESELECTED,{features:[]})}deactivate(){this.select&&(this.map.removeInteraction(this.select),this.select=null),this.modify&&(this.map.removeInteraction(this.modify),this.modify=null),this.selectedFeatures=null,this.isActive=!1,document.removeEventListener("keydown",this.handleKeyDown);const e=document.getElementById("status-message");e&&(e.textContent="준비"),Gt.emit(Xt.TOOL_DEACTIVATED,{tool:"select"})}getIsActive(){return this.isActive}getSelectedFeatures(){return this.selectedFeatures?this.selectedFeatures.getArray():[]}deleteSelected(){this.deleteSelectedFeatures()}selectAll(){const e=pt.getSelectedLayerId();if(!e){console.warn("레이어를 먼저 선택하세요");return}const t=pt.getLayer(e);if(!t)return;this.isActive||this.activate();const n=t.source.getFeatures();this.selectedFeatures&&(this.selectedFeatures.clear(),n.forEach(i=>{this.selectedFeatures.push(i)})),Gt.emit(Xt.FEATURE_SELECTED,{features:n,count:n.length})}}const ps=new cne,hne=new En({fill:new _n({color:"rgba(255, 193, 7, 0.2)"}),stroke:new hn({color:"#ffc107",width:2,lineDash:[10,10]}),image:new qs({radius:5,fill:new _n({color:"#ffc107"}),stroke:new hn({color:"#fff",width:2})})}),fne=new En({fill:new _n({color:"rgba(255, 152, 0, 0.3)"}),stroke:new hn({color:"#ff9800",width:3}),image:new qs({radius:5,fill:new _n({color:"#ff9800"}),stroke:new hn({color:"#fff",width:2})})});class Ane{constructor(){this.map=null,this.draw=null,this.measureType=null,this.source=null,this.layer=null,this.tooltips=[],this.currentTooltip=null,this.sketch=null,this.listener=null,this.isActive=!1,this.rightClickHandler=null,this.contextMenuHandler=null}init(){this.map=Nr.getMap(),this.source=new zo,this.layer=new Ql({source:this.source,style:fne,zIndex:999}),this.map.addLayer(this.layer),Gt.on(Xt.MEASUREMENT_CLEAR,()=>{this.clearMeasurements()})}activate(e){this.map||this.init(),this.deactivate(),this.measureType=e;const t=e==="distance"?"LineString":"Polygon";this.draw=new FP({source:this.source,type:t,style:hne}),this.map.addInteraction(this.draw),this.rightClickHandler=n=>{n.button===2&&this.sketch&&(n.preventDefault(),n.stopPropagation(),this.draw.finishDrawing())},this.contextMenuHandler=n=>{this.isActive&&n.preventDefault()},this.map.getViewport().addEventListener("mousedown",this.rightClickHandler),this.map.getViewport().addEventListener("contextmenu",this.contextMenuHandler),this.createTooltip(),this.draw.on("drawstart",n=>{this.sketch=n.feature,this.listener=this.sketch.getGeometry().on("change",i=>{const a=i.target;let s;e==="distance"?s=this.formatLength(a):s=this.formatArea(a),this.updateTooltip(s,a)})}),this.draw.on("drawend",n=>{const i=n.feature.getGeometry();let a;e==="distance"?a=this.formatLength(i):a=this.formatArea(i),this.finalizeTooltip(a,i),OC(this.listener),this.sketch=null,this.createTooltip()}),this.isActive=!0,this.updateStatusMessage(e)}deactivate(){this.draw&&(this.map.removeInteraction(this.draw),this.draw=null),this.currentTooltip&&(this.map.removeOverlay(this.currentTooltip),this.currentTooltip=null),this.listener&&(OC(this.listener),this.listener=null),this.rightClickHandler&&(this.map.getViewport().removeEventListener("mousedown",this.rightClickHandler),this.rightClickHandler=null),this.contextMenuHandler&&(this.map.getViewport().removeEventListener("contextmenu",this.contextMenuHandler),this.contextMenuHandler=null),this.sketch=null,this.isActive=!1,this.measureType=null;var e=document.getElementById("status-message");e&&(e.textContent="준비")}createTooltip(){var e=document.createElement("div");e.className="measure-tooltip",this.currentTooltip=new gO({element:e,offset:[0,-15],positioning:"bottom-center",stopEvent:!1}),this.map.addOverlay(this.currentTooltip)}updateTooltip(e,t){var n=this.currentTooltip.getElement();n.innerHTML=e,n.className="measure-tooltip measuring";var i;this.measureType==="distance"?i=t.getLastCoordinate():i=t.getInteriorPoint().getCoordinates(),this.currentTooltip.setPosition(i)}finalizeTooltip(e,t){var n=this.currentTooltip.getElement();n.innerHTML=e,n.className="measure-tooltip final";var i;this.measureType==="distance"?i=t.getLastCoordinate():i=t.getInteriorPoint().getCoordinates(),this.currentTooltip.setPosition(i),this.tooltips.push(this.currentTooltip),this.currentTooltip=null}formatLength(e){var t=Sx(e,{projection:"EPSG:3857"}),n;return t>1e3?n=(t/1e3).toFixed(2)+" km":n=t.toFixed(1)+" m",n}formatArea(e){var t=W5(e,{projection:"EPSG:3857"}),n;return t>1e6?n=(t/1e6).toFixed(2)+" km²":t>1e4?n=(t/1e4).toFixed(2)+" ha":n=t.toFixed(1)+" m²",n}clearMeasurements(){this.source.clear();for(var e=0;e<this.tooltips.length;e++)this.map.removeOverlay(this.tooltips[e]);this.tooltips=[],this.currentTooltip&&(this.map.removeOverlay(this.currentTooltip),this.currentTooltip=null)}updateStatusMessage(e){var t=document.getElementById("status-message");t&&(e==="distance"?t.textContent="거리 측정: 좌클릭으로 점 추가, 우클릭 또는 더블클릭으로 완료":t.textContent="면적 측정: 좌클릭으로 점 추가, 우클릭 또는 더블클릭으로 완료")}getIsActive(){return this.isActive}}var jf=new Ane;class dne{constructor(){this.currentTool=null,this.tools={select:ps,"draw-point":Ls,"draw-line":Ls,"draw-polygon":Ls,"draw-multipoint":Ls,"draw-multiline":Ls,"draw-multipolygon":Ls,"measure-distance":jf,"measure-area":jf}}activateTool(e){switch(this.deactivateCurrentTool(),e){case"select":ps.activate();break;case"draw-point":Ls.activate("Point");break;case"draw-line":Ls.activate("LineString");break;case"draw-polygon":Ls.activate("Polygon");break;case"draw-multipoint":Ls.activate("MultiPoint");break;case"draw-multiline":Ls.activate("MultiLineString");break;case"draw-multipolygon":Ls.activate("MultiPolygon");break;case"measure-distance":jf.activate("distance");break;case"measure-area":jf.activate("area");break;case"pan":break;default:console.warn("Unknown tool:",e);return}this.currentTool=e,this.updateToolbarUI(e),Gt.emit(Xt.TOOL_CHANGED,{tool:e})}deactivateCurrentTool(){Ls.getIsActive()&&Ls.deactivate(),ps.getIsActive()&&ps.deactivate(),jf.getIsActive()&&jf.deactivate(),this.currentTool=null}updateToolbarUI(e){document.querySelectorAll("#toolbar .btn-icon").forEach(function(n){n.classList.remove("active")});var t=document.querySelector('#toolbar [data-tool="'+e+'"]');t&&t.classList.add("active")}getCurrentTool(){return this.currentTool}toggleTool(e){this.currentTool===e?(Ls.getIsMultiMode()&&Ls.getMultiFeatureCount()>0&&Ls.saveMultiFeature(),this.deactivateCurrentTool(),this.updateToolbarUI(null)):this.activateTool(e)}deleteSelectedFeatures(){if(ps&&ps.getSelectedFeatures&&ps.getSelectedFeatures().length===0)return!1;if(ps&&ps.deleteSelected)return ps.deleteSelected(),!0}selectAllFeatures(){ps&&ps.selectAll&&ps.selectAll()}clearSelection(){ps&&ps.clearSelection&&ps.clearSelection()}clearMeasurements(){jf&&jf.clearMeasurements()}}var Oh=new dne;const gne=new En({fill:new _n({color:"rgba(255, 193, 7, 0.4)"}),stroke:new hn({color:"#ffc107",width:3}),image:new qs({radius:8,fill:new _n({color:"#ffc107"}),stroke:new hn({color:"#fff",width:2})})});class pne{constructor(){this.openWindows=new Map,this.highlightSelects=new Map,this.bindEvents()}bindEvents(){Gt.on("layer:openTable",({layerId:e})=>{this.open(e)}),Gt.on(Xt.LAYER_REMOVED,({layerId:e})=>{this.closeWindow(e)}),Gt.on(Xt.FEATURE_CREATED,()=>{this.refreshAllWindows()}),Gt.on(Xt.FEATURE_DELETED,()=>{this.refreshAllWindows()})}open(e){const t=pt.getLayer(e);if(!t)return;if(this.openWindows.has(e)){const f=this.openWindows.get(e);if(f&&!f.closed){f.focus();return}}const n=t.source.getFeatures(),i=this.extractColumns(n),a=900,s=500,o=(screen.width-a)/2,l=(screen.height-s)/2,u=window.open("",`attribute_table_${e}`,`width=${a},height=${s},left=${o},top=${l},resizable=yes,scrollbars=yes`);if(!u){alert("팝업이 차단되었습니다. 팝업 차단을 해제해주세요.");return}this.openWindows.set(e,u);const c=this.generateHTML(t,n,i,e);u.document.write(c),u.document.close();const h=setInterval(()=>{u.closed&&(clearInterval(h),this.removeHighlight(e),this.openWindows.delete(e))},500);this.setupHighlight(e,t),this.bindWindowEvents(u,e,n,i)}extractColumns(e){const t=new Set;return e.forEach(n=>{const i=n.getProperties();Object.keys(i).forEach(a=>{a!=="geometry"&&t.add(a)})}),Array.from(t)}generateHTML(e,t,n,i){const a=document.documentElement.getAttribute("data-theme")==="dark",s=t.map((l,u)=>{const c=l.ol_uid,h=n.map(f=>{const A=l.get(f),d=A??"";return`<td title="${d}">${d}</td>`}).join("");return`<tr data-feature-id="${c}"><td class="row-num">${u+1}</td>${h}</tr>`}).join(""),o=n.map(l=>`<th class="sortable" data-column="${l}">${l}<span class="sort-icon"></span></th>`).join("");return`
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>속성 테이블 - ${e.name}</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: 13px;
      background: ${a?"#1a1a2e":"#ffffff"};
      color: ${a?"#e4e4e7":"#333333"};
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 16px;
      background: ${a?"#252540":"#f5f5f5"};
      border-bottom: 1px solid ${a?"#3a3a5c":"#e0e0e0"};
    }

    .header-title {
      font-weight: 600;
      font-size: 14px;
    }

    .header-count {
      color: ${a?"#a0a0b0":"#666666"};
      font-size: 12px;
      margin-left: 8px;
    }

    .selection-count {
      color: #4a90d9;
      font-size: 12px;
      margin-left: 8px;
    }

    .header-actions {
      display: flex;
      gap: 8px;
    }

    .btn {
      padding: 6px 12px;
      border: none;
      border-radius: 4px;
      font-size: 12px;
      cursor: pointer;
      background: ${a?"#3a3a5c":"#e0e0e0"};
      color: ${a?"#e4e4e7":"#333333"};
      transition: background 0.2s;
    }

    .btn:hover {
      background: ${a?"#4a4a6c":"#d0d0d0"};
    }

    .btn-primary {
      background: #4a90d9;
      color: white;
    }

    .btn-primary:hover {
      background: #3a80c9;
    }

    .btn-danger {
      background: #dc3545;
      color: white;
    }

    .btn-danger:hover {
      background: #c82333;
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .table-container {
      height: calc(100vh - 50px);
      overflow: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
    }

    thead {
      position: sticky;
      top: 0;
      z-index: 10;
    }

    th {
      background: ${a?"#2a2a45":"#f0f0f0"};
      padding: 8px 10px;
      text-align: left;
      font-weight: 600;
      border-bottom: 2px solid ${a?"#4a4a6c":"#ccc"};
      white-space: nowrap;
      cursor: pointer;
      user-select: none;
    }

    th:hover {
      background: ${a?"#353555":"#e5e5e5"};
    }

    th.sortable .sort-icon::after {
      content: '⇅';
      margin-left: 4px;
      opacity: 0.4;
    }

    th.asc .sort-icon::after {
      content: '↑';
      opacity: 1;
    }

    th.desc .sort-icon::after {
      content: '↓';
      opacity: 1;
    }

    td {
      padding: 6px 10px;
      border-bottom: 1px solid ${a?"#3a3a5c":"#eee"};
      max-width: 200px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    td.editable:hover {
      background: ${a?"#3a3a5c":"#f0f0f0"};
      cursor: text;
    }

    td.editing {
      padding: 2px;
    }

    td.editing input {
      width: 100%;
      padding: 4px 8px;
      border: 2px solid #4a90d9;
      border-radius: 3px;
      font-size: 12px;
      background: ${a?"#1a1a2e":"#ffffff"};
      color: ${a?"#e4e4e7":"#333333"};
      outline: none;
    }

    .row-num {
      width: 50px;
      text-align: center;
      color: ${a?"#808090":"#999"};
      background: ${a?"#222238":"#fafafa"};
    }

    tr:hover {
      background: ${a?"#2a2a45":"#f5f5f5"};
    }

    tr.selected {
      background: ${a?"#3a4a5c":"#e3f2fd"} !important;
    }

    tr.selected td {
      border-color: ${a?"#4a5a6c":"#bbdefb"};
    }

    .empty-message {
      padding: 40px;
      text-align: center;
      color: ${a?"#808090":"#999"};
    }

    .help-text {
      font-size: 11px;
      color: ${a?"#808090":"#999"};
      padding: 8px 16px;
      background: ${a?"#1a1a2e":"#fafafa"};
      border-bottom: 1px solid ${a?"#3a3a5c":"#e0e0e0"};
    }
  </style>
</head>
<body>
  <div class="header">
    <div>
      <span class="header-title">${e.name}</span>
      <span class="header-count">(${t.length}개 피처)</span>
      <span class="selection-count" id="selection-count"></span>
    </div>
    <div class="header-actions">
      <button class="btn" id="btn-zoom-selected" title="선택한 피처로 이동">선택으로 이동</button>
      <button class="btn btn-danger" id="btn-delete-selected" title="선택한 피처 삭제" disabled>선택 삭제</button>
      <button class="btn" id="btn-refresh">새로고침</button>
    </div>
  </div>
  <div class="help-text">Ctrl+클릭: 다중 선택 | Shift+클릭: 범위 선택 | 더블클릭: 셀 편집 | Delete: 선택 삭제</div>
  <div class="table-container">
    ${t.length>0?`
    <table>
      <thead>
        <tr>
          <th class="row-num">#</th>
          ${o}
        </tr>
      </thead>
      <tbody>
        ${s}
      </tbody>
    </table>
    `:'<div class="empty-message">피처가 없습니다.</div>'}
  </div>
</body>
</html>
    `}bindWindowEvents(e,t,n,i){const a=this,s=new Map;n.forEach(o=>{s.set(String(o.ol_uid),o)}),setTimeout(function(){const o=e.document;if(!o||!o.body)return;let l=new Set,u=-1,c=null,h=!0,f=null;const A=o.getElementById("btn-delete-selected"),d=o.getElementById("selection-count");o.querySelectorAll("tbody tr").forEach((R,U)=>{R.addEventListener("click",function(W){const Q=this.dataset.featureId,re=v(this);W.ctrlKey||W.metaKey?(x(Q),u=re):W.shiftKey&&u>=0?S(u,re):(C(),b(Q),u=re),I(),B()})}),o.querySelectorAll("tbody td:not(.row-num)").forEach((R,U)=>{R.classList.add("editable"),R.addEventListener("dblclick",function(W){W.stopPropagation(),F(this)})}),o.querySelectorAll("th.sortable").forEach(R=>{R.addEventListener("click",function(){const U=this.dataset.column;c===U?h=!h:(c=U,h=!0),L(U,h),G(U,h)})});const p=o.getElementById("btn-zoom-selected");p&&p.addEventListener("click",T),A&&A.addEventListener("click",M);const y=o.getElementById("btn-refresh");y&&y.addEventListener("click",function(){a.refreshWindow(t)}),o.addEventListener("keydown",function(R){R.key==="Delete"&&l.size>0&&!f&&M(),R.key==="Escape"&&f&&O()});function v(R){return Array.from(o.querySelectorAll("tbody tr")).indexOf(R)}function w(){return Array.from(o.querySelectorAll("tbody tr"))}function x(R){l.has(R)?l.delete(R):l.add(R)}function b(R){l.add(R)}function C(){l.clear()}function S(R,U){const W=w(),Q=Math.min(R,U),re=Math.max(R,U);for(let oe=Q;oe<=re;oe++){const P=W[oe];P&&l.add(P.dataset.featureId)}}function I(){o.querySelectorAll("tbody tr").forEach(R=>{l.has(R.dataset.featureId)?R.classList.add("selected"):R.classList.remove("selected")}),d&&(l.size>0?d.textContent=`(${l.size}개 선택됨)`:d.textContent=""),A&&(A.disabled=l.size===0)}function B(){const R=a.highlightSelects.get(t);if(R&&(R.getFeatures().clear(),l.forEach(U=>{const W=s.get(U);W&&R.getFeatures().push(W)})),l.size===1){const U=l.values().next().value,W=s.get(U);W&&Gt.emit(Xt.FEATURE_SELECTED,{feature:W})}}function T(){if(l.size===0){e.alert("먼저 피처를 선택하세요.");return}let R=null;l.forEach(U=>{const W=s.get(U);if(W){const Q=W.getGeometry();if(Q){const re=Q.getExtent();R?(R[0]=Math.min(R[0],re[0]),R[1]=Math.min(R[1],re[1]),R[2]=Math.max(R[2],re[2]),R[3]=Math.max(R[3],re[3])):R=re.slice()}}}),R&&Nr.fitExtent(R,{padding:[100,100,100,100],maxZoom:15})}function M(){if(l.size===0)return;const R=l.size,U=R===1?"선택한 피처를 삭제하시겠습니까?":`선택한 ${R}개의 피처를 삭제하시겠습니까?`;if(!e.confirm(U))return;const W=pt.getLayer(t);if(!W||!W.source)return;l.forEach(oe=>{const P=s.get(oe);P&&(W.source.removeFeature(P),s.delete(oe))}),l.forEach(oe=>{const P=o.querySelector(`tbody tr[data-feature-id="${oe}"]`);P&&P.remove()}),o.querySelectorAll("tbody tr").forEach((oe,P)=>{const z=oe.querySelector(".row-num");z&&(z.textContent=P+1)});const Q=o.querySelector(".header-count");if(Q){const oe=s.size;Q.textContent=`(${oe}개 피처)`}const re=a.highlightSelects.get(t);re&&re.getFeatures().clear(),C(),I(),Gt.emit(Xt.FEATURE_DELETED,{layerId:t,count:R})}function F(R){f&&N();const U=R.closest("tr"),W=U.dataset.featureId,Q=s.get(W);if(!Q)return;const oe=Array.from(U.querySelectorAll("td")).indexOf(R)-1;if(oe<0||oe>=i.length)return;const P=i[oe],z=Q.get(P);f={td:R,featureId:W,column:P,originalValue:z},R.classList.add("editing");const K=o.createElement("input");K.type="text",K.value=z??"",R.innerHTML="",R.appendChild(K),K.focus(),K.select(),K.addEventListener("blur",function(){N()}),K.addEventListener("keydown",function(J){J.key==="Enter"?N():J.key==="Escape"&&O(),J.stopPropagation()})}function N(){if(!f)return;const{td:R,featureId:U,column:W,originalValue:Q}=f,re=R.querySelector("input"),oe=re?re.value:Q,P=s.get(U);if(P&&oe!==Q){const z=parseFloat(oe),K=!isNaN(z)&&oe.trim()!==""?z:oe;P.set(W,K)}R.classList.remove("editing"),R.innerHTML="",R.textContent=oe,R.title=oe,f=null}function O(){if(!f)return;const{td:R,originalValue:U}=f;R.classList.remove("editing"),R.innerHTML="",R.textContent=U??"",R.title=R.textContent,f=null}function L(R,U){const W=o.querySelector("tbody");if(!W)return;const Q=Array.from(W.querySelectorAll("tr"));Q.sort((re,oe)=>{const P=re.dataset.featureId,z=oe.dataset.featureId,K=s.get(P),J=s.get(z),ue=K?K.get(R):"",ge=J?J.get(R):"",le=parseFloat(ue),me=parseFloat(ge);if(!isNaN(le)&&!isNaN(me))return U?le-me:me-le;const xe=String(ue||"").toLowerCase(),Be=String(ge||"").toLowerCase();return U?xe.localeCompare(Be):Be.localeCompare(xe)}),Q.forEach((re,oe)=>{const P=re.querySelector(".row-num");P&&(P.textContent=oe+1),W.appendChild(re)})}function G(R,U){o.querySelectorAll("th.sortable").forEach(W=>{W.classList.remove("asc","desc"),W.dataset.column===R&&W.classList.add(U?"asc":"desc")})}},100)}refreshWindow(e){this.closeWindow(e),this.open(e)}refreshAllWindows(){for(const e of this.openWindows.keys())this.refreshWindow(e)}closeWindow(e){const t=this.openWindows.get(e);t&&!t.closed&&t.close(),this.openWindows.delete(e),this.removeHighlight(e)}setupHighlight(e,t){this.removeHighlight(e);const n=Nr.getMap(),i=new b_({condition:()=>!1,style:gne,layers:[t.olLayer]});n.addInteraction(i),this.highlightSelects.set(e,i)}removeHighlight(e){const t=this.highlightSelects.get(e);if(t){const n=Nr.getMap();n&&n.removeInteraction(t),this.highlightSelects.delete(e)}}}const mne=new pne,L0={"EPSG:4326":{name:"WGS 84 (경위도)",proj4:"+proj=longlat +datum=WGS84 +no_defs",units:"degrees"},"EPSG:3857":{name:"Web Mercator",proj4:"+proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs",units:"meters"},"EPSG:5179":{name:"Korea 2000 / UTM",proj4:"+proj=tmerc +lat_0=38 +lon_0=127.5 +k=0.9996 +x_0=1000000 +y_0=2000000 +ellps=GRS80 +units=m +no_defs",units:"meters"},"EPSG:5186":{name:"Korea 2000 / 중부원점",proj4:"+proj=tmerc +lat_0=38 +lon_0=127 +k=1 +x_0=200000 +y_0=600000 +ellps=GRS80 +units=m +no_defs",units:"meters"},"EPSG:5187":{name:"Korea 2000 / 동부원점",proj4:"+proj=tmerc +lat_0=38 +lon_0=129 +k=1 +x_0=200000 +y_0=600000 +ellps=GRS80 +units=m +no_defs",units:"meters"},"EPSG:5188":{name:"Korea 2000 / 서부원점",proj4:"+proj=tmerc +lat_0=38 +lon_0=125 +k=1 +x_0=200000 +y_0=600000 +ellps=GRS80 +units=m +no_defs",units:"meters"}};class vne{constructor(){this.displayCRS="EPSG:4326",this.mapCRS="EPSG:3857",this.initialized=!1}init(){this.initialized||(Object.entries(L0).forEach(([e,t])=>{Go.defs(e)||Go.defs(e,t.proj4)}),rP(Go),this.initialized=!0,console.log("좌표계 시스템 초기화 완료"))}getAvailableCRS(){return Object.entries(L0).map(([e,t])=>({code:e,name:t.name,units:t.units}))}getCRSInfo(e){return L0[e]||null}setDisplayCRS(e){return L0[e]?(this.displayCRS=e,Gt.emit(Xt.CRS_CHANGED,{crs:e}),!0):(console.warn(`Unknown CRS: ${e}`),!1)}getDisplayCRS(){return this.displayCRS}transform(e,t,n){if(t===n)return e;try{return Go(t,n,e)}catch(i){return console.error("좌표 변환 오류:",i),e}}toDisplay(e){return this.transform(e,this.mapCRS,this.displayCRS)}fromDisplay(e){return this.transform(e,this.displayCRS,this.mapCRS)}formatCoords(e,t=null){const n=t||this.displayCRS,i=L0[n];return i?i.units==="degrees"?`${e[0].toFixed(5)}, ${e[1].toFixed(5)}`:`${e[0].toFixed(2)}, ${e[1].toFixed(2)}`:`${e[0]}, ${e[1]}`}getUnits(e=null){var n;const t=e||this.displayCRS;return((n=L0[t])==null?void 0:n.units)||"unknown"}}const jc=new vne,yne="1.0",wb=".egis";class xne{constructor(){this.currentProjectName="새 프로젝트",this.isDirty=!1}serialize(){const e=new rs,t=pt.getAllLayers(),n=Nr.getView();return{version:yne,name:this.currentProjectName,created:new Date().toISOString(),view:{center:Nr.getCenter(),zoom:n.getZoom()},displayCRS:jc.getDisplayCRS(),layers:t.map(a=>{const s=a.source.getFeatures(),o=e.writeFeaturesObject(s,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"});return{id:a.id,name:a.name,visible:a.visible,color:a.color,opacity:a.opacity||1,features:o}})}}async deserialize(e){if(!e.version)throw new Error("유효하지 않은 프로젝트 파일입니다.");pt.getAllLayers().forEach(i=>{pt.removeLayer(i.id)}),this.currentProjectName=e.name||"불러온 프로젝트",e.displayCRS&&jc.setDisplayCRS(e.displayCRS);const n=new rs;for(const i of e.layers)try{const a=n.readFeatures(i.features,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}),s=pt.addLayer({name:i.name,color:i.color,features:a,visible:i.visible!==!1});console.log(`레이어 "${i.name}" 복원됨, 피처 수: ${a.length}`)}catch(a){console.error(`레이어 "${i.name}" 복원 실패:`,a)}return e.view&&(Nr.setCenter(e.view.center,!1),Nr.setZoom(e.view.zoom,!1)),this.isDirty=!1,Gt.emit(Xt.PROJECT_LOADED,{name:this.currentProjectName}),!0}saveToFile(e=null){const t=this.serialize(),n=JSON.stringify(t,null,2),i=new Blob([n],{type:"application/json"}),s=(e||this.currentProjectName||"프로젝트").replace(/[^a-zA-Z0-9가-힣_-]/g,"_"),o=URL.createObjectURL(i),l=document.createElement("a");return l.href=o,l.download=s+wb,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o),this.isDirty=!1,Gt.emit(Xt.PROJECT_SAVED,{name:this.currentProjectName}),console.log("프로젝트 저장됨:",s+wb),!0}loadFromFile(){return new Promise((e,t)=>{const n=document.createElement("input");n.type="file",n.accept=wb+",.json",n.onchange=async i=>{const a=i.target.files[0];if(!a){t(new Error("파일이 선택되지 않았습니다."));return}try{const s=await a.text(),o=JSON.parse(s);await this.deserialize(o);const l=a.name.replace(/\.(egis|json)$/i,"");this.currentProjectName=l,console.log("프로젝트 불러옴:",a.name),e(o)}catch(s){console.error("프로젝트 불러오기 실패:",s),t(s)}},n.click()})}newProject(){pt.getAllLayers().forEach(t=>{pt.removeLayer(t.id)}),this.currentProjectName="새 프로젝트",this.isDirty=!1,Nr.setCenter([127.5,36.5],!0),Nr.setZoom(7,!0),Gt.emit(Xt.PROJECT_NEW,{}),console.log("새 프로젝트 생성됨")}getProjectName(){return this.currentProjectName}setProjectName(e){this.currentProjectName=e,this.isDirty=!0}markDirty(){this.isDirty=!0}hasDirty(){return this.isDirty}}const $f=new xne,wne="eGIS_DB",_ne=1,iu="layers",Kf="projects";class Ene{constructor(){this.db=null,this.isReady=!1,this.readyPromise=this.initDB()}async initDB(){return new Promise((e,t)=>{const n=indexedDB.open(wne,_ne);n.onerror=()=>{console.error("IndexedDB 초기화 실패:",n.error),t(n.error)},n.onsuccess=()=>{this.db=n.result,this.isReady=!0,console.log("IndexedDB 초기화 완료"),e()},n.onupgradeneeded=i=>{const a=i.target.result;if(!a.objectStoreNames.contains(iu)){const s=a.createObjectStore(iu,{keyPath:"id"});s.createIndex("name","name",{unique:!1}),s.createIndex("timestamp","timestamp",{unique:!1})}if(!a.objectStoreNames.contains(Kf)){const s=a.createObjectStore(Kf,{keyPath:"id"});s.createIndex("name","name",{unique:!1}),s.createIndex("timestamp","timestamp",{unique:!1})}}})}async waitForReady(){this.isReady||await this.readyPromise}saveMapState(e){try{localStorage.setItem("eGIS_mapState",JSON.stringify({center:e.center,zoom:e.zoom,rotation:e.rotation||0,timestamp:Date.now()}))}catch(t){console.error("지도 상태 저장 실패:",t)}}getMapState(){try{const e=localStorage.getItem("eGIS_mapState");return e?JSON.parse(e):null}catch(e){return console.error("지도 상태 불러오기 실패:",e),null}}saveSettings(e){try{localStorage.setItem("eGIS_settings",JSON.stringify(e))}catch(t){console.error("설정 저장 실패:",t)}}getSettings(){try{const e=localStorage.getItem("eGIS_settings");return e?JSON.parse(e):{}}catch{return{}}}setAutoSaveEnabled(e){localStorage.setItem("eGIS_autoSave",e?"true":"false")}isAutoSaveEnabled(){return localStorage.getItem("eGIS_autoSave")!=="false"}async saveLayer(e){return await this.waitForReady(),e.type==="raster"||!e.source?Promise.resolve(e.id):new Promise((t,n)=>{try{const i=e.source.getFeatures(),a=new rs,s={id:e.id,name:e.name,type:e.type,geometryType:e.geometryType,color:e.color,strokeColor:e.strokeColor,fillColor:e.fillColor,strokeDash:e.strokeDash,fillOpacity:e.fillOpacity,strokeOpacity:e.strokeOpacity,strokeWidth:e.strokeWidth,pointRadius:e.pointRadius,visible:e.visible,features:a.writeFeaturesObject(i),timestamp:Date.now()},u=this.db.transaction([iu],"readwrite").objectStore(iu).put(s);u.onsuccess=()=>t(s.id),u.onerror=()=>n(u.error)}catch(i){n(i)}})}async deleteLayer(e){return await this.waitForReady(),new Promise((t,n)=>{const s=this.db.transaction([iu],"readwrite").objectStore(iu).delete(e);s.onsuccess=()=>t(),s.onerror=()=>n(s.error)})}async getAllLayers(){return await this.waitForReady(),new Promise((e,t)=>{const a=this.db.transaction([iu],"readonly").objectStore(iu).getAll();a.onsuccess=()=>e(a.result||[]),a.onerror=()=>t(a.error)})}async clearAllLayers(){return await this.waitForReady(),new Promise((e,t)=>{const a=this.db.transaction([iu],"readwrite").objectStore(iu).clear();a.onsuccess=()=>e(),a.onerror=()=>t(a.error)})}async saveCurrentProject(e="자동 저장"){await this.waitForReady();const t=await this.getAllLayers(),n=this.getMapState(),i={id:"current",name:e,mapState:n,layerOrder:t.map(a=>a.id),timestamp:Date.now()};return new Promise((a,s)=>{const u=this.db.transaction([Kf],"readwrite").objectStore(Kf).put(i);u.onsuccess=()=>a(i),u.onerror=()=>s(u.error)})}async loadCurrentProject(){return await this.waitForReady(),new Promise((e,t)=>{const a=this.db.transaction([Kf],"readonly").objectStore(Kf).get("current");a.onsuccess=()=>e(a.result||null),a.onerror=()=>t(a.error)})}async clearAll(){return await this.clearAllLayers(),localStorage.removeItem("eGIS_mapState"),localStorage.removeItem("eGIS_settings"),await this.waitForReady(),new Promise((e,t)=>{const a=this.db.transaction([Kf],"readwrite").objectStore(Kf).clear();a.onsuccess=()=>e(),a.onerror=()=>t(a.error)})}async hasSavedData(){return(await this.getAllLayers()).length>0}async exportProject(){const e=await this.getAllLayers(),t=this.getMapState();return{version:"1.0",exportedAt:new Date().toISOString(),mapState:t,layers:e}}async importProject(e){if(!e||!e.layers)throw new Error("유효하지 않은 프로젝트 파일입니다.");await this.clearAllLayers();for(const t of e.layers)await this.waitForReady(),await new Promise((n,i)=>{const o=this.db.transaction([iu],"readwrite").objectStore(iu).put(t);o.onsuccess=()=>n(),o.onerror=()=>i(o.error)});return e.mapState&&this.saveMapState(e.mapState),!0}}const ll=new Ene;class bne{constructor(){this.saveTimeout=null,this.mapSaveTimeout=null,this.isRestoring=!1,this.geoJSON=new rs,this.initialized=!1}async init(){if(this.initialized)return;this.initialized=!0,this.bindEvents(),await ll.hasSavedData()&&(await this.promptRestore()?await this.restoreState():await ll.clearAllLayers()),window.addEventListener("beforeunload",t=>{pt.getLayerCount()>0&&(t.preventDefault(),t.returnValue="")}),console.log("AutoSaveManager 초기화 완료")}async promptRestore(){return new Promise(e=>{const t=document.createElement("div");t.className="modal-overlay restore-modal active",t.innerHTML=`
        <div class="modal-content restore-content">
          <div class="modal-header">
            <h3>이전 작업 복원</h3>
          </div>
          <div class="modal-body">
            <p>이전에 작업하던 프로젝트가 있습니다.<br>복원하시겠습니까?</p>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" id="restore-no">새로 시작</button>
            <button class="btn btn-primary" id="restore-yes">복원하기</button>
          </div>
        </div>
      `,document.body.appendChild(t),document.getElementById("restore-yes").onclick=()=>{t.remove(),e(!0)},document.getElementById("restore-no").onclick=()=>{t.remove(),e(!1)}})}bindEvents(){Gt.on(Xt.LAYER_ADDED,e=>{!this.isRestoring&&e.layer&&this.scheduleSave(e.layer.id)}),Gt.on(Xt.LAYER_REMOVED,e=>{this.isRestoring||ll.deleteLayer(e.layerId)}),Gt.on(Xt.LAYER_STYLE_CHANGED,e=>{this.isRestoring||this.scheduleSave(e.layerId)}),Gt.on(Xt.LAYER_VISIBILITY_CHANGED,e=>{this.isRestoring||this.scheduleSave(e.layerId)}),Gt.on(Xt.MAP_MOVEEND,()=>{this.isRestoring||this.scheduleMapStateSave()})}scheduleSave(e){ll.isAutoSaveEnabled()&&(clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(async()=>{try{const t=pt.getLayer(e);t&&(await ll.saveLayer(t),console.log(`레이어 저장됨: ${t.name}`))}catch(t){console.error("레이어 저장 실패:",t)}},1e3))}scheduleMapStateSave(){ll.isAutoSaveEnabled()&&(clearTimeout(this.mapSaveTimeout),this.mapSaveTimeout=setTimeout(()=>{const e=Nr.getMap();if(e){const t=e.getView();ll.saveMapState({center:t.getCenter(),zoom:t.getZoom(),rotation:t.getRotation()})}},2e3))}async restoreState(){this.isRestoring=!0;try{const e=ll.getMapState();if(e){const n=Nr.getMap();if(n){const i=n.getView();i.setCenter(e.center),i.setZoom(e.zoom),e.rotation&&i.setRotation(e.rotation)}}const t=await ll.getAllLayers();console.log(`${t.length}개 레이어 복원 중...`);for(const n of t)try{await this.restoreLayer(n)}catch(i){console.error(`레이어 복원 실패 (${n.name}):`,i)}console.log("상태 복원 완료")}catch(e){console.error("상태 복원 실패:",e)}finally{this.isRestoring=!1}}async restoreLayer(e){const t=this.geoJSON.readFeatures(e.features),n=new zo({features:t}),i=pt.addLayer({name:e.name,type:e.type||"vector",source:n,visible:e.visible,color:e.color,geometryType:e.geometryType}),a=pt.getLayer(i);return a&&(a.strokeColor=e.strokeColor,a.fillColor=e.fillColor,a.strokeDash=e.strokeDash,a.fillOpacity=e.fillOpacity,a.strokeOpacity=e.strokeOpacity,a.strokeWidth=e.strokeWidth,a.pointRadius=e.pointRadius,pt.updateLayerStyle(i)),i}async saveAllLayers(){const e=pt.getAllLayers();for(const t of e)try{await ll.saveLayer(t)}catch(n){console.error(`레이어 저장 실패 (${t.name}):`,n)}console.log(`${e.length}개 레이어 저장 완료`)}async exportToFile(){await this.saveAllLayers();const e=await ll.exportProject(),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download=`e-GIS_project_${new Date().toISOString().slice(0,10)}.json`,i.click(),URL.revokeObjectURL(n)}async importFromFile(e){return new Promise((t,n)=>{const i=new FileReader;i.onload=async a=>{try{const s=JSON.parse(a.target.result);await ll.importProject(s),window.location.reload(),t()}catch{n(new Error("프로젝트 파일을 읽을 수 없습니다."))}},i.onerror=()=>n(new Error("파일 읽기 실패")),i.readAsText(e)})}}const Cne=new bne,Sne=50;class Bne{constructor(){this.undoStack=[],this.redoStack=[],this.geojsonFormat=new rs}init(){Gt.on(Xt.FEATURE_CREATED,({feature:e,layerId:t})=>{const n=pt.getLayer(t);this.pushAction({type:"create",layerId:t,layerName:n?n.name:"새 레이어",featureData:this.serializeFeature(e),featureId:e.ol_uid})}),Gt.on(Xt.FEATURE_DELETED,({feature:e,layerId:t})=>{this.pushAction({type:"delete",layerId:t,featureData:this.serializeFeature(e),featureId:e.ol_uid})}),Gt.on(Xt.FEATURE_MODIFY_START,({feature:e,layerId:t})=>{this.pendingModify={layerId:t,featureId:e.ol_uid,beforeData:this.serializeFeature(e)}}),Gt.on(Xt.FEATURE_MODIFIED,({feature:e})=>{this.pendingModify&&this.pendingModify.featureId===e.ol_uid&&(this.pushAction({type:"modify",layerId:this.pendingModify.layerId,featureId:e.ol_uid,beforeData:this.pendingModify.beforeData,afterData:this.serializeFeature(e)}),this.pendingModify=null)}),console.log("HistoryManager 초기화 완료")}serializeFeature(e){return this.geojsonFormat.writeFeatureObject(e,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"})}deserializeFeature(e){return this.geojsonFormat.readFeature(e,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"})}pushAction(e){this.undoStack.push(e),this.undoStack.length>Sne&&this.undoStack.shift(),this.redoStack=[],Gt.emit(Xt.HISTORY_CHANGED,{canUndo:this.canUndo(),canRedo:this.canRedo()})}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}undo(){if(!this.canUndo())return!1;const e=this.undoStack.pop(),t=pt.getLayer(e.layerId);if(!t)return console.warn("레이어를 찾을 수 없습니다:",e.layerId),!1;const n=t.source;switch(e.type){case"create":const i=n.getFeatures().find(o=>o.ol_uid===e.featureId);i&&(n.removeFeature(i),t.featureCount=n.getFeatures().length,t.featureCount===0&&pt.removeLayer(e.layerId));break;case"delete":const a=this.deserializeFeature(e.featureData);a.ol_uid=e.featureId,n.addFeature(a),t.featureCount=n.getFeatures().length;break;case"modify":const s=n.getFeatures().find(o=>o.ol_uid===e.featureId);if(s){const o=this.deserializeFeature(e.beforeData);s.setGeometry(o.getGeometry()),s.setProperties(o.getProperties())}break}return this.redoStack.push(e),Gt.emit(Xt.LAYER_ADDED,{}),Gt.emit(Xt.HISTORY_CHANGED,{canUndo:this.canUndo(),canRedo:this.canRedo()}),!0}redo(){if(!this.canRedo())return!1;const e=this.redoStack.pop();let t=pt.getLayer(e.layerId);if(!t&&e.type==="create"){const i=this.deserializeFeature(e.featureData);i.ol_uid=e.featureId;const a=pt.addLayer({name:e.layerName||"복원된 레이어",features:[i]});return e.layerId=a,this.undoStack.push(e),Gt.emit(Xt.LAYER_ADDED,{}),Gt.emit(Xt.HISTORY_CHANGED,{canUndo:this.canUndo(),canRedo:this.canRedo()}),!0}if(!t)return console.warn("레이어를 찾을 수 없습니다:",e.layerId),!1;const n=t.source;switch(e.type){case"create":const i=this.deserializeFeature(e.featureData);i.ol_uid=e.featureId,n.addFeature(i),t.featureCount=n.getFeatures().length;break;case"delete":const a=n.getFeatures().find(o=>o.ol_uid===e.featureId);a&&(n.removeFeature(a),t.featureCount=n.getFeatures().length);break;case"modify":const s=n.getFeatures().find(o=>o.ol_uid===e.featureId);if(s){const o=this.deserializeFeature(e.afterData);s.setGeometry(o.getGeometry()),s.setProperties(o.getProperties())}break}return this.undoStack.push(e),Gt.emit(Xt.LAYER_ADDED,{}),Gt.emit(Xt.HISTORY_CHANGED,{canUndo:this.canUndo(),canRedo:this.canRedo()}),!0}clear(){this.undoStack=[],this.redoStack=[],Gt.emit(Xt.HISTORY_CHANGED,{canUndo:!1,canRedo:!1})}}const _b=new Bne,fm={blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],spectral:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],viridis:["#440154","#482878","#3e4a89","#31688e","#26828e","#1f9e89","#35b779","#6ece58"],warm:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"]},Tne={equalInterval:"동일 간격",quantile:"분위수",naturalBreaks:"자연 구분점"};class Nne{constructor(){this.currentLayerId=null,this.currentAttribute=null,this.currentColorRamp="blues",this.currentMethod="equalInterval",this.numClasses=5,this.originalStyles=new Map,this.legends=new Map,Gt.on(Xt.LAYER_REMOVED,e=>{this.onLayerRemoved(e.layerId)})}onLayerRemoved(e){this.removeLegend(e),this.originalStyles.delete(e),this.currentLayerId===e&&(this.currentLayerId=null,this.currentAttribute=null)}getNumericAttributes(e){const t=pt.getLayer(e);if(!t)return[];const n=t.source.getFeatures();if(n.length===0)return[];const a=n[0].getProperties(),s=[];for(const o in a){if(o==="geometry")continue;const l=a[o];(typeof l=="number"||typeof l=="string"&&!isNaN(parseFloat(l)))&&s.push(o)}return s}getAttributeValues(e,t){const n=pt.getLayer(e);if(!n)return[];const i=n.source.getFeatures(),a=[];return i.forEach(s=>{const o=s.get(t);if(o!=null){const l=parseFloat(o);isNaN(l)||a.push(l)}}),a.sort((s,o)=>s-o)}calculateBreaks(e,t,n){if(e.length===0)return[];const i=e[0],a=e[e.length-1];return n==="equalInterval"?this.equalIntervalBreaks(i,a,t):n==="quantile"?this.quantileBreaks(e,t):n==="naturalBreaks"?this.naturalBreaks(e,t):this.equalIntervalBreaks(i,a,t)}equalIntervalBreaks(e,t,n){const i=[e],a=(t-e)/n;for(let s=1;s<=n;s++)i.push(e+a*s);return i}quantileBreaks(e,t){const n=[e[0]],i=e.length/t;for(let a=1;a<=t;a++){const s=Math.min(Math.floor(i*a),e.length-1);n.push(e[s])}return n}naturalBreaks(e,t){if(e.length<=t)return[...e,e[e.length-1]];const n=[e[0]],i=Math.floor(e.length/t);for(let a=1;a<t;a++){const s=a*i;let o=e[s];for(let l=s;l<Math.min(s+i,e.length-1);l++)if(e[l]!==e[l+1]){o=(e[l]+e[l+1])/2;break}n.push(o)}return n.push(e[e.length-1]),n}getColorIndex(e,t){for(let n=0;n<t.length-1;n++)if(e<=t[n+1])return n;return t.length-2}apply(e,t,n,i,a,s={}){const{reverse:o=!1,customColors:l=null}=s,u=pt.getLayer(e);if(!u)return!1;this.originalStyles.has(e)||this.originalStyles.set(e,u.olLayer.getStyle()),this.currentLayerId=e,this.currentAttribute=t,this.currentColorRamp=n,this.currentMethod=i,this.numClasses=a;const c=this.getAttributeValues(e,t);if(c.length===0)return!1;const h=this.calculateBreaks(c,a,i);let f;if(l&&l.length>=2)f=this.interpolateColors(l,a);else{const y=fm[n]||fm.blues,v=Math.floor(y.length/a);f=[];for(let w=0;w<a;w++){const x=Math.min(w*v+v-1,y.length-1);f.push(y[x])}}const A=o?[...f].reverse():f,d=this,p=function(y){const v=parseFloat(y.get(t));if(isNaN(v))return new En({fill:new _n({color:"rgba(128, 128, 128, 0.5)"}),stroke:new hn({color:"#666",width:1})});const w=d.getColorIndex(v,h),x=A[w]||A[0];return new En({fill:new _n({color:d.hexToRgba(x,.7)}),stroke:new hn({color:d.darkenColor(x),width:1})})};return u.olLayer.setStyle(p),Gt.emit(Xt.LAYER_STYLE_CHANGED,{layerId:e}),this.createLegend(e,u.name,t,h,A),{breaks:h,colors:A}}createLegend(e,t,n,i,a){this.removeLegend(e);const s=document.createElement("div");s.className="choropleth-legend",s.id=`choropleth-legend-${e}`;let o=`<div class="choropleth-legend-title">${t}</div>`;o+=`<div class="choropleth-legend-subtitle">${n}</div>`,o+='<div class="choropleth-legend-items">';for(let u=0;u<i.length-1;u++){const c=this.formatNumber(i[u]),h=this.formatNumber(i[u+1]);o+=`
        <div class="choropleth-legend-item">
          <span class="choropleth-legend-color" style="background:${a[u]}"></span>
          <span class="choropleth-legend-label">${c} - ${h}</span>
        </div>`}o+="</div>",s.innerHTML=o;const l=document.getElementById("map");l&&(l.appendChild(s),this.legends.set(e,s))}formatNumber(e){return Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":Number.isInteger(e)?e.toString():e.toFixed(2)}removeLegend(e){const t=this.legends.get(e);t&&(t.remove(),this.legends.delete(e))}reset(e){const t=pt.getLayer(e);t&&(this.originalStyles.has(e)&&(t.olLayer.setStyle(this.originalStyles.get(e)),this.originalStyles.delete(e)),this.currentLayerId===e&&(this.currentLayerId=null,this.currentAttribute=null),this.removeLegend(e),Gt.emit(Xt.LAYER_STYLE_CHANGED,{layerId:e}))}hexToRgba(e,t){const n=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return"rgba("+n+", "+i+", "+a+", "+t+")"}darkenColor(e){const t=Math.max(0,parseInt(e.slice(1,3),16)-40),n=Math.max(0,parseInt(e.slice(3,5),16)-40),i=Math.max(0,parseInt(e.slice(5,7),16)-40);return"#"+t.toString(16).padStart(2,"0")+n.toString(16).padStart(2,"0")+i.toString(16).padStart(2,"0")}interpolateColors(e,t){if(e.length===0)return[];if(e.length===1)return Array(t).fill(e[0]);if(t<=e.length){const i=[];for(let a=0;a<t;a++){const s=Math.round(a*(e.length-1)/(t-1));i.push(e[s])}return i}const n=[];for(let i=0;i<t;i++){const s=i/(t-1)*(e.length-1),o=Math.floor(s),l=s-o;o>=e.length-1?n.push(e[e.length-1]):n.push(this.lerpColor(e[o],e[o+1],l))}return n}lerpColor(e,t,n){const i=parseInt(e.slice(1,3),16),a=parseInt(e.slice(3,5),16),s=parseInt(e.slice(5,7),16),o=parseInt(t.slice(1,3),16),l=parseInt(t.slice(3,5),16),u=parseInt(t.slice(5,7),16),c=Math.round(i+(o-i)*n),h=Math.round(a+(l-a)*n),f=Math.round(s+(u-s)*n);return"#"+c.toString(16).padStart(2,"0")+h.toString(16).padStart(2,"0")+f.toString(16).padStart(2,"0")}getColorRamps(){return Object.keys(fm)}getColorRampColors(e){return fm[e]||fm.blues}getClassificationMethods(){return Tne}getLegendData(e,t){const n=[];for(let i=0;i<e.length-1;i++)n.push({min:e[i].toFixed(2),max:e[i+1].toFixed(2),color:t[i]});return n}}const ld=new Nne;class Ine{constructor(){this.modal=null,this.currentLayerId=null,this.legendData=null}show(e){if(e||(e=pt.getSelectedLayerId()),!e){alert("먼저 레이어를 선택해주세요.");return}const t=pt.getLayer(e);t&&(this.currentLayerId=e,this.render(t))}render(e){this.close();const t=ld.getNumericAttributes(this.currentLayerId),n=ld.getColorRamps(),i=ld.getClassificationMethods();if(t.length===0){alert("이 레이어에는 숫자형 속성이 없습니다.");return}this.modal=document.createElement("div"),this.modal.className="choropleth-modal",this.modal.innerHTML=this.getModalHTML(e.name,t,n,i),document.body.appendChild(this.modal),this.bindEvents(),this.updateColorRampPreview()}getModalHTML(e,t,n,i){const a=t.map(l=>'<option value="'+l+'">'+l+"</option>").join(""),s=n.map(l=>'<option value="'+l+'">'+l+"</option>").join(""),o=Object.entries(i).map(([l,u])=>'<option value="'+l+'">'+u+"</option>").join("");return'<div class="choropleth-content"><div class="choropleth-header"><h3>단계구분도 설정</h3><button class="choropleth-close" id="choropleth-close">&times;</button></div><div class="choropleth-body"><div class="choropleth-form-group"><label>레이어</label><div class="choropleth-layer-name">'+e+'</div></div><div class="choropleth-form-group"><label for="choropleth-attr">속성 필드</label><select id="choropleth-attr">'+a+'</select></div><div class="choropleth-form-group"><label for="choropleth-ramp">색상 팔레트</label><select id="choropleth-ramp">'+s+'<option value="custom">커스텀</option></select><div class="color-ramp-preview-container"><div id="color-ramp-preview" class="color-ramp-preview"></div><div class="color-ramp-preview-labels"><span>낮음</span><span>높음</span></div></div></div><div class="choropleth-form-group choropleth-reverse-group"><label class="checkbox-label"><input type="checkbox" id="choropleth-reverse"><span>색상 반전 (높은 값 → 낮은 색상)</span></label></div><div class="choropleth-form-group custom-colors-group" id="custom-colors-group" style="display:none;"><label>커스텀 색상 (시작 → 끝)</label><div class="custom-color-inputs" id="custom-color-inputs"><input type="color" class="custom-color-input" value="#ffffcc"><input type="color" class="custom-color-input" value="#fd8d3c"><input type="color" class="custom-color-input" value="#800026"></div><div class="custom-color-actions"><button type="button" class="btn btn-sm" id="add-color-btn">+ 색상 추가</button><button type="button" class="btn btn-sm" id="remove-color-btn">- 색상 제거</button></div></div><div class="choropleth-form-group"><label for="choropleth-method">분류 방법</label><select id="choropleth-method">'+o+'</select></div><div class="choropleth-form-group"><label for="choropleth-classes">분류 수</label><input type="range" id="choropleth-classes" min="3" max="8" value="5"><span id="classes-value">5</span></div><div id="choropleth-legend" class="choropleth-preview-legend"></div></div><div class="choropleth-footer"><button class="btn btn-secondary" id="choropleth-reset">초기화</button><button class="btn btn-primary" id="choropleth-apply">적용</button><button class="btn btn-primary" id="choropleth-ok">확인</button></div></div>'}bindEvents(){const e=document.getElementById("choropleth-close"),t=document.getElementById("choropleth-apply"),n=document.getElementById("choropleth-ok"),i=document.getElementById("choropleth-reset"),a=document.getElementById("choropleth-ramp"),s=document.getElementById("choropleth-classes"),o=document.getElementById("classes-value"),l=document.getElementById("choropleth-reverse"),u=document.getElementById("add-color-btn"),c=document.getElementById("remove-color-btn");e.addEventListener("click",()=>this.close()),t.addEventListener("click",()=>this.apply()),n.addEventListener("click",()=>{this.apply(),this.close()}),i.addEventListener("click",()=>this.reset()),a.addEventListener("change",()=>{this.toggleCustomColors(),this.updateColorRampPreview()}),l.addEventListener("change",()=>this.updateColorRampPreview()),s.addEventListener("input",()=>{o.textContent=s.value}),u.addEventListener("click",()=>this.addCustomColor()),c.addEventListener("click",()=>this.removeCustomColor()),document.querySelectorAll("#custom-color-inputs .custom-color-input").forEach(h=>{h.addEventListener("input",()=>this.updateColorRampPreview())})}toggleCustomColors(){const e=document.getElementById("choropleth-ramp"),t=document.getElementById("custom-colors-group");t.style.display=e.value==="custom"?"block":"none"}addCustomColor(){const e=document.getElementById("custom-color-inputs");if(e.querySelectorAll(".custom-color-input").length>=8)return;const n=document.createElement("input");n.type="color",n.className="custom-color-input",n.value="#ff0000",n.addEventListener("input",()=>this.updateColorRampPreview()),e.appendChild(n),this.updateColorRampPreview()}removeCustomColor(){const e=document.getElementById("custom-color-inputs"),t=e.querySelectorAll(".custom-color-input");t.length<=2||(e.removeChild(t[t.length-1]),this.updateColorRampPreview())}getCustomColors(){const e=document.querySelectorAll("#custom-color-inputs .custom-color-input");return Array.from(e).map(t=>t.value)}updateColorRampPreview(){const e=document.getElementById("choropleth-ramp").value,t=document.getElementById("choropleth-reverse").checked,n=document.getElementById("color-ramp-preview");let i;e==="custom"?i=this.getCustomColors():i=ld.getColorRampColors(e);const a=t?[...i].reverse():i;n.innerHTML=a.map(s=>'<div class="color-ramp-item" style="background:'+s+'"></div>').join("")}apply(){const e=document.getElementById("choropleth-attr").value,t=document.getElementById("choropleth-ramp").value,n=document.getElementById("choropleth-method").value,i=parseInt(document.getElementById("choropleth-classes").value),s={reverse:document.getElementById("choropleth-reverse").checked};t==="custom"&&(s.customColors=this.getCustomColors());const o=ld.apply(this.currentLayerId,e,t,n,i,s);o?(this.legendData=ld.getLegendData(o.breaks,o.colors),this.renderLegend()):alert("단계구분도 적용에 실패했습니다.")}renderLegend(){const e=document.getElementById("choropleth-legend");if(!this.legendData||this.legendData.length===0){e.innerHTML="";return}let n='<div class="legend-title">'+document.getElementById("choropleth-attr").value+" 범례</div>";n+='<div class="legend-items">',this.legendData.forEach(i=>{n+='<div class="legend-item"><div class="legend-color" style="background:'+i.color+'"></div><div class="legend-range">'+i.min+" ~ "+i.max+"</div></div>"}),n+="</div>",e.innerHTML=n}reset(){ld.reset(this.currentLayerId),document.getElementById("choropleth-legend").innerHTML="",this.legendData=null}close(){this.modal&&(this.modal.remove(),this.modal=null)}}const Fne=new Ine;/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var MP=1252,Mne=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],hB={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},fB=function(r){Mne.indexOf(r)!=-1&&(MP=hB[0]=r)};function Lne(){fB(1252)}var ec=function(r){fB(r)};function LP(){ec(1200),Lne()}function nI(r){for(var e=[],t=0,n=r.length;t<n;++t)e[t]=r.charCodeAt(t);return e}function Dne(r){for(var e=[],t=0;t<r.length>>1;++t)e[t]=String.fromCharCode(r.charCodeAt(2*t)+(r.charCodeAt(2*t+1)<<8));return e.join("")}function DP(r){for(var e=[],t=0;t<r.length>>1;++t)e[t]=String.fromCharCode(r.charCodeAt(2*t+1)+(r.charCodeAt(2*t)<<8));return e.join("")}var Lm=function(r){var e=r.charCodeAt(0),t=r.charCodeAt(1);return e==255&&t==254?Dne(r.slice(2)):e==254&&t==255?DP(r.slice(2)):e==65279?r.slice(1):r},Qy=function(e){return String.fromCharCode(e)},iI=function(e){return String.fromCharCode(e)},qv,fA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function aI(r){for(var e="",t=0,n=0,i=0,a=0,s=0,o=0,l=0,u=0;u<r.length;)t=r.charCodeAt(u++),a=t>>2,n=r.charCodeAt(u++),s=(t&3)<<4|n>>4,i=r.charCodeAt(u++),o=(n&15)<<2|i>>6,l=i&63,isNaN(n)?o=l=64:isNaN(i)&&(l=64),e+=fA.charAt(a)+fA.charAt(s)+fA.charAt(o)+fA.charAt(l);return e}function $l(r){var e="",t=0,n=0,i=0,a=0,s=0,o=0,l=0;r=r.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<r.length;)a=fA.indexOf(r.charAt(u++)),s=fA.indexOf(r.charAt(u++)),t=a<<2|s>>4,e+=String.fromCharCode(t),o=fA.indexOf(r.charAt(u++)),n=(s&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=fA.indexOf(r.charAt(u++)),i=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var zn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),r0=function(){if(typeof Buffer<"u"){var r=!Buffer.from;if(!r)try{Buffer.from("foo","utf8")}catch{r=!0}return r?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function NA(r){return zn?Buffer.alloc?Buffer.alloc(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}function sI(r){return zn?Buffer.allocUnsafe?Buffer.allocUnsafe(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}var Xu=function(e){return zn?r0(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function n0(r){if(Array.isArray(r))return r.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],t=0;t<r.length;++t)e[t]=String.fromCharCode(r[t]);return e.join("")}function AB(r){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(r instanceof ArrayBuffer)return AB(new Uint8Array(r));for(var e=new Array(r.length),t=0;t<r.length;++t)e[t]=r[t];return e}var sA=zn?function(r){return Buffer.concat(r.map(function(e){return Buffer.isBuffer(e)?e:r0(e)}))}:function(r){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<r.length;++e)t+=r[e].length;var n=new Uint8Array(t),i=0;for(e=0,t=0;e<r.length;t+=i,++e)if(i=r[e].length,r[e]instanceof Uint8Array)n.set(r[e],t);else{if(typeof r[e]=="string")throw"wtf";n.set(new Uint8Array(r[e]),t)}return n}return[].concat.apply([],r.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function kne(r){for(var e=[],t=0,n=r.length+250,i=NA(r.length+255),a=0;a<r.length;++a){var s=r.charCodeAt(a);if(s<128)i[t++]=s;else if(s<2048)i[t++]=192|s>>6&31,i[t++]=128|s&63;else if(s>=55296&&s<57344){s=(s&1023)+64;var o=r.charCodeAt(++a)&1023;i[t++]=240|s>>8&7,i[t++]=128|s>>2&63,i[t++]=128|o>>6&15|(s&3)<<4,i[t++]=128|o&63}else i[t++]=224|s>>12&15,i[t++]=128|s>>6&63,i[t++]=128|s&63;t>n&&(e.push(i.slice(0,t)),t=0,i=NA(65535),n=65530)}return e.push(i.slice(0,t)),sA(e)}var qo=/\u0000/g,Dm=/[\u0001-\u0006]/g;function Mg(r){for(var e="",t=r.length-1;t>=0;)e+=r.charAt(t--);return e}function tc(r,e){var t=""+r;return t.length>=e?t:ga("0",e-t.length)+t}function dB(r,e){var t=""+r;return t.length>=e?t:ga(" ",e-t.length)+t}function Vx(r,e){var t=""+r;return t.length>=e?t:t+ga(" ",e-t.length)}function Rne(r,e){var t=""+Math.round(r);return t.length>=e?t:ga("0",e-t.length)+t}function One(r,e){var t=""+r;return t.length>=e?t:ga("0",e-t.length)+t}var oI=Math.pow(2,32);function D0(r,e){if(r>oI||r<-oI)return Rne(r,e);var t=Math.round(r);return One(t,e)}function Wx(r,e){return e=e||0,r.length>=7+e&&(r.charCodeAt(e)|32)===103&&(r.charCodeAt(e+1)|32)===101&&(r.charCodeAt(e+2)|32)===110&&(r.charCodeAt(e+3)|32)===101&&(r.charCodeAt(e+4)|32)===114&&(r.charCodeAt(e+5)|32)===97&&(r.charCodeAt(e+6)|32)===108}var lI=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Eb=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Pne(r){return r||(r={}),r[0]="General",r[1]="0",r[2]="0.00",r[3]="#,##0",r[4]="#,##0.00",r[9]="0%",r[10]="0.00%",r[11]="0.00E+00",r[12]="# ?/?",r[13]="# ??/??",r[14]="m/d/yy",r[15]="d-mmm-yy",r[16]="d-mmm",r[17]="mmm-yy",r[18]="h:mm AM/PM",r[19]="h:mm:ss AM/PM",r[20]="h:mm",r[21]="h:mm:ss",r[22]="m/d/yy h:mm",r[37]="#,##0 ;(#,##0)",r[38]="#,##0 ;[Red](#,##0)",r[39]="#,##0.00;(#,##0.00)",r[40]="#,##0.00;[Red](#,##0.00)",r[45]="mm:ss",r[46]="[h]:mm:ss",r[47]="mmss.0",r[48]="##0.0E+0",r[49]="@",r[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',r}var gn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},uI={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Une={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Yx(r,e,t){for(var n=r<0?-1:1,i=r*n,a=0,s=1,o=0,l=1,u=0,c=0,h=Math.floor(i);u<e&&(h=Math.floor(i),o=h*s+a,c=h*u+l,!(i-h<5e-8));)i=1/(i-h),a=s,s=o,l=u,u=c;if(c>e&&(u>e?(c=l,o=a):(c=u,o=s)),!t)return[0,n*o,c];var f=Math.floor(n*o/c);return[f,n*o-f*c,c]}function Ed(r,e,t){if(r>2958465||r<0)return null;var n=r|0,i=Math.floor(86400*(r-n)),a=0,s=[],o={D:n,T:i,u:86400*(r-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++n,++o.D)),n===60)s=t?[1317,10,29]:[1900,2,29],a=3;else if(n===0)s=t?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),s=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),n<60&&(a=(a+6)%7),t&&(a=jne(l,s))}return o.y=s[0],o.m=s[1],o.d=s[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=a,o}var kP=new Date(1899,11,31,0,0,0),Qne=kP.getTime(),Gne=new Date(1900,2,1,0,0,0);function RP(r,e){var t=r.getTime();return e?t-=1461*24*60*60*1e3:r>=Gne&&(t+=24*60*60*1e3),(t-(Qne+(r.getTimezoneOffset()-kP.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function gB(r){return r.indexOf(".")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Hne(r){return r.indexOf("E")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function zne(r){var e=r<0?12:11,t=gB(r.toFixed(12));return t.length<=e||(t=r.toPrecision(10),t.length<=e)?t:r.toExponential(5)}function qne(r){var e=gB(r.toFixed(11));return e.length>(r<0?12:11)||e==="0"||e==="-0"?r.toPrecision(6):e}function jv(r){var e=Math.floor(Math.log(Math.abs(r))*Math.LOG10E),t;return e>=-4&&e<=-1?t=r.toPrecision(10+e):Math.abs(e)<=9?t=zne(r):e===10?t=r.toFixed(10).substr(0,12):t=qne(r),gB(Hne(t.toUpperCase()))}function Hd(r,e){switch(typeof r){case"string":return r;case"boolean":return r?"TRUE":"FALSE";case"number":return(r|0)===r?r.toString(10):jv(r);case"undefined":return"";case"object":if(r==null)return"";if(r instanceof Date)return Cu(14,RP(r,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+r)}function jne(r,e){e[0]-=581;var t=r.getDay();return r<60&&(t=(t+6)%7),t}function $ne(r,e,t,n){var i="",a=0,s=0,o=t.y,l,u=0;switch(r){case 98:o=t.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=t.m,u=e.length;break;case 3:return Eb[t.m-1][1];case 5:return Eb[t.m-1][0];default:return Eb[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=t.d,u=e.length;break;case 3:return lI[t.q][0];default:return lI[t.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(t.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=t.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=t.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?tc(t.S,e.length):(n>=2?s=n===3?1e3:100:s=n===1?10:1,a=Math.round(s*(t.S+t.u)),a>=60*s&&(a=0),e==="s"?a===0?"0":""+a/s:(i=tc(a,2+n),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=t.D*24+t.H;break;case"[m]":case"[mm]":l=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":l=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var c=u>0?tc(l,u):"";return c}function AA(r){var e=3;if(r.length<=e)return r;for(var t=r.length%e,n=r.substr(0,t);t!=r.length;t+=e)n+=(n.length>0?",":"")+r.substr(t,e);return n}var OP=/%/g;function Kne(r,e,t){var n=e.replace(OP,""),i=e.length-n.length;return Jh(r,n,t*Math.pow(10,2*i))+ga("%",i)}function Vne(r,e,t){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Jh(r,e.substr(0,n),t/Math.pow(10,3*(e.length-n)))}function PP(r,e){var t,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+PP(r,-e);var i=r.indexOf(".");i===-1&&(i=r.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%i;if(a<0&&(a+=i),t=(e/Math.pow(10,a)).toPrecision(n+1+(i+a)%i),t.indexOf("e")===-1){var s=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(s-t.length+a):t+="E+"+(s-a);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,c){return l+u+c.substr(0,(i+a)%i)+"."+c.substr(a)+"E"})}else t=e.toExponential(n);return r.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),r.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var UP=/# (\?+)( ?)\/( ?)(\d+)/;function Wne(r,e,t){var n=parseInt(r[4],10),i=Math.round(e*n),a=Math.floor(i/n),s=i-a*n,o=n;return t+(a===0?"":""+a)+" "+(s===0?ga(" ",r[1].length+1+r[4].length):dB(s,r[1].length)+r[2]+"/"+r[3]+tc(o,r[4].length))}function Yne(r,e,t){return t+(e===0?"":""+e)+ga(" ",r[1].length+2+r[4].length)}var QP=/^#*0*\.([0#]+)/,GP=/\).*[0#]/,HP=/\(###\) ###\\?-####/;function Oo(r){for(var e="",t,n=0;n!=r.length;++n)switch(t=r.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function cI(r,e){var t=Math.pow(10,e);return""+Math.round(r*t)/t}function hI(r,e){var t=r-Math.floor(r),n=Math.pow(10,e);return e<(""+Math.round(t*n)).length?0:Math.round(t*n)}function Xne(r,e){return e<(""+Math.round((r-Math.floor(r))*Math.pow(10,e))).length?1:0}function Zne(r){return r<2147483647&&r>-2147483648?""+(r>=0?r|0:r-1|0):""+Math.floor(r)}function uu(r,e,t){if(r.charCodeAt(0)===40&&!e.match(GP)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?uu("n",n,t):"("+uu("n",n,-t)+")"}if(e.charCodeAt(e.length-1)===44)return Vne(r,e,t);if(e.indexOf("%")!==-1)return Kne(r,e,t);if(e.indexOf("E")!==-1)return PP(e,t);if(e.charCodeAt(0)===36)return"$"+uu(r,e.substr(e.charAt(1)==" "?2:1),t);var i,a,s,o,l=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+D0(l,e.length);if(e.match(/^[#?]+$/))return i=D0(t,0),i==="0"&&(i=""),i.length>e.length?i:Oo(e.substr(0,e.length-i.length))+i;if(a=e.match(UP))return Wne(a,l,u);if(e.match(/^#+0+$/))return u+D0(l,e.length-e.indexOf("0"));if(a=e.match(QP))return i=cI(t,a[1].length).replace(/^([^\.]+)$/,"$1."+Oo(a[1])).replace(/\.$/,"."+Oo(a[1])).replace(/\.(\d*)$/,function(d,p){return"."+p+ga("0",Oo(a[1]).length-p.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return u+cI(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return u+AA(D0(l,0));if(a=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+uu(r,e,-t):AA(""+(Math.floor(t)+Xne(t,a[1].length)))+"."+tc(hI(t,a[1].length),a[1].length);if(a=e.match(/^#,#*,#0/))return uu(r,e.replace(/^#,#*,/,""),t);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Mg(uu(r,e.replace(/[\\-]/g,""),t)),s=0,Mg(Mg(e.replace(/\\/g,"")).replace(/[0#]/g,function(d){return s<i.length?i.charAt(s++):d==="0"?"0":""}));if(e.match(HP))return i=uu(r,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var c="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(a[4].length,7),o=Yx(l,Math.pow(10,s)-1,!1),i=""+u,c=Jh("n",a[1],o[1]),c.charAt(c.length-1)==" "&&(c=c.substr(0,c.length-1)+"0"),i+=c+a[2]+"/"+a[3],c=Vx(o[2],s),c.length<a[4].length&&(c=Oo(a[4].substr(a[4].length-c.length))+c),i+=c,i;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(a[1].length,a[4].length),7),o=Yx(l,Math.pow(10,s)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?dB(o[1],s)+a[2]+"/"+a[3]+Vx(o[2],s):ga(" ",2*s+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return i=D0(t,0),e.length<=i.length?i:Oo(e.substr(0,e.length-i.length))+i;if(a=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),s=i.indexOf(".");var h=e.indexOf(".")-s,f=e.length-i.length-h;return Oo(e.substr(0,h)+i+e.substr(e.length-f))}if(a=e.match(/^00,000\.([#0]*0)$/))return s=hI(t,a[1].length),t<0?"-"+uu(r,e,-t):AA(Zne(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(d){return"00,"+(d.length<3?tc(0,3-d.length):"")+d})+"."+tc(s,a[1].length);switch(e){case"###,##0.00":return uu(r,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var A=AA(D0(l,0));return A!=="0"?u+A:"";case"###,###.00":return uu(r,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return uu(r,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function Jne(r,e,t){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Jh(r,e.substr(0,n),t/Math.pow(10,3*(e.length-n)))}function eie(r,e,t){var n=e.replace(OP,""),i=e.length-n.length;return Jh(r,n,t*Math.pow(10,2*i))+ga("%",i)}function zP(r,e){var t,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+zP(r,-e);var i=r.indexOf(".");i===-1&&(i=r.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%i;if(a<0&&(a+=i),t=(e/Math.pow(10,a)).toPrecision(n+1+(i+a)%i),!t.match(/[Ee]/)){var s=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(s-t.length+a):t+="E+"+(s-a),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,c){return l+u+c.substr(0,(i+a)%i)+"."+c.substr(a)+"E"})}else t=e.toExponential(n);return r.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),r.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function Oc(r,e,t){if(r.charCodeAt(0)===40&&!e.match(GP)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Oc("n",n,t):"("+Oc("n",n,-t)+")"}if(e.charCodeAt(e.length-1)===44)return Jne(r,e,t);if(e.indexOf("%")!==-1)return eie(r,e,t);if(e.indexOf("E")!==-1)return zP(e,t);if(e.charCodeAt(0)===36)return"$"+Oc(r,e.substr(e.charAt(1)==" "?2:1),t);var i,a,s,o,l=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+tc(l,e.length);if(e.match(/^[#?]+$/))return i=""+t,t===0&&(i=""),i.length>e.length?i:Oo(e.substr(0,e.length-i.length))+i;if(a=e.match(UP))return Yne(a,l,u);if(e.match(/^#+0+$/))return u+tc(l,e.length-e.indexOf("0"));if(a=e.match(QP))return i=(""+t).replace(/^([^\.]+)$/,"$1."+Oo(a[1])).replace(/\.$/,"."+Oo(a[1])),i=i.replace(/\.(\d*)$/,function(d,p){return"."+p+ga("0",Oo(a[1]).length-p.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return u+AA(""+l);if(a=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Oc(r,e,-t):AA(""+t)+"."+ga("0",a[1].length);if(a=e.match(/^#,#*,#0/))return Oc(r,e.replace(/^#,#*,/,""),t);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Mg(Oc(r,e.replace(/[\\-]/g,""),t)),s=0,Mg(Mg(e.replace(/\\/g,"")).replace(/[0#]/g,function(d){return s<i.length?i.charAt(s++):d==="0"?"0":""}));if(e.match(HP))return i=Oc(r,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var c="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(a[4].length,7),o=Yx(l,Math.pow(10,s)-1,!1),i=""+u,c=Jh("n",a[1],o[1]),c.charAt(c.length-1)==" "&&(c=c.substr(0,c.length-1)+"0"),i+=c+a[2]+"/"+a[3],c=Vx(o[2],s),c.length<a[4].length&&(c=Oo(a[4].substr(a[4].length-c.length))+c),i+=c,i;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(a[1].length,a[4].length),7),o=Yx(l,Math.pow(10,s)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?dB(o[1],s)+a[2]+"/"+a[3]+Vx(o[2],s):ga(" ",2*s+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return i=""+t,e.length<=i.length?i:Oo(e.substr(0,e.length-i.length))+i;if(a=e.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),s=i.indexOf(".");var h=e.indexOf(".")-s,f=e.length-i.length-h;return Oo(e.substr(0,h)+i+e.substr(e.length-f))}if(a=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+Oc(r,e,-t):AA(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(d){return"00,"+(d.length<3?tc(0,3-d.length):"")+d})+"."+tc(0,a[1].length);switch(e){case"###,###":case"##,###":case"#,###":var A=AA(""+l);return A!=="0"?u+A:"";default:if(e.match(/\.[0#?]*$/))return Oc(r,e.slice(0,e.lastIndexOf(".")),t)+Oo(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Jh(r,e,t){return(t|0)===t?Oc(r,e,t):uu(r,e,t)}function tie(r){for(var e=[],t=!1,n=0,i=0;n<r.length;++n)switch(r.charCodeAt(n)){case 34:t=!t;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=r.substr(i,n-i),i=n+1}if(e[e.length]=r.substr(i),t===!0)throw new Error("Format |"+r+"| unterminated string ");return e}var qP=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Bp(r){for(var e=0,t="",n="";e<r.length;)switch(t=r.charAt(e)){case"G":Wx(r,e)&&(e+=6),e++;break;case'"':for(;r.charCodeAt(++e)!==34&&e<r.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(r.charAt(e+1)==="1"||r.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(r.substr(e,3).toUpperCase()==="A/P"||r.substr(e,5).toUpperCase()==="AM/PM"||r.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(n=t;r.charAt(e++)!=="]"&&e<r.length;)n+=r.charAt(e);if(n.match(qP))return!0;break;case".":case"0":case"#":for(;e<r.length&&("0#?.,E+-%".indexOf(t=r.charAt(++e))>-1||t=="\\"&&r.charAt(e+1)=="-"&&"0#".indexOf(r.charAt(e+2))>-1););break;case"?":for(;r.charAt(++e)===t;);break;case"*":++e,(r.charAt(e)==" "||r.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<r.length&&"0123456789".indexOf(r.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function rie(r,e,t,n){for(var i=[],a="",s=0,o="",l="t",u,c,h,f="H";s<r.length;)switch(o=r.charAt(s)){case"G":if(!Wx(r,s))throw new Error("unrecognized character "+o+" in "+r);i[i.length]={t:"G",v:"General"},s+=7;break;case'"':for(a="";(h=r.charCodeAt(++s))!==34&&s<r.length;)a+=String.fromCharCode(h);i[i.length]={t:"t",v:a},++s;break;case"\\":var A=r.charAt(++s),d=A==="("||A===")"?A:"t";i[i.length]={t:d,v:A},++s;break;case"_":i[i.length]={t:"t",v:" "},s+=2;break;case"@":i[i.length]={t:"T",v:e},++s;break;case"B":case"b":if(r.charAt(s+1)==="1"||r.charAt(s+1)==="2"){if(u==null&&(u=Ed(e,t,r.charAt(s+1)==="2"),u==null))return"";i[i.length]={t:"X",v:r.substr(s,2)},l=o,s+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=Ed(e,t),u==null))return"";for(a=o;++s<r.length&&r.charAt(s).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=f),i[i.length]={t:o,v:a},l=o;break;case"A":case"a":case"上":var p={t:o,v:o};if(u==null&&(u=Ed(e,t)),r.substr(s,3).toUpperCase()==="A/P"?(u!=null&&(p.v=u.H>=12?"P":"A"),p.t="T",f="h",s+=3):r.substr(s,5).toUpperCase()==="AM/PM"?(u!=null&&(p.v=u.H>=12?"PM":"AM"),p.t="T",s+=5,f="h"):r.substr(s,5).toUpperCase()==="上午/下午"?(u!=null&&(p.v=u.H>=12?"下午":"上午"),p.t="T",s+=5,f="h"):(p.t="t",++s),u==null&&p.t==="T")return"";i[i.length]=p,l=o;break;case"[":for(a=o;r.charAt(s++)!=="]"&&s<r.length;)a+=r.charAt(s);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(qP)){if(u==null&&(u=Ed(e,t),u==null))return"";i[i.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",Bp(r)||(i[i.length]={t:"t",v:a}));break;case".":if(u!=null){for(a=o;++s<r.length&&(o=r.charAt(s))==="0";)a+=o;i[i.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++s<r.length&&"0#?.,E+-%".indexOf(o=r.charAt(s))>-1;)a+=o;i[i.length]={t:"n",v:a};break;case"?":for(a=o;r.charAt(++s)===o;)a+=o;i[i.length]={t:o,v:a},l=o;break;case"*":++s,(r.charAt(s)==" "||r.charAt(s)=="*")&&++s;break;case"(":case")":i[i.length]={t:n===1?"t":o,v:o},++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;s<r.length&&"0123456789".indexOf(r.charAt(++s))>-1;)a+=r.charAt(s);i[i.length]={t:"D",v:a};break;case" ":i[i.length]={t:o,v:o},++s;break;case"$":i[i.length]={t:"t",v:"$"},++s;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+r);i[i.length]={t:"t",v:o},++s;break}var y=0,v=0,w;for(s=i.length-1,l="t";s>=0;--s)switch(i[s].t){case"h":case"H":i[s].t=f,l="h",y<1&&(y=1);break;case"s":(w=i[s].v.match(/\.0+$/))&&(v=Math.max(v,w[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":l=i[s].t;break;case"m":l==="s"&&(i[s].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&i[s].v.match(/[Hh]/)&&(y=1),y<2&&i[s].v.match(/[Mm]/)&&(y=2),y<3&&i[s].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var x="",b;for(s=0;s<i.length;++s)switch(i[s].t){case"t":case"T":case" ":case"D":break;case"X":i[s].v="",i[s].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[s].v=$ne(i[s].t.charCodeAt(0),i[s].v,u,v),i[s].t="t";break;case"n":case"?":for(b=s+1;i[b]!=null&&((o=i[b].t)==="?"||o==="D"||(o===" "||o==="t")&&i[b+1]!=null&&(i[b+1].t==="?"||i[b+1].t==="t"&&i[b+1].v==="/")||i[s].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[b].v==="/"||i[b].v===" "&&i[b+1]!=null&&i[b+1].t=="?"));)i[s].v+=i[b].v,i[b]={v:"",t:";"},++b;x+=i[s].v,s=b-1;break;case"G":i[s].t="t",i[s].v=Hd(e,t);break}var C="",S,I;if(x.length>0){x.charCodeAt(0)==40?(S=e<0&&x.charCodeAt(0)===45?-e:e,I=Jh("n",x,S)):(S=e<0&&n>1?-e:e,I=Jh("n",x,S),S<0&&i[0]&&i[0].t=="t"&&(I=I.substr(1),i[0].v="-"+i[0].v)),b=I.length-1;var B=i.length;for(s=0;s<i.length;++s)if(i[s]!=null&&i[s].t!="t"&&i[s].v.indexOf(".")>-1){B=s;break}var T=i.length;if(B===i.length&&I.indexOf("E")===-1){for(s=i.length-1;s>=0;--s)i[s]==null||"n?".indexOf(i[s].t)===-1||(b>=i[s].v.length-1?(b-=i[s].v.length,i[s].v=I.substr(b+1,i[s].v.length)):b<0?i[s].v="":(i[s].v=I.substr(0,b+1),b=-1),i[s].t="t",T=s);b>=0&&T<i.length&&(i[T].v=I.substr(0,b+1)+i[T].v)}else if(B!==i.length&&I.indexOf("E")===-1){for(b=I.indexOf(".")-1,s=B;s>=0;--s)if(!(i[s]==null||"n?".indexOf(i[s].t)===-1)){for(c=i[s].v.indexOf(".")>-1&&s===B?i[s].v.indexOf(".")-1:i[s].v.length-1,C=i[s].v.substr(c+1);c>=0;--c)b>=0&&(i[s].v.charAt(c)==="0"||i[s].v.charAt(c)==="#")&&(C=I.charAt(b--)+C);i[s].v=C,i[s].t="t",T=s}for(b>=0&&T<i.length&&(i[T].v=I.substr(0,b+1)+i[T].v),b=I.indexOf(".")+1,s=B;s<i.length;++s)if(!(i[s]==null||"n?(".indexOf(i[s].t)===-1&&s!==B)){for(c=i[s].v.indexOf(".")>-1&&s===B?i[s].v.indexOf(".")+1:0,C=i[s].v.substr(0,c);c<i[s].v.length;++c)b<I.length&&(C+=I.charAt(b++));i[s].v=C,i[s].t="t",T=s}}}for(s=0;s<i.length;++s)i[s]!=null&&"n?".indexOf(i[s].t)>-1&&(S=n>1&&e<0&&s>0&&i[s-1].v==="-"?-e:e,i[s].v=Jh(i[s].t,i[s].v,S),i[s].t="t");var M="";for(s=0;s!==i.length;++s)i[s]!=null&&(M+=i[s].v);return M}var fI=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function AI(r,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(r==t)return!0;break;case">":if(r>t)return!0;break;case"<":if(r<t)return!0;break;case"<>":if(r!=t)return!0;break;case">=":if(r>=t)return!0;break;case"<=":if(r<=t)return!0;break}return!1}function nie(r,e){var t=tie(r),n=t.length,i=t[n-1].indexOf("@");if(n<4&&i>-1&&--n,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var a=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[n,a];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var s=t[0].match(fI),o=t[1].match(fI);return AI(e,s)?[n,t[0]]:AI(e,o)?[n,t[1]]:[n,t[s!=null&&o!=null?2:1]]}return[n,a]}function Cu(r,e,t){t==null&&(t={});var n="";switch(typeof r){case"string":r=="m/d/yy"&&t.dateNF?n=t.dateNF:n=r;break;case"number":r==14&&t.dateNF?n=t.dateNF:n=(t.table!=null?t.table:gn)[r],n==null&&(n=t.table&&t.table[uI[r]]||gn[uI[r]]),n==null&&(n=Une[r]||"General");break}if(Wx(n,0))return Hd(e,t);e instanceof Date&&(e=RP(e,t.date1904));var i=nie(n,e);if(Wx(i[1]))return Hd(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return rie(i[1],e,t,i[0])}function Nd(r,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(gn[t]==null){e<0&&(e=t);continue}if(gn[t]==r){e=t;break}}e<0&&(e=391)}return gn[e]=r,e}function jP(){gn=Pne()}var iie={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},$P=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function aie(r){var e=typeof r=="number"?gn[r]:r;return e=e.replace($P,"(\\d+)"),new RegExp("^"+e+"$")}function sie(r,e,t){var n=-1,i=-1,a=-1,s=-1,o=-1,l=-1;(e.match($P)||[]).forEach(function(h,f){var A=parseInt(t[f+1],10);switch(h.toLowerCase().charAt(0)){case"y":n=A;break;case"d":a=A;break;case"h":s=A;break;case"s":l=A;break;case"m":s>=0?o=A:i=A;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var c=("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return s==-1&&o==-1&&l==-1?u:n==-1&&i==-1&&a==-1?c:u+"T"+c}var oie=function(){var r={};r.version="1.2.0";function e(){for(var I=0,B=new Array(256),T=0;T!=256;++T)I=T,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,B[T]=I;return typeof Int32Array<"u"?new Int32Array(B):B}var t=e();function n(I){var B=0,T=0,M=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(M=0;M!=256;++M)F[M]=I[M];for(M=0;M!=256;++M)for(T=I[M],B=256+M;B<4096;B+=256)T=F[B]=T>>>8^I[T&255];var N=[];for(M=1;M!=16;++M)N[M-1]=typeof Int32Array<"u"?F.subarray(M*256,M*256+256):F.slice(M*256,M*256+256);return N}var i=n(t),a=i[0],s=i[1],o=i[2],l=i[3],u=i[4],c=i[5],h=i[6],f=i[7],A=i[8],d=i[9],p=i[10],y=i[11],v=i[12],w=i[13],x=i[14];function b(I,B){for(var T=B^-1,M=0,F=I.length;M<F;)T=T>>>8^t[(T^I.charCodeAt(M++))&255];return~T}function C(I,B){for(var T=B^-1,M=I.length-15,F=0;F<M;)T=x[I[F++]^T&255]^w[I[F++]^T>>8&255]^v[I[F++]^T>>16&255]^y[I[F++]^T>>>24]^p[I[F++]]^d[I[F++]]^A[I[F++]]^f[I[F++]]^h[I[F++]]^c[I[F++]]^u[I[F++]]^l[I[F++]]^o[I[F++]]^s[I[F++]]^a[I[F++]]^t[I[F++]];for(M+=15;F<M;)T=T>>>8^t[(T^I[F++])&255];return~T}function S(I,B){for(var T=B^-1,M=0,F=I.length,N=0,O=0;M<F;)N=I.charCodeAt(M++),N<128?T=T>>>8^t[(T^N)&255]:N<2048?(T=T>>>8^t[(T^(192|N>>6&31))&255],T=T>>>8^t[(T^(128|N&63))&255]):N>=55296&&N<57344?(N=(N&1023)+64,O=I.charCodeAt(M++)&1023,T=T>>>8^t[(T^(240|N>>8&7))&255],T=T>>>8^t[(T^(128|N>>2&63))&255],T=T>>>8^t[(T^(128|O>>6&15|(N&3)<<4))&255],T=T>>>8^t[(T^(128|O&63))&255]):(T=T>>>8^t[(T^(224|N>>12&15))&255],T=T>>>8^t[(T^(128|N>>6&63))&255],T=T>>>8^t[(T^(128|N&63))&255]);return~T}return r.table=t,r.bstr=b,r.buf=C,r.str=S,r}(),Yn=function(){var e={};e.version="1.2.1";function t(Ee,ze){for(var ke=Ee.split("/"),Re=ze.split("/"),Oe=0,qe=0,ct=Math.min(ke.length,Re.length);Oe<ct;++Oe){if(qe=ke[Oe].length-Re[Oe].length)return qe;if(ke[Oe]!=Re[Oe])return ke[Oe]<Re[Oe]?-1:1}return ke.length-Re.length}function n(Ee){if(Ee.charAt(Ee.length-1)=="/")return Ee.slice(0,-1).indexOf("/")===-1?Ee:n(Ee.slice(0,-1));var ze=Ee.lastIndexOf("/");return ze===-1?Ee:Ee.slice(0,ze+1)}function i(Ee){if(Ee.charAt(Ee.length-1)=="/")return i(Ee.slice(0,-1));var ze=Ee.lastIndexOf("/");return ze===-1?Ee:Ee.slice(ze+1)}function a(Ee,ze){typeof ze=="string"&&(ze=new Date(ze));var ke=ze.getHours();ke=ke<<6|ze.getMinutes(),ke=ke<<5|ze.getSeconds()>>>1,Ee.write_shift(2,ke);var Re=ze.getFullYear()-1980;Re=Re<<4|ze.getMonth()+1,Re=Re<<5|ze.getDate(),Ee.write_shift(2,Re)}function s(Ee){var ze=Ee.read_shift(2)&65535,ke=Ee.read_shift(2)&65535,Re=new Date,Oe=ke&31;ke>>>=5;var qe=ke&15;ke>>>=4,Re.setMilliseconds(0),Re.setFullYear(ke+1980),Re.setMonth(qe-1),Re.setDate(Oe);var ct=ze&31;ze>>>=5;var xt=ze&63;return ze>>>=6,Re.setHours(ze),Re.setMinutes(xt),Re.setSeconds(ct<<1),Re}function o(Ee){Rs(Ee,0);for(var ze={},ke=0;Ee.l<=Ee.length-4;){var Re=Ee.read_shift(2),Oe=Ee.read_shift(2),qe=Ee.l+Oe,ct={};switch(Re){case 21589:ke=Ee.read_shift(1),ke&1&&(ct.mtime=Ee.read_shift(4)),Oe>5&&(ke&2&&(ct.atime=Ee.read_shift(4)),ke&4&&(ct.ctime=Ee.read_shift(4))),ct.mtime&&(ct.mt=new Date(ct.mtime*1e3));break}Ee.l=qe,ze[Re]=ct}return ze}var l;function u(){return l||(l={})}function c(Ee,ze){if(Ee[0]==80&&Ee[1]==75)return wt(Ee,ze);if((Ee[0]|32)==109&&(Ee[1]|32)==105)return Kn(Ee,ze);if(Ee.length<512)throw new Error("CFB file size "+Ee.length+" < 512");var ke=3,Re=512,Oe=0,qe=0,ct=0,xt=0,lt=0,ft=[],At=Ee.slice(0,512);Rs(At,0);var Pt=h(At);switch(ke=Pt[0],ke){case 3:Re=512;break;case 4:Re=4096;break;case 0:if(Pt[1]==0)return wt(Ee,ze);default:throw new Error("Major Version: Expected 3 or 4 saw "+ke)}Re!==512&&(At=Ee.slice(0,Re),Rs(At,28));var It=Ee.slice(0,Re);f(At,ke);var Jt=At.read_shift(4,"i");if(ke===3&&Jt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Jt);At.l+=4,ct=At.read_shift(4,"i"),At.l+=4,At.chk("00100000","Mini Stream Cutoff Size: "),xt=At.read_shift(4,"i"),Oe=At.read_shift(4,"i"),lt=At.read_shift(4,"i"),qe=At.read_shift(4,"i");for(var qt=-1,Rt=0;Rt<109&&(qt=At.read_shift(4,"i"),!(qt<0));++Rt)ft[Rt]=qt;var hr=A(Ee,Re);y(lt,qe,hr,Re,ft);var An=w(hr,ct,ft,Re);An[ct].name="!Directory",Oe>0&&xt!==O&&(An[xt].name="!MiniFAT"),An[ft[0]].name="!FAT",An.fat_addrs=ft,An.ssz=Re;var Cn={},Vn=[],ls=[],Ti=[];x(ct,An,hr,Vn,Oe,Cn,ls,xt),d(ls,Ti,Vn),Vn.shift();var ya={FileIndex:ls,FullPaths:Ti};return ze&&ze.raw&&(ya.raw={header:It,sectors:hr}),ya}function h(Ee){if(Ee[Ee.l]==80&&Ee[Ee.l+1]==75)return[0,0];Ee.chk(L,"Header Signature: "),Ee.l+=16;var ze=Ee.read_shift(2,"u");return[Ee.read_shift(2,"u"),ze]}function f(Ee,ze){var ke=9;switch(Ee.l+=2,ke=Ee.read_shift(2)){case 9:if(ze!=3)throw new Error("Sector Shift: Expected 9 saw "+ke);break;case 12:if(ze!=4)throw new Error("Sector Shift: Expected 12 saw "+ke);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ke)}Ee.chk("0600","Mini Sector Shift: "),Ee.chk("000000000000","Reserved: ")}function A(Ee,ze){for(var ke=Math.ceil(Ee.length/ze)-1,Re=[],Oe=1;Oe<ke;++Oe)Re[Oe-1]=Ee.slice(Oe*ze,(Oe+1)*ze);return Re[ke-1]=Ee.slice(ke*ze),Re}function d(Ee,ze,ke){for(var Re=0,Oe=0,qe=0,ct=0,xt=0,lt=ke.length,ft=[],At=[];Re<lt;++Re)ft[Re]=At[Re]=Re,ze[Re]=ke[Re];for(;xt<At.length;++xt)Re=At[xt],Oe=Ee[Re].L,qe=Ee[Re].R,ct=Ee[Re].C,ft[Re]===Re&&(Oe!==-1&&ft[Oe]!==Oe&&(ft[Re]=ft[Oe]),qe!==-1&&ft[qe]!==qe&&(ft[Re]=ft[qe])),ct!==-1&&(ft[ct]=Re),Oe!==-1&&Re!=ft[Re]&&(ft[Oe]=ft[Re],At.lastIndexOf(Oe)<xt&&At.push(Oe)),qe!==-1&&Re!=ft[Re]&&(ft[qe]=ft[Re],At.lastIndexOf(qe)<xt&&At.push(qe));for(Re=1;Re<lt;++Re)ft[Re]===Re&&(qe!==-1&&ft[qe]!==qe?ft[Re]=ft[qe]:Oe!==-1&&ft[Oe]!==Oe&&(ft[Re]=ft[Oe]));for(Re=1;Re<lt;++Re)if(Ee[Re].type!==0){if(xt=Re,xt!=ft[xt])do xt=ft[xt],ze[Re]=ze[xt]+"/"+ze[Re];while(xt!==0&&ft[xt]!==-1&&xt!=ft[xt]);ft[Re]=-1}for(ze[0]+="/",Re=1;Re<lt;++Re)Ee[Re].type!==2&&(ze[Re]+="/")}function p(Ee,ze,ke){for(var Re=Ee.start,Oe=Ee.size,qe=[],ct=Re;ke&&Oe>0&&ct>=0;)qe.push(ze.slice(ct*N,ct*N+N)),Oe-=N,ct=md(ke,ct*4);return qe.length===0?Xa(0):sA(qe).slice(0,Ee.size)}function y(Ee,ze,ke,Re,Oe){var qe=O;if(Ee===O){if(ze!==0)throw new Error("DIFAT chain shorter than expected")}else if(Ee!==-1){var ct=ke[Ee],xt=(Re>>>2)-1;if(!ct)return;for(var lt=0;lt<xt&&(qe=md(ct,lt*4))!==O;++lt)Oe.push(qe);y(md(ct,Re-4),ze-1,ke,Re,Oe)}}function v(Ee,ze,ke,Re,Oe){var qe=[],ct=[];Oe||(Oe=[]);var xt=Re-1,lt=0,ft=0;for(lt=ze;lt>=0;){Oe[lt]=!0,qe[qe.length]=lt,ct.push(Ee[lt]);var At=ke[Math.floor(lt*4/Re)];if(ft=lt*4&xt,Re<4+ft)throw new Error("FAT boundary crossed: "+lt+" 4 "+Re);if(!Ee[At])break;lt=md(Ee[At],ft)}return{nodes:qe,data:EI([ct])}}function w(Ee,ze,ke,Re){var Oe=Ee.length,qe=[],ct=[],xt=[],lt=[],ft=Re-1,At=0,Pt=0,It=0,Jt=0;for(At=0;At<Oe;++At)if(xt=[],It=At+ze,It>=Oe&&(It-=Oe),!ct[It]){lt=[];var qt=[];for(Pt=It;Pt>=0;){qt[Pt]=!0,ct[Pt]=!0,xt[xt.length]=Pt,lt.push(Ee[Pt]);var Rt=ke[Math.floor(Pt*4/Re)];if(Jt=Pt*4&ft,Re<4+Jt)throw new Error("FAT boundary crossed: "+Pt+" 4 "+Re);if(!Ee[Rt]||(Pt=md(Ee[Rt],Jt),qt[Pt]))break}qe[It]={nodes:xt,data:EI([lt])}}return qe}function x(Ee,ze,ke,Re,Oe,qe,ct,xt){for(var lt=0,ft=Re.length?2:0,At=ze[Ee].data,Pt=0,It=0,Jt;Pt<At.length;Pt+=128){var qt=At.slice(Pt,Pt+128);Rs(qt,64),It=qt.read_shift(2),Jt=xB(qt,0,It-ft),Re.push(Jt);var Rt={name:Jt,type:qt.read_shift(1),color:qt.read_shift(1),L:qt.read_shift(4,"i"),R:qt.read_shift(4,"i"),C:qt.read_shift(4,"i"),clsid:qt.read_shift(16),state:qt.read_shift(4,"i"),start:0,size:0},hr=qt.read_shift(2)+qt.read_shift(2)+qt.read_shift(2)+qt.read_shift(2);hr!==0&&(Rt.ct=b(qt,qt.l-8));var An=qt.read_shift(2)+qt.read_shift(2)+qt.read_shift(2)+qt.read_shift(2);An!==0&&(Rt.mt=b(qt,qt.l-8)),Rt.start=qt.read_shift(4,"i"),Rt.size=qt.read_shift(4,"i"),Rt.size<0&&Rt.start<0&&(Rt.size=Rt.type=0,Rt.start=O,Rt.name=""),Rt.type===5?(lt=Rt.start,Oe>0&&lt!==O&&(ze[lt].name="!StreamData")):Rt.size>=4096?(Rt.storage="fat",ze[Rt.start]===void 0&&(ze[Rt.start]=v(ke,Rt.start,ze.fat_addrs,ze.ssz)),ze[Rt.start].name=Rt.name,Rt.content=ze[Rt.start].data.slice(0,Rt.size)):(Rt.storage="minifat",Rt.size<0?Rt.size=0:lt!==O&&Rt.start!==O&&ze[lt]&&(Rt.content=p(Rt,ze[lt].data,(ze[xt]||{}).data))),Rt.content&&Rs(Rt.content,0),qe[Jt]=Rt,ct.push(Rt)}}function b(Ee,ze){return new Date((Rl(Ee,ze+4)/1e7*Math.pow(2,32)+Rl(Ee,ze)/1e7-11644473600)*1e3)}function C(Ee,ze){return u(),c(l.readFileSync(Ee),ze)}function S(Ee,ze){var ke=ze&&ze.type;switch(ke||zn&&Buffer.isBuffer(Ee)&&(ke="buffer"),ke||"base64"){case"file":return C(Ee,ze);case"base64":return c(Xu($l(Ee)),ze);case"binary":return c(Xu(Ee),ze)}return c(Ee,ze)}function I(Ee,ze){var ke=ze||{},Re=ke.root||"Root Entry";if(Ee.FullPaths||(Ee.FullPaths=[]),Ee.FileIndex||(Ee.FileIndex=[]),Ee.FullPaths.length!==Ee.FileIndex.length)throw new Error("inconsistent CFB structure");Ee.FullPaths.length===0&&(Ee.FullPaths[0]=Re+"/",Ee.FileIndex[0]={name:Re,type:5}),ke.CLSID&&(Ee.FileIndex[0].clsid=ke.CLSID),B(Ee)}function B(Ee){var ze="Sh33tJ5";if(!Yn.find(Ee,"/"+ze)){var ke=Xa(4);ke[0]=55,ke[1]=ke[3]=50,ke[2]=54,Ee.FileIndex.push({name:ze,type:2,content:ke,size:4,L:69,R:69,C:69}),Ee.FullPaths.push(Ee.FullPaths[0]+ze),T(Ee)}}function T(Ee,ze){I(Ee);for(var ke=!1,Re=!1,Oe=Ee.FullPaths.length-1;Oe>=0;--Oe){var qe=Ee.FileIndex[Oe];switch(qe.type){case 0:Re?ke=!0:(Ee.FileIndex.pop(),Ee.FullPaths.pop());break;case 1:case 2:case 5:Re=!0,isNaN(qe.R*qe.L*qe.C)&&(ke=!0),qe.R>-1&&qe.L>-1&&qe.R==qe.L&&(ke=!0);break;default:ke=!0;break}}if(!(!ke&&!ze)){var ct=new Date(1987,1,19),xt=0,lt=Object.create?Object.create(null):{},ft=[];for(Oe=0;Oe<Ee.FullPaths.length;++Oe)lt[Ee.FullPaths[Oe]]=!0,Ee.FileIndex[Oe].type!==0&&ft.push([Ee.FullPaths[Oe],Ee.FileIndex[Oe]]);for(Oe=0;Oe<ft.length;++Oe){var At=n(ft[Oe][0]);Re=lt[At],Re||(ft.push([At,{name:i(At).replace("/",""),type:1,clsid:R,ct,mt:ct,content:null}]),lt[At]=!0)}for(ft.sort(function(Jt,qt){return t(Jt[0],qt[0])}),Ee.FullPaths=[],Ee.FileIndex=[],Oe=0;Oe<ft.length;++Oe)Ee.FullPaths[Oe]=ft[Oe][0],Ee.FileIndex[Oe]=ft[Oe][1];for(Oe=0;Oe<ft.length;++Oe){var Pt=Ee.FileIndex[Oe],It=Ee.FullPaths[Oe];if(Pt.name=i(It).replace("/",""),Pt.L=Pt.R=Pt.C=-(Pt.color=1),Pt.size=Pt.content?Pt.content.length:0,Pt.start=0,Pt.clsid=Pt.clsid||R,Oe===0)Pt.C=ft.length>1?1:-1,Pt.size=0,Pt.type=5;else if(It.slice(-1)=="/"){for(xt=Oe+1;xt<ft.length&&n(Ee.FullPaths[xt])!=It;++xt);for(Pt.C=xt>=ft.length?-1:xt,xt=Oe+1;xt<ft.length&&n(Ee.FullPaths[xt])!=n(It);++xt);Pt.R=xt>=ft.length?-1:xt,Pt.type=1}else n(Ee.FullPaths[Oe+1]||"")==n(It)&&(Pt.R=Oe+1),Pt.type=2}}}function M(Ee,ze){var ke=ze||{};if(ke.fileType=="mad")return ir(Ee,ke);switch(T(Ee),ke.fileType){case"zip":return rr(Ee,ke)}var Re=function(Jt){for(var qt=0,Rt=0,hr=0;hr<Jt.FileIndex.length;++hr){var An=Jt.FileIndex[hr];if(An.content){var Cn=An.content.length;Cn>0&&(Cn<4096?qt+=Cn+63>>6:Rt+=Cn+511>>9)}}for(var Vn=Jt.FullPaths.length+3>>2,ls=qt+7>>3,Ti=qt+127>>7,ya=ls+Rt+Vn+Ti,us=ya+127>>7,Ia=us<=109?0:Math.ceil((us-109)/127);ya+us+Ia+127>>7>us;)Ia=++us<=109?0:Math.ceil((us-109)/127);var Fa=[1,Ia,us,Ti,Vn,Rt,qt,0];return Jt.FileIndex[0].size=qt<<6,Fa[7]=(Jt.FileIndex[0].start=Fa[0]+Fa[1]+Fa[2]+Fa[3]+Fa[4]+Fa[5])+(Fa[6]+7>>3),Fa}(Ee),Oe=Xa(Re[7]<<9),qe=0,ct=0;{for(qe=0;qe<8;++qe)Oe.write_shift(1,G[qe]);for(qe=0;qe<8;++qe)Oe.write_shift(2,0);for(Oe.write_shift(2,62),Oe.write_shift(2,3),Oe.write_shift(2,65534),Oe.write_shift(2,9),Oe.write_shift(2,6),qe=0;qe<3;++qe)Oe.write_shift(2,0);for(Oe.write_shift(4,0),Oe.write_shift(4,Re[2]),Oe.write_shift(4,Re[0]+Re[1]+Re[2]+Re[3]-1),Oe.write_shift(4,0),Oe.write_shift(4,4096),Oe.write_shift(4,Re[3]?Re[0]+Re[1]+Re[2]-1:O),Oe.write_shift(4,Re[3]),Oe.write_shift(-4,Re[1]?Re[0]-1:O),Oe.write_shift(4,Re[1]),qe=0;qe<109;++qe)Oe.write_shift(-4,qe<Re[2]?Re[1]+qe:-1)}if(Re[1])for(ct=0;ct<Re[1];++ct){for(;qe<236+ct*127;++qe)Oe.write_shift(-4,qe<Re[2]?Re[1]+qe:-1);Oe.write_shift(-4,ct===Re[1]-1?O:ct+1)}var xt=function(Jt){for(ct+=Jt;qe<ct-1;++qe)Oe.write_shift(-4,qe+1);Jt&&(++qe,Oe.write_shift(-4,O))};for(ct=qe=0,ct+=Re[1];qe<ct;++qe)Oe.write_shift(-4,U.DIFSECT);for(ct+=Re[2];qe<ct;++qe)Oe.write_shift(-4,U.FATSECT);xt(Re[3]),xt(Re[4]);for(var lt=0,ft=0,At=Ee.FileIndex[0];lt<Ee.FileIndex.length;++lt)At=Ee.FileIndex[lt],At.content&&(ft=At.content.length,!(ft<4096)&&(At.start=ct,xt(ft+511>>9)));for(xt(Re[6]+7>>3);Oe.l&511;)Oe.write_shift(-4,U.ENDOFCHAIN);for(ct=qe=0,lt=0;lt<Ee.FileIndex.length;++lt)At=Ee.FileIndex[lt],At.content&&(ft=At.content.length,!(!ft||ft>=4096)&&(At.start=ct,xt(ft+63>>6)));for(;Oe.l&511;)Oe.write_shift(-4,U.ENDOFCHAIN);for(qe=0;qe<Re[4]<<2;++qe){var Pt=Ee.FullPaths[qe];if(!Pt||Pt.length===0){for(lt=0;lt<17;++lt)Oe.write_shift(4,0);for(lt=0;lt<3;++lt)Oe.write_shift(4,-1);for(lt=0;lt<12;++lt)Oe.write_shift(4,0);continue}At=Ee.FileIndex[qe],qe===0&&(At.start=At.size?At.start-1:O);var It=qe===0&&ke.root||At.name;if(ft=2*(It.length+1),Oe.write_shift(64,It,"utf16le"),Oe.write_shift(2,ft),Oe.write_shift(1,At.type),Oe.write_shift(1,At.color),Oe.write_shift(-4,At.L),Oe.write_shift(-4,At.R),Oe.write_shift(-4,At.C),At.clsid)Oe.write_shift(16,At.clsid,"hex");else for(lt=0;lt<4;++lt)Oe.write_shift(4,0);Oe.write_shift(4,At.state||0),Oe.write_shift(4,0),Oe.write_shift(4,0),Oe.write_shift(4,0),Oe.write_shift(4,0),Oe.write_shift(4,At.start),Oe.write_shift(4,At.size),Oe.write_shift(4,0)}for(qe=1;qe<Ee.FileIndex.length;++qe)if(At=Ee.FileIndex[qe],At.size>=4096)if(Oe.l=At.start+1<<9,zn&&Buffer.isBuffer(At.content))At.content.copy(Oe,Oe.l,0,At.size),Oe.l+=At.size+511&-512;else{for(lt=0;lt<At.size;++lt)Oe.write_shift(1,At.content[lt]);for(;lt&511;++lt)Oe.write_shift(1,0)}for(qe=1;qe<Ee.FileIndex.length;++qe)if(At=Ee.FileIndex[qe],At.size>0&&At.size<4096)if(zn&&Buffer.isBuffer(At.content))At.content.copy(Oe,Oe.l,0,At.size),Oe.l+=At.size+63&-64;else{for(lt=0;lt<At.size;++lt)Oe.write_shift(1,At.content[lt]);for(;lt&63;++lt)Oe.write_shift(1,0)}if(zn)Oe.l=Oe.length;else for(;Oe.l<Oe.length;)Oe.write_shift(1,0);return Oe}function F(Ee,ze){var ke=Ee.FullPaths.map(function(lt){return lt.toUpperCase()}),Re=ke.map(function(lt){var ft=lt.split("/");return ft[ft.length-(lt.slice(-1)=="/"?2:1)]}),Oe=!1;ze.charCodeAt(0)===47?(Oe=!0,ze=ke[0].slice(0,-1)+ze):Oe=ze.indexOf("/")!==-1;var qe=ze.toUpperCase(),ct=Oe===!0?ke.indexOf(qe):Re.indexOf(qe);if(ct!==-1)return Ee.FileIndex[ct];var xt=!qe.match(Dm);for(qe=qe.replace(qo,""),xt&&(qe=qe.replace(Dm,"!")),ct=0;ct<ke.length;++ct)if((xt?ke[ct].replace(Dm,"!"):ke[ct]).replace(qo,"")==qe||(xt?Re[ct].replace(Dm,"!"):Re[ct]).replace(qo,"")==qe)return Ee.FileIndex[ct];return null}var N=64,O=-2,L="d0cf11e0a1b11ae1",G=[208,207,17,224,161,177,26,225],R="00000000000000000000000000000000",U={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:O,FREESECT:-1,HEADER_SIGNATURE:L,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:R,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function W(Ee,ze,ke){u();var Re=M(Ee,ke);l.writeFileSync(ze,Re)}function Q(Ee){for(var ze=new Array(Ee.length),ke=0;ke<Ee.length;++ke)ze[ke]=String.fromCharCode(Ee[ke]);return ze.join("")}function re(Ee,ze){var ke=M(Ee,ze);switch(ze&&ze.type||"buffer"){case"file":return u(),l.writeFileSync(ze.filename,ke),ke;case"binary":return typeof ke=="string"?ke:Q(ke);case"base64":return aI(typeof ke=="string"?ke:Q(ke));case"buffer":if(zn)return Buffer.isBuffer(ke)?ke:r0(ke);case"array":return typeof ke=="string"?Xu(ke):ke}return ke}var oe;function P(Ee){try{var ze=Ee.InflateRaw,ke=new ze;if(ke._processChunk(new Uint8Array([3,0]),ke._finishFlushFlag),ke.bytesRead)oe=Ee;else throw new Error("zlib does not expose bytesRead")}catch(Re){console.error("cannot use native zlib: "+(Re.message||Re))}}function z(Ee,ze){if(!oe)return Ue(Ee,ze);var ke=oe.InflateRaw,Re=new ke,Oe=Re._processChunk(Ee.slice(Ee.l),Re._finishFlushFlag);return Ee.l+=Re.bytesRead,Oe}function K(Ee){return oe?oe.deflateRawSync(Ee):Ye(Ee)}var J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ue=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ge=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function le(Ee){var ze=(Ee<<1|Ee<<11)&139536|(Ee<<5|Ee<<15)&558144;return(ze>>16|ze>>8|ze)&255}for(var me=typeof Uint8Array<"u",xe=me?new Uint8Array(256):[],Be=0;Be<256;++Be)xe[Be]=le(Be);function Y(Ee,ze){var ke=xe[Ee&255];return ze<=8?ke>>>8-ze:(ke=ke<<8|xe[Ee>>8&255],ze<=16?ke>>>16-ze:(ke=ke<<8|xe[Ee>>16&255],ke>>>24-ze))}function Ve(Ee,ze){var ke=ze&7,Re=ze>>>3;return(Ee[Re]|(ke<=6?0:Ee[Re+1]<<8))>>>ke&3}function te(Ee,ze){var ke=ze&7,Re=ze>>>3;return(Ee[Re]|(ke<=5?0:Ee[Re+1]<<8))>>>ke&7}function se(Ee,ze){var ke=ze&7,Re=ze>>>3;return(Ee[Re]|(ke<=4?0:Ee[Re+1]<<8))>>>ke&15}function Z(Ee,ze){var ke=ze&7,Re=ze>>>3;return(Ee[Re]|(ke<=3?0:Ee[Re+1]<<8))>>>ke&31}function he(Ee,ze){var ke=ze&7,Re=ze>>>3;return(Ee[Re]|(ke<=1?0:Ee[Re+1]<<8))>>>ke&127}function ne(Ee,ze,ke){var Re=ze&7,Oe=ze>>>3,qe=(1<<ke)-1,ct=Ee[Oe]>>>Re;return ke<8-Re||(ct|=Ee[Oe+1]<<8-Re,ke<16-Re)||(ct|=Ee[Oe+2]<<16-Re,ke<24-Re)||(ct|=Ee[Oe+3]<<24-Re),ct&qe}function ae(Ee,ze,ke){var Re=ze&7,Oe=ze>>>3;return Re<=5?Ee[Oe]|=(ke&7)<<Re:(Ee[Oe]|=ke<<Re&255,Ee[Oe+1]=(ke&7)>>8-Re),ze+3}function _e(Ee,ze,ke){var Re=ze&7,Oe=ze>>>3;return ke=(ke&1)<<Re,Ee[Oe]|=ke,ze+1}function Me(Ee,ze,ke){var Re=ze&7,Oe=ze>>>3;return ke<<=Re,Ee[Oe]|=ke&255,ke>>>=8,Ee[Oe+1]=ke,ze+8}function be(Ee,ze,ke){var Re=ze&7,Oe=ze>>>3;return ke<<=Re,Ee[Oe]|=ke&255,ke>>>=8,Ee[Oe+1]=ke&255,Ee[Oe+2]=ke>>>8,ze+16}function Ae(Ee,ze){var ke=Ee.length,Re=2*ke>ze?2*ke:ze+5,Oe=0;if(ke>=ze)return Ee;if(zn){var qe=sI(Re);if(Ee.copy)Ee.copy(qe);else for(;Oe<Ee.length;++Oe)qe[Oe]=Ee[Oe];return qe}else if(me){var ct=new Uint8Array(Re);if(ct.set)ct.set(Ee);else for(;Oe<ke;++Oe)ct[Oe]=Ee[Oe];return ct}return Ee.length=Re,Ee}function pe(Ee){for(var ze=new Array(Ee),ke=0;ke<Ee;++ke)ze[ke]=0;return ze}function Fe(Ee,ze,ke){var Re=1,Oe=0,qe=0,ct=0,xt=0,lt=Ee.length,ft=me?new Uint16Array(32):pe(32);for(qe=0;qe<32;++qe)ft[qe]=0;for(qe=lt;qe<ke;++qe)Ee[qe]=0;lt=Ee.length;var At=me?new Uint16Array(lt):pe(lt);for(qe=0;qe<lt;++qe)ft[Oe=Ee[qe]]++,Re<Oe&&(Re=Oe),At[qe]=0;for(ft[0]=0,qe=1;qe<=Re;++qe)ft[qe+16]=xt=xt+ft[qe-1]<<1;for(qe=0;qe<lt;++qe)xt=Ee[qe],xt!=0&&(At[qe]=ft[xt+16]++);var Pt=0;for(qe=0;qe<lt;++qe)if(Pt=Ee[qe],Pt!=0)for(xt=Y(At[qe],Re)>>Re-Pt,ct=(1<<Re+4-Pt)-1;ct>=0;--ct)ze[xt|ct<<Pt]=Pt&15|qe<<4;return Re}var Ge=me?new Uint16Array(512):pe(512),Ze=me?new Uint16Array(32):pe(32);if(!me){for(var He=0;He<512;++He)Ge[He]=0;for(He=0;He<32;++He)Ze[He]=0}(function(){for(var Ee=[],ze=0;ze<32;ze++)Ee.push(5);Fe(Ee,Ze,32);var ke=[];for(ze=0;ze<=143;ze++)ke.push(8);for(;ze<=255;ze++)ke.push(9);for(;ze<=279;ze++)ke.push(7);for(;ze<=287;ze++)ke.push(8);Fe(ke,Ge,288)})();var Je=function(){for(var ze=me?new Uint8Array(32768):[],ke=0,Re=0;ke<ge.length-1;++ke)for(;Re<ge[ke+1];++Re)ze[Re]=ke;for(;Re<32768;++Re)ze[Re]=29;var Oe=me?new Uint8Array(259):[];for(ke=0,Re=0;ke<ue.length-1;++ke)for(;Re<ue[ke+1];++Re)Oe[Re]=ke;function qe(xt,lt){for(var ft=0;ft<xt.length;){var At=Math.min(65535,xt.length-ft),Pt=ft+At==xt.length;for(lt.write_shift(1,+Pt),lt.write_shift(2,At),lt.write_shift(2,~At&65535);At-- >0;)lt[lt.l++]=xt[ft++]}return lt.l}function ct(xt,lt){for(var ft=0,At=0,Pt=me?new Uint16Array(32768):[];At<xt.length;){var It=Math.min(65535,xt.length-At);if(It<10){for(ft=ae(lt,ft,+(At+It==xt.length)),ft&7&&(ft+=8-(ft&7)),lt.l=ft/8|0,lt.write_shift(2,It),lt.write_shift(2,~It&65535);It-- >0;)lt[lt.l++]=xt[At++];ft=lt.l*8;continue}ft=ae(lt,ft,+(At+It==xt.length)+2);for(var Jt=0;It-- >0;){var qt=xt[At];Jt=(Jt<<5^qt)&32767;var Rt=-1,hr=0;if((Rt=Pt[Jt])&&(Rt|=At&-32768,Rt>At&&(Rt-=32768),Rt<At))for(;xt[Rt+hr]==xt[At+hr]&&hr<250;)++hr;if(hr>2){qt=Oe[hr],qt<=22?ft=Me(lt,ft,xe[qt+1]>>1)-1:(Me(lt,ft,3),ft+=5,Me(lt,ft,xe[qt-23]>>5),ft+=3);var An=qt<8?0:qt-4>>2;An>0&&(be(lt,ft,hr-ue[qt]),ft+=An),qt=ze[At-Rt],ft=Me(lt,ft,xe[qt]>>3),ft-=3;var Cn=qt<4?0:qt-2>>1;Cn>0&&(be(lt,ft,At-Rt-ge[qt]),ft+=Cn);for(var Vn=0;Vn<hr;++Vn)Pt[Jt]=At&32767,Jt=(Jt<<5^xt[At])&32767,++At;It-=hr-1}else qt<=143?qt=qt+48:ft=_e(lt,ft,1),ft=Me(lt,ft,xe[qt]),Pt[Jt]=At&32767,++At}ft=Me(lt,ft,0)-1}return lt.l=(ft+7)/8|0,lt.l}return function(lt,ft){return lt.length<8?qe(lt,ft):ct(lt,ft)}}();function Ye(Ee){var ze=Xa(50+Math.floor(Ee.length*1.1)),ke=Je(Ee,ze);return ze.slice(0,ke)}var Ke=me?new Uint16Array(32768):pe(32768),mt=me?new Uint16Array(32768):pe(32768),vt=me?new Uint16Array(128):pe(128),Dt=1,yt=1;function Ar(Ee,ze){var ke=Z(Ee,ze)+257;ze+=5;var Re=Z(Ee,ze)+1;ze+=5;var Oe=se(Ee,ze)+4;ze+=4;for(var qe=0,ct=me?new Uint8Array(19):pe(19),xt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],lt=1,ft=me?new Uint8Array(8):pe(8),At=me?new Uint8Array(8):pe(8),Pt=ct.length,It=0;It<Oe;++It)ct[J[It]]=qe=te(Ee,ze),lt<qe&&(lt=qe),ft[qe]++,ze+=3;var Jt=0;for(ft[0]=0,It=1;It<=lt;++It)At[It]=Jt=Jt+ft[It-1]<<1;for(It=0;It<Pt;++It)(Jt=ct[It])!=0&&(xt[It]=At[Jt]++);var qt=0;for(It=0;It<Pt;++It)if(qt=ct[It],qt!=0){Jt=xe[xt[It]]>>8-qt;for(var Rt=(1<<7-qt)-1;Rt>=0;--Rt)vt[Jt|Rt<<qt]=qt&7|It<<3}var hr=[];for(lt=1;hr.length<ke+Re;)switch(Jt=vt[he(Ee,ze)],ze+=Jt&7,Jt>>>=3){case 16:for(qe=3+Ve(Ee,ze),ze+=2,Jt=hr[hr.length-1];qe-- >0;)hr.push(Jt);break;case 17:for(qe=3+te(Ee,ze),ze+=3;qe-- >0;)hr.push(0);break;case 18:for(qe=11+he(Ee,ze),ze+=7;qe-- >0;)hr.push(0);break;default:hr.push(Jt),lt<Jt&&(lt=Jt);break}var An=hr.slice(0,ke),Cn=hr.slice(ke);for(It=ke;It<286;++It)An[It]=0;for(It=Re;It<30;++It)Cn[It]=0;return Dt=Fe(An,Ke,286),yt=Fe(Cn,mt,30),ze}function ce(Ee,ze){if(Ee[0]==3&&!(Ee[1]&3))return[NA(ze),2];for(var ke=0,Re=0,Oe=sI(ze||1<<18),qe=0,ct=Oe.length>>>0,xt=0,lt=0;!(Re&1);){if(Re=te(Ee,ke),ke+=3,Re>>>1)Re>>1==1?(xt=9,lt=5):(ke=Ar(Ee,ke),xt=Dt,lt=yt);else{ke&7&&(ke+=8-(ke&7));var ft=Ee[ke>>>3]|Ee[(ke>>>3)+1]<<8;if(ke+=32,ft>0)for(!ze&&ct<qe+ft&&(Oe=Ae(Oe,qe+ft),ct=Oe.length);ft-- >0;)Oe[qe++]=Ee[ke>>>3],ke+=8;continue}for(;;){!ze&&ct<qe+32767&&(Oe=Ae(Oe,qe+32767),ct=Oe.length);var At=ne(Ee,ke,xt),Pt=Re>>>1==1?Ge[At]:Ke[At];if(ke+=Pt&15,Pt>>>=4,!(Pt>>>8&255))Oe[qe++]=Pt;else{if(Pt==256)break;Pt-=257;var It=Pt<8?0:Pt-4>>2;It>5&&(It=0);var Jt=qe+ue[Pt];It>0&&(Jt+=ne(Ee,ke,It),ke+=It),At=ne(Ee,ke,lt),Pt=Re>>>1==1?Ze[At]:mt[At],ke+=Pt&15,Pt>>>=4;var qt=Pt<4?0:Pt-2>>1,Rt=ge[Pt];for(qt>0&&(Rt+=ne(Ee,ke,qt),ke+=qt),!ze&&ct<Jt&&(Oe=Ae(Oe,Jt+100),ct=Oe.length);qe<Jt;)Oe[qe]=Oe[qe-Rt],++qe}}}return ze?[Oe,ke+7>>>3]:[Oe.slice(0,qe),ke+7>>>3]}function Ue(Ee,ze){var ke=Ee.slice(Ee.l||0),Re=ce(ke,ze);return Ee.l+=Re[1],Re[0]}function st(Ee,ze){if(Ee)typeof console<"u"&&console.error(ze);else throw new Error(ze)}function wt(Ee,ze){var ke=Ee;Rs(ke,0);var Re=[],Oe=[],qe={FileIndex:Re,FullPaths:Oe};I(qe,{root:ze.root});for(var ct=ke.length-4;(ke[ct]!=80||ke[ct+1]!=75||ke[ct+2]!=5||ke[ct+3]!=6)&&ct>=0;)--ct;ke.l=ct+4,ke.l+=4;var xt=ke.read_shift(2);ke.l+=6;var lt=ke.read_shift(4);for(ke.l=lt,ct=0;ct<xt;++ct){ke.l+=20;var ft=ke.read_shift(4),At=ke.read_shift(4),Pt=ke.read_shift(2),It=ke.read_shift(2),Jt=ke.read_shift(2);ke.l+=8;var qt=ke.read_shift(4),Rt=o(ke.slice(ke.l+Pt,ke.l+Pt+It));ke.l+=Pt+It+Jt;var hr=ke.l;ke.l=qt+4,Wt(ke,ft,At,qe,Rt),ke.l=hr}return qe}function Wt(Ee,ze,ke,Re,Oe){Ee.l+=2;var qe=Ee.read_shift(2),ct=Ee.read_shift(2),xt=s(Ee);if(qe&8257)throw new Error("Unsupported ZIP encryption");for(var lt=Ee.read_shift(4),ft=Ee.read_shift(4),At=Ee.read_shift(4),Pt=Ee.read_shift(2),It=Ee.read_shift(2),Jt="",qt=0;qt<Pt;++qt)Jt+=String.fromCharCode(Ee[Ee.l++]);if(It){var Rt=o(Ee.slice(Ee.l,Ee.l+It));(Rt[21589]||{}).mt&&(xt=Rt[21589].mt),((Oe||{})[21589]||{}).mt&&(xt=Oe[21589].mt)}Ee.l+=It;var hr=Ee.slice(Ee.l,Ee.l+ft);switch(ct){case 8:hr=z(Ee,At);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ct)}var An=!1;qe&8&&(lt=Ee.read_shift(4),lt==134695760&&(lt=Ee.read_shift(4),An=!0),ft=Ee.read_shift(4),At=Ee.read_shift(4)),ft!=ze&&st(An,"Bad compressed size: "+ze+" != "+ft),At!=ke&&st(An,"Bad uncompressed size: "+ke+" != "+At),Zn(Re,Jt,hr,{unsafe:!0,mt:xt})}function rr(Ee,ze){var ke=ze||{},Re=[],Oe=[],qe=Xa(1),ct=ke.compression?8:0,xt=0,lt=0,ft=0,At=0,Pt=0,It=Ee.FullPaths[0],Jt=It,qt=Ee.FileIndex[0],Rt=[],hr=0;for(lt=1;lt<Ee.FullPaths.length;++lt)if(Jt=Ee.FullPaths[lt].slice(It.length),qt=Ee.FileIndex[lt],!(!qt.size||!qt.content||Jt=="Sh33tJ5")){var An=At,Cn=Xa(Jt.length);for(ft=0;ft<Jt.length;++ft)Cn.write_shift(1,Jt.charCodeAt(ft)&127);Cn=Cn.slice(0,Cn.l),Rt[Pt]=oie.buf(qt.content,0);var Vn=qt.content;ct==8&&(Vn=K(Vn)),qe=Xa(30),qe.write_shift(4,67324752),qe.write_shift(2,20),qe.write_shift(2,xt),qe.write_shift(2,ct),qt.mt?a(qe,qt.mt):qe.write_shift(4,0),qe.write_shift(-4,Rt[Pt]),qe.write_shift(4,Vn.length),qe.write_shift(4,qt.content.length),qe.write_shift(2,Cn.length),qe.write_shift(2,0),At+=qe.length,Re.push(qe),At+=Cn.length,Re.push(Cn),At+=Vn.length,Re.push(Vn),qe=Xa(46),qe.write_shift(4,33639248),qe.write_shift(2,0),qe.write_shift(2,20),qe.write_shift(2,xt),qe.write_shift(2,ct),qe.write_shift(4,0),qe.write_shift(-4,Rt[Pt]),qe.write_shift(4,Vn.length),qe.write_shift(4,qt.content.length),qe.write_shift(2,Cn.length),qe.write_shift(2,0),qe.write_shift(2,0),qe.write_shift(2,0),qe.write_shift(2,0),qe.write_shift(4,0),qe.write_shift(4,An),hr+=qe.l,Oe.push(qe),hr+=Cn.length,Oe.push(Cn),++Pt}return qe=Xa(22),qe.write_shift(4,101010256),qe.write_shift(2,0),qe.write_shift(2,0),qe.write_shift(2,Pt),qe.write_shift(2,Pt),qe.write_shift(4,hr),qe.write_shift(4,At),qe.write_shift(2,0),sA([sA(Re),sA(Oe),qe])}var wr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ct(Ee,ze){if(Ee.ctype)return Ee.ctype;var ke=Ee.name||"",Re=ke.match(/\.([^\.]+)$/);return Re&&wr[Re[1]]||ze&&(Re=(ke=ze).match(/[\.\\]([^\.\\])+$/),Re&&wr[Re[1]])?wr[Re[1]]:"application/octet-stream"}function fn(Ee){for(var ze=aI(Ee),ke=[],Re=0;Re<ze.length;Re+=76)ke.push(ze.slice(Re,Re+76));return ke.join(`\r
`)+`\r
`}function $n(Ee){var ze=Ee.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ft){var At=ft.charCodeAt(0).toString(16).toUpperCase();return"="+(At.length==1?"0"+At:At)});ze=ze.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ze.charAt(0)==`
`&&(ze="=0D"+ze.slice(1)),ze=ze.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ke=[],Re=ze.split(`\r
`),Oe=0;Oe<Re.length;++Oe){var qe=Re[Oe];if(qe.length==0){ke.push("");continue}for(var ct=0;ct<qe.length;){var xt=76,lt=qe.slice(ct,ct+xt);lt.charAt(xt-1)=="="?xt--:lt.charAt(xt-2)=="="?xt-=2:lt.charAt(xt-3)=="="&&(xt-=3),lt=qe.slice(ct,ct+xt),ct+=xt,ct<qe.length&&(lt+="="),ke.push(lt)}}return ke.join(`\r
`)}function Tt(Ee){for(var ze=[],ke=0;ke<Ee.length;++ke){for(var Re=Ee[ke];ke<=Ee.length&&Re.charAt(Re.length-1)=="=";)Re=Re.slice(0,Re.length-1)+Ee[++ke];ze.push(Re)}for(var Oe=0;Oe<ze.length;++Oe)ze[Oe]=ze[Oe].replace(/[=][0-9A-Fa-f]{2}/g,function(qe){return String.fromCharCode(parseInt(qe.slice(1),16))});return Xu(ze.join(`\r
`))}function Ln(Ee,ze,ke){for(var Re="",Oe="",qe="",ct,xt=0;xt<10;++xt){var lt=ze[xt];if(!lt||lt.match(/^\s*$/))break;var ft=lt.match(/^(.*?):\s*([^\s].*)$/);if(ft)switch(ft[1].toLowerCase()){case"content-location":Re=ft[2].trim();break;case"content-type":qe=ft[2].trim();break;case"content-transfer-encoding":Oe=ft[2].trim();break}}switch(++xt,Oe.toLowerCase()){case"base64":ct=Xu($l(ze.slice(xt).join("")));break;case"quoted-printable":ct=Tt(ze.slice(xt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Oe)}var At=Zn(Ee,Re.slice(ke.length),ct,{unsafe:!0});qe&&(At.ctype=qe)}function Kn(Ee,ze){if(Q(Ee.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ke=ze&&ze.root||"",Re=(zn&&Buffer.isBuffer(Ee)?Ee.toString("binary"):Q(Ee)).split(`\r
`),Oe=0,qe="";for(Oe=0;Oe<Re.length;++Oe)if(qe=Re[Oe],!!/^Content-Location:/i.test(qe)&&(qe=qe.slice(qe.indexOf("file")),ke||(ke=qe.slice(0,qe.lastIndexOf("/")+1)),qe.slice(0,ke.length)!=ke))for(;ke.length>0&&(ke=ke.slice(0,ke.length-1),ke=ke.slice(0,ke.lastIndexOf("/")+1),qe.slice(0,ke.length)!=ke););var ct=(Re[1]||"").match(/boundary="(.*?)"/);if(!ct)throw new Error("MAD cannot find boundary");var xt="--"+(ct[1]||""),lt=[],ft=[],At={FileIndex:lt,FullPaths:ft};I(At);var Pt,It=0;for(Oe=0;Oe<Re.length;++Oe){var Jt=Re[Oe];Jt!==xt&&Jt!==xt+"--"||(It++&&Ln(At,Re.slice(Pt,Oe),ke),Pt=Oe)}return At}function ir(Ee,ze){var ke=ze||{},Re=ke.boundary||"SheetJS";Re="------="+Re;for(var Oe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Re.slice(2)+'"',"","",""],qe=Ee.FullPaths[0],ct=qe,xt=Ee.FileIndex[0],lt=1;lt<Ee.FullPaths.length;++lt)if(ct=Ee.FullPaths[lt].slice(qe.length),xt=Ee.FileIndex[lt],!(!xt.size||!xt.content||ct=="Sh33tJ5")){ct=ct.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(hr){return"_x"+hr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(hr){return"_u"+hr.charCodeAt(0).toString(16)+"_"});for(var ft=xt.content,At=zn&&Buffer.isBuffer(ft)?ft.toString("binary"):Q(ft),Pt=0,It=Math.min(1024,At.length),Jt=0,qt=0;qt<=It;++qt)(Jt=At.charCodeAt(qt))>=32&&Jt<128&&++Pt;var Rt=Pt>=It*4/5;Oe.push(Re),Oe.push("Content-Location: "+(ke.root||"file:///C:/SheetJS/")+ct),Oe.push("Content-Transfer-Encoding: "+(Rt?"quoted-printable":"base64")),Oe.push("Content-Type: "+Ct(xt,ct)),Oe.push(""),Oe.push(Rt?$n(At):fn(At))}return Oe.push(Re+`--\r
`),Oe.join(`\r
`)}function Dn(Ee){var ze={};return I(ze,Ee),ze}function Zn(Ee,ze,ke,Re){var Oe=Re&&Re.unsafe;Oe||I(Ee);var qe=!Oe&&Yn.find(Ee,ze);if(!qe){var ct=Ee.FullPaths[0];ze.slice(0,ct.length)==ct?ct=ze:(ct.slice(-1)!="/"&&(ct+="/"),ct=(ct+ze).replace("//","/")),qe={name:i(ze),type:2},Ee.FileIndex.push(qe),Ee.FullPaths.push(ct),Oe||Yn.utils.cfb_gc(Ee)}return qe.content=ke,qe.size=ke?ke.length:0,Re&&(Re.CLSID&&(qe.clsid=Re.CLSID),Re.mt&&(qe.mt=Re.mt),Re.ct&&(qe.ct=Re.ct)),qe}function Br(Ee,ze){I(Ee);var ke=Yn.find(Ee,ze);if(ke){for(var Re=0;Re<Ee.FileIndex.length;++Re)if(Ee.FileIndex[Re]==ke)return Ee.FileIndex.splice(Re,1),Ee.FullPaths.splice(Re,1),!0}return!1}function Pr(Ee,ze,ke){I(Ee);var Re=Yn.find(Ee,ze);if(Re){for(var Oe=0;Oe<Ee.FileIndex.length;++Oe)if(Ee.FileIndex[Oe]==Re)return Ee.FileIndex[Oe].name=i(ke),Ee.FullPaths[Oe]=ke,!0}return!1}function tn(Ee){T(Ee,!0)}return e.find=F,e.read=S,e.parse=c,e.write=re,e.writeFile=W,e.utils={cfb_new:Dn,cfb_add:Zn,cfb_del:Br,cfb_mov:Pr,cfb_gc:tn,ReadShift:lv,CheckField:dU,prep_blob:Rs,bconcat:sA,use_zlib:P,_deflateRaw:Ye,_inflateRaw:Ue,consts:U},e}();function lie(r){if(typeof Deno<"u")return Deno.readFileSync(r);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(r);e.open("r"),e.encoding="binary";var t=e.read();return e.close(),t}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+r)}function ih(r){for(var e=Object.keys(r),t=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(r,e[n])&&t.push(e[n]);return t}function pB(r){for(var e=[],t=ih(r),n=0;n!==t.length;++n)e[r[t[n]]]=t[n];return e}var Xx=new Date(1899,11,30,0,0,0);function Vo(r,e){var t=r.getTime(),n=Xx.getTime()+(r.getTimezoneOffset()-Xx.getTimezoneOffset())*6e4;return(t-n)/(24*60*60*1e3)}var KP=new Date,uie=Xx.getTime()+(KP.getTimezoneOffset()-Xx.getTimezoneOffset())*6e4,dI=KP.getTimezoneOffset();function C_(r){var e=new Date;return e.setTime(r*24*60*60*1e3+uie),e.getTimezoneOffset()!==dI&&e.setTime(e.getTime()+(e.getTimezoneOffset()-dI)*6e4),e}function cie(r){var e=0,t=0,n=!1,i=r.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+r+"| is not an ISO8601 Duration");for(var a=1;a!=i.length;++a)if(i[a]){switch(t=1,a>3&&(n=!0),i[a].slice(i[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[a].slice(i[a].length-1));case"D":t*=24;case"H":t*=60;case"M":if(n)t*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=t*parseInt(i[a],10)}return e}var gI=new Date("2017-02-19T19:06:09.000Z"),VP=isNaN(gI.getFullYear())?new Date("2/19/17"):gI,hie=VP.getFullYear()==2017;function Ss(r,e){var t=new Date(r);if(hie)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(r instanceof Date)return r;if(VP.getFullYear()==1917&&!isNaN(t.getFullYear())){var n=t.getFullYear();return r.indexOf(""+n)>-1||t.setFullYear(t.getFullYear()+100),t}var i=r.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return r.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function zd(r,e){if(zn&&Buffer.isBuffer(r)){if(e){if(r[0]==255&&r[1]==254)return Rm(r.slice(2).toString("utf16le"));if(r[1]==254&&r[2]==255)return Rm(DP(r.slice(2).toString("binary")))}return r.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(r[0]==255&&r[1]==254)return Rm(new TextDecoder("utf-16le").decode(r.slice(2)));if(r[0]==254&&r[1]==255)return Rm(new TextDecoder("utf-16be").decode(r.slice(2)))}var t={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(r)&&(r=new Uint8Array(r)),new TextDecoder("latin1").decode(r).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(a){return t[a]||a})}catch{}for(var n=[],i=0;i!=r.length;++i)n.push(String.fromCharCode(r[i]));return n.join("")}function Hs(r){if(typeof JSON<"u"&&!Array.isArray(r))return JSON.parse(JSON.stringify(r));if(typeof r!="object"||r==null)return r;if(r instanceof Date)return new Date(r.getTime());var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=Hs(r[t]));return e}function ga(r,e){for(var t="";t.length<e;)t+=r;return t}function ic(r){var e=Number(r);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(r))return e;var t=1,n=r.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,a){return t=-t,a}),!isNaN(e=Number(n)))?e/t:e}var fie=["january","february","march","april","may","june","july","august","september","october","november","december"];function rp(r){var e=new Date(r),t=new Date(NaN),n=e.getYear(),i=e.getMonth(),a=e.getDate();if(isNaN(a))return t;var s=r.toLowerCase();if(s.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(s=s.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),s.length>3&&fie.indexOf(s)==-1)return t}else if(s.match(/[a-z]/))return t;return n<0||n>8099?t:(i>0||a>1)&&n!=101?e:r.match(/[^-0-9:,\/\\]/)?t:e}var Aie=function(){var r="abacaba".split(/(:?b)/i).length==5;return function(t,n,i){if(r||typeof n=="string")return t.split(n);for(var a=t.split(n),s=[a[0]],o=1;o<a.length;++o)s.push(i),s.push(a[o]);return s}}();function WP(r){return r?r.content&&r.type?zd(r.content,!0):r.data?Lm(r.data):r.asNodeBuffer&&zn?Lm(r.asNodeBuffer().toString("binary")):r.asBinary?Lm(r.asBinary()):r._data&&r._data.getContent?Lm(zd(Array.prototype.slice.call(r._data.getContent(),0))):null:null}function YP(r){if(!r)return null;if(r.data)return nI(r.data);if(r.asNodeBuffer&&zn)return r.asNodeBuffer();if(r._data&&r._data.getContent){var e=r._data.getContent();return typeof e=="string"?nI(e):Array.prototype.slice.call(e)}return r.content&&r.type?r.content:null}function die(r){return r&&r.name.slice(-4)===".bin"?YP(r):WP(r)}function du(r,e){for(var t=r.FullPaths||ih(r.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),i=n.replace(/\\/g,"/"),a=0;a<t.length;++a){var s=t[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==s||i==s)return r.files?r.files[t[a]]:r.FileIndex[a]}return null}function mB(r,e){var t=du(r,e);if(t==null)throw new Error("Cannot find file "+e+" in zip");return t}function Oa(r,e,t){if(!t)return die(mB(r,e));if(!e)return null;try{return Oa(r,e)}catch{return null}}function Ol(r,e,t){if(!t)return WP(mB(r,e));if(!e)return null;try{return Ol(r,e)}catch{return null}}function gie(r,e,t){return YP(mB(r,e))}function pI(r){for(var e=r.FullPaths||ih(r.files),t=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&t.push(e[n].replace(/^Root Entry[\/]/,""));return t.sort()}function pie(r,e,t){if(r.FullPaths){if(typeof t=="string"){var n;return zn?n=r0(t):n=kne(t),Yn.utils.cfb_add(r,e,n)}Yn.utils.cfb_add(r,e,t)}else r.file(e,t)}function XP(r,e){switch(e.type){case"base64":return Yn.read(r,{type:"base64"});case"binary":return Yn.read(r,{type:"binary"});case"buffer":case"array":return Yn.read(r,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function km(r,e){if(r.charAt(0)=="/")return r.slice(1);var t=e.split("/");e.slice(-1)!="/"&&t.pop();for(var n=r.split("/");n.length!==0;){var i=n.shift();i===".."?t.pop():i!=="."&&t.push(i)}return t.join("/")}var ZP=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,mie=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,mI=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,vie=/<[^>]*>/g,Co=ZP.match(mI)?mI:vie,yie=/<\w*:/,xie=/<(\/?)\w+:/;function Kr(r,e,t){for(var n={},i=0,a=0;i!==r.length&&!((a=r.charCodeAt(i))===32||a===10||a===13);++i);if(e||(n[0]=r.slice(0,i)),i===r.length)return n;var s=r.match(mie),o=0,l="",u=0,c="",h="",f=1;if(s)for(u=0;u!=s.length;++u){for(h=s[u],a=0;a!=h.length&&h.charCodeAt(a)!==61;++a);for(c=h.slice(0,a).trim();h.charCodeAt(a+1)==32;)++a;for(f=(i=h.charCodeAt(a+1))==34||i==39?1:0,l=h.slice(a+1+f,h.length-f),o=0;o!=c.length&&c.charCodeAt(o)!==58;++o);if(o===c.length)c.indexOf("_")>0&&(c=c.slice(0,c.indexOf("_"))),n[c]=l,n[c.toLowerCase()]=l;else{var A=(o===5&&c.slice(0,5)==="xmlns"?"xmlns":"")+c.slice(o+1);if(n[A]&&c.slice(o-3,o)=="ext")continue;n[A]=l,n[A.toLowerCase()]=l}}return n}function lh(r){return r.replace(xie,"<$1")}var JP={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},wie=pB(JP),ri=function(){var r=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function t(n){var i=n+"",a=i.indexOf("<![CDATA[");if(a==-1)return i.replace(r,function(o,l){return JP[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var s=i.indexOf("]]>");return t(i.slice(0,a))+i.slice(a+9,s)+t(i.slice(s+3))}}(),_ie=/[&<>'"]/g,Eie=/[\u0000-\u001f]/g;function vB(r){var e=r+"";return e.replace(_ie,function(t){return wie[t]}).replace(/\n/g,"<br/>").replace(Eie,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}var vI=function(){var r=/&#(\d+);/g;function e(t,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(r,e)}}();function Ji(r){switch(r){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function bb(r){for(var e="",t=0,n=0,i=0,a=0,s=0,o=0;t<r.length;){if(n=r.charCodeAt(t++),n<128){e+=String.fromCharCode(n);continue}if(i=r.charCodeAt(t++),n>191&&n<224){s=(n&31)<<6,s|=i&63,e+=String.fromCharCode(s);continue}if(a=r.charCodeAt(t++),n<240){e+=String.fromCharCode((n&15)<<12|(i&63)<<6|a&63);continue}s=r.charCodeAt(t++),o=((n&7)<<18|(i&63)<<12|(a&63)<<6|s&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function yI(r){var e=NA(2*r.length),t,n,i=1,a=0,s=0,o;for(n=0;n<r.length;n+=i)i=1,(o=r.charCodeAt(n))<128?t=o:o<224?(t=(o&31)*64+(r.charCodeAt(n+1)&63),i=2):o<240?(t=(o&15)*4096+(r.charCodeAt(n+1)&63)*64+(r.charCodeAt(n+2)&63),i=3):(i=4,t=(o&7)*262144+(r.charCodeAt(n+1)&63)*4096+(r.charCodeAt(n+2)&63)*64+(r.charCodeAt(n+3)&63),t-=65536,s=55296+(t>>>10&1023),t=56320+(t&1023)),s!==0&&(e[a++]=s&255,e[a++]=s>>>8,s=0),e[a++]=t%256,e[a++]=t>>>8;return e.slice(0,a).toString("ucs2")}function xI(r){return r0(r,"binary").toString("utf8")}var Gy="foo bar bazâð£",qi=zn&&(xI(Gy)==bb(Gy)&&xI||yI(Gy)==bb(Gy)&&yI)||bb,Rm=zn?function(r){return r0(r,"utf8").toString("binary")}:function(r){for(var e=[],t=0,n=0,i=0;t<r.length;)switch(n=r.charCodeAt(t++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=r.charCodeAt(t++)-56320+(n<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},$v=function(){var r={};return function(t,n){var i=t+"|"+(n||"");return r[i]?r[i]:r[i]=new RegExp("<(?:\\w+:)?"+t+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+t+">",n||"")}}(),eU=function(){var r=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<r.length;++i)n=n.replace(r[i][0],r[i][1]);return n}}(),bie=function(){var r={};return function(t){return r[t]!==void 0?r[t]:r[t]=new RegExp("<(?:vt:)?"+t+">([\\s\\S]*?)</(?:vt:)?"+t+">","g")}}(),Cie=/<\/?(?:vt:)?variant>/g,Sie=/<(?:vt:)([^>]*)>([\s\S]*)</;function wI(r,e){var t=Kr(r),n=r.match(bie(t.baseType))||[],i=[];if(n.length!=t.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+t.size);return i}return n.forEach(function(a){var s=a.replace(Cie,"").match(Sie);s&&i.push({v:qi(s[2]),t:s[1]})}),i}var Bie=/(^\s|\s$|\n)/;function Tie(r){return ih(r).map(function(e){return" "+e+'="'+r[e]+'"'}).join("")}function Nie(r,e,t){return"<"+r+(t!=null?Tie(t):"")+(e!=null?(e.match(Bie)?' xml:space="preserve"':"")+">"+e+"</"+r:"/")+">"}function yB(r){if(zn&&Buffer.isBuffer(r))return r.toString("utf8");if(typeof r=="string")return r;if(typeof Uint8Array<"u"&&r instanceof Uint8Array)return qi(n0(AB(r)));throw new Error("Bad input format: expected Buffer or string")}var Kv=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Iie={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},Fie=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function Mie(r,e){for(var t=1-2*(r[e+7]>>>7),n=((r[e+7]&127)<<4)+(r[e+6]>>>4&15),i=r[e+6]&15,a=5;a>=0;--a)i=i*256+r[e+a];return n==2047?i==0?t*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),t*Math.pow(2,n-52)*i)}function Lie(r,e,t){var n=(e<0||1/e==-1/0?1:0)<<7,i=0,a=0,s=n?-e:e;isFinite(s)?s==0?i=a=0:(i=Math.floor(Math.log(s)/Math.LN2),a=s*Math.pow(2,52-i),i<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?i=-1022:(a-=Math.pow(2,52),i+=1023)):(i=2047,a=isNaN(e)?26985:0);for(var o=0;o<=5;++o,a/=256)r[t+o]=a&255;r[t+6]=(i&15)<<4|a&15,r[t+7]=i>>4|n}var _I=function(r){for(var e=[],t=10240,n=0;n<r[0].length;++n)if(r[0][n])for(var i=0,a=r[0][n].length;i<a;i+=t)e.push.apply(e,r[0][n].slice(i,i+t));return e},EI=zn?function(r){return r[0].length>0&&Buffer.isBuffer(r[0][0])?Buffer.concat(r[0].map(function(e){return Buffer.isBuffer(e)?e:r0(e)})):_I(r)}:_I,bI=function(r,e,t){for(var n=[],i=e;i<t;i+=2)n.push(String.fromCharCode(qh(r,i)));return n.join("").replace(qo,"")},xB=zn?function(r,e,t){return Buffer.isBuffer(r)?r.toString("utf16le",e,t).replace(qo,""):bI(r,e,t)}:bI,CI=function(r,e,t){for(var n=[],i=e;i<e+t;++i)n.push(("0"+r[i].toString(16)).slice(-2));return n.join("")},tU=zn?function(r,e,t){return Buffer.isBuffer(r)?r.toString("hex",e,e+t):CI(r,e,t)}:CI,SI=function(r,e,t){for(var n=[],i=e;i<t;i++)n.push(String.fromCharCode(sg(r,i)));return n.join("")},T1=zn?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):SI(e,t,n)}:SI,rU=function(r,e){var t=Rl(r,e);return t>0?T1(r,e+4,e+4+t-1):""},nU=rU,iU=function(r,e){var t=Rl(r,e);return t>0?T1(r,e+4,e+4+t-1):""},aU=iU,sU=function(r,e){var t=2*Rl(r,e);return t>0?T1(r,e+4,e+4+t-1):""},oU=sU,lU=function(e,t){var n=Rl(e,t);return n>0?xB(e,t+4,t+4+n):""},uU=lU,cU=function(r,e){var t=Rl(r,e);return t>0?T1(r,e+4,e+4+t):""},hU=cU,fU=function(r,e){return Mie(r,e)},Zx=fU,AU=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};zn&&(nU=function(e,t){if(!Buffer.isBuffer(e))return rU(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},aU=function(e,t){if(!Buffer.isBuffer(e))return iU(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},oU=function(e,t){if(!Buffer.isBuffer(e))return sU(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},uU=function(e,t){if(!Buffer.isBuffer(e))return lU(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},hU=function(e,t){if(!Buffer.isBuffer(e))return cU(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},Zx=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):fU(e,t)},AU=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var sg=function(r,e){return r[e]},qh=function(r,e){return r[e+1]*256+r[e]},Die=function(r,e){var t=r[e+1]*256+r[e];return t<32768?t:(65535-t+1)*-1},Rl=function(r,e){return r[e+3]*(1<<24)+(r[e+2]<<16)+(r[e+1]<<8)+r[e]},md=function(r,e){return r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]},kie=function(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]};function lv(r,e){var t="",n,i,a=[],s,o,l,u;switch(e){case"dbcs":if(u=this.l,zn&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*r).toString("utf16le");else for(l=0;l<r;++l)t+=String.fromCharCode(qh(this,u)),u+=2;r*=2;break;case"utf8":t=T1(this,this.l,this.l+r);break;case"utf16le":r*=2,t=xB(this,this.l,this.l+r);break;case"wstr":return lv.call(this,r,"dbcs");case"lpstr-ansi":t=nU(this,this.l),r=4+Rl(this,this.l);break;case"lpstr-cp":t=aU(this,this.l),r=4+Rl(this,this.l);break;case"lpwstr":t=oU(this,this.l),r=4+2*Rl(this,this.l);break;case"lpp4":r=4+Rl(this,this.l),t=uU(this,this.l),r&2&&(r+=2);break;case"8lpp4":r=4+Rl(this,this.l),t=hU(this,this.l),r&3&&(r+=4-(r&3));break;case"cstr":for(r=0,t="";(s=sg(this,this.l+r++))!==0;)a.push(Qy(s));t=a.join("");break;case"_wstr":for(r=0,t="";(s=qh(this,this.l+r))!==0;)a.push(Qy(s)),r+=2;r+=2,t=a.join("");break;case"dbcs-cont":for(t="",u=this.l,l=0;l<r;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return s=sg(this,u),this.l=u+1,o=lv.call(this,r-l,s?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(Qy(qh(this,u))),u+=2}t=a.join(""),r*=2;break;case"cpstr":case"sbcs-cont":for(t="",u=this.l,l=0;l!=r;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return s=sg(this,u),this.l=u+1,o=lv.call(this,r-l,s?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(Qy(sg(this,u))),u+=1}t=a.join("");break;default:switch(r){case 1:return n=sg(this,this.l),this.l++,n;case 2:return n=(e==="i"?Die:qh)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(r>0?md:kie)(this,this.l),this.l+=4,n):(i=Rl(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return r==8?i=Zx(this,this.l):i=Zx([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;r=8;case 16:t=tU(this,this.l,r);break}}return this.l+=r,t}var Rie=function(r,e,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24&255},Oie=function(r,e,t){r[t]=e&255,r[t+1]=e>>8&255,r[t+2]=e>>16&255,r[t+3]=e>>24&255},Pie=function(r,e,t){r[t]=e&255,r[t+1]=e>>>8&255};function Uie(r,e,t){var n=0,i=0;if(t==="dbcs"){for(i=0;i!=e.length;++i)Pie(this,e.charCodeAt(i),this.l+2*i);n=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;n=e.length}else if(t==="hex"){for(;i<r;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(t==="utf16le"){var a=Math.min(this.l+r,this.length);for(i=0;i<Math.min(e.length,r);++i){var s=e.charCodeAt(i);this[this.l++]=s&255,this[this.l++]=s>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(r){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,Rie(this,e,this.l);break;case 8:if(n=8,t==="f"){Lie(this,e,this.l);break}case 16:break;case-4:n=4,Oie(this,e,this.l);break}return this.l+=n,this}function dU(r,e){var t=tU(this,this.l,r.length>>1);if(t!==r)throw new Error(e+"Expected "+r+" saw "+t);this.l+=r.length>>1}function Rs(r,e){r.l=e,r.read_shift=lv,r.chk=dU,r.write_shift=Uie}function Eo(r,e){r.l+=e}function Xa(r){var e=NA(r);return Rs(e,0),e}function df(r,e,t){if(r){var n,i,a;Rs(r,r.l||0);for(var s=r.length,o=0,l=0;r.l<s;){o=r.read_shift(1),o&128&&(o=(o&127)+((r.read_shift(1)&127)<<7));var u=iw[o]||iw[65535];for(n=r.read_shift(1),a=n&127,i=1;i<4&&n&128;++i)a+=((n=r.read_shift(1))&127)<<7*i;l=r.l+a;var c=u.f&&u.f(r,a,t);if(r.l=l,e(c,u,o))return}}}function vS(){var r=[],e=zn?256:2048,t=function(u){var c=Xa(u);return Rs(c,0),c},n=t(e),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&r.push(n),n=null)},a=function(u){return n&&u<n.length-n.l?n:(i(),n=t(Math.max(u+1,e)))},s=function(){return i(),sA(r)},o=function(u){i(),n=u,n.l==null&&(n.l=n.length),a(e)};return{next:a,push:o,end:s,_bufs:r}}function uv(r,e,t){var n=Hs(r);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!t||t.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function BI(r,e,t){var n=Hs(r);return n.s=uv(n.s,e.s,t),n.e=uv(n.e,e.s,t),n}function cv(r,e){if(r.cRel&&r.c<0)for(r=Hs(r);r.c<0;)r.c+=e>8?16384:256;if(r.rRel&&r.r<0)for(r=Hs(r);r.r<0;)r.r+=e>8?1048576:e>5?65536:16384;var t=nn(r);return!r.cRel&&r.cRel!=null&&(t=Hie(t)),!r.rRel&&r.rRel!=null&&(t=Qie(t)),t}function Cb(r,e){return r.s.r==0&&!r.s.rRel&&r.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!r.e.rRel?(r.s.cRel?"":"$")+ns(r.s.c)+":"+(r.e.cRel?"":"$")+ns(r.e.c):r.s.c==0&&!r.s.cRel&&r.e.c==(e.biff>=12?16383:255)&&!r.e.cRel?(r.s.rRel?"":"$")+zs(r.s.r)+":"+(r.e.rRel?"":"$")+zs(r.e.r):cv(r.s,e.biff)+":"+cv(r.e,e.biff)}function wB(r){return parseInt(Gie(r),10)-1}function zs(r){return""+(r+1)}function Qie(r){return r.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Gie(r){return r.replace(/\$(\d+)$/,"$1")}function _B(r){for(var e=zie(r),t=0,n=0;n!==e.length;++n)t=26*t+e.charCodeAt(n)-64;return t-1}function ns(r){if(r<0)throw new Error("invalid column "+r);var e="";for(++r;r;r=Math.floor((r-1)/26))e=String.fromCharCode((r-1)%26+65)+e;return e}function Hie(r){return r.replace(/^([A-Z])/,"$$$1")}function zie(r){return r.replace(/^\$([A-Z])/,"$1")}function qie(r){return r.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ho(r){for(var e=0,t=0,n=0;n<r.length;++n){var i=r.charCodeAt(n);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:e-1}}function nn(r){for(var e=r.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(r.r+1)}function Tp(r){var e=r.indexOf(":");return e==-1?{s:Ho(r),e:Ho(r)}:{s:Ho(r.slice(0,e)),e:Ho(r.slice(e+1))}}function Xn(r,e){return typeof e>"u"||typeof e=="number"?Xn(r.s,r.e):(typeof r!="string"&&(r=nn(r)),typeof e!="string"&&(e=nn(e)),r==e?r:r+":"+e)}function ma(r){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,n=0,i=0,a=r.length;for(t=0;n<a&&!((i=r.charCodeAt(n)-64)<1||i>26);++n)t=26*t+i;for(e.s.c=--t,t=0;n<a&&!((i=r.charCodeAt(n)-48)<0||i>9);++n)t=10*t+i;if(e.s.r=--t,n===a||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,t=0;n!=a&&!((i=r.charCodeAt(n)-64)<1||i>26);++n)t=26*t+i;for(e.e.c=--t,t=0;n!=a&&!((i=r.charCodeAt(n)-48)<0||i>9);++n)t=10*t+i;return e.e.r=--t,e}function TI(r,e){var t=r.t=="d"&&e instanceof Date;if(r.z!=null)try{return r.w=Cu(r.z,t?Vo(e):e)}catch{}try{return r.w=Cu((r.XF||{}).numFmtId||(t?14:0),t?Vo(e):e)}catch{return""+e}}function sf(r,e,t){return r==null||r.t==null||r.t=="z"?"":r.w!==void 0?r.w:(r.t=="d"&&!r.z&&t&&t.dateNF&&(r.z=t.dateNF),r.t=="e"?s0[r.v]||r.v:e==null?TI(r,r.v):TI(r,e))}function HA(r,e){var t=e&&e.sheet?e.sheet:"Sheet1",n={};return n[t]=r,{SheetNames:[t],Sheets:n}}function gU(r,e,t){var n=t||{},i=r?Array.isArray(r):n.dense,a=r||(i?[]:{}),s=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")s=n.origin;else{var l=typeof n.origin=="string"?Ho(n.origin):n.origin;s=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var c=ma(a["!ref"]);u.s.c=c.s.c,u.s.r=c.s.r,u.e.c=Math.max(u.e.c,c.e.c),u.e.r=Math.max(u.e.r,c.e.r),s==-1&&(u.e.r=s=c.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=e[h].length;++f)if(!(typeof e[h][f]>"u")){var A={v:e[h][f]},d=s+h,p=o+f;if(u.s.r>d&&(u.s.r=d),u.s.c>p&&(u.s.c=p),u.e.r<d&&(u.e.r=d),u.e.c<p&&(u.e.c=p),e[h][f]&&typeof e[h][f]=="object"&&!Array.isArray(e[h][f])&&!(e[h][f]instanceof Date))A=e[h][f];else if(Array.isArray(A.v)&&(A.f=e[h][f][1],A.v=A.v[0]),A.v===null)if(A.f)A.t="n";else if(n.nullError)A.t="e",A.v=0;else if(n.sheetStubs)A.t="z";else continue;else typeof A.v=="number"?A.t="n":typeof A.v=="boolean"?A.t="b":A.v instanceof Date?(A.z=n.dateNF||gn[14],n.cellDates?(A.t="d",A.w=Cu(A.z,Vo(A.v))):(A.t="n",A.v=Vo(A.v),A.w=Cu(A.z,A.v))):A.t="s";if(i)a[d]||(a[d]=[]),a[d][p]&&a[d][p].z&&(A.z=a[d][p].z),a[d][p]=A;else{var y=nn({c:p,r:d});a[y]&&a[y].z&&(A.z=a[y].z),a[y]=A}}}return u.s.c<1e7&&(a["!ref"]=Xn(u)),a}function Np(r,e){return gU(null,r,e)}function jie(r){return r.read_shift(4,"i")}function xo(r){var e=r.read_shift(4);return e===0?"":r.read_shift(e,"dbcs")}function $ie(r){return{ich:r.read_shift(2),ifnt:r.read_shift(2)}}function EB(r,e){var t=r.l,n=r.read_shift(1),i=xo(r),a=[],s={t:i,h:i};if(n&1){for(var o=r.read_shift(4),l=0;l!=o;++l)a.push($ie(r));s.r=a}else s.r=[{ich:0,ifnt:0}];return r.l=t+e,s}var Kie=EB;function Tu(r){var e=r.read_shift(4),t=r.read_shift(2);return t+=r.read_shift(1)<<16,r.l++,{c:e,iStyleRef:t}}function i0(r){var e=r.read_shift(2);return e+=r.read_shift(1)<<16,r.l++,{c:-1,iStyleRef:e}}var Vie=xo;function bB(r){var e=r.read_shift(4);return e===0||e===4294967295?"":r.read_shift(e,"dbcs")}var Wie=xo,yS=bB;function CB(r){var e=r.slice(r.l,r.l+4),t=e[0]&1,n=e[0]&2;r.l+=4;var i=n===0?Zx([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):md(e,0)>>2;return t?i/100:i}function pU(r){var e={s:{},e:{}};return e.s.r=r.read_shift(4),e.e.r=r.read_shift(4),e.s.c=r.read_shift(4),e.e.c=r.read_shift(4),e}var a0=pU;function Ao(r){if(r.length-r.l<8)throw"XLS Xnum Buffer underflow";return r.read_shift(8,"f")}function Yie(r){var e={},t=r.read_shift(1),n=t>>>1,i=r.read_shift(1),a=r.read_shift(2,"i"),s=r.read_shift(1),o=r.read_shift(1),l=r.read_shift(1);switch(r.l++,n){case 0:e.auto=1;break;case 1:e.index=i;var u=Id[i];u&&(e.rgb=Wv(u));break;case 2:e.rgb=Wv([s,o,l]);break;case 3:e.theme=i;break}return a!=0&&(e.tint=a>0?a/32767:a/32768),e}function Xie(r){var e=r.read_shift(1);r.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function mU(r,e){var t={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=r.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return t[r.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return r.l-=4,r.read_shift(0,e==1?"lpstr":"lpwstr")}function Zie(r){return mU(r,1)}function Jie(r){return mU(r,2)}var SB=2,cl=3,Hy=11,NI=12,Jx=19,zy=64,eae=65,tae=71,rae=4108,nae=4126,ys=80,vU=81,iae=[ys,vU],aae={1:{n:"CodePage",t:SB},2:{n:"Category",t:ys},3:{n:"PresentationFormat",t:ys},4:{n:"ByteCount",t:cl},5:{n:"LineCount",t:cl},6:{n:"ParagraphCount",t:cl},7:{n:"SlideCount",t:cl},8:{n:"NoteCount",t:cl},9:{n:"HiddenCount",t:cl},10:{n:"MultimediaClipCount",t:cl},11:{n:"ScaleCrop",t:Hy},12:{n:"HeadingPairs",t:rae},13:{n:"TitlesOfParts",t:nae},14:{n:"Manager",t:ys},15:{n:"Company",t:ys},16:{n:"LinksUpToDate",t:Hy},17:{n:"CharacterCount",t:cl},19:{n:"SharedDoc",t:Hy},22:{n:"HyperlinksChanged",t:Hy},23:{n:"AppVersion",t:cl,p:"version"},24:{n:"DigSig",t:eae},26:{n:"ContentType",t:ys},27:{n:"ContentStatus",t:ys},28:{n:"Language",t:ys},29:{n:"Version",t:ys},255:{},2147483648:{n:"Locale",t:Jx},2147483651:{n:"Behavior",t:Jx},1919054434:{}},sae={1:{n:"CodePage",t:SB},2:{n:"Title",t:ys},3:{n:"Subject",t:ys},4:{n:"Author",t:ys},5:{n:"Keywords",t:ys},6:{n:"Comments",t:ys},7:{n:"Template",t:ys},8:{n:"LastAuthor",t:ys},9:{n:"RevNumber",t:ys},10:{n:"EditTime",t:zy},11:{n:"LastPrinted",t:zy},12:{n:"CreatedDate",t:zy},13:{n:"ModifiedDate",t:zy},14:{n:"PageCount",t:cl},15:{n:"WordCount",t:cl},16:{n:"CharCount",t:cl},17:{n:"Thumbnail",t:tae},18:{n:"Application",t:ys},19:{n:"DocSecurity",t:cl},255:{},2147483648:{n:"Locale",t:Jx},2147483651:{n:"Behavior",t:Jx},1919054434:{}},II={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},oae=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function lae(r){return r.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var uae=lae([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Id=Hs(uae),s0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},yU={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},FI={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function cae(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function hae(r){var e=cae();if(!r||!r.match)return e;var t={};if((r.match(Co)||[]).forEach(function(n){var i=Kr(n);switch(i[0].replace(yie,"<")){case"<?xml":break;case"<Types":e.xmlns=i["xmlns"+(i[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":t[i.Extension]=i.ContentType;break;case"<Override":e[FI[i.ContentType]]!==void 0&&e[FI[i.ContentType]].push(i.PartName);break}}),e.xmlns!==Iie.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=t,delete e.calcchains,e}var yg={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function xS(r){var e=r.lastIndexOf("/");return r.slice(0,e+1)+"_rels/"+r.slice(e+1)+".rels"}function hv(r,e){var t={"!id":{}};if(!r)return t;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(r.match(Co)||[]).forEach(function(i){var a=Kr(i);if(a[0]==="<Relationship"){var s={};s.Type=a.Type,s.Target=a.Target,s.Id=a.Id,a.TargetMode&&(s.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:km(a.Target,e);t[o]=s,n[a.Id]=s}}),t["!id"]=n,t}var fae="application/vnd.oasis.opendocument.spreadsheet";function Aae(r,e){for(var t=yB(r),n,i;n=Kv.exec(t);)switch(n[3]){case"manifest":break;case"file-entry":if(i=Kr(n[0],!1),i.path=="/"&&i.type!==fae)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}var fv=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],dae=function(){for(var r=new Array(fv.length),e=0;e<fv.length;++e){var t=fv[e],n="(?:"+t[0].slice(0,t[0].indexOf(":"))+":)"+t[0].slice(t[0].indexOf(":")+1);r[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return r}();function xU(r){var e={};r=qi(r);for(var t=0;t<fv.length;++t){var n=fv[t],i=r.match(dae[t]);i!=null&&i.length>0&&(e[n[1]]=ri(i[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=Ss(e[n[1]]))}return e}var gae=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function wU(r,e,t,n){var i=[];if(typeof r=="string")i=wI(r,n);else for(var a=0;a<r.length;++a)i=i.concat(r[a].map(function(c){return{v:c}}));var s=typeof e=="string"?wI(e,n).map(function(c){return c.v}):e,o=0,l=0;if(s.length>0)for(var u=0;u!==i.length;u+=2){switch(l=+i[u+1].v,i[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":t.Worksheets=l,t.SheetNames=s.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":t.NamedRanges=l,t.DefinedNames=s.slice(o,o+l);break;case"Charts":case"Diagramme":t.Chartsheets=l,t.ChartNames=s.slice(o,o+l);break}o+=l}}function pae(r,e,t){var n={};return e||(e={}),r=qi(r),gae.forEach(function(i){var a=(r.match($v(i[0]))||[])[1];switch(i[2]){case"string":a&&(e[i[1]]=ri(a));break;case"bool":e[i[1]]=a==="true";break;case"raw":var s=r.match(new RegExp("<"+i[0]+"[^>]*>([\\s\\S]*?)</"+i[0]+">"));s&&s.length>0&&(n[i[1]]=s[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&wU(n.HeadingPairs,n.TitlesOfParts,e,t),e}var mae=/<[^>]+>[^<]*/g;function vae(r,e){var t={},n="",i=r.match(mae);if(i)for(var a=0;a!=i.length;++a){var s=i[a],o=Kr(s);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=ri(o.name);break;case"</property>":n=null;break;default:if(s.indexOf("<vt:")===0){var l=s.split(">"),u=l[0].slice(4),c=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":t[n]=ri(c);break;case"bool":t[n]=Ji(c);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":t[n]=parseInt(c,10);break;case"r4":case"r8":case"decimal":t[n]=parseFloat(c);break;case"filetime":case"date":t[n]=Ss(c);break;case"cy":case"error":t[n]=ri(c);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",s,u,l)}}else if(s.slice(0,2)!=="</"){if(e.WTF)throw new Error(s)}}}return t}var yae={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Sb;function xae(r,e,t){Sb||(Sb=pB(yae)),e=Sb[e]||e,r[e]=t}function BB(r){var e=r.read_shift(4),t=r.read_shift(4);return new Date((t/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function _U(r,e,t){var n=r.l,i=r.read_shift(0,"lpstr-cp");if(t)for(;r.l-n&3;)++r.l;return i}function EU(r,e,t){var n=r.read_shift(0,"lpwstr");return n}function bU(r,e,t){return e===31?EU(r):_U(r,e,t)}function wS(r,e,t){return bU(r,e,t===!1?0:4)}function wae(r,e){if(!e)throw new Error("VtUnalignedString must have positive length");return bU(r,e,0)}function _ae(r){for(var e=r.read_shift(4),t=[],n=0;n!=e;++n){var i=r.l;t[n]=r.read_shift(0,"lpwstr").replace(qo,""),r.l-i&2&&(r.l+=2)}return t}function Eae(r){for(var e=r.read_shift(4),t=[],n=0;n!=e;++n)t[n]=r.read_shift(0,"lpstr-cp").replace(qo,"");return t}function bae(r){var e=r.l,t=ew(r,vU);r[r.l]==0&&r[r.l+1]==0&&r.l-e&2&&(r.l+=2);var n=ew(r,cl);return[t,n]}function Cae(r){for(var e=r.read_shift(4),t=[],n=0;n<e/2;++n)t.push(bae(r));return t}function MI(r,e){for(var t=r.read_shift(4),n={},i=0;i!=t;++i){var a=r.read_shift(4),s=r.read_shift(4);n[a]=r.read_shift(s,e===1200?"utf16le":"utf8").replace(qo,"").replace(Dm,"!"),e===1200&&s%2&&(r.l+=2)}return r.l&3&&(r.l=r.l>>3<<2),n}function CU(r){var e=r.read_shift(4),t=r.slice(r.l,r.l+e);return r.l+=e,(e&3)>0&&(r.l+=4-(e&3)&3),t}function Sae(r){var e={};return e.Size=r.read_shift(4),r.l+=e.Size+3-(e.Size-1)%4,e}function ew(r,e,t){var n=r.read_shift(2),i,a=t||{};if(r.l+=2,e!==NI&&n!==e&&iae.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===NI?n:e){case 2:return i=r.read_shift(2,"i"),a.raw||(r.l+=2),i;case 3:return i=r.read_shift(4,"i"),i;case 11:return r.read_shift(4)!==0;case 19:return i=r.read_shift(4),i;case 30:return _U(r,n,4).replace(qo,"");case 31:return EU(r);case 64:return BB(r);case 65:return CU(r);case 71:return Sae(r);case 80:return wS(r,n,!a.raw).replace(qo,"");case 81:return wae(r,n).replace(qo,"");case 4108:return Cae(r);case 4126:case 4127:return n==4127?_ae(r):Eae(r);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function LI(r,e){var t=r.l,n=r.read_shift(4),i=r.read_shift(4),a=[],s=0,o=0,l=-1,u={};for(s=0;s!=i;++s){var c=r.read_shift(4),h=r.read_shift(4);a[s]=[c,h+t]}a.sort(function(w,x){return w[1]-x[1]});var f={};for(s=0;s!=i;++s){if(r.l!==a[s][1]){var A=!0;if(s>0&&e)switch(e[a[s-1][0]].t){case 2:r.l+2===a[s][1]&&(r.l+=2,A=!1);break;case 80:r.l<=a[s][1]&&(r.l=a[s][1],A=!1);break;case 4108:r.l<=a[s][1]&&(r.l=a[s][1],A=!1);break}if((!e||s==0)&&r.l<=a[s][1]&&(A=!1,r.l=a[s][1]),A)throw new Error("Read Error: Expected address "+a[s][1]+" at "+r.l+" :"+s)}if(e){var d=e[a[s][0]];if(f[d.n]=ew(r,d.t,{raw:!0}),d.p==="version"&&(f[d.n]=String(f[d.n]>>16)+"."+("0000"+String(f[d.n]&65535)).slice(-4)),d.n=="CodePage")switch(f[d.n]){case 0:f[d.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:ec(o=f[d.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+f[d.n])}}else if(a[s][0]===1){if(o=f.CodePage=ew(r,SB),ec(o),l!==-1){var p=r.l;r.l=a[l][1],u=MI(r,o),r.l=p}}else if(a[s][0]===0){if(o===0){l=s,r.l=a[s+1][1];continue}u=MI(r,o)}else{var y=u[a[s][0]],v;switch(r[r.l]){case 65:r.l+=4,v=CU(r);break;case 30:r.l+=4,v=wS(r,r[r.l-4]).replace(/\u0000+$/,"");break;case 31:r.l+=4,v=wS(r,r[r.l-4]).replace(/\u0000+$/,"");break;case 3:r.l+=4,v=r.read_shift(4,"i");break;case 19:r.l+=4,v=r.read_shift(4);break;case 5:r.l+=4,v=r.read_shift(8,"f");break;case 11:r.l+=4,v=Ea(r,4);break;case 64:r.l+=4,v=Ss(BB(r));break;default:throw new Error("unparsed value: "+r[r.l])}f[y]=v}}return r.l=t+n,f}function DI(r,e,t){var n=r.content;if(!n)return{};Rs(n,0);var i,a,s,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),c=n.read_shift(16);if(c!==Yn.utils.consts.HEADER_CLSID&&c!==t)throw new Error("Bad PropertySet CLSID "+c);if(i=n.read_shift(4),i!==1&&i!==2)throw new Error("Unrecognized #Sets: "+i);if(a=n.read_shift(16),o=n.read_shift(4),i===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);i===2&&(s=n.read_shift(16),l=n.read_shift(4));var h=LI(n,e),f={SystemIdentifier:u};for(var A in h)f[A]=h[A];if(f.FMTID=a,i===1)return f;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var d;try{d=LI(n,null)}catch{}for(A in d)f[A]=d[A];return f.FMTID=[a,s],f}function Vf(r,e){return r.read_shift(e),null}function Bae(r,e,t){for(var n=[],i=r.l+e;r.l<i;)n.push(t(r,i-r.l));if(i!==r.l)throw new Error("Slurp error");return n}function Ea(r,e){return r.read_shift(e)===1}function Pa(r){return r.read_shift(2,"u")}function SU(r,e){return Bae(r,e,Pa)}function Tae(r){var e=r.read_shift(1),t=r.read_shift(1);return t===1?e:e===1}function N1(r,e,t){var n=r.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var a=r.read_shift(1);a&&(i="dbcs-cont")}else t.biff==12&&(i="wstr");t.biff>=2&&t.biff<=5&&(i="cpstr");var s=n?r.read_shift(n,i):"";return s}function Nae(r){var e=r.read_shift(2),t=r.read_shift(1),n=t&4,i=t&8,a=1+(t&1),s=0,o,l={};i&&(s=r.read_shift(2)),n&&(o=r.read_shift(4));var u=a==2?"dbcs-cont":"sbcs-cont",c=e===0?"":r.read_shift(e,u);return i&&(r.l+=4*s),n&&(r.l+=o),l.t=c,i||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function qd(r,e,t){var n;if(t){if(t.biff>=2&&t.biff<=5)return r.read_shift(e,"cpstr");if(t.biff>=12)return r.read_shift(e,"dbcs-cont")}var i=r.read_shift(1);return i===0?n=r.read_shift(e,"sbcs-cont"):n=r.read_shift(e,"dbcs-cont"),n}function I1(r,e,t){var n=r.read_shift(t&&t.biff==2?1:2);return n===0?(r.l++,""):qd(r,n,t)}function o0(r,e,t){if(t.biff>5)return I1(r,e,t);var n=r.read_shift(1);return n===0?(r.l++,""):r.read_shift(n,t.biff<=4||!r.lens?"cpstr":"sbcs-cont")}function Iae(r){var e=r.read_shift(1);r.l++;var t=r.read_shift(2);return r.l+=2,[e,t]}function Fae(r){var e=r.read_shift(4),t=r.l,n=!1;e>24&&(r.l+=e-24,r.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),r.l=t);var i=r.read_shift((n?e-24:e)>>1,"utf16le").replace(qo,"");return n&&(r.l+=24),i}function Mae(r){for(var e=r.read_shift(2),t="";e-- >0;)t+="../";var n=r.read_shift(0,"lpstr-ansi");if(r.l+=2,r.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var i=r.read_shift(4);if(i===0)return t+n.replace(/\\/g,"/");var a=r.read_shift(4);if(r.read_shift(2)!=3)throw new Error("Bad FileMoniker");var s=r.read_shift(a>>1,"utf16le").replace(qo,"");return t+s}function Lae(r,e){var t=r.read_shift(16);switch(t){case"e0c9ea79f9bace118c8200aa004ba90b":return Fae(r);case"0303000000000000c000000000000046":return Mae(r);default:throw new Error("Unsupported Moniker "+t)}}function qy(r){var e=r.read_shift(4),t=e>0?r.read_shift(e,"utf16le").replace(qo,""):"";return t}function Dae(r,e){var t=r.l+e,n=r.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var i=r.read_shift(2);r.l+=2;var a,s,o,l,u="",c,h;i&16&&(a=qy(r,t-r.l)),i&128&&(s=qy(r,t-r.l)),(i&257)===257&&(o=qy(r,t-r.l)),(i&257)===1&&(l=Lae(r,t-r.l)),i&8&&(u=qy(r,t-r.l)),i&32&&(c=r.read_shift(16)),i&64&&(h=BB(r)),r.l=t;var f=s||o||l||"";f&&u&&(f+="#"+u),f||(f="#"+u),i&2&&f.charAt(0)=="/"&&f.charAt(1)!="/"&&(f="file://"+f);var A={Target:f};return c&&(A.guid=c),h&&(A.time=h),a&&(A.Tooltip=a),A}function BU(r){var e=r.read_shift(1),t=r.read_shift(1),n=r.read_shift(1),i=r.read_shift(1);return[e,t,n,i]}function TU(r,e){var t=BU(r);return t[3]=0,t}function uh(r){var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(2);return{r:e,c:t,ixfe:n}}function kae(r){var e=r.read_shift(2),t=r.read_shift(2);return r.l+=8,{type:e,flags:t}}function Rae(r,e,t){return e===0?"":o0(r,e,t)}function Oae(r,e,t){var n=t.biff>8?4:2,i=r.read_shift(n),a=r.read_shift(n,"i"),s=r.read_shift(n,"i");return[i,a,s]}function NU(r){var e=r.read_shift(2),t=CB(r);return[e,t]}function Pae(r,e,t){r.l+=4,e-=4;var n=r.l+e,i=N1(r,e,t),a=r.read_shift(2);if(n-=r.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return r.l+=a,i}function S_(r){var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(2),i=r.read_shift(2);return{s:{c:n,r:e},e:{c:i,r:t}}}function IU(r){var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(1),i=r.read_shift(1);return{s:{c:n,r:e},e:{c:i,r:t}}}var Uae=IU;function FU(r){r.l+=4;var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(2);return r.l+=12,[t,e,n]}function Qae(r){var e={};return r.l+=4,r.l+=16,e.fSharedNote=r.read_shift(2),r.l+=4,e}function Gae(r){var e={};return r.l+=4,r.cf=r.read_shift(2),e}function Js(r){r.l+=2,r.l+=r.read_shift(2)}var Hae={0:Js,4:Js,5:Js,6:Js,7:Gae,8:Js,9:Js,10:Js,11:Js,12:Js,13:Qae,14:Js,15:Js,16:Js,17:Js,18:Js,19:Js,20:Js,21:FU};function zae(r,e){for(var t=r.l+e,n=[];r.l<t;){var i=r.read_shift(2);r.l-=2;try{n.push(Hae[i](r,t-r.l))}catch{return r.l=t,n}}return r.l!=t&&(r.l=t),n}function jy(r,e){var t={BIFFVer:0,dt:0};switch(t.BIFFVer=r.read_shift(2),e-=2,e>=2&&(t.dt=r.read_shift(2),r.l-=2),t.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+t.BIFFVer)}return r.read_shift(e),t}function qae(r,e){return e===0||r.read_shift(2),1200}function jae(r,e,t){if(t.enc)return r.l+=e,"";var n=r.l,i=o0(r,0,t);return r.read_shift(e+n-r.l),i}function $ae(r,e,t){var n=t&&t.biff==8||e==2?r.read_shift(2):(r.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Kae(r,e,t){var n=r.read_shift(4),i=r.read_shift(1)&3,a=r.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var s=N1(r,0,t);return s.length===0&&(s="Sheet1"),{pos:n,hs:i,dt:a,name:s}}function Vae(r,e){for(var t=r.l+e,n=r.read_shift(4),i=r.read_shift(4),a=[],s=0;s!=i&&r.l<t;++s)a.push(Nae(r));return a.Count=n,a.Unique=i,a}function Wae(r,e){var t={};return t.dsst=r.read_shift(2),r.l+=e-2,t}function Yae(r){var e={};e.r=r.read_shift(2),e.c=r.read_shift(2),e.cnt=r.read_shift(2)-e.c;var t=r.read_shift(2);r.l+=4;var n=r.read_shift(1);return r.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=t/20),e}function Xae(r){var e=kae(r);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var t=r.read_shift(4);return t!==0}function Zae(r){return r.read_shift(2),r.read_shift(4)}function kI(r,e,t){var n=0;t&&t.biff==2||(n=r.read_shift(2));var i=r.read_shift(2);t&&t.biff==2&&(n=1-(i>>15),i&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,i]}function Jae(r){var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(2),i=r.read_shift(2),a=r.read_shift(2),s=r.read_shift(2),o=r.read_shift(2),l=r.read_shift(2),u=r.read_shift(2);return{Pos:[e,t],Dim:[n,i],Flags:a,CurTab:s,FirstTab:o,Selected:l,TabRatio:u}}function ese(r,e,t){if(t&&t.biff>=2&&t.biff<5)return{};var n=r.read_shift(2);return{RTL:n&64}}function tse(){}function rse(r,e,t){var n={dyHeight:r.read_shift(2),fl:r.read_shift(2)};switch(t&&t.biff||8){case 2:break;case 3:case 4:r.l+=2;break;default:r.l+=10;break}return n.name=N1(r,0,t),n}function nse(r){var e=uh(r);return e.isst=r.read_shift(4),e}function ise(r,e,t){t.biffguess&&t.biff==2&&(t.biff=5);var n=r.l+e,i=uh(r);t.biff==2&&r.l++;var a=I1(r,n-r.l,t);return i.val=a,i}function ase(r,e,t){var n=r.read_shift(2),i=o0(r,0,t);return[n,i]}var sse=o0;function RI(r,e,t){var n=r.l+e,i=t.biff==8||!t.biff?4:2,a=r.read_shift(i),s=r.read_shift(i),o=r.read_shift(2),l=r.read_shift(2);return r.l=n,{s:{r:a,c:o},e:{r:s,c:l}}}function ose(r){var e=r.read_shift(2),t=r.read_shift(2),n=NU(r);return{r:e,c:t,ixfe:n[0],rknum:n[1]}}function lse(r,e){for(var t=r.l+e-2,n=r.read_shift(2),i=r.read_shift(2),a=[];r.l<t;)a.push(NU(r));if(r.l!==t)throw new Error("MulRK read error");var s=r.read_shift(2);if(a.length!=s-i+1)throw new Error("MulRK length mismatch");return{r:n,c:i,C:s,rkrec:a}}function use(r,e){for(var t=r.l+e-2,n=r.read_shift(2),i=r.read_shift(2),a=[];r.l<t;)a.push(r.read_shift(2));if(r.l!==t)throw new Error("MulBlank read error");var s=r.read_shift(2);if(a.length!=s-i+1)throw new Error("MulBlank length mismatch");return{r:n,c:i,C:s,ixfe:a}}function cse(r,e,t,n){var i={},a=r.read_shift(4),s=r.read_shift(4),o=r.read_shift(4),l=r.read_shift(2);return i.patternType=oae[o>>26],n.cellStyles&&(i.alc=a&7,i.fWrap=a>>3&1,i.alcV=a>>4&7,i.fJustLast=a>>7&1,i.trot=a>>8&255,i.cIndent=a>>16&15,i.fShrinkToFit=a>>20&1,i.iReadOrder=a>>22&2,i.fAtrNum=a>>26&1,i.fAtrFnt=a>>27&1,i.fAtrAlc=a>>28&1,i.fAtrBdr=a>>29&1,i.fAtrPat=a>>30&1,i.fAtrProt=a>>31&1,i.dgLeft=s&15,i.dgRight=s>>4&15,i.dgTop=s>>8&15,i.dgBottom=s>>12&15,i.icvLeft=s>>16&127,i.icvRight=s>>23&127,i.grbitDiag=s>>30&3,i.icvTop=o&127,i.icvBottom=o>>7&127,i.icvDiag=o>>14&127,i.dgDiag=o>>21&15,i.icvFore=l&127,i.icvBack=l>>7&127,i.fsxButton=l>>14&1),i}function hse(r,e,t){var n={};return n.ifnt=r.read_shift(2),n.numFmtId=r.read_shift(2),n.flags=r.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=cse(r,e,n.fStyle,t),n}function fse(r){r.l+=4;var e=[r.read_shift(2),r.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function OI(r,e,t){var n=uh(r);(t.biff==2||e==9)&&++r.l;var i=Tae(r);return n.val=i,n.t=i===!0||i===!1?"b":"e",n}function Ase(r,e,t){t.biffguess&&t.biff==2&&(t.biff=5);var n=uh(r),i=Ao(r);return n.val=i,n}var PI=Rae;function dse(r,e,t){var n=r.l+e,i=r.read_shift(2),a=r.read_shift(2);if(t.sbcch=a,a==1025||a==14849)return[a,i];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var s=qd(r,a),o=[];n>r.l;)o.push(I1(r));return[a,i,s,o]}function UI(r,e,t){var n=r.read_shift(2),i,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return t.sbcch===14849&&(i=Pae(r,e-2,t)),a.body=i||r.read_shift(e-2),typeof i=="string"&&(a.Name=i),a}var gse=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function QI(r,e,t){var n=r.l+e,i=r.read_shift(2),a=r.read_shift(1),s=r.read_shift(1),o=r.read_shift(t&&t.biff==2?1:2),l=0;(!t||t.biff>=5)&&(t.biff!=5&&(r.l+=2),l=r.read_shift(2),t.biff==5&&(r.l+=2),r.l+=4);var u=qd(r,s,t);i&32&&(u=gse[u.charCodeAt(0)]);var c=n-r.l;t&&t.biff==2&&--c;var h=n==r.l||o===0||!(c>0)?[]:Yue(r,c,t,o);return{chKey:a,Name:u,itab:l,rgce:h}}function MU(r,e,t){if(t.biff<8)return pse(r,e,t);for(var n=[],i=r.l+e,a=r.read_shift(t.biff>8?4:2);a--!==0;)n.push(Oae(r,t.biff>8?12:6,t));if(r.l!=i)throw new Error("Bad ExternSheet: "+r.l+" != "+i);return n}function pse(r,e,t){r[r.l+1]==3&&r[r.l]++;var n=N1(r,e,t);return n.charCodeAt(0)==3?n.slice(1):n}function mse(r,e,t){if(t.biff<8){r.l+=e;return}var n=r.read_shift(2),i=r.read_shift(2),a=qd(r,n,t),s=qd(r,i,t);return[a,s]}function vse(r,e,t){var n=IU(r);r.l++;var i=r.read_shift(1);return e-=8,[Xue(r,e,t),i,n]}function GI(r,e,t){var n=Uae(r);switch(t.biff){case 2:r.l++,e-=7;break;case 3:case 4:r.l+=2,e-=8;break;default:r.l+=6,e-=12}return[n,Vue(r,e,t)]}function yse(r){var e=r.read_shift(4)!==0,t=r.read_shift(4)!==0,n=r.read_shift(4);return[e,t,n]}function xse(r,e,t){if(!(t.biff<8)){var n=r.read_shift(2),i=r.read_shift(2),a=r.read_shift(2),s=r.read_shift(2),o=o0(r,0,t);return t.biff<8&&r.read_shift(1),[{r:n,c:i},o,s,a]}}function wse(r,e,t){return xse(r,e,t)}function _se(r,e){for(var t=[],n=r.read_shift(2);n--;)t.push(S_(r));return t}function Ese(r,e,t){if(t&&t.biff<8)return Cse(r,e,t);var n=FU(r),i=zae(r,e-22,n[1]);return{cmo:n,ft:i}}var bse={8:function(r,e){var t=r.l+e;r.l+=10;var n=r.read_shift(2);r.l+=4,r.l+=2,r.l+=2,r.l+=2,r.l+=4;var i=r.read_shift(1);return r.l+=i,r.l=t,{fmt:n}}};function Cse(r,e,t){r.l+=4;var n=r.read_shift(2),i=r.read_shift(2),a=r.read_shift(2);r.l+=2,r.l+=2,r.l+=2,r.l+=2,r.l+=2,r.l+=2,r.l+=2,r.l+=2,r.l+=2,r.l+=6,e-=36;var s=[];return s.push((bse[n]||Eo)(r,e,t)),{cmo:[i,n,a],ft:s}}function Sse(r,e,t){var n=r.l,i="";try{r.l+=4;var a=(t.lastobj||{cmo:[0,0]}).cmo[1],s;[0,5,7,11,12,14].indexOf(a)==-1?r.l+=6:s=Iae(r,6,t);var o=r.read_shift(2);r.read_shift(2),Pa(r,2);var l=r.read_shift(2);r.l+=l;for(var u=1;u<r.lens.length-1;++u){if(r.l-n!=r.lens[u])throw new Error("TxO: bad continue record");var c=r[r.l],h=qd(r,r.lens[u+1]-r.lens[u]-1);if(i+=h,i.length>=(c?o:2*o))break}if(i.length!==o&&i.length!==o*2)throw new Error("cchText: "+o+" != "+i.length);return r.l=n+e,{t:i}}catch{return r.l=n+e,{t:i}}}function Bse(r,e){var t=S_(r);r.l+=16;var n=Dae(r,e-24);return[t,n]}function Tse(r,e){r.read_shift(2);var t=S_(r),n=r.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(qo,""),[t,n]}function Nse(r){var e=[0,0],t;return t=r.read_shift(2),e[0]=II[t]||t,t=r.read_shift(2),e[1]=II[t]||t,e}function Ise(r){for(var e=r.read_shift(2),t=[];e-- >0;)t.push(TU(r));return t}function Fse(r){for(var e=r.read_shift(2),t=[];e-- >0;)t.push(TU(r));return t}function Mse(r){r.l+=2;var e={cxfs:0,crc:0};return e.cxfs=r.read_shift(2),e.crc=r.read_shift(4),e}function LU(r,e,t){if(!t.cellStyles)return Eo(r,e);var n=t&&t.biff>=12?4:2,i=r.read_shift(n),a=r.read_shift(n),s=r.read_shift(n),o=r.read_shift(n),l=r.read_shift(2);n==2&&(r.l+=2);var u={s:i,e:a,w:s,ixfe:o,flags:l};return(t.biff>=5||!t.biff)&&(u.level=l>>8&7),u}function Lse(r,e){var t={};return e<32||(r.l+=16,t.header=Ao(r),t.footer=Ao(r),r.l+=2),t}function Dse(r,e,t){var n={area:!1};if(t.biff!=5)return r.l+=e,n;var i=r.read_shift(1);return r.l+=3,i&16&&(n.area=!0),n}var kse=uh,Rse=SU,Ose=I1;function Pse(r){var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(4),i={fmt:e,env:t,len:n,data:r.slice(r.l,r.l+n)};return r.l+=n,i}function Use(r,e,t){t.biffguess&&t.biff==5&&(t.biff=2);var n=uh(r);++r.l;var i=o0(r,e-7,t);return n.t="str",n.val=i,n}function Qse(r){var e=uh(r);++r.l;var t=Ao(r);return e.t="n",e.val=t,e}function Gse(r){var e=uh(r);++r.l;var t=r.read_shift(2);return e.t="n",e.val=t,e}function Hse(r){var e=r.read_shift(1);return e===0?(r.l++,""):r.read_shift(e,"sbcs-cont")}function zse(r,e){r.l+=6,r.l+=2,r.l+=1,r.l+=3,r.l+=1,r.l+=e-13}function qse(r,e,t){var n=r.l+e,i=uh(r),a=r.read_shift(2),s=qd(r,a,t);return r.l=n,i.t="str",i.val=s,i}var jse=[2,3,48,49,131,139,140,245],HI=function(){var r={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=pB({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(o,l){var u=[],c=NA(1);switch(l.type){case"base64":c=Xu($l(o));break;case"binary":c=Xu(o);break;case"buffer":case"array":c=o;break}Rs(c,0);var h=c.read_shift(1),f=!!(h&136),A=!1,d=!1;switch(h){case 2:break;case 3:break;case 48:A=!0,f=!0;break;case 49:A=!0,f=!0;break;case 131:break;case 139:break;case 140:d=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var p=0,y=521;h==2&&(p=c.read_shift(2)),c.l+=3,h!=2&&(p=c.read_shift(4)),p>1048576&&(p=1e6),h!=2&&(y=c.read_shift(2));var v=c.read_shift(2),w=l.codepage||1252;h!=2&&(c.l+=16,c.read_shift(1),c[c.l]!==0&&(w=r[c[c.l]]),c.l+=1,c.l+=2),d&&(c.l+=36);for(var x=[],b={},C=Math.min(c.length,h==2?521:y-10-(A?264:0)),S=d?32:11;c.l<C&&c[c.l]!=13;)switch(b={},b.name=qv.utils.decode(w,c.slice(c.l,c.l+S)).replace(/[\u0000\r\n].*$/g,""),c.l+=S,b.type=String.fromCharCode(c.read_shift(1)),h!=2&&!d&&(b.offset=c.read_shift(4)),b.len=c.read_shift(1),h==2&&(b.offset=c.read_shift(2)),b.dec=c.read_shift(1),b.name.length&&x.push(b),h!=2&&(c.l+=d?13:14),b.type){case"B":(!A||b.len!=8)&&l.WTF&&console.log("Skipping "+b.name+":"+b.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+b.name+":"+b.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+b.type)}if(c[c.l]!==13&&(c.l=y-1),c.read_shift(1)!==13)throw new Error("DBF Terminator not found "+c.l+" "+c[c.l]);c.l=y;var I=0,B=0;for(u[0]=[],B=0;B!=x.length;++B)u[0][B]=x[B].name;for(;p-- >0;){if(c[c.l]===42){c.l+=v;continue}for(++c.l,u[++I]=[],B=0,B=0;B!=x.length;++B){var T=c.slice(c.l,c.l+x[B].len);c.l+=x[B].len,Rs(T,0);var M=qv.utils.decode(w,T);switch(x[B].type){case"C":M.trim().length&&(u[I][B]=M.replace(/\s+$/,""));break;case"D":M.length===8?u[I][B]=new Date(+M.slice(0,4),+M.slice(4,6)-1,+M.slice(6,8)):u[I][B]=M;break;case"F":u[I][B]=parseFloat(M.trim());break;case"+":case"I":u[I][B]=d?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(M.trim().toUpperCase()){case"Y":case"T":u[I][B]=!0;break;case"N":case"F":u[I][B]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+M+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));u[I][B]="##MEMO##"+(d?parseInt(M.trim(),10):T.read_shift(4));break;case"N":M=M.replace(/\u0000/g,"").trim(),M&&M!="."&&(u[I][B]=+M||0);break;case"@":u[I][B]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":u[I][B]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":u[I][B]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[I][B]=-T.read_shift(-8,"f");break;case"B":if(A&&x[B].len==8){u[I][B]=T.read_shift(8,"f");break}case"G":case"P":T.l+=x[B].len;break;case"0":if(x[B].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+x[B].type)}}}if(h!=2&&c.l<c.length&&c[c.l++]!=26)throw new Error("DBF EOF Marker missing "+(c.l-1)+" of "+c.length+" "+c[c.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=x,u}function n(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var c=Np(t(o,u),u);return c["!cols"]=u.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete u.DBF,c}function i(o,l){try{return HA(n(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function s(o,l){var u=l||{};if(+u.codepage>=0&&ec(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var c=vS(),h=BS(o,{header:1,raw:!0,cellDates:!0}),f=h[0],A=h.slice(1),d=o["!cols"]||[],p=0,y=0,v=0,w=1;for(p=0;p<f.length;++p){if(((d[p]||{}).DBF||{}).name){f[p]=d[p].DBF.name,++v;continue}if(f[p]!=null){if(++v,typeof f[p]=="number"&&(f[p]=f[p].toString(10)),typeof f[p]!="string")throw new Error("DBF Invalid column name "+f[p]+" |"+typeof f[p]+"|");if(f.indexOf(f[p])!==p){for(y=0;y<1024;++y)if(f.indexOf(f[p]+"_"+y)==-1){f[p]+="_"+y;break}}}}var x=ma(o["!ref"]),b=[],C=[],S=[];for(p=0;p<=x.e.c-x.s.c;++p){var I="",B="",T=0,M=[];for(y=0;y<A.length;++y)A[y][p]!=null&&M.push(A[y][p]);if(M.length==0||f[p]==null){b[p]="?";continue}for(y=0;y<M.length;++y){switch(typeof M[y]){case"number":B="B";break;case"string":B="C";break;case"boolean":B="L";break;case"object":B=M[y]instanceof Date?"D":"C";break;default:B="C"}T=Math.max(T,String(M[y]).length),I=I&&I!=B?"C":B}T>250&&(T=250),B=((d[p]||{}).DBF||{}).type,B=="C"&&d[p].DBF.len>T&&(T=d[p].DBF.len),I=="B"&&B=="N"&&(I="N",S[p]=d[p].DBF.dec,T=d[p].DBF.len),C[p]=I=="C"||B=="N"?T:a[I]||0,w+=C[p],b[p]=I}var F=c.next(32);for(F.write_shift(4,318902576),F.write_shift(4,A.length),F.write_shift(2,296+32*v),F.write_shift(2,w),p=0;p<4;++p)F.write_shift(4,0);for(F.write_shift(4,0|(+e[MP]||3)<<8),p=0,y=0;p<f.length;++p)if(f[p]!=null){var N=c.next(32),O=(f[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);N.write_shift(1,O,"sbcs"),N.write_shift(1,b[p]=="?"?"C":b[p],"sbcs"),N.write_shift(4,y),N.write_shift(1,C[p]||a[b[p]]||0),N.write_shift(1,S[p]||0),N.write_shift(1,2),N.write_shift(4,0),N.write_shift(1,0),N.write_shift(4,0),N.write_shift(4,0),y+=C[p]||a[b[p]]||0}var L=c.next(264);for(L.write_shift(4,13),p=0;p<65;++p)L.write_shift(4,0);for(p=0;p<A.length;++p){var G=c.next(w);for(G.write_shift(1,0),y=0;y<f.length;++y)if(f[y]!=null)switch(b[y]){case"L":G.write_shift(1,A[p][y]==null?63:A[p][y]?84:70);break;case"B":G.write_shift(8,A[p][y]||0,"f");break;case"N":var R="0";for(typeof A[p][y]=="number"&&(R=A[p][y].toFixed(S[y]||0)),v=0;v<C[y]-R.length;++v)G.write_shift(1,32);G.write_shift(1,R,"sbcs");break;case"D":A[p][y]?(G.write_shift(4,("0000"+A[p][y].getFullYear()).slice(-4),"sbcs"),G.write_shift(2,("00"+(A[p][y].getMonth()+1)).slice(-2),"sbcs"),G.write_shift(2,("00"+A[p][y].getDate()).slice(-2),"sbcs")):G.write_shift(8,"00000000","sbcs");break;case"C":var U=String(A[p][y]!=null?A[p][y]:"").slice(0,C[y]);for(G.write_shift(1,U,"sbcs"),v=0;v<C[y]-U.length;++v)G.write_shift(1,32);break}}return c.next(1).write_shift(1,26),c.end()}return{to_workbook:i,to_sheet:n,from_sheet:s}}(),$se=function(){var r={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+ih(r).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(f,A){var d=r[A];return typeof d=="number"?iI(d):d},n=function(f,A,d){var p=A.charCodeAt(0)-32<<4|d.charCodeAt(0)-48;return p==59?f:iI(p)};r["|"]=254;function i(f,A){switch(A.type){case"base64":return a($l(f),A);case"binary":return a(f,A);case"buffer":return a(zn&&Buffer.isBuffer(f)?f.toString("binary"):n0(f),A);case"array":return a(zd(f),A)}throw new Error("Unrecognized type "+A.type)}function a(f,A){var d=f.split(/[\n\r]+/),p=-1,y=-1,v=0,w=0,x=[],b=[],C=null,S={},I=[],B=[],T=[],M=0,F;for(+A.codepage>=0&&ec(+A.codepage);v!==d.length;++v){M=0;var N=d[v].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,t),O=N.replace(/;;/g,"\0").split(";").map(function(J){return J.replace(/\u0000/g,";")}),L=O[0],G;if(N.length>0)switch(L){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":O[1].charAt(0)=="P"&&b.push(N.slice(3).replace(/;;/g,";"));break;case"C":var R=!1,U=!1,W=!1,Q=!1,re=-1,oe=-1;for(w=1;w<O.length;++w)switch(O[w].charAt(0)){case"A":break;case"X":y=parseInt(O[w].slice(1))-1,U=!0;break;case"Y":for(p=parseInt(O[w].slice(1))-1,U||(y=0),F=x.length;F<=p;++F)x[F]=[];break;case"K":G=O[w].slice(1),G.charAt(0)==='"'?G=G.slice(1,G.length-1):G==="TRUE"?G=!0:G==="FALSE"?G=!1:isNaN(ic(G))?isNaN(rp(G).getDate())||(G=Ss(G)):(G=ic(G),C!==null&&Bp(C)&&(G=C_(G))),R=!0;break;case"E":Q=!0;var P=Lg(O[w].slice(1),{r:p,c:y});x[p][y]=[x[p][y],P];break;case"S":W=!0,x[p][y]=[x[p][y],"S5S"];break;case"G":break;case"R":re=parseInt(O[w].slice(1))-1;break;case"C":oe=parseInt(O[w].slice(1))-1;break;default:if(A&&A.WTF)throw new Error("SYLK bad record "+N)}if(R&&(x[p][y]&&x[p][y].length==2?x[p][y][0]=G:x[p][y]=G,C=null),W){if(Q)throw new Error("SYLK shared formula cannot have own formula");var z=re>-1&&x[re][oe];if(!z||!z[1])throw new Error("SYLK shared formula cannot find base");x[p][y][1]=zU(z[1],{r:p-re,c:y-oe})}break;case"F":var K=0;for(w=1;w<O.length;++w)switch(O[w].charAt(0)){case"X":y=parseInt(O[w].slice(1))-1,++K;break;case"Y":for(p=parseInt(O[w].slice(1))-1,F=x.length;F<=p;++F)x[F]=[];break;case"M":M=parseInt(O[w].slice(1))/20;break;case"F":break;case"G":break;case"P":C=b[parseInt(O[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=O[w].slice(1).split(" "),F=parseInt(T[0],10);F<=parseInt(T[1],10);++F)M=parseInt(T[2],10),B[F-1]=M===0?{hidden:!0}:{wch:M},np(B[F-1]);break;case"C":y=parseInt(O[w].slice(1))-1,B[y]||(B[y]={});break;case"R":p=parseInt(O[w].slice(1))-1,I[p]||(I[p]={}),M>0?(I[p].hpt=M,I[p].hpx=Yv(M)):M===0&&(I[p].hidden=!0);break;default:if(A&&A.WTF)throw new Error("SYLK bad record "+N)}K<1&&(C=null);break;default:if(A&&A.WTF)throw new Error("SYLK bad record "+N)}}return I.length>0&&(S["!rows"]=I),B.length>0&&(S["!cols"]=B),A&&A.sheetRows&&(x=x.slice(0,A.sheetRows)),[x,S]}function s(f,A){var d=i(f,A),p=d[0],y=d[1],v=Np(p,A);return ih(y).forEach(function(w){v[w]=y[w]}),v}function o(f,A){return HA(s(f,A),A)}function l(f,A,d,p){var y="C;Y"+(d+1)+";X"+(p+1)+";K";switch(f.t){case"n":y+=f.v||0,f.f&&!f.F&&(y+=";E"+Mle(f.f,{r:d,c:p}));break;case"b":y+=f.v?"TRUE":"FALSE";break;case"e":y+=f.w||f.v;break;case"d":y+='"'+(f.w||f.v)+'"';break;case"s":y+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function u(f,A){A.forEach(function(d,p){var y="F;W"+(p+1)+" "+(p+1)+" ";d.hidden?y+="0":(typeof d.width=="number"&&!d.wpx&&(d.wpx=rw(d.width)),typeof d.wpx=="number"&&!d.wch&&(d.wch=nw(d.wpx)),typeof d.wch=="number"&&(y+=Math.round(d.wch))),y.charAt(y.length-1)!=" "&&f.push(y)})}function c(f,A){A.forEach(function(d,p){var y="F;";d.hidden?y+="M0;":d.hpt?y+="M"+20*d.hpt+";":d.hpx&&(y+="M"+20*QU(d.hpx)+";"),y.length>2&&f.push(y+"R"+(p+1))})}function h(f,A){var d=["ID;PWXL;N;E"],p=[],y=ma(f["!ref"]),v,w=Array.isArray(f),x=`\r
`;d.push("P;PGeneral"),d.push("F;P0;DG0G8;M255"),f["!cols"]&&u(d,f["!cols"]),f["!rows"]&&c(d,f["!rows"]),d.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" "));for(var b=y.s.r;b<=y.e.r;++b)for(var C=y.s.c;C<=y.e.c;++C){var S=nn({r:b,c:C});v=w?(f[b]||[])[C]:f[S],!(!v||v.v==null&&(!v.f||v.F))&&p.push(l(v,f,b,C))}return d.join(x)+x+p.join(x)+x+"E"+x}return{to_workbook:o,to_sheet:s,from_sheet:h}}(),Kse=function(){function r(a,s){switch(s.type){case"base64":return e($l(a),s);case"binary":return e(a,s);case"buffer":return e(zn&&Buffer.isBuffer(a)?a.toString("binary"):n0(a),s);case"array":return e(zd(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){for(var o=a.split(`
`),l=-1,u=-1,c=0,h=[];c!==o.length;++c){if(o[c].trim()==="BOT"){h[++l]=[],u=0;continue}if(!(l<0)){var f=o[c].trim().split(","),A=f[0],d=f[1];++c;for(var p=o[c]||"";(p.match(/["]/g)||[]).length&1&&c<o.length-1;)p+=`
`+o[++c];switch(p=p.trim(),+A){case-1:if(p==="BOT"){h[++l]=[],u=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?h[l][u]=!0:p==="FALSE"?h[l][u]=!1:isNaN(ic(d))?isNaN(rp(d).getDate())?h[l][u]=d:h[l][u]=Ss(d):h[l][u]=ic(d),++u;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),h[l][u++]=p!==""?p:null;break}if(p==="EOD")break}}return s&&s.sheetRows&&(h=h.slice(0,s.sheetRows)),h}function t(a,s){return Np(r(a,s),s)}function n(a,s){return HA(t(a,s),s)}var i=function(){var a=function(l,u,c,h,f){l.push(u),l.push(c+","+h),l.push('"'+f.replace(/"/g,'""')+'"')},s=function(l,u,c,h){l.push(u+","+c),l.push(u==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(l){var u=[],c=ma(l["!ref"]),h,f=Array.isArray(l);a(u,"TABLE",0,1,"sheetjs"),a(u,"VECTORS",0,c.e.r-c.s.r+1,""),a(u,"TUPLES",0,c.e.c-c.s.c+1,""),a(u,"DATA",0,0,"");for(var A=c.s.r;A<=c.e.r;++A){s(u,-1,0,"BOT");for(var d=c.s.c;d<=c.e.c;++d){var p=nn({r:A,c:d});if(h=f?(l[A]||[])[d]:l[p],!h){s(u,1,0,"");continue}switch(h.t){case"n":var y=h.w;!y&&h.v!=null&&(y=h.v),y==null?h.f&&!h.F?s(u,1,0,"="+h.f):s(u,1,0,""):s(u,0,y,"V");break;case"b":s(u,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":s(u,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=Cu(h.z||gn[14],Vo(Ss(h.v)))),s(u,0,h.w,"V");break;default:s(u,1,0,"")}}}s(u,-1,0,"EOD");var v=`\r
`,w=u.join(v);return w}}();return{to_workbook:n,to_sheet:t,from_sheet:i}}(),Vse=function(){function r(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(h,f){for(var A=h.split(`
`),d=-1,p=-1,y=0,v=[];y!==A.length;++y){var w=A[y].trim().split(":");if(w[0]==="cell"){var x=Ho(w[1]);if(v.length<=x.r)for(d=v.length;d<=x.r;++d)v[d]||(v[d]=[]);switch(d=x.r,p=x.c,w[2]){case"t":v[d][p]=r(w[3]);break;case"v":v[d][p]=+w[3];break;case"vtf":var b=w[w.length-1];case"vtc":switch(w[3]){case"nl":v[d][p]=!!+w[4];break;default:v[d][p]=+w[4];break}w[2]=="vtf"&&(v[d][p]=[v[d][p],b])}}}return f&&f.sheetRows&&(v=v.slice(0,f.sheetRows)),v}function n(h,f){return Np(t(h,f),f)}function i(h,f){return HA(n(h,f),f)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(h){if(!h||!h["!ref"])return"";for(var f=[],A=[],d,p="",y=Tp(h["!ref"]),v=Array.isArray(h),w=y.s.r;w<=y.e.r;++w)for(var x=y.s.c;x<=y.e.c;++x)if(p=nn({r:w,c:x}),d=v?(h[w]||[])[x]:h[p],!(!d||d.v==null||d.t==="z")){switch(A=["cell",p,"t"],d.t){case"s":case"str":A.push(e(d.v));break;case"n":d.f?(A[2]="vtf",A[3]="n",A[4]=d.v,A[5]=e(d.f)):(A[2]="v",A[3]=d.v);break;case"b":A[2]="vt"+(d.f?"f":"c"),A[3]="nl",A[4]=d.v?"1":"0",A[5]=e(d.f||(d.v?"TRUE":"FALSE"));break;case"d":var b=Vo(Ss(d.v));A[2]="vtc",A[3]="nd",A[4]=""+b,A[5]=d.w||Cu(d.z||gn[14],b);break;case"e":continue}f.push(A.join(":"))}return f.push("sheet:c:"+(y.e.c-y.s.c+1)+":r:"+(y.e.r-y.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function c(h){return[a,s,o,s,u(h),l].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:c}}(),Vv=function(){function r(c,h,f,A,d){d.raw?h[f][A]=c:c===""||(c==="TRUE"?h[f][A]=!0:c==="FALSE"?h[f][A]=!1:isNaN(ic(c))?isNaN(rp(c).getDate())?h[f][A]=c:h[f][A]=Ss(c):h[f][A]=ic(c))}function e(c,h){var f=h||{},A=[];if(!c||c.length===0)return A;for(var d=c.split(/[\r\n]/),p=d.length-1;p>=0&&d[p].length===0;)--p;for(var y=10,v=0,w=0;w<=p;++w)v=d[w].indexOf(" "),v==-1?v=d[w].length:v++,y=Math.max(y,v);for(w=0;w<=p;++w){A[w]=[];var x=0;for(r(d[w].slice(0,y).trim(),A,w,x,f),x=1;x<=(d[w].length-y)/10+1;++x)r(d[w].slice(y+(x-1)*10,y+x*10).trim(),A,w,x,f)}return f.sheetRows&&(A=A.slice(0,f.sheetRows)),A}var t={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(c){for(var h={},f=!1,A=0,d=0;A<c.length;++A)(d=c.charCodeAt(A))==34?f=!f:!f&&d in t&&(h[d]=(h[d]||0)+1);d=[];for(A in h)Object.prototype.hasOwnProperty.call(h,A)&&d.push([h[A],A]);if(!d.length){h=n;for(A in h)Object.prototype.hasOwnProperty.call(h,A)&&d.push([h[A],A])}return d.sort(function(p,y){return p[0]-y[0]||n[p[1]]-n[y[1]]}),t[d.pop()[1]]||44}function a(c,h){var f=h||{},A="",d=f.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};c.slice(0,4)=="sep="?c.charCodeAt(5)==13&&c.charCodeAt(6)==10?(A=c.charAt(4),c=c.slice(7)):c.charCodeAt(5)==13||c.charCodeAt(5)==10?(A=c.charAt(4),c=c.slice(6)):A=i(c.slice(0,1024)):f&&f.FS?A=f.FS:A=i(c.slice(0,1024));var y=0,v=0,w=0,x=0,b=0,C=A.charCodeAt(0),S=!1,I=0,B=c.charCodeAt(0);c=c.replace(/\r\n/mg,`
`);var T=f.dateNF!=null?aie(f.dateNF):null;function M(){var F=c.slice(x,b),N={};if(F.charAt(0)=='"'&&F.charAt(F.length-1)=='"'&&(F=F.slice(1,-1).replace(/""/g,'"')),F.length===0)N.t="z";else if(f.raw)N.t="s",N.v=F;else if(F.trim().length===0)N.t="s",N.v=F;else if(F.charCodeAt(0)==61)F.charCodeAt(1)==34&&F.charCodeAt(F.length-1)==34?(N.t="s",N.v=F.slice(2,-1).replace(/""/g,'"')):Dle(F)?(N.t="n",N.f=F.slice(1)):(N.t="s",N.v=F);else if(F=="TRUE")N.t="b",N.v=!0;else if(F=="FALSE")N.t="b",N.v=!1;else if(!isNaN(w=ic(F)))N.t="n",f.cellText!==!1&&(N.w=F),N.v=w;else if(!isNaN(rp(F).getDate())||T&&F.match(T)){N.z=f.dateNF||gn[14];var O=0;T&&F.match(T)&&(F=sie(F,f.dateNF,F.match(T)||[]),O=1),f.cellDates?(N.t="d",N.v=Ss(F,O)):(N.t="n",N.v=Vo(Ss(F,O))),f.cellText!==!1&&(N.w=Cu(N.z,N.v instanceof Date?Vo(N.v):N.v)),f.cellNF||delete N.z}else N.t="s",N.v=F;if(N.t=="z"||(f.dense?(d[y]||(d[y]=[]),d[y][v]=N):d[nn({c:v,r:y})]=N),x=b+1,B=c.charCodeAt(x),p.e.c<v&&(p.e.c=v),p.e.r<y&&(p.e.r=y),I==C)++v;else if(v=0,++y,f.sheetRows&&f.sheetRows<=y)return!0}e:for(;b<c.length;++b)switch(I=c.charCodeAt(b)){case 34:B===34&&(S=!S);break;case C:case 10:case 13:if(!S&&M())break e;break}return b-x>0&&M(),d["!ref"]=Xn(p),d}function s(c,h){return!(h&&h.PRN)||h.FS||c.slice(0,4)=="sep="||c.indexOf("	")>=0||c.indexOf(",")>=0||c.indexOf(";")>=0?a(c,h):Np(e(c,h),h)}function o(c,h){var f="",A=h.type=="string"?[0,0,0,0]:kB(c,h);switch(h.type){case"base64":f=$l(c);break;case"binary":f=c;break;case"buffer":h.codepage==65001?f=c.toString("utf8"):h.codepage&&typeof qv<"u"||(f=zn&&Buffer.isBuffer(c)?c.toString("binary"):n0(c));break;case"array":f=zd(c);break;case"string":f=c;break;default:throw new Error("Unrecognized type "+h.type)}return A[0]==239&&A[1]==187&&A[2]==191?f=qi(f.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?f=qi(f):h.type=="binary"&&typeof qv<"u",f.slice(0,19)=="socialcalc:version:"?Vse.to_sheet(h.type=="string"?f:qi(f),h):s(f,h)}function l(c,h){return HA(o(c,h),h)}function u(c){for(var h=[],f=ma(c["!ref"]),A,d=Array.isArray(c),p=f.s.r;p<=f.e.r;++p){for(var y=[],v=f.s.c;v<=f.e.c;++v){var w=nn({r:p,c:v});if(A=d?(c[p]||[])[v]:c[w],!A||A.v==null){y.push("          ");continue}for(var x=(A.w||(sf(A),A.w)||"").slice(0,10);x.length<10;)x+=" ";y.push(x+(v===0?" ":""))}h.push(y.join(""))}return h.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}}();function Wse(r,e){var t=e||{},n=!!t.WTF;t.WTF=!0;try{var i=$se.to_workbook(r,t);return t.WTF=n,i}catch(a){if(t.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return Vv.to_workbook(r,e)}}var Av=function(){function r(P,z,K){if(P){Rs(P,P.l||0);for(var J=K.Enum||re;P.l<P.length;){var ue=P.read_shift(2),ge=J[ue]||J[65535],le=P.read_shift(2),me=P.l+le,xe=ge.f&&ge.f(P,le,K);if(P.l=me,z(xe,ge,ue))return}}}function e(P,z){switch(z.type){case"base64":return t(Xu($l(P)),z);case"binary":return t(Xu(P),z);case"buffer":case"array":return t(P,z)}throw"Unsupported type "+z.type}function t(P,z){if(!P)return P;var K=z||{},J=K.dense?[]:{},ue="Sheet1",ge="",le=0,me={},xe=[],Be=[],Y={s:{r:0,c:0},e:{r:0,c:0}},Ve=K.sheetRows||0;if(P[2]==0&&(P[3]==8||P[3]==9)&&P.length>=16&&P[14]==5&&P[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(P[2]==2)K.Enum=re,r(P,function(he,ne,ae){switch(ae){case 0:K.vers=he,he>=4096&&(K.qpro=!0);break;case 6:Y=he;break;case 204:he&&(ge=he);break;case 222:ge=he;break;case 15:case 51:K.qpro||(he[1].v=he[1].v.slice(1));case 13:case 14:case 16:ae==14&&(he[2]&112)==112&&(he[2]&15)>1&&(he[2]&15)<15&&(he[1].z=K.dateNF||gn[14],K.cellDates&&(he[1].t="d",he[1].v=C_(he[1].v))),K.qpro&&he[3]>le&&(J["!ref"]=Xn(Y),me[ue]=J,xe.push(ue),J=K.dense?[]:{},Y={s:{r:0,c:0},e:{r:0,c:0}},le=he[3],ue=ge||"Sheet"+(le+1),ge="");var _e=K.dense?(J[he[0].r]||[])[he[0].c]:J[nn(he[0])];if(_e){_e.t=he[1].t,_e.v=he[1].v,he[1].z!=null&&(_e.z=he[1].z),he[1].f!=null&&(_e.f=he[1].f);break}K.dense?(J[he[0].r]||(J[he[0].r]=[]),J[he[0].r][he[0].c]=he[1]):J[nn(he[0])]=he[1];break}},K);else if(P[2]==26||P[2]==14)K.Enum=oe,P[2]==14&&(K.qpro=!0,P.l=0),r(P,function(he,ne,ae){switch(ae){case 204:ue=he;break;case 22:he[1].v=he[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(he[3]>le&&(J["!ref"]=Xn(Y),me[ue]=J,xe.push(ue),J=K.dense?[]:{},Y={s:{r:0,c:0},e:{r:0,c:0}},le=he[3],ue="Sheet"+(le+1)),Ve>0&&he[0].r>=Ve)break;K.dense?(J[he[0].r]||(J[he[0].r]=[]),J[he[0].r][he[0].c]=he[1]):J[nn(he[0])]=he[1],Y.e.c<he[0].c&&(Y.e.c=he[0].c),Y.e.r<he[0].r&&(Y.e.r=he[0].r);break;case 27:he[14e3]&&(Be[he[14e3][0]]=he[14e3][1]);break;case 1537:Be[he[0]]=he[1],he[0]==le&&(ue=he[1]);break}},K);else throw new Error("Unrecognized LOTUS BOF "+P[2]);if(J["!ref"]=Xn(Y),me[ge||ue]=J,xe.push(ge||ue),!Be.length)return{SheetNames:xe,Sheets:me};for(var te={},se=[],Z=0;Z<Be.length;++Z)me[xe[Z]]?(se.push(Be[Z]||xe[Z]),te[Be[Z]]=me[Be[Z]]||me[xe[Z]]):(se.push(Be[Z]),te[Be[Z]]={"!ref":"A1"});return{SheetNames:se,Sheets:te}}function n(P,z){var K=z||{};if(+K.codepage>=0&&ec(+K.codepage),K.type=="string")throw new Error("Cannot write WK1 to JS string");var J=vS(),ue=ma(P["!ref"]),ge=Array.isArray(P),le=[];Qu(J,0,a(1030)),Qu(J,6,l(ue));for(var me=Math.min(ue.e.r,8191),xe=ue.s.r;xe<=me;++xe)for(var Be=zs(xe),Y=ue.s.c;Y<=ue.e.c;++Y){xe===ue.s.r&&(le[Y]=ns(Y));var Ve=le[Y]+Be,te=ge?(P[xe]||[])[Y]:P[Ve];if(!(!te||te.t=="z"))if(te.t=="n")(te.v|0)==te.v&&te.v>=-32768&&te.v<=32767?Qu(J,13,A(xe,Y,te.v)):Qu(J,14,p(xe,Y,te.v));else{var se=sf(te);Qu(J,15,h(xe,Y,se.slice(0,239)))}}return Qu(J,1),J.end()}function i(P,z){var K=z||{};if(+K.codepage>=0&&ec(+K.codepage),K.type=="string")throw new Error("Cannot write WK3 to JS string");var J=vS();Qu(J,0,s(P));for(var ue=0,ge=0;ue<P.SheetNames.length;++ue)(P.Sheets[P.SheetNames[ue]]||{})["!ref"]&&Qu(J,27,Q(P.SheetNames[ue],ge++));var le=0;for(ue=0;ue<P.SheetNames.length;++ue){var me=P.Sheets[P.SheetNames[ue]];if(!(!me||!me["!ref"])){for(var xe=ma(me["!ref"]),Be=Array.isArray(me),Y=[],Ve=Math.min(xe.e.r,8191),te=xe.s.r;te<=Ve;++te)for(var se=zs(te),Z=xe.s.c;Z<=xe.e.c;++Z){te===xe.s.r&&(Y[Z]=ns(Z));var he=Y[Z]+se,ne=Be?(me[te]||[])[Z]:me[he];if(!(!ne||ne.t=="z"))if(ne.t=="n")Qu(J,23,M(te,Z,le,ne.v));else{var ae=sf(ne);Qu(J,22,I(te,Z,le,ae.slice(0,239)))}}++le}}return Qu(J,1),J.end()}function a(P){var z=Xa(2);return z.write_shift(2,P),z}function s(P){var z=Xa(26);z.write_shift(2,4096),z.write_shift(2,4),z.write_shift(4,0);for(var K=0,J=0,ue=0,ge=0;ge<P.SheetNames.length;++ge){var le=P.SheetNames[ge],me=P.Sheets[le];if(!(!me||!me["!ref"])){++ue;var xe=Tp(me["!ref"]);K<xe.e.r&&(K=xe.e.r),J<xe.e.c&&(J=xe.e.c)}}return K>8191&&(K=8191),z.write_shift(2,K),z.write_shift(1,ue),z.write_shift(1,J),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(1,1),z.write_shift(1,2),z.write_shift(4,0),z.write_shift(4,0),z}function o(P,z,K){var J={s:{c:0,r:0},e:{c:0,r:0}};return z==8&&K.qpro?(J.s.c=P.read_shift(1),P.l++,J.s.r=P.read_shift(2),J.e.c=P.read_shift(1),P.l++,J.e.r=P.read_shift(2),J):(J.s.c=P.read_shift(2),J.s.r=P.read_shift(2),z==12&&K.qpro&&(P.l+=2),J.e.c=P.read_shift(2),J.e.r=P.read_shift(2),z==12&&K.qpro&&(P.l+=2),J.s.c==65535&&(J.s.c=J.e.c=J.s.r=J.e.r=0),J)}function l(P){var z=Xa(8);return z.write_shift(2,P.s.c),z.write_shift(2,P.s.r),z.write_shift(2,P.e.c),z.write_shift(2,P.e.r),z}function u(P,z,K){var J=[{c:0,r:0},{t:"n",v:0},0,0];return K.qpro&&K.vers!=20768?(J[0].c=P.read_shift(1),J[3]=P.read_shift(1),J[0].r=P.read_shift(2),P.l+=2):(J[2]=P.read_shift(1),J[0].c=P.read_shift(2),J[0].r=P.read_shift(2)),J}function c(P,z,K){var J=P.l+z,ue=u(P,z,K);if(ue[1].t="s",K.vers==20768){P.l++;var ge=P.read_shift(1);return ue[1].v=P.read_shift(ge,"utf8"),ue}return K.qpro&&P.l++,ue[1].v=P.read_shift(J-P.l,"cstr"),ue}function h(P,z,K){var J=Xa(7+K.length);J.write_shift(1,255),J.write_shift(2,z),J.write_shift(2,P),J.write_shift(1,39);for(var ue=0;ue<J.length;++ue){var ge=K.charCodeAt(ue);J.write_shift(1,ge>=128?95:ge)}return J.write_shift(1,0),J}function f(P,z,K){var J=u(P,z,K);return J[1].v=P.read_shift(2,"i"),J}function A(P,z,K){var J=Xa(7);return J.write_shift(1,255),J.write_shift(2,z),J.write_shift(2,P),J.write_shift(2,K,"i"),J}function d(P,z,K){var J=u(P,z,K);return J[1].v=P.read_shift(8,"f"),J}function p(P,z,K){var J=Xa(13);return J.write_shift(1,255),J.write_shift(2,z),J.write_shift(2,P),J.write_shift(8,K,"f"),J}function y(P,z,K){var J=P.l+z,ue=u(P,z,K);if(ue[1].v=P.read_shift(8,"f"),K.qpro)P.l=J;else{var ge=P.read_shift(2);b(P.slice(P.l,P.l+ge),ue),P.l+=ge}return ue}function v(P,z,K){var J=z&32768;return z&=-32769,z=(J?P:0)+(z>=8192?z-16384:z),(J?"":"$")+(K?ns(z):zs(z))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},x=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function b(P,z){Rs(P,0);for(var K=[],J=0,ue="",ge="",le="",me="";P.l<P.length;){var xe=P[P.l++];switch(xe){case 0:K.push(P.read_shift(8,"f"));break;case 1:ge=v(z[0].c,P.read_shift(2),!0),ue=v(z[0].r,P.read_shift(2),!1),K.push(ge+ue);break;case 2:{var Be=v(z[0].c,P.read_shift(2),!0),Y=v(z[0].r,P.read_shift(2),!1);ge=v(z[0].c,P.read_shift(2),!0),ue=v(z[0].r,P.read_shift(2),!1),K.push(Be+Y+":"+ge+ue)}break;case 3:if(P.l<P.length){console.error("WK1 premature formula end");return}break;case 4:K.push("("+K.pop()+")");break;case 5:K.push(P.read_shift(2));break;case 6:{for(var Ve="";xe=P[P.l++];)Ve+=String.fromCharCode(xe);K.push('"'+Ve.replace(/"/g,'""')+'"')}break;case 8:K.push("-"+K.pop());break;case 23:K.push("+"+K.pop());break;case 22:K.push("NOT("+K.pop()+")");break;case 20:case 21:me=K.pop(),le=K.pop(),K.push(["AND","OR"][xe-20]+"("+le+","+me+")");break;default:if(xe<32&&x[xe])me=K.pop(),le=K.pop(),K.push(le+x[xe]+me);else if(w[xe]){if(J=w[xe][1],J==69&&(J=P[P.l++]),J>K.length){console.error("WK1 bad formula parse 0x"+xe.toString(16)+":|"+K.join("|")+"|");return}var te=K.slice(-J);K.length-=J,K.push(w[xe][0]+"("+te.join(",")+")")}else return xe<=7?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=24?console.error("WK1 unsupported op "+xe.toString(16)):xe<=30?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=115?console.error("WK1 unsupported function opcode "+xe.toString(16)):console.error("WK1 unrecognized opcode "+xe.toString(16))}}K.length==1?z[1].f=""+K[0]:console.error("WK1 bad formula parse |"+K.join("|")+"|")}function C(P){var z=[{c:0,r:0},{t:"n",v:0},0];return z[0].r=P.read_shift(2),z[3]=P[P.l++],z[0].c=P[P.l++],z}function S(P,z){var K=C(P);return K[1].t="s",K[1].v=P.read_shift(z-4,"cstr"),K}function I(P,z,K,J){var ue=Xa(6+J.length);ue.write_shift(2,P),ue.write_shift(1,K),ue.write_shift(1,z),ue.write_shift(1,39);for(var ge=0;ge<J.length;++ge){var le=J.charCodeAt(ge);ue.write_shift(1,le>=128?95:le)}return ue.write_shift(1,0),ue}function B(P,z){var K=C(P);K[1].v=P.read_shift(2);var J=K[1].v>>1;if(K[1].v&1)switch(J&7){case 0:J=(J>>3)*5e3;break;case 1:J=(J>>3)*500;break;case 2:J=(J>>3)/20;break;case 3:J=(J>>3)/200;break;case 4:J=(J>>3)/2e3;break;case 5:J=(J>>3)/2e4;break;case 6:J=(J>>3)/16;break;case 7:J=(J>>3)/64;break}return K[1].v=J,K}function T(P,z){var K=C(P),J=P.read_shift(4),ue=P.read_shift(4),ge=P.read_shift(2);if(ge==65535)return J===0&&ue===3221225472?(K[1].t="e",K[1].v=15):J===0&&ue===3489660928?(K[1].t="e",K[1].v=42):K[1].v=0,K;var le=ge&32768;return ge=(ge&32767)-16446,K[1].v=(1-le*2)*(ue*Math.pow(2,ge+32)+J*Math.pow(2,ge)),K}function M(P,z,K,J){var ue=Xa(14);if(ue.write_shift(2,P),ue.write_shift(1,K),ue.write_shift(1,z),J==0)return ue.write_shift(4,0),ue.write_shift(4,0),ue.write_shift(2,65535),ue;var ge=0,le=0,me=0,xe=0;return J<0&&(ge=1,J=-J),le=Math.log2(J)|0,J/=Math.pow(2,le-31),xe=J>>>0,xe&2147483648||(J/=2,++le,xe=J>>>0),J-=xe,xe|=2147483648,xe>>>=0,J*=Math.pow(2,32),me=J>>>0,ue.write_shift(4,me),ue.write_shift(4,xe),le+=16383+(ge?32768:0),ue.write_shift(2,le),ue}function F(P,z){var K=T(P);return P.l+=z-14,K}function N(P,z){var K=C(P),J=P.read_shift(4);return K[1].v=J>>6,K}function O(P,z){var K=C(P),J=P.read_shift(8,"f");return K[1].v=J,K}function L(P,z){var K=O(P);return P.l+=z-10,K}function G(P,z){return P[P.l+z-1]==0?P.read_shift(z,"cstr"):""}function R(P,z){var K=P[P.l++];K>z-1&&(K=z-1);for(var J="";J.length<K;)J+=String.fromCharCode(P[P.l++]);return J}function U(P,z,K){if(!(!K.qpro||z<21)){var J=P.read_shift(1);P.l+=17,P.l+=1,P.l+=2;var ue=P.read_shift(z-21,"cstr");return[J,ue]}}function W(P,z){for(var K={},J=P.l+z;P.l<J;){var ue=P.read_shift(2);if(ue==14e3){for(K[ue]=[0,""],K[ue][0]=P.read_shift(2);P[P.l];)K[ue][1]+=String.fromCharCode(P[P.l]),P.l++;P.l++}}return K}function Q(P,z){var K=Xa(5+P.length);K.write_shift(2,14e3),K.write_shift(2,z);for(var J=0;J<P.length;++J){var ue=P.charCodeAt(J);K[K.l++]=ue>127?95:ue}return K[K.l++]=0,K}var re={0:{n:"BOF",f:Pa},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:d},15:{n:"LABEL",f:c},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:c},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:G},222:{n:"SHEETNAMELP",f:R},65535:{n:""}},oe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:S},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:B},25:{n:"FORMULA19",f:F},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:W},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:N},38:{n:"??"},39:{n:"NUMBER27",f:O},40:{n:"FORMULA28",f:L},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:G},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:U},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:e}}();function Yse(r){var e={},t=r.match(Co),n=0,i=!1;if(t)for(;n!=t.length;++n){var a=Kr(t[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;e.cp=hB[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=a.val;break;case"<sz":e.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":a.rgb&&(e.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a[0].charCodeAt(1)!==47&&!i)throw new Error("Unrecognized rich format "+a[0])}}return e}var Xse=function(){var r=$v("t"),e=$v("rPr");function t(a){var s=a.match(r);if(!s)return{t:"s",v:""};var o={t:"s",v:ri(s[1])},l=a.match(e);return l&&(o.s=Yse(l[1])),o}var n=/<(?:\w+:)?r>/g,i=/<\/(?:\w+:)?r>/;return function(s){return s.replace(n,"").split(i).map(t).filter(function(o){return o.v})}}(),Zse=function(){var e=/(\r\n|\n)/g;function t(i,a,s){var o=[];i.u&&o.push("text-decoration: underline;"),i.uval&&o.push("text-underline-style:"+i.uval+";"),i.sz&&o.push("font-size:"+i.sz+"pt;"),i.outline&&o.push("text-effect: outline;"),i.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),i.b&&(a.push("<b>"),s.push("</b>")),i.i&&(a.push("<i>"),s.push("</i>")),i.strike&&(a.push("<s>"),s.push("</s>"));var l=i.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),s.push("</"+l+">")),s.push("</span>"),i}function n(i){var a=[[],i.v,[]];return i.v?(i.s&&t(i.s,a[0],a[2]),a[0].join("")+a[1].replace(e,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}}(),Jse=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,eoe=/<(?:\w+:)?r>/,toe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function TB(r,e){var t=e?e.cellHTML:!0,n={};return r?(r.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=ri(qi(r.slice(r.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=qi(r),t&&(n.h=vB(n.t))):r.match(eoe)&&(n.r=qi(r),n.t=ri(qi((r.replace(toe,"").match(Jse)||[]).join("").replace(Co,""))),t&&(n.h=Zse(Xse(n.r)))),n):{t:""}}var roe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,noe=/<(?:\w+:)?(?:si|sstItem)>/g,ioe=/<\/(?:\w+:)?(?:si|sstItem)>/;function aoe(r,e){var t=[],n="";if(!r)return t;var i=r.match(roe);if(i){n=i[2].replace(noe,"").split(ioe);for(var a=0;a!=n.length;++a){var s=TB(n[a].trim(),e);s!=null&&(t[t.length]=s)}i=Kr(i[1]),t.Count=i.count,t.Unique=i.uniqueCount}return t}function soe(r){return[r.read_shift(4),r.read_shift(4)]}function ooe(r,e){var t=[],n=!1;return df(r,function(a,s,o){switch(o){case 159:t.Count=a[0],t.Unique=a[1];break;case 19:t.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(s.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),t}function DU(r){for(var e=[],t=r.split(""),n=0;n<t.length;++n)e[n]=t[n].charCodeAt(0);return e}function ef(r,e){var t={};return t.Major=r.read_shift(2),t.Minor=r.read_shift(2),e>=4&&(r.l+=e-4),t}function loe(r){var e={};return e.id=r.read_shift(0,"lpp4"),e.R=ef(r,4),e.U=ef(r,4),e.W=ef(r,4),e}function uoe(r){for(var e=r.read_shift(4),t=r.l+e-4,n={},i=r.read_shift(4),a=[];i-- >0;)a.push({t:r.read_shift(4),v:r.read_shift(0,"lpp4")});if(n.name=r.read_shift(0,"lpp4"),n.comps=a,r.l!=t)throw new Error("Bad DataSpaceMapEntry: "+r.l+" != "+t);return n}function coe(r){var e=[];r.l+=4;for(var t=r.read_shift(4);t-- >0;)e.push(uoe(r));return e}function hoe(r){var e=[];r.l+=4;for(var t=r.read_shift(4);t-- >0;)e.push(r.read_shift(0,"lpp4"));return e}function foe(r){var e={};return r.read_shift(4),r.l+=4,e.id=r.read_shift(0,"lpp4"),e.name=r.read_shift(0,"lpp4"),e.R=ef(r,4),e.U=ef(r,4),e.W=ef(r,4),e}function Aoe(r){var e=foe(r);if(e.ename=r.read_shift(0,"8lpp4"),e.blksz=r.read_shift(4),e.cmode=r.read_shift(4),r.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function kU(r,e){var t=r.l+e,n={};n.Flags=r.read_shift(4)&63,r.l+=4,n.AlgID=r.read_shift(4);var i=!1;switch(n.AlgID){case 26126:case 26127:case 26128:i=n.Flags==36;break;case 26625:i=n.Flags==4;break;case 0:i=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=r.read_shift(4),n.KeySize=r.read_shift(4),n.ProviderType=r.read_shift(4),r.l+=8,n.CSPName=r.read_shift(t-r.l>>1,"utf16le"),r.l=t,n}function RU(r,e){var t={},n=r.l+e;return r.l+=4,t.Salt=r.slice(r.l,r.l+16),r.l+=16,t.Verifier=r.slice(r.l,r.l+16),r.l+=16,r.read_shift(4),t.VerifierHash=r.slice(r.l,n),r.l=n,t}function doe(r){var e=ef(r);switch(e.Minor){case 2:return[e.Minor,goe(r)];case 3:return[e.Minor,poe()];case 4:return[e.Minor,moe(r)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function goe(r){var e=r.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var t=r.read_shift(4),n=kU(r,t),i=RU(r,r.length-r.l);return{t:"Std",h:n,v:i}}function poe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function moe(r){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];r.l+=4;var t=r.read_shift(r.length-r.l,"utf8"),n={};return t.replace(Co,function(a){var s=Kr(a);switch(lh(s[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=s[o]});break;case"<dataIntegrity":n.encryptedHmacKey=s.encryptedHmacKey,n.encryptedHmacValue=s.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=s.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(s);break;default:throw s[0]}}),n}function voe(r,e){var t={},n=t.EncryptionVersionInfo=ef(r,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);t.Flags=r.read_shift(4),e-=4;var i=r.read_shift(4);return e-=4,t.EncryptionHeader=kU(r,i),e-=i,t.EncryptionVerifier=RU(r,e),t}function yoe(r){var e={},t=e.EncryptionVersionInfo=ef(r,4);if(t.Major!=1||t.Minor!=1)throw"unrecognized version code "+t.Major+" : "+t.Minor;return e.Salt=r.read_shift(16),e.EncryptedVerifier=r.read_shift(16),e.EncryptedVerifierHash=r.read_shift(16),e}function xoe(r){var e=0,t,n=DU(r),i=n.length+1,a,s,o,l,u;for(t=NA(i),t[0]=n.length,a=1;a!=i;++a)t[a]=n[a-1];for(a=i-1;a>=0;--a)s=t[a],o=e&16384?1:0,l=e<<1&32767,u=o|l,e=u^s;return e^52811}var OU=function(){var r=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],t=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(s){return(s/2|s*128)&255},i=function(s,o){return n(s^o)},a=function(s){for(var o=e[s.length-1],l=104,u=s.length-1;u>=0;--u)for(var c=s[u],h=0;h!=7;++h)c&64&&(o^=t[l]),c*=2,--l;return o};return function(s){for(var o=DU(s),l=a(o),u=o.length,c=NA(16),h=0;h!=16;++h)c[h]=0;var f,A,d;for((u&1)===1&&(f=l>>8,c[u]=i(r[0],f),--u,f=l&255,A=o[o.length-1],c[u]=i(A,f));u>0;)--u,f=l>>8,c[u]=i(o[u],f),--u,f=l&255,c[u]=i(o[u],f);for(u=15,d=15-o.length;d>0;)f=l>>8,c[u]=i(r[d],f),--u,--d,f=l&255,c[u]=i(o[u],f),--u,--d;return c}}(),woe=function(r,e,t,n,i){i||(i=e),n||(n=OU(r));var a,s;for(a=0;a!=e.length;++a)s=e[a],s^=n[t],s=(s>>5|s<<3)&255,i[a]=s,++t;return[i,t,n]},_oe=function(r){var e=0,t=OU(r);return function(n){var i=woe("",n,e,t);return e=i[1],i[0]}};function Eoe(r,e,t,n){var i={key:Pa(r),verificationBytes:Pa(r)};return t.password&&(i.verifier=xoe(t.password)),n.valid=i.verificationBytes===i.verifier,n.valid&&(n.insitu=_oe(t.password)),i}function boe(r,e,t){var n=t||{};return n.Info=r.read_shift(2),r.l-=2,n.Info===1?n.Data=yoe(r):n.Data=voe(r,e),n}function Coe(r,e,t){var n={Type:t.biff>=8?r.read_shift(2):0};return n.Type?boe(r,e-2,n):Eoe(r,t.biff>=8?e:e-2,t,n),n}var Soe=function(){function r(i,a){switch(a.type){case"base64":return e($l(i),a);case"binary":return e(i,a);case"buffer":return e(zn&&Buffer.isBuffer(i)?i.toString("binary"):n0(i),a);case"array":return e(zd(i),a)}throw new Error("Unrecognized type "+a.type)}function e(i,a){var s=a||{},o=s.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(c,h){Array.isArray(o)&&(o[h]=[]);for(var f=/\\\w+\b/g,A=0,d,p=-1;d=f.exec(c);){switch(d[0]){case"\\cell":var y=c.slice(A,f.lastIndex-d[0].length);if(y[0]==" "&&(y=y.slice(1)),++p,y.length){var v={v:y,t:"s"};Array.isArray(o)?o[h][p]=v:o[nn({r:h,c:p})]=v}break}A=f.lastIndex}p>u.e.c&&(u.e.c=p)}),o["!ref"]=Xn(u),o}function t(i,a){return HA(r(i,a),a)}function n(i){for(var a=["{\\rtf1\\ansi"],s=ma(i["!ref"]),o,l=Array.isArray(i),u=s.s.r;u<=s.e.r;++u){a.push("\\trowd\\trautofit1");for(var c=s.s.c;c<=s.e.c;++c)a.push("\\cellx"+(c+1));for(a.push("\\pard\\intbl"),c=s.s.c;c<=s.e.c;++c){var h=nn({r:u,c});o=l?(i[u]||[])[c]:i[h],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(sf(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:t,to_sheet:r,from_sheet:n}}();function Boe(r){var e=r.slice(r[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function Wv(r){for(var e=0,t=1;e!=3;++e)t=t*256+(r[e]>255?255:r[e]<0?0:r[e]);return t.toString(16).toUpperCase().slice(1)}function Toe(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,i=Math.max(e,t,n),a=Math.min(e,t,n),s=i-a;if(s===0)return[0,0,e];var o=0,l=0,u=i+a;switch(l=s/(u>1?2-u:u),i){case e:o=((t-n)/s+6)%6;break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4;break}return[o/6,l,u/2]}function Noe(r){var e=r[0],t=r[1],n=r[2],i=t*2*(n<.5?n:1-n),a=n-i/2,s=[a,a,a],o=6*e,l;if(t!==0)switch(o|0){case 0:case 6:l=i*o,s[0]+=i,s[1]+=l;break;case 1:l=i*(2-o),s[0]+=l,s[1]+=i;break;case 2:l=i*(o-2),s[1]+=i,s[2]+=l;break;case 3:l=i*(4-o),s[1]+=l,s[2]+=i;break;case 4:l=i*(o-4),s[2]+=i,s[0]+=l;break;case 5:l=i*(6-o),s[2]+=l,s[0]+=i;break}for(var u=0;u!=3;++u)s[u]=Math.round(s[u]*255);return s}function tw(r,e){if(e===0)return r;var t=Toe(Boe(r));return e<0?t[2]=t[2]*(1+e):t[2]=1-(1-t[2])*(1-e),Wv(Noe(t))}var PU=6,Ioe=15,Foe=1,Po=PU;function rw(r){return Math.floor((r+Math.round(128/Po)/256)*Po)}function nw(r){return Math.floor((r-5)/Po*100+.5)/100}function _S(r){return Math.round((r*Po+5)/Po*256)/256}function Bb(r){return _S(nw(rw(r)))}function NB(r){var e=Math.abs(r-Bb(r)),t=Po;if(e>.005)for(Po=Foe;Po<Ioe;++Po)Math.abs(r-Bb(r))<=e&&(e=Math.abs(r-Bb(r)),t=Po);Po=t}function np(r){r.width?(r.wpx=rw(r.width),r.wch=nw(r.wpx),r.MDW=Po):r.wpx?(r.wch=nw(r.wpx),r.width=_S(r.wch),r.MDW=Po):typeof r.wch=="number"&&(r.width=_S(r.wch),r.wpx=rw(r.width),r.MDW=Po),r.customWidth&&delete r.customWidth}var Moe=96,UU=Moe;function QU(r){return r*96/UU}function Yv(r){return r*UU/96}var Loe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Doe(r,e,t,n){e.Borders=[];var i={},a=!1;(r[0].match(Co)||[]).forEach(function(s){var o=Kr(s);switch(lh(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":i={},o.diagonalUp&&(i.diagonalUp=Ji(o.diagonalUp)),o.diagonalDown&&(i.diagonalDown=Ji(o.diagonalDown)),e.Borders.push(i);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function koe(r,e,t,n){e.Fills=[];var i={},a=!1;(r[0].match(Co)||[]).forEach(function(s){var o=Kr(s);switch(lh(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":i={},e.Fills.push(i);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":o.patternType&&(i.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":i.bgColor||(i.bgColor={}),o.indexed&&(i.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(i.bgColor.theme=parseInt(o.theme,10)),o.tint&&(i.bgColor.tint=parseFloat(o.tint)),o.rgb&&(i.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":i.fgColor||(i.fgColor={}),o.theme&&(i.fgColor.theme=parseInt(o.theme,10)),o.tint&&(i.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(i.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function Roe(r,e,t,n){e.Fonts=[];var i={},a=!1;(r[0].match(Co)||[]).forEach(function(s){var o=Kr(s);switch(lh(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(i),i={};break;case"<name":o.val&&(i.name=qi(o.val));break;case"<name/>":case"</name>":break;case"<b":i.bold=o.val?Ji(o.val):1;break;case"<b/>":i.bold=1;break;case"<i":i.italic=o.val?Ji(o.val):1;break;case"<i/>":i.italic=1;break;case"<u":switch(o.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34;break}break;case"<u/>":i.underline=1;break;case"<strike":i.strike=o.val?Ji(o.val):1;break;case"<strike/>":i.strike=1;break;case"<outline":i.outline=o.val?Ji(o.val):1;break;case"<outline/>":i.outline=1;break;case"<shadow":i.shadow=o.val?Ji(o.val):1;break;case"<shadow/>":i.shadow=1;break;case"<condense":i.condense=o.val?Ji(o.val):1;break;case"<condense/>":i.condense=1;break;case"<extend":i.extend=o.val?Ji(o.val):1;break;case"<extend/>":i.extend=1;break;case"<sz":o.val&&(i.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(i.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(i.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(i.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=hB[parseInt(o.val,10)];break;case"<color":if(i.color||(i.color={}),o.auto&&(i.color.auto=Ji(o.auto)),o.rgb)i.color.rgb=o.rgb.slice(-6);else if(o.indexed){i.color.index=parseInt(o.indexed,10);var l=Id[i.color.index];i.color.index==81&&(l=Id[1]),l||(l=Id[1]),i.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(i.color.theme=parseInt(o.theme,10),o.tint&&(i.color.tint=parseFloat(o.tint)),o.theme&&t.themeElements&&t.themeElements.clrScheme&&(i.color.rgb=tw(t.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Ooe(r,e,t){e.NumberFmt=[];for(var n=ih(gn),i=0;i<n.length;++i)e.NumberFmt[n[i]]=gn[n[i]];var a=r[0].match(Co);if(a)for(i=0;i<a.length;++i){var s=Kr(a[i]);switch(lh(s[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=ri(qi(s.formatCode)),l=parseInt(s.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}Nd(o,l)}}break;case"</numFmt>":break;default:if(t.WTF)throw new Error("unrecognized "+s[0]+" in numFmts")}}}var $y=["numFmtId","fillId","fontId","borderId","xfId"],Ky=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Poe(r,e,t){e.CellXf=[];var n,i=!1;(r[0].match(Co)||[]).forEach(function(a){var s=Kr(a),o=0;switch(lh(s[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=s,delete n[0],o=0;o<$y.length;++o)n[$y[o]]&&(n[$y[o]]=parseInt(n[$y[o]],10));for(o=0;o<Ky.length;++o)n[Ky[o]]&&(n[Ky[o]]=Ji(n[Ky[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};s.vertical&&(l.vertical=s.vertical),s.horizontal&&(l.horizontal=s.horizontal),s.textRotation!=null&&(l.textRotation=s.textRotation),s.indent&&(l.indent=s.indent),s.wrapText&&(l.wrapText=Ji(s.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(t&&t.WTF&&!i)throw new Error("unrecognized "+s[0]+" in cellXfs")}})}var Uoe=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,t=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,i=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,u){var c={};if(!o)return c;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=o.match(e))&&Ooe(h,c,u),(h=o.match(i))&&Roe(h,c,l,u),(h=o.match(n))&&koe(h,c,l,u),(h=o.match(a))&&Doe(h,c,l,u),(h=o.match(t))&&Poe(h,c,u),c}}();function Qoe(r,e){var t=r.read_shift(2),n=xo(r);return[t,n]}function Goe(r,e,t){var n={};n.sz=r.read_shift(2)/20;var i=Xie(r);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var a=r.read_shift(2);switch(a===700&&(n.bold=1),r.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var s=r.read_shift(1);s!=0&&(n.underline=s);var o=r.read_shift(1);o>0&&(n.family=o);var l=r.read_shift(1);switch(l>0&&(n.charset=l),r.l++,n.color=Yie(r),r.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=xo(r),n}var Hoe=Eo;function zoe(r,e){var t=r.l+e,n=r.read_shift(2),i=r.read_shift(2);return r.l=t,{ixfe:n,numFmtId:i}}var qoe=Eo;function joe(r,e,t){var n={};n.NumberFmt=[];for(var i in gn)n.NumberFmt[i]=gn[i];n.CellXf=[],n.Fonts=[];var a=[],s=!1;return df(r,function(l,u,c){switch(c){case 44:n.NumberFmt[l[0]]=l[1],Nd(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=tw(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:a.push(c),s=!0;break;case 38:a.pop(),s=!1;break;default:if(u.T>0)a.push(c);else if(u.T<0)a.pop();else if(!s||t.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+c.toString(16))}}),n}var $oe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Koe(r,e,t){e.themeElements.clrScheme=[];var n={};(r[0].match(Co)||[]).forEach(function(i){var a=Kr(i);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(e.themeElements.clrScheme[$oe.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(t&&t.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function Voe(){}function Woe(){}var Yoe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Xoe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Zoe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Joe(r,e,t){e.themeElements={};var n;[["clrScheme",Yoe,Koe],["fontScheme",Xoe,Voe],["fmtScheme",Zoe,Woe]].forEach(function(i){if(!(n=r.match(i[1])))throw new Error(i[0]+" not found in themeElements");i[2](n,e,t)})}var ele=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function GU(r,e){(!r||r.length===0)&&(r=tle());var t,n={};if(!(t=r.match(ele)))throw new Error("themeElements not found in theme");return Joe(t[0],n,e),n.raw=r,n}function tle(r,e){var t=[ZP];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',t[t.length]='<a:font script="Hang" typeface="맑은 고딕"/>',t[t.length]='<a:font script="Hans" typeface="宋体"/>',t[t.length]='<a:font script="Hant" typeface="新細明體"/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',t[t.length]='<a:font script="Hang" typeface="맑은 고딕"/>',t[t.length]='<a:font script="Hans" typeface="宋体"/>',t[t.length]='<a:font script="Hant" typeface="新細明體"/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function rle(r,e,t){var n=r.l+e,i=r.read_shift(4);if(i!==124226){if(!t.cellStyles){r.l=n;return}var a=r.slice(r.l);r.l=n;var s;try{s=XP(a,{type:"array"})}catch{return}var o=Ol(s,"theme/theme/theme1.xml",!0);if(o)return GU(o,t)}}function nle(r){return r.read_shift(4)}function ile(r){var e={};switch(e.xclrType=r.read_shift(2),e.nTintShade=r.read_shift(2),e.xclrType){case 0:r.l+=4;break;case 1:e.xclrValue=ale(r,4);break;case 2:e.xclrValue=BU(r);break;case 3:e.xclrValue=nle(r);break;case 4:r.l+=4;break}return r.l+=8,e}function ale(r,e){return Eo(r,e)}function sle(r,e){return Eo(r,e)}function ole(r){var e=r.read_shift(2),t=r.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=ile(r);break;case 6:n[1]=sle(r,t);break;case 14:case 15:n[1]=r.read_shift(t===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+t)}return n}function lle(r,e){var t=r.l+e;r.l+=2;var n=r.read_shift(2);r.l+=2;for(var i=r.read_shift(2),a=[];i-- >0;)a.push(ole(r,t-r.l));return{ixfe:n,ext:a}}function ule(r,e){e.forEach(function(t){switch(t[0]){}})}function cle(r,e){return{flags:r.read_shift(4),version:r.read_shift(4),name:xo(r)}}function hle(r){for(var e=[],t=r.read_shift(4);t-- >0;)e.push([r.read_shift(4),r.read_shift(4)]);return e}function fle(r){return r.l+=4,r.read_shift(4)!=0}function Ale(r,e,t){var n={Types:[],Cell:[],Value:[]},i=t||{},a=[],s=!1,o=2;return df(r,function(l,u,c){switch(c){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(h){o==1?n.Cell.push({type:n.Types[h[0]-1].name,index:h[1]}):o==0&&n.Value.push({type:n.Types[h[0]-1].name,index:h[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(c),s=!0;break;case 36:a.pop(),s=!1;break;default:if(!u.T){if(!s||i.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+c.toString(16))}}}),n}function dle(r,e,t){var n={Types:[],Cell:[],Value:[]};if(!r)return n;var i=!1,a=2,s;return r.replace(Co,function(o){var l=Kr(o);switch(lh(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==l.name&&(s=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):a==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<rvb":if(!s)break;s.offsets||(s.offsets=[]),s.offsets.push(+l.i);break;default:if(!i&&t.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function gle(r){var e=[];if(!r)return e;var t=1;return(r.match(Co)||[]).forEach(function(n){var i=Kr(n);switch(i[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete i[0],i.i?t=i.i:i.i=t,e.push(i);break}}),e}function ple(r){var e={};e.i=r.read_shift(4);var t={};t.r=r.read_shift(4),t.c=r.read_shift(4),e.r=nn(t);var n=r.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function mle(r,e,t){var n=[];return df(r,function(a,s,o){switch(o){case 63:n.push(a);break;default:if(!s.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function vle(r,e,t,n){if(!r)return r;var i=n||{},a=!1;df(r,function(o,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||i.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},i)}function yle(r,e){if(!r)return"??";var t=(r.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][t].Target}function zI(r,e,t,n){var i=Array.isArray(r),a;e.forEach(function(s){var o=Ho(s.ref);if(i?(r[o.r]||(r[o.r]=[]),a=r[o.r][o.c]):a=r[s.ref],!a){a={t:"z"},i?r[o.r][o.c]=a:r[s.ref]=a;var l=ma(r["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var u=Xn(l);u!==r["!ref"]&&(r["!ref"]=u)}a.c||(a.c=[]);var c={a:s.author,t:s.t,r:s.r,T:t};s.h&&(c.h=s.h);for(var h=a.c.length-1;h>=0;--h){if(!t&&a.c[h].T)return;t&&!a.c[h].T&&a.c.splice(h,1)}if(t&&n){for(h=0;h<n.length;++h)if(c.a==n[h].id){c.a=n[h].name||c.a;break}}a.c.push(c)})}function xle(r,e){if(r.match(/<(?:\w+:)?comments *\/>/))return[];var t=[],n=[],i=r.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach(function(s){if(!(s===""||s.trim()==="")){var o=s.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&t.push(o[1])}});var a=r.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(s){if(!(s===""||s.trim()==="")){var o=s.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Kr(o[0]),u={author:l.authorId&&t[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},c=Ho(l.ref);if(!(e.sheetRows&&e.sheetRows<=c.r)){var h=s.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),f=!!h&&!!h[1]&&TB(h[1])||{r:"",t:"",h:""};u.r=f.r,f.r=="<t></t>"&&(f.t=f.h=""),u.t=(f.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=f.h),n.push(u)}}}}),n}function wle(r,e){var t=[],n=!1,i={},a=0;return r.replace(Co,function(o,l){var u=Kr(o);switch(lh(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":i={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":i.t!=null&&t.push(i);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":i.t=r.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),t}function _le(r,e){var t=[],n=!1;return r.replace(Co,function(a){var s=Kr(a);switch(lh(s[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":t.push({name:s.displayname,id:s.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+s[0]+" in threaded comments")}return a}),t}function Ele(r){var e={};e.iauthor=r.read_shift(4);var t=a0(r);return e.rfx=t.s,e.ref=nn(t.s),r.l+=16,e}var ble=xo;function Cle(r,e){var t=[],n=[],i={},a=!1;return df(r,function(o,l,u){switch(u){case 632:n.push(o);break;case 635:i=o;break;case 637:i.t=o.t,i.h=o.h,i.r=o.r;break;case 636:if(i.author=n[i.iauthor],delete i.iauthor,e.sheetRows&&i.rfx&&e.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,t.push(i);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),t}var Sle="application/vnd.ms-office.vbaProject";function Ble(r){var e=Yn.utils.cfb_new({root:"R"});return r.FullPaths.forEach(function(t,n){if(!(t.slice(-1)==="/"||!t.match(/_VBA_PROJECT_CUR/))){var i=t.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Yn.utils.cfb_add(e,i,r.FileIndex[n].content)}}),Yn.write(e)}function Tle(){return{"!type":"dialog"}}function Nle(){return{"!type":"dialog"}}function Ile(){return{"!type":"macro"}}function Fle(){return{"!type":"macro"}}var Lg=function(){var r=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(n,i,a,s){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),s.length==0?o=!0:s.charAt(0)=="["&&(o=!0,s=s.slice(1,-1));var u=a.length>0?parseInt(a,10)|0:0,c=s.length>0?parseInt(s,10)|0:0;return o?c+=e.c:--c,l?u+=e.r:--u,i+(o?"":"$")+ns(c)+(l?"":"$")+zs(u)}return function(i,a){return e=a,i.replace(r,t)}}(),HU=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Mle=function(){return function(e,t){return e.replace(HU,function(n,i,a,s,o,l){var u=_B(s)-(a?0:t.c),c=wB(l)-(o?0:t.r),h=c==0?"":o?c+1:"["+c+"]",f=u==0?"":a?u+1:"["+u+"]";return i+"R"+h+"C"+f})}}();function zU(r,e){return r.replace(HU,function(t,n,i,a,s,o){return n+(i=="$"?i+a:ns(_B(a)+e.c))+(s=="$"?s+o:zs(wB(o)+e.r))})}function Lle(r,e,t){var n=Tp(e),i=n.s,a=Ho(t),s={r:a.r-i.r,c:a.c-i.c};return zU(r,s)}function Dle(r){return r.length!=1}function qI(r){return r.replace(/_xlfn\./g,"")}function Ra(r){r.l+=1}function IA(r,e){var t=r.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function qU(r,e,t){var n=2;if(t){if(t.biff>=2&&t.biff<=5)return jU(r);t.biff==12&&(n=4)}var i=r.read_shift(n),a=r.read_shift(n),s=IA(r),o=IA(r);return{s:{r:i,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function jU(r){var e=IA(r),t=IA(r),n=r.read_shift(1),i=r.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function kle(r,e,t){if(t.biff<8)return jU(r);var n=r.read_shift(t.biff==12?4:2),i=r.read_shift(t.biff==12?4:2),a=IA(r),s=IA(r);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:s[0],cRel:s[1],rRel:s[2]}}}function $U(r,e,t){if(t&&t.biff>=2&&t.biff<=5)return Rle(r);var n=r.read_shift(t&&t.biff==12?4:2),i=IA(r);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function Rle(r){var e=IA(r),t=r.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function Ole(r){var e=r.read_shift(2),t=r.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function Ple(r,e,t){var n=t&&t.biff?t.biff:8;if(n>=2&&n<=5)return Ule(r);var i=r.read_shift(n>=12?4:2),a=r.read_shift(2),s=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;i>524287;)i-=1048576;if(s==1)for(;a>8191;)a=a-16384;return{r:i,c:a,cRel:s,rRel:o}}function Ule(r){var e=r.read_shift(2),t=r.read_shift(1),n=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),i==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:i,rRel:n}}function Qle(r,e,t){var n=(r[r.l++]&96)>>5,i=qU(r,t.biff>=2&&t.biff<=5?6:8,t);return[n,i]}function Gle(r,e,t){var n=(r[r.l++]&96)>>5,i=r.read_shift(2,"i"),a=8;if(t)switch(t.biff){case 5:r.l+=12,a=6;break;case 12:a=12;break}var s=qU(r,a,t);return[n,i,s]}function Hle(r,e,t){var n=(r[r.l++]&96)>>5;return r.l+=t&&t.biff>8?12:t.biff<8?6:8,[n]}function zle(r,e,t){var n=(r[r.l++]&96)>>5,i=r.read_shift(2),a=8;if(t)switch(t.biff){case 5:r.l+=12,a=6;break;case 12:a=12;break}return r.l+=a,[n,i]}function qle(r,e,t){var n=(r[r.l++]&96)>>5,i=kle(r,e-1,t);return[n,i]}function jle(r,e,t){var n=(r[r.l++]&96)>>5;return r.l+=t.biff==2?6:t.biff==12?14:7,[n]}function jI(r){var e=r[r.l+1]&1,t=1;return r.l+=4,[e,t]}function $le(r,e,t){r.l+=2;for(var n=r.read_shift(t&&t.biff==2?1:2),i=[],a=0;a<=n;++a)i.push(r.read_shift(t&&t.biff==2?1:2));return i}function Kle(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(t&&t.biff==2?1:2)]}function Vle(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(t&&t.biff==2?1:2)]}function Wle(r){var e=r[r.l+1]&255?1:0;return r.l+=2,[e,r.read_shift(2)]}function Yle(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=t&&t.biff==2?3:4,[n]}function KU(r){var e=r.read_shift(1),t=r.read_shift(1);return[e,t]}function Xle(r){return r.read_shift(2),KU(r)}function Zle(r){return r.read_shift(2),KU(r)}function Jle(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var i=$U(r,0,t);return[n,i]}function eue(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var i=Ple(r,0,t);return[n,i]}function tue(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var i=r.read_shift(2);t&&t.biff==5&&(r.l+=12);var a=$U(r,0,t);return[n,i,a]}function rue(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var i=r.read_shift(t&&t.biff<=3?1:2);return[nce[i],YU[i],n]}function nue(r,e,t){var n=r[r.l++],i=r.read_shift(1),a=t&&t.biff<=3?[n==88?-1:0,r.read_shift(1)]:iue(r);return[i,(a[0]===0?YU:rce)[a[1]]]}function iue(r){return[r[r.l+1]>>7,r.read_shift(2)&32767]}function aue(r,e,t){r.l+=t&&t.biff==2?3:4}function sue(r,e,t){if(r.l++,t&&t.biff==12)return[r.read_shift(4,"i"),0];var n=r.read_shift(2),i=r.read_shift(t&&t.biff==2?1:2);return[n,i]}function oue(r){return r.l++,s0[r.read_shift(1)]}function lue(r){return r.l++,r.read_shift(2)}function uue(r){return r.l++,r.read_shift(1)!==0}function cue(r){return r.l++,Ao(r)}function hue(r,e,t){return r.l++,N1(r,e-1,t)}function fue(r,e){var t=[r.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=Ea(r,1)?"TRUE":"FALSE",e!=12&&(r.l+=7);break;case 37:case 16:t[1]=s0[r[r.l]],r.l+=e==12?4:8;break;case 0:r.l+=8;break;case 1:t[1]=Ao(r);break;case 2:t[1]=o0(r,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function Aue(r,e,t){for(var n=r.read_shift(t.biff==12?4:2),i=[],a=0;a!=n;++a)i.push((t.biff==12?a0:S_)(r));return i}function due(r,e,t){var n=0,i=0;t.biff==12?(n=r.read_shift(4),i=r.read_shift(4)):(i=1+r.read_shift(1),n=1+r.read_shift(2)),t.biff>=2&&t.biff<8&&(--n,--i==0&&(i=256));for(var a=0,s=[];a!=n&&(s[a]=[]);++a)for(var o=0;o!=i;++o)s[a][o]=fue(r,t.biff);return s}function gue(r,e,t){var n=r.read_shift(1)>>>5&3,i=!t||t.biff>=8?4:2,a=r.read_shift(i);switch(t.biff){case 2:r.l+=5;break;case 3:case 4:r.l+=8;break;case 5:r.l+=12;break}return[n,0,a]}function pue(r,e,t){if(t.biff==5)return mue(r);var n=r.read_shift(1)>>>5&3,i=r.read_shift(2),a=r.read_shift(4);return[n,i,a]}function mue(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2,"i");r.l+=8;var n=r.read_shift(2);return r.l+=12,[e,t,n]}function vue(r,e,t){var n=r.read_shift(1)>>>5&3;r.l+=t&&t.biff==2?3:4;var i=r.read_shift(t&&t.biff==2?1:2);return[n,i]}function yue(r,e,t){var n=r.read_shift(1)>>>5&3,i=r.read_shift(t&&t.biff==2?1:2);return[n,i]}function xue(r,e,t){var n=r.read_shift(1)>>>5&3;return r.l+=4,t.biff<8&&r.l--,t.biff==12&&(r.l+=2),[n]}function wue(r,e,t){var n=(r[r.l++]&96)>>5,i=r.read_shift(2),a=4;if(t)switch(t.biff){case 5:a=15;break;case 12:a=6;break}return r.l+=a,[n,i]}var _ue=Eo,Eue=Eo,bue=Eo;function F1(r,e,t){return r.l+=2,[Ole(r)]}function IB(r){return r.l+=6,[]}var Cue=F1,Sue=IB,Bue=IB,Tue=F1;function VU(r){return r.l+=2,[Pa(r),r.read_shift(2)&1]}var Nue=F1,Iue=VU,Fue=IB,Mue=F1,Lue=F1,Due=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function kue(r){r.l+=2;var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(4),i=r.read_shift(2),a=r.read_shift(2),s=Due[t>>2&31];return{ixti:e,coltype:t&3,rt:s,idx:n,c:i,C:a}}function Rue(r){return r.l+=2,[r.read_shift(4)]}function Oue(r,e,t){return r.l+=5,r.l+=2,r.l+=t.biff==2?1:4,["PTGSHEET"]}function Pue(r,e,t){return r.l+=t.biff==2?4:5,["PTGENDSHEET"]}function Uue(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2);return[e,t]}function Que(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2);return[e,t]}function Gue(r){return r.l+=4,[0,0]}var $I={1:{n:"PtgExp",f:sue},2:{n:"PtgTbl",f:bue},3:{n:"PtgAdd",f:Ra},4:{n:"PtgSub",f:Ra},5:{n:"PtgMul",f:Ra},6:{n:"PtgDiv",f:Ra},7:{n:"PtgPower",f:Ra},8:{n:"PtgConcat",f:Ra},9:{n:"PtgLt",f:Ra},10:{n:"PtgLe",f:Ra},11:{n:"PtgEq",f:Ra},12:{n:"PtgGe",f:Ra},13:{n:"PtgGt",f:Ra},14:{n:"PtgNe",f:Ra},15:{n:"PtgIsect",f:Ra},16:{n:"PtgUnion",f:Ra},17:{n:"PtgRange",f:Ra},18:{n:"PtgUplus",f:Ra},19:{n:"PtgUminus",f:Ra},20:{n:"PtgPercent",f:Ra},21:{n:"PtgParen",f:Ra},22:{n:"PtgMissArg",f:Ra},23:{n:"PtgStr",f:hue},26:{n:"PtgSheet",f:Oue},27:{n:"PtgEndSheet",f:Pue},28:{n:"PtgErr",f:oue},29:{n:"PtgBool",f:uue},30:{n:"PtgInt",f:lue},31:{n:"PtgNum",f:cue},32:{n:"PtgArray",f:jle},33:{n:"PtgFunc",f:rue},34:{n:"PtgFuncVar",f:nue},35:{n:"PtgName",f:gue},36:{n:"PtgRef",f:Jle},37:{n:"PtgArea",f:Qle},38:{n:"PtgMemArea",f:vue},39:{n:"PtgMemErr",f:_ue},40:{n:"PtgMemNoMem",f:Eue},41:{n:"PtgMemFunc",f:yue},42:{n:"PtgRefErr",f:xue},43:{n:"PtgAreaErr",f:Hle},44:{n:"PtgRefN",f:eue},45:{n:"PtgAreaN",f:qle},46:{n:"PtgMemAreaN",f:Uue},47:{n:"PtgMemNoMemN",f:Que},57:{n:"PtgNameX",f:pue},58:{n:"PtgRef3d",f:tue},59:{n:"PtgArea3d",f:Gle},60:{n:"PtgRefErr3d",f:wue},61:{n:"PtgAreaErr3d",f:zle},255:{}},Hue={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},zue={1:{n:"PtgElfLel",f:VU},2:{n:"PtgElfRw",f:Mue},3:{n:"PtgElfCol",f:Cue},6:{n:"PtgElfRwV",f:Lue},7:{n:"PtgElfColV",f:Tue},10:{n:"PtgElfRadical",f:Nue},11:{n:"PtgElfRadicalS",f:Fue},13:{n:"PtgElfColS",f:Sue},15:{n:"PtgElfColSV",f:Bue},16:{n:"PtgElfRadicalLel",f:Iue},25:{n:"PtgList",f:kue},29:{n:"PtgSxName",f:Rue},255:{}},que={0:{n:"PtgAttrNoop",f:Gue},1:{n:"PtgAttrSemi",f:Yle},2:{n:"PtgAttrIf",f:Vle},4:{n:"PtgAttrChoose",f:$le},8:{n:"PtgAttrGoto",f:Kle},16:{n:"PtgAttrSum",f:aue},32:{n:"PtgAttrBaxcel",f:jI},33:{n:"PtgAttrBaxcel",f:jI},64:{n:"PtgAttrSpace",f:Xle},65:{n:"PtgAttrSpaceSemi",f:Zle},128:{n:"PtgAttrIfError",f:Wle},255:{}};function M1(r,e,t,n){if(n.biff<8)return Eo(r,e);for(var i=r.l+e,a=[],s=0;s!==t.length;++s)switch(t[s][0]){case"PtgArray":t[s][1]=due(r,0,n),a.push(t[s][1]);break;case"PtgMemArea":t[s][2]=Aue(r,t[s][1],n),a.push(t[s][2]);break;case"PtgExp":n&&n.biff==12&&(t[s][1][1]=r.read_shift(4),a.push(t[s][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[s][0]}return e=i-r.l,e!==0&&a.push(Eo(r,e)),a}function L1(r,e,t){for(var n=r.l+e,i,a,s=[];n!=r.l;)e=n-r.l,a=r[r.l],i=$I[a]||$I[Hue[a]],(a===24||a===25)&&(i=(a===24?zue:que)[r[r.l+1]]),!i||!i.f?Eo(r,e):s.push([i.n,i.f(r,e,t)]);return s}function jue(r){for(var e=[],t=0;t<r.length;++t){for(var n=r[t],i=[],a=0;a<n.length;++a){var s=n[a];if(s)switch(s[0]){case 2:i.push('"'+s[1].replace(/"/g,'""')+'"');break;default:i.push(s[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var $ue={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Kue(r,e){if(!r&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(r)?"'"+r+"'":r}function WU(r,e,t){if(!r)return"SH33TJSERR0";if(t.biff>8&&(!r.XTI||!r.XTI[e]))return r.SheetNames[e];if(!r.XTI)return"SH33TJSERR6";var n=r.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":r.XTI[e-1];if(!n)return"SH33TJSERR1";var i="";if(t.biff>8)switch(r[n[0]][0]){case 357:return i=n[1]==-1?"#REF":r.SheetNames[n[1]],n[1]==n[2]?i:i+":"+r.SheetNames[n[2]];case 358:return t.SID!=null?r.SheetNames[t.SID]:"SH33TJSSAME"+r[n[0]][0];case 355:default:return"SH33TJSSRC"+r[n[0]][0]}switch(r[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":r.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+r.SheetNames[n[2]];case 14849:return r[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return r[n[0]][0][3]?(i=n[1]==-1?"#REF":r[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+r[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function KI(r,e,t){var n=WU(r,e,t);return n=="#REF"?n:Kue(n,t)}function uo(r,e,t,n,i){var a=i&&i.biff||8,s={s:{c:0,r:0}},o=[],l,u,c,h=0,f=0,A,d="";if(!r[0]||!r[0][0])return"";for(var p=-1,y="",v=0,w=r[0].length;v<w;++v){var x=r[0][v];switch(x[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),p>=0){switch(r[0][p][1][0]){case 0:y=ga(" ",r[0][p][1][1]);break;case 1:y=ga("\r",r[0][p][1][1]);break;default:if(y="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][p][1][0])}u=u+y,p=-1}o.push(u+$ue[x[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":c=uv(x[1][1],s,i),o.push(cv(c,a));break;case"PtgRefN":c=t?uv(x[1][1],t,i):x[1][1],o.push(cv(c,a));break;case"PtgRef3d":h=x[1][1],c=uv(x[1][2],s,i),d=KI(n,h,i),o.push(d+"!"+cv(c,a));break;case"PtgFunc":case"PtgFuncVar":var b=x[1][0],C=x[1][1];b||(b=0),b&=127;var S=b==0?[]:o.slice(-b);o.length-=b,C==="User"&&(C=S.shift()),o.push(C+"("+S.join(",")+")");break;case"PtgBool":o.push(x[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(x[1]);break;case"PtgNum":o.push(String(x[1]));break;case"PtgStr":o.push('"'+x[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(x[1]);break;case"PtgAreaN":A=BI(x[1][1],t?{s:t}:s,i),o.push(Cb(A,i));break;case"PtgArea":A=BI(x[1][1],s,i),o.push(Cb(A,i));break;case"PtgArea3d":h=x[1][1],A=x[1][2],d=KI(n,h,i),o.push(d+"!"+Cb(A,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=x[1][2];var I=(n.names||[])[f-1]||(n[0]||[])[f],B=I?I.Name:"SH33TJSNAME"+String(f);B&&B.slice(0,6)=="_xlfn."&&!i.xlfn&&(B=B.slice(6)),o.push(B);break;case"PtgNameX":var T=x[1][1];f=x[1][2];var M;if(i.biff<=5)T<0&&(T=-T),n[T]&&(M=n[T][f]);else{var F="";if(((n[T]||[])[0]||[])[0]==14849||(((n[T]||[])[0]||[])[0]==1025?n[T][f]&&n[T][f].itab>0&&(F=n.SheetNames[n[T][f].itab-1]+"!"):F=n.SheetNames[f-1]+"!"),n[T]&&n[T][f])F+=n[T][f].Name;else if(n[0]&&n[0][f])F+=n[0][f].Name;else{var N=(WU(n,T,i)||"").split(";;");N[f-1]?F=N[f-1]:F+="SH33TJSERRX"}o.push(F);break}M||(M={Name:"SH33TJSERRY"}),o.push(M.Name);break;case"PtgParen":var O="(",L=")";if(p>=0){switch(y="",r[0][p][1][0]){case 2:O=ga(" ",r[0][p][1][1])+O;break;case 3:O=ga("\r",r[0][p][1][1])+O;break;case 4:L=ga(" ",r[0][p][1][1])+L;break;case 5:L=ga("\r",r[0][p][1][1])+L;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][p][1][0])}p=-1}o.push(O+o.pop()+L);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":c={c:x[1][1],r:x[1][0]};var G={c:t.c,r:t.r};if(n.sharedf[nn(c)]){var R=n.sharedf[nn(c)];o.push(uo(R,s,G,n,i))}else{var U=!1;for(l=0;l!=n.arrayf.length;++l)if(u=n.arrayf[l],!(c.c<u[0].s.c||c.c>u[0].e.c)&&!(c.r<u[0].s.r||c.r>u[0].e.r)){o.push(uo(u[1],s,G,n,i)),U=!0;break}U||o.push(x[1])}break;case"PtgArray":o.push("{"+jue(x[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=v;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+x[1].idx+"[#"+x[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(x));default:throw new Error("Unrecognized Formula Token: "+String(x))}var W=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&p>=0&&W.indexOf(r[0][v][0])==-1){x=r[0][p];var Q=!0;switch(x[1][0]){case 4:Q=!1;case 0:y=ga(" ",x[1][1]);break;case 5:Q=!1;case 1:y=ga("\r",x[1][1]);break;default:if(y="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+x[1][0])}o.push((Q?y:"")+o.pop()+(Q?"":y)),p=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function Vue(r,e,t){var n=r.l+e,i=t.biff==2?1:2,a,s=r.read_shift(i);if(s==65535)return[[],Eo(r,e-2)];var o=L1(r,s,t);return e!==s+i&&(a=M1(r,e-s-i,o,t)),r.l=n,[o,a]}function Wue(r,e,t){var n=r.l+e,i=t.biff==2?1:2,a,s=r.read_shift(i);if(s==65535)return[[],Eo(r,e-2)];var o=L1(r,s,t);return e!==s+i&&(a=M1(r,e-s-i,o,t)),r.l=n,[o,a]}function Yue(r,e,t,n){var i=r.l+e,a=L1(r,n,t),s;return i!==r.l&&(s=M1(r,i-r.l,a,t)),[a,s]}function Xue(r,e,t){var n=r.l+e,i,a=r.read_shift(2),s=L1(r,a,t);return a==65535?[[],Eo(r,e-2)]:(e!==a+2&&(i=M1(r,n-a-2,s,t)),[s,i])}function Zue(r){var e;if(qh(r,r.l+6)!==65535)return[Ao(r),"n"];switch(r[r.l]){case 0:return r.l+=8,["String","s"];case 1:return e=r[r.l+2]===1,r.l+=8,[e,"b"];case 2:return e=r[r.l+2],r.l+=8,[e,"e"];case 3:return r.l+=8,["","s"]}return[]}function Tb(r,e,t){var n=r.l+e,i=uh(r);t.biff==2&&++r.l;var a=Zue(r),s=r.read_shift(1);t.biff!=2&&(r.read_shift(1),t.biff>=5&&r.read_shift(4));var o=Wue(r,n-r.l,t);return{cell:i,val:a[0],formula:o,shared:s>>3&1,tt:a[1]}}function B_(r,e,t){var n=r.read_shift(4),i=L1(r,n,t),a=r.read_shift(4),s=a>0?M1(r,a,i,t):null;return[i,s]}var Jue=B_,T_=B_,ece=B_,tce=B_,rce={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},YU={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},nce={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function VI(r){return r.slice(0,3)=="of:"&&(r=r.slice(3)),r.charCodeAt(0)==61&&(r=r.slice(1),r.charCodeAt(0)==61&&(r=r.slice(1))),r=r.replace(/COM\.MICROSOFT\./g,""),r=r.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,t){return t.replace(/\./g,"")}),r=r.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),r.replace(/[;~]/g,",").replace(/\|/g,";")}function Nb(r){var e=r.split(":"),t=e[0].split(".")[0];return[t,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}var dv={},Dg={};function gv(r,e){if(r){var t=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(t=[1,1,1,1,.5,.5]),r.left==null&&(r.left=t[0]),r.right==null&&(r.right=t[1]),r.top==null&&(r.top=t[2]),r.bottom==null&&(r.bottom=t[3]),r.header==null&&(r.header=t[4]),r.footer==null&&(r.footer=t[5])}}function XU(r,e,t,n,i,a){try{n.cellNF&&(r.z=gn[e])}catch(o){if(n.WTF)throw o}if(!(r.t==="z"&&!n.cellStyles)){if(r.t==="d"&&typeof r.v=="string"&&(r.v=Ss(r.v)),(!n||n.cellText!==!1)&&r.t!=="z")try{if(gn[e]==null&&Nd(iie[e]||"General",e),r.t==="e")r.w=r.w||s0[r.v];else if(e===0)if(r.t==="n")(r.v|0)===r.v?r.w=r.v.toString(10):r.w=jv(r.v);else if(r.t==="d"){var s=Vo(r.v);(s|0)===s?r.w=s.toString(10):r.w=jv(s)}else{if(r.v===void 0)return"";r.w=Hd(r.v,Dg)}else r.t==="d"?r.w=Cu(e,Vo(r.v),Dg):r.w=Cu(e,r.v,Dg)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&t!=null)try{r.s=a.Fills[t],r.s.fgColor&&r.s.fgColor.theme&&!r.s.fgColor.rgb&&(r.s.fgColor.rgb=tw(i.themeElements.clrScheme[r.s.fgColor.theme].rgb,r.s.fgColor.tint||0),n.WTF&&(r.s.fgColor.raw_rgb=i.themeElements.clrScheme[r.s.fgColor.theme].rgb)),r.s.bgColor&&r.s.bgColor.theme&&(r.s.bgColor.rgb=tw(i.themeElements.clrScheme[r.s.bgColor.theme].rgb,r.s.bgColor.tint||0),n.WTF&&(r.s.bgColor.raw_rgb=i.themeElements.clrScheme[r.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function ice(r,e){var t=ma(e);t.s.r<=t.e.r&&t.s.c<=t.e.c&&t.s.r>=0&&t.s.c>=0&&(r["!ref"]=Xn(t))}var ace=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,sce=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,oce=/<(?:\w:)?hyperlink [^>]*>/mg,lce=/"(\w*:\w*)"/,uce=/<(?:\w:)?col\b[^>]*[\/]?>/g,cce=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,hce=/<(?:\w:)?pageMargins[^>]*\/>/g,ZU=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,fce=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Ace=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function dce(r,e,t,n,i,a,s){if(!r)return r;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",c="",h=r.match(sce);h?(u=r.slice(0,h.index),c=r.slice(h.index+h[0].length)):u=c=r;var f=u.match(ZU);f?FB(f[0],o,i,t):(f=u.match(fce))&&gce(f[0],f[1]||"",o,i,t);var A=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(A>0){var d=u.slice(A,A+50).match(lce);d&&ice(o,d[1])}var p=u.match(Ace);p&&p[1]&&wce(p[1],i);var y=[];if(e.cellStyles){var v=u.match(uce);v&&vce(y,v)}h&&_ce(h[1],o,e,l,a,s);var w=c.match(cce);w&&(o["!autofilter"]=yce(w[0]));var x=[],b=c.match(ace);if(b)for(A=0;A!=b.length;++A)x[A]=ma(b[A].slice(b[A].indexOf('"')+1));var C=c.match(oce);C&&pce(o,C,n);var S=c.match(hce);if(S&&(o["!margins"]=mce(Kr(S[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Xn(l)),e.sheetRows>0&&o["!ref"]){var I=ma(o["!ref"]);e.sheetRows<=+I.e.r&&(I.e.r=e.sheetRows-1,I.e.r>l.e.r&&(I.e.r=l.e.r),I.e.r<I.s.r&&(I.s.r=I.e.r),I.e.c>l.e.c&&(I.e.c=l.e.c),I.e.c<I.s.c&&(I.s.c=I.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Xn(I))}return y.length>0&&(o["!cols"]=y),x.length>0&&(o["!merges"]=x),o}function FB(r,e,t,n){var i=Kr(r);t.Sheets[n]||(t.Sheets[n]={}),i.codeName&&(t.Sheets[n].CodeName=ri(qi(i.codeName)))}function gce(r,e,t,n,i){FB(r.slice(0,r.indexOf(">")),t,n,i)}function pce(r,e,t){for(var n=Array.isArray(r),i=0;i!=e.length;++i){var a=Kr(qi(e[i]),!0);if(!a.ref)return;var s=((t||{})["!id"]||[])[a.id];s?(a.Target=s.Target,a.location&&(a.Target+="#"+ri(a.location))):(a.Target="#"+ri(a.location),s={Target:a.Target,TargetMode:"Internal"}),a.Rel=s,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=ma(a.ref),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var c=nn({c:u,r:l});n?(r[l]||(r[l]=[]),r[l][u]||(r[l][u]={t:"z",v:void 0}),r[l][u].l=a):(r[c]||(r[c]={t:"z",v:void 0}),r[c].l=a)}}}function mce(r){var e={};return["left","right","top","bottom","header","footer"].forEach(function(t){r[t]&&(e[t]=parseFloat(r[t]))}),e}function vce(r,e){for(var t=!1,n=0;n!=e.length;++n){var i=Kr(e[n],!0);i.hidden&&(i.hidden=Ji(i.hidden));var a=parseInt(i.min,10)-1,s=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!t&&i.width&&(t=!0,NB(i.width)),np(i);a<=s;)r[a++]=Hs(i)}}function yce(r){var e={ref:(r.match(/ref="([^"]*)"/)||[])[1]};return e}var xce=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function wce(r,e){e.Views||(e.Views=[{}]),(r.match(xce)||[]).forEach(function(t,n){var i=Kr(t);e.Views[n]||(e.Views[n]={}),+i.zoomScale&&(e.Views[n].zoom=+i.zoomScale),Ji(i.rightToLeft)&&(e.Views[n].RTL=!0)})}var _ce=function(){var r=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,t=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,i=/ref=["']([^"']*)["']/,a=$v("v"),s=$v("f");return function(l,u,c,h,f,A){for(var d=0,p="",y=[],v=[],w=0,x=0,b=0,C="",S,I,B=0,T=0,M,F,N=0,O=0,L=Array.isArray(A.CellXf),G,R=[],U=[],W=Array.isArray(u),Q=[],re={},oe=!1,P=!!c.sheetStubs,z=l.split(e),K=0,J=z.length;K!=J;++K){p=z[K].trim();var ue=p.length;if(ue!==0){var ge=0;e:for(d=0;d<ue;++d)switch(p[d]){case">":if(p[d-1]!="/"){++d;break e}if(c&&c.cellStyles){if(I=Kr(p.slice(ge,d),!0),B=I.r!=null?parseInt(I.r,10):B+1,T=-1,c.sheetRows&&c.sheetRows<B)continue;re={},oe=!1,I.ht&&(oe=!0,re.hpt=parseFloat(I.ht),re.hpx=Yv(re.hpt)),I.hidden=="1"&&(oe=!0,re.hidden=!0),I.outlineLevel!=null&&(oe=!0,re.level=+I.outlineLevel),oe&&(Q[B-1]=re)}break;case"<":ge=d;break}if(ge>=d)break;if(I=Kr(p.slice(ge,d),!0),B=I.r!=null?parseInt(I.r,10):B+1,T=-1,!(c.sheetRows&&c.sheetRows<B)){h.s.r>B-1&&(h.s.r=B-1),h.e.r<B-1&&(h.e.r=B-1),c&&c.cellStyles&&(re={},oe=!1,I.ht&&(oe=!0,re.hpt=parseFloat(I.ht),re.hpx=Yv(re.hpt)),I.hidden=="1"&&(oe=!0,re.hidden=!0),I.outlineLevel!=null&&(oe=!0,re.level=+I.outlineLevel),oe&&(Q[B-1]=re)),y=p.slice(d).split(r);for(var le=0;le!=y.length&&y[le].trim().charAt(0)=="<";++le);for(y=y.slice(le),d=0;d!=y.length;++d)if(p=y[d].trim(),p.length!==0){if(v=p.match(t),w=d,x=0,b=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,v!=null&&v.length===2){for(w=0,C=v[1],x=0;x!=C.length&&!((b=C.charCodeAt(x)-64)<1||b>26);++x)w=26*w+b;--w,T=w}else++T;for(x=0;x!=p.length&&p.charCodeAt(x)!==62;++x);if(++x,I=Kr(p.slice(0,x),!0),I.r||(I.r=nn({r:B-1,c:T})),C=p.slice(x),S={t:""},(v=C.match(a))!=null&&v[1]!==""&&(S.v=ri(v[1])),c.cellFormula){if((v=C.match(s))!=null&&v[1]!==""){if(S.f=ri(qi(v[1])).replace(/\r\n/g,`
`),c.xlfn||(S.f=qI(S.f)),v[0].indexOf('t="array"')>-1)S.F=(C.match(i)||[])[1],S.F.indexOf(":")>-1&&R.push([ma(S.F),S.F]);else if(v[0].indexOf('t="shared"')>-1){F=Kr(v[0]);var me=ri(qi(v[1]));c.xlfn||(me=qI(me)),U[parseInt(F.si,10)]=[F,me,I.r]}}else(v=C.match(/<f[^>]*\/>/))&&(F=Kr(v[0]),U[F.si]&&(S.f=Lle(U[F.si][1],U[F.si][2],I.r)));var xe=Ho(I.r);for(x=0;x<R.length;++x)xe.r>=R[x][0].s.r&&xe.r<=R[x][0].e.r&&xe.c>=R[x][0].s.c&&xe.c<=R[x][0].e.c&&(S.F=R[x][1])}if(I.t==null&&S.v===void 0)if(S.f||S.F)S.v=0,S.t="n";else if(P)S.t="z";else continue;else S.t=I.t||"n";switch(h.s.c>T&&(h.s.c=T),h.e.c<T&&(h.e.c=T),S.t){case"n":if(S.v==""||S.v==null){if(!P)continue;S.t="z"}else S.v=parseFloat(S.v);break;case"s":if(typeof S.v>"u"){if(!P)continue;S.t="z"}else M=dv[parseInt(S.v,10)],S.v=M.t,S.r=M.r,c.cellHTML&&(S.h=M.h);break;case"str":S.t="s",S.v=S.v!=null?qi(S.v):"",c.cellHTML&&(S.h=vB(S.v));break;case"inlineStr":v=C.match(n),S.t="s",v!=null&&(M=TB(v[1]))?(S.v=M.t,c.cellHTML&&(S.h=M.h)):S.v="";break;case"b":S.v=Ji(S.v);break;case"d":c.cellDates?S.v=Ss(S.v,1):(S.v=Vo(Ss(S.v,1)),S.t="n");break;case"e":(!c||c.cellText!==!1)&&(S.w=S.v),S.v=yU[S.v];break}if(N=O=0,G=null,L&&I.s!==void 0&&(G=A.CellXf[I.s],G!=null&&(G.numFmtId!=null&&(N=G.numFmtId),c.cellStyles&&G.fillId!=null&&(O=G.fillId))),XU(S,N,O,c,f,A),c.cellDates&&L&&S.t=="n"&&Bp(gn[N])&&(S.t="d",S.v=C_(S.v)),I.cm&&c.xlmeta){var Be=(c.xlmeta.Cell||[])[+I.cm-1];Be&&Be.type=="XLDAPR"&&(S.D=!0)}if(W){var Y=Ho(I.r);u[Y.r]||(u[Y.r]=[]),u[Y.r][Y.c]=S}else u[I.r]=S}}}}Q.length>0&&(u["!rows"]=Q)}}();function Ece(r,e){var t={},n=r.l+e;t.r=r.read_shift(4),r.l+=4;var i=r.read_shift(2);r.l+=1;var a=r.read_shift(1);return r.l=n,a&7&&(t.level=a&7),a&16&&(t.hidden=!0),a&32&&(t.hpt=i/20),t}var bce=a0;function Cce(){}function Sce(r,e){var t={},n=r[r.l];return++r.l,t.above=!(n&64),t.left=!(n&128),r.l+=18,t.name=Vie(r),t}function Bce(r){var e=Tu(r);return[e]}function Tce(r){var e=i0(r);return[e]}function Nce(r){var e=Tu(r),t=r.read_shift(1);return[e,t,"b"]}function Ice(r){var e=i0(r),t=r.read_shift(1);return[e,t,"b"]}function Fce(r){var e=Tu(r),t=r.read_shift(1);return[e,t,"e"]}function Mce(r){var e=i0(r),t=r.read_shift(1);return[e,t,"e"]}function Lce(r){var e=Tu(r),t=r.read_shift(4);return[e,t,"s"]}function Dce(r){var e=i0(r),t=r.read_shift(4);return[e,t,"s"]}function kce(r){var e=Tu(r),t=Ao(r);return[e,t,"n"]}function JU(r){var e=i0(r),t=Ao(r);return[e,t,"n"]}function Rce(r){var e=Tu(r),t=CB(r);return[e,t,"n"]}function Oce(r){var e=i0(r),t=CB(r);return[e,t,"n"]}function Pce(r){var e=Tu(r),t=EB(r);return[e,t,"is"]}function Uce(r){var e=Tu(r),t=xo(r);return[e,t,"str"]}function Qce(r){var e=i0(r),t=xo(r);return[e,t,"str"]}function Gce(r,e,t){var n=r.l+e,i=Tu(r);i.r=t["!row"];var a=r.read_shift(1),s=[i,a,"b"];if(t.cellFormula){r.l+=2;var o=T_(r,n-r.l,t);s[3]=uo(o,null,i,t.supbooks,t)}else r.l=n;return s}function Hce(r,e,t){var n=r.l+e,i=Tu(r);i.r=t["!row"];var a=r.read_shift(1),s=[i,a,"e"];if(t.cellFormula){r.l+=2;var o=T_(r,n-r.l,t);s[3]=uo(o,null,i,t.supbooks,t)}else r.l=n;return s}function zce(r,e,t){var n=r.l+e,i=Tu(r);i.r=t["!row"];var a=Ao(r),s=[i,a,"n"];if(t.cellFormula){r.l+=2;var o=T_(r,n-r.l,t);s[3]=uo(o,null,i,t.supbooks,t)}else r.l=n;return s}function qce(r,e,t){var n=r.l+e,i=Tu(r);i.r=t["!row"];var a=xo(r),s=[i,a,"str"];if(t.cellFormula){r.l+=2;var o=T_(r,n-r.l,t);s[3]=uo(o,null,i,t.supbooks,t)}else r.l=n;return s}var jce=a0;function $ce(r,e){var t=r.l+e,n=a0(r),i=bB(r),a=xo(r),s=xo(r),o=xo(r);r.l=t;var l={rfx:n,relId:i,loc:a,display:o};return s&&(l.Tooltip=s),l}function Kce(){}function Vce(r,e,t){var n=r.l+e,i=pU(r),a=r.read_shift(1),s=[i];if(s[2]=a,t.cellFormula){var o=Jue(r,n-r.l,t);s[1]=o}else r.l=n;return s}function Wce(r,e,t){var n=r.l+e,i=a0(r),a=[i];if(t.cellFormula){var s=tce(r,n-r.l,t);a[1]=s,r.l=n}else r.l=n;return a}var Yce=["left","right","top","bottom","header","footer"];function Xce(r){var e={};return Yce.forEach(function(t){e[t]=Ao(r)}),e}function Zce(r){var e=r.read_shift(2);return r.l+=28,{RTL:e&32}}function Jce(){}function ehe(){}function the(r,e,t,n,i,a,s){if(!r)return r;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},u,c={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,f=!1,A,d,p,y,v,w,x,b,C,S=[];o.biff=12,o["!row"]=0;var I=0,B=!1,T=[],M={},F=o.supbooks||i.supbooks||[[]];if(F.sharedf=M,F.arrayf=T,F.SheetNames=i.SheetNames||i.Sheets.map(function(W){return W.name}),!o.supbooks&&(o.supbooks=F,i.Names))for(var N=0;N<i.Names.length;++N)F[0][N+1]=i.Names[N];var O=[],L=[],G=!1;iw[16]={n:"BrtShortReal",f:JU};var R;if(df(r,function(Q,re,oe){if(!f)switch(oe){case 148:u=Q;break;case 0:A=Q,o.sheetRows&&o.sheetRows<=A.r&&(f=!0),b=zs(y=A.r),o["!row"]=A.r,(Q.hidden||Q.hpt||Q.level!=null)&&(Q.hpt&&(Q.hpx=Yv(Q.hpt)),L[Q.r]=Q);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(d={t:Q[2]},Q[2]){case"n":d.v=Q[1];break;case"s":x=dv[Q[1]],d.v=x.t,d.r=x.r;break;case"b":d.v=!!Q[1];break;case"e":d.v=Q[1],o.cellText!==!1&&(d.w=s0[d.v]);break;case"str":d.t="s",d.v=Q[1];break;case"is":d.t="s",d.v=Q[1].t;break}if((p=s.CellXf[Q[0].iStyleRef])&&XU(d,p.numFmtId,null,o,a,s),v=Q[0].c==-1?v+1:Q[0].c,o.dense?(l[y]||(l[y]=[]),l[y][v]=d):l[ns(v)+b]=d,o.cellFormula){for(B=!1,I=0;I<T.length;++I){var P=T[I];A.r>=P[0].s.r&&A.r<=P[0].e.r&&v>=P[0].s.c&&v<=P[0].e.c&&(d.F=Xn(P[0]),B=!0)}!B&&Q.length>3&&(d.f=Q[3])}if(c.s.r>A.r&&(c.s.r=A.r),c.s.c>v&&(c.s.c=v),c.e.r<A.r&&(c.e.r=A.r),c.e.c<v&&(c.e.c=v),o.cellDates&&p&&d.t=="n"&&Bp(gn[p.numFmtId])){var z=Ed(d.v);z&&(d.t="d",d.v=new Date(z.y,z.m-1,z.d,z.H,z.M,z.S,z.u))}R&&(R.type=="XLDAPR"&&(d.D=!0),R=void 0);break;case 1:case 12:if(!o.sheetStubs||h)break;d={t:"z",v:void 0},v=Q[0].c==-1?v+1:Q[0].c,o.dense?(l[y]||(l[y]=[]),l[y][v]=d):l[ns(v)+b]=d,c.s.r>A.r&&(c.s.r=A.r),c.s.c>v&&(c.s.c=v),c.e.r<A.r&&(c.e.r=A.r),c.e.c<v&&(c.e.c=v),R&&(R.type=="XLDAPR"&&(d.D=!0),R=void 0);break;case 176:S.push(Q);break;case 49:R=((o.xlmeta||{}).Cell||[])[Q-1];break;case 494:var K=n["!id"][Q.relId];for(K?(Q.Target=K.Target,Q.loc&&(Q.Target+="#"+Q.loc),Q.Rel=K):Q.relId==""&&(Q.Target="#"+Q.loc),y=Q.rfx.s.r;y<=Q.rfx.e.r;++y)for(v=Q.rfx.s.c;v<=Q.rfx.e.c;++v)o.dense?(l[y]||(l[y]=[]),l[y][v]||(l[y][v]={t:"z",v:void 0}),l[y][v].l=Q):(w=nn({c:v,r:y}),l[w]||(l[w]={t:"z",v:void 0}),l[w].l=Q);break;case 426:if(!o.cellFormula)break;T.push(Q),C=o.dense?l[y][v]:l[ns(v)+b],C.f=uo(Q[1],c,{r:A.r,c:v},F,o),C.F=Xn(Q[0]);break;case 427:if(!o.cellFormula)break;M[nn(Q[0].s)]=Q[1],C=o.dense?l[y][v]:l[ns(v)+b],C.f=uo(Q[1],c,{r:A.r,c:v},F,o);break;case 60:if(!o.cellStyles)break;for(;Q.e>=Q.s;)O[Q.e--]={width:Q.w/256,hidden:!!(Q.flags&1),level:Q.level},G||(G=!0,NB(Q.w/256)),np(O[Q.e+1]);break;case 161:l["!autofilter"]={ref:Xn(Q)};break;case 476:l["!margins"]=Q;break;case 147:i.Sheets[t]||(i.Sheets[t]={}),Q.name&&(i.Sheets[t].CodeName=Q.name),(Q.above||Q.left)&&(l["!outline"]={above:Q.above,left:Q.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),Q.RTL&&(i.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!re.T){if(!h||o.WTF)throw new Error("Unexpected record 0x"+oe.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(c.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=Xn(u||c)),o.sheetRows&&l["!ref"]){var U=ma(l["!ref"]);o.sheetRows<=+U.e.r&&(U.e.r=o.sheetRows-1,U.e.r>c.e.r&&(U.e.r=c.e.r),U.e.r<U.s.r&&(U.s.r=U.e.r),U.e.c>c.e.c&&(U.e.c=c.e.c),U.e.c<U.s.c&&(U.s.c=U.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Xn(U))}return S.length>0&&(l["!merges"]=S),O.length>0&&(l["!cols"]=O),L.length>0&&(l["!rows"]=L),l}function rhe(r){var e=[],t=r.match(/^<c:numCache>/),n;(r.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var s=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);s&&(e[+s[1]]=t?+s[2]:s[2])});var i=ri((r.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(r.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[e,i,n]}function nhe(r,e,t,n,i,a){var s=a||{"!type":"chart"};if(!r)return a;var o=0,l=0,u="A",c={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(r.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var f=rhe(h);c.s.r=c.s.c=0,c.e.c=o,u=ns(o),f[0].forEach(function(A,d){s[u+zs(d)]={t:"n",v:A,z:f[1]},l=d}),c.e.r<l&&(c.e.r=l),++o}),o>0&&(s["!ref"]=Xn(c)),s}function ihe(r,e,t,n,i){if(!r)return r;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},s,o=r.match(ZU);return o&&FB(o[0],a,i,t),(s=r.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=s[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function ahe(r,e){r.l+=10;var t=xo(r);return{name:t}}function she(r,e,t,n,i){if(!r)return r;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},s=!1;return df(r,function(l,u,c){switch(c){case 550:a["!rel"]=l;break;case 651:i.Sheets[t]||(i.Sheets[t]={}),l.name&&(i.Sheets[t].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!s||e.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}},e),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var e7=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],ohe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],lhe=[],uhe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function WI(r,e){for(var t=0;t!=r.length;++t)for(var n=r[t],i=0;i!=e.length;++i){var a=e[i];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=Ji(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function YI(r,e){for(var t=0;t!=e.length;++t){var n=e[t];if(r[n[0]]==null)r[n[0]]=n[1];else switch(n[2]){case"bool":typeof r[n[0]]=="string"&&(r[n[0]]=Ji(r[n[0]]));break;case"int":typeof r[n[0]]=="string"&&(r[n[0]]=parseInt(r[n[0]],10));break}}}function t7(r){YI(r.WBProps,e7),YI(r.CalcPr,uhe),WI(r.WBView,ohe),WI(r.Sheets,lhe),Dg.date1904=Ji(r.WBProps.date1904)}var che="][*?/\\".split("");function hhe(r,e){if(r.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return che.forEach(function(n){if(r.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}var fhe=/<\w+:workbook/;function Ahe(r,e){if(!r)throw new Error("Could not find file");var t={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,i="xmlns",a={},s=0;if(r.replace(Co,function(l,u){var c=Kr(l);switch(lh(c[0])){case"<?xml":break;case"<workbook":l.match(fhe)&&(i="xmlns"+l.match(/<(\w+):/)[1]),t.xmlns=c[i];break;case"</workbook>":break;case"<fileVersion":delete c[0],t.AppVersion=c;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":e7.forEach(function(h){if(c[h[0]]!=null)switch(h[2]){case"bool":t.WBProps[h[0]]=Ji(c[h[0]]);break;case"int":t.WBProps[h[0]]=parseInt(c[h[0]],10);break;default:t.WBProps[h[0]]=c[h[0]]}}),c.codeName&&(t.WBProps.CodeName=qi(c.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete c[0],t.WBView.push(c);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(c.state){case"hidden":c.Hidden=1;break;case"veryHidden":c.Hidden=2;break;default:c.Hidden=0}delete c.state,c.name=ri(qi(c.name)),delete c[0],t.Sheets.push(c);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=qi(c.name),c.comment&&(a.Comment=c.comment),c.localSheetId&&(a.Sheet=+c.localSheetId),Ji(c.hidden||"0")&&(a.Hidden=!0),s=u+l.length;break;case"</definedName>":a.Ref=ri(qi(r.slice(s,u))),t.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete c[0],t.CalcPr=c;break;case"<calcPr/>":delete c[0],t.CalcPr=c;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+c[0]+" in workbook")}return l}),Fie.indexOf(t.xmlns)===-1)throw new Error("Unknown Namespace: "+t.xmlns);return t7(t),t}function dhe(r,e){var t={};return t.Hidden=r.read_shift(4),t.iTabID=r.read_shift(4),t.strRelID=yS(r),t.name=xo(r),t}function ghe(r,e){var t={},n=r.read_shift(4);t.defaultThemeVersion=r.read_shift(4);var i=e>8?xo(r):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(n&65536),t.backupFile=!!(n&64),t.checkCompatibility=!!(n&4096),t.date1904=!!(n&1),t.filterPrivacy=!!(n&8),t.hidePivotFieldList=!!(n&1024),t.promptedSolutions=!!(n&16),t.publishItems=!!(n&2048),t.refreshAllConnections=!!(n&262144),t.saveExternalLinkValues=!!(n&128),t.showBorderUnselectedTables=!!(n&4),t.showInkAnnotation=!!(n&32),t.showObjects=["all","placeholders","none"][n>>13&3],t.showPivotChartFilter=!!(n&32768),t.updateLinks=["userSet","never","always"][n>>8&3],t}function phe(r,e){var t={};return r.read_shift(4),t.ArchID=r.read_shift(4),r.l+=e-8,t}function mhe(r,e,t){var n=r.l+e;r.l+=4,r.l+=1;var i=r.read_shift(4),a=Wie(r),s=ece(r,0,t),o=bB(r);r.l=n;var l={Name:a,Ptg:s};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function vhe(r,e){var t={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],i=!1;e||(e={}),e.biff=12;var a=[],s=[[]];return s.SheetNames=[],s.XTI=[],iw[16]={n:"BrtFRTArchID$",f:phe},df(r,function(l,u,c){switch(c){case 156:s.SheetNames.push(l.name),t.Sheets.push(l);break;case 153:t.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=uo(l.Ptg,null,null,s,e),delete e.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:s[0].length?s.push([c,l]):s[0]=[c,l],s[s.length-1].XTI=[];break;case 362:s.length===0&&(s[0]=[],s[0].XTI=[]),s[s.length-1].XTI=s[s.length-1].XTI.concat(l),s.XTI=s.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(c),i=!0;break;case 36:n.pop(),i=!1;break;case 37:n.push(c),i=!0;break;case 38:n.pop(),i=!1;break;case 16:break;default:if(!u.T){if(!i||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+c.toString(16))}}},e),t7(t),t.Names=a,t.supbooks=s,t}function yhe(r,e,t){return e.slice(-4)===".bin"?vhe(r,t):Ahe(r,t)}function xhe(r,e,t,n,i,a,s,o){return e.slice(-4)===".bin"?the(r,n,t,i,a,s,o):dce(r,n,t,i,a,s,o)}function whe(r,e,t,n,i,a,s,o){return e.slice(-4)===".bin"?she(r,n,t,i,a):ihe(r,n,t,i,a)}function _he(r,e,t,n,i,a,s,o){return e.slice(-4)===".bin"?Ile():Fle()}function Ehe(r,e,t,n,i,a,s,o){return e.slice(-4)===".bin"?Tle():Nle()}function bhe(r,e,t,n){return e.slice(-4)===".bin"?joe(r,t,n):Uoe(r,t,n)}function Che(r,e,t){return GU(r,t)}function She(r,e,t){return e.slice(-4)===".bin"?ooe(r,t):aoe(r,t)}function Bhe(r,e,t){return e.slice(-4)===".bin"?Cle(r,t):xle(r,t)}function The(r,e,t){return e.slice(-4)===".bin"?mle(r):gle(r)}function Nhe(r,e,t,n){return t.slice(-4)===".bin"?vle(r,e,t,n):void 0}function Ihe(r,e,t){return e.slice(-4)===".bin"?Ale(r,e,t):dle(r,e,t)}var r7=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,n7=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Uu(r,e){var t=r.split(/\s+/),n=[];if(n[0]=t[0],t.length===1)return n;var i=r.match(r7),a,s,o,l;if(i)for(l=0;l!=i.length;++l)a=i[l].match(n7),(s=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(s+1),n[o]=a[2].slice(1,a[2].length-1));return n}function Fhe(r){var e=r.split(/\s+/),t={};if(e.length===1)return t;var n=r.match(r7),i,a,s,o;if(n)for(o=0;o!=n.length;++o)i=n[o].match(n7),(a=i[1].indexOf(":"))===-1?t[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?s="xmlns"+i[1].slice(6):s=i[1].slice(a+1),t[s]=i[2].slice(1,i[2].length-1));return t}var pv;function Mhe(r,e){var t=pv[r]||ri(r);return t==="General"?Hd(e):Cu(t,e)}function Lhe(r,e,t,n){var i=n;switch((t[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=Ji(n);break;case"i2":case"int":i=parseInt(n,10);break;case"r4":case"float":i=parseFloat(n);break;case"date":case"dateTime.tz":i=Ss(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+t[0])}r[ri(e)]=i}function Dhe(r,e,t){if(r.t!=="z"){if(!t||t.cellText!==!1)try{r.t==="e"?r.w=r.w||s0[r.v]:e==="General"?r.t==="n"?(r.v|0)===r.v?r.w=r.v.toString(10):r.w=jv(r.v):r.w=Hd(r.v):r.w=Mhe(e||"General",r.v)}catch(a){if(t.WTF)throw a}try{var n=pv[e]||e||"General";if(t.cellNF&&(r.z=n),t.cellDates&&r.t=="n"&&Bp(n)){var i=Ed(r.v);i&&(r.t="d",r.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}catch(a){if(t.WTF)throw a}}}function khe(r,e,t){if(t.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=Loe[n.Pattern]||n.Pattern)}r[e.ID]=e}function Rhe(r,e,t,n,i,a,s,o,l,u){var c="General",h=n.StyleID,f={};u=u||{};var A=[],d=0;for(h===void 0&&o&&(h=o.StyleID),h===void 0&&s&&(h=s.StyleID);a[h]!==void 0&&(a[h].nf&&(c=a[h].nf),a[h].Interior&&A.push(a[h].Interior),!!a[h].Parent);)h=a[h].Parent;switch(t.Type){case"Boolean":n.t="b",n.v=Ji(r);break;case"String":n.t="s",n.r=vI(ri(r)),n.v=r.indexOf("<")>-1?ri(e||r).replace(/<.*?>/g,""):n.r;break;case"DateTime":r.slice(-1)!="Z"&&(r+="Z"),n.v=(Ss(r)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=ri(r):n.v<60&&(n.v=n.v-1),(!c||c=="General")&&(c="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+r),n.t||(n.t="n");break;case"Error":n.t="e",n.v=yU[r],u.cellText!==!1&&(n.w=r);break;default:r==""&&e==""?n.t="z":(n.t="s",n.v=vI(e||r));break}if(Dhe(n,c,u),u.cellFormula!==!1)if(n.Formula){var p=ri(n.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),n.f=Lg(p,i),delete n.Formula,n.ArrayRange=="RC"?n.F=Lg("RC:RC",i):n.ArrayRange&&(n.F=Lg(n.ArrayRange,i),l.push([ma(n.F),n.F]))}else for(d=0;d<l.length;++d)i.r>=l[d][0].s.r&&i.r<=l[d][0].e.r&&i.c>=l[d][0].s.c&&i.c<=l[d][0].e.c&&(n.F=l[d][1]);u.cellStyles&&(A.forEach(function(y){!f.patternType&&y.patternType&&(f.patternType=y.patternType)}),n.s=f),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function Ohe(r){r.t=r.v||"",r.t=r.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),r.v=r.w=r.ixfe=void 0}function Ib(r,e){var t=e||{};jP();var n=Lm(yB(r));(t.type=="binary"||t.type=="array"||t.type=="base64")&&(n=qi(n));var i=n.slice(0,1024).toLowerCase(),a=!1;if(i=i.replace(/".*?"/g,""),(i.indexOf(">")&1023)>Math.min(i.indexOf(",")&1023,i.indexOf(";")&1023)){var s=Hs(t);return s.type="string",Vv.to_workbook(n,s)}if(i.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ne){i.indexOf("<"+ne)>=0&&(a=!0)}),a)return $he(n,t);pv={"General Number":"General","General Date":gn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":gn[15],"Short Date":gn[14],"Long Time":gn[19],"Medium Time":gn[18],"Short Time":gn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:gn[2],Standard:gn[4],Percent:gn[10],Scientific:gn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],u,c={},h=[],f=t.dense?[]:{},A="",d={},p={},y=Uu('<Data ss:Type="String">'),v=0,w=0,x=0,b={s:{r:2e6,c:2e6},e:{r:0,c:0}},C={},S={},I="",B=0,T=[],M={},F={},N=0,O=[],L=[],G={},R=[],U,W=!1,Q=[],re=[],oe={},P=0,z=0,K={Sheets:[],WBProps:{date1904:!1}},J={};Kv.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ue="";o=Kv.exec(n);)switch(o[3]=(ue=o[3]).toLowerCase()){case"data":if(ue=="data"){if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?Rhe(n.slice(v,o.index),I,y,l[l.length-1][0]=="comment"?G:d,{c:w,r:x},C,R[w],p,Q,t):(I="",y=Uu(o[0]),v=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(L.length>0&&(d.c=L),(!t.sheetRows||t.sheetRows>x)&&d.v!==void 0&&(t.dense?(f[x]||(f[x]=[]),f[x][w]=d):f[ns(w)+zs(x)]=d),d.HRef&&(d.l={Target:ri(d.HRef)},d.HRefScreenTip&&(d.l.Tooltip=d.HRefScreenTip),delete d.HRef,delete d.HRefScreenTip),(d.MergeAcross||d.MergeDown)&&(P=w+(parseInt(d.MergeAcross,10)|0),z=x+(parseInt(d.MergeDown,10)|0),T.push({s:{c:w,r:x},e:{c:P,r:z}})),!t.sheetStubs)d.MergeAcross?w=P+1:++w;else if(d.MergeAcross||d.MergeDown){for(var ge=w;ge<=P;++ge)for(var le=x;le<=z;++le)(ge>w||le>x)&&(t.dense?(f[le]||(f[le]=[]),f[le][ge]={t:"z"}):f[ns(ge)+zs(le)]={t:"z"});w=P+1}else++w;else d=Fhe(o[0]),d.Index&&(w=+d.Index-1),w<b.s.c&&(b.s.c=w),w>b.e.c&&(b.e.c=w),o[0].slice(-2)==="/>"&&++w,L=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(x<b.s.r&&(b.s.r=x),x>b.e.r&&(b.e.r=x),o[0].slice(-2)==="/>"&&(p=Uu(o[0]),p.Index&&(x=+p.Index-1)),w=0,++x):(p=Uu(o[0]),p.Index&&(x=+p.Index-1),oe={},(p.AutoFitHeight=="0"||p.Height)&&(oe.hpx=parseInt(p.Height,10),oe.hpt=QU(oe.hpx),re[x]=oe),p.Hidden=="1"&&(oe.hidden=!0,re[x]=oe));break;case"worksheet":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));h.push(A),b.s.r<=b.e.r&&b.s.c<=b.e.c&&(f["!ref"]=Xn(b),t.sheetRows&&t.sheetRows<=b.e.r&&(f["!fullref"]=f["!ref"],b.e.r=t.sheetRows-1,f["!ref"]=Xn(b))),T.length&&(f["!merges"]=T),R.length>0&&(f["!cols"]=R),re.length>0&&(f["!rows"]=re),c[A]=f}else b={s:{r:2e6,c:2e6},e:{r:0,c:0}},x=w=0,l.push([o[3],!1]),u=Uu(o[0]),A=ri(u.Name),f=t.dense?[]:{},T=[],Q=[],re=[],J={name:A,Hidden:0},K.Sheets.push(J);break;case"table":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),R=[],W=!1}break;case"style":o[1]==="/"?khe(C,S,t):S=Uu(o[0]);break;case"numberformat":S.nf=ri(Uu(o[0]).Format||"General"),pv[S.nf]&&(S.nf=pv[S.nf]);for(var me=0;me!=392&&gn[me]!=S.nf;++me);if(me==392){for(me=57;me!=392;++me)if(gn[me]==null){Nd(S.nf,me);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(U=Uu(o[0]),U.Hidden&&(U.hidden=!0,delete U.Hidden),U.Width&&(U.wpx=parseInt(U.Width,10)),!W&&U.wpx>10){W=!0,Po=PU;for(var xe=0;xe<R.length;++xe)R[xe]&&np(R[xe])}W&&np(U),R[U.Index-1||R.length]=U;for(var Be=0;Be<+U.Span;++Be)R[R.length]=Hs(U);break;case"namedrange":if(o[1]==="/")break;K.Names||(K.Names=[]);var Y=Kr(o[0]),Ve={Name:Y.Name,Ref:Lg(Y.RefersTo.slice(1),{r:0,c:0})};K.Sheets.length>0&&(Ve.Sheet=K.Sheets.length-1),K.Names.push(Ve);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?I+=n.slice(B,o.index):B=o.index+o[0].length;break;case"interior":if(!t.cellStyles)break;S.Interior=Uu(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?xae(M,ue,n.slice(N,o.index)):N=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));Ohe(G),L.push(G)}else l.push([o[3],!1]),u=Uu(o[0]),G={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var te=Uu(o[0]);f["!autofilter"]={ref:Lg(te.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return rF(n,t);var se=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:se=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:se=!1}break;case"excelworkbook":switch(o[3]){case"date1904":K.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:se=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:se=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(N,o.index)){case"SheetHidden":J.Hidden=1;break;case"SheetVeryHidden":J.Hidden=2;break}else N=o.index+o[0].length;break;case"header":f["!margins"]||gv(f["!margins"]={},"xlml"),isNaN(+Kr(o[0]).Margin)||(f["!margins"].header=+Kr(o[0]).Margin);break;case"footer":f["!margins"]||gv(f["!margins"]={},"xlml"),isNaN(+Kr(o[0]).Margin)||(f["!margins"].footer=+Kr(o[0]).Margin);break;case"pagemargins":var Z=Kr(o[0]);f["!margins"]||gv(f["!margins"]={},"xlml"),isNaN(+Z.Top)||(f["!margins"].top=+Z.Top),isNaN(+Z.Left)||(f["!margins"].left=+Z.Left),isNaN(+Z.Right)||(f["!margins"].right=+Z.Right),isNaN(+Z.Bottom)||(f["!margins"].bottom=+Z.Bottom);break;case"displayrighttoleft":K.Views||(K.Views=[]),K.Views[0]||(K.Views[0]={}),K.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:se=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:se=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:se=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:se=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:se=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:se=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:se=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:se=!1}break;case"smarttags":break;default:se=!1;break}if(se||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Lhe(F,ue,O,n.slice(N,o.index)):(O=o,N=o.index+o[0].length);break}if(t.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var he={};return!t.bookSheets&&!t.bookProps&&(he.Sheets=c),he.SheetNames=h,he.Workbook=K,he.SSF=Hs(gn),he.Props=M,he.Custprops=F,he}function ES(r,e){switch(DB(e=e||{}),e.type||"base64"){case"base64":return Ib($l(r),e);case"binary":case"buffer":case"file":return Ib(r,e);case"array":return Ib(n0(r),e)}}function Phe(r){var e={},t=r.content;if(t.l=28,e.AnsiUserType=t.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=Zie(t),t.length-t.l<=4)return e;var n=t.read_shift(4);if(n==0||n>40||(t.l-=4,e.Reserved1=t.read_shift(0,"lpstr-ansi"),t.length-t.l<=4)||(n=t.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=Jie(t),n=t.read_shift(4),n==0||n>40))return e;t.l-=4,e.Reserved2=t.read_shift(0,"lpwstr")}var Uhe=[60,1084,2066,2165,2175];function Qhe(r,e,t,n,i){var a=n,s=[],o=t.slice(t.l,t.l+a);if(i&&i.enc&&i.enc.insitu&&o.length>0)switch(r){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:i.enc.insitu(o)}s.push(o),t.l+=a;for(var l=qh(t,t.l),u=bS[l],c=0;u!=null&&Uhe.indexOf(l)>-1;)a=qh(t,t.l+2),c=t.l+4,l==2066?c+=4:(l==2165||l==2175)&&(c+=12),o=t.slice(c,t.l+4+a),s.push(o),t.l+=4+a,u=bS[l=qh(t,t.l)];var h=sA(s);Rs(h,0);var f=0;h.lens=[];for(var A=0;A<s.length;++A)h.lens.push(f),f+=s[A].length;if(h.length<n)throw"XLS Record 0x"+r.toString(16)+" Truncated: "+h.length+" < "+n;return e.f(h,h.length,i)}function Lc(r,e,t){if(r.t!=="z"&&r.XF){var n=0;try{n=r.z||r.XF.numFmtId||0,e.cellNF&&(r.z=gn[n])}catch(a){if(e.WTF)throw a}if(!e||e.cellText!==!1)try{r.t==="e"?r.w=r.w||s0[r.v]:n===0||n=="General"?r.t==="n"?(r.v|0)===r.v?r.w=r.v.toString(10):r.w=jv(r.v):r.w=Hd(r.v):r.w=Cu(n,r.v,{date1904:!!t,dateNF:e&&e.dateNF})}catch(a){if(e.WTF)throw a}if(e.cellDates&&n&&r.t=="n"&&Bp(gn[n]||String(n))){var i=Ed(r.v);i&&(r.t="d",r.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}}function Vy(r,e,t){return{v:r,ixfe:e,t}}function Ghe(r,e){var t={opts:{}},n={},i=e.dense?[]:{},a={},s={},o=null,l=[],u="",c={},h,f="",A,d,p,y,v={},w=[],x,b,C=[],S=[],I={Sheets:[],WBProps:{date1904:!1},Views:[{}]},B={},T=function(Ye){return Ye<8?Id[Ye]:Ye<64&&S[Ye-8]||Id[Ye]},M=function(Ye,Ke,mt){var vt=Ke.XF.data;if(!(!vt||!vt.patternType||!mt||!mt.cellStyles)){Ke.s={},Ke.s.patternType=vt.patternType;var Dt;(Dt=Wv(T(vt.icvFore)))&&(Ke.s.fgColor={rgb:Dt}),(Dt=Wv(T(vt.icvBack)))&&(Ke.s.bgColor={rgb:Dt})}},F=function(Ye,Ke,mt){if(!(oe>1)&&!(mt.sheetRows&&Ye.r>=mt.sheetRows)){if(mt.cellStyles&&Ke.XF&&Ke.XF.data&&M(Ye,Ke,mt),delete Ke.ixfe,delete Ke.XF,h=Ye,f=nn(Ye),(!s||!s.s||!s.e)&&(s={s:{r:0,c:0},e:{r:0,c:0}}),Ye.r<s.s.r&&(s.s.r=Ye.r),Ye.c<s.s.c&&(s.s.c=Ye.c),Ye.r+1>s.e.r&&(s.e.r=Ye.r+1),Ye.c+1>s.e.c&&(s.e.c=Ye.c+1),mt.cellFormula&&Ke.f){for(var vt=0;vt<w.length;++vt)if(!(w[vt][0].s.c>Ye.c||w[vt][0].s.r>Ye.r)&&!(w[vt][0].e.c<Ye.c||w[vt][0].e.r<Ye.r)){Ke.F=Xn(w[vt][0]),(w[vt][0].s.c!=Ye.c||w[vt][0].s.r!=Ye.r)&&delete Ke.f,Ke.f&&(Ke.f=""+uo(w[vt][1],s,Ye,Q,N));break}}mt.dense?(i[Ye.r]||(i[Ye.r]=[]),i[Ye.r][Ye.c]=Ke):i[f]=Ke}},N={enc:!1,sbcch:0,snames:[],sharedf:v,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(N.password=e.password);var O,L=[],G=[],R=[],U=[],W=!1,Q=[];Q.SheetNames=N.snames,Q.sharedf=N.sharedf,Q.arrayf=N.arrayf,Q.names=[],Q.XTI=[];var re=0,oe=0,P=0,z=[],K=[],J;N.codepage=1200,ec(1200);for(var ue=!1;r.l<r.length-1;){var ge=r.l,le=r.read_shift(2);if(le===0&&re===10)break;var me=r.l===r.length?0:r.read_shift(2),xe=bS[le];if(xe&&xe.f){if(e.bookSheets&&re===133&&le!==133)break;if(re=le,xe.r===2||xe.r==12){var Be=r.read_shift(2);if(me-=2,!N.enc&&Be!==le&&((Be&255)<<8|Be>>8)!==le)throw new Error("rt mismatch: "+Be+"!="+le);xe.r==12&&(r.l+=10,me-=10)}var Y={};if(le===10?Y=xe.f(r,me,N):Y=Qhe(le,xe,r,me,N),oe==0&&[9,521,1033,2057].indexOf(re)===-1)continue;switch(le){case 34:t.opts.Date1904=I.WBProps.date1904=Y;break;case 134:t.opts.WriteProtect=!0;break;case 47:if(N.enc||(r.l=0),N.enc=Y,!e.password)throw new Error("File is password-protected");if(Y.valid==null)throw new Error("Encryption scheme unsupported");if(!Y.valid)throw new Error("Password is incorrect");break;case 92:N.lastuser=Y;break;case 66:var Ve=Number(Y);switch(Ve){case 21010:Ve=1200;break;case 32768:Ve=1e4;break;case 32769:Ve=1252;break}ec(N.codepage=Ve),ue=!0;break;case 317:N.rrtabid=Y;break;case 25:N.winlocked=Y;break;case 439:t.opts.RefreshAll=Y;break;case 12:t.opts.CalcCount=Y;break;case 16:t.opts.CalcDelta=Y;break;case 17:t.opts.CalcIter=Y;break;case 13:t.opts.CalcMode=Y;break;case 14:t.opts.CalcPrecision=Y;break;case 95:t.opts.CalcSaveRecalc=Y;break;case 15:N.CalcRefMode=Y;break;case 2211:t.opts.FullCalc=Y;break;case 129:Y.fDialog&&(i["!type"]="dialog"),Y.fBelow||((i["!outline"]||(i["!outline"]={})).above=!0),Y.fRight||((i["!outline"]||(i["!outline"]={})).left=!0);break;case 224:C.push(Y);break;case 430:Q.push([Y]),Q[Q.length-1].XTI=[];break;case 35:case 547:Q[Q.length-1].push(Y);break;case 24:case 536:J={Name:Y.Name,Ref:uo(Y.rgce,s,null,Q,N)},Y.itab>0&&(J.Sheet=Y.itab-1),Q.names.push(J),Q[0]||(Q[0]=[],Q[0].XTI=[]),Q[Q.length-1].push(Y),Y.Name=="_xlnm._FilterDatabase"&&Y.itab>0&&Y.rgce&&Y.rgce[0]&&Y.rgce[0][0]&&Y.rgce[0][0][0]=="PtgArea3d"&&(K[Y.itab-1]={ref:Xn(Y.rgce[0][0][1][2])});break;case 22:N.ExternCount=Y;break;case 23:Q.length==0&&(Q[0]=[],Q[0].XTI=[]),Q[Q.length-1].XTI=Q[Q.length-1].XTI.concat(Y),Q.XTI=Q.XTI.concat(Y);break;case 2196:if(N.biff<8)break;J!=null&&(J.Comment=Y[1]);break;case 18:i["!protect"]=Y;break;case 19:Y!==0&&N.WTF&&console.error("Password verifier: "+Y);break;case 133:a[Y.pos]=Y,N.snames.push(Y.name);break;case 10:{if(--oe)break;if(s.e){if(s.e.r>0&&s.e.c>0){if(s.e.r--,s.e.c--,i["!ref"]=Xn(s),e.sheetRows&&e.sheetRows<=s.e.r){var te=s.e.r;s.e.r=e.sheetRows-1,i["!fullref"]=i["!ref"],i["!ref"]=Xn(s),s.e.r=te}s.e.r++,s.e.c++}L.length>0&&(i["!merges"]=L),G.length>0&&(i["!objects"]=G),R.length>0&&(i["!cols"]=R),U.length>0&&(i["!rows"]=U),I.Sheets.push(B)}u===""?c=i:n[u]=i,i=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(N.biff===8&&(N.biff={9:2,521:3,1033:4}[le]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[Y.BIFFVer]||8),N.biffguess=Y.BIFFVer==0,Y.BIFFVer==0&&Y.dt==4096&&(N.biff=5,ue=!0,ec(N.codepage=28591)),N.biff==8&&Y.BIFFVer==0&&Y.dt==16&&(N.biff=2),oe++)break;if(i=e.dense?[]:{},N.biff<8&&!ue&&(ue=!0,ec(N.codepage=e.codepage||1252)),N.biff<5||Y.BIFFVer==0&&Y.dt==4096){u===""&&(u="Sheet1"),s={s:{r:0,c:0},e:{r:0,c:0}};var se={pos:r.l-me,name:u};a[se.pos]=se,N.snames.push(u)}else u=(a[ge]||{name:""}).name;Y.dt==32&&(i["!type"]="chart"),Y.dt==64&&(i["!type"]="macro"),L=[],G=[],N.arrayf=w=[],R=[],U=[],W=!1,B={Hidden:(a[ge]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:i["!type"]=="chart"&&(e.dense?(i[Y.r]||[])[Y.c]:i[nn({c:Y.c,r:Y.r})])&&++Y.c,x={ixfe:Y.ixfe,XF:C[Y.ixfe]||{},v:Y.val,t:"n"},P>0&&(x.z=z[x.ixfe>>8&63]),Lc(x,e,t.opts.Date1904),F({c:Y.c,r:Y.r},x,e);break;case 5:case 517:x={ixfe:Y.ixfe,XF:C[Y.ixfe],v:Y.val,t:Y.t},P>0&&(x.z=z[x.ixfe>>8&63]),Lc(x,e,t.opts.Date1904),F({c:Y.c,r:Y.r},x,e);break;case 638:x={ixfe:Y.ixfe,XF:C[Y.ixfe],v:Y.rknum,t:"n"},P>0&&(x.z=z[x.ixfe>>8&63]),Lc(x,e,t.opts.Date1904),F({c:Y.c,r:Y.r},x,e);break;case 189:for(var Z=Y.c;Z<=Y.C;++Z){var he=Y.rkrec[Z-Y.c][0];x={ixfe:he,XF:C[he],v:Y.rkrec[Z-Y.c][1],t:"n"},P>0&&(x.z=z[x.ixfe>>8&63]),Lc(x,e,t.opts.Date1904),F({c:Z,r:Y.r},x,e)}break;case 6:case 518:case 1030:{if(Y.val=="String"){o=Y;break}if(x=Vy(Y.val,Y.cell.ixfe,Y.tt),x.XF=C[x.ixfe],e.cellFormula){var ne=Y.formula;if(ne&&ne[0]&&ne[0][0]&&ne[0][0][0]=="PtgExp"){var ae=ne[0][0][1][0],_e=ne[0][0][1][1],Me=nn({r:ae,c:_e});v[Me]?x.f=""+uo(Y.formula,s,Y.cell,Q,N):x.F=((e.dense?(i[ae]||[])[_e]:i[Me])||{}).F}else x.f=""+uo(Y.formula,s,Y.cell,Q,N)}P>0&&(x.z=z[x.ixfe>>8&63]),Lc(x,e,t.opts.Date1904),F(Y.cell,x,e),o=Y}break;case 7:case 519:if(o)o.val=Y,x=Vy(Y,o.cell.ixfe,"s"),x.XF=C[x.ixfe],e.cellFormula&&(x.f=""+uo(o.formula,s,o.cell,Q,N)),P>0&&(x.z=z[x.ixfe>>8&63]),Lc(x,e,t.opts.Date1904),F(o.cell,x,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(Y);var be=nn(Y[0].s);if(A=e.dense?(i[Y[0].s.r]||[])[Y[0].s.c]:i[be],e.cellFormula&&A){if(!o||!be||!A)break;A.f=""+uo(Y[1],s,Y[0],Q,N),A.F=Xn(Y[0])}}break;case 1212:{if(!e.cellFormula)break;if(f){if(!o)break;v[nn(o.cell)]=Y[0],A=e.dense?(i[o.cell.r]||[])[o.cell.c]:i[nn(o.cell)],(A||{}).f=""+uo(Y[0],s,h,Q,N)}}break;case 253:x=Vy(l[Y.isst].t,Y.ixfe,"s"),l[Y.isst].h&&(x.h=l[Y.isst].h),x.XF=C[x.ixfe],P>0&&(x.z=z[x.ixfe>>8&63]),Lc(x,e,t.opts.Date1904),F({c:Y.c,r:Y.r},x,e);break;case 513:e.sheetStubs&&(x={ixfe:Y.ixfe,XF:C[Y.ixfe],t:"z"},P>0&&(x.z=z[x.ixfe>>8&63]),Lc(x,e,t.opts.Date1904),F({c:Y.c,r:Y.r},x,e));break;case 190:if(e.sheetStubs)for(var Ae=Y.c;Ae<=Y.C;++Ae){var pe=Y.ixfe[Ae-Y.c];x={ixfe:pe,XF:C[pe],t:"z"},P>0&&(x.z=z[x.ixfe>>8&63]),Lc(x,e,t.opts.Date1904),F({c:Ae,r:Y.r},x,e)}break;case 214:case 516:case 4:x=Vy(Y.val,Y.ixfe,"s"),x.XF=C[x.ixfe],P>0&&(x.z=z[x.ixfe>>8&63]),Lc(x,e,t.opts.Date1904),F({c:Y.c,r:Y.r},x,e);break;case 0:case 512:oe===1&&(s=Y);break;case 252:l=Y;break;case 1054:if(N.biff==4){z[P++]=Y[1];for(var Fe=0;Fe<P+163&&gn[Fe]!=Y[1];++Fe);Fe>=163&&Nd(Y[1],P+163)}else Nd(Y[1],Y[0]);break;case 30:{z[P++]=Y;for(var Ge=0;Ge<P+163&&gn[Ge]!=Y;++Ge);Ge>=163&&Nd(Y,P+163)}break;case 229:L=L.concat(Y);break;case 93:G[Y.cmo[0]]=N.lastobj=Y;break;case 438:N.lastobj.TxO=Y;break;case 127:N.lastobj.ImData=Y;break;case 440:for(y=Y[0].s.r;y<=Y[0].e.r;++y)for(p=Y[0].s.c;p<=Y[0].e.c;++p)A=e.dense?(i[y]||[])[p]:i[nn({c:p,r:y})],A&&(A.l=Y[1]);break;case 2048:for(y=Y[0].s.r;y<=Y[0].e.r;++y)for(p=Y[0].s.c;p<=Y[0].e.c;++p)A=e.dense?(i[y]||[])[p]:i[nn({c:p,r:y})],A&&A.l&&(A.l.Tooltip=Y[1]);break;case 28:{if(N.biff<=5&&N.biff>=2)break;A=e.dense?(i[Y[0].r]||[])[Y[0].c]:i[nn(Y[0])];var Ze=G[Y[2]];A||(e.dense?(i[Y[0].r]||(i[Y[0].r]=[]),A=i[Y[0].r][Y[0].c]={t:"z"}):A=i[nn(Y[0])]={t:"z"},s.e.r=Math.max(s.e.r,Y[0].r),s.s.r=Math.min(s.s.r,Y[0].r),s.e.c=Math.max(s.e.c,Y[0].c),s.s.c=Math.min(s.s.c,Y[0].c)),A.c||(A.c=[]),d={a:Y[1],t:Ze.TxO.t},A.c.push(d)}break;case 2173:ule(C[Y.ixfe],Y.ext);break;case 125:{if(!N.cellStyles)break;for(;Y.e>=Y.s;)R[Y.e--]={width:Y.w/256,level:Y.level||0,hidden:!!(Y.flags&1)},W||(W=!0,NB(Y.w/256)),np(R[Y.e+1])}break;case 520:{var He={};Y.level!=null&&(U[Y.r]=He,He.level=Y.level),Y.hidden&&(U[Y.r]=He,He.hidden=!0),Y.hpt&&(U[Y.r]=He,He.hpt=Y.hpt,He.hpx=Yv(Y.hpt))}break;case 38:case 39:case 40:case 41:i["!margins"]||gv(i["!margins"]={}),i["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[le]]=Y;break;case 161:i["!margins"]||gv(i["!margins"]={}),i["!margins"].header=Y.header,i["!margins"].footer=Y.footer;break;case 574:Y.RTL&&(I.Views[0].RTL=!0);break;case 146:S=Y;break;case 2198:O=Y;break;case 140:b=Y;break;case 442:u?B.CodeName=Y||B.name:I.WBProps.CodeName=Y||"ThisWorkbook";break}}else xe||console.error("Missing Info for XLS Record 0x"+le.toString(16)),r.l+=me}return t.SheetNames=ih(a).sort(function(Je,Ye){return Number(Je)-Number(Ye)}).map(function(Je){return a[Je].name}),e.bookSheets||(t.Sheets=n),!t.SheetNames.length&&c["!ref"]?(t.SheetNames.push("Sheet1"),t.Sheets&&(t.Sheets.Sheet1=c)):t.Preamble=c,t.Sheets&&K.forEach(function(Je,Ye){t.Sheets[t.SheetNames[Ye]]["!autofilter"]=Je}),t.Strings=l,t.SSF=Hs(gn),N.enc&&(t.Encryption=N.enc),O&&(t.Themes=O),t.Metadata={},b!==void 0&&(t.Metadata.Country=b),Q.names.length>0&&(I.Names=Q.names),t.Workbook=I,t}var XI={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Hhe(r,e,t){var n=Yn.find(r,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var i=DI(n,aae,XI.DSI);for(var a in i)e[a]=i[a]}catch(u){if(t.WTF)throw u}var s=Yn.find(r,"/!SummaryInformation");if(s&&s.size>0)try{var o=DI(s,sae,XI.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(u){if(t.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(wU(e.HeadingPairs,e.TitlesOfParts,e,t),delete e.HeadingPairs,delete e.TitlesOfParts)}function i7(r,e){e||(e={}),DB(e),LP(),e.codepage&&fB(e.codepage);var t,n;if(r.FullPaths){if(Yn.find(r,"/encryption"))throw new Error("File is password-protected");t=Yn.find(r,"!CompObj"),n=Yn.find(r,"/Workbook")||Yn.find(r,"/Book")}else{switch(e.type){case"base64":r=Xu($l(r));break;case"binary":r=Xu(r);break;case"buffer":break;case"array":Array.isArray(r)||(r=Array.prototype.slice.call(r));break}Rs(r,0),n={content:r}}var i,a;if(t&&Phe(t),e.bookProps&&!e.bookSheets)i={};else{var s=zn?"buffer":"array";if(n&&n.content)i=Ghe(n.content,e);else if((a=Yn.find(r,"PerfectOffice_MAIN"))&&a.content)i=Av.to_workbook(a.content,(e.type=s,e));else if((a=Yn.find(r,"NativeContent_MAIN"))&&a.content)i=Av.to_workbook(a.content,(e.type=s,e));else throw(a=Yn.find(r,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&r.FullPaths&&Yn.find(r,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=Ble(r))}var o={};return r.FullPaths&&Hhe(r,o,e),i.Props=i.Custprops=o,e.bookFiles&&(i.cfb=r),i}var iw={0:{f:Ece},1:{f:Bce},2:{f:Rce},3:{f:Fce},4:{f:Nce},5:{f:kce},6:{f:Uce},7:{f:Lce},8:{f:qce},9:{f:zce},10:{f:Gce},11:{f:Hce},12:{f:Tce},13:{f:Oce},14:{f:Mce},15:{f:Ice},16:{f:JU},17:{f:Qce},18:{f:Dce},19:{f:EB},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:mhe},40:{},42:{},43:{f:Goe},44:{f:Qoe},45:{f:Hoe},46:{f:qoe},47:{f:zoe},48:{},49:{f:jie},50:{},51:{f:hle},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:LU},62:{f:Pce},63:{f:ple},64:{f:Jce},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Eo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Zce},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Sce},148:{f:bce,p:16},151:{f:Kce},152:{},153:{f:ghe},154:{},155:{},156:{f:dhe},157:{},158:{},159:{T:1,f:soe},160:{T:-1},161:{T:1,f:a0},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:jce},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:cle},336:{T:-1},337:{f:fle,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:yS},357:{},358:{},359:{},360:{T:1},361:{},362:{f:MU},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Vce},427:{f:Wce},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Xce},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Cce},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:$ce},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:yS},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:ble},633:{T:1},634:{T:-1},635:{T:1,f:Ele},636:{T:-1},637:{f:Kie},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:ahe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:ehe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},bS={6:{f:Tb},10:{f:Vf},12:{f:Pa},13:{f:Pa},14:{f:Ea},15:{f:Ea},16:{f:Ao},17:{f:Ea},18:{f:Ea},19:{f:Pa},20:{f:PI},21:{f:PI},23:{f:MU},24:{f:QI},25:{f:Ea},26:{},27:{},28:{f:wse},29:{},34:{f:Ea},35:{f:UI},38:{f:Ao},39:{f:Ao},40:{f:Ao},41:{f:Ao},42:{f:Ea},43:{f:Ea},47:{f:Coe},49:{f:rse},51:{f:Pa},60:{},61:{f:Jae},64:{f:Ea},65:{f:tse},66:{f:Pa},77:{},80:{},81:{},82:{},85:{f:Pa},89:{},90:{},91:{},92:{f:jae},93:{f:Ese},94:{},95:{f:Ea},96:{},97:{},99:{f:Ea},125:{f:LU},128:{f:fse},129:{f:$ae},130:{f:Pa},131:{f:Ea},132:{f:Ea},133:{f:Kae},134:{},140:{f:Nse},141:{f:Pa},144:{},146:{f:Fse},151:{},152:{},153:{},154:{},155:{},156:{f:Pa},157:{},158:{},160:{f:Rse},161:{f:Lse},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:lse},190:{f:use},193:{f:Vf},197:{},198:{},199:{},200:{},201:{},202:{f:Ea},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Pa},220:{},221:{f:Ea},222:{},224:{f:hse},225:{f:qae},226:{f:Vf},227:{},229:{f:_se},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Vae},253:{f:nse},255:{f:Wae},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:SU},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ea},353:{f:Vf},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:dse},431:{f:Ea},432:{},433:{},434:{},437:{},438:{f:Sse},439:{f:Ea},440:{f:Bse},441:{},442:{f:I1},443:{},444:{f:Pa},445:{},446:{},448:{f:Vf},449:{f:Zae,r:2},450:{f:Vf},512:{f:RI},513:{f:kse},515:{f:Ase},516:{f:ise},517:{f:OI},519:{f:Ose},520:{f:Yae},523:{},545:{f:GI},549:{f:kI},566:{},574:{f:ese},638:{f:ose},659:{},1048:{},1054:{f:ase},1084:{},1212:{f:vse},2048:{f:Tse},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:jy},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Vf},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Mse,r:12},2173:{f:lle,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ea,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:mse,r:12},2197:{},2198:{f:rle,r:12},2199:{},2200:{},2201:{},2202:{f:yse,r:12},2203:{f:Vf},2204:{},2205:{},2206:{},2207:{},2211:{f:Xae},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Pa},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Dse},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Ise},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:RI},1:{},2:{f:Gse},3:{f:Qse},4:{f:Use},5:{f:OI},7:{f:Hse},8:{},9:{f:jy},11:{},22:{f:Pa},30:{f:sse},31:{},32:{},33:{f:GI},36:{},37:{f:kI},50:{f:zse},62:{},52:{},67:{},68:{f:Pa},69:{},86:{},126:{},127:{f:Pse},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:qse},223:{},234:{},354:{},421:{},518:{f:Tb},521:{f:jy},536:{f:QI},547:{f:UI},561:{},579:{},1030:{f:Tb},1033:{f:jy},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Qu(r,e,t,n){var i=e;if(!isNaN(i)){var a=(t||[]).length||0,s=r.next(4);s.write_shift(2,i),s.write_shift(2,a),a>0&&AU(t)&&r.push(t)}}function ZI(r,e){var t=e||{},n=t.dense?[]:{};r=r.replace(/<!--.*?-->/g,"");var i=r.match(/<table/i);if(!i)throw new Error("Invalid HTML: could not find <table>");var a=r.match(/<\/table/i),s=i.index,o=a&&a.index||r.length,l=Aie(r.slice(s,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,c=0,h=0,f=0,A={s:{r:1e7,c:1e7},e:{r:0,c:0}},d=[];for(s=0;s<l.length;++s){var p=l[s].trim(),y=p.slice(0,3).toLowerCase();if(y=="<tr"){if(++u,t.sheetRows&&t.sheetRows<=u){--u;break}c=0;continue}if(!(y!="<td"&&y!="<th")){var v=p.split(/<\/t[dh]>/i);for(o=0;o<v.length;++o){var w=v[o].trim();if(w.match(/<t[dh]/i)){for(var x=w,b=0;x.charAt(0)=="<"&&(b=x.indexOf(">"))>-1;)x=x.slice(b+1);for(var C=0;C<d.length;++C){var S=d[C];S.s.c==c&&S.s.r<u&&u<=S.e.r&&(c=S.e.c+1,C=-1)}var I=Kr(w.slice(0,w.indexOf(">")));f=I.colspan?+I.colspan:1,((h=+I.rowspan)>1||f>1)&&d.push({s:{r:u,c},e:{r:u+(h||1)-1,c:c+f-1}});var B=I.t||I["data-t"]||"";if(!x.length){c+=f;continue}if(x=eU(x),A.s.r>u&&(A.s.r=u),A.e.r<u&&(A.e.r=u),A.s.c>c&&(A.s.c=c),A.e.c<c&&(A.e.c=c),!x.length){c+=f;continue}var T={t:"s",v:x};t.raw||!x.trim().length||B=="s"||(x==="TRUE"?T={t:"b",v:!0}:x==="FALSE"?T={t:"b",v:!1}:isNaN(ic(x))?isNaN(rp(x).getDate())||(T={t:"d",v:Ss(x)},t.cellDates||(T={t:"n",v:Vo(T.v)}),T.z=t.dateNF||gn[14]):T={t:"n",v:ic(x)}),t.dense?(n[u]||(n[u]=[]),n[u][c]=T):n[nn({r:u,c})]=T,c+=f}}}}return n["!ref"]=Xn(A),d.length&&(n["!merges"]=d),n}function zhe(r,e,t,n){for(var i=r["!merges"]||[],a=[],s=e.s.c;s<=e.e.c;++s){for(var o=0,l=0,u=0;u<i.length;++u)if(!(i[u].s.r>t||i[u].s.c>s)&&!(i[u].e.r<t||i[u].e.c<s)){if(i[u].s.r<t||i[u].s.c<s){o=-1;break}o=i[u].e.r-i[u].s.r+1,l=i[u].e.c-i[u].s.c+1;break}if(!(o<0)){var c=nn({r:t,c:s}),h=n.dense?(r[t]||[])[s]:r[c],f=h&&h.v!=null&&(h.h||vB(h.w||(sf(h),h.w)||""))||"",A={};o>1&&(A.rowspan=o),l>1&&(A.colspan=l),n.editable?f='<span contenteditable="true">'+f+"</span>":h&&(A["data-t"]=h&&h.t||"z",h.v!=null&&(A["data-v"]=h.v),h.z!=null&&(A["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+h.l.Target+'">'+f+"</a>")),A.id=(n.id||"sjs")+"-"+c,a.push(Nie("td",f,A))}}var d="<tr>";return d+a.join("")+"</tr>"}var qhe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',jhe="</body></html>";function $he(r,e){var t=r.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!t||t.length==0)throw new Error("Invalid HTML: could not find <table>");if(t.length==1)return HA(ZI(t[0],e),e);var n=RB();return t.forEach(function(i,a){OB(n,ZI(i,e),"Sheet"+(a+1))}),n}function Khe(r,e,t){var n=[];return n.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function Vhe(r,e){var t=e||{},n=t.header!=null?t.header:qhe,i=t.footer!=null?t.footer:jhe,a=[n],s=Tp(r["!ref"]);t.dense=Array.isArray(r),a.push(Khe(r,s,t));for(var o=s.s.r;o<=s.e.r;++o)a.push(zhe(r,s,o,t));return a.push("</table>"+i),a.join("")}function a7(r,e,t){var n=t||{},i=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var s=typeof n.origin=="string"?Ho(n.origin):n.origin;i=s.r,a=s.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:i,c:a}};if(r["!ref"]){var c=Tp(r["!ref"]);u.s.r=Math.min(u.s.r,c.s.r),u.s.c=Math.min(u.s.c,c.s.c),u.e.r=Math.max(u.e.r,c.e.r),u.e.c=Math.max(u.e.c,c.e.c),i==-1&&(u.e.r=i=c.e.r+1)}var h=[],f=0,A=r["!rows"]||(r["!rows"]=[]),d=0,p=0,y=0,v=0,w=0,x=0;for(r["!cols"]||(r["!cols"]=[]);d<o.length&&p<l;++d){var b=o[d];if(JI(b)){if(n.display)continue;A[p]={hidden:!0}}var C=b.children;for(y=v=0;y<C.length;++y){var S=C[y];if(!(n.display&&JI(S))){var I=S.hasAttribute("data-v")?S.getAttribute("data-v"):S.hasAttribute("v")?S.getAttribute("v"):eU(S.innerHTML),B=S.getAttribute("data-z")||S.getAttribute("z");for(f=0;f<h.length;++f){var T=h[f];T.s.c==v+a&&T.s.r<p+i&&p+i<=T.e.r&&(v=T.e.c+1-a,f=-1)}x=+S.getAttribute("colspan")||1,((w=+S.getAttribute("rowspan")||1)>1||x>1)&&h.push({s:{r:p+i,c:v+a},e:{r:p+i+(w||1)-1,c:v+a+(x||1)-1}});var M={t:"s",v:I},F=S.getAttribute("data-t")||S.getAttribute("t")||"";I!=null&&(I.length==0?M.t=F||"z":n.raw||I.trim().length==0||F=="s"||(I==="TRUE"?M={t:"b",v:!0}:I==="FALSE"?M={t:"b",v:!1}:isNaN(ic(I))?isNaN(rp(I).getDate())||(M={t:"d",v:Ss(I)},n.cellDates||(M={t:"n",v:Vo(M.v)}),M.z=n.dateNF||gn[14]):M={t:"n",v:ic(I)})),M.z===void 0&&B!=null&&(M.z=B);var N="",O=S.getElementsByTagName("A");if(O&&O.length)for(var L=0;L<O.length&&!(O[L].hasAttribute("href")&&(N=O[L].getAttribute("href"),N.charAt(0)!="#"));++L);N&&N.charAt(0)!="#"&&(M.l={Target:N}),n.dense?(r[p+i]||(r[p+i]=[]),r[p+i][v+a]=M):r[nn({c:v+a,r:p+i})]=M,u.e.c<v+a&&(u.e.c=v+a),v+=x}}++p}return h.length&&(r["!merges"]=(r["!merges"]||[]).concat(h)),u.e.r=Math.max(u.e.r,p-1+i),r["!ref"]=Xn(u),p>=l&&(r["!fullref"]=Xn((u.e.r=o.length-d+p-1+i,u))),r}function s7(r,e){var t=e||{},n=t.dense?[]:{};return a7(n,r,e)}function Whe(r,e){return HA(s7(r,e),e)}function JI(r){var e="",t=Yhe(r);return t&&(e=t(r).getPropertyValue("display")),e||(e=r.style&&r.style.display),e==="none"}function Yhe(r){return r.ownerDocument.defaultView&&typeof r.ownerDocument.defaultView.getComputedStyle=="function"?r.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Xhe(r){var e=r.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,i){return Array(parseInt(i,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),t=ri(e.replace(/<[^>]*>/g,""));return[t]}var eF={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function o7(r,e){var t=e||{},n=yB(r),i=[],a,s,o={name:""},l="",u=0,c,h,f={},A=[],d=t.dense?[]:{},p,y,v={value:""},w="",x=0,b=[],C=-1,S=-1,I={s:{r:1e6,c:1e7},e:{r:0,c:0}},B=0,T={},M=[],F={},N=0,O=0,L=[],G=1,R=1,U=[],W={Names:[]},Q={},re=["",""],oe=[],P={},z="",K=0,J=!1,ue=!1,ge=0;for(Kv.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");p=Kv.exec(n);)switch(p[3]=p[3].replace(/_.*$/,"")){case"table":case"工作表":p[1]==="/"?(I.e.c>=I.s.c&&I.e.r>=I.s.r?d["!ref"]=Xn(I):d["!ref"]="A1:A1",t.sheetRows>0&&t.sheetRows<=I.e.r&&(d["!fullref"]=d["!ref"],I.e.r=t.sheetRows-1,d["!ref"]=Xn(I)),M.length&&(d["!merges"]=M),L.length&&(d["!rows"]=L),c.name=c.名称||c.name,typeof JSON<"u"&&JSON.stringify(c),A.push(c.name),f[c.name]=d,ue=!1):p[0].charAt(p[0].length-2)!=="/"&&(c=Kr(p[0],!1),C=S=-1,I.s.r=I.s.c=1e7,I.e.r=I.e.c=0,d=t.dense?[]:{},M=[],L=[],ue=!0);break;case"table-row-group":p[1]==="/"?--B:++B;break;case"table-row":case"行":if(p[1]==="/"){C+=G,G=1;break}if(h=Kr(p[0],!1),h.行号?C=h.行号-1:C==-1&&(C=0),G=+h["number-rows-repeated"]||1,G<10)for(ge=0;ge<G;++ge)B>0&&(L[C+ge]={level:B});S=-1;break;case"covered-table-cell":p[1]!=="/"&&++S,t.sheetStubs&&(t.dense?(d[C]||(d[C]=[]),d[C][S]={t:"z"}):d[nn({r:C,c:S})]={t:"z"}),w="",b=[];break;case"table-cell":case"数据":if(p[0].charAt(p[0].length-2)==="/")++S,v=Kr(p[0],!1),R=parseInt(v["number-columns-repeated"]||"1",10),y={t:"z",v:null},v.formula&&t.cellFormula!=!1&&(y.f=VI(ri(v.formula))),(v.数据类型||v["value-type"])=="string"&&(y.t="s",y.v=ri(v["string-value"]||""),t.dense?(d[C]||(d[C]=[]),d[C][S]=y):d[nn({r:C,c:S})]=y),S+=R-1;else if(p[1]!=="/"){++S,w="",x=0,b=[],R=1;var le=G?C+G-1:C;if(S>I.e.c&&(I.e.c=S),S<I.s.c&&(I.s.c=S),C<I.s.r&&(I.s.r=C),le>I.e.r&&(I.e.r=le),v=Kr(p[0],!1),oe=[],P={},y={t:v.数据类型||v["value-type"],v:null},t.cellFormula)if(v.formula&&(v.formula=ri(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(N=parseInt(v["number-matrix-rows-spanned"],10)||0,O=parseInt(v["number-matrix-columns-spanned"],10)||0,F={s:{r:C,c:S},e:{r:C+N-1,c:S+O-1}},y.F=Xn(F),U.push([F,y.F])),v.formula)y.f=VI(v.formula);else for(ge=0;ge<U.length;++ge)C>=U[ge][0].s.r&&C<=U[ge][0].e.r&&S>=U[ge][0].s.c&&S<=U[ge][0].e.c&&(y.F=U[ge][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(N=parseInt(v["number-rows-spanned"],10)||0,O=parseInt(v["number-columns-spanned"],10)||0,F={s:{r:C,c:S},e:{r:C+N-1,c:S+O-1}},M.push(F)),v["number-columns-repeated"]&&(R=parseInt(v["number-columns-repeated"],10)),y.t){case"boolean":y.t="b",y.v=Ji(v["boolean-value"]);break;case"float":y.t="n",y.v=parseFloat(v.value);break;case"percentage":y.t="n",y.v=parseFloat(v.value);break;case"currency":y.t="n",y.v=parseFloat(v.value);break;case"date":y.t="d",y.v=Ss(v["date-value"]),t.cellDates||(y.t="n",y.v=Vo(y.v)),y.z="m/d/yy";break;case"time":y.t="n",y.v=cie(v["time-value"])/86400,t.cellDates&&(y.t="d",y.v=C_(y.v)),y.z="HH:MM:SS";break;case"number":y.t="n",y.v=parseFloat(v.数据数值);break;default:if(y.t==="string"||y.t==="text"||!y.t)y.t="s",v["string-value"]!=null&&(w=ri(v["string-value"]),b=[]);else throw new Error("Unsupported value type "+y.t)}}else{if(J=!1,y.t==="s"&&(y.v=w||"",b.length&&(y.R=b),J=x==0),Q.Target&&(y.l=Q),oe.length>0&&(y.c=oe,oe=[]),w&&t.cellText!==!1&&(y.w=w),J&&(y.t="z",delete y.v),(!J||t.sheetStubs)&&!(t.sheetRows&&t.sheetRows<=C))for(var me=0;me<G;++me){if(R=parseInt(v["number-columns-repeated"]||"1",10),t.dense)for(d[C+me]||(d[C+me]=[]),d[C+me][S]=me==0?y:Hs(y);--R>0;)d[C+me][S+R]=Hs(y);else for(d[nn({r:C+me,c:S})]=y;--R>0;)d[nn({r:C+me,c:S+R})]=Hs(y);I.e.c<=S&&(I.e.c=S)}R=parseInt(v["number-columns-repeated"]||"1",10),S+=R-1,R=0,y={},w="",b=[]}Q={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(p[1]==="/"){if((a=i.pop())[0]!==p[3])throw"Bad state: "+a}else p[0].charAt(p[0].length-2)!=="/"&&i.push([p[3],!0]);break;case"annotation":if(p[1]==="/"){if((a=i.pop())[0]!==p[3])throw"Bad state: "+a;P.t=w,b.length&&(P.R=b),P.a=z,oe.push(P)}else p[0].charAt(p[0].length-2)!=="/"&&i.push([p[3],!1]);z="",K=0,w="",x=0,b=[];break;case"creator":p[1]==="/"?z=n.slice(K,p.index):K=p.index+p[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(p[1]==="/"){if((a=i.pop())[0]!==p[3])throw"Bad state: "+a}else p[0].charAt(p[0].length-2)!=="/"&&i.push([p[3],!1]);w="",x=0,b=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(p[1]==="/"){if(T[o.name]=l,(a=i.pop())[0]!==p[3])throw"Bad state: "+a}else p[0].charAt(p[0].length-2)!=="/"&&(l="",o=Kr(p[0],!1),i.push([p[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(i[i.length-1][0]){case"time-style":case"date-style":s=Kr(p[0],!1),l+=eF[p[3]][s.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(i[i.length-1][0]){case"time-style":case"date-style":s=Kr(p[0],!1),l+=eF[p[3]][s.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(p[0].slice(-2)==="/>")break;if(p[1]==="/")switch(i[i.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(u,p.index);break}else u=p.index+p[0].length;break;case"named-range":s=Kr(p[0],!1),re=Nb(s["cell-range-address"]);var xe={Name:s.name,Ref:re[0]+"!"+re[1]};ue&&(xe.Sheet=A.length),W.Names.push(xe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(i[i.length-1][0])>-1)break;if(p[1]==="/"&&(!v||!v["string-value"])){var Be=Xhe(n.slice(x,p.index));w=(w.length>0?w+`
`:"")+Be[0]}else Kr(p[0],!1),x=p.index+p[0].length;break;case"s":break;case"database-range":if(p[1]==="/")break;try{re=Nb(Kr(p[0])["target-range-address"]),f[re[0]]["!autofilter"]={ref:re[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(p[1]!=="/"){if(Q=Kr(p[0],!1),!Q.href)break;Q.Target=ri(Q.href),delete Q.href,Q.Target.charAt(0)=="#"&&Q.Target.indexOf(".")>-1?(re=Nb(Q.Target.slice(1)),Q.Target="#"+re[0]+"!"+re[1]):Q.Target.match(/^\.\.[\\\/]/)&&(Q.Target=Q.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(p[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(t.WTF)throw new Error(p)}}var Y={Sheets:f,SheetNames:A,Workbook:W};return t.bookSheets&&delete Y.Sheets,Y}function tF(r,e){e=e||{},du(r,"META-INF/manifest.xml")&&Aae(Oa(r,"META-INF/manifest.xml"),e);var t=Ol(r,"content.xml");if(!t)throw new Error("Missing content.xml in ODS / UOF file");var n=o7(qi(t),e);return du(r,"meta.xml")&&(n.Props=xU(Oa(r,"meta.xml"))),n}function rF(r,e){return o7(r,e)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function MB(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function CS(r){return typeof TextDecoder<"u"?new TextDecoder().decode(r):qi(n0(r))}function SS(r){var e=r.reduce(function(i,a){return i+a.length},0),t=new Uint8Array(e),n=0;return r.forEach(function(i){t.set(i,n),n+=i.length}),t}function nF(r){return r-=r>>1&1431655765,r=(r&858993459)+(r>>2&858993459),(r+(r>>4)&252645135)*16843009>>>24}function Zhe(r,e){for(var t=(r[e+15]&127)<<7|r[e+14]>>1,n=r[e+14]&1,i=e+13;i>=e;--i)n=n*256+r[i];return(r[e+15]&128?-n:n)*Math.pow(10,t-6176)}function Xv(r,e){var t=e?e[0]:0,n=r[t]&127;e:if(r[t++]>=128&&(n|=(r[t]&127)<<7,r[t++]<128||(n|=(r[t]&127)<<14,r[t++]<128)||(n|=(r[t]&127)<<21,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,28),++t,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,35),++t,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,42),++t,r[t++]<128)))break e;return e&&(e[0]=t),n}function is(r){var e=0,t=r[e]&127;e:if(r[e++]>=128){if(t|=(r[e]&127)<<7,r[e++]<128||(t|=(r[e]&127)<<14,r[e++]<128)||(t|=(r[e]&127)<<21,r[e++]<128))break e;t|=(r[e]&127)<<28}return t}function vo(r){for(var e=[],t=[0];t[0]<r.length;){var n=t[0],i=Xv(r,t),a=i&7;i=Math.floor(i/8);var s=0,o;if(i==0)break;switch(a){case 0:{for(var l=t[0];r[t[0]++]>=128;);o=r.slice(l,t[0])}break;case 5:s=4,o=r.slice(t[0],t[0]+s),t[0]+=s;break;case 1:s=8,o=r.slice(t[0],t[0]+s),t[0]+=s;break;case 2:s=Xv(r,t),o=r.slice(t[0],t[0]+s),t[0]+=s;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(i," at offset ").concat(n))}var u={data:o,type:a};e[i]==null?e[i]=[u]:e[i].push(u)}return e}function LB(r,e){return(r==null?void 0:r.map(function(t){return e(t.data)}))||[]}function Jhe(r){for(var e,t=[],n=[0];n[0]<r.length;){var i=Xv(r,n),a=vo(r.slice(n[0],n[0]+i));n[0]+=i;var s={id:is(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=vo(o.data),u=is(l[3][0].data);s.messages.push({meta:l,data:r.slice(n[0],n[0]+u)}),n[0]+=u}),(e=a[3])!=null&&e[0]&&(s.merge=is(a[3][0].data)>>>0>0),t.push(s)}return t}function efe(r,e){if(r!=0)throw new Error("Unexpected Snappy chunk type ".concat(r));for(var t=[0],n=Xv(e,t),i=[];t[0]<e.length;){var a=e[t[0]]&3;if(a==0){var s=e[t[0]++]>>2;if(s<60)++s;else{var o=s-59;s=e[t[0]],o>1&&(s|=e[t[0]+1]<<8),o>2&&(s|=e[t[0]+2]<<16),o>3&&(s|=e[t[0]+3]<<24),s>>>=0,s++,t[0]+=o}i.push(e.slice(t[0],t[0]+s)),t[0]+=s;continue}else{var l=0,u=0;if(a==1?(u=(e[t[0]]>>2&7)+4,l=(e[t[0]++]&224)<<3,l|=e[t[0]++]):(u=(e[t[0]++]>>2)+1,a==2?(l=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(l=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),i=[SS(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(i.push(i[0].slice(-l)),u-=l;u>=i[i.length-1].length;)i.push(i[i.length-1]),u-=i[i.length-1].length;i.push(i[0].slice(-l,-l+u))}}var c=SS(i);if(c.length!=n)throw new Error("Unexpected length: ".concat(c.length," != ").concat(n));return c}function tfe(r){for(var e=[],t=0;t<r.length;){var n=r[t++],i=r[t]|r[t+1]<<8|r[t+2]<<16;t+=3,e.push(efe(n,r.slice(t,t+i))),t+=i}if(t!==r.length)throw new Error("data is not a valid framed stream!");return SS(e)}function rfe(r,e,t,n){var i=MB(r),a=i.getUint32(4,!0),s=(n>1?12:8)+nF(a&(n>1?3470:398))*4,o=-1,l=-1,u=NaN,c=new Date(2001,0,1);a&512&&(o=i.getUint32(s,!0),s+=4),s+=nF(a&(n>1?12288:4096))*4,a&16&&(l=i.getUint32(s,!0),s+=4),a&32&&(u=i.getFloat64(s,!0),s+=8),a&64&&(c.setTime(c.getTime()+i.getFloat64(s,!0)*1e3),s+=8);var h;switch(r[2]){case 0:break;case 2:h={t:"n",v:u};break;case 3:h={t:"s",v:e[l]};break;case 5:h={t:"d",v:c};break;case 6:h={t:"b",v:u>0};break;case 7:h={t:"n",v:u/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:t[o]};else if(l>-1)h={t:"s",v:e[l]};else if(!isNaN(u))h={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(r.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(r.slice(0,4)))}return h}function nfe(r,e,t){var n=MB(r),i=n.getUint32(8,!0),a=12,s=-1,o=-1,l=NaN,u=NaN,c=new Date(2001,0,1);i&1&&(l=Zhe(r,a),a+=16),i&2&&(u=n.getFloat64(a,!0),a+=8),i&4&&(c.setTime(c.getTime()+n.getFloat64(a,!0)*1e3),a+=8),i&8&&(o=n.getUint32(a,!0),a+=4),i&16&&(s=n.getUint32(a,!0),a+=4);var h;switch(r[1]){case 0:break;case 2:h={t:"n",v:l};break;case 3:h={t:"s",v:e[o]};break;case 5:h={t:"d",v:c};break;case 6:h={t:"b",v:u>0};break;case 7:h={t:"n",v:u/86400};break;case 8:h={t:"e",v:0};break;case 9:if(s>-1)h={t:"s",v:t[s]};else throw new Error("Unsupported cell type ".concat(r[1]," : ").concat(i&31," : ").concat(r.slice(0,4)));break;case 10:h={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(r[1]," : ").concat(i&31," : ").concat(r.slice(0,4)))}return h}function ife(r,e,t){switch(r[0]){case 0:case 1:case 2:case 3:return rfe(r,e,t,r[0]);case 5:return nfe(r,e,t);default:throw new Error("Unsupported payload version ".concat(r[0]))}}function EA(r){var e=vo(r);return Xv(e[1][0].data)}function iF(r,e){var t=vo(e.data),n=is(t[1][0].data),i=t[3],a=[];return(i||[]).forEach(function(s){var o=vo(s.data),l=is(o[1][0].data)>>>0;switch(n){case 1:a[l]=CS(o[3][0].data);break;case 8:{var u=r[EA(o[9][0].data)][0],c=vo(u.data),h=r[EA(c[1][0].data)][0],f=is(h.meta[1][0].data);if(f!=2001)throw new Error("2000 unexpected reference to ".concat(f));var A=vo(h.data);a[l]=A[3].map(function(d){return CS(d.data)}).join("")}break}}),a}function afe(r,e){var t,n,i,a,s,o,l,u,c,h,f,A,d,p,y=vo(r),v=is(y[1][0].data)>>>0,w=is(y[2][0].data)>>>0,x=((n=(t=y[8])==null?void 0:t[0])==null?void 0:n.data)&&is(y[8][0].data)>0||!1,b,C;if((a=(i=y[7])==null?void 0:i[0])!=null&&a.data&&e!=0)b=(o=(s=y[7])==null?void 0:s[0])==null?void 0:o.data,C=(u=(l=y[6])==null?void 0:l[0])==null?void 0:u.data;else if((h=(c=y[4])==null?void 0:c[0])!=null&&h.data&&e!=1)b=(A=(f=y[4])==null?void 0:f[0])==null?void 0:A.data,C=(p=(d=y[3])==null?void 0:d[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var S=x?4:1,I=MB(b),B=[],T=0;T<b.length/2;++T){var M=I.getUint16(T*2,!0);M<65535&&B.push([T,M])}if(B.length!=w)throw"Expected ".concat(w," cells, found ").concat(B.length);var F=[];for(T=0;T<B.length-1;++T)F[B[T][0]]=C.subarray(B[T][1]*S,B[T+1][1]*S);return B.length>=1&&(F[B[B.length-1][0]]=C.subarray(B[B.length-1][1]*S)),{R:v,cells:F}}function sfe(r,e){var t,n=vo(e.data),i=(t=n==null?void 0:n[7])!=null&&t[0]?is(n[7][0].data)>>>0>0?1:0:-1,a=LB(n[5],function(s){return afe(s,i)});return{nrows:is(n[4][0].data)>>>0,data:a.reduce(function(s,o){return s[o.R]||(s[o.R]=[]),o.cells.forEach(function(l,u){if(s[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));s[o.R][u]=l}),s},[])}}function ofe(r,e,t){var n,i=vo(e.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(is(i[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(i[6][0].data));if(a.e.c=(is(i[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(i[7][0].data));t["!ref"]=Xn(a);var s=vo(i[4][0].data),o=iF(r,r[EA(s[4][0].data)][0]),l=(n=s[17])!=null&&n[0]?iF(r,r[EA(s[17][0].data)][0]):[],u=vo(s[3][0].data),c=0;u[1].forEach(function(h){var f=vo(h.data),A=r[EA(f[2][0].data)][0],d=is(A.meta[1][0].data);if(d!=6002)throw new Error("6001 unexpected reference to ".concat(d));var p=sfe(r,A);p.data.forEach(function(y,v){y.forEach(function(w,x){var b=nn({r:c+v,c:x}),C=ife(w,o,l);C&&(t[b]=C)})}),c+=p.nrows})}function lfe(r,e){var t=vo(e.data),n={"!ref":"A1"},i=r[EA(t[2][0].data)],a=is(i[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return ofe(r,i[0],n),n}function ufe(r,e){var t,n=vo(e.data),i={name:(t=n[1])!=null&&t[0]?CS(n[1][0].data):"",sheets:[]},a=LB(n[2],EA);return a.forEach(function(s){r[s].forEach(function(o){var l=is(o.meta[1][0].data);l==6e3&&i.sheets.push(lfe(r,o))})}),i}function cfe(r,e){var t=RB(),n=vo(e.data),i=LB(n[1],EA);if(i.forEach(function(a){r[a].forEach(function(s){var o=is(s.meta[1][0].data);if(o==2){var l=ufe(r,s);l.sheets.forEach(function(u,c){OB(t,u,c==0?l.name:l.name+"_"+c,!0)})}})}),t.SheetNames.length==0)throw new Error("Empty NUMBERS file");return t}function Fb(r){var e,t,n,i,a={},s=[];if(r.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),r.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=tfe(l.content)}catch(h){return console.log("?? "+l.content.length+" "+(h.message||h))}var c;try{c=Jhe(u)}catch(h){return console.log("## "+(h.message||h))}c.forEach(function(h){a[h.id]=h.messages,s.push(h.id)})}}),!s.length)throw new Error("File has no messages");var o=((i=(n=(t=(e=a==null?void 0:a[1])==null?void 0:e[0])==null?void 0:t.meta)==null?void 0:n[1])==null?void 0:i[0].data)&&is(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||s.forEach(function(l){a[l].forEach(function(u){var c=is(u.meta[1][0].data)>>>0;if(c==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return cfe(a,o)}function hfe(r){return function(t){for(var n=0;n!=r.length;++n){var i=r[n];t[i[0]]===void 0&&(t[i[0]]=i[1]),i[2]==="n"&&(t[i[0]]=Number(t[i[0]]))}}}function DB(r){hfe([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(r)}function ffe(r){return yg.WS.indexOf(r)>-1?"sheet":r==yg.CS?"chart":r==yg.DS?"dialog":r==yg.MS?"macro":r&&r.length?r:"sheet"}function Afe(r,e){if(!r)return 0;try{r=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,r["!id"][n.id].Target,ffe(r["!id"][n.id].Type)]})}catch{return null}return!r||r.length===0?null:r}function dfe(r,e,t,n,i,a,s,o,l,u,c,h){try{a[n]=hv(Ol(r,t,!0),e);var f=Oa(r,e),A;switch(o){case"sheet":A=xhe(f,e,i,l,a[n],u,c,h);break;case"chart":if(A=whe(f,e,i,l,a[n],u,c,h),!A||!A["!drawel"])break;var d=km(A["!drawel"].Target,e),p=xS(d),y=yle(Ol(r,d,!0),hv(Ol(r,p,!0),d)),v=km(y,d),w=xS(v);A=nhe(Ol(r,v,!0),v,l,hv(Ol(r,w,!0),v),u,A);break;case"macro":A=_he(f,e,i,l,a[n],u,c,h);break;case"dialog":A=Ehe(f,e,i,l,a[n],u,c,h);break;default:throw new Error("Unrecognized sheet type "+o)}s[n]=A;var x=[];a&&a[n]&&ih(a[n]).forEach(function(b){var C="";if(a[n][b].Type==yg.CMNT){C=km(a[n][b].Target,e);var S=Bhe(Oa(r,C,!0),C,l);if(!S||!S.length)return;zI(A,S,!1)}a[n][b].Type==yg.TCMNT&&(C=km(a[n][b].Target,e),x=x.concat(wle(Oa(r,C,!0),l)))}),x&&x.length&&zI(A,x,!0,l.people||[])}catch(b){if(l.WTF)throw b}}function au(r){return r.charAt(0)=="/"?r.slice(1):r}function gfe(r,e){if(jP(),e=e||{},DB(e),du(r,"META-INF/manifest.xml")||du(r,"objectdata.xml"))return tF(r,e);if(du(r,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Fb<"u"){if(r.FileIndex)return Fb(r);var t=Yn.utils.cfb_new();return pI(r).forEach(function(L){pie(t,L,gie(r,L))}),Fb(t)}throw new Error("Unsupported NUMBERS file")}if(!du(r,"[Content_Types].xml"))throw du(r,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):du(r,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=pI(r),i=hae(Ol(r,"[Content_Types].xml")),a=!1,s,o;if(i.workbooks.length===0&&(o="xl/workbook.xml",Oa(r,o,!0)&&i.workbooks.push(o)),i.workbooks.length===0){if(o="xl/workbook.bin",!Oa(r,o,!0))throw new Error("Could not find workbook");i.workbooks.push(o),a=!0}i.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},u={};if(!e.bookSheets&&!e.bookProps){if(dv=[],i.sst)try{dv=She(Oa(r,au(i.sst)),i.sst,e)}catch(L){if(e.WTF)throw L}e.cellStyles&&i.themes.length&&(l=Che(Ol(r,i.themes[0].replace(/^\//,""),!0)||"",i.themes[0],e)),i.style&&(u=bhe(Oa(r,au(i.style)),i.style,l,e))}i.links.map(function(L){try{var G=hv(Ol(r,xS(au(L))),L);return Nhe(Oa(r,au(L)),G,L,e)}catch{}});var c=yhe(Oa(r,au(i.workbooks[0])),i.workbooks[0],e),h={},f="";i.coreprops.length&&(f=Oa(r,au(i.coreprops[0]),!0),f&&(h=xU(f)),i.extprops.length!==0&&(f=Oa(r,au(i.extprops[0]),!0),f&&pae(f,h,e)));var A={};(!e.bookSheets||e.bookProps)&&i.custprops.length!==0&&(f=Ol(r,au(i.custprops[0]),!0),f&&(A=vae(f,e)));var d={};if((e.bookSheets||e.bookProps)&&(c.Sheets?s=c.Sheets.map(function(G){return G.name}):h.Worksheets&&h.SheetNames.length>0&&(s=h.SheetNames),e.bookProps&&(d.Props=h,d.Custprops=A),e.bookSheets&&typeof s<"u"&&(d.SheetNames=s),e.bookSheets?d.SheetNames:e.bookProps))return d;s={};var p={};e.bookDeps&&i.calcchain&&(p=The(Oa(r,au(i.calcchain)),i.calcchain));var y=0,v={},w,x;{var b=c.Sheets;h.Worksheets=b.length,h.SheetNames=[];for(var C=0;C!=b.length;++C)h.SheetNames[C]=b[C].name}var S=a?"bin":"xml",I=i.workbooks[0].lastIndexOf("/"),B=(i.workbooks[0].slice(0,I+1)+"_rels/"+i.workbooks[0].slice(I+1)+".rels").replace(/^\//,"");du(r,B)||(B="xl/_rels/workbook."+S+".rels");var T=hv(Ol(r,B,!0),B.replace(/_rels.*/,"s5s"));(i.metadata||[]).length>=1&&(e.xlmeta=Ihe(Oa(r,au(i.metadata[0])),i.metadata[0],e)),(i.people||[]).length>=1&&(e.people=_le(Oa(r,au(i.people[0])),e)),T&&(T=Afe(T,c.Sheets));var M=Oa(r,"xl/worksheets/sheet.xml",!0)?1:0;e:for(y=0;y!=h.Worksheets;++y){var F="sheet";if(T&&T[y]?(w="xl/"+T[y][1].replace(/[\/]?xl\//,""),du(r,w)||(w=T[y][1]),du(r,w)||(w=B.replace(/_rels\/.*$/,"")+T[y][1]),F=T[y][2]):(w="xl/worksheets/sheet"+(y+1-M)+"."+S,w=w.replace(/sheet0\./,"sheet.")),x=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(y!=e.sheets)continue e;break;case"string":if(h.SheetNames[y].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var N=!1,O=0;O!=e.sheets.length;++O)typeof e.sheets[O]=="number"&&e.sheets[O]==y&&(N=1),typeof e.sheets[O]=="string"&&e.sheets[O].toLowerCase()==h.SheetNames[y].toLowerCase()&&(N=1);if(!N)continue e}}dfe(r,w,x,h.SheetNames[y],y,v,s,F,e,c,l,u)}return d={Directory:i,Workbook:c,Props:h,Custprops:A,Deps:p,Sheets:s,SheetNames:h.SheetNames,Strings:dv,Styles:u,Themes:l,SSF:Hs(gn)},e&&e.bookFiles&&(r.files?(d.keys=n,d.files=r.files):(d.keys=[],d.files={},r.FullPaths.forEach(function(L,G){L=L.replace(/^Root Entry[\/]/,""),d.keys.push(L),d.files[L]=r.FileIndex[G]}))),e&&e.bookVBA&&(i.vba.length>0?d.vbaraw=Oa(r,au(i.vba[0]),!0):i.defaults&&i.defaults.bin===Sle&&(d.vbaraw=Oa(r,"xl/vbaProject.bin",!0))),d}function pfe(r,e){var t=e||{},n="Workbook",i=Yn.find(r,n);try{if(n="/!DataSpaces/Version",i=Yn.find(r,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(loe(i.content),n="/!DataSpaces/DataSpaceMap",i=Yn.find(r,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=coe(i.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",i=Yn.find(r,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=hoe(i.content);if(s.length!=1||s[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",i=Yn.find(r,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);Aoe(i.content)}catch{}if(n="/EncryptionInfo",i=Yn.find(r,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=doe(i.content);if(n="/EncryptedPackage",i=Yn.find(r,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],i.content,t.password||"",t);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],i.content,t.password||"",t);throw new Error("File is password-protected")}function kB(r,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];case"base64":t=$l(r.slice(0,12));break;case"binary":t=r;break;case"array":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function mfe(r,e){return Yn.find(r,"EncryptedPackage")?pfe(r,e):i7(r,e)}function vfe(r,e){var t,n=r,i=e||{};return i.type||(i.type=zn&&Buffer.isBuffer(r)?"buffer":"base64"),t=XP(n,i),gfe(t,i)}function l7(r,e){var t=0;e:for(;t<r.length;)switch(r.charCodeAt(t)){case 10:case 13:case 32:++t;break;case 60:return ES(r.slice(t),e);default:break e}return Vv.to_workbook(r,e)}function yfe(r,e){var t="",n=kB(r,e);switch(e.type){case"base64":t=$l(r);break;case"binary":t=r;break;case"buffer":t=r.toString("binary");break;case"array":t=zd(r);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(t=qi(t)),e.type="binary",l7(t,e)}function xfe(r,e){var t=r;return e.type=="base64"&&(t=$l(t)),t=qv.utils.decode(1200,t.slice(2),"str"),e.type="binary",l7(t,e)}function wfe(r){return r.match(/[^\x00-\x7F]/)?Rm(r):r}function Mb(r,e,t,n){return n?(t.type="string",Vv.to_workbook(r,t)):Vv.to_workbook(e,t)}function aw(r,e){LP();var t=e||{};if(typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer)return aw(new Uint8Array(r),(t=Hs(t),t.type="array",t));typeof Uint8Array<"u"&&r instanceof Uint8Array&&!t.type&&(t.type=typeof Deno<"u"?"buffer":"array");var n=r,i=[0,0,0,0],a=!1;if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),Dg={},t.dateNF&&(Dg.dateNF=t.dateNF),t.type||(t.type=zn&&Buffer.isBuffer(r)?"buffer":"base64"),t.type=="file"&&(t.type=zn?"buffer":"binary",n=lie(r),typeof Uint8Array<"u"&&!zn&&(t.type="array")),t.type=="string"&&(a=!0,t.type="binary",t.codepage=65001,n=wfe(r)),t.type=="array"&&typeof Uint8Array<"u"&&r instanceof Uint8Array&&typeof ArrayBuffer<"u"){var s=new ArrayBuffer(3),o=new Uint8Array(s);if(o.foo="bar",!o.foo)return t=Hs(t),t.type="array",aw(AB(n),t)}switch((i=kB(n,t))[0]){case 208:if(i[1]===207&&i[2]===17&&i[3]===224&&i[4]===161&&i[5]===177&&i[6]===26&&i[7]===225)return mfe(Yn.read(n,t),t);break;case 9:if(i[1]<=8)return i7(n,t);break;case 60:return ES(n,t);case 73:if(i[1]===73&&i[2]===42&&i[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(i[1]===68)return Wse(n,t);break;case 84:if(i[1]===65&&i[2]===66&&i[3]===76)return Kse.to_workbook(n,t);break;case 80:return i[1]===75&&i[2]<9&&i[3]<9?vfe(n,t):Mb(r,n,t,a);case 239:return i[3]===60?ES(n,t):Mb(r,n,t,a);case 255:if(i[1]===254)return xfe(n,t);if(i[1]===0&&i[2]===2&&i[3]===0)return Av.to_workbook(n,t);break;case 0:if(i[1]===0&&(i[2]>=2&&i[3]===0||i[2]===0&&(i[3]===8||i[3]===9)))return Av.to_workbook(n,t);break;case 3:case 131:case 139:case 140:return HI.to_workbook(n,t);case 123:if(i[1]===92&&i[2]===114&&i[3]===116)return Soe.to_workbook(n,t);break;case 10:case 13:case 32:return yfe(n,t);case 137:if(i[1]===80&&i[2]===78&&i[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return jse.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?HI.to_workbook(n,t):Mb(r,n,t,a)}function _fe(r,e,t,n,i,a,s,o){var l=zs(t),u=o.defval,c=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,f=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:t,enumerable:!1})}catch{f.__rowNum__=t}else f.__rowNum__=t;if(!s||r[t])for(var A=e.s.c;A<=e.e.c;++A){var d=s?r[t][A]:r[n[A]+l];if(d===void 0||d.t===void 0){if(u===void 0)continue;a[A]!=null&&(f[a[A]]=u);continue}var p=d.v;switch(d.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+d.t)}if(a[A]!=null){if(p==null)if(d.t=="e"&&p===null)f[a[A]]=null;else if(u!==void 0)f[a[A]]=u;else if(c&&p===null)f[a[A]]=null;else continue;else f[a[A]]=c&&(d.t!=="n"||d.t==="n"&&o.rawNumbers!==!1)?p:sf(d,p,o);p!=null&&(h=!1)}}return{row:f,isempty:h}}function BS(r,e){if(r==null||r["!ref"]==null)return[];var t={t:"n",v:0},n=0,i=1,a=[],s=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},c=u.range!=null?u.range:r["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof c){case"string":l=ma(c);break;case"number":l=ma(r["!ref"]),l.s.r=c;break;default:l=c}n>0&&(i=0);var h=zs(l.s.r),f=[],A=[],d=0,p=0,y=Array.isArray(r),v=l.s.r,w=0,x={};y&&!r[v]&&(r[v]=[]);var b=u.skipHidden&&r["!cols"]||[],C=u.skipHidden&&r["!rows"]||[];for(w=l.s.c;w<=l.e.c;++w)if(!(b[w]||{}).hidden)switch(f[w]=ns(w),t=y?r[v][w]:r[f[w]+h],n){case 1:a[w]=w-l.s.c;break;case 2:a[w]=f[w];break;case 3:a[w]=u.header[w-l.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),o=s=sf(t,null,u),p=x[s]||0,!p)x[s]=1;else{do o=s+"_"+p++;while(x[o]);x[s]=p,x[o]=1}a[w]=o}for(v=l.s.r+i;v<=l.e.r;++v)if(!(C[v]||{}).hidden){var S=_fe(r,l,v,f,n,a,y,u);(S.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(A[d++]=S.row)}return A.length=d,A}var aF=/"/g;function Efe(r,e,t,n,i,a,s,o){for(var l=!0,u=[],c="",h=zs(t),f=e.s.c;f<=e.e.c;++f)if(n[f]){var A=o.dense?(r[t]||[])[f]:r[n[f]+h];if(A==null)c="";else if(A.v!=null){l=!1,c=""+(o.rawNumbers&&A.t=="n"?A.v:sf(A,null,o));for(var d=0,p=0;d!==c.length;++d)if((p=c.charCodeAt(d))===i||p===a||p===34||o.forceQuotes){c='"'+c.replace(aF,'""')+'"';break}c=="ID"&&(c='"ID"')}else A.f!=null&&!A.F?(l=!1,c="="+A.f,c.indexOf(",")>=0&&(c='"'+c.replace(aF,'""')+'"')):c="";u.push(c)}return o.blankrows===!1&&l?null:u.join(s)}function u7(r,e){var t=[],n=e??{};if(r==null||r["!ref"]==null)return"";var i=ma(r["!ref"]),a=n.FS!==void 0?n.FS:",",s=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),u=new RegExp((a=="|"?"\\|":a)+"+$"),c="",h=[];n.dense=Array.isArray(r);for(var f=n.skipHidden&&r["!cols"]||[],A=n.skipHidden&&r["!rows"]||[],d=i.s.c;d<=i.e.c;++d)(f[d]||{}).hidden||(h[d]=ns(d));for(var p=0,y=i.s.r;y<=i.e.r;++y)(A[y]||{}).hidden||(c=Efe(r,i,y,h,s,l,a,n),c!=null&&(n.strip&&(c=c.replace(u,"")),(c||n.blankrows!==!1)&&t.push((p++?o:"")+c)));return delete n.dense,t.join("")}function bfe(r,e){e||(e={}),e.FS="	",e.RS=`
`;var t=u7(r,e);return t}function Cfe(r){var e="",t,n="";if(r==null||r["!ref"]==null)return[];var i=ma(r["!ref"]),a="",s=[],o,l=[],u=Array.isArray(r);for(o=i.s.c;o<=i.e.c;++o)s[o]=ns(o);for(var c=i.s.r;c<=i.e.r;++c)for(a=zs(c),o=i.s.c;o<=i.e.c;++o)if(e=s[o]+a,t=u?(r[c]||[])[o]:r[e],n="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;n=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)n=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)n=""+t.v;else if(t.t=="b")n=t.v?"TRUE":"FALSE";else if(t.w!==void 0)n="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?n="'"+t.v:n=""+t.v}}l[l.length]=e+"="+n}return l}function c7(r,e,t){var n=t||{},i=+!n.skipHeader,a=r||{},s=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var l=typeof n.origin=="string"?Ho(n.origin):n.origin;s=l.r,o=l.c}var u,c={s:{c:0,r:0},e:{c:o,r:s+e.length-1+i}};if(a["!ref"]){var h=ma(a["!ref"]);c.e.c=Math.max(c.e.c,h.e.c),c.e.r=Math.max(c.e.r,h.e.r),s==-1&&(s=h.e.r+1,c.e.r=s+e.length-1+i)}else s==-1&&(s=0,c.e.r=e.length-1+i);var f=n.header||[],A=0;e.forEach(function(p,y){ih(p).forEach(function(v){(A=f.indexOf(v))==-1&&(f[A=f.length]=v);var w=p[v],x="z",b="",C=nn({c:o+A,r:s+y+i});u=Zv(a,C),w&&typeof w=="object"&&!(w instanceof Date)?a[C]=w:(typeof w=="number"?x="n":typeof w=="boolean"?x="b":typeof w=="string"?x="s":w instanceof Date?(x="d",n.cellDates||(x="n",w=Vo(w)),b=n.dateNF||gn[14]):w===null&&n.nullError&&(x="e",w=0),u?(u.t=x,u.v=w,delete u.w,delete u.R,b&&(u.z=b)):a[C]=u={t:x,v:w},b&&(u.z=b))})}),c.e.c=Math.max(c.e.c,o+f.length-1);var d=zs(s);if(i)for(A=0;A<f.length;++A)a[ns(A+o)+d]={t:"s",v:f[A]};return a["!ref"]=Xn(c),a}function Sfe(r,e){return c7(null,r,e)}function Zv(r,e,t){if(typeof e=="string"){if(Array.isArray(r)){var n=Ho(e);return r[n.r]||(r[n.r]=[]),r[n.r][n.c]||(r[n.r][n.c]={t:"z"})}return r[e]||(r[e]={t:"z"})}return typeof e!="number"?Zv(r,nn(e)):Zv(r,nn({r:e,c:t||0}))}function Bfe(r,e){if(typeof e=="number"){if(e>=0&&r.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=r.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function RB(){return{SheetNames:[],Sheets:{}}}function OB(r,e,t,n){var i=1;if(!t)for(;i<=65535&&r.SheetNames.indexOf(t="Sheet"+i)!=-1;++i,t=void 0);if(!t||r.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&r.SheetNames.indexOf(t)>=0){var a=t.match(/(^.*?)(\d+)$/);i=a&&+a[2]||0;var s=a&&a[1]||t;for(++i;i<=65535&&r.SheetNames.indexOf(t=s+i)!=-1;++i);}if(hhe(t),r.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return r.SheetNames.push(t),r.Sheets[t]=e,t}function Tfe(r,e,t){r.Workbook||(r.Workbook={}),r.Workbook.Sheets||(r.Workbook.Sheets=[]);var n=Bfe(r,e);switch(r.Workbook.Sheets[n]||(r.Workbook.Sheets[n]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}r.Workbook.Sheets[n].Hidden=t}function Nfe(r,e){return r.z=e,r}function h7(r,e,t){return e?(r.l={Target:e},t&&(r.l.Tooltip=t)):delete r.l,r}function Ife(r,e,t){return h7(r,"#"+e,t)}function Ffe(r,e,t){r.c||(r.c=[]),r.c.push({t:e,a:t||"SheetJS"})}function Mfe(r,e,t,n){for(var i=typeof e!="string"?e:ma(e),a=typeof e=="string"?e:Xn(e),s=i.s.r;s<=i.e.r;++s)for(var o=i.s.c;o<=i.e.c;++o){var l=Zv(r,s,o);l.t="n",l.F=a,delete l.v,s==i.s.r&&o==i.s.c&&(l.f=t,n&&(l.D=!0))}return r}var f7={encode_col:ns,encode_row:zs,encode_cell:nn,encode_range:Xn,decode_col:_B,decode_row:wB,split_cell:qie,decode_cell:Ho,decode_range:Tp,format_cell:sf,sheet_add_aoa:gU,sheet_add_json:c7,sheet_add_dom:a7,aoa_to_sheet:Np,json_to_sheet:Sfe,table_to_sheet:s7,table_to_book:Whe,sheet_to_csv:u7,sheet_to_txt:bfe,sheet_to_json:BS,sheet_to_html:Vhe,sheet_to_formulae:Cfe,sheet_to_row_object_array:BS,sheet_get_cell:Zv,book_new:RB,book_append_sheet:OB,book_set_sheet_visibility:Tfe,cell_set_number_format:Nfe,cell_set_hyperlink:h7,cell_set_internal_link:Ife,cell_add_comment:Ffe,sheet_set_array_formula:Mfe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};class Lfe{constructor(){this.joinHistory=new Map}parseCSV(e){const t=e.trim().split(/\r?\n/);if(t.length<2)throw new Error("CSV 파일에 데이터가 없습니다.");const n=t[0].includes("	")?"	":",",i=this.parseCSVLine(t[0],n),a=[];for(let s=1;s<t.length;s++){const o=t[s].trim();if(!o)continue;const l=this.parseCSVLine(o,n),u={};i.forEach((c,h)=>{let f=l[h]||"";const A=parseFloat(f);!isNaN(A)&&f.trim()!==""?u[c]=A:u[c]=f}),a.push(u)}return{headers:i,data:a}}parseCSVLine(e,t){const n=[];let i="",a=!1;for(let s=0;s<e.length;s++){const o=e[s];o==='"'?a=!a:o===t&&!a?(n.push(i.trim()),i=""):i+=o}return n.push(i.trim()),n}parseXLSX(e){const t=aw(e,{type:"array"}),n=t.SheetNames[0],i=t.Sheets[n],a=f7.sheet_to_json(i,{header:1});if(a.length<2)throw new Error("XLSX 파일에 데이터가 없습니다.");const s=a[0].map(l=>String(l||"").trim()),o=[];for(let l=1;l<a.length;l++){const u={},c=a[l];!c||c.length===0||(s.forEach((h,f)=>{if(h){let A=c[f];if(A==null)u[h]="";else if(typeof A=="number")u[h]=A;else{const d=parseFloat(A);!isNaN(d)&&String(A).trim()!==""?u[h]=d:u[h]=String(A)}}}),o.push(u))}return{headers:s.filter(l=>l),data:o}}getLayerFields(e){const t=pt.getLayer(e);if(!t)return[];const n=t.source.getFeatures();if(n.length===0)return[];const i=n[0].getProperties(),a=[];for(const s in i)s!=="geometry"&&a.push(s);return a}getUniqueValues(e,t){const n=pt.getLayer(e);if(!n)return[];const i=n.source.getFeatures(),a=new Set;return i.forEach(s=>{const o=s.get(t);o!=null&&a.add(String(o))}),Array.from(a).sort()}previewJoin(e,t,n,i){const a=pt.getLayer(e);if(!a)return{matched:0,unmatched:0,total:0};const s=a.source.getFeatures(),o=new Map;n.forEach(c=>{const h=String(c[i]||"").trim();h&&o.set(h,c)});let l=0,u=0;return s.forEach(c=>{const h=String(c.get(t)||"").trim();o.has(h)?l++:u++}),{matched:l,unmatched:u,total:s.length,csvRows:n.length,matchRate:(l/s.length*100).toFixed(1)}}join(e,t,n,i,a){const s=pt.getLayer(e);if(!s)throw new Error("레이어를 찾을 수 없습니다.");const o=s.source.getFeatures(),l=new Map;n.forEach(f=>{const A=String(f[i]||"").trim();A&&l.set(A,f)});const u=a||Object.keys(n[0]||{}).filter(f=>f!==i);let c=0;o.forEach(f=>{const A=String(f.get(t)||"").trim(),d=l.get(A);d&&(u.forEach(p=>{d[p]!==void 0&&f.set(p,d[p])}),c++)});const h=this.joinHistory.get(e)||[];return this.joinHistory.set(e,[...h,...u]),s.featureCount=o.length,Gt.emit(Xt.LAYER_STYLE_CHANGED,{layerId:e}),Gt.emit(Xt.TABLE_JOINED,{layerId:e,joinedCount:c,fields:u}),{success:!0,joinedCount:c,totalFeatures:o.length,fieldsAdded:u}}removeJoinedFields(e){const t=this.joinHistory.get(e);if(!t||t.length===0)return!1;const n=pt.getLayer(e);return n?(n.source.getFeatures().forEach(a=>{t.forEach(s=>{a.unset(s)})}),this.joinHistory.delete(e),Gt.emit(Xt.LAYER_STYLE_CHANGED,{layerId:e}),!0):!1}getJoinedFields(e){return this.joinHistory.get(e)||[]}}const Am=new Lfe;class Dfe{constructor(){this.modal=null,this.currentLayerId=null,this.csvData=null,this.csvHeaders=null}show(e){if(e||(e=pt.getSelectedLayerId()),!e){alert("먼저 레이어를 선택해주세요.");return}const t=pt.getLayer(e);t&&(this.currentLayerId=e,this.csvData=null,this.csvHeaders=null,this.render(t))}render(e){this.close();const t=Am.getLayerFields(this.currentLayerId);if(t.length===0){alert("이 레이어에는 속성 필드가 없습니다.");return}this.modal=document.createElement("div"),this.modal.className="choropleth-modal",this.modal.innerHTML=this.getModalHTML(e.name,t),document.body.appendChild(this.modal),this.bindEvents()}getModalHTML(e,t){const n=t.map(i=>'<option value="'+i+'">'+i+"</option>").join("");return'<div class="choropleth-content" style="width: 420px;"><div class="choropleth-header"><h3>테이블 결합</h3><button class="choropleth-close" id="join-close">&times;</button></div><div class="choropleth-body"><div class="choropleth-form-group"><label>대상 레이어</label><div class="choropleth-layer-name">'+e+'</div></div><div class="choropleth-form-group"><label>데이터 파일 업로드</label><div class="file-upload-area" id="csv-upload-area"><input type="file" id="csv-file-input" accept=".csv,.txt,.xlsx,.xls" style="display:none"><div class="upload-placeholder" id="upload-placeholder"><span class="upload-icon">📄</span><span>CSV 또는 Excel 파일을 드래그하거나 클릭하세요</span></div><div class="upload-success" id="upload-success" style="display:none"><span class="success-icon">✓</span><span id="csv-filename"></span><span id="csv-row-count"></span></div></div></div><div class="choropleth-form-group"><label for="layer-key-field">레이어 키 필드</label><select id="layer-key-field">'+n+'</select></div><div class="choropleth-form-group"><label for="csv-key-field">테이블 키 필드</label><select id="csv-key-field" disabled><option value="">파일을 먼저 업로드하세요</option></select></div><div class="choropleth-form-group"><label>조인할 필드 선택</label><div id="join-fields-list" class="join-fields-list"><div class="placeholder-text">파일을 업로드하면 필드가 표시됩니다.</div></div></div><div id="join-preview" class="join-preview" style="display:none"><div class="preview-title">조인 미리보기</div><div class="preview-stats"><div class="stat-item"><span class="stat-label">매칭:</span> <span id="match-count">0</span></div><div class="stat-item"><span class="stat-label">미매칭:</span> <span id="unmatch-count">0</span></div><div class="stat-item"><span class="stat-label">매칭률:</span> <span id="match-rate">0%</span></div></div></div></div><div class="choropleth-footer"><button class="btn btn-secondary" id="join-cancel">취소</button><button class="btn btn-primary" id="join-apply" disabled>조인 실행</button></div></div>'}bindEvents(){const e=document.getElementById("join-close"),t=document.getElementById("join-cancel"),n=document.getElementById("join-apply"),i=document.getElementById("csv-file-input"),a=document.getElementById("csv-upload-area"),s=document.getElementById("layer-key-field"),o=document.getElementById("csv-key-field");e.addEventListener("click",()=>this.close()),t.addEventListener("click",()=>this.close()),n.addEventListener("click",()=>this.executeJoin()),a.addEventListener("click",()=>{i.click()}),a.addEventListener("dragover",l=>{l.preventDefault(),a.classList.add("dragover")}),a.addEventListener("dragleave",()=>{a.classList.remove("dragover")}),a.addEventListener("drop",l=>{l.preventDefault(),a.classList.remove("dragover");const u=l.dataTransfer.files[0];u&&this.handleFile(u)}),i.addEventListener("change",l=>{const u=l.target.files[0];u&&this.handleFile(u)}),s.addEventListener("change",()=>this.updatePreview()),o.addEventListener("change",()=>this.updatePreview())}handleFile(e){const t=e.name.toLowerCase(),n=t.endsWith(".xlsx")||t.endsWith(".xls"),i=t.endsWith(".csv")||t.endsWith(".txt");if(!n&&!i){alert("CSV, TXT, XLSX, XLS 파일만 지원됩니다.");return}const a=new FileReader;a.onload=s=>{try{let o;n?o=Am.parseXLSX(s.target.result):o=Am.parseCSV(s.target.result),this.csvData=o.data,this.csvHeaders=o.headers,this.onCSVLoaded(e.name)}catch(o){alert("파일 파싱 오류: "+o.message)}},n?a.readAsArrayBuffer(e):a.readAsText(e,"UTF-8")}onCSVLoaded(e){document.getElementById("upload-placeholder").style.display="none";const t=document.getElementById("upload-success");t.style.display="flex",document.getElementById("csv-filename").textContent=e,document.getElementById("csv-row-count").textContent="("+this.csvData.length+"행)";const n=document.getElementById("csv-key-field");n.disabled=!1,n.innerHTML=this.csvHeaders.map(i=>'<option value="'+i+'">'+i+"</option>").join(""),this.updateJoinFieldsList(),this.updatePreview()}updateJoinFieldsList(){const e=document.getElementById("join-fields-list"),t=document.getElementById("csv-key-field").value,n=this.csvHeaders.filter(i=>i!==t);if(n.length===0){e.innerHTML='<div class="placeholder-text">조인할 필드가 없습니다.</div>';return}e.innerHTML=n.map(i=>'<label class="field-checkbox"><input type="checkbox" value="'+i+'" checked><span>'+i+"</span></label>").join(""),e.querySelectorAll('input[type="checkbox"]').forEach(i=>{i.addEventListener("change",()=>this.updatePreview())})}updatePreview(){if(!this.csvData)return;const e=document.getElementById("layer-key-field").value,t=document.getElementById("csv-key-field").value,n=Am.previewJoin(this.currentLayerId,e,this.csvData,t),i=document.getElementById("join-preview");i.style.display="block",document.getElementById("match-count").textContent=n.matched,document.getElementById("unmatch-count").textContent=n.unmatched,document.getElementById("match-rate").textContent=n.matchRate+"%";const a=document.getElementById("join-apply");a.disabled=n.matched===0,this.updateJoinFieldsList()}getSelectedFields(){const e=document.querySelectorAll("#join-fields-list input[type='checkbox']:checked");return Array.from(e).map(t=>t.value)}executeJoin(){const e=document.getElementById("layer-key-field").value,t=document.getElementById("csv-key-field").value,n=this.getSelectedFields();if(n.length===0){alert("조인할 필드를 선택해주세요.");return}try{const i=Am.join(this.currentLayerId,e,this.csvData,t,n);alert(`테이블 결합 완료!
- 조인된 피처: `+i.joinedCount+"/"+i.totalFeatures+`
- 추가된 필드: `+i.fieldsAdded.join(", ")),this.close()}catch(i){alert("조인 실패: "+i.message)}}close(){this.modal&&(this.modal.remove(),this.modal=null),this.csvData=null,this.csvHeaders=null}}const kfe=new Dfe,Lb={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"};class Db extends _l{constructor(e,t,n,i,a){super(e),this.features=t,this.coordinate=n,this.startCoordinate=i,this.mapBrowserEvent=a}}class Rfe extends PA{constructor(e){e=e||{},super(e),this.on,this.once,this.un,this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=e.features!==void 0?e.features:null;let t;if(e.layers&&!this.features_)if(typeof e.layers=="function")t=e.layers;else{const n=e.layers;t=function(i){return n.includes(i)}}else t=eh;this.layerFilter_=t,this.filter_=e.filter&&!this.features_?e.filter:eh,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.condition_=e.condition?e.condition:Ov,this.lastFeature_=null,this.addChangeListener(Ox.ACTIVE,this.handleActiveChanged_)}handleDownEvent(e){if(!e.originalEvent||!this.condition_(e))return!1;if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=e.coordinate,this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);const t=this.features_||new po([this.lastFeature_]);return this.dispatchEvent(new Db(Lb.TRANSLATESTART,t,e.coordinate,this.startCoordinate_,e)),!0}return!1}handleUpEvent(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);const t=this.features_||new po([this.lastFeature_]);return this.dispatchEvent(new Db(Lb.TRANSLATEEND,t,e.coordinate,this.startCoordinate_,e)),this.startCoordinate_=null,!0}return!1}handleDragEvent(e){if(this.lastCoordinate_){const t=e.coordinate;e.map.getView().getProjection();const n=ia(t),i=ia(this.lastCoordinate_),a=n[0]-i[0],s=n[1]-i[1],o=this.features_||new po([this.lastFeature_]);o.forEach(function(l){const u=l.getGeometry();u.translate(a,s),l.setGeometry(u)}),this.lastCoordinate_=t,this.dispatchEvent(new Db(Lb.TRANSLATING,o,t,this.startCoordinate_,e))}}handleMoveEvent(e){const t=e.map.getViewport();this.featuresAtPixel_(e.pixel,e.map)?(t.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),t.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):t.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(e,t){return t.forEachFeatureAtPixel(e,(n,i)=>{if(!(!(n instanceof yi)||!this.filter_(n,i))&&!(this.features_&&!this.features_.getArray().includes(n)))return n},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(e){this.hitTolerance_=e}setMap(e){const t=this.getMap();super.setMap(e),this.updateState_(t)}handleActiveChanged_(){this.updateState_(null)}updateState_(e){let t=this.getMap();const n=this.getActive();(!t||!n)&&(t=t||e,t&&t.getViewport().classList.remove("ol-grab","ol-grabbing"))}}const PB=34962,UB=34963,Ofe=35044,sF=35048,Pfe=5121,Ufe=5123,Qfe=5125,A7=5126,oF=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Gfe(r,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!d$},e);const t=oF.length;for(let n=0;n<t;++n)try{const i=r.getContext(oF[n],e);if(i)return i}catch{}return null}const Hfe={STATIC_DRAW:Ofe};class lF{constructor(e,t){this.array_=null,this.type_=e,qn(e===PB||e===UB,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=t!==void 0?t:Hfe.STATIC_DRAW}ofSize(e){return this.array_=new(kb(this.type_))(e),this}fromArray(e){return this.array_=kb(this.type_).from(e),this}fromArrayBuffer(e){return this.array_=new(kb(this.type_))(e),this}getType(){return this.type_}getArray(){return this.array_}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function kb(r){switch(r){case PB:return Float32Array;case UB:return Uint32Array;default:return Float32Array}}const Wy={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},zfe=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,qfe=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class uF{constructor(e){this.gl_=e.webGlContext;const t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer(),this.depthBuffer_=t.createRenderbuffer();const n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,e.vertexShader||zfe),t.compileShader(n);const i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,e.fragmentShader||qfe),t.compileShader(i),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,n),t.attachShader(this.renderTargetProgram_,i),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer();const a=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(a),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(s=>{this.uniforms_.push({value:e.uniforms[s],location:t.getUniformLocation(this.renderTargetProgram_,s)})})}getGL(){return this.gl_}init(e){const t=this.getGL(),n=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.bindRenderbuffer(t.RENDERBUFFER,this.getDepthBuffer()),t.viewport(0,0,n[0],n[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n;const i=0,a=t.RGBA,s=0,o=t.RGBA,l=t.UNSIGNED_BYTE,u=null;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,i,a,n[0],n[1],s,o,l,u),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n[0],n[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthBuffer_)}}apply(e,t,n,i){const a=this.getGL(),s=e.size;if(a.bindFramebuffer(a.FRAMEBUFFER,t?t.getFrameBuffer():null),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.renderTargetTexture_),!t){const l=Or(a.canvas);if(!e.renderTargets[l]){const u=a.getContextAttributes();u&&u.preserveDrawingBuffer&&(a.clearColor(0,0,0,0),a.clearDepth(1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)),e.renderTargets[l]=!0}}a.disable(a.DEPTH_TEST),a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight),a.bindBuffer(a.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),a.useProgram(this.renderTargetProgram_),a.enableVertexAttribArray(this.renderTargetAttribLocation_),a.vertexAttribPointer(this.renderTargetAttribLocation_,2,a.FLOAT,!1,0,0),a.uniform2f(this.renderTargetUniformLocation_,s[0],s[1]),a.uniform1i(this.renderTargetTextureLocation_,0);const o=e.layerStatesArray[e.layerIndex].opacity;a.uniform1f(this.renderTargetOpacityLocation_,o),this.applyUniforms(e),n&&n(a,e),a.drawArrays(a.TRIANGLES,0,6),i&&i(a,e)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(e){const t=this.getGL();let n,i=1;this.uniforms_.forEach(function(a){if(n=typeof a.value=="function"?a.value(e):a.value,n instanceof HTMLCanvasElement||n instanceof ImageData)a.texture||(a.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${i}`]),t.bindTexture(t.TEXTURE_2D,a.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,n.width,n.height,0,t.UNSIGNED_BYTE,new Uint8Array(n.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.uniform1i(a.location,i++);else if(Array.isArray(n))switch(n.length){case 2:t.uniform2f(a.location,n[0],n[1]);return;case 3:t.uniform3f(a.location,n[0],n[1],n[2]);return;case 4:t.uniform4f(a.location,n[0],n[1],n[2],n[3]);return;default:return}else typeof n=="number"&&t.uniform1f(a.location,n)})}}function jfe(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function $fe(r,e){return r[0]=e[0],r[1]=e[1],r[4]=e[2],r[5]=e[3],r[12]=e[4],r[13]=e[5],r}const Ph={PROJECTION_MATRIX:"u_projectionMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},zh={UNSIGNED_BYTE:Pfe,UNSIGNED_SHORT:Ufe,UNSIGNED_INT:Qfe,FLOAT:A7},sw={};function cF(r){return"shared/"+r}let hF=0;function Kfe(){const r="unique/"+hF;return hF+=1,r}function Vfe(r){let e=sw[r];if(!e){const t=document.createElement("canvas");t.width=1,t.height=1,t.style.position="absolute",t.style.left="0",e={users:0,context:Gfe(t)},sw[r]=e}return e.users+=1,e.context}function Wfe(r){const e=sw[r];if(!e||(e.users-=1,e.users>0))return;const t=e.context,n=t.getExtension("WEBGL_lose_context");n&&n.loseContext();const i=t.canvas;i.width=1,i.height=1,delete sw[r]}class Yfe extends t_{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?cF(e.canvasCacheKey):Kfe(),this.gl_=Vfe(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const t=this.gl_.canvas;t.addEventListener(Wy.LOST,this.boundHandleWebGLContextLost_),t.addEventListener(Wy.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Es(),this.offsetScaleMatrix_=Es(),this.tmpMat4_=jfe(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map(n=>new uF({webGlContext:this.gl_,scaleRatio:n.scaleRatio,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms})):[new uF({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(e){this.uniforms_=[],this.addUniforms(e)}addUniforms(e){for(const t in e)this.uniforms_.push({name:t,value:e[t]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===cF(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t}bindBuffer(e){const t=this.gl_,n=Or(e);let i=this.bufferCache_[n];if(!i){const a=t.createBuffer();i={buffer:e,webGlBuffer:a},this.bufferCache_[n]=i}t.bindBuffer(e.getType(),i.webGlBuffer)}flushBufferData(e){const t=this.gl_;this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const t=this.gl_,n=Or(e),i=this.bufferCache_[n];i&&!t.isContextLost()&&t.deleteBuffer(i.webGlBuffer),delete this.bufferCache_[n]}disposeInternal(){const e=this.gl_.canvas;e.removeEventListener(Wy.LOST,this.boundHandleWebGLContextLost_),e.removeEventListener(Wy.RESTORED,this.boundHandleWebGLContextRestored_),Wfe(this.canvasCacheKey_),delete this.gl_}prepareDraw(e,t,n){const i=this.gl_,a=this.getCanvas(),s=e.size,o=e.pixelRatio;(a.width!==s[0]*o||a.height!==s[1]*o)&&(a.width=s[0]*o,a.height=s[1]*o,a.style.width=s[0]+"px",a.style.height=s[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(e);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,t?i.ZERO:i.ONE_MINUS_SRC_ALPHA),n?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}bindTexture(e,t,n){const i=this.gl_;i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,e),i.uniform1i(this.getUniformLocation(n),t)}prepareDrawToRenderTarget(e,t,n,i){const a=this.gl_,s=t.getSize();a.bindFramebuffer(a.FRAMEBUFFER,t.getFramebuffer()),a.bindRenderbuffer(a.RENDERBUFFER,t.getDepthbuffer()),a.viewport(0,0,s[0],s[1]),a.bindTexture(a.TEXTURE_2D,t.getTexture()),a.clearColor(0,0,0,0),a.depthRange(0,1),a.clearDepth(1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.enable(a.BLEND),a.blendFunc(a.ONE,n?a.ZERO:a.ONE_MINUS_SRC_ALPHA),i?(a.enable(a.DEPTH_TEST),a.depthFunc(a.LEQUAL)):a.disable(a.DEPTH_TEST)}drawElements(e,t){const n=this.gl_;this.getExtension("OES_element_index_uint");const i=n.UNSIGNED_INT,a=4,s=t-e,o=e*a;n.drawElements(n.TRIANGLES,s,i,o)}finalizeDraw(e,t,n){for(let i=0,a=this.postProcessPasses_.length;i<a;i++)i===a-1?this.postProcessPasses_[i].apply(e,null,t,n):this.postProcessPasses_[i].apply(e,this.postProcessPasses_[i+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(e){const t=e.size,n=e.viewState.rotation,i=e.pixelRatio;this.setUniformFloatValue(Ph.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(Ph.ZOOM,e.viewState.zoom),this.setUniformFloatValue(Ph.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(Ph.PIXEL_RATIO,i),this.setUniformFloatVec2(Ph.VIEWPORT_SIZE_PX,[t[0],t[1]]),this.setUniformFloatValue(Ph.ROTATION,n)}applyHitDetectionUniform(e){const t=this.getUniformLocation(Ph.HIT_DETECTION);this.getGL().uniform1i(t,e?1:0),e&&this.setUniformFloatValue(Ph.PIXEL_RATIO,.5)}applyUniforms(e){const t=this.gl_;let n,i=0;this.uniforms_.forEach(a=>{if(n=typeof a.value=="function"?a.value(e):a.value,n instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof ImageData||n instanceof WebGLTexture){n instanceof WebGLTexture&&!a.texture?(a.prevValue=void 0,a.texture=n):a.texture||(a.prevValue=void 0,a.texture=t.createTexture()),this.bindTexture(a.texture,i,a.name),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);const s=!(n instanceof HTMLImageElement)||n.complete;!(n instanceof WebGLTexture)&&s&&a.prevValue!==n&&(a.prevValue=n,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),i++}else if(Array.isArray(n)&&n.length===6)this.setUniformMatrixValue(a.name,$fe(this.tmpMat4_,n));else if(Array.isArray(n)&&n.length<=4)switch(n.length){case 2:t.uniform2f(this.getUniformLocation(a.name),n[0],n[1]);return;case 3:t.uniform3f(this.getUniformLocation(a.name),n[0],n[1],n[2]);return;case 4:t.uniform4f(this.getUniformLocation(a.name),n[0],n[1],n[2],n[3]);return;default:return}else typeof n=="number"&&t.uniform1f(this.getUniformLocation(a.name),n)})}useProgram(e,t){this.gl_.useProgram(e),this.currentProgram_=e,this.applyFrameState(t),this.applyUniforms(t)}compileShader(e,t){const n=this.gl_,i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}getProgram(e,t){const n=this.gl_,i=this.compileShader(e,n.FRAGMENT_SHADER),a=this.compileShader(t,n.VERTEX_SHADER),s=n.createProgram();if(n.attachShader(s,i),n.attachShader(s,a),n.linkProgram(s),!n.getShaderParameter(i,n.COMPILE_STATUS)){const o=`Fragment shader compilation failed: ${n.getShaderInfoLog(i)}`;throw new Error(o)}if(n.deleteShader(i),!n.getShaderParameter(a,n.COMPILE_STATUS)){const o=`Vertex shader compilation failed: ${n.getShaderInfoLog(a)}`;throw new Error(o)}if(n.deleteShader(a),!n.getProgramParameter(s,n.LINK_STATUS)){const o=`GL program linking failed: ${n.getProgramInfoLog(s)}`;throw new Error(o)}return s}getUniformLocation(e){const t=Or(this.currentProgram_);return this.uniformLocationsByProgram_[t]===void 0&&(this.uniformLocationsByProgram_[t]={}),this.uniformLocationsByProgram_[t][e]===void 0&&(this.uniformLocationsByProgram_[t][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[t][e]}getAttributeLocation(e){const t=Or(this.currentProgram_);return this.attribLocationsByProgram_[t]===void 0&&(this.attribLocationsByProgram_[t]={}),this.attribLocationsByProgram_[t][e]===void 0&&(this.attribLocationsByProgram_[t][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[t][e]}makeProjectionTransform(e,t){const n=e.size,i=e.viewState.rotation,a=e.viewState.resolution,s=e.viewState.center;return bu(t,0,0,2/(a*n[0]),2/(a*n[1]),-i,-s[0],-s[1]),t}setUniformFloatValue(e,t){this.gl_.uniform1f(this.getUniformLocation(e),t)}setUniformFloatVec2(e,t){this.gl_.uniform2fv(this.getUniformLocation(e),t)}setUniformFloatVec4(e,t){this.gl_.uniform4fv(this.getUniformLocation(e),t)}setUniformMatrixValue(e,t){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,t)}enableAttributeArray_(e,t,n,i,a){const s=this.getAttributeLocation(e);s<0||(this.gl_.enableVertexAttribArray(s),this.gl_.vertexAttribPointer(s,t,n,!1,i,a))}enableAttributes(e){const t=Xfe(e);let n=0;for(let i=0;i<e.length;i++){const a=e[i];this.enableAttributeArray_(a.name,a.size,a.type||A7,t,n),n+=a.size*d7(a.type)}}handleWebGLContextLost(e){Wd(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(e,t,n){const i=this.gl_;n=n||i.createTexture();const a=0,s=i.RGBA,o=0,l=i.RGBA,u=i.UNSIGNED_BYTE;return i.bindTexture(i.TEXTURE_2D,n),t?i.texImage2D(i.TEXTURE_2D,a,s,l,u,t):i.texImage2D(i.TEXTURE_2D,a,s,e[0],e[1],o,l,u,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),n}}function Xfe(r){let e=0;for(let t=0;t<r.length;t++){const n=r[t];e+=n.size*d7(n.type)}return e}function d7(r){switch(r){case zh.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case zh.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case zh.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case zh.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class QB extends nO{constructor(e,t){super(e),t=t||{},this.inversePixelTransform_=Es(),this.pixelContext_=null,this.postProcesses_=t.postProcesses,this.uniforms_=t.uniforms,this.helper,e.addChangeListener(hi.MAP,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,t){const n=this.getLayer();if(n.hasListener(_s.PRECOMPOSE)){const i=new ev(_s.PRECOMPOSE,void 0,t,e);n.dispatchEvent(i)}}dispatchPostComposeEvent(e,t){const n=this.getLayer();if(n.hasListener(_s.POSTCOMPOSE)){const i=new ev(_s.POSTCOMPOSE,void 0,t,e);n.dispatchEvent(i)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let t=!0,n=-1,i;for(let s=0,o=e.layerStatesArray.length;s<o;s++){const l=e.layerStatesArray[s].layer,u=l.getRenderer();if(!(u instanceof QB)){t=!0;continue}const c=l.getClassName();if((t||c!==i)&&(n+=1,t=!1),i=c,u===this)break}const a="map/"+e.mapId+"/group/"+n;(!this.helper||!this.helper.canvasCacheKeyMatches(a)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new Yfe({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:a}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(e,t,n){const i=this.getLayer();if(i.hasListener(e)){bu(this.inversePixelTransform_,0,0,n.pixelRatio,-n.pixelRatio,0,0,-n.size[1]);const a=new ev(e,this.inversePixelTransform_,n,t);i.dispatchEvent(a)}}preRender(e,t){this.dispatchRenderEvent_(_s.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(_s.POSTRENDER,e,t)}}const Dc=new Uint8Array(4);class Zfe{constructor(e,t){this.helper_=e;const n=e.getGL();this.texture_=n.createTexture(),this.framebuffer_=n.createFramebuffer(),this.depthbuffer_=n.createRenderbuffer(),this.size_=t||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(e){oh(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const e=this.size_,t=this.helper_.getGL();t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(e,t){if(e<0||t<0||e>this.size_[0]||t>=this.size_[1])return Dc[0]=0,Dc[1]=0,Dc[2]=0,Dc[3]=0,Dc;this.readAll();const n=Math.floor(e)+(this.size_[1]-Math.floor(t)-1)*this.size_[0];return Dc[0]=this.data_[n*4],Dc[1]=this.data_[n*4+1],Dc[2]=this.data_[n*4+2],Dc[3]=this.data_[n*4+3],Dc}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const e=this.size_,t=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.viewport(0,0,e[0],e[1]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture_,0),t.bindRenderbuffer(t.RENDERBUFFER,this.depthbuffer_),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e[0],e[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(e[0]*e[1]*4)}}const fF={GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS"};var g7={exports:{}};g7.exports=N_;g7.exports.default=N_;function N_(r,e,t){t=t||2;var n=e&&e.length,i=n?e[0]*t:r.length,a=p7(r,0,i,t,!0),s=[];if(!a||a.next===a.prev)return s;var o,l,u,c,h,f,A;if(n&&(a=nAe(r,e,a,t)),r.length>80*t){o=u=r[0],l=c=r[1];for(var d=t;d<i;d+=t)h=r[d],f=r[d+1],h<o&&(o=h),f<l&&(l=f),h>u&&(u=h),f>c&&(c=f);A=Math.max(u-o,c-l),A=A!==0?32767/A:0}return Jv(a,s,t,o,l,A,0),s}function p7(r,e,t,n,i){var a,s;if(i===IS(r,e,t,n)>0)for(a=e;a<t;a+=n)s=AF(a,r[a],r[a+1],s);else for(a=t-n;a>=e;a-=n)s=AF(a,r[a],r[a+1],s);return s&&I_(s,s.next)&&(t1(s),s=s.next),s}function jd(r,e){if(!r)return r;e||(e=r);var t=r,n;do if(n=!1,!t.steiner&&(I_(t,t.next)||oa(t.prev,t,t.next)===0)){if(t1(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Jv(r,e,t,n,i,a,s){if(r){!s&&a&&lAe(r,n,i,a);for(var o=r,l,u;r.prev!==r.next;){if(l=r.prev,u=r.next,a?eAe(r,n,i,a):Jfe(r)){e.push(l.i/t|0),e.push(r.i/t|0),e.push(u.i/t|0),t1(r),r=u.next,o=u.next;continue}if(r=u,r===o){s?s===1?(r=tAe(jd(r),e,t),Jv(r,e,t,n,i,a,2)):s===2&&rAe(r,e,t,n,i,a):Jv(jd(r),e,t,n,i,a,1);break}}}}function Jfe(r){var e=r.prev,t=r,n=r.next;if(oa(e,t,n)>=0)return!1;for(var i=e.x,a=t.x,s=n.x,o=e.y,l=t.y,u=n.y,c=i<a?i<s?i:s:a<s?a:s,h=o<l?o<u?o:u:l<u?l:u,f=i>a?i>s?i:s:a>s?a:s,A=o>l?o>u?o:u:l>u?l:u,d=n.next;d!==e;){if(d.x>=c&&d.x<=f&&d.y>=h&&d.y<=A&&xg(i,o,a,l,s,u,d.x,d.y)&&oa(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function eAe(r,e,t,n){var i=r.prev,a=r,s=r.next;if(oa(i,a,s)>=0)return!1;for(var o=i.x,l=a.x,u=s.x,c=i.y,h=a.y,f=s.y,A=o<l?o<u?o:u:l<u?l:u,d=c<h?c<f?c:f:h<f?h:f,p=o>l?o>u?o:u:l>u?l:u,y=c>h?c>f?c:f:h>f?h:f,v=TS(A,d,e,t,n),w=TS(p,y,e,t,n),x=r.prevZ,b=r.nextZ;x&&x.z>=v&&b&&b.z<=w;){if(x.x>=A&&x.x<=p&&x.y>=d&&x.y<=y&&x!==i&&x!==s&&xg(o,c,l,h,u,f,x.x,x.y)&&oa(x.prev,x,x.next)>=0||(x=x.prevZ,b.x>=A&&b.x<=p&&b.y>=d&&b.y<=y&&b!==i&&b!==s&&xg(o,c,l,h,u,f,b.x,b.y)&&oa(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;x&&x.z>=v;){if(x.x>=A&&x.x<=p&&x.y>=d&&x.y<=y&&x!==i&&x!==s&&xg(o,c,l,h,u,f,x.x,x.y)&&oa(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=w;){if(b.x>=A&&b.x<=p&&b.y>=d&&b.y<=y&&b!==i&&b!==s&&xg(o,c,l,h,u,f,b.x,b.y)&&oa(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function tAe(r,e,t){var n=r;do{var i=n.prev,a=n.next.next;!I_(i,a)&&m7(i,n,n.next,a)&&e1(i,a)&&e1(a,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(a.i/t|0),t1(n),t1(n.next),n=r=a),n=n.next}while(n!==r);return jd(n)}function rAe(r,e,t,n,i,a){var s=r;do{for(var o=s.next.next;o!==s.prev;){if(s.i!==o.i&&hAe(s,o)){var l=v7(s,o);s=jd(s,s.next),l=jd(l,l.next),Jv(s,e,t,n,i,a,0),Jv(l,e,t,n,i,a,0);return}o=o.next}s=s.next}while(s!==r)}function nAe(r,e,t,n){var i=[],a,s,o,l,u;for(a=0,s=e.length;a<s;a++)o=e[a]*n,l=a<s-1?e[a+1]*n:r.length,u=p7(r,o,l,n,!1),u===u.next&&(u.steiner=!0),i.push(cAe(u));for(i.sort(iAe),a=0;a<i.length;a++)t=aAe(i[a],t);return t}function iAe(r,e){return r.x-e.x}function aAe(r,e){var t=sAe(r,e);if(!t)return e;var n=v7(t,r);return jd(n,n.next),jd(t,t.next)}function sAe(r,e){var t=e,n=r.x,i=r.y,a=-1/0,s;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){var o=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(o<=n&&o>a&&(a=o,s=t.x<t.next.x?t:t.next,o===n))return s}t=t.next}while(t!==e);if(!s)return null;var l=s,u=s.x,c=s.y,h=1/0,f;t=s;do n>=t.x&&t.x>=u&&n!==t.x&&xg(i<c?n:a,i,u,c,i<c?a:n,i,t.x,t.y)&&(f=Math.abs(i-t.y)/(n-t.x),e1(t,r)&&(f<h||f===h&&(t.x>s.x||t.x===s.x&&oAe(s,t)))&&(s=t,h=f)),t=t.next;while(t!==l);return s}function oAe(r,e){return oa(r.prev,r,e.prev)<0&&oa(e.next,r,r.next)<0}function lAe(r,e,t,n){var i=r;do i.z===0&&(i.z=TS(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,uAe(i)}function uAe(r){var e,t,n,i,a,s,o,l,u=1;do{for(t=r,r=null,a=null,s=0;t;){for(s++,n=t,o=0,e=0;e<u&&(o++,n=n.nextZ,!!n);e++);for(l=u;o>0||l>0&&n;)o!==0&&(l===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,o--):(i=n,n=n.nextZ,l--),a?a.nextZ=i:r=i,i.prevZ=a,a=i;t=n}a.nextZ=null,u*=2}while(s>1);return r}function TS(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function cAe(r){var e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function xg(r,e,t,n,i,a,s,o){return(i-s)*(e-o)>=(r-s)*(a-o)&&(r-s)*(n-o)>=(t-s)*(e-o)&&(t-s)*(a-o)>=(i-s)*(n-o)}function hAe(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!fAe(r,e)&&(e1(r,e)&&e1(e,r)&&AAe(r,e)&&(oa(r.prev,r,e.prev)||oa(r,e.prev,e))||I_(r,e)&&oa(r.prev,r,r.next)>0&&oa(e.prev,e,e.next)>0)}function oa(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function I_(r,e){return r.x===e.x&&r.y===e.y}function m7(r,e,t,n){var i=Xy(oa(r,e,t)),a=Xy(oa(r,e,n)),s=Xy(oa(t,n,r)),o=Xy(oa(t,n,e));return!!(i!==a&&s!==o||i===0&&Yy(r,t,e)||a===0&&Yy(r,n,e)||s===0&&Yy(t,r,n)||o===0&&Yy(t,e,n))}function Yy(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function Xy(r){return r>0?1:r<0?-1:0}function fAe(r,e){var t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&m7(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function e1(r,e){return oa(r.prev,r,r.next)<0?oa(r,e,r.next)>=0&&oa(r,r.prev,e)>=0:oa(r,e,r.prev)<0||oa(r,r.next,e)<0}function AAe(r,e){var t=r,n=!1,i=(r.x+e.x)/2,a=(r.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&i<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function v7(r,e){var t=new NS(r.i,r.x,r.y),n=new NS(e.i,e.x,e.y),i=r.next,a=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,a.next=n,n.prev=a,n}function AF(r,e,t,n){var i=new NS(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function t1(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function NS(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}N_.deviation=function(r,e,t,n){var i=e&&e.length,a=i?e[0]*t:r.length,s=Math.abs(IS(r,0,a,t));if(i)for(var o=0,l=e.length;o<l;o++){var u=e[o]*t,c=o<l-1?e[o+1]*t:r.length;s-=Math.abs(IS(r,u,c,t))}var h=0;for(o=0;o<n.length;o+=3){var f=n[o]*t,A=n[o+1]*t,d=n[o+2]*t;h+=Math.abs((r[f]-r[d])*(r[A+1]-r[f+1])-(r[f]-r[A])*(r[d+1]-r[f+1]))}return s===0&&h===0?0:Math.abs((h-s)/s)};function IS(r,e,t,n){for(var i=0,a=e,s=t-n;a<t;a+=n)i+=(r[s]-r[a])*(r[a+1]+r[s+1]),s=a;return i}N_.flatten=function(r){for(var e=r[0][0].length,t={vertices:[],holes:[],dimensions:e},n=0,i=0;i<r.length;i++){for(var a=0;a<r[i].length;a++)for(var s=0;s<e;s++)t.vertices.push(r[i][a][s]);i>0&&(n+=r[i-1].length,t.holes.push(n))}return t};const dF=.985;function dAe(r,e){e=e||[];const t=256,n=t-1;return e[0]=Math.floor(r/t/t/t)/n,e[1]=Math.floor(r/t/t)%t/n,e[2]=Math.floor(r/t)%t/n,e[3]=r%t/n,e}function gAe(r){let e=0;const t=256,n=t-1;return e+=Math.round(r[0]*t*t*t*n),e+=Math.round(r[1]*t*t*n),e+=Math.round(r[2]*t*n),e+=Math.round(r[3]*n),e}function pAe(){const r='const e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS";function r(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function x(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new Error(t)}(0!==n,"Transformation matrix cannot be inverted");const x=t[0],i=t[1],u=t[2],o=t[3],f=t[4],s=t[5];return e[0]=o/n,e[1]=-i/n,e[2]=-u/n,e[3]=x/n,e[4]=(u*s-o*f)/n,e[5]=-(x*s-i*f)/n,e}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}new Array(6);var u={exports:{}};function o(e,t,n){n=n||2;var r,x,i,u,o,s,l,v=t&&t.length,h=v?t[0]*n:e.length,c=f(e,0,h,n,!0),g=[];if(!c||c.next===c.prev)return g;if(v&&(c=function(e,t,n,r){var x,i,u,o=[];for(x=0,i=t.length;x<i;x++)(u=f(e,t[x]*r,x<i-1?t[x+1]*r:e.length,r,!1))===u.next&&(u.steiner=!0),o.push(d(u));for(o.sort(p),x=0;x<o.length;x++)n=y(o[x],n);return n}(e,t,c,n)),e.length>80*n){r=i=e[0],x=u=e[1];for(var b=n;b<h;b+=n)(o=e[b])<r&&(r=o),(s=e[b+1])<x&&(x=s),o>i&&(i=o),s>u&&(u=s);l=0!==(l=Math.max(i-r,u-x))?32767/l:0}return a(c,g,n,r,x,l,0),g}function f(e,t,n,r,x){var i,u;if(x===O(e,t,n,r)>0)for(i=t;i<n;i+=r)u=P(i,e[i],e[i+1],u);else for(i=n-r;i>=t;i-=r)u=P(i,e[i],e[i+1],u);return u&&m(u,u.next)&&(B(u),u=u.next),u}function s(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!m(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(B(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,x,i,u){if(e){!u&&i&&function(e,t,n,r){var x=e;do{0===x.z&&(x.z=b(x.x,x.y,t,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,function(e){var t,n,r,x,i,u,o,f,s=1;do{for(n=e,e=null,i=null,u=0;n;){for(u++,r=n,o=0,t=0;t<s&&(o++,r=r.nextZ);t++);for(f=s;o>0||f>0&&r;)0!==o&&(0===f||!r||n.z<=r.z)?(x=n,n=n.nextZ,o--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;n=r}i.nextZ=null,s*=2}while(u>1)}(x)}(e,r,x,i);for(var o,f,p=e;e.prev!==e.next;)if(o=e.prev,f=e.next,i?v(e,r,x,i):l(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(f.i/n|0),B(e),e=f.next,p=f.next;else if((e=f)===p){u?1===u?a(e=h(s(e),t,n),t,n,r,x,i,2):2===u&&c(e,t,n,r,x,i):a(s(e),t,n,r,x,i,1);break}}}function l(e){var t=e.prev,n=e,r=e.next;if(w(t,n,r)>=0)return!1;for(var x=t.x,i=n.x,u=r.x,o=t.y,f=n.y,s=r.y,a=x<i?x<u?x:u:i<u?i:u,l=o<f?o<s?o:s:f<s?f:s,v=x>i?x>u?x:u:i>u?i:u,h=o>f?o>s?o:s:f>s?f:s,c=r.next;c!==t;){if(c.x>=a&&c.x<=v&&c.y>=l&&c.y<=h&&M(x,o,i,f,u,s,c.x,c.y)&&w(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function v(e,t,n,r){var x=e.prev,i=e,u=e.next;if(w(x,i,u)>=0)return!1;for(var o=x.x,f=i.x,s=u.x,a=x.y,l=i.y,v=u.y,h=o<f?o<s?o:s:f<s?f:s,c=a<l?a<v?a:v:l<v?l:v,p=o>f?o>s?o:s:f>s?f:s,y=a>l?a>v?a:v:l>v?l:v,g=b(h,c,t,n,r),d=b(p,y,t,n,r),Z=e.prevZ,m=e.nextZ;Z&&Z.z>=g&&m&&m.z<=d;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;if(Z=Z.prevZ,m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;Z&&Z.z>=g;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;m&&m.z<=d;){if(m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function h(e,t,n){var r=e;do{var x=r.prev,i=r.next.next;!m(x,i)&&A(x,r,r.next,i)&&z(x,i)&&z(i,x)&&(t.push(x.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),B(r),B(r.next),r=e=i),r=r.next}while(r!==e);return s(r)}function c(e,t,n,r,x,i){var u=e;do{for(var o=u.next.next;o!==u.prev;){if(u.i!==o.i&&Z(u,o)){var f=F(u,o);return u=s(u,u.next),f=s(f,f.next),a(u,t,n,r,x,i,0),void a(f,t,n,r,x,i,0)}o=o.next}u=u.next}while(u!==e)}function p(e,t){return e.x-t.x}function y(e,t){var n=function(e,t){var n,r=t,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var o=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=x&&o>u&&(u=o,n=r.x<r.next.x?r:r.next,o===x))return n}r=r.next}while(r!==t);if(!n)return null;var f,s=n,a=n.x,l=n.y,v=1/0;r=n;do{x>=r.x&&r.x>=a&&x!==r.x&&M(i<l?x:u,i,a,l,i<l?u:x,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(x-r.x),z(r,e)&&(f<v||f===v&&(r.x>n.x||r.x===n.x&&g(n,r)))&&(n=r,v=f)),r=r.next}while(r!==s);return n}(e,t);if(!n)return t;var r=F(n,e);return s(r,r.next),s(n,n.next)}function g(e,t){return w(e.prev,e,t.prev)<0&&w(t.next,e,e.next)<0}function b(e,t,n,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function d(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function M(e,t,n,r,x,i,u,o){return(x-u)*(t-o)>=(e-u)*(i-o)&&(e-u)*(r-o)>=(n-u)*(t-o)&&(n-u)*(i-o)>=(x-u)*(r-o)}function Z(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&A(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(z(e,t)&&z(t,e)&&function(e,t){var n=e,r=!1,x=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&x<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(w(e.prev,e,t.prev)||w(e,t.prev,t))||m(e,t)&&w(e.prev,e,e.next)>0&&w(t.prev,t,t.next)>0)}function w(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function m(e,t){return e.x===t.x&&e.y===t.y}function A(e,t,n,r){var x=I(w(e,t,n)),i=I(w(e,t,r)),u=I(w(n,r,e)),o=I(w(n,r,t));return x!==i&&u!==o||(!(0!==x||!E(e,n,t))||(!(0!==i||!E(e,r,t))||(!(0!==u||!E(n,e,r))||!(0!==o||!E(n,t,r)))))}function E(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function I(e){return e>0?1:e<0?-1:0}function z(e,t){return w(e.prev,e,e.next)<0?w(e,t,e.next)>=0&&w(e,e.prev,t)>=0:w(e,t,e.prev)<0||w(e,e.next,t)<0}function F(e,t){var n=new _(e.i,e.x,e.y),r=new _(t.i,t.x,t.y),x=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=x,x.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function P(e,t,n,r){var x=new _(e,t,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function B(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(e,t,n,r){for(var x=0,i=t,u=n-r;i<n;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}u.exports=o,u.exports.default=o,o.deviation=function(e,t,n,r){var x=t&&t.length,i=x?t[0]*n:e.length,u=Math.abs(O(e,0,i,n));if(x)for(var o=0,f=t.length;o<f;o++){var s=t[o]*n,a=o<f-1?t[o+1]*n:e.length;u-=Math.abs(O(e,s,a,n))}var l=0;for(o=0;o<r.length;o+=3){var v=r[o]*n,h=r[o+1]*n,c=r[o+2]*n;l+=Math.abs((e[v]-e[c])*(e[h+1]-e[v+1])-(e[v]-e[h])*(e[c+1]-e[v+1]))}return 0===u&&0===l?0:Math.abs((l-u)/u)},o.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<t;u++)n.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,n.holes.push(r))}return n};var N=i(u.exports);const R=[],S={vertexPosition:0,indexPosition:0};function T(e,t,n,r,x){e[t+0]=n,e[t+1]=r,e[t+2]=x}function U(e,t,n,r,x,i){const u=3+x,o=e[t+0],f=e[t+1],s=R;s.length=x;for(let n=0;n<s.length;n++)s[n]=e[t+2+n];let a=i?i.vertexPosition:0,l=i?i.indexPosition:0;const v=a/u;return T(n,a,o,f,0),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,1),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,2),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,3),s.length&&n.set(s,a+3),a+=u,r[l++]=v,r[l++]=v+1,r[l++]=v+3,r[l++]=v+1,r[l++]=v+2,r[l++]=v+3,S.vertexPosition=a,S.indexPosition=l,S}function k(e,t,n,x,i,u,o,f,s,a,l){const v=8+f.length,h=u.length/v,c=[e[t+0],e[t+1]],p=[e[n],e[n+1]],y=r(s,[...c]),g=r(s,[...p]);function b(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),x=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-x[1],x[0]],u=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),o=[(n[0]-e[0])/u,(n[1]-e[1])/u],f=0===r||0===u?0:Math.acos((s=o[0]*x[0]+o[1]*x[1],a=-1,l=1,Math.min(Math.max(s,a),l)));var s,a,l;return o[0]*i[0]+o[1]*i[1]>0?f:2*Math.PI-f}let d=-1,M=-1,Z=l;const w=null!==i;if(null!==x){d=b(y,g,r(s,[...[e[x],e[x+1]]])),Math.cos(d)<=.985&&(Z+=Math.tan((d-Math.PI)/2))}if(w){M=b(g,y,r(s,[...[e[i],e[i+1]]])),Math.cos(M)<=.985&&(Z+=Math.tan((Math.PI-M)/2))}function m(e,t){return 0===t?1e4*e:Math.sign(t)*(1e4*e+Math.abs(t))}return u.push(c[0],c[1],p[0],p[1],d,M,a,m(0,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(1,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(2,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(3,l)),u.push(...f),o.push(h,h+1,h+2,h+1,h+3,h+2),{length:a+Math.sqrt((g[0]-y[0])*(g[0]-y[0])+(g[1]-y[1])*(g[1]-y[1])),angle:Z}}function G(e,t,n,r,x){const i=2+x;let u=t;const o=e.slice(u,u+x);u+=x;const f=e[u++];let s=0;const a=new Array(f-1);for(let t=0;t<f;t++)s+=e[u++],t<f-1&&(a[t]=s);const l=e.slice(u,u+2*s),v=N(l,a,2);for(let e=0;e<v.length;e++)r.push(v[e]+n.length/i);for(let e=0;e<l.length;e+=2)n.push(l[e],l[e+1],...o);return u+2*s}const j=self;j.onmessage=r=>{const i=r.data;switch(i.type){case t:{const e=3,t=2,n=i.customAttributesSize,r=t+n,x=new Float32Array(i.renderInstructions),u=x.length/r,o=4*u*(n+e),f=new Uint32Array(6*u),s=new Float32Array(o);let a;for(let e=0;e<x.length;e+=r)a=U(x,e,s,f,n,a);const l=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:x.buffer},i);j.postMessage(l,[s.buffer,f.buffer,x.buffer]);break}case n:{const e=[],t=[],n=i.customAttributesSize,r=2,u=new Float32Array(i.renderInstructions);let o=0;const f=[1,0,0,1,0,0];let s,a;for(x(f,i.renderInstructionsTransform);o<u.length;){a=Array.from(u.slice(o,o+n)),o+=n,s=u[o++];const x=o,i=o+(s-1)*r,l=u[x]===u[i]&&u[x+1]===u[i+1];let v=0,h=0;for(let n=0;n<s-1;n++){let c=null;n>0?c=o+(n-1)*r:l&&(c=i-r);let p=null;n<s-2?p=o+(n+2)*r:l&&(p=x+r);const y=k(u,o+n*r,o+(n+1)*r,c,p,e,t,a,f,v,h);v=y.length,h=y.angle}o+=s*r}const l=Uint32Array.from(t),v=Float32Array.from(e),h=Object.assign({vertexBuffer:v.buffer,indexBuffer:l.buffer,renderInstructions:u.buffer},i);j.postMessage(h,[v.buffer,l.buffer,u.buffer]);break}case e:{const e=[],t=[],n=i.customAttributesSize,r=new Float32Array(i.renderInstructions);let x=0;for(;x<r.length;)x=G(r,x,e,t,n);const u=Uint32Array.from(t),o=Float32Array.from(e),f=Object.assign({vertexBuffer:o.buffer,indexBuffer:u.buffer,renderInstructions:r.buffer},i);j.postMessage(f,[o.buffer,u.buffer,r.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(r,"binary").toString("base64"):URL.createObjectURL(new Blob([r],{type:"application/javascript"})))}function mAe(r,e){const t=r.viewState.projection,i=e.getSource().getWrapX()&&t.canWrapX(),a=t.getExtent(),s=r.extent,o=i?Mn(a):null,l=i?Math.ceil((s[2]-a[2])/o)+1:1;return[i?Math.floor((s[0]-a[0])/o):0,l,o]}class vAe extends QB{constructor(e,t){const n=t.uniforms||{},i=Es();n[Ph.PROJECTION_MATRIX]=i,super(e,{uniforms:n,postProcesses:t.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new lF(PB,sF),this.indicesBuffer_=new lF(UB,sF),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.program_,this.hitDetectionEnabled_=t.hitDetectionEnabled??!0;const a=t.attributes?t.attributes.map(function(o){return{name:"a_prop_"+o.name,size:1,type:zh.FLOAT}}):[];this.attributes=[{name:"a_position",size:2,type:zh.FLOAT},{name:"a_index",size:1,type:zh.FLOAT}],this.hitDetectionEnabled_&&(this.attributes.push({name:"a_prop_hitColor",size:4,type:zh.FLOAT}),this.attributes.push({name:"a_featureUid",size:1,type:zh.FLOAT})),this.attributes.push(...a),this.customAttributes=t.attributes?t.attributes:[],this.previousExtent_=Hl(),this.currentTransform_=i,this.renderTransform_=Es(),this.invertRenderTransform_=Es(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=pAe(),this.worker_.addEventListener("message",o=>{const l=o.data;if(l.type===fF.GENERATE_POINT_BUFFERS){const u=l.projectionTransform;this.verticesBuffer_.fromArrayBuffer(l.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.fromArrayBuffer(l.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=u,n4(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(o.data.renderInstructions),l.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}}),this.featureCache_={},this.featureCount_=0;const s=this.getLayer().getSource();this.sourceListenKeys_=[Fn(s,ms.ADDFEATURE,this.handleSourceFeatureAdded_,this),Fn(s,ms.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),Fn(s,ms.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),Fn(s,ms.CLEAR,this.handleSourceFeatureClear_,this)],s.forEachFeature(o=>{this.featureCache_[Or(o)]={feature:o,properties:o.getProperties(),geometry:o.getGeometry()},this.featureCount_++})}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new Zfe(this.helper))}handleSourceFeatureAdded_(e){const t=e.feature;this.featureCache_[Or(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(e){const t=e.feature;this.featureCache_[Or(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()}}handleSourceFeatureDelete_(e){const t=e.feature;delete this.featureCache_[Or(t)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(e){const t=this.helper.getGL();this.preRender(t,e);const[n,i,a]=mAe(e,this.getLayer());return this.renderWorlds(e,!1,n,i,a),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,n,i,a),this.hitRenderTarget_.clearCachedData()),this.postRender(t,e),this.helper.getCanvas()}prepareFrameInternal(e){const t=this.getLayer(),n=t.getSource(),i=e.viewState,a=!e.viewHints[Qa.ANIMATING]&&!e.viewHints[Qa.INTERACTING],s=!Od(this.previousExtent_,e.extent),o=this.sourceRevision_<n.getRevision();if(o&&(this.sourceRevision_=n.getRevision()),a&&(s||o)){const l=i.projection,u=i.resolution,c=t instanceof p_?t.getRenderBuffer():0,h=p1(e.extent,c*u);n.loadFeatures(h,u,l),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()}return this.helper.useProgram(this.program_,e),this.helper.prepareDraw(e),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(e){const t=Es();this.helper.makeProjectionTransform(e,t);const i=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,a=i*this.featureCount_;(!this.renderInstructions_||this.renderInstructions_.length!==a)&&(this.renderInstructions_=new Float32Array(a));let s,o;const l=[],u=[];let c=-1;for(const f in this.featureCache_)if(s=this.featureCache_[f],o=s.geometry,!(!o||o.getType()!=="Point")){if(l[0]=o.getFlatCoordinates()[0],l[1]=o.getFlatCoordinates()[1],Ga(t,l),this.renderInstructions_[++c]=l[0],this.renderInstructions_[++c]=l[1],this.hitDetectionEnabled_){const A=dAe(c+5,u);this.renderInstructions_[++c]=A[0],this.renderInstructions_[++c]=A[1],this.renderInstructions_[++c]=A[2],this.renderInstructions_[++c]=A[3],this.renderInstructions_[++c]=Number(f)}for(let A=0;A<this.customAttributes.length;A++){const d=this.customAttributes[A].callback(s.feature,s.properties);this.renderInstructions_[++c]=d}}const h={id:++this.lastSentId,type:fF.GENERATE_POINT_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:i-2};h.projectionTransform=t,this.ready=!1,this.worker_.postMessage(h,[this.renderInstructions_.buffer]),this.renderInstructions_=null}forEachFeatureAtCoordinate(e,t,n,i,a){if(qn(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return;const s=Ga(t.coordinateToPixelTransform,e.slice()),o=this.hitRenderTarget_.readPixel(s[0]/2,s[1]/2),l=[o[0]/255,o[1]/255,o[2]/255,o[3]/255],u=gAe(l),c=this.renderInstructions_[u],h=Math.floor(c).toString(),A=this.getLayer().getSource().getFeatureByUid(h);if(A)return i(A,this.getLayer(),null)}renderWorlds(e,t,n,i,a){let s=n;this.helper.useProgram(this.program_,e),t&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes);do{this.helper.makeProjectionTransform(e,this.currentTransform_),Ij(this.currentTransform_,s*a,0),dR(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(e),this.helper.applyHitDetectionUniform(t);const o=this.indicesBuffer_.getSize();this.helper.drawElements(0,o)}while(++s<i)}disposeInternal(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(e){Mi(e)}),this.sourceListenKeys_=null,super.disposeInternal()}renderDeclutter(){}}function mv(r){const e=r.toString();return e.includes(".")?e:e+".0"}function yAe(r){if(r.length<2||r.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${r.length}(${r.map(mv).join(", ")})`}function Rb(r){const e=Pd(r),t=e.length>3?e[3]:1;return yAe([e[0]/255*t,e[1]/255*t,e[2]/255*t,t])}const Ob={};let xAe=0;function wAe(r){return r in Ob||(Ob[r]=xAe++),Ob[r]}function k0(r){return mv(wAe(r))}function _Ae(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const R0=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;

// this used to produce an alpha-premultiplied color from a texture
vec4 samplePremultiplied(sampler2D sampler, vec2 texCoord) {
  vec4 color = texture2D(sampler, texCoord);
  return vec4(color.rgb * color.a, color.a);
}
`,O0=_Ae();class EAe{constructor(){this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${mv(O0["circle-radius"])} + ${mv(O0["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=Rb(O0["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=mv(O0["stroke-width"]),this.strokeColorExpression_=Rb(O0["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=k0("round"),this.strokeJoinExpression_=k0("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=Rb(O0["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(e){return this.uniforms_.push(e),this}addAttribute(e){return this.attributes_.push(e),this}addVarying(e,t,n){return this.varyings_.push({name:e,type:t,expression:n}),this}setSymbolSizeExpression(e){return this.hasSymbol_=!0,this.symbolSizeExpression_=e,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(e){return this.symbolRotationExpression_=e,this}setSymbolOffsetExpression(e){return this.symbolOffsetExpression_=e,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(e){return this.hasSymbol_=!0,this.symbolColorExpression_=e,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(e){return this.texCoordExpression_=e,this}setFragmentDiscardExpression(e){return this.discardExpression_=e,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(e){return this.symbolRotateWithView_=e,this}setStrokeWidthExpression(e){return this.hasStroke_=!0,this.strokeWidthExpression_=e,this}setStrokeColorExpression(e){return this.hasStroke_=!0,this.strokeColorExpression_=e,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(e){return this.strokeOffsetExpression_=e,this}setStrokeCapExpression(e){return this.strokeCapExpression_=e,this}setStrokeJoinExpression(e){return this.strokeJoinExpression_=e,this}setStrokeMiterLimitExpression(e){return this.strokeMiterLimitExpression_=e,this}setStrokeDistanceFieldExpression(e){return this.strokeDistanceFieldExpression_=e,this}setFillColorExpression(e){return this.hasFill_=!0,this.fillColorExpression_=e,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(e){this.vertexShaderFunctions_.includes(e)||this.vertexShaderFunctions_.push(e)}addFragmentShaderFunction(e){this.fragmentShaderFunctions_.includes(e)||this.fragmentShaderFunctions_.push(e)}getSymbolVertexShader(){return this.hasSymbol_?`${R0}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec4 a_prop_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_prop_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx;
  if (a_index == 0.0) {
    offsetPx -= halfSizePx;
  } else if (a_index == 1.0) {
    offsetPx += halfSizePx * vec2(1., -1.);
  } else if (a_index == 2.0) {
    offsetPx += halfSizePx;
  } else {
    offsetPx += halfSizePx * vec2(-1., 1.);
  }
  float angle = ${this.symbolRotationExpression_};
  ${this.symbolRotateWithView_?"angle += u_rotation;":""}
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;
  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;
  v_texCoord = vec2(u, v);
  v_prop_hitColor = a_prop_hitColor;
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); 
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${R0}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_prop_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_prop_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${R0}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute float a_parameters;
attribute float a_distance;
attribute vec2 a_joinAngles;
attribute vec4 a_prop_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_prop_hitColor;
varying float v_distanceOffsetPx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)
  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);
  
  // compute current vertex position
  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;
  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;
  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;
  vec2 joinDirection;
  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${dF} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing
  gl_Position = pxToScreen(positionPx);

  v_segmentStart = segmentStartPx;
  v_segmentEnd = segmentEndPx;
  v_width = lineWidth;
  v_prop_hitColor = a_prop_hitColor;
  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${R0}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_prop_hitColor;
varying float v_distanceOffsetPx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${dF}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${k0("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${k0("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${k0("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${k0("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

void main(void) {
  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPoint);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }

  float segmentLength = length(v_segmentEnd - v_segmentStart);
  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPoint = currentPoint - v_segmentStart;
  float currentLengthPx = max(0., min(dot(segmentTangent, startToPoint), segmentLength)) + v_distanceOffsetPx; 
  float currentRadiusPx = abs(dot(segmentNormal, startToPoint));
  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;
  vec4 color = ${this.strokeColorExpression_} * u_globalAlpha;
  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);
  float distance = max(
    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distance = max(distance, ${this.strokeDistanceFieldExpression_});
  gl_FragColor = color * smoothstep(0.5, -0.5, distance);
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_prop_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${R0}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute vec4 a_prop_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec4 v_prop_hitColor;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_prop_hitColor = a_prop_hitColor;
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${R0}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec4 v_prop_hitColor;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_} * u_globalAlpha;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_prop_hitColor;
  }
}`:null}}const Gu={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},bAe=["#00f","#0ff","#0f0","#ff0","#f00"];class CAe extends p_{constructor(e){e=e||{};const t=Object.assign({},e);delete t.gradient,delete t.radius,delete t.blur,delete t.weight,super(t),this.gradient_=null,this.addChangeListener(Gu.GRADIENT,this.handleGradientChanged_),this.setGradient(e.gradient?e.gradient:bAe),this.setBlur(e.blur!==void 0?e.blur:15),this.setRadius(e.radius!==void 0?e.radius:8);const n=e.weight?e.weight:"weight";typeof n=="string"?this.weightFunction_=function(i){return i.get(n)}:this.weightFunction_=n,this.setRenderOrder(null)}getBlur(){return this.get(Gu.BLUR)}getGradient(){return this.get(Gu.GRADIENT)}getRadius(){return this.get(Gu.RADIUS)}handleGradientChanged_(){this.gradient_=SAe(this.getGradient())}setBlur(e){this.set(Gu.BLUR,e)}setGradient(e){this.set(Gu.GRADIENT,e)}setRadius(e){this.set(Gu.RADIUS,e)}createRenderer(){const e=new EAe().addAttribute("float a_prop_weight").addVarying("v_prop_weight","float","a_prop_weight").addUniform("float u_size").addUniform("float u_blurSlope").setSymbolSizeExpression("vec2(u_size)").setSymbolColorExpression("vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * u_blurSlope) * v_prop_weight)");return new vAe(this,{className:this.getClassName(),attributes:[{name:"weight",callback:t=>{const n=this.weightFunction_(t);return n!==void 0?ea(n,0,1):1}}],uniforms:{u_size:()=>(this.get(Gu.RADIUS)+this.get(Gu.BLUR))*2,u_blurSlope:()=>this.get(Gu.RADIUS)/Math.max(1,this.get(Gu.BLUR))},hitDetectionEnabled:!0,vertexShader:e.getSymbolVertexShader(),fragmentShader:e.getSymbolFragmentShader(),postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}}function SAe(r){const n=Ts(1,256),i=n.createLinearGradient(0,0,1,256),a=1/(r.length-1);for(let s=0,o=r.length;s<o;++s)i.addColorStop(s*a,r[s]);return n.fillStyle=i,n.fillRect(0,0,1,256),n.canvas}class BAe{constructor(){this.labelConfigs=new Map,this.labelOffsets=new Map,this.editMode=!1,this.editLayer=null,this.translateInteraction=null,this.currentEditLayerId=null,Gt.on("label:refresh",e=>{this.labelConfigs.has(e.layerId)&&this.applyLabel(e.layerId)})}setLabel(e,t){var n=t.field;if(!n){this.removeLabel(e);return}this.labelConfigs.set(e,t),this.applyLabel(e)}getFeatureCenter(e,t=!0){var n=e.getGeometry();if(!n)return null;try{var i=n.getType(),a=null;if(i==="Polygon"){try{var s=n.getInteriorPoint();if(s){var o=s.getCoordinates();o&&o.length>=2&&!isNaN(o[0])&&!isNaN(o[1])&&(a=[o[0],o[1]])}}catch{}if(!a){var l=n.getExtent();a=[(l[0]+l[2])/2,(l[1]+l[3])/2]}}else if(i==="MultiPolygon"){try{var s=n.getInteriorPoint();if(s){var o=s.getCoordinates();o&&o.length>=2&&!isNaN(o[0])&&!isNaN(o[1])&&(a=[o[0],o[1]])}}catch{}if(!a){var u=n.getPolygons();if(u&&u.length>0){var l=u[0].getExtent();a=[(l[0]+l[2])/2,(l[1]+l[3])/2]}}}else if(i==="LineString"){var o=n.getCoordinates();if(o&&o.length>0){var c=Math.floor(o.length/2);a=o[c]}}else if(i==="MultiLineString"){var h=n.getLineStrings();if(h&&h.length>0){var f=h[0].getCoordinates();if(f&&f.length>0){var A=Math.floor(f.length/2);a=f[A]}}}else if(i==="Point")a=n.getCoordinates();else if(i==="MultiPoint"){var d=n.getPoints();d&&d.length>0&&(a=d[0].getCoordinates())}if(!a){var l=n.getExtent();l&&l[0]!==1/0&&(a=[(l[0]+l[2])/2,(l[1]+l[3])/2])}if(a&&t){var p=e.ol_uid||e.getId(),y=this.labelOffsets.get(p);y&&(a=[a[0]+y[0],a[1]+y[1]])}return a}catch(v){console.warn("getFeatureCenter error:",v)}return null}createDefaultStyle(e){var t=e.geometryType||"Polygon",n=e.color||"#3388ff",i=e.fillColor||n,a=e.strokeColor||n,s=e.fillOpacity!==void 0?e.fillOpacity:.3,o=e.strokeWidth||2;function l(c,h){if(c.indexOf("rgba")===0||c.indexOf("rgb")===0)return c;var f=parseInt(c.slice(1,3),16)||0,A=parseInt(c.slice(3,5),16)||0,d=parseInt(c.slice(5,7),16)||0;return"rgba("+f+","+A+","+d+","+h+")"}var u=l(i,s);return t==="Point"||t==="MultiPoint"?new En({image:new qs({radius:e.pointRadius||6,fill:new _n({color:u}),stroke:new hn({color:a,width:2})})}):t==="LineString"||t==="MultiLineString"?new En({stroke:new hn({color:a,width:o})}):new En({fill:new _n({color:u}),stroke:new hn({color:a,width:o})})}applyLabel(e){var t=pt.getLayer(e);if(t){var n=t.olLayer;if(n){var i=this.labelConfigs.get(e);if(i){var a=i.field,s=i.fontSize||12,o=i.fontColor||"#333333",l=i.haloColor||"#ffffff",u=i.haloWidth||2;if(!n._originalStyle){var c=n.getStyle();c?n._originalStyle=c:n._originalStyle=this.createDefaultStyle(t)}var h=n._originalStyle,f=this,A=this.createDefaultStyle(t),d=function(p,y){var v=[];try{if(typeof h=="function"){var w=h(p,y);w&&(v=Array.isArray(w)?w:[w])}else h&&(v=Array.isArray(h)?h:[h])}catch{}v.length===0&&(v=[A]);var x=p.get(a);if(x==null||x==="")return v;var b=f.getFeatureCenter(p);if(!b||!Array.isArray(b)||b.length<2||isNaN(b[0])||isNaN(b[1]))return v;var C=new En({geometry:new ja(b),text:new rc({text:String(x),font:s+"px sans-serif",fill:new _n({color:o}),stroke:new hn({color:l,width:u}),overflow:!0})});return v.concat([C])};n.setStyle(d),n._hasLabel=!0,n.getSource()&&n.getSource().changed(),Gt.emit(Xt.LAYER_STYLE_CHANGED,{layerId:e})}}}}removeLabel(e){var t=pt.getLayer(e);if(t){var n=t.olLayer;this.labelConfigs.delete(e),this.currentEditLayerId===e&&this.stopEditMode(),n._originalStyle&&(n.setStyle(n._originalStyle),delete n._originalStyle),delete n._hasLabel,Gt.emit(Xt.LAYER_STYLE_CHANGED,{layerId:e})}}getLabelConfig(e){return this.labelConfigs.get(e)||null}hasLabel(e){return this.labelConfigs.has(e)}startEditMode(e){var t=Nr.getMap();if(t){this.stopEditMode();var n=pt.getLayer(e);if(n){var i=n.olLayer,a=i.getSource();if(a){var s=a.getFeatures(),o=this.labelConfigs.get(e);if(o){this.currentEditLayerId=e,this.editMode=!0,this._editOriginalStyleFn=i.getStyle();var l=this,u=this.createDefaultStyle(n);i.setStyle(function(f,A){var d=[],p=i._originalStyle;try{if(typeof p=="function"){var y=p(f,A);y&&(d=Array.isArray(y)?y:[y])}else p&&(d=Array.isArray(p)?p:[p])}catch{}return d.length===0&&(d=[u]),d});var c=[];s.forEach(function(f){var A=f.get(o.field);if(!(A==null||A==="")){var d=l.getFeatureCenter(f,!0);if(d){var p=new yi({geometry:new ja(d),originalFeature:f,featureId:f.ol_uid||f.getId()});p.setStyle(new En({image:new qs({radius:8,fill:new _n({color:"rgba(255, 100, 100, 0.8)"}),stroke:new hn({color:"#fff",width:2})}),text:new rc({text:String(A),font:(o.fontSize||12)+"px sans-serif",fill:new _n({color:o.fontColor||"#333333"}),stroke:new hn({color:o.haloColor||"#ffffff",width:o.haloWidth||2}),offsetY:-20,overflow:!0})})),c.push(p)}}});var h=new zo({features:c});this.editLayer=new Ql({source:h,zIndex:9999}),t.addLayer(this.editLayer),this.translateInteraction=new Rfe({layers:[this.editLayer]}),this.translateInteraction.on("translateend",function(f){f.features.forEach(function(A){var d=A.get("originalFeature"),p=A.get("featureId"),y=A.getGeometry().getCoordinates(),v=l.getFeatureCenter(d,!1);if(v){var w=y[0]-v[0],x=y[1]-v[1];l.labelOffsets.set(p,[w,x])}})}),t.addInteraction(this.translateInteraction),Gt.emit("label:editModeStarted",{layerId:e})}}}}}stopEditMode(){var e=Nr.getMap();e&&(this.translateInteraction&&(e.removeInteraction(this.translateInteraction),this.translateInteraction=null),this.editLayer&&(e.removeLayer(this.editLayer),this.editLayer=null),this.currentEditLayerId&&this.applyLabel(this.currentEditLayerId),this._editOriginalStyleFn=null,this.editMode=!1,this.currentEditLayerId=null,Gt.emit("label:editModeStopped"))}isEditMode(){return this.editMode}resetLabelOffsets(e){var t=pt.getLayer(e);if(t){var n=t.olLayer.getSource();if(n){var i=this;n.getFeatures().forEach(function(a){var s=a.ol_uid||a.getId();i.labelOffsets.delete(s)}),this.applyLabel(e)}}}getLayerFields(e){var t=pt.getLayer(e);if(!t)return[];var n=t.olLayer.getSource();if(!n)return[];var i=n.getFeatures();if(i.length===0)return[];var a=i[0].getProperties();return Object.keys(a).filter(function(s){return s!=="geometry"})}}var Wf=new BAe;class TAe{constructor(){this.modal=null,this.currentLayerId=null}open(e=null){if(!e){const t=pt.getAllLayers();if(t.length===0){alert("레이어가 없습니다. 먼저 레이어를 추가해주세요.");return}e=t[0].id}this.currentLayerId=e,this.createModal(),this.show()}createModal(){this.modal&&this.modal.remove(),this.modal=document.createElement("div"),this.modal.className="modal-overlay",this.modal.innerHTML=`
      <div class="modal label-modal">
        <div class="modal-header">
          <h3>라벨 설정</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>레이어 선택</label>
            <select id="label-layer-select" class="form-control"></select>
          </div>
          <div class="form-group">
            <label>라벨 필드</label>
            <select id="label-field-select" class="form-control">
              <option value="">라벨 없음</option>
            </select>
          </div>
          <div class="form-group">
            <label>글자 크기</label>
            <input type="range" id="label-font-size" min="8" max="24" value="12" class="form-range">
            <span id="label-font-size-value">12px</span>
          </div>
          <div class="form-group">
            <label>글자 색상</label>
            <input type="color" id="label-font-color" value="#333333" class="form-control-color">
          </div>
          <div class="form-group">
            <label>테두리 색상</label>
            <input type="color" id="label-halo-color" value="#ffffff" class="form-control-color">
          </div>
          <div class="form-group">
            <label>테두리 두께</label>
            <input type="range" id="label-halo-width" min="0" max="5" value="2" class="form-range">
            <span id="label-halo-width-value">2px</span>
          </div>

        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" id="label-remove-btn">라벨 제거</button>
          <button class="btn btn-info" id="label-edit-position-btn">위치 편집</button>
          <button class="btn btn-primary" id="label-apply-btn">적용</button>
        </div>
      </div>
    `,document.body.appendChild(this.modal),this.bindEvents(),this.populateLayers(),this.loadCurrentConfig()}bindEvents(){this.modal.querySelector(".modal-close").addEventListener("click",()=>this.close()),this.modal.querySelector("#label-layer-select").addEventListener("change",n=>{this.currentLayerId=n.target.value,this.populateFields(),this.loadCurrentConfig()}),this.modal.querySelector("#label-font-size").addEventListener("input",n=>{this.modal.querySelector("#label-font-size-value").textContent=n.target.value+"px"}),this.modal.querySelector("#label-halo-width").addEventListener("input",n=>{this.modal.querySelector("#label-halo-width-value").textContent=n.target.value+"px"}),this.modal.querySelector("#label-apply-btn").addEventListener("click",()=>this.applyLabel()),this.modal.querySelector("#label-remove-btn").addEventListener("click",()=>this.removeLabel()),this.modal.querySelector("#label-edit-position-btn").addEventListener("click",()=>this.toggleEditMode())}toggleEditMode(){if(!Wf.hasLabel(this.currentLayerId)){alert("먼저 라벨을 적용한 후 위치를 편집할 수 있습니다.");return}Wf.isEditMode()?(Wf.stopEditMode(),this.modal.querySelector("#label-edit-position-btn").textContent="위치 편집",this.modal.querySelector("#label-edit-position-btn").classList.remove("active")):(Wf.startEditMode(this.currentLayerId),this.modal.querySelector("#label-edit-position-btn").textContent="편집 완료",this.modal.querySelector("#label-edit-position-btn").classList.add("active"))}populateLayers(){const e=this.modal.querySelector("#label-layer-select"),t=pt.getAllLayers();e.innerHTML=t.map(n=>`<option value="${n.id}" ${n.id===this.currentLayerId?"selected":""}>${n.name}</option>`).join(""),this.populateFields()}populateFields(){const e=this.modal.querySelector("#label-field-select"),t=Wf.getLayerFields(this.currentLayerId);e.innerHTML='<option value="">라벨 없음</option>'+t.map(n=>`<option value="${n}">${n}</option>`).join("")}loadCurrentConfig(){const e=Wf.getLabelConfig(this.currentLayerId);e?(this.modal.querySelector("#label-field-select").value=e.field||"",this.modal.querySelector("#label-font-size").value=e.fontSize||12,this.modal.querySelector("#label-font-size-value").textContent=(e.fontSize||12)+"px",this.modal.querySelector("#label-font-color").value=e.fontColor||"#333333",this.modal.querySelector("#label-halo-color").value=e.haloColor||"#ffffff",this.modal.querySelector("#label-halo-width").value=e.haloWidth||2,this.modal.querySelector("#label-halo-width-value").textContent=(e.haloWidth||2)+"px"):(this.modal.querySelector("#label-field-select").value="",this.modal.querySelector("#label-font-size").value=12,this.modal.querySelector("#label-font-size-value").textContent="12px",this.modal.querySelector("#label-font-color").value="#333333",this.modal.querySelector("#label-halo-color").value="#ffffff",this.modal.querySelector("#label-halo-width").value=2,this.modal.querySelector("#label-halo-width-value").textContent="2px")}applyLabel(){const e=this.modal.querySelector("#label-field-select").value,t=parseInt(this.modal.querySelector("#label-font-size").value),n=this.modal.querySelector("#label-font-color").value,i=this.modal.querySelector("#label-halo-color").value,a=parseInt(this.modal.querySelector("#label-halo-width").value);Wf.setLabel(this.currentLayerId,{field:e,fontSize:t,fontColor:n,haloColor:i,haloWidth:a}),this.close()}removeLabel(){Wf.removeLabel(this.currentLayerId),this.close()}show(){this.modal.classList.add("active")}close(){this.modal&&(this.modal.classList.remove("active"),setTimeout(()=>{this.modal.remove(),this.modal=null},200))}}const NAe=new TAe;var sl=63710088e-1,y7={centimeters:sl*100,centimetres:sl*100,degrees:360/(2*Math.PI),feet:sl*3.28084,inches:sl*39.37,kilometers:sl/1e3,kilometres:sl/1e3,meters:sl,metres:sl,miles:sl/1609.344,millimeters:sl*1e3,millimetres:sl*1e3,nauticalmiles:sl/1852,radians:1,yards:sl*1.0936};function F_(r,e,t={}){const n={type:"Feature"};return(t.id===0||t.id)&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.properties=e||{},n.geometry=r,n}function IAe(r,e,t={}){if(!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!gF(r[0])||!gF(r[1]))throw new Error("coordinates must contain numbers");return F_({type:"Point",coordinates:r},e,t)}function GB(r,e,t={}){for(const i of r){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let a=0;a<i[i.length-1].length;a++)if(i[i.length-1][a]!==i[0][a])throw new Error("First and last Position are not equivalent.")}return F_({type:"Polygon",coordinates:r},e,t)}function $c(r,e={}){const t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=r,t}function HB(r,e,t={}){return F_({type:"MultiPolygon",coordinates:r},e,t)}function FAe(r,e="kilometers"){const t=y7[e];if(!t)throw new Error(e+" units is invalid");return r*t}function MAe(r,e="kilometers"){const t=y7[e];if(!t)throw new Error(e+" units is invalid");return r/t}function gF(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function x7(r,e,t){if(r!==null)for(var n,i,a,s,o,l,u,c=0,h=0,f,A=r.type,d=A==="FeatureCollection",p=A==="Feature",y=d?r.features.length:1,v=0;v<y;v++){u=d?r.features[v].geometry:p?r.geometry:r,f=u?u.type==="GeometryCollection":!1,o=f?u.geometries.length:1;for(var w=0;w<o;w++){var x=0,b=0;if(s=f?u.geometries[w]:u,s!==null){l=s.coordinates;var C=s.type;switch(c=0,C){case null:break;case"Point":if(e(l,h,v,x,b)===!1)return!1;h++,x++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(e(l[n],h,v,x,b)===!1)return!1;h++,C==="MultiPoint"&&x++}C==="LineString"&&x++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(i=0;i<l[n].length-c;i++){if(e(l[n][i],h,v,x,b)===!1)return!1;h++}C==="MultiLineString"&&x++,C==="Polygon"&&b++}C==="Polygon"&&x++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(b=0,i=0;i<l[n].length;i++){for(a=0;a<l[n][i].length-c;a++){if(e(l[n][i][a],h,v,x,b)===!1)return!1;h++}b++}x++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(x7(s.geometries[n],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function pF(r,e){if(r.type==="Feature")e(r,0);else if(r.type==="FeatureCollection")for(var t=0;t<r.features.length&&e(r.features[t],t)!==!1;t++);}function D1(r,e){var t,n,i,a,s,o,l,u,c,h,f=0,A=r.type==="FeatureCollection",d=r.type==="Feature",p=A?r.features.length:1;for(t=0;t<p;t++){for(o=A?r.features[t].geometry:d?r.geometry:r,u=A?r.features[t].properties:d?r.properties:{},c=A?r.features[t].bbox:d?r.bbox:void 0,h=A?r.features[t].id:d?r.id:void 0,l=o?o.type==="GeometryCollection":!1,s=l?o.geometries.length:1,i=0;i<s;i++){if(a=l?o.geometries[i]:o,a===null){if(e(null,f,u,c,h)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(a,f,u,c,h)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<a.geometries.length;n++)if(e(a.geometries[n],f,u,c,h)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}f++}}function LAe(r,e={}){if(r.bbox!=null&&e.recompute!==!0)return r.bbox;const t=[1/0,1/0,-1/0,-1/0];return x7(r,n=>{t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}function DAe(r,e={}){const t=LAe(r),n=(t[0]+t[2])/2,i=(t[1]+t[3])/2;return IAe([n,i],e.properties,e)}var w7={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(Os,function(){function t(E,g){(g==null||g>E.length)&&(g=E.length);for(var m=0,_=Array(g);m<g;m++)_[m]=E[m];return _}function n(E,g,m){return g=c(g),function(_,k){if(k&&(typeof k=="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(_)}(E,f()?Reflect.construct(g,m||[],c(E).constructor):g.apply(E,m))}function i(E,g){if(!(E instanceof g))throw new TypeError("Cannot call a class as a function")}function a(E,g,m){if(f())return Reflect.construct.apply(null,arguments);var _=[null];_.push.apply(_,g);var k=new(E.bind.apply(E,_));return m&&A(k,m.prototype),k}function s(E,g){for(var m=0;m<g.length;m++){var _=g[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(E,y(_.key),_)}}function o(E,g,m){return g&&s(E.prototype,g),m&&s(E,m),Object.defineProperty(E,"prototype",{writable:!1}),E}function l(E,g){var m=typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(!m){if(Array.isArray(E)||(m=v(E))||g){m&&(E=m);var _=0,k=function(){};return{s:k,n:function(){return _>=E.length?{done:!0}:{done:!1,value:E[_++]}},e:function(Te){throw Te},f:k}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var j,ie=!0,de=!1;return{s:function(){m=m.call(E)},n:function(){var Te=m.next();return ie=Te.done,Te},e:function(Te){de=!0,j=Te},f:function(){try{ie||m.return==null||m.return()}finally{if(de)throw j}}}}function u(){return u=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(E,g,m){var _=function(j,ie){for(;!{}.hasOwnProperty.call(j,ie)&&(j=c(j))!==null;);return j}(E,g);if(_){var k=Object.getOwnPropertyDescriptor(_,g);return k.get?k.get.call(arguments.length<3?E:m):k.value}},u.apply(null,arguments)}function c(E){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},c(E)}function h(E,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(g&&g.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),Object.defineProperty(E,"prototype",{writable:!1}),g&&A(E,g)}function f(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f=function(){return!!E})()}function A(E,g){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,_){return m.__proto__=_,m},A(E,g)}function d(E,g,m,_){var k=u(c(1&_?E.prototype:E),g,m);return 2&_&&typeof k=="function"?function(j){return k.apply(m,j)}:k}function p(E){return function(g){if(Array.isArray(g))return t(g)}(E)||function(g){if(typeof Symbol<"u"&&g[Symbol.iterator]!=null||g["@@iterator"]!=null)return Array.from(g)}(E)||v(E)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function y(E){var g=function(m,_){if(typeof m!="object"||!m)return m;var k=m[Symbol.toPrimitive];if(k!==void 0){var j=k.call(m,_);if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(m)}(E,"string");return typeof g=="symbol"?g:g+""}function v(E,g){if(E){if(typeof E=="string")return t(E,g);var m={}.toString.call(E).slice(8,-1);return m==="Object"&&E.constructor&&(m=E.constructor.name),m==="Map"||m==="Set"?Array.from(E):m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m)?t(E,g):void 0}}function w(E){var g=typeof Map=="function"?new Map:void 0;return w=function(m){if(m===null||!function(k){try{return Function.toString.call(k).indexOf("[native code]")!==-1}catch{return typeof k=="function"}}(m))return m;if(typeof m!="function")throw new TypeError("Super expression must either be null or a function");if(g!==void 0){if(g.has(m))return g.get(m);g.set(m,_)}function _(){return a(m,arguments,c(this).constructor)}return _.prototype=Object.create(m.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),A(_,m)},w(E)}var x=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(g){this._quadrantSegments=g,this._quadrantSegments===0&&(this._joinStyle=E.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=E.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),g<=0&&(this._quadrantSegments=1),this._joinStyle!==E.JOIN_ROUND&&(this._quadrantSegments=E.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(g){this._joinStyle=g}},{key:"setSimplifyFactor",value:function(g){this._simplifyFactor=g<0?0:g}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(g){this._endCapStyle=g}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(g){this._mitreLimit=g}},{key:"setSingleSided",value:function(g){this._isSingleSided=g}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=E.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=E.CAP_ROUND,this._joinStyle=E.JOIN_ROUND,this._mitreLimit=E.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=E.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var g=arguments[0];this.setQuadrantSegments(g)}else if(arguments.length===2){var m=arguments[0],_=arguments[1];this.setQuadrantSegments(m),this.setEndCapStyle(_)}else if(arguments.length===4){var k=arguments[0],j=arguments[1],ie=arguments[2],de=arguments[3];this.setQuadrantSegments(k),this.setEndCapStyle(j),this.setJoinStyle(ie),this.setMitreLimit(de)}}}},{key:"bufferDistanceError",value:function(g){var m=Math.PI/2/g;return 1-Math.cos(m/2)}}])}();x.CAP_ROUND=1,x.CAP_FLAT=2,x.CAP_SQUARE=3,x.JOIN_ROUND=1,x.JOIN_MITRE=2,x.JOIN_BEVEL=3,x.DEFAULT_QUADRANT_SEGMENTS=8,x.DEFAULT_MITRE_LIMIT=5,x.DEFAULT_SIMPLIFY_FACTOR=.01;var b=function(E){function g(m){var _;return i(this,g),(_=n(this,g,[m])).name=Object.keys({Exception:g})[0],_}return h(g,E),o(g,[{key:"toString",value:function(){return this.message}}])}(w(Error)),C=function(E){function g(m){var _;return i(this,g),(_=n(this,g,[m])).name=Object.keys({IllegalArgumentException:g})[0],_}return h(g,E),o(g)}(b),S=function(){return o(function E(){i(this,E)},[{key:"filter",value:function(E){}}])}();function I(){}function B(){}function T(){}var M,F,N,O,L,G,R,U,W=function(){return o(function E(){i(this,E)},null,[{key:"equalsWithTolerance",value:function(E,g,m){return Math.abs(E-g)<=m}}])}(),Q=function(){return o(function E(g,m){i(this,E),this.low=m||0,this.high=g||0},null,[{key:"toBinaryString",value:function(E){var g,m="";for(g=2147483648;g>0;g>>>=1)m+=(E.high&g)===g?"1":"0";for(g=2147483648;g>0;g>>>=1)m+=(E.low&g)===g?"1":"0";return m}}])}();function re(){}function oe(){}re.NaN=NaN,re.isNaN=function(E){return Number.isNaN(E)},re.isInfinite=function(E){return!Number.isFinite(E)},re.MAX_VALUE=Number.MAX_VALUE,re.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,re.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(G=2146435072,R=new Float64Array(1),U=new Int32Array(R.buffer),re.doubleToLongBits=function(E){R[0]=E;var g=0|U[0],m=0|U[1];return(m&G)===G&&1048575&m&&g!==0&&(g=0,m=2146959360),new Q(m,g)},re.longBitsToDouble=function(E){return U[0]=E.low,U[1]=E.high,R[0]}):(M=1023,F=Math.log2,N=Math.floor,O=Math.pow,L=function(){for(var E=53;E>0;E--){var g=O(2,E)-1;if(N(F(g))+1===E)return g}return 0}(),re.doubleToLongBits=function(E){var g,m,_,k,j,ie,de,Te,Pe;if(E<0||1/E===Number.NEGATIVE_INFINITY?(ie=1<<31,E=-E):ie=0,E===0)return new Q(Te=ie,Pe=0);if(E===1/0)return new Q(Te=2146435072|ie,Pe=0);if(E!=E)return new Q(Te=2146959360,Pe=0);if(k=0,Pe=0,(g=N(E))>1)if(g<=L)(k=N(F(g)))<=20?(Pe=0,Te=g<<20-k&1048575):(Pe=g%(m=O(2,_=k-20))<<32-_,Te=g/m&1048575);else for(_=g,Pe=0;(_=N(m=_/2))!==0;)k++,Pe>>>=1,Pe|=(1&Te)<<31,Te>>>=1,m!==_&&(Te|=524288);if(de=k+M,j=g===0,g=E-g,k<52&&g!==0)for(_=0;;){if((m=2*g)>=1?(g=m-1,j?(de--,j=!1):(_<<=1,_|=1,k++)):(g=m,j?--de==0&&(k++,j=!1):(_<<=1,k++)),k===20)Te|=_,_=0;else if(k===52){Pe|=_;break}if(m===1){k<20?Te|=_<<20-k:k<52&&(Pe|=_<<52-k);break}}return Te|=de<<20,new Q(Te|=ie,Pe)},re.longBitsToDouble=function(E){var g,m,_,k,j=E.high,ie=E.low,de=j&1<<31?-1:1;for(_=((2146435072&j)>>20)-M,k=0,m=1<<19,g=1;g<=20;g++)j&m&&(k+=O(2,-g)),m>>>=1;for(m=1<<31,g=21;g<=52;g++)ie&m&&(k+=O(2,-g)),m>>>=1;if(_===-1023){if(k===0)return 0*de;_=-1022}else{if(_===1024)return k===0?de/0:NaN;k+=1}return de*k*O(2,_)});var P=function(E){function g(m){var _;return i(this,g),(_=n(this,g,[m])).name=Object.keys({RuntimeException:g})[0],_}return h(g,E),o(g)}(b),z=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,null,[{key:"constructor_",value:function(){if(arguments.length===0)P.constructor_.call(this);else if(arguments.length===1){var m=arguments[0];P.constructor_.call(this,m)}}}])}(P),K=function(){function E(){i(this,E)}return o(E,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)E.shouldNeverReachHere(null);else if(arguments.length===1){var g=arguments[0];throw new z("Should never reach here"+(g!==null?": "+g:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var g=arguments[0];E.isTrue(g,null)}else if(arguments.length===2){var m=arguments[1];if(!arguments[0])throw m===null?new z:new z(m)}}},{key:"equals",value:function(){if(arguments.length===2){var g=arguments[0],m=arguments[1];E.equals(g,m,null)}else if(arguments.length===3){var _=arguments[0],k=arguments[1],j=arguments[2];if(!k.equals(_))throw new z("Expected "+_+" but encountered "+k+(j!==null?": "+j:""))}}}])}(),J=new ArrayBuffer(8),ue=new Float64Array(J),ge=new Int32Array(J),le=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"getM",value:function(){return re.NaN}},{key:"setOrdinate",value:function(g,m){switch(g){case E.X:this.x=m;break;case E.Y:this.y=m;break;case E.Z:this.setZ(m);break;default:throw new C("Invalid ordinate index: "+g)}}},{key:"equals2D",value:function(){if(arguments.length===1){var g=arguments[0];return this.x===g.x&&this.y===g.y}if(arguments.length===2){var m=arguments[0],_=arguments[1];return!!W.equalsWithTolerance(this.x,m.x,_)&&!!W.equalsWithTolerance(this.y,m.y,_)}}},{key:"setM",value:function(g){throw new C("Invalid ordinate index: "+E.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(g){switch(g){case E.X:return this.x;case E.Y:return this.y;case E.Z:return this.getZ()}throw new C("Invalid ordinate index: "+g)}},{key:"equals3D",value:function(g){return this.x===g.x&&this.y===g.y&&(this.getZ()===g.getZ()||re.isNaN(this.getZ())&&re.isNaN(g.getZ()))}},{key:"equals",value:function(g){return g instanceof E&&this.equals2D(g)}},{key:"equalInZ",value:function(g,m){return W.equalsWithTolerance(this.getZ(),g.getZ(),m)}},{key:"setX",value:function(g){this.x=g}},{key:"compareTo",value:function(g){var m=g;return this.x<m.x?-1:this.x>m.x?1:this.y<m.y?-1:this.y>m.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(g){this.z=g}},{key:"clone",value:function(){try{return null}catch(g){if(g instanceof CloneNotSupportedException)return K.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw g}}},{key:"copy",value:function(){return new E(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(g){var m=this.x-g.x,_=this.y-g.y,k=this.getZ()-g.getZ();return Math.sqrt(m*m+_*_+k*k)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(g){this.y=g}},{key:"distance",value:function(g){var m=this.x-g.x,_=this.y-g.y;return Math.sqrt(m*m+_*_)}},{key:"hashCode",value:function(){var g=17;return g=37*(g=37*g+E.hashCode(this.x))+E.hashCode(this.y)}},{key:"setCoordinate",value:function(g){this.x=g.x,this.y=g.y,this.z=g.getZ()}},{key:"interfaces_",get:function(){return[I,B,T]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)E.constructor_.call(this,0,0);else if(arguments.length===1){var g=arguments[0];E.constructor_.call(this,g.x,g.y,g.getZ())}else if(arguments.length===2){var m=arguments[0],_=arguments[1];E.constructor_.call(this,m,_,E.NULL_ORDINATE)}else if(arguments.length===3){var k=arguments[0],j=arguments[1],ie=arguments[2];this.x=k,this.y=j,this.z=ie}}},{key:"hashCode",value:function(g){return ue[0]=g,ge[0]^ge[1]}}])}(),me=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"compare",value:function(g,m){var _=E.compare(g.x,m.x);if(_!==0)return _;var k=E.compare(g.y,m.y);return k!==0?k:this._dimensionsToTest<=2?0:E.compare(g.getZ(),m.getZ())}},{key:"interfaces_",get:function(){return[oe]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)E.constructor_.call(this,2);else if(arguments.length===1){var g=arguments[0];if(g!==2&&g!==3)throw new C("only 2 or 3 dimensions may be specified");this._dimensionsToTest=g}}},{key:"compare",value:function(g,m){return g<m?-1:g>m?1:re.isNaN(g)?re.isNaN(m)?0:-1:re.isNaN(m)?1:0}}])}();le.DimensionalComparator=me,le.NULL_ORDINATE=re.NaN,le.X=0,le.Y=1,le.Z=2,le.M=3;var xe=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(g){if(!(g instanceof E))return!1;var m=g;return this.isNull()?m.isNull():this._maxx===m.getMaxX()&&this._maxy===m.getMaxY()&&this._minx===m.getMinX()&&this._miny===m.getMinY()}},{key:"intersection",value:function(g){if(this.isNull()||g.isNull()||!this.intersects(g))return new E;var m=this._minx>g._minx?this._minx:g._minx,_=this._miny>g._miny?this._miny:g._miny;return new E(m,this._maxx<g._maxx?this._maxx:g._maxx,_,this._maxy<g._maxy?this._maxy:g._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof le){var g=arguments[0];return this.covers(g.x,g.y)}if(arguments[0]instanceof E){var m=arguments[0];return!this.isNull()&&!m.isNull()&&m.getMinX()>=this._minx&&m.getMaxX()<=this._maxx&&m.getMinY()>=this._miny&&m.getMaxY()<=this._maxy}}else if(arguments.length===2){var _=arguments[0],k=arguments[1];return!this.isNull()&&_>=this._minx&&_<=this._maxx&&k>=this._miny&&k<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof E){var g=arguments[0];return!this.isNull()&&!g.isNull()&&!(g._minx>this._maxx||g._maxx<this._minx||g._miny>this._maxy||g._maxy<this._miny)}if(arguments[0]instanceof le){var m=arguments[0];return this.intersects(m.x,m.y)}}else if(arguments.length===2){if(arguments[0]instanceof le&&arguments[1]instanceof le){var _=arguments[0],k=arguments[1];return!this.isNull()&&!((_.x<k.x?_.x:k.x)>this._maxx)&&!((_.x>k.x?_.x:k.x)<this._minx)&&!((_.y<k.y?_.y:k.y)>this._maxy)&&!((_.y>k.y?_.y:k.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var j=arguments[0],ie=arguments[1];return!this.isNull()&&!(j>this._maxx||j<this._minx||ie>this._maxy||ie<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var g=this.getWidth(),m=this.getHeight();return Math.sqrt(g*g+m*m)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof le){var g=arguments[0];this.expandToInclude(g.x,g.y)}else if(arguments[0]instanceof E){var m=arguments[0];if(m.isNull())return null;this.isNull()?(this._minx=m.getMinX(),this._maxx=m.getMaxX(),this._miny=m.getMinY(),this._maxy=m.getMaxY()):(m._minx<this._minx&&(this._minx=m._minx),m._maxx>this._maxx&&(this._maxx=m._maxx),m._miny<this._miny&&(this._miny=m._miny),m._maxy>this._maxy&&(this._maxy=m._maxy))}}else if(arguments.length===2){var _=arguments[0],k=arguments[1];this.isNull()?(this._minx=_,this._maxx=_,this._miny=k,this._maxy=k):(_<this._minx&&(this._minx=_),_>this._maxx&&(this._maxx=_),k<this._miny&&(this._miny=k),k>this._maxy&&(this._maxy=k))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var g=this.getWidth(),m=this.getHeight();return g<m?g:m}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(g){var m=g;return this.isNull()?m.isNull()?0:-1:m.isNull()?1:this._minx<m._minx?-1:this._minx>m._minx?1:this._miny<m._miny?-1:this._miny>m._miny?1:this._maxx<m._maxx?-1:this._maxx>m._maxx?1:this._maxy<m._maxy?-1:this._maxy>m._maxy?1:0}},{key:"translate",value:function(g,m){if(this.isNull())return null;this.init(this.getMinX()+g,this.getMaxX()+g,this.getMinY()+m,this.getMaxY()+m)}},{key:"copy",value:function(){return new E(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(g){return!(!this.isNull()&&!g.isNull())||g._minx>this._maxx||g._maxx<this._minx||g._miny>this._maxy||g._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var g=this.getWidth(),m=this.getHeight();return g>m?g:m}},{key:"expandBy",value:function(){if(arguments.length===1){var g=arguments[0];this.expandBy(g,g)}else if(arguments.length===2){var m=arguments[0],_=arguments[1];if(this.isNull())return null;this._minx-=m,this._maxx+=m,this._miny-=_,this._maxy+=_,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof E){var g=arguments[0];return this.covers(g)}if(arguments[0]instanceof le){var m=arguments[0];return this.covers(m)}}else if(arguments.length===2){var _=arguments[0],k=arguments[1];return this.covers(_,k)}}},{key:"centre",value:function(){return this.isNull()?null:new le((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof le){var g=arguments[0];this.init(g.x,g.x,g.y,g.y)}else if(arguments[0]instanceof E){var m=arguments[0];this._minx=m._minx,this._maxx=m._maxx,this._miny=m._miny,this._maxy=m._maxy}}else if(arguments.length===2){var _=arguments[0],k=arguments[1];this.init(_.x,k.x,_.y,k.y)}else if(arguments.length===4){var j=arguments[0],ie=arguments[1],de=arguments[2],Te=arguments[3];j<ie?(this._minx=j,this._maxx=ie):(this._minx=ie,this._maxx=j),de<Te?(this._miny=de,this._maxy=Te):(this._miny=Te,this._maxy=de)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(g){if(this.intersects(g))return 0;var m=0;this._maxx<g._minx?m=g._minx-this._maxx:this._minx>g._maxx&&(m=this._minx-g._maxx);var _=0;return this._maxy<g._miny?_=g._miny-this._maxy:this._miny>g._maxy&&(_=this._miny-g._maxy),m===0?_:_===0?m:Math.sqrt(m*m+_*_)}},{key:"hashCode",value:function(){var g=17;return g=37*(g=37*(g=37*(g=37*g+le.hashCode(this._minx))+le.hashCode(this._maxx))+le.hashCode(this._miny))+le.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[I,T]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof le){var g=arguments[0];this.init(g.x,g.x,g.y,g.y)}else if(arguments[0]instanceof E){var m=arguments[0];this.init(m)}}else if(arguments.length===2){var _=arguments[0],k=arguments[1];this.init(_.x,k.x,_.y,k.y)}else if(arguments.length===4){var j=arguments[0],ie=arguments[1],de=arguments[2],Te=arguments[3];this.init(j,ie,de,Te)}}},{key:"intersects",value:function(){if(arguments.length===3){var g=arguments[0],m=arguments[1],_=arguments[2];return _.x>=(g.x<m.x?g.x:m.x)&&_.x<=(g.x>m.x?g.x:m.x)&&_.y>=(g.y<m.y?g.y:m.y)&&_.y<=(g.y>m.y?g.y:m.y)}if(arguments.length===4){var k=arguments[0],j=arguments[1],ie=arguments[2],de=arguments[3],Te=Math.min(ie.x,de.x),Pe=Math.max(ie.x,de.x),nt=Math.min(k.x,j.x),ht=Math.max(k.x,j.x);return!(nt>Pe)&&!(ht<Te)&&(Te=Math.min(ie.y,de.y),Pe=Math.max(ie.y,de.y),nt=Math.min(k.y,j.y),ht=Math.max(k.y,j.y),!(nt>Pe)&&!(ht<Te))}}}])}(),Be=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===E.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(g){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(g){return this===g||this.equalsExact(g,0)}},{key:"geometryChanged",value:function(){this.apply(E.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(g){return g!==null&&this.norm().equalsExact(g.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var g;if(arguments.length===1){var m=arguments[0];return g=m,this.getTypeCode()!==g.getTypeCode()?this.getTypeCode()-g.getTypeCode():this.isEmpty()&&g.isEmpty()?0:this.isEmpty()?-1:g.isEmpty()?1:this.compareToSameClass(m)}if(arguments.length===2){var _=arguments[0],k=arguments[1];return g=_,this.getTypeCode()!==g.getTypeCode()?this.getTypeCode()-g.getTypeCode():this.isEmpty()&&g.isEmpty()?0:this.isEmpty()?-1:g.isEmpty()?1:this.compareToSameClass(_,k)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(g){if(g.getTypeCode()===E.TYPECODE_GEOMETRYCOLLECTION)throw new C("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(g,m,_){return _===0?g.equals(m):g.distance(m)<=_}},{key:"norm",value:function(){var g=this.copy();return g.normalize(),g}},{key:"reverse",value:function(){var g=this.reverseInternal();return this.envelope!=null&&(g.envelope=this.envelope.copy()),g.setSRID(this.getSRID()),g}},{key:"copy",value:function(){var g=this.copyInternal();return g.envelope=this._envelope==null?null:this._envelope.copy(),g._SRID=this._SRID,g._userData=this._userData,g}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new xe(this._envelope)}},{key:"setSRID",value:function(g){this._SRID=g}},{key:"setUserData",value:function(g){this._userData=g}},{key:"compare",value:function(g,m){for(var _=g.iterator(),k=m.iterator();_.hasNext()&&k.hasNext();){var j=_.next(),ie=k.next(),de=j.compareTo(ie);if(de!==0)return de}return _.hasNext()?1:k.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(g){return this.getClass()===g.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===E.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===E.TYPECODE_MULTIPOINT||this.getTypeCode()===E.TYPECODE_MULTILINESTRING||this.getTypeCode()===E.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[B,I,T]}},{key:"getClass",value:function(){return E}}],[{key:"hasNonEmptyElements",value:function(g){for(var m=0;m<g.length;m++)if(!g[m].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(g){for(var m=0;m<g.length;m++)if(g[m]===null)return!0;return!1}}])}();Be.constructor_=function(E){E&&(this._envelope=null,this._userData=null,this._factory=E,this._SRID=E.getSRID())},Be.TYPECODE_POINT=0,Be.TYPECODE_MULTIPOINT=1,Be.TYPECODE_LINESTRING=2,Be.TYPECODE_LINEARRING=3,Be.TYPECODE_MULTILINESTRING=4,Be.TYPECODE_POLYGON=5,Be.TYPECODE_MULTIPOLYGON=6,Be.TYPECODE_GEOMETRYCOLLECTION=7,Be.TYPENAME_POINT="Point",Be.TYPENAME_MULTIPOINT="MultiPoint",Be.TYPENAME_LINESTRING="LineString",Be.TYPENAME_LINEARRING="LinearRing",Be.TYPENAME_MULTILINESTRING="MultiLineString",Be.TYPENAME_POLYGON="Polygon",Be.TYPENAME_MULTIPOLYGON="MultiPolygon",Be.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",Be.geometryChangedFilter={get interfaces_(){return[S]},filter:function(E){E.geometryChangedAction()}};var Y=function(){function E(){i(this,E)}return o(E,null,[{key:"toLocationSymbol",value:function(g){switch(g){case E.EXTERIOR:return"e";case E.BOUNDARY:return"b";case E.INTERIOR:return"i";case E.NONE:return"-"}throw new C("Unknown location value: "+g)}}])}();Y.INTERIOR=0,Y.BOUNDARY=1,Y.EXTERIOR=2,Y.NONE=-1;var Ve=function(){return o(function E(){i(this,E)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])}(),te=function(E){function g(m){var _;return i(this,g),(_=n(this,g,[m])).name=Object.keys({NoSuchElementException:g})[0],_}return h(g,E),o(g)}(b),se=function(E){function g(m){var _;return i(this,g),(_=n(this,g,[m])).name=Object.keys({UnsupportedOperationException:g})[0],_}return h(g,E),o(g)}(b),Z=function(E){function g(){return i(this,g),n(this,g,arguments)}return h(g,E),o(g,[{key:"contains",value:function(){}}])}(Ve),he=function(E){function g(m){var _;return i(this,g),(_=n(this,g)).map=new Map,m instanceof Ve&&_.addAll(m),_}return h(g,E),o(g,[{key:"contains",value:function(m){var _=m.hashCode?m.hashCode():m;return!!this.map.has(_)}},{key:"add",value:function(m){var _=m.hashCode?m.hashCode():m;return!this.map.has(_)&&!!this.map.set(_,m)}},{key:"addAll",value:function(m){var _,k=l(m);try{for(k.s();!(_=k.n()).done;){var j=_.value;this.add(j)}}catch(ie){k.e(ie)}finally{k.f()}return!0}},{key:"remove",value:function(){throw new se}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new ne(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(Z),ne=function(){return o(function E(g){i(this,E),this.iterator=g.values();var m=this.iterator.next(),_=m.done,k=m.value;this.done=_,this.value=k},[{key:"next",value:function(){if(this.done)throw new te;var E=this.value,g=this.iterator.next(),m=g.done,_=g.value;return this.done=m,this.value=_,E}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new se}}])}(),ae=function(){function E(){i(this,E)}return o(E,null,[{key:"opposite",value:function(g){return g===E.LEFT?E.RIGHT:g===E.RIGHT?E.LEFT:g}}])}();ae.ON=0,ae.LEFT=1,ae.RIGHT=2;var _e=function(E){function g(m){var _;return i(this,g),(_=n(this,g,[m])).name=Object.keys({EmptyStackException:g})[0],_}return h(g,E),o(g)}(b),Me=function(E){function g(m){var _;return i(this,g),(_=n(this,g,[m])).name=Object.keys({IndexOutOfBoundsException:g})[0],_}return h(g,E),o(g)}(b),be=function(E){function g(){return i(this,g),n(this,g,arguments)}return h(g,E),o(g,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}(Ve),Ae=function(E){function g(){var m;return i(this,g),(m=n(this,g)).array=[],m}return h(g,E),o(g,[{key:"add",value:function(m){return this.array.push(m),!0}},{key:"get",value:function(m){if(m<0||m>=this.size())throw new Me;return this.array[m]}},{key:"push",value:function(m){return this.array.push(m),m}},{key:"pop",value:function(){if(this.array.length===0)throw new _e;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new _e;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(m){return this.array.indexOf(m)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])}(be);function pe(E,g){return E.interfaces_&&E.interfaces_.indexOf(g)>-1}var Fe=function(){return o(function E(g){i(this,E),this.str=g},[{key:"append",value:function(E){this.str+=E}},{key:"setCharAt",value:function(E,g){this.str=this.str.substr(0,E)+g+this.str.substr(E+1)}},{key:"toString",value:function(){return this.str}}])}(),Ge=function(){function E(g){i(this,E),this.value=g}return o(E,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(g){return this.value<g?-1:this.value>g?1:0}}],[{key:"compare",value:function(g,m){return g<m?-1:g>m?1:0}},{key:"isNan",value:function(g){return Number.isNaN(g)}},{key:"valueOf",value:function(g){return new E(g)}}])}(),Ze=function(){return o(function E(){i(this,E)},null,[{key:"isWhitespace",value:function(E){return E<=32&&E>=0||E===127}},{key:"toUpperCase",value:function(E){return E.toUpperCase()}}])}(),He=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"le",value:function(g){return this._hi<g._hi||this._hi===g._hi&&this._lo<=g._lo}},{key:"extractSignificantDigits",value:function(g,m){var _=this.abs(),k=E.magnitude(_._hi),j=E.TEN.pow(k);(_=_.divide(j)).gt(E.TEN)?(_=_.divide(E.TEN),k+=1):_.lt(E.ONE)&&(_=_.multiply(E.TEN),k-=1);for(var ie=k+1,de=new Fe,Te=E.MAX_PRINT_DIGITS-1,Pe=0;Pe<=Te;Pe++){g&&Pe===ie&&de.append(".");var nt=Math.trunc(_._hi);if(nt<0)break;var ht=!1,Ft=0;nt>9?(ht=!0,Ft="9"):Ft="0"+nt,de.append(Ft),_=_.subtract(E.valueOf(nt)).multiply(E.TEN),ht&&_.selfAdd(E.TEN);var Zt=!0,dr=E.magnitude(_._hi);if(dr<0&&Math.abs(dr)>=Te-Pe&&(Zt=!1),!Zt)break}return m[0]=k,de.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof E){var g=arguments[0];return this.add(g.negate())}if(typeof arguments[0]=="number"){var m=arguments[0];return this.add(-m)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof E){var g=arguments[0];return this._hi===g._hi&&this._lo===g._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof E){var g=arguments[0];return this.isNaN()?this:this.selfAdd(-g._hi,-g._lo)}if(typeof arguments[0]=="number"){var m=arguments[0];return this.isNaN()?this:this.selfAdd(-m,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(g){return this.le(g)?this:g}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof E){var g=arguments[0];return this.selfDivide(g._hi,g._lo)}if(typeof arguments[0]=="number"){var m=arguments[0];return this.selfDivide(m,0)}}else if(arguments.length===2){var _,k,j,ie,de=arguments[0],Te=arguments[1],Pe=null,nt=null,ht=null,Ft=null;return j=this._hi/de,Ft=(Pe=(ht=E.SPLIT*j)-(Pe=ht-j))*(nt=(Ft=E.SPLIT*de)-(nt=Ft-de))-(ie=j*de)+Pe*(k=de-nt)+(_=j-Pe)*nt+_*k,Ft=j+(ht=(this._hi-ie-Ft+this._lo-j*Te)/de),this._hi=Ft,this._lo=j-Ft+ht,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof E){var g,m,_,k,j=arguments[0],ie=null,de=null,Te=null,Pe=null;return g=(_=this._hi/j._hi)-(ie=(Te=E.SPLIT*_)-(ie=Te-_)),Pe=ie*(de=(Pe=E.SPLIT*j._hi)-(de=Pe-j._hi))-(k=_*j._hi)+ie*(m=j._hi-de)+g*de+g*m,new E(Pe=_+(Te=(this._hi-k-Pe+this._lo-_*j._lo)/j._hi),_-Pe+Te)}if(typeof arguments[0]=="number"){var nt=arguments[0];return re.isNaN(nt)?E.createNaN():E.copy(this).selfDivide(nt,0)}}},{key:"ge",value:function(g){return this._hi>g._hi||this._hi===g._hi&&this._lo>=g._lo}},{key:"pow",value:function(g){if(g===0)return E.valueOf(1);var m=new E(this),_=E.valueOf(1),k=Math.abs(g);if(k>1)for(;k>0;)k%2==1&&_.selfMultiply(m),(k/=2)>0&&(m=m.sqr());else _=m;return g<0?_.reciprocal():_}},{key:"ceil",value:function(){if(this.isNaN())return E.NaN;var g=Math.ceil(this._hi),m=0;return g===this._hi&&(m=Math.ceil(this._lo)),new E(g,m)}},{key:"compareTo",value:function(g){var m=g;return this._hi<m._hi?-1:this._hi>m._hi?1:this._lo<m._lo?-1:this._lo>m._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof E){var g=arguments[0];return this.init(g),this}if(typeof arguments[0]=="number"){var m=arguments[0];return this.init(m),this}}},{key:"max",value:function(g){return this.ge(g)?this:g}},{key:"sqrt",value:function(){if(this.isZero())return E.valueOf(0);if(this.isNegative())return E.NaN;var g=1/Math.sqrt(this._hi),m=this._hi*g,_=E.valueOf(m),k=this.subtract(_.sqr())._hi*(.5*g);return _.add(k)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof E){var g=arguments[0];return this.selfAdd(g._hi,g._lo)}if(typeof arguments[0]=="number"){var m,_,k,j,ie,de=arguments[0],Te=null;return Te=(k=this._hi+de)-(j=k-this._hi),_=(ie=(Te=de-j+(this._hi-Te))+this._lo)+(k-(m=k+ie)),this._hi=m+_,this._lo=_+(m-this._hi),this}}else if(arguments.length===2){var Pe,nt,ht,Ft,Zt=arguments[0],dr=arguments[1],Er=null,ln=null,xn=null;ht=this._hi+Zt,nt=this._lo+dr,ln=ht-(xn=ht-this._hi),Er=nt-(Ft=nt-this._lo);var Sn=(Pe=ht+(xn=(ln=Zt-xn+(this._hi-ln))+nt))+(xn=(Er=dr-Ft+(this._lo-Er))+(xn+(ht-Pe))),ci=xn+(Pe-Sn);return this._hi=Sn,this._lo=ci,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof E){var g=arguments[0];return this.selfMultiply(g._hi,g._lo)}if(typeof arguments[0]=="number"){var m=arguments[0];return this.selfMultiply(m,0)}}else if(arguments.length===2){var _,k,j=arguments[0],ie=arguments[1],de=null,Te=null,Pe=null,nt=null;de=(Pe=E.SPLIT*this._hi)-this._hi,nt=E.SPLIT*j,de=Pe-de,_=this._hi-de,Te=nt-j;var ht=(Pe=this._hi*j)+(nt=de*(Te=nt-Te)-Pe+de*(k=j-Te)+_*Te+_*k+(this._hi*ie+this._lo*j)),Ft=nt+(de=Pe-ht);return this._hi=ht,this._lo=Ft,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return E.NaN;var g=Math.floor(this._hi),m=0;return g===this._hi&&(m=Math.floor(this._lo)),new E(g,m)}},{key:"negate",value:function(){return this.isNaN()?this:new E(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(g){if(g instanceof CloneNotSupportedException)return null;throw g}}},{key:"multiply",value:function(){if(arguments[0]instanceof E){var g=arguments[0];return g.isNaN()?E.createNaN():E.copy(this).selfMultiply(g)}if(typeof arguments[0]=="number"){var m=arguments[0];return re.isNaN(m)?E.createNaN():E.copy(this).selfMultiply(m,0)}}},{key:"isNaN",value:function(){return re.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var g=E.magnitude(this._hi);return g>=-3&&g<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var g=this.getSpecialNumberString();if(g!==null)return g;var m=new Array(1).fill(null),_=this.extractSignificantDigits(!0,m),k=m[0]+1,j=_;if(_.charAt(0)===".")j="0"+_;else if(k<0)j="0."+E.stringOfChar("0",-k)+_;else if(_.indexOf(".")===-1){var ie=k-_.length;j=_+E.stringOfChar("0",ie)+".0"}return this.isNegative()?"-"+j:j}},{key:"reciprocal",value:function(){var g,m,_,k,j=null,ie=null,de=null,Te=null;g=(_=1/this._hi)-(j=(de=E.SPLIT*_)-(j=de-_)),ie=(Te=E.SPLIT*this._hi)-this._hi;var Pe=_+(de=(1-(k=_*this._hi)-(Te=j*(ie=Te-ie)-k+j*(m=this._hi-ie)+g*ie+g*m)-_*this._lo)/this._hi);return new E(Pe,_-Pe+de)}},{key:"toSciNotation",value:function(){if(this.isZero())return E.SCI_NOT_ZERO;var g=this.getSpecialNumberString();if(g!==null)return g;var m=new Array(1).fill(null),_=this.extractSignificantDigits(!1,m),k=E.SCI_NOT_EXPONENT_CHAR+m[0];if(_.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+_);var j="";_.length>1&&(j=_.substring(1));var ie=_.charAt(0)+"."+j;return this.isNegative()?"-"+ie+k:ie+k}},{key:"abs",value:function(){return this.isNaN()?E.NaN:this.isNegative()?this.negate():new E(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(g){return this._hi<g._hi||this._hi===g._hi&&this._lo<g._lo}},{key:"add",value:function(){if(arguments[0]instanceof E){var g=arguments[0];return E.copy(this).selfAdd(g)}if(typeof arguments[0]=="number"){var m=arguments[0];return E.copy(this).selfAdd(m)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var g=arguments[0];this._hi=g,this._lo=0}else if(arguments[0]instanceof E){var m=arguments[0];this._hi=m._hi,this._lo=m._lo}}else if(arguments.length===2){var _=arguments[0],k=arguments[1];this._hi=_,this._lo=k}}},{key:"gt",value:function(g){return this._hi>g._hi||this._hi===g._hi&&this._lo>g._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?E.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[T,I,B]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var g=arguments[0];this.init(g)}else if(arguments[0]instanceof E){var m=arguments[0];this.init(m)}else if(typeof arguments[0]=="string"){var _=arguments[0];E.constructor_.call(this,E.parse(_))}}else if(arguments.length===2){var k=arguments[0],j=arguments[1];this.init(k,j)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var g=arguments[0],m=arguments[1],_=arguments[2],k=arguments[3];return E.determinant(E.valueOf(g),E.valueOf(m),E.valueOf(_),E.valueOf(k))}if(arguments[3]instanceof E&&arguments[2]instanceof E&&arguments[0]instanceof E&&arguments[1]instanceof E){var j=arguments[1],ie=arguments[2],de=arguments[3];return arguments[0].multiply(de).selfSubtract(j.multiply(ie))}}},{key:"sqr",value:function(g){return E.valueOf(g).selfMultiply(g)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var g=arguments[0];return E.parse(g)}if(typeof arguments[0]=="number")return new E(arguments[0])}},{key:"sqrt",value:function(g){return E.valueOf(g).sqrt()}},{key:"parse",value:function(g){for(var m=0,_=g.length;Ze.isWhitespace(g.charAt(m));)m++;var k=!1;if(m<_){var j=g.charAt(m);j!=="-"&&j!=="+"||(m++,j==="-"&&(k=!0))}for(var ie=new E,de=0,Te=0,Pe=0,nt=!1;!(m>=_);){var ht=g.charAt(m);if(m++,Ze.isDigit(ht)){var Ft=ht-"0";ie.selfMultiply(E.TEN),ie.selfAdd(Ft),de++}else{if(ht!=="."){if(ht==="e"||ht==="E"){var Zt=g.substring(m);try{Pe=Ge.parseInt(Zt)}catch(Sn){throw Sn instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+Zt+" in string "+g):Sn}break}throw new NumberFormatException("Unexpected character '"+ht+"' at position "+m+" in string "+g)}Te=de,nt=!0}}var dr=ie;nt||(Te=de);var Er=de-Te-Pe;if(Er===0)dr=ie;else if(Er>0){var ln=E.TEN.pow(Er);dr=ie.divide(ln)}else if(Er<0){var xn=E.TEN.pow(-Er);dr=ie.multiply(xn)}return k?dr.negate():dr}},{key:"createNaN",value:function(){return new E(re.NaN,re.NaN)}},{key:"copy",value:function(g){return new E(g)}},{key:"magnitude",value:function(g){var m=Math.abs(g),_=Math.log(m)/Math.log(10),k=Math.trunc(Math.floor(_));return 10*Math.pow(10,k)<=m&&(k+=1),k}},{key:"stringOfChar",value:function(g,m){for(var _=new Fe,k=0;k<m;k++)_.append(g);return _.toString()}}])}();He.PI=new He(3.141592653589793,12246467991473532e-32),He.TWO_PI=new He(6.283185307179586,24492935982947064e-32),He.PI_2=new He(1.5707963267948966,6123233995736766e-32),He.E=new He(2.718281828459045,14456468917292502e-32),He.NaN=new He(re.NaN,re.NaN),He.EPS=123259516440783e-46,He.SPLIT=134217729,He.MAX_PRINT_DIGITS=32,He.TEN=He.valueOf(10),He.ONE=He.valueOf(1),He.SCI_NOT_EXPONENT_CHAR="E",He.SCI_NOT_ZERO="0.0E0";var Je=function(){function E(){i(this,E)}return o(E,null,[{key:"orientationIndex",value:function(g,m,_){var k=E.orientationIndexFilter(g,m,_);if(k<=1)return k;var j=He.valueOf(m.x).selfAdd(-g.x),ie=He.valueOf(m.y).selfAdd(-g.y),de=He.valueOf(_.x).selfAdd(-m.x),Te=He.valueOf(_.y).selfAdd(-m.y);return j.selfMultiply(Te).selfSubtract(ie.selfMultiply(de)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof He&&arguments[2]instanceof He&&arguments[0]instanceof He&&arguments[1]instanceof He){var g=arguments[1],m=arguments[2],_=arguments[3];return arguments[0].multiply(_).selfSubtract(g.multiply(m)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var k=arguments[0],j=arguments[1],ie=arguments[2],de=arguments[3],Te=He.valueOf(k),Pe=He.valueOf(j),nt=He.valueOf(ie),ht=He.valueOf(de);return Te.multiply(ht).selfSubtract(Pe.multiply(nt)).signum()}}},{key:"intersection",value:function(g,m,_,k){var j=new He(g.y).selfSubtract(m.y),ie=new He(m.x).selfSubtract(g.x),de=new He(g.x).selfMultiply(m.y).selfSubtract(new He(m.x).selfMultiply(g.y)),Te=new He(_.y).selfSubtract(k.y),Pe=new He(k.x).selfSubtract(_.x),nt=new He(_.x).selfMultiply(k.y).selfSubtract(new He(k.x).selfMultiply(_.y)),ht=ie.multiply(nt).selfSubtract(Pe.multiply(de)),Ft=Te.multiply(de).selfSubtract(j.multiply(nt)),Zt=j.multiply(Pe).selfSubtract(Te.multiply(ie)),dr=ht.selfDivide(Zt).doubleValue(),Er=Ft.selfDivide(Zt).doubleValue();return re.isNaN(dr)||re.isInfinite(dr)||re.isNaN(Er)||re.isInfinite(Er)?null:new le(dr,Er)}},{key:"orientationIndexFilter",value:function(g,m,_){var k=null,j=(g.x-_.x)*(m.y-_.y),ie=(g.y-_.y)*(m.x-_.x),de=j-ie;if(j>0){if(ie<=0)return E.signum(de);k=j+ie}else{if(!(j<0)||ie>=0)return E.signum(de);k=-j-ie}var Te=E.DP_SAFE_EPSILON*k;return de>=Te||-de>=Te?E.signum(de):2}},{key:"signum",value:function(g){return g>0?1:g<0?-1:0}}])}();Je.DP_SAFE_EPSILON=1e-15;var Ye=function(){return o(function E(){i(this,E)},[{key:"getM",value:function(E){if(this.hasM()){var g=this.getDimension()-this.getMeasures();return this.getOrdinate(E,g)}return re.NaN}},{key:"setOrdinate",value:function(E,g,m){}},{key:"getZ",value:function(E){return this.hasZ()?this.getOrdinate(E,2):re.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(E,g){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(E){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(E){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(E){}},{key:"copy",value:function(){}},{key:"getY",value:function(E){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[B]}}])}();Ye.X=0,Ye.Y=1,Ye.Z=2,Ye.M=3;var Ke=function(){function E(){i(this,E)}return o(E,null,[{key:"index",value:function(g,m,_){return Je.orientationIndex(g,m,_)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var g=arguments[0],m=g.length-1;if(m<3)throw new C("Ring has fewer than 4 points, so orientation cannot be determined");for(var _=g[0],k=0,j=1;j<=m;j++){var ie=g[j];ie.y>_.y&&(_=ie,k=j)}var de=k;do(de-=1)<0&&(de=m);while(g[de].equals2D(_)&&de!==k);var Te=k;do Te=(Te+1)%m;while(g[Te].equals2D(_)&&Te!==k);var Pe=g[de],nt=g[Te];if(Pe.equals2D(_)||nt.equals2D(_)||Pe.equals2D(nt))return!1;var ht=E.index(Pe,_,nt);return ht===0?Pe.x>nt.x:ht>0}if(pe(arguments[0],Ye)){var Ft=arguments[0],Zt=Ft.size()-1;if(Zt<3)throw new C("Ring has fewer than 4 points, so orientation cannot be determined");for(var dr=Ft.getCoordinate(0),Er=0,ln=1;ln<=Zt;ln++){var xn=Ft.getCoordinate(ln);xn.y>dr.y&&(dr=xn,Er=ln)}var Sn=null,ci=Er;do(ci-=1)<0&&(ci=Zt),Sn=Ft.getCoordinate(ci);while(Sn.equals2D(dr)&&ci!==Er);var un=null,Wn=Er;do Wn=(Wn+1)%Zt,un=Ft.getCoordinate(Wn);while(un.equals2D(dr)&&Wn!==Er);if(Sn.equals2D(dr)||un.equals2D(dr)||Sn.equals2D(un))return!1;var Di=E.index(Sn,dr,un);return Di===0?Sn.x>un.x:Di>0}}}])}();Ke.CLOCKWISE=-1,Ke.RIGHT=Ke.CLOCKWISE,Ke.COUNTERCLOCKWISE=1,Ke.LEFT=Ke.COUNTERCLOCKWISE,Ke.COLLINEAR=0,Ke.STRAIGHT=Ke.COLLINEAR;var mt=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(E,g){var m=this.getRightmostSideOfSegment(E,g);return m<0&&(m=this.getRightmostSideOfSegment(E,g-1)),m<0&&(this._minCoord=null,this.checkForRightmostCoordinate(E)),m}},{key:"findRightmostEdgeAtVertex",value:function(){var E=this._minDe.getEdge().getCoordinates();K.isTrue(this._minIndex>0&&this._minIndex<E.length,"rightmost point expected to be interior vertex of edge");var g=E[this._minIndex-1],m=E[this._minIndex+1],_=Ke.index(this._minCoord,m,g),k=!1;(g.y<this._minCoord.y&&m.y<this._minCoord.y&&_===Ke.COUNTERCLOCKWISE||g.y>this._minCoord.y&&m.y>this._minCoord.y&&_===Ke.CLOCKWISE)&&(k=!0),k&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(E,g){var m=E.getEdge().getCoordinates();if(g<0||g+1>=m.length||m[g].y===m[g+1].y)return-1;var _=ae.LEFT;return m[g].y<m[g+1].y&&(_=ae.RIGHT),_}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(E){for(var g=E.getEdge().getCoordinates(),m=0;m<g.length-1;m++)(this._minCoord===null||g[m].x>this._minCoord.x)&&(this._minDe=E,this._minIndex=m,this._minCoord=g[m])}},{key:"findRightmostEdgeAtNode",value:function(){var E=this._minDe.getNode().getEdges();this._minDe=E.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(E){for(var g=E.iterator();g.hasNext();){var m=g.next();m.isForward()&&this.checkForRightmostCoordinate(m)}K.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===ae.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])}(),vt=function(E){function g(m,_){var k;return i(this,g),(k=n(this,g,[_?m+" [ "+_+" ]":m])).pt=_?new le(_):void 0,k.name=Object.keys({TopologyException:g})[0],k}return h(g,E),o(g,[{key:"getCoordinate",value:function(){return this.pt}}])}(P),Dt=function(){return o(function E(){i(this,E),this.array=[]},[{key:"addLast",value:function(E){this.array.push(E)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])}(),yt=function(E){function g(m){var _;return i(this,g),(_=n(this,g)).array=[],m instanceof Ve&&_.addAll(m),_}return h(g,E),o(g,[{key:"interfaces_",get:function(){return[be,Ve]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(m){return arguments.length===1?this.array.push(m):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(m){var _,k=l(m);try{for(k.s();!(_=k.n()).done;){var j=_.value;this.array.push(j)}}catch(ie){k.e(ie)}finally{k.f()}}},{key:"set",value:function(m,_){var k=this.array[m];return this.array[m]=_,k}},{key:"iterator",value:function(){return new Ar(this)}},{key:"get",value:function(m){if(m<0||m>=this.size())throw new Me;return this.array[m]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(m){m?this.array.sort(function(_,k){return m.compare(_,k)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(m){for(var _=0,k=this.array.length;_<k;_++)if(this.array[_]===m)return!!this.array.splice(_,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(be),Ar=function(){return o(function E(g){i(this,E),this.arrayList=g,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new te;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(E){return this.arrayList.set(this.position-1,E)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])}(),ce=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var E=this._dirEdgeList.iterator();E.hasNext();)E.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(E){for(var g=null,m=E.getEdges().iterator();m.hasNext();){var _=m.next();if(_.isVisited()||_.getSym().isVisited()){g=_;break}}if(g===null)throw new vt("unable to find edge to compute depths at "+E.getCoordinate());E.getEdges().computeDepths(g);for(var k=E.getEdges().iterator();k.hasNext();){var j=k.next();j.setVisited(!0),this.copySymDepths(j)}}},{key:"computeDepth",value:function(E){this.clearVisitedEdges();var g=this._finder.getEdge();g.getNode(),g.getLabel(),g.setEdgeDepths(ae.RIGHT,E),this.copySymDepths(g),this.computeDepths(g)}},{key:"create",value:function(E){this.addReachable(E),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var E=this._dirEdgeList.iterator();E.hasNext();){var g=E.next();g.getDepth(ae.RIGHT)>=1&&g.getDepth(ae.LEFT)<=0&&!g.isInteriorAreaEdge()&&g.setInResult(!0)}}},{key:"computeDepths",value:function(E){var g=new he,m=new Dt,_=E.getNode();for(m.addLast(_),g.add(_),E.setVisited(!0);!m.isEmpty();){var k=m.removeFirst();g.add(k),this.computeNodeDepth(k);for(var j=k.getEdges().iterator();j.hasNext();){var ie=j.next().getSym();if(!ie.isVisited()){var de=ie.getNode();g.contains(de)||(m.addLast(de),g.add(de))}}}}},{key:"compareTo",value:function(E){var g=E;return this._rightMostCoord.x<g._rightMostCoord.x?-1:this._rightMostCoord.x>g._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var E=new xe,g=this._dirEdgeList.iterator();g.hasNext();)for(var m=g.next().getEdge().getCoordinates(),_=0;_<m.length-1;_++)E.expandToInclude(m[_]);this._env=E}return this._env}},{key:"addReachable",value:function(E){var g=new Ae;for(g.add(E);!g.empty();){var m=g.pop();this.add(m,g)}}},{key:"copySymDepths",value:function(E){var g=E.getSym();g.setDepth(ae.LEFT,E.getDepth(ae.RIGHT)),g.setDepth(ae.RIGHT,E.getDepth(ae.LEFT))}},{key:"add",value:function(E,g){E.setVisited(!0),this._nodes.add(E);for(var m=E.getEdges().iterator();m.hasNext();){var _=m.next();this._dirEdgeList.add(_);var k=_.getSym().getNode();k.isVisited()||g.push(k)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[I]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new yt,this._nodes=new yt,this._rightMostCoord=null,this._env=null,this._finder=new mt}}])}(),Ue=function(){return o(function E(){i(this,E)},null,[{key:"intersection",value:function(E,g,m,_){var k=E.x<g.x?E.x:g.x,j=E.y<g.y?E.y:g.y,ie=E.x>g.x?E.x:g.x,de=E.y>g.y?E.y:g.y,Te=m.x<_.x?m.x:_.x,Pe=m.y<_.y?m.y:_.y,nt=m.x>_.x?m.x:_.x,ht=m.y>_.y?m.y:_.y,Ft=((k>Te?k:Te)+(ie<nt?ie:nt))/2,Zt=((j>Pe?j:Pe)+(de<ht?de:ht))/2,dr=E.x-Ft,Er=E.y-Zt,ln=g.x-Ft,xn=g.y-Zt,Sn=m.x-Ft,ci=m.y-Zt,un=_.x-Ft,Wn=_.y-Zt,Di=Er-xn,ca=ln-dr,eu=dr*xn-ln*Er,Ff=ci-Wn,Eh=un-Sn,id=Sn*Wn-un*ci,_0=Di*Eh-Ff*ca,Mf=(ca*id-Eh*eu)/_0,Fs=(Ff*eu-Di*id)/_0;return re.isNaN(Mf)||re.isInfinite(Mf)||re.isNaN(Fs)||re.isInfinite(Fs)?null:new le(Mf+Ft,Fs+Zt)}}])}(),st=function(){return o(function E(){i(this,E)},null,[{key:"arraycopy",value:function(E,g,m,_,k){for(var j=0,ie=g;ie<g+k;ie++)m[_+j]=E[ie],j++}},{key:"getProperty",value:function(E){return{"line.separator":`
`}[E]}}])}(),wt=function(){function E(){i(this,E)}return o(E,null,[{key:"log10",value:function(g){var m=Math.log(g);return re.isInfinite(m)||re.isNaN(m)?m:m/E.LOG_10}},{key:"min",value:function(g,m,_,k){var j=g;return m<j&&(j=m),_<j&&(j=_),k<j&&(j=k),j}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var g=arguments[0],m=arguments[1],_=arguments[2];return g<m?m:g>_?_:g}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var k=arguments[0],j=arguments[1],ie=arguments[2];return k<j?j:k>ie?ie:k}}},{key:"wrap",value:function(g,m){return g<0?m- -g%m:g%m}},{key:"max",value:function(){if(arguments.length===3){var g=arguments[1],m=arguments[2],_=arguments[0];return g>_&&(_=g),m>_&&(_=m),_}if(arguments.length===4){var k=arguments[1],j=arguments[2],ie=arguments[3],de=arguments[0];return k>de&&(de=k),j>de&&(de=j),ie>de&&(de=ie),de}}},{key:"average",value:function(g,m){return(g+m)/2}}])}();wt.LOG_10=Math.log(10);var Wt=function(){function E(){i(this,E)}return o(E,null,[{key:"segmentToSegment",value:function(g,m,_,k){if(g.equals(m))return E.pointToSegment(g,_,k);if(_.equals(k))return E.pointToSegment(k,g,m);var j=!1;if(xe.intersects(g,m,_,k)){var ie=(m.x-g.x)*(k.y-_.y)-(m.y-g.y)*(k.x-_.x);if(ie===0)j=!0;else{var de=(g.y-_.y)*(k.x-_.x)-(g.x-_.x)*(k.y-_.y),Te=((g.y-_.y)*(m.x-g.x)-(g.x-_.x)*(m.y-g.y))/ie,Pe=de/ie;(Pe<0||Pe>1||Te<0||Te>1)&&(j=!0)}}else j=!0;return j?wt.min(E.pointToSegment(g,_,k),E.pointToSegment(m,_,k),E.pointToSegment(_,g,m),E.pointToSegment(k,g,m)):0}},{key:"pointToSegment",value:function(g,m,_){if(m.x===_.x&&m.y===_.y)return g.distance(m);var k=(_.x-m.x)*(_.x-m.x)+(_.y-m.y)*(_.y-m.y),j=((g.x-m.x)*(_.x-m.x)+(g.y-m.y)*(_.y-m.y))/k;if(j<=0)return g.distance(m);if(j>=1)return g.distance(_);var ie=((m.y-g.y)*(_.x-m.x)-(m.x-g.x)*(_.y-m.y))/k;return Math.abs(ie)*Math.sqrt(k)}},{key:"pointToLinePerpendicular",value:function(g,m,_){var k=(_.x-m.x)*(_.x-m.x)+(_.y-m.y)*(_.y-m.y),j=((m.y-g.y)*(_.x-m.x)-(m.x-g.x)*(_.y-m.y))/k;return Math.abs(j)*Math.sqrt(k)}},{key:"pointToSegmentString",value:function(g,m){if(m.length===0)throw new C("Line array must contain at least one vertex");for(var _=g.distance(m[0]),k=0;k<m.length-1;k++){var j=E.pointToSegment(g,m[k],m[k+1]);j<_&&(_=j)}return _}}])}(),rr=function(){return o(function E(){i(this,E)},[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||pe(arguments[0],Ye);else if(arguments.length!==2){if(arguments.length===3){var E=arguments[0],g=arguments[1];return this.create(E,g)}}}}])}(),wr=function(){return o(function E(){i(this,E)},[{key:"filter",value:function(E){}}])}(),Ct=function(){return o(function E(){i(this,E)},null,[{key:"ofLine",value:function(E){var g=E.size();if(g<=1)return 0;var m=0,_=new le;E.getCoordinate(0,_);for(var k=_.x,j=_.y,ie=1;ie<g;ie++){E.getCoordinate(ie,_);var de=_.x,Te=_.y,Pe=de-k,nt=Te-j;m+=Math.sqrt(Pe*Pe+nt*nt),k=de,j=Te}return m}}])}(),fn=o(function E(){i(this,E)}),$n=function(){function E(){i(this,E)}return o(E,null,[{key:"copyCoord",value:function(g,m,_,k){for(var j=Math.min(g.getDimension(),_.getDimension()),ie=0;ie<j;ie++)_.setOrdinate(k,ie,g.getOrdinate(m,ie))}},{key:"isRing",value:function(g){var m=g.size();return m===0||!(m<=3)&&g.getOrdinate(0,Ye.X)===g.getOrdinate(m-1,Ye.X)&&g.getOrdinate(0,Ye.Y)===g.getOrdinate(m-1,Ye.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(pe(arguments[0],Ye)&&Number.isInteger(arguments[1])){var g=arguments[0],m=arguments[1];E.scroll(g,m,E.isRing(g))}else if(pe(arguments[0],Ye)&&arguments[1]instanceof le){var _=arguments[0],k=arguments[1],j=E.indexOf(k,_);if(j<=0)return null;E.scroll(_,j)}}else if(arguments.length===3){var ie=arguments[0],de=arguments[1],Te=arguments[2];if(de<=0)return null;for(var Pe=ie.copy(),nt=Te?ie.size()-1:ie.size(),ht=0;ht<nt;ht++)for(var Ft=0;Ft<ie.getDimension();Ft++)ie.setOrdinate(ht,Ft,Pe.getOrdinate((de+ht)%nt,Ft));if(Te)for(var Zt=0;Zt<ie.getDimension();Zt++)ie.setOrdinate(nt,Zt,ie.getOrdinate(0,Zt))}}},{key:"isEqual",value:function(g,m){var _=g.size();if(_!==m.size())return!1;for(var k=Math.min(g.getDimension(),m.getDimension()),j=0;j<_;j++)for(var ie=0;ie<k;ie++){var de=g.getOrdinate(j,ie),Te=m.getOrdinate(j,ie);if(g.getOrdinate(j,ie)!==m.getOrdinate(j,ie)&&(!re.isNaN(de)||!re.isNaN(Te)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var g=arguments[0];return E.minCoordinateIndex(g,0,g.size()-1)}if(arguments.length===3){for(var m=arguments[0],_=arguments[2],k=-1,j=null,ie=arguments[1];ie<=_;ie++){var de=m.getCoordinate(ie);(j===null||j.compareTo(de)>0)&&(j=de,k=ie)}return k}}},{key:"extend",value:function(g,m,_){var k=g.create(_,m.getDimension()),j=m.size();if(E.copy(m,0,k,0,j),j>0)for(var ie=j;ie<_;ie++)E.copy(m,j-1,k,ie,1);return k}},{key:"reverse",value:function(g){for(var m=g.size()-1,_=Math.trunc(m/2),k=0;k<=_;k++)E.swap(g,k,m-k)}},{key:"swap",value:function(g,m,_){if(m===_)return null;for(var k=0;k<g.getDimension();k++){var j=g.getOrdinate(m,k);g.setOrdinate(m,k,g.getOrdinate(_,k)),g.setOrdinate(_,k,j)}}},{key:"copy",value:function(g,m,_,k,j){for(var ie=0;ie<j;ie++)E.copyCoord(g,m+ie,_,k+ie)}},{key:"ensureValidRing",value:function(g,m){var _=m.size();return _===0?m:_<=3?E.createClosedRing(g,m,4):m.getOrdinate(0,Ye.X)===m.getOrdinate(_-1,Ye.X)&&m.getOrdinate(0,Ye.Y)===m.getOrdinate(_-1,Ye.Y)?m:E.createClosedRing(g,m,_+1)}},{key:"indexOf",value:function(g,m){for(var _=0;_<m.size();_++)if(g.x===m.getOrdinate(_,Ye.X)&&g.y===m.getOrdinate(_,Ye.Y))return _;return-1}},{key:"createClosedRing",value:function(g,m,_){var k=g.create(_,m.getDimension()),j=m.size();E.copy(m,0,k,0,j);for(var ie=j;ie<_;ie++)E.copy(m,0,k,ie,1);return k}},{key:"minCoordinate",value:function(g){for(var m=null,_=0;_<g.size();_++){var k=g.getCoordinate(_);(m===null||m.compareTo(k)>0)&&(m=k)}return m}}])}(),Tt=function(){function E(){i(this,E)}return o(E,null,[{key:"toDimensionSymbol",value:function(g){switch(g){case E.FALSE:return E.SYM_FALSE;case E.TRUE:return E.SYM_TRUE;case E.DONTCARE:return E.SYM_DONTCARE;case E.P:return E.SYM_P;case E.L:return E.SYM_L;case E.A:return E.SYM_A}throw new C("Unknown dimension value: "+g)}},{key:"toDimensionValue",value:function(g){switch(Ze.toUpperCase(g)){case E.SYM_FALSE:return E.FALSE;case E.SYM_TRUE:return E.TRUE;case E.SYM_DONTCARE:return E.DONTCARE;case E.SYM_P:return E.P;case E.SYM_L:return E.L;case E.SYM_A:return E.A}throw new C("Unknown dimension symbol: "+g)}}])}();Tt.P=0,Tt.L=1,Tt.A=2,Tt.FALSE=-1,Tt.TRUE=-2,Tt.DONTCARE=-3,Tt.SYM_FALSE="F",Tt.SYM_TRUE="T",Tt.SYM_DONTCARE="*",Tt.SYM_P="0",Tt.SYM_L="1",Tt.SYM_A="2";var Ln=function(){return o(function E(){i(this,E)},[{key:"filter",value:function(E){}}])}(),Kn=function(){return o(function E(){i(this,E)},[{key:"filter",value:function(E,g){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])}(),ir=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new xe:this._points.expandEnvelope(new xe)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new g(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Be){var m=arguments[0],_=arguments[1];if(!this.isEquivalentClass(m))return!1;var k=m;if(this._points.size()!==k._points.size())return!1;for(var j=0;j<this._points.size();j++)if(!this.equal(this._points.getCoordinate(j),k._points.getCoordinate(j),_))return!1;return!0}return d(g,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var m=0;m<Math.trunc(this._points.size()/2);m++){var _=this._points.size()-1-m;if(!this._points.getCoordinate(m).equals(this._points.getCoordinate(_))){if(this._points.getCoordinate(m).compareTo(this._points.getCoordinate(_))>0){var k=this._points.copy();$n.reverse(k),this._points=k}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Tt.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var m=this._points.copy();return $n.reverse(m),this.getFactory().createLineString(m)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return Be.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return Ct.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var m=arguments[0],_=0,k=0;_<this._points.size()&&k<m._points.size();){var j=this._points.getCoordinate(_).compareTo(m._points.getCoordinate(k));if(j!==0)return j;_++,k++}return _<this._points.size()?1:k<m._points.size()?-1:0}if(arguments.length===2){var ie=arguments[0];return arguments[1].compare(this._points,ie._points)}}},{key:"apply",value:function(){if(pe(arguments[0],wr))for(var m=arguments[0],_=0;_<this._points.size();_++)m.filter(this._points.getCoordinate(_));else if(pe(arguments[0],Kn)){var k=arguments[0];if(this._points.size()===0)return null;for(var j=0;j<this._points.size()&&(k.filter(this._points,j),!k.isDone());j++);k.isGeometryChanged()&&this.geometryChanged()}else pe(arguments[0],Ln)?arguments[0].filter(this):pe(arguments[0],S)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new se}},{key:"isEquivalentClass",value:function(m){return m instanceof g}},{key:"getCoordinateN",value:function(m){return this._points.getCoordinate(m)}},{key:"getGeometryType",value:function(){return Be.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(m){if(m===null&&(m=this.getFactory().getCoordinateSequenceFactory().create([])),m.size()===1)throw new C("Invalid number of points in LineString (found "+m.size()+" - must be 0 or >= 2)");this._points=m}},{key:"isCoordinate",value:function(m){for(var _=0;_<this._points.size();_++)if(this._points.getCoordinate(_).equals(m))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(m){return this.getFactory().createPoint(this._points.getCoordinate(m))}},{key:"interfaces_",get:function(){return[fn]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var m=arguments[0],_=arguments[1];Be.constructor_.call(this,_),this.init(m)}}}}])}(Be),Dn=o(function E(){i(this,E)}),Zn=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new xe;var m=new xe;return m.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),m}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new g(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Be){var m=arguments[0],_=arguments[1];return!!this.isEquivalentClass(m)&&(!(!this.isEmpty()||!m.isEmpty())||this.isEmpty()===m.isEmpty()&&this.equal(m.getCoordinate(),this.getCoordinate(),_))}return d(g,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return Tt.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return Be.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var m=arguments[0];return this.getCoordinate().compareTo(m.getCoordinate())}if(arguments.length===2){var _=arguments[0];return arguments[1].compare(this._coordinates,_._coordinates)}}},{key:"apply",value:function(){if(pe(arguments[0],wr)){var m=arguments[0];if(this.isEmpty())return null;m.filter(this.getCoordinate())}else if(pe(arguments[0],Kn)){var _=arguments[0];if(this.isEmpty())return null;_.filter(this._coordinates,0),_.isGeometryChanged()&&this.geometryChanged()}else pe(arguments[0],Ln)?arguments[0].filter(this):pe(arguments[0],S)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Be.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(m){m===null&&(m=this.getFactory().getCoordinateSequenceFactory().create([])),K.isTrue(m.size()<=1),this._coordinates=m}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Dn]}}],[{key:"constructor_",value:function(){this._coordinates=null;var m=arguments[0],_=arguments[1];Be.constructor_.call(this,_),this.init(m)}}])}(Be),Br=function(){function E(){i(this,E)}return o(E,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var g=arguments[0];return Math.abs(E.ofRingSigned(g))}if(pe(arguments[0],Ye)){var m=arguments[0];return Math.abs(E.ofRingSigned(m))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var g=arguments[0];if(g.length<3)return 0;for(var m=0,_=g[0].x,k=1;k<g.length-1;k++){var j=g[k].x-_,ie=g[k+1].y;m+=j*(g[k-1].y-ie)}return m/2}if(pe(arguments[0],Ye)){var de=arguments[0],Te=de.size();if(Te<3)return 0;var Pe=new le,nt=new le,ht=new le;de.getCoordinate(0,nt),de.getCoordinate(1,ht);var Ft=nt.x;ht.x-=Ft;for(var Zt=0,dr=1;dr<Te-1;dr++)Pe.y=nt.y,nt.x=ht.x,nt.y=ht.y,de.getCoordinate(dr+1,ht),ht.x-=Ft,Zt+=nt.x*(Pe.y-ht.y);return Zt/2}}}])}(),Pr=function(){return o(function E(){i(this,E)},null,[{key:"sort",value:function(){var E=arguments,g=arguments[0];if(arguments.length===1)g.sort(function(Ft,Zt){return Ft.compareTo(Zt)});else if(arguments.length===2)g.sort(function(Ft,Zt){return E[1].compare(Ft,Zt)});else if(arguments.length===3){var m=g.slice(arguments[1],arguments[2]);m.sort();var _=g.slice(0,arguments[1]).concat(m,g.slice(arguments[2],g.length));g.splice(0,g.length);var k,j=l(_);try{for(j.s();!(k=j.n()).done;){var ie=k.value;g.push(ie)}}catch(Ft){j.e(Ft)}finally{j.f()}}else if(arguments.length===4){var de=g.slice(arguments[1],arguments[2]);de.sort(function(Ft,Zt){return E[3].compare(Ft,Zt)});var Te=g.slice(0,arguments[1]).concat(de,g.slice(arguments[2],g.length));g.splice(0,g.length);var Pe,nt=l(Te);try{for(nt.s();!(Pe=nt.n()).done;){var ht=Pe.value;g.push(ht)}}catch(Ft){nt.e(Ft)}finally{nt.f()}}}},{key:"asList",value:function(E){var g,m=new yt,_=l(E);try{for(_.s();!(g=_.n()).done;){var k=g.value;m.add(k)}}catch(j){_.e(j)}finally{_.f()}return m}},{key:"copyOf",value:function(E,g){return E.slice(0,g)}}])}(),tn=o(function E(){i(this,E)}),Ee=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var m=new Array(this.getNumPoints()).fill(null),_=-1,k=this._shell.getCoordinates(),j=0;j<k.length;j++)m[++_]=k[j];for(var ie=0;ie<this._holes.length;ie++)for(var de=this._holes[ie].getCoordinates(),Te=0;Te<de.length;Te++)m[++_]=de[Te];return m}},{key:"getArea",value:function(){var m=0;m+=Br.ofRing(this._shell.getCoordinateSequence());for(var _=0;_<this._holes.length;_++)m-=Br.ofRing(this._holes[_].getCoordinateSequence());return m}},{key:"copyInternal",value:function(){for(var m=this._shell.copy(),_=new Array(this._holes.length).fill(null),k=0;k<this._holes.length;k++)_[k]=this._holes[k].copy();return new g(m,_,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var m=this._shell.getCoordinateSequence(),_=this.getEnvelopeInternal(),k=0;k<5;k++){var j=m.getX(k);if(j!==_.getMinX()&&j!==_.getMaxX())return!1;var ie=m.getY(k);if(ie!==_.getMinY()&&ie!==_.getMaxY())return!1}for(var de=m.getX(0),Te=m.getY(0),Pe=1;Pe<=4;Pe++){var nt=m.getX(Pe),ht=m.getY(Pe);if(nt!==de==(ht!==Te))return!1;de=nt,Te=ht}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Be){var m=arguments[0],_=arguments[1];if(!this.isEquivalentClass(m))return!1;var k=m,j=this._shell,ie=k._shell;if(!j.equalsExact(ie,_)||this._holes.length!==k._holes.length)return!1;for(var de=0;de<this._holes.length;de++)if(!this._holes[de].equalsExact(k._holes[de],_))return!1;return!0}return d(g,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var m=0;m<this._holes.length;m++)this._holes[m]=this.normalized(this._holes[m],!1);Pr.sort(this._holes)}else if(arguments.length===2){var _=arguments[0],k=arguments[1];if(_.isEmpty())return null;var j=_.getCoordinateSequence(),ie=$n.minCoordinateIndex(j,0,j.size()-2);$n.scroll(j,ie,!0),Ke.isCCW(j)===k&&$n.reverse(j)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var m=this.getExteriorRing().reverse(),_=new Array(this.getNumInteriorRing()).fill(null),k=0;k<_.length;k++)_[k]=this.getInteriorRingN(k).reverse();return this.getFactory().createPolygon(m,_)}},{key:"getTypeCode",value:function(){return Be.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var m=0;m+=this._shell.getLength();for(var _=0;_<this._holes.length;_++)m+=this._holes[_].getLength();return m}},{key:"getNumPoints",value:function(){for(var m=this._shell.getNumPoints(),_=0;_<this._holes.length;_++)m+=this._holes[_].getNumPoints();return m}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(m,_){var k=m.copy();return this.normalize(k,_),k}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var m=arguments[0],_=this._shell,k=m._shell;return _.compareToSameClass(k)}if(arguments.length===2){var j=arguments[1],ie=arguments[0],de=this._shell,Te=ie._shell,Pe=de.compareToSameClass(Te,j);if(Pe!==0)return Pe;for(var nt=this.getNumInteriorRing(),ht=ie.getNumInteriorRing(),Ft=0;Ft<nt&&Ft<ht;){var Zt=this.getInteriorRingN(Ft),dr=ie.getInteriorRingN(Ft),Er=Zt.compareToSameClass(dr,j);if(Er!==0)return Er;Ft++}return Ft<nt?1:Ft<ht?-1:0}}},{key:"apply",value:function(){if(pe(arguments[0],wr)){var m=arguments[0];this._shell.apply(m);for(var _=0;_<this._holes.length;_++)this._holes[_].apply(m)}else if(pe(arguments[0],Kn)){var k=arguments[0];if(this._shell.apply(k),!k.isDone())for(var j=0;j<this._holes.length&&(this._holes[j].apply(k),!k.isDone());j++);k.isGeometryChanged()&&this.geometryChanged()}else if(pe(arguments[0],Ln))arguments[0].filter(this);else if(pe(arguments[0],S)){var ie=arguments[0];ie.filter(this),this._shell.apply(ie);for(var de=0;de<this._holes.length;de++)this._holes[de].apply(ie)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var m=new Array(this._holes.length+1).fill(null);m[0]=this._shell;for(var _=0;_<this._holes.length;_++)m[_+1]=this._holes[_];return m.length<=1?this.getFactory().createLinearRing(m[0].getCoordinateSequence()):this.getFactory().createMultiLineString(m)}},{key:"getGeometryType",value:function(){return Be.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(m){return this._holes[m]}},{key:"interfaces_",get:function(){return[tn]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var m=arguments[0],_=arguments[1],k=arguments[2];if(Be.constructor_.call(this,k),m===null&&(m=this.getFactory().createLinearRing()),_===null&&(_=[]),Be.hasNullElements(_))throw new C("holes must not contain null elements");if(m.isEmpty()&&Be.hasNonEmptyElements(_))throw new C("shell is empty but holes are not");this._shell=m,this._holes=_}}])}(Be),ze=function(E){function g(){return i(this,g),n(this,g,arguments)}return h(g,E),o(g)}(Z),ke=function(E){function g(m){var _;return i(this,g),(_=n(this,g)).array=[],m instanceof Ve&&_.addAll(m),_}return h(g,E),o(g,[{key:"contains",value:function(m){var _,k=l(this.array);try{for(k.s();!(_=k.n()).done;)if(_.value.compareTo(m)===0)return!0}catch(j){k.e(j)}finally{k.f()}return!1}},{key:"add",value:function(m){if(this.contains(m))return!1;for(var _=0,k=this.array.length;_<k;_++)if(this.array[_].compareTo(m)===1)return!!this.array.splice(_,0,m);return this.array.push(m),!0}},{key:"addAll",value:function(m){var _,k=l(m);try{for(k.s();!(_=k.n()).done;){var j=_.value;this.add(j)}}catch(ie){k.e(ie)}finally{k.f()}return!0}},{key:"remove",value:function(){throw new se}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Re(this.array)}}])}(ze),Re=function(){return o(function E(g){i(this,E),this.array=g,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new te;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new se}}])}(),Oe=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"computeEnvelopeInternal",value:function(){for(var m=new xe,_=0;_<this._geometries.length;_++)m.expandToInclude(this._geometries[_].getEnvelopeInternal());return m}},{key:"getGeometryN",value:function(m){return this._geometries[m]}},{key:"getCoordinates",value:function(){for(var m=new Array(this.getNumPoints()).fill(null),_=-1,k=0;k<this._geometries.length;k++)for(var j=this._geometries[k].getCoordinates(),ie=0;ie<j.length;ie++)m[++_]=j[ie];return m}},{key:"getArea",value:function(){for(var m=0,_=0;_<this._geometries.length;_++)m+=this._geometries[_].getArea();return m}},{key:"copyInternal",value:function(){for(var m=new Array(this._geometries.length).fill(null),_=0;_<m.length;_++)m[_]=this._geometries[_].copy();return new g(m,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Be){var m=arguments[0],_=arguments[1];if(!this.isEquivalentClass(m))return!1;var k=m;if(this._geometries.length!==k._geometries.length)return!1;for(var j=0;j<this._geometries.length;j++)if(!this._geometries[j].equalsExact(k._geometries[j],_))return!1;return!0}return d(g,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var m=0;m<this._geometries.length;m++)this._geometries[m].normalize();Pr.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var m=Tt.FALSE,_=0;_<this._geometries.length;_++)m=Math.max(m,this._geometries[_].getBoundaryDimension());return m}},{key:"reverseInternal",value:function(){for(var m=this._geometries.length,_=new yt(m),k=0;k<m;k++)_.add(this._geometries[k].reverse());return this.getFactory().buildGeometry(_)}},{key:"getTypeCode",value:function(){return Be.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var m=Tt.FALSE,_=0;_<this._geometries.length;_++)m=Math.max(m,this._geometries[_].getDimension());return m}},{key:"getLength",value:function(){for(var m=0,_=0;_<this._geometries.length;_++)m+=this._geometries[_].getLength();return m}},{key:"getNumPoints",value:function(){for(var m=0,_=0;_<this._geometries.length;_++)m+=this._geometries[_].getNumPoints();return m}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var m=arguments[0],_=new ke(Pr.asList(this._geometries)),k=new ke(Pr.asList(m._geometries));return this.compare(_,k)}if(arguments.length===2){for(var j=arguments[1],ie=arguments[0],de=this.getNumGeometries(),Te=ie.getNumGeometries(),Pe=0;Pe<de&&Pe<Te;){var nt=this.getGeometryN(Pe),ht=ie.getGeometryN(Pe),Ft=nt.compareToSameClass(ht,j);if(Ft!==0)return Ft;Pe++}return Pe<de?1:Pe<Te?-1:0}}},{key:"apply",value:function(){if(pe(arguments[0],wr))for(var m=arguments[0],_=0;_<this._geometries.length;_++)this._geometries[_].apply(m);else if(pe(arguments[0],Kn)){var k=arguments[0];if(this._geometries.length===0)return null;for(var j=0;j<this._geometries.length&&(this._geometries[j].apply(k),!k.isDone());j++);k.isGeometryChanged()&&this.geometryChanged()}else if(pe(arguments[0],Ln)){var ie=arguments[0];ie.filter(this);for(var de=0;de<this._geometries.length;de++)this._geometries[de].apply(ie)}else if(pe(arguments[0],S)){var Te=arguments[0];Te.filter(this);for(var Pe=0;Pe<this._geometries.length;Pe++)this._geometries[Pe].apply(Te)}}},{key:"getBoundary",value:function(){return Be.checkNotGeometryCollection(this),K.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return Be.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var m=0;m<this._geometries.length;m++)if(!this._geometries[m].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var m=arguments[0],_=arguments[1];if(Be.constructor_.call(this,_),m===null&&(m=[]),Be.hasNullElements(m))throw new C("geometries must not contain null elements");this._geometries=m}}}}])}(Be),qe=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"copyInternal",value:function(){for(var m=new Array(this._geometries.length).fill(null),_=0;_<m.length;_++)m[_]=this._geometries[_].copy();return new g(m,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Be){var m=arguments[0],_=arguments[1];return!!this.isEquivalentClass(m)&&d(g,"equalsExact",this,1).call(this,m,_)}return d(g,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var m=arguments[0];return this._geometries[m].getCoordinate()}return d(g,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return Tt.FALSE}},{key:"getTypeCode",value:function(){return Be.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Be.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Dn]}}],[{key:"constructor_",value:function(){var m=arguments[0],_=arguments[1];Oe.constructor_.call(this,m,_)}}])}(Oe),ct=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"copyInternal",value:function(){return new g(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return Tt.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||d(g,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var m=this._points.copy();return $n.reverse(m),this.getFactory().createLinearRing(m)}},{key:"getTypeCode",value:function(){return Be.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!d(g,"isClosed",this,1).call(this))throw new C("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<g.MINIMUM_VALID_SIZE)throw new C("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return Be.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var m=arguments[0],_=arguments[1];ir.constructor_.call(this,m,_),this.validateConstruction()}}])}(ir);ct.MINIMUM_VALID_SIZE=4;var xt=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"setOrdinate",value:function(m,_){switch(m){case g.X:this.x=_;break;case g.Y:this.y=_;break;default:throw new C("Invalid ordinate index: "+m)}}},{key:"getZ",value:function(){return le.NULL_ORDINATE}},{key:"getOrdinate",value:function(m){switch(m){case g.X:return this.x;case g.Y:return this.y}throw new C("Invalid ordinate index: "+m)}},{key:"setZ",value:function(m){throw new C("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new g(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(m){this.x=m.x,this.y=m.y,this.z=m.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)le.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof g){var m=arguments[0];le.constructor_.call(this,m.x,m.y)}else if(arguments[0]instanceof le){var _=arguments[0];le.constructor_.call(this,_.x,_.y)}}else if(arguments.length===2){var k=arguments[0],j=arguments[1];le.constructor_.call(this,k,j,le.NULL_ORDINATE)}}}])}(le);xt.X=0,xt.Y=1,xt.Z=-1,xt.M=-1;var lt=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(m,_){switch(m){case g.X:this.x=_;break;case g.Y:this.y=_;break;case g.M:this._m=_;break;default:throw new C("Invalid ordinate index: "+m)}}},{key:"setM",value:function(m){this._m=m}},{key:"getZ",value:function(){return le.NULL_ORDINATE}},{key:"getOrdinate",value:function(m){switch(m){case g.X:return this.x;case g.Y:return this.y;case g.M:return this._m}throw new C("Invalid ordinate index: "+m)}},{key:"setZ",value:function(m){throw new C("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new g(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(m){this.x=m.x,this.y=m.y,this.z=m.getZ(),this._m=m.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)le.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof g){var m=arguments[0];le.constructor_.call(this,m.x,m.y),this._m=m._m}else if(arguments[0]instanceof le){var _=arguments[0];le.constructor_.call(this,_.x,_.y),this._m=this.getM()}}else if(arguments.length===3){var k=arguments[0],j=arguments[1],ie=arguments[2];le.constructor_.call(this,k,j,le.NULL_ORDINATE),this._m=ie}}}])}(le);lt.X=0,lt.Y=1,lt.Z=-1,lt.M=2;var ft=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(m,_){switch(m){case le.X:this.x=_;break;case le.Y:this.y=_;break;case le.Z:this.z=_;break;case le.M:this._m=_;break;default:throw new C("Invalid ordinate index: "+m)}}},{key:"setM",value:function(m){this._m=m}},{key:"getOrdinate",value:function(m){switch(m){case le.X:return this.x;case le.Y:return this.y;case le.Z:return this.getZ();case le.M:return this.getM()}throw new C("Invalid ordinate index: "+m)}},{key:"copy",value:function(){return new g(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(m){this.x=m.x,this.y=m.y,this.z=m.getZ(),this._m=m.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)le.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof g){var m=arguments[0];le.constructor_.call(this,m),this._m=m._m}else if(arguments[0]instanceof le){var _=arguments[0];le.constructor_.call(this,_),this._m=this.getM()}}else if(arguments.length===4){var k=arguments[0],j=arguments[1],ie=arguments[2],de=arguments[3];le.constructor_.call(this,k,j,ie),this._m=de}}}])}(le),At=function(){function E(){i(this,E)}return o(E,null,[{key:"measures",value:function(g){return g instanceof xt?0:g instanceof lt||g instanceof ft?1:0}},{key:"dimension",value:function(g){return g instanceof xt?2:g instanceof lt?3:g instanceof ft?4:3}},{key:"create",value:function(){if(arguments.length===1){var g=arguments[0];return E.create(g,0)}if(arguments.length===2){var m=arguments[0],_=arguments[1];return m===2?new xt:m===3&&_===0?new le:m===3&&_===1?new lt:m===4&&_===1?new ft:new le}}}])}(),Pt=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"getCoordinate",value:function(m){return this.get(m)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&pe(arguments[0],Ve)){for(var m=arguments[1],_=!1,k=arguments[0].iterator();k.hasNext();)this.add(k.next(),m),_=!0;return _}return d(g,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var m=d(g,"clone",this,1).call(this),_=0;_<this.size();_++)m.add(_,this.get(_).clone());return m}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(g.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(g.coordArrayType);for(var m=this.size(),_=new Array(m).fill(null),k=0;k<m;k++)_[k]=this.get(m-k-1);return _}}},{key:"add",value:function(){if(arguments.length===1){var m=arguments[0];return d(g,"add",this,1).call(this,m)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var _=arguments[0],k=arguments[1];return this.add(_,k,!0),!0}if(arguments[0]instanceof le&&typeof arguments[1]=="boolean"){var j=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(j))return null;d(g,"add",this,1).call(this,j)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var ie=arguments[0],de=arguments[1];return this.add(ie,de),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var Te=arguments[0],Pe=arguments[1];if(arguments[2])for(var nt=0;nt<Te.length;nt++)this.add(Te[nt],Pe);else for(var ht=Te.length-1;ht>=0;ht--)this.add(Te[ht],Pe);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof le){var Ft=arguments[0],Zt=arguments[1];if(!arguments[2]){var dr=this.size();if(dr>0&&(Ft>0&&this.get(Ft-1).equals2D(Zt)||Ft<dr&&this.get(Ft).equals2D(Zt)))return null}d(g,"add",this,1).call(this,Ft,Zt)}}else if(arguments.length===4){var Er=arguments[0],ln=arguments[1],xn=arguments[2],Sn=arguments[3],ci=1;xn>Sn&&(ci=-1);for(var un=xn;un!==Sn;un+=ci)this.add(Er[un],ln);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var m=this.get(0).copy();this.add(m,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var m=arguments[0];this.ensureCapacity(m.length),this.add(m,!0)}else if(arguments.length===2){var _=arguments[0],k=arguments[1];this.ensureCapacity(_.length),this.add(_,k)}}}}])}(yt);Pt.coordArrayType=new Array(0).fill(null);var It=function(){function E(){i(this,E)}return o(E,null,[{key:"isRing",value:function(g){return!(g.length<4)&&!!g[0].equals2D(g[g.length-1])}},{key:"ptNotInList",value:function(g,m){for(var _=0;_<g.length;_++){var k=g[_];if(E.indexOf(k,m)<0)return k}return null}},{key:"scroll",value:function(g,m){var _=E.indexOf(m,g);if(_<0)return null;var k=new Array(g.length).fill(null);st.arraycopy(g,_,k,0,g.length-_),st.arraycopy(g,0,k,g.length-_,_),st.arraycopy(k,0,g,0,g.length)}},{key:"equals",value:function(){if(arguments.length===2){var g=arguments[0],m=arguments[1];if(g===m)return!0;if(g===null||m===null||g.length!==m.length)return!1;for(var _=0;_<g.length;_++)if(!g[_].equals(m[_]))return!1;return!0}if(arguments.length===3){var k=arguments[0],j=arguments[1],ie=arguments[2];if(k===j)return!0;if(k===null||j===null||k.length!==j.length)return!1;for(var de=0;de<k.length;de++)if(ie.compare(k[de],j[de])!==0)return!1;return!0}}},{key:"intersection",value:function(g,m){for(var _=new Pt,k=0;k<g.length;k++)m.intersects(g[k])&&_.add(g[k],!0);return _.toCoordinateArray()}},{key:"measures",value:function(g){if(g===null||g.length===0)return 0;var m,_=0,k=l(g);try{for(k.s();!(m=k.n()).done;){var j=m.value;_=Math.max(_,At.measures(j))}}catch(ie){k.e(ie)}finally{k.f()}return _}},{key:"hasRepeatedPoints",value:function(g){for(var m=1;m<g.length;m++)if(g[m-1].equals(g[m]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(g){return E.hasRepeatedPoints(g)?new Pt(g,!1).toCoordinateArray():g}},{key:"reverse",value:function(g){for(var m=g.length-1,_=Math.trunc(m/2),k=0;k<=_;k++){var j=g[k];g[k]=g[m-k],g[m-k]=j}}},{key:"removeNull",value:function(g){for(var m=0,_=0;_<g.length;_++)g[_]!==null&&m++;var k=new Array(m).fill(null);if(m===0)return k;for(var j=0,ie=0;ie<g.length;ie++)g[ie]!==null&&(k[j++]=g[ie]);return k}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var g=arguments[0],m=new Array(g.length).fill(null),_=0;_<g.length;_++)m[_]=g[_].copy();return m}if(arguments.length===5)for(var k=arguments[0],j=arguments[1],ie=arguments[2],de=arguments[3],Te=arguments[4],Pe=0;Pe<Te;Pe++)ie[de+Pe]=k[j+Pe].copy()}},{key:"isEqualReversed",value:function(g,m){for(var _=0;_<g.length;_++){var k=g[_],j=m[g.length-_-1];if(k.compareTo(j)!==0)return!1}return!0}},{key:"envelope",value:function(g){for(var m=new xe,_=0;_<g.length;_++)m.expandToInclude(g[_]);return m}},{key:"toCoordinateArray",value:function(g){return g.toArray(E.coordArrayType)}},{key:"dimension",value:function(g){if(g===null||g.length===0)return 3;var m,_=0,k=l(g);try{for(k.s();!(m=k.n()).done;){var j=m.value;_=Math.max(_,At.dimension(j))}}catch(ie){k.e(ie)}finally{k.f()}return _}},{key:"atLeastNCoordinatesOrNothing",value:function(g,m){return m.length>=g?m:[]}},{key:"indexOf",value:function(g,m){for(var _=0;_<m.length;_++)if(g.equals(m[_]))return _;return-1}},{key:"increasingDirection",value:function(g){for(var m=0;m<Math.trunc(g.length/2);m++){var _=g.length-1-m,k=g[m].compareTo(g[_]);if(k!==0)return k}return 1}},{key:"compare",value:function(g,m){for(var _=0;_<g.length&&_<m.length;){var k=g[_].compareTo(m[_]);if(k!==0)return k;_++}return _<m.length?-1:_<g.length?1:0}},{key:"minCoordinate",value:function(g){for(var m=null,_=0;_<g.length;_++)(m===null||m.compareTo(g[_])>0)&&(m=g[_]);return m}},{key:"extract",value:function(g,m,_){m=wt.clamp(m,0,g.length);var k=(_=wt.clamp(_,-1,g.length))-m+1;_<0&&(k=0),m>=g.length&&(k=0),_<m&&(k=0);var j=new Array(k).fill(null);if(k===0)return j;for(var ie=0,de=m;de<=_;de++)j[ie++]=g[de];return j}}])}(),Jt=function(){return o(function E(){i(this,E)},[{key:"compare",value:function(E,g){var m=E,_=g;return It.compare(m,_)}},{key:"interfaces_",get:function(){return[oe]}}])}(),qt=function(){return o(function E(){i(this,E)},[{key:"compare",value:function(E,g){var m=E,_=g;if(m.length<_.length)return-1;if(m.length>_.length)return 1;if(m.length===0)return 0;var k=It.compare(m,_);return It.isEqualReversed(m,_)?0:k}},{key:"OLDcompare",value:function(E,g){var m=E,_=g;if(m.length<_.length)return-1;if(m.length>_.length)return 1;if(m.length===0)return 0;for(var k=It.increasingDirection(m),j=It.increasingDirection(_),ie=k>0?0:m.length-1,de=j>0?0:m.length-1,Te=0;Te<m.length;Te++){var Pe=m[ie].compareTo(_[de]);if(Pe!==0)return Pe;ie+=k,de+=j}return 0}},{key:"interfaces_",get:function(){return[oe]}}])}();It.ForwardComparator=Jt,It.BidirectionalComparator=qt,It.coordArrayType=new Array(0).fill(null);var Rt=function(){return o(function E(g){i(this,E),this.str=g},[{key:"append",value:function(E){this.str+=E}},{key:"setCharAt",value:function(E,g){this.str=this.str.substr(0,E)+g+this.str.substr(E+1)}},{key:"toString",value:function(){return this.str}}])}(),hr=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"getM",value:function(g){return this.hasM()?this._coordinates[g].getM():re.NaN}},{key:"setOrdinate",value:function(g,m,_){switch(m){case Ye.X:this._coordinates[g].x=_;break;case Ye.Y:this._coordinates[g].y=_;break;default:this._coordinates[g].setOrdinate(m,_)}}},{key:"getZ",value:function(g){return this.hasZ()?this._coordinates[g].getZ():re.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(g,m){switch(m){case Ye.X:return this._coordinates[g].x;case Ye.Y:return this._coordinates[g].y;default:return this._coordinates[g].getOrdinate(m)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var g=arguments[0];return this._coordinates[g]}if(arguments.length===2){var m=arguments[0];arguments[1].setCoordinate(this._coordinates[m])}}},{key:"getCoordinateCopy",value:function(g){var m=this.createCoordinate();return m.setCoordinate(this._coordinates[g]),m}},{key:"createCoordinate",value:function(){return At.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(g){return this._coordinates[g].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(g){for(var m=0;m<this._coordinates.length;m++)g.expandToInclude(this._coordinates[m]);return g}},{key:"copy",value:function(){for(var g=new Array(this.size()).fill(null),m=0;m<this._coordinates.length;m++){var _=this.createCoordinate();_.setCoordinate(this._coordinates[m]),g[m]=_}return new E(g,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var g=new Rt(17*this._coordinates.length);g.append("("),g.append(this._coordinates[0]);for(var m=1;m<this._coordinates.length;m++)g.append(", "),g.append(this._coordinates[m]);return g.append(")"),g.toString()}return"()"}},{key:"getY",value:function(g){return this._coordinates[g].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[Ye,T]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var g=arguments[0];E.constructor_.call(this,g,It.dimension(g),It.measures(g))}else if(Number.isInteger(arguments[0])){var m=arguments[0];this._coordinates=new Array(m).fill(null);for(var _=0;_<m;_++)this._coordinates[_]=new le}else if(pe(arguments[0],Ye)){var k=arguments[0];if(k===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=k.getDimension(),this._measures=k.getMeasures(),this._coordinates=new Array(k.size()).fill(null);for(var j=0;j<this._coordinates.length;j++)this._coordinates[j]=k.getCoordinateCopy(j)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var ie=arguments[0],de=arguments[1];E.constructor_.call(this,ie,de,It.measures(ie))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Te=arguments[0],Pe=arguments[1];this._coordinates=new Array(Te).fill(null),this._dimension=Pe;for(var nt=0;nt<Te;nt++)this._coordinates[nt]=At.create(Pe)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var ht=arguments[0],Ft=arguments[1],Zt=arguments[2];this._dimension=Ft,this._measures=Zt,this._coordinates=ht===null?new Array(0).fill(null):ht}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var dr=arguments[0],Er=arguments[1],ln=arguments[2];this._coordinates=new Array(dr).fill(null),this._dimension=Er,this._measures=ln;for(var xn=0;xn<dr;xn++)this._coordinates[xn]=this.createCoordinate()}}}}])}(),An=function(){function E(){i(this,E)}return o(E,[{key:"readResolve",value:function(){return E.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new hr(arguments[0]);if(pe(arguments[0],Ye))return new hr(arguments[0])}else{if(arguments.length===2){var g=arguments[1];return g>3&&(g=3),g<2&&(g=2),new hr(arguments[0],g)}if(arguments.length===3){var m=arguments[2],_=arguments[1]-m;return m>1&&(m=1),_>3&&(_=3),_<2&&(_=2),new hr(arguments[0],_+m,m)}}}},{key:"interfaces_",get:function(){return[rr,T]}}],[{key:"instance",value:function(){return E.instanceObject}}])}();An.instanceObject=new An;var Cn=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"copyInternal",value:function(){for(var m=new Array(this._geometries.length).fill(null),_=0;_<m.length;_++)m[_]=this._geometries[_].copy();return new g(m,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Be){var m=arguments[0],_=arguments[1];return!!this.isEquivalentClass(m)&&d(g,"equalsExact",this,1).call(this,m,_)}return d(g,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return Be.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var m=new yt,_=0;_<this._geometries.length;_++)for(var k=this._geometries[_].getBoundary(),j=0;j<k.getNumGeometries();j++)m.add(k.getGeometryN(j));var ie=new Array(m.size()).fill(null);return this.getFactory().createMultiLineString(m.toArray(ie))}},{key:"getGeometryType",value:function(){return Be.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[tn]}}],[{key:"constructor_",value:function(){var m=arguments[0],_=arguments[1];Oe.constructor_.call(this,m,_)}}])}(Oe),Vn=function(){return o(function E(){i(this,E)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])}(),ls=function(E){function g(){var m;return i(this,g),(m=n(this,g)).map=new Map,m}return h(g,E),o(g,[{key:"get",value:function(m){return this.map.get(m)||null}},{key:"put",value:function(m,_){return this.map.set(m,_),_}},{key:"values",value:function(){for(var m=new yt,_=this.map.values(),k=_.next();!k.done;)m.add(k.value),k=_.next();return m}},{key:"entrySet",value:function(){var m=new he;return this.map.entries().forEach(function(_){return m.add(_)}),m}},{key:"size",value:function(){return this.map.size()}}])}(Vn),Ti=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"equals",value:function(g){if(!(g instanceof E))return!1;var m=g;return this._modelType===m._modelType&&this._scale===m._scale}},{key:"compareTo",value:function(g){var m=g,_=this.getMaximumSignificantDigits(),k=m.getMaximumSignificantDigits();return Ge.compare(_,k)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===E.FLOATING||this._modelType===E.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var g="UNKNOWN";return this._modelType===E.FLOATING?g="Floating":this._modelType===E.FLOATING_SINGLE?g="Floating-Single":this._modelType===E.FIXED&&(g="Fixed (Scale="+this.getScale()+")"),g}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var g=arguments[0];return re.isNaN(g)||this._modelType===E.FLOATING_SINGLE?g:this._modelType===E.FIXED?Math.round(g*this._scale)/this._scale:g}if(arguments[0]instanceof le){var m=arguments[0];if(this._modelType===E.FLOATING)return null;m.x=this.makePrecise(m.x),m.y=this.makePrecise(m.y)}}},{key:"getMaximumSignificantDigits",value:function(){var g=16;return this._modelType===E.FLOATING?g=16:this._modelType===E.FLOATING_SINGLE?g=6:this._modelType===E.FIXED&&(g=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),g}},{key:"setScale",value:function(g){this._scale=Math.abs(g)}},{key:"interfaces_",get:function(){return[T,I]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=E.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof ya){var g=arguments[0];this._modelType=g,g===E.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var m=arguments[0];this._modelType=E.FIXED,this.setScale(m)}else if(arguments[0]instanceof E){var _=arguments[0];this._modelType=_._modelType,this._scale=_._scale}}}},{key:"mostPrecise",value:function(g,m){return g.compareTo(m)>=0?g:m}}])}(),ya=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"readResolve",value:function(){return E.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[T]}}],[{key:"constructor_",value:function(){this._name=null;var g=arguments[0];this._name=g,E.nameToTypeMap.put(g,this)}}])}();ya.nameToTypeMap=new ls,Ti.Type=ya,Ti.FIXED=new ya("FIXED"),Ti.FLOATING=new ya("FLOATING"),Ti.FLOATING_SINGLE=new ya("FLOATING SINGLE"),Ti.maximumPreciseValue=9007199254740992;var us=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"copyInternal",value:function(){for(var m=new Array(this._geometries.length).fill(null),_=0;_<m.length;_++)m[_]=this._geometries[_].copy();return new g(m,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Be){var m=arguments[0],_=arguments[1];return!!this.isEquivalentClass(m)&&d(g,"equalsExact",this,1).call(this,m,_)}return d(g,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Tt.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var m=0;m<this._geometries.length;m++)if(!this._geometries[m].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return Be.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new se}},{key:"getGeometryType",value:function(){return Be.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[fn]}}],[{key:"constructor_",value:function(){var m=arguments[0],_=arguments[1];Oe.constructor_.call(this,m,_)}}])}(Oe),Ia=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"createEmpty",value:function(g){switch(g){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new C("Invalid dimension: "+g)}}},{key:"toGeometry",value:function(g){return g.isNull()?this.createPoint():g.getMinX()===g.getMaxX()&&g.getMinY()===g.getMaxY()?this.createPoint(new le(g.getMinX(),g.getMinY())):g.getMinX()===g.getMaxX()||g.getMinY()===g.getMaxY()?this.createLineString([new le(g.getMinX(),g.getMinY()),new le(g.getMaxX(),g.getMaxY())]):this.createPolygon(this.createLinearRing([new le(g.getMinX(),g.getMinY()),new le(g.getMinX(),g.getMaxY()),new le(g.getMaxX(),g.getMaxY()),new le(g.getMaxX(),g.getMinY()),new le(g.getMinX(),g.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var g=arguments[0];return this.createLineString(g!==null?this.getCoordinateSequenceFactory().create(g):null)}if(pe(arguments[0],Ye))return new ir(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new us(null,this):arguments.length===1?new us(arguments[0],this):void 0}},{key:"buildGeometry",value:function(g){for(var m=null,_=!1,k=!1,j=g.iterator();j.hasNext();){var ie=j.next(),de=ie.getTypeCode();m===null&&(m=de),de!==m&&(_=!0),ie instanceof Oe&&(k=!0)}if(m===null)return this.createGeometryCollection();if(_||k)return this.createGeometryCollection(E.toGeometryArray(g));var Te=g.iterator().next();if(g.size()>1){if(Te instanceof Ee)return this.createMultiPolygon(E.toPolygonArray(g));if(Te instanceof ir)return this.createMultiLineString(E.toLineStringArray(g));if(Te instanceof Zn)return this.createMultiPoint(E.toPointArray(g));K.shouldNeverReachHere("Unhandled geometry type: "+Te.getGeometryType())}return Te}},{key:"createMultiPointFromCoords",value:function(g){return this.createMultiPoint(g!==null?this.getCoordinateSequenceFactory().create(g):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof le){var g=arguments[0];return this.createPoint(g!==null?this.getCoordinateSequenceFactory().create([g]):null)}if(pe(arguments[0],Ye))return new Zn(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(pe(arguments[0],Ye)){var g=arguments[0];return this.createPolygon(this.createLinearRing(g))}if(arguments[0]instanceof Array){var m=arguments[0];return this.createPolygon(this.createLinearRing(m))}if(arguments[0]instanceof ct){var _=arguments[0];return this.createPolygon(_,null)}}else if(arguments.length===2)return new Ee(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new Oe(null,this):arguments.length===1?new Oe(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var g=arguments[0];return this.createLinearRing(g!==null?this.getCoordinateSequenceFactory().create(g):null)}if(pe(arguments[0],Ye))return new ct(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new Cn(null,this):arguments.length===1?new Cn(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new qe(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new qe(arguments[0],this);if(pe(arguments[0],Ye)){var g=arguments[0];if(g===null)return this.createMultiPoint(new Array(0).fill(null));for(var m=new Array(g.size()).fill(null),_=0;_<g.size();_++){var k=this.getCoordinateSequenceFactory().create(1,g.getDimension(),g.getMeasures());$n.copy(g,_,k,0,1),m[_]=this.createPoint(k)}return this.createMultiPoint(m)}}}},{key:"interfaces_",get:function(){return[T]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)E.constructor_.call(this,new Ti,0);else if(arguments.length===1){if(pe(arguments[0],rr)){var g=arguments[0];E.constructor_.call(this,new Ti,0,g)}else if(arguments[0]instanceof Ti){var m=arguments[0];E.constructor_.call(this,m,0,E.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var _=arguments[0],k=arguments[1];E.constructor_.call(this,_,k,E.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var j=arguments[0],ie=arguments[1],de=arguments[2];this._precisionModel=j,this._coordinateSequenceFactory=de,this._SRID=ie}}},{key:"toMultiPolygonArray",value:function(g){var m=new Array(g.size()).fill(null);return g.toArray(m)}},{key:"toGeometryArray",value:function(g){if(g===null)return null;var m=new Array(g.size()).fill(null);return g.toArray(m)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return An.instance()}},{key:"toMultiLineStringArray",value:function(g){var m=new Array(g.size()).fill(null);return g.toArray(m)}},{key:"toLineStringArray",value:function(g){var m=new Array(g.size()).fill(null);return g.toArray(m)}},{key:"toMultiPointArray",value:function(g){var m=new Array(g.size()).fill(null);return g.toArray(m)}},{key:"toLinearRingArray",value:function(g){var m=new Array(g.size()).fill(null);return g.toArray(m)}},{key:"toPointArray",value:function(g){var m=new Array(g.size()).fill(null);return g.toArray(m)}},{key:"toPolygonArray",value:function(g){var m=new Array(g.size()).fill(null);return g.toArray(m)}},{key:"createPointFromInternalCoord",value:function(g,m){return m.getPrecisionModel().makePrecise(g),m.getFactory().createPoint(g)}}])}(),Fa="XY",ji="XYZ",To="XYM",ni="XYZM",No={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Cl="EMPTY",Sl=1,Ui=2,$a=3,Ka=4,tl=5,Wl=6;for(var yf in No)No[yf].toUpperCase();var xf=function(){return o(function E(g){i(this,E),this.wkt=g,this.index_=-1},[{key:"isAlpha_",value:function(E){return E>="a"&&E<="z"||E>="A"&&E<="Z"}},{key:"isNumeric_",value:function(E,g){return E>="0"&&E<="9"||E=="."&&!(g!==void 0&&g)}},{key:"isWhiteSpace_",value:function(E){return E==" "||E=="	"||E=="\r"||E==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var E,g=this.nextChar_(),m=this.index_,_=g;if(g=="(")E=Ui;else if(g==",")E=tl;else if(g==")")E=$a;else if(this.isNumeric_(g)||g=="-")E=Ka,_=this.readNumber_();else if(this.isAlpha_(g))E=Sl,_=this.readText_();else{if(this.isWhiteSpace_(g))return this.nextToken();if(g!=="")throw new Error("Unexpected character: "+g);E=Wl}return{position:m,value:_,type:E}}},{key:"readNumber_",value:function(){var E,g=this.index_,m=!1,_=!1;do E=="."?m=!0:E!="e"&&E!="E"||(_=!0),E=this.nextChar_();while(this.isNumeric_(E,m)||!_&&(E=="e"||E=="E")||_&&(E=="-"||E=="+"));return parseFloat(this.wkt.substring(g,this.index_--))}},{key:"readText_",value:function(){var E,g=this.index_;do E=this.nextChar_();while(this.isAlpha_(E));return this.wkt.substring(g,this.index_--).toUpperCase()}}])}(),mh=function(){return o(function E(g,m){i(this,E),this.lexer_=g,this.token_,this.layout_=Fa,this.factory=m},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(E){return this.token_.type==E}},{key:"match",value:function(E){var g=this.isTokenType(E);return g&&this.consume_(),g}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var E=Fa,g=this.token_;if(this.isTokenType(Sl)){var m=g.value;m==="Z"?E=ji:m==="M"?E=To:m==="ZM"&&(E=ni),E!==Fa&&this.consume_()}return E}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(Ui)){var E=[];do E.push(this.parseGeometry_());while(this.match(tl));if(this.match($a))return E}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(Ui)){var E=this.parsePoint_();if(this.match($a))return E}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(Ui)){var E=this.parsePointList_();if(this.match($a))return E}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(Ui)){var E=this.parseLineStringTextList_();if(this.match($a))return E}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var E;if(this.match(Ui)){if(E=this.token_.type==Ui?this.parsePointTextList_():this.parsePointList_(),this.match($a))return E}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(Ui)){var E=this.parseLineStringTextList_();if(this.match($a))return E}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(Ui)){var E=this.parsePolygonTextList_();if(this.match($a))return E}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var E=[],g=this.layout_.length,m=0;m<g;++m){var _=this.token_;if(!this.match(Ka))break;E.push(_.value)}if(E.length==g)return E;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var E=[this.parsePoint_()];this.match(tl);)E.push(this.parsePoint_());return E}},{key:"parsePointTextList_",value:function(){for(var E=[this.parsePointText_()];this.match(tl);)E.push(this.parsePointText_());return E}},{key:"parseLineStringTextList_",value:function(){for(var E=[this.parseLineStringText_()];this.match(tl);)E.push(this.parseLineStringText_());return E}},{key:"parsePolygonTextList_",value:function(){for(var E=[this.parsePolygonText_()];this.match(tl);)E.push(this.parsePolygonText_());return E}},{key:"isEmptyGeometry_",value:function(){var E=this.isTokenType(Sl)&&this.token_.value==Cl;return E&&this.consume_(),E}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var E=this.factory,g=function(Er){return a(le,p(Er))},m=function(Er){var ln=Er.map(function(xn){return E.createLinearRing(xn.map(g))});return ln.length>1?E.createPolygon(ln[0],ln.slice(1)):E.createPolygon(ln[0])},_=this.token_;if(this.match(Sl)){var k=_.value;if(this.layout_=this.parseGeometryLayout_(),k=="GEOMETRYCOLLECTION"){var j=this.parseGeometryCollectionText_();return E.createGeometryCollection(j)}switch(k){case"POINT":var ie=this.parsePointText_();return ie?E.createPoint(a(le,p(ie))):E.createPoint();case"LINESTRING":var de=this.parseLineStringText_().map(g);return E.createLineString(de);case"LINEARRING":var Te=this.parseLineStringText_().map(g);return E.createLinearRing(Te);case"POLYGON":var Pe=this.parsePolygonText_();return Pe&&Pe.length!==0?m(Pe):E.createPolygon();case"MULTIPOINT":var nt=this.parseMultiPointText_();if(!nt||nt.length===0)return E.createMultiPoint();var ht=nt.map(g).map(function(Er){return E.createPoint(Er)});return E.createMultiPoint(ht);case"MULTILINESTRING":var Ft=this.parseMultiLineStringText_().map(function(Er){return E.createLineString(Er.map(g))});return E.createMultiLineString(Ft);case"MULTIPOLYGON":var Zt=this.parseMultiPolygonText_();if(!Zt||Zt.length===0)return E.createMultiPolygon();var dr=Zt.map(m);return E.createMultiPolygon(dr);default:throw new Error("Invalid geometry type: "+k)}}throw new Error(this.formatErrorMessage_())}}])}();function wc(E){if(E.isEmpty())return"";var g=E.getCoordinate(),m=[g.x,g.y];return g.z===void 0||Number.isNaN(g.z)||m.push(g.z),g.m===void 0||Number.isNaN(g.m)||m.push(g.m),m.join(" ")}function Bl(E){for(var g=E.getCoordinates().map(function(j){var ie=[j.x,j.y];return j.z===void 0||Number.isNaN(j.z)||ie.push(j.z),j.m===void 0||Number.isNaN(j.m)||ie.push(j.m),ie}),m=[],_=0,k=g.length;_<k;++_)m.push(g[_].join(" "));return m.join(", ")}function Yl(E){var g=[];g.push("("+Bl(E.getExteriorRing())+")");for(var m=0,_=E.getNumInteriorRing();m<_;++m)g.push("("+Bl(E.getInteriorRingN(m))+")");return g.join(", ")}var JA={Point:wc,LineString:Bl,LinearRing:Bl,Polygon:Yl,MultiPoint:function(E){for(var g=[],m=0,_=E.getNumGeometries();m<_;++m)g.push("("+wc(E.getGeometryN(m))+")");return g.join(", ")},MultiLineString:function(E){for(var g=[],m=0,_=E.getNumGeometries();m<_;++m)g.push("("+Bl(E.getGeometryN(m))+")");return g.join(", ")},MultiPolygon:function(E){for(var g=[],m=0,_=E.getNumGeometries();m<_;++m)g.push("("+Yl(E.getGeometryN(m))+")");return g.join(", ")},GeometryCollection:function(E){for(var g=[],m=0,_=E.getNumGeometries();m<_;++m)g.push(Mu(E.getGeometryN(m)));return g.join(", ")}};function Mu(E){var g=E.getGeometryType(),m=JA[g];g=g.toUpperCase();var _=function(k){var j="";if(k.isEmpty())return j;var ie=k.getCoordinate();return ie.z===void 0||Number.isNaN(ie.z)||(j+="Z"),ie.m===void 0||Number.isNaN(ie.m)||(j+="M"),j}(E);return _.length>0&&(g+=" "+_),E.isEmpty()?g+" "+Cl:g+" ("+m(E)+")"}var _c=function(){return o(function E(g){i(this,E),this.geometryFactory=g||new Ia,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(E){var g=new xf(E);return new mh(g,this.geometryFactory).parse()}},{key:"write",value:function(E){return Mu(E)}}])}(),xa=function(){return o(function E(g){i(this,E),this.parser=new _c(g)},[{key:"write",value:function(E){return this.parser.write(E)}}],[{key:"toLineString",value:function(E,g){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+E.x+" "+E.y+", "+g.x+" "+g.y+" )"}}])}(),Gn=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"getIndexAlongSegment",value:function(g,m){return this.computeIntLineIndex(),this._intLineIndex[g][m]}},{key:"getTopologySummary",value:function(){var g=new Rt;return this.isEndPoint()&&g.append(" endpoint"),this._isProper&&g.append(" proper"),this.isCollinear()&&g.append(" collinear"),g.toString()}},{key:"computeIntersection",value:function(g,m,_,k){this._inputLines[0][0]=g,this._inputLines[0][1]=m,this._inputLines[1][0]=_,this._inputLines[1][1]=k,this._result=this.computeIntersect(g,m,_,k)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var g=arguments[0];this.getEdgeDistance(g,0)>this.getEdgeDistance(g,1)?(this._intLineIndex[g][0]=0,this._intLineIndex[g][1]=1):(this._intLineIndex[g][0]=1,this._intLineIndex[g][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(g){this._precisionModel=g}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var g=arguments[0],m=0;m<this._result;m++)if(!this._intPt[m].equals2D(this._inputLines[g][0])&&!this._intPt[m].equals2D(this._inputLines[g][1]))return!0;return!1}}},{key:"getIntersection",value:function(g){return this._intPt[g]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==E.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(g,m){return E.computeEdgeDistance(this._intPt[m],this._inputLines[g][0],this._inputLines[g][1])}},{key:"isCollinear",value:function(){return this._result===E.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return xa.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+xa.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(g,m){return this._inputLines[g][m]}},{key:"isIntersection",value:function(g){for(var m=0;m<this._result;m++)if(this._intPt[m].equals2D(g))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(g,m){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[g][m]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new le,this._intPt[1]=new le,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(g,m,_){var k=Math.abs(_.x-m.x),j=Math.abs(_.y-m.y),ie=-1;if(g.equals(m))ie=0;else if(g.equals(_))ie=k>j?k:j;else{var de=Math.abs(g.x-m.x),Te=Math.abs(g.y-m.y);(ie=k>j?de:Te)!==0||g.equals(m)||(ie=Math.max(de,Te))}return K.isTrue(!(ie===0&&!g.equals(m)),"Bad distance calculation"),ie}},{key:"nonRobustComputeEdgeDistance",value:function(g,m,_){var k=g.x-m.x,j=g.y-m.y,ie=Math.sqrt(k*k+j*j);return K.isTrue(!(ie===0&&!g.equals(m)),"Invalid distance calculation"),ie}}])}();Gn.DONT_INTERSECT=0,Gn.DO_INTERSECT=1,Gn.COLLINEAR=2,Gn.NO_INTERSECTION=0,Gn.POINT_INTERSECTION=1,Gn.COLLINEAR_INTERSECTION=2;var Yi=function(E){function g(){return i(this,g),n(this,g)}return h(g,E),o(g,[{key:"isInSegmentEnvelopes",value:function(m){var _=new xe(this._inputLines[0][0],this._inputLines[0][1]),k=new xe(this._inputLines[1][0],this._inputLines[1][1]);return _.contains(m)&&k.contains(m)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return d(g,"computeIntersection",this,1).apply(this,arguments);var m=arguments[0],_=arguments[1],k=arguments[2];if(this._isProper=!1,xe.intersects(_,k,m)&&Ke.index(_,k,m)===0&&Ke.index(k,_,m)===0)return this._isProper=!0,(m.equals(_)||m.equals(k))&&(this._isProper=!1),this._result=Gn.POINT_INTERSECTION,null;this._result=Gn.NO_INTERSECTION}},{key:"intersection",value:function(m,_,k,j){var ie=this.intersectionSafe(m,_,k,j);return this.isInSegmentEnvelopes(ie)||(ie=new le(g.nearestEndpoint(m,_,k,j))),this._precisionModel!==null&&this._precisionModel.makePrecise(ie),ie}},{key:"checkDD",value:function(m,_,k,j,ie){var de=Je.intersection(m,_,k,j),Te=this.isInSegmentEnvelopes(de);st.out.println("DD in env = "+Te+"  --------------------- "+de),ie.distance(de)>1e-4&&st.out.println("Distance = "+ie.distance(de))}},{key:"intersectionSafe",value:function(m,_,k,j){var ie=Ue.intersection(m,_,k,j);return ie===null&&(ie=g.nearestEndpoint(m,_,k,j)),ie}},{key:"computeCollinearIntersection",value:function(m,_,k,j){var ie=xe.intersects(m,_,k),de=xe.intersects(m,_,j),Te=xe.intersects(k,j,m),Pe=xe.intersects(k,j,_);return ie&&de?(this._intPt[0]=k,this._intPt[1]=j,Gn.COLLINEAR_INTERSECTION):Te&&Pe?(this._intPt[0]=m,this._intPt[1]=_,Gn.COLLINEAR_INTERSECTION):ie&&Te?(this._intPt[0]=k,this._intPt[1]=m,!k.equals(m)||de||Pe?Gn.COLLINEAR_INTERSECTION:Gn.POINT_INTERSECTION):ie&&Pe?(this._intPt[0]=k,this._intPt[1]=_,!k.equals(_)||de||Te?Gn.COLLINEAR_INTERSECTION:Gn.POINT_INTERSECTION):de&&Te?(this._intPt[0]=j,this._intPt[1]=m,!j.equals(m)||ie||Pe?Gn.COLLINEAR_INTERSECTION:Gn.POINT_INTERSECTION):de&&Pe?(this._intPt[0]=j,this._intPt[1]=_,!j.equals(_)||ie||Te?Gn.COLLINEAR_INTERSECTION:Gn.POINT_INTERSECTION):Gn.NO_INTERSECTION}},{key:"computeIntersect",value:function(m,_,k,j){if(this._isProper=!1,!xe.intersects(m,_,k,j))return Gn.NO_INTERSECTION;var ie=Ke.index(m,_,k),de=Ke.index(m,_,j);if(ie>0&&de>0||ie<0&&de<0)return Gn.NO_INTERSECTION;var Te=Ke.index(k,j,m),Pe=Ke.index(k,j,_);return Te>0&&Pe>0||Te<0&&Pe<0?Gn.NO_INTERSECTION:ie===0&&de===0&&Te===0&&Pe===0?this.computeCollinearIntersection(m,_,k,j):(ie===0||de===0||Te===0||Pe===0?(this._isProper=!1,m.equals2D(k)||m.equals2D(j)?this._intPt[0]=m:_.equals2D(k)||_.equals2D(j)?this._intPt[0]=_:ie===0?this._intPt[0]=new le(k):de===0?this._intPt[0]=new le(j):Te===0?this._intPt[0]=new le(m):Pe===0&&(this._intPt[0]=new le(_))):(this._isProper=!0,this._intPt[0]=this.intersection(m,_,k,j)),Gn.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(m,_,k,j){var ie=m,de=Wt.pointToSegment(m,k,j),Te=Wt.pointToSegment(_,k,j);return Te<de&&(de=Te,ie=_),(Te=Wt.pointToSegment(k,m,_))<de&&(de=Te,ie=k),(Te=Wt.pointToSegment(j,m,_))<de&&(de=Te,ie=j),ie}}])}(Gn),Io=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"countSegment",value:function(g,m){if(g.x<this._p.x&&m.x<this._p.x)return null;if(this._p.x===m.x&&this._p.y===m.y)return this._isPointOnSegment=!0,null;if(g.y===this._p.y&&m.y===this._p.y){var _=g.x,k=m.x;return _>k&&(_=m.x,k=g.x),this._p.x>=_&&this._p.x<=k&&(this._isPointOnSegment=!0),null}if(g.y>this._p.y&&m.y<=this._p.y||m.y>this._p.y&&g.y<=this._p.y){var j=Ke.index(g,m,this._p);if(j===Ke.COLLINEAR)return this._isPointOnSegment=!0,null;m.y<g.y&&(j=-j),j===Ke.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==Y.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?Y.BOUNDARY:this._crossingCount%2==1?Y.INTERIOR:Y.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var g=arguments[0];this._p=g}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof le&&pe(arguments[1],Ye)){for(var g=arguments[1],m=new E(arguments[0]),_=new le,k=new le,j=1;j<g.size();j++)if(g.getCoordinate(j,_),g.getCoordinate(j-1,k),m.countSegment(_,k),m.isOnSegment())return m.getLocation();return m.getLocation()}if(arguments[0]instanceof le&&arguments[1]instanceof Array){for(var ie=arguments[1],de=new E(arguments[0]),Te=1;Te<ie.length;Te++){var Pe=ie[Te],nt=ie[Te-1];if(de.countSegment(Pe,nt),de.isOnSegment())return de.getLocation()}return de.getLocation()}}}])}(),Qi=function(){function E(){i(this,E)}return o(E,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof le&&pe(arguments[1],Ye)){for(var g=arguments[0],m=arguments[1],_=new Yi,k=new le,j=new le,ie=m.size(),de=1;de<ie;de++)if(m.getCoordinate(de-1,k),m.getCoordinate(de,j),_.computeIntersection(g,k,j),_.hasIntersection())return!0;return!1}if(arguments[0]instanceof le&&arguments[1]instanceof Array){for(var Te=arguments[0],Pe=arguments[1],nt=new Yi,ht=1;ht<Pe.length;ht++){var Ft=Pe[ht-1],Zt=Pe[ht];if(nt.computeIntersection(Te,Ft,Zt),nt.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(g,m){return Io.locatePointInRing(g,m)}},{key:"isInRing",value:function(g,m){return E.locateInRing(g,m)!==Y.EXTERIOR}}])}(),cs=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"setAllLocations",value:function(g){for(var m=0;m<this.location.length;m++)this.location[m]=g}},{key:"isNull",value:function(){for(var g=0;g<this.location.length;g++)if(this.location[g]!==Y.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(g){for(var m=0;m<this.location.length;m++)this.location[m]===Y.NONE&&(this.location[m]=g)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(g){if(g.location.length>this.location.length){var m=new Array(3).fill(null);m[ae.ON]=this.location[ae.ON],m[ae.LEFT]=Y.NONE,m[ae.RIGHT]=Y.NONE,this.location=m}for(var _=0;_<this.location.length;_++)this.location[_]===Y.NONE&&_<g.location.length&&(this.location[_]=g.location[_])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var g=this.location[ae.LEFT];this.location[ae.LEFT]=this.location[ae.RIGHT],this.location[ae.RIGHT]=g}},{key:"toString",value:function(){var g=new Fe;return this.location.length>1&&g.append(Y.toLocationSymbol(this.location[ae.LEFT])),g.append(Y.toLocationSymbol(this.location[ae.ON])),this.location.length>1&&g.append(Y.toLocationSymbol(this.location[ae.RIGHT])),g.toString()}},{key:"setLocations",value:function(g,m,_){this.location[ae.ON]=g,this.location[ae.LEFT]=m,this.location[ae.RIGHT]=_}},{key:"get",value:function(g){return g<this.location.length?this.location[g]:Y.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var g=0;g<this.location.length;g++)if(this.location[g]===Y.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var g=arguments[0];this.setLocation(ae.ON,g)}else if(arguments.length===2){var m=arguments[0],_=arguments[1];this.location[m]=_}}},{key:"init",value:function(g){this.location=new Array(g).fill(null),this.setAllLocations(Y.NONE)}},{key:"isEqualOnSide",value:function(g,m){return this.location[m]===g.location[m]}},{key:"allPositionsEqual",value:function(g){for(var m=0;m<this.location.length;m++)if(this.location[m]!==g)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var g=arguments[0];this.init(g.length)}else if(Number.isInteger(arguments[0])){var m=arguments[0];this.init(1),this.location[ae.ON]=m}else if(arguments[0]instanceof E){var _=arguments[0];if(this.init(_.location.length),_!==null)for(var k=0;k<this.location.length;k++)this.location[k]=_.location[k]}}else if(arguments.length===3){var j=arguments[0],ie=arguments[1],de=arguments[2];this.init(3),this.location[ae.ON]=j,this.location[ae.LEFT]=ie,this.location[ae.RIGHT]=de}}}])}(),lr=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"getGeometryCount",value:function(){var g=0;return this.elt[0].isNull()||g++,this.elt[1].isNull()||g++,g}},{key:"setAllLocations",value:function(g,m){this.elt[g].setAllLocations(m)}},{key:"isNull",value:function(g){return this.elt[g].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var g=arguments[0];this.setAllLocationsIfNull(0,g),this.setAllLocationsIfNull(1,g)}else if(arguments.length===2){var m=arguments[0],_=arguments[1];this.elt[m].setAllLocationsIfNull(_)}}},{key:"isLine",value:function(g){return this.elt[g].isLine()}},{key:"merge",value:function(g){for(var m=0;m<2;m++)this.elt[m]===null&&g.elt[m]!==null?this.elt[m]=new cs(g.elt[m]):this.elt[m].merge(g.elt[m])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var g=arguments[0];return this.elt[g].get(ae.ON)}if(arguments.length===2){var m=arguments[0],_=arguments[1];return this.elt[m].get(_)}}},{key:"toString",value:function(){var g=new Fe;return this.elt[0]!==null&&(g.append("A:"),g.append(this.elt[0].toString())),this.elt[1]!==null&&(g.append(" B:"),g.append(this.elt[1].toString())),g.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var g=arguments[0];return this.elt[g].isArea()}}},{key:"isAnyNull",value:function(g){return this.elt[g].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var g=arguments[0],m=arguments[1];this.elt[g].setLocation(ae.ON,m)}else if(arguments.length===3){var _=arguments[0],k=arguments[1],j=arguments[2];this.elt[_].setLocation(k,j)}}},{key:"isEqualOnSide",value:function(g,m){return this.elt[0].isEqualOnSide(g.elt[0],m)&&this.elt[1].isEqualOnSide(g.elt[1],m)}},{key:"allPositionsEqual",value:function(g,m){return this.elt[g].allPositionsEqual(m)}},{key:"toLine",value:function(g){this.elt[g].isArea()&&(this.elt[g]=new cs(this.elt[g].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var g=arguments[0];this.elt[0]=new cs(g),this.elt[1]=new cs(g)}else if(arguments[0]instanceof E){var m=arguments[0];this.elt[0]=new cs(m.elt[0]),this.elt[1]=new cs(m.elt[1])}}else if(arguments.length===2){var _=arguments[0],k=arguments[1];this.elt[0]=new cs(Y.NONE),this.elt[1]=new cs(Y.NONE),this.elt[_].setLocation(k)}else if(arguments.length===3){var j=arguments[0],ie=arguments[1],de=arguments[2];this.elt[0]=new cs(j,ie,de),this.elt[1]=new cs(j,ie,de)}else if(arguments.length===4){var Te=arguments[0],Pe=arguments[1],nt=arguments[2],ht=arguments[3];this.elt[0]=new cs(Y.NONE,Y.NONE,Y.NONE),this.elt[1]=new cs(Y.NONE,Y.NONE,Y.NONE),this.elt[Te].setLocations(Pe,nt,ht)}}},{key:"toLineLabel",value:function(g){for(var m=new E(Y.NONE),_=0;_<2;_++)m.setLocation(_,g.getLocation(_));return m}}])}(),Fr=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var E=new Array(this._pts.size()).fill(null),g=0;g<this._pts.size();g++)E[g]=this._pts.get(g);this._ring=this._geometryFactory.createLinearRing(E),this._isHole=Ke.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(E){this._startDe=E;var g=E,m=!0;do{if(g===null)throw new vt("Found null DirectedEdge");if(g.getEdgeRing()===this)throw new vt("Directed Edge visited twice during ring-building at "+g.getCoordinate());this._edges.add(g);var _=g.getLabel();K.isTrue(_.isArea()),this.mergeLabel(_),this.addPoints(g.getEdge(),g.isForward(),m),m=!1,this.setEdgeRing(g,this),g=this.getNext(g)}while(g!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(E){return this._pts.get(E)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var E=this._startDe;do{var g=E.getNode().getEdges().getOutgoingDegree(this);g>this._maxNodeDegree&&(this._maxNodeDegree=g),E=this.getNext(E)}while(E!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(E,g,m){var _=E.getCoordinates();if(g){var k=1;m&&(k=0);for(var j=k;j<_.length;j++)this._pts.add(_[j])}else{var ie=_.length-2;m&&(ie=_.length-1);for(var de=ie;de>=0;de--)this._pts.add(_[de])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var E=this._startDe;do E.getEdge().setInResult(!0),E=E.getNext();while(E!==this._startDe)}},{key:"containsPoint",value:function(E){var g=this.getLinearRing();if(!g.getEnvelopeInternal().contains(E)||!Qi.isInRing(E,g.getCoordinates()))return!1;for(var m=this._holes.iterator();m.hasNext();)if(m.next().containsPoint(E))return!1;return!0}},{key:"addHole",value:function(E){this._holes.add(E)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var E=arguments[0];this.mergeLabel(E,0),this.mergeLabel(E,1)}else if(arguments.length===2){var g=arguments[1],m=arguments[0].getLocation(g,ae.RIGHT);if(m===Y.NONE)return null;if(this._label.getLocation(g)===Y.NONE)return this._label.setLocation(g,m),null}}},{key:"setShell",value:function(E){this._shell=E,E!==null&&E.addHole(this)}},{key:"toPolygon",value:function(E){for(var g=new Array(this._holes.size()).fill(null),m=0;m<this._holes.size();m++)g[m]=this._holes.get(m).getLinearRing();return E.createPolygon(this.getLinearRing(),g)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new yt,this._pts=new yt,this._label=new lr(Y.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new yt,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var E=arguments[0],g=arguments[1];this._geometryFactory=g,this.computePoints(E),this.computeRing()}}}}])}(),Ec=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"setEdgeRing",value:function(m,_){m.setMinEdgeRing(_)}},{key:"getNext",value:function(m){return m.getNextMin()}}],[{key:"constructor_",value:function(){var m=arguments[0],_=arguments[1];Fr.constructor_.call(this,m,_)}}])}(Fr),wf=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"buildMinimalRings",value:function(){var m=new yt,_=this._startDe;do{if(_.getMinEdgeRing()===null){var k=new Ec(_,this._geometryFactory);m.add(k)}_=_.getNext()}while(_!==this._startDe);return m}},{key:"setEdgeRing",value:function(m,_){m.setEdgeRing(_)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var m=this._startDe;do m.getNode().getEdges().linkMinimalDirectedEdges(this),m=m.getNext();while(m!==this._startDe)}},{key:"getNext",value:function(m){return m.getNext()}}],[{key:"constructor_",value:function(){var m=arguments[0],_=arguments[1];Fr.constructor_.call(this,m,_)}}])}(Fr),Vs=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(E){this._isVisited=E}},{key:"setInResult",value:function(E){this._isInResult=E}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(E){this._label=E}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(E){this._isCovered=E,this._isCoveredSet=!0}},{key:"updateIM",value:function(E){K.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(E)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var E=arguments[0];this._label=E}}}}])}(),Fo=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"isIncidentEdgeInResult",value:function(){for(var m=this.getEdges().getEdges().iterator();m.hasNext();)if(m.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(m){m.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(m){}},{key:"computeMergedLocation",value:function(m,_){var k=Y.NONE;if(k=this._label.getLocation(_),!m.isNull(_)){var j=m.getLocation(_);k!==Y.BOUNDARY&&(k=j)}return k}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return d(g,"setLabel",this,1).apply(this,arguments);var m=arguments[0],_=arguments[1];this._label===null?this._label=new lr(m,_):this._label.setLocation(m,_)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof g){var m=arguments[0];this.mergeLabel(m._label)}else if(arguments[0]instanceof lr)for(var _=arguments[0],k=0;k<2;k++){var j=this.computeMergedLocation(_,k);this._label.getLocation(k)===Y.NONE&&this._label.setLocation(k,j)}}},{key:"add",value:function(m){this._edges.insert(m),m.setNode(this)}},{key:"setLabelBoundary",value:function(m){if(this._label===null)return null;var _=Y.NONE;this._label!==null&&(_=this._label.getLocation(m));var k=null;switch(_){case Y.BOUNDARY:k=Y.INTERIOR;break;case Y.INTERIOR:default:k=Y.BOUNDARY}this._label.setLocation(m,k)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var m=arguments[0],_=arguments[1];this._coord=m,this._edges=_,this._label=new lr(0,Y.NONE)}}])}(Vs),Mo=function(E){function g(){return i(this,g),n(this,g,arguments)}return h(g,E),o(g)}(Vn);function Lo(E){return E==null?0:E.color}function yn(E){return E==null?null:E.parent}function q(E,g){E!==null&&(E.color=g)}function ee(E){return E==null?null:E.left}function ve(E){return E==null?null:E.right}var Ne=function(E){function g(){var m;return i(this,g),(m=n(this,g)).root_=null,m.size_=0,m}return h(g,E),o(g,[{key:"get",value:function(m){for(var _=this.root_;_!==null;){var k=m.compareTo(_.key);if(k<0)_=_.left;else{if(!(k>0))return _.value;_=_.right}}return null}},{key:"put",value:function(m,_){if(this.root_===null)return this.root_={key:m,value:_,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var k,j,ie=this.root_;do if(k=ie,(j=m.compareTo(ie.key))<0)ie=ie.left;else{if(!(j>0)){var de=ie.value;return ie.value=_,de}ie=ie.right}while(ie!==null);var Te={key:m,left:null,right:null,value:_,parent:k,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return j<0?k.left=Te:k.right=Te,this.fixAfterInsertion(Te),this.size_++,null}},{key:"fixAfterInsertion",value:function(m){var _;for(m.color=1;m!=null&&m!==this.root_&&m.parent.color===1;)yn(m)===ee(yn(yn(m)))?Lo(_=ve(yn(yn(m))))===1?(q(yn(m),0),q(_,0),q(yn(yn(m)),1),m=yn(yn(m))):(m===ve(yn(m))&&(m=yn(m),this.rotateLeft(m)),q(yn(m),0),q(yn(yn(m)),1),this.rotateRight(yn(yn(m)))):Lo(_=ee(yn(yn(m))))===1?(q(yn(m),0),q(_,0),q(yn(yn(m)),1),m=yn(yn(m))):(m===ee(yn(m))&&(m=yn(m),this.rotateRight(m)),q(yn(m),0),q(yn(yn(m)),1),this.rotateLeft(yn(yn(m))));this.root_.color=0}},{key:"values",value:function(){var m=new yt,_=this.getFirstEntry();if(_!==null)for(m.add(_.value);(_=g.successor(_))!==null;)m.add(_.value);return m}},{key:"entrySet",value:function(){var m=new he,_=this.getFirstEntry();if(_!==null)for(m.add(_);(_=g.successor(_))!==null;)m.add(_);return m}},{key:"rotateLeft",value:function(m){if(m!=null){var _=m.right;m.right=_.left,_.left!=null&&(_.left.parent=m),_.parent=m.parent,m.parent==null?this.root_=_:m.parent.left===m?m.parent.left=_:m.parent.right=_,_.left=m,m.parent=_}}},{key:"rotateRight",value:function(m){if(m!=null){var _=m.left;m.left=_.right,_.right!=null&&(_.right.parent=m),_.parent=m.parent,m.parent==null?this.root_=_:m.parent.right===m?m.parent.right=_:m.parent.left=_,_.right=m,m.parent=_}}},{key:"getFirstEntry",value:function(){var m=this.root_;if(m!=null)for(;m.left!=null;)m=m.left;return m}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(m){for(var _=this.root_;_!==null;){var k=m.compareTo(_.key);if(k<0)_=_.left;else{if(!(k>0))return!0;_=_.right}}return!1}}],[{key:"successor",value:function(m){var _;if(m===null)return null;if(m.right!==null){for(_=m.right;_.left!==null;)_=_.left;return _}_=m.parent;for(var k=m;_!==null&&k===_.right;)k=_,_=_.parent;return _}}])}(Mo),We=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"find",value:function(E){return this.nodeMap.get(E)}},{key:"addNode",value:function(){if(arguments[0]instanceof le){var E=arguments[0],g=this.nodeMap.get(E);return g===null&&(g=this.nodeFact.createNode(E),this.nodeMap.put(E,g)),g}if(arguments[0]instanceof Fo){var m=arguments[0],_=this.nodeMap.get(m.getCoordinate());return _===null?(this.nodeMap.put(m.getCoordinate(),m),m):(_.mergeLabel(m),_)}}},{key:"print",value:function(E){for(var g=this.iterator();g.hasNext();)g.next().print(E)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(E){for(var g=new yt,m=this.iterator();m.hasNext();){var _=m.next();_.getLabel().getLocation(E)===Y.BOUNDARY&&g.add(_)}return g}},{key:"add",value:function(E){var g=E.getCoordinate();this.addNode(g).add(E)}}],[{key:"constructor_",value:function(){this.nodeMap=new Ne,this.nodeFact=null;var E=arguments[0];this.nodeFact=E}}])}(),at=function(){function E(){i(this,E)}return o(E,null,[{key:"isNorthern",value:function(g){return g===E.NE||g===E.NW}},{key:"isOpposite",value:function(g,m){return g!==m&&(g-m+4)%4===2}},{key:"commonHalfPlane",value:function(g,m){if(g===m)return g;if((g-m+4)%4===2)return-1;var _=g<m?g:m;return _===0&&(g>m?g:m)===3?3:_}},{key:"isInHalfPlane",value:function(g,m){return m===E.SE?g===E.SE||g===E.SW:g===m||g===m+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var g=arguments[0],m=arguments[1];if(g===0&&m===0)throw new C("Cannot compute the quadrant for point ( "+g+", "+m+" )");return g>=0?m>=0?E.NE:E.SE:m>=0?E.NW:E.SW}if(arguments[0]instanceof le&&arguments[1]instanceof le){var _=arguments[0],k=arguments[1];if(k.x===_.x&&k.y===_.y)throw new C("Cannot compute the quadrant for two identical points "+_);return k.x>=_.x?k.y>=_.y?E.NE:E.SE:k.y>=_.y?E.NW:E.SW}}}])}();at.NE=0,at.NW=1,at.SW=2,at.SE=3;var Bt=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"compareDirection",value:function(g){return this._dx===g._dx&&this._dy===g._dy?0:this._quadrant>g._quadrant?1:this._quadrant<g._quadrant?-1:Ke.index(g._p0,g._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(g){this._node=g}},{key:"print",value:function(g){var m=Math.atan2(this._dy,this._dx),_=this.getClass().getName(),k=_.lastIndexOf("."),j=_.substring(k+1);g.print("  "+j+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+m+"   "+this._label)}},{key:"compareTo",value:function(g){var m=g;return this.compareDirection(m)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var g=Math.atan2(this._dy,this._dx),m=this.getClass().getName(),_=m.lastIndexOf(".");return"  "+m.substring(_+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+g+"   "+this._label}},{key:"computeLabel",value:function(g){}},{key:"init",value:function(g,m){this._p0=g,this._p1=m,this._dx=m.x-g.x,this._dy=m.y-g.y,this._quadrant=at.quadrant(this._dx,this._dy),K.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[I]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var g=arguments[0];this._edge=g}else if(arguments.length===3){var m=arguments[0],_=arguments[1],k=arguments[2];E.constructor_.call(this,m,_,k,null)}else if(arguments.length===4){var j=arguments[0],ie=arguments[1],de=arguments[2],Te=arguments[3];E.constructor_.call(this,j),this.init(ie,de),this._label=Te}}}])}(),mr=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(m){return this._depth[m]}},{key:"setVisited",value:function(m){this._isVisited=m}},{key:"computeDirectedLabel",value:function(){this._label=new lr(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(m,_){if(this._depth[m]!==-999&&this._depth[m]!==_)throw new vt("assigned depths do not match",this.getCoordinate());this._depth[m]=_}},{key:"isInteriorAreaEdge",value:function(){for(var m=!0,_=0;_<2;_++)this._label.isArea(_)&&this._label.getLocation(_,ae.LEFT)===Y.INTERIOR&&this._label.getLocation(_,ae.RIGHT)===Y.INTERIOR||(m=!1);return m}},{key:"setNextMin",value:function(m){this._nextMin=m}},{key:"print",value:function(m){d(g,"print",this,1).call(this,m),m.print(" "+this._depth[ae.LEFT]+"/"+this._depth[ae.RIGHT]),m.print(" ("+this.getDepthDelta()+")"),this._isInResult&&m.print(" inResult")}},{key:"setMinEdgeRing",value:function(m){this._minEdgeRing=m}},{key:"isLineEdge",value:function(){var m=this._label.isLine(0)||this._label.isLine(1),_=!this._label.isArea(0)||this._label.allPositionsEqual(0,Y.EXTERIOR),k=!this._label.isArea(1)||this._label.allPositionsEqual(1,Y.EXTERIOR);return m&&_&&k}},{key:"setEdgeRing",value:function(m){this._edgeRing=m}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var m=this._edge.getDepthDelta();return this._isForward||(m=-m),m}},{key:"setInResult",value:function(m){this._isInResult=m}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(m){this.print(m),m.print(" "),this._isForward?this._edge.print(m):this._edge.printReverse(m)}},{key:"setSym",value:function(m){this._sym=m}},{key:"setVisitedEdge",value:function(m){this.setVisited(m),this._sym.setVisited(m)}},{key:"setEdgeDepths",value:function(m,_){var k=this.getEdge().getDepthDelta();this._isForward||(k=-k);var j=1;m===ae.LEFT&&(j=-1);var ie=ae.opposite(m),de=_+k*j;this.setDepth(m,_),this.setDepth(ie,de)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(m){this._next=m}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var m=arguments[0],_=arguments[1];if(Bt.constructor_.call(this,m),this._isForward=_,_)this.init(m.getCoordinate(0),m.getCoordinate(1));else{var k=m.getNumPoints()-1;this.init(m.getCoordinate(k),m.getCoordinate(k-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(m,_){return m===Y.EXTERIOR&&_===Y.INTERIOR?1:m===Y.INTERIOR&&_===Y.EXTERIOR?-1:0}}])}(Bt),Wr=function(){return o(function E(){i(this,E)},[{key:"createNode",value:function(E){return new Fo(E,null)}}])}(),Ur=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(E){E.println("Edges:");for(var g=0;g<this._edges.size();g++){E.println("edge "+g+":");var m=this._edges.get(g);m.print(E),m.eiList.print(E)}}},{key:"find",value:function(E){return this._nodes.find(E)}},{key:"addNode",value:function(){if(arguments[0]instanceof Fo){var E=arguments[0];return this._nodes.addNode(E)}if(arguments[0]instanceof le){var g=arguments[0];return this._nodes.addNode(g)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var E=this._nodes.iterator();E.hasNext();)E.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(E){st.out.println(E)}},{key:"isBoundaryNode",value:function(E,g){var m=this._nodes.find(g);if(m===null)return!1;var _=m.getLabel();return _!==null&&_.getLocation(E)===Y.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var E=this._nodes.iterator();E.hasNext();)E.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(E,g,m,_){return!!E.equals(m)&&Ke.index(E,g,_)===Ke.COLLINEAR&&at.quadrant(E,g)===at.quadrant(m,_)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(E){st.out.print(E)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(E,g){for(var m=0;m<this._edges.size();m++){var _=this._edges.get(m),k=_.getCoordinates();if(this.matchInSameDirection(E,g,k[0],k[1])||this.matchInSameDirection(E,g,k[k.length-1],k[k.length-2]))return _}return null}},{key:"insertEdge",value:function(E){this._edges.add(E)}},{key:"findEdgeEnd",value:function(E){for(var g=this.getEdgeEnds().iterator();g.hasNext();){var m=g.next();if(m.getEdge()===E)return m}return null}},{key:"addEdges",value:function(E){for(var g=E.iterator();g.hasNext();){var m=g.next();this._edges.add(m);var _=new mr(m,!0),k=new mr(m,!1);_.setSym(k),k.setSym(_),this.add(_),this.add(k)}}},{key:"add",value:function(E){this._nodes.add(E),this._edgeEndList.add(E)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(E,g){for(var m=0;m<this._edges.size();m++){var _=this._edges.get(m),k=_.getCoordinates();if(E.equals(k[0])&&g.equals(k[1]))return _}return null}}],[{key:"constructor_",value:function(){if(this._edges=new yt,this._nodes=null,this._edgeEndList=new yt,arguments.length===0)this._nodes=new We(new Wr);else if(arguments.length===1){var E=arguments[0];this._nodes=new We(E)}}},{key:"linkResultDirectedEdges",value:function(E){for(var g=E.iterator();g.hasNext();)g.next().getEdges().linkResultDirectedEdges()}}])}(),xi=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"sortShellsAndHoles",value:function(g,m,_){for(var k=g.iterator();k.hasNext();){var j=k.next();j.isHole()?_.add(j):m.add(j)}}},{key:"computePolygons",value:function(g){for(var m=new yt,_=g.iterator();_.hasNext();){var k=_.next().toPolygon(this._geometryFactory);m.add(k)}return m}},{key:"placeFreeHoles",value:function(g,m){for(var _=m.iterator();_.hasNext();){var k=_.next();if(k.getShell()===null){var j=E.findEdgeRingContaining(k,g);if(j===null)throw new vt("unable to assign hole to a shell",k.getCoordinate(0));k.setShell(j)}}}},{key:"buildMinimalEdgeRings",value:function(g,m,_){for(var k=new yt,j=g.iterator();j.hasNext();){var ie=j.next();if(ie.getMaxNodeDegree()>2){ie.linkDirectedEdgesForMinimalEdgeRings();var de=ie.buildMinimalRings(),Te=this.findShell(de);Te!==null?(this.placePolygonHoles(Te,de),m.add(Te)):_.addAll(de)}else k.add(ie)}return k}},{key:"buildMaximalEdgeRings",value:function(g){for(var m=new yt,_=g.iterator();_.hasNext();){var k=_.next();if(k.isInResult()&&k.getLabel().isArea()&&k.getEdgeRing()===null){var j=new wf(k,this._geometryFactory);m.add(j),j.setInResult()}}return m}},{key:"placePolygonHoles",value:function(g,m){for(var _=m.iterator();_.hasNext();){var k=_.next();k.isHole()&&k.setShell(g)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(g){for(var m=0,_=null,k=g.iterator();k.hasNext();){var j=k.next();j.isHole()||(_=j,m++)}return K.isTrue(m<=1,"found two shells in MinimalEdgeRing list"),_}},{key:"add",value:function(){if(arguments.length===1){var g=arguments[0];this.add(g.getEdgeEnds(),g.getNodes())}else if(arguments.length===2){var m=arguments[0],_=arguments[1];Ur.linkResultDirectedEdges(_);var k=this.buildMaximalEdgeRings(m),j=new yt,ie=this.buildMinimalEdgeRings(k,this._shellList,j);this.sortShellsAndHoles(ie,this._shellList,j),this.placeFreeHoles(this._shellList,j)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new yt;var g=arguments[0];this._geometryFactory=g}},{key:"findEdgeRingContaining",value:function(g,m){for(var _=g.getLinearRing(),k=_.getEnvelopeInternal(),j=_.getCoordinateN(0),ie=null,de=null,Te=m.iterator();Te.hasNext();){var Pe=Te.next(),nt=Pe.getLinearRing(),ht=nt.getEnvelopeInternal();if(!ht.equals(k)&&ht.contains(k)){j=It.ptNotInList(_.getCoordinates(),nt.getCoordinates());var Ft=!1;Qi.isInRing(j,nt.getCoordinates())&&(Ft=!0),Ft&&(ie===null||de.contains(ht))&&(de=(ie=Pe).getLinearRing().getEnvelopeInternal())}}return ie}}])}(),la=function(){return o(function E(){i(this,E)},[{key:"getBounds",value:function(){}}])}(),Ns=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[la,T]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var E=arguments[0],g=arguments[1];this._bounds=E,this._item=g}}])}(),Lu=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var E=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),E}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(E){for(var g=null,m=this._items.get(E);2*E<=this._size&&((g=2*E)!==this._size&&this._items.get(g+1).compareTo(this._items.get(g))<0&&g++,this._items.get(g).compareTo(m)<0);E=g)this._items.set(E,this._items.get(g));this._items.set(E,m)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(E){this._items.add(null),this._size+=1;var g=this._size;for(this._items.set(0,E);E.compareTo(this._items.get(Math.trunc(g/2)))<0;g/=2)this._items.set(g,this._items.get(Math.trunc(g/2)));this._items.set(g,E)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new yt,this._items.add(null)}}])}(),Do=function(){return o(function E(){i(this,E)},[{key:"insert",value:function(E,g){}},{key:"remove",value:function(E,g){}},{key:"query",value:function(){}}])}(),Xi=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(E){K.isTrue(this._bounds===null),this._childBoundables.add(E)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[la,T]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new yt,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var E=arguments[0];this._level=E}}}}])}(),Tl={reverseOrder:function(){return{compare:function(E,g){return g.compareTo(E)}}},min:function(E){return Tl.sort(E),E.get(0)},sort:function(E,g){var m=E.toArray();g?Pr.sort(m,g):Pr.sort(m);for(var _=E.iterator(),k=0,j=m.length;k<j;k++)_.next(),_.set(m[k])},singletonList:function(E){var g=new yt;return g.add(E),g}},Xl=function(){function E(){i(this,E)}return o(E,null,[{key:"maxDistance",value:function(g,m,_,k,j,ie,de,Te){var Pe=E.distance(g,m,j,ie);return Pe=Math.max(Pe,E.distance(g,m,de,Te)),Pe=Math.max(Pe,E.distance(_,k,j,ie)),Pe=Math.max(Pe,E.distance(_,k,de,Te))}},{key:"distance",value:function(g,m,_,k){var j=_-g,ie=k-m;return Math.sqrt(j*j+ie*ie)}},{key:"maximumDistance",value:function(g,m){var _=Math.min(g.getMinX(),m.getMinX()),k=Math.min(g.getMinY(),m.getMinY()),j=Math.max(g.getMaxX(),m.getMaxX()),ie=Math.max(g.getMaxY(),m.getMaxY());return E.distance(_,k,j,ie)}},{key:"minMaxDistance",value:function(g,m){var _=g.getMinX(),k=g.getMinY(),j=g.getMaxX(),ie=g.getMaxY(),de=m.getMinX(),Te=m.getMinY(),Pe=m.getMaxX(),nt=m.getMaxY(),ht=E.maxDistance(_,k,_,ie,de,Te,de,nt);return ht=Math.min(ht,E.maxDistance(_,k,_,ie,de,Te,Pe,Te)),ht=Math.min(ht,E.maxDistance(_,k,_,ie,Pe,nt,de,nt)),ht=Math.min(ht,E.maxDistance(_,k,_,ie,Pe,nt,Pe,Te)),ht=Math.min(ht,E.maxDistance(_,k,j,k,de,Te,de,nt)),ht=Math.min(ht,E.maxDistance(_,k,j,k,de,Te,Pe,Te)),ht=Math.min(ht,E.maxDistance(_,k,j,k,Pe,nt,de,nt)),ht=Math.min(ht,E.maxDistance(_,k,j,k,Pe,nt,Pe,Te)),ht=Math.min(ht,E.maxDistance(j,ie,_,ie,de,Te,de,nt)),ht=Math.min(ht,E.maxDistance(j,ie,_,ie,de,Te,Pe,Te)),ht=Math.min(ht,E.maxDistance(j,ie,_,ie,Pe,nt,de,nt)),ht=Math.min(ht,E.maxDistance(j,ie,_,ie,Pe,nt,Pe,Te)),ht=Math.min(ht,E.maxDistance(j,ie,j,k,de,Te,de,nt)),ht=Math.min(ht,E.maxDistance(j,ie,j,k,de,Te,Pe,Te)),ht=Math.min(ht,E.maxDistance(j,ie,j,k,Pe,nt,de,nt)),ht=Math.min(ht,E.maxDistance(j,ie,j,k,Pe,nt,Pe,Te))}}])}(),Ma=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"maximumDistance",value:function(){return Xl.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(g,m){var _=E.isComposite(this._boundable1),k=E.isComposite(this._boundable2);if(_&&k)return E.area(this._boundable1)>E.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,g,m),null):(this.expand(this._boundable2,this._boundable1,!0,g,m),null);if(_)return this.expand(this._boundable1,this._boundable2,!1,g,m),null;if(k)return this.expand(this._boundable2,this._boundable1,!0,g,m),null;throw new C("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(E.isComposite(this._boundable1)||E.isComposite(this._boundable2))}},{key:"compareTo",value:function(g){var m=g;return this._distance<m._distance?-1:this._distance>m._distance?1:0}},{key:"expand",value:function(g,m,_,k,j){for(var ie=g.getChildBoundables().iterator();ie.hasNext();){var de=ie.next(),Te=null;(Te=_?new E(m,de,this._itemDistance):new E(de,m,this._itemDistance)).getDistance()<j&&k.add(Te)}}},{key:"getBoundable",value:function(g){return g===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[I]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var g=arguments[0],m=arguments[1],_=arguments[2];this._boundable1=g,this._boundable2=m,this._itemDistance=_,this._distance=this.distance()}},{key:"area",value:function(g){return g.getBounds().getArea()}},{key:"isComposite",value:function(g){return g instanceof Xi}}])}(),bc=function(){return o(function E(){i(this,E)},[{key:"visitItem",value:function(E){}}])}(),Ws=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"queryInternal",value:function(){if(pe(arguments[2],bc)&&arguments[0]instanceof Object&&arguments[1]instanceof Xi)for(var g=arguments[0],m=arguments[2],_=arguments[1].getChildBoundables(),k=0;k<_.size();k++){var j=_.get(k);this.getIntersectsOp().intersects(j.getBounds(),g)&&(j instanceof Xi?this.queryInternal(g,j,m):j instanceof Ns?m.visitItem(j.getItem()):K.shouldNeverReachHere())}else if(pe(arguments[2],be)&&arguments[0]instanceof Object&&arguments[1]instanceof Xi)for(var ie=arguments[0],de=arguments[2],Te=arguments[1].getChildBoundables(),Pe=0;Pe<Te.size();Pe++){var nt=Te.get(Pe);this.getIntersectsOp().intersects(nt.getBounds(),ie)&&(nt instanceof Xi?this.queryInternal(ie,nt,de):nt instanceof Ns?de.add(nt.getItem()):K.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(g){return g.get(g.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var g=0,m=arguments[0].getChildBoundables().iterator();m.hasNext();){var _=m.next();_ instanceof Xi?g+=this.size(_):_ instanceof Ns&&(g+=1)}return g}}},{key:"removeItem",value:function(g,m){for(var _=null,k=g.getChildBoundables().iterator();k.hasNext();){var j=k.next();j instanceof Ns&&j.getItem()===m&&(_=j)}return _!==null&&(g.getChildBoundables().remove(_),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var g=this.itemsTree(this._root);return g===null?new yt:g}if(arguments.length===1){for(var m=arguments[0],_=new yt,k=m.getChildBoundables().iterator();k.hasNext();){var j=k.next();if(j instanceof Xi){var ie=this.itemsTree(j);ie!==null&&_.add(ie)}else j instanceof Ns?_.add(j.getItem()):K.shouldNeverReachHere()}return _.size()<=0?null:_}}},{key:"insert",value:function(g,m){K.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Ns(g,m))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var g=arguments[0],m=new yt;return this.boundablesAtLevel(g,this._root,m),m}if(arguments.length===3){var _=arguments[0],k=arguments[1],j=arguments[2];if(K.isTrue(_>-2),k.getLevel()===_)return j.add(k),null;for(var ie=k.getChildBoundables().iterator();ie.hasNext();){var de=ie.next();de instanceof Xi?this.boundablesAtLevel(_,de,j):(K.isTrue(de instanceof Ns),_===-1&&j.add(de))}return null}}},{key:"query",value:function(){if(arguments.length===1){var g=arguments[0];this.build();var m=new yt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),g)&&this.queryInternal(g,this._root,m),m}if(arguments.length===2){var _=arguments[0],k=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),_)&&this.queryInternal(_,this._root,k)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var g=arguments[0],m=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),g)&&this.remove(g,this._root,m)}if(arguments.length===3){var _=arguments[0],k=arguments[1],j=arguments[2],ie=this.removeItem(k,j);if(ie)return!0;for(var de=null,Te=k.getChildBoundables().iterator();Te.hasNext();){var Pe=Te.next();if(this.getIntersectsOp().intersects(Pe.getBounds(),_)&&Pe instanceof Xi&&(ie=this.remove(_,Pe,j))){de=Pe;break}}return de!==null&&de.getChildBoundables().isEmpty()&&k.getChildBoundables().remove(de),ie}}},{key:"createHigherLevels",value:function(g,m){K.isTrue(!g.isEmpty());var _=this.createParentBoundables(g,m+1);return _.size()===1?_.get(0):this.createHigherLevels(_,m+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var g=0,m=arguments[0].getChildBoundables().iterator();m.hasNext();){var _=m.next();if(_ instanceof Xi){var k=this.depth(_);k>g&&(g=k)}}return g+1}}},{key:"createParentBoundables",value:function(g,m){K.isTrue(!g.isEmpty());var _=new yt;_.add(this.createNode(m));var k=new yt(g);Tl.sort(k,this.getComparator());for(var j=k.iterator();j.hasNext();){var ie=j.next();this.lastNode(_).getChildBoundables().size()===this.getNodeCapacity()&&_.add(this.createNode(m)),this.lastNode(_).addChildBoundable(ie)}return _}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[T]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new yt,this._nodeCapacity=null,arguments.length===0)E.constructor_.call(this,E.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var g=arguments[0];K.isTrue(g>1,"Node capacity must be greater than 1"),this._nodeCapacity=g}}},{key:"compareDoubles",value:function(g,m){return g>m?1:g<m?-1:0}}])}();Ws.IntersectsOp=function(){},Ws.DEFAULT_NODE_CAPACITY=10;var ed=function(){return o(function E(){i(this,E)},[{key:"distance",value:function(E,g){}}])}(),Va=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"createParentBoundablesFromVerticalSlices",value:function(m,_){K.isTrue(m.length>0);for(var k=new yt,j=0;j<m.length;j++)k.addAll(this.createParentBoundablesFromVerticalSlice(m[j],_));return k}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var m=arguments[0],_=arguments[1];return this.nearestNeighbourK(m,re.POSITIVE_INFINITY,_)}if(arguments.length===3){var k=arguments[0],j=arguments[2],ie=arguments[1],de=new Lu;de.add(k);for(var Te=new Lu;!de.isEmpty()&&ie>=0;){var Pe=de.poll(),nt=Pe.getDistance();if(nt>=ie)break;Pe.isLeaves()?Te.size()<j?Te.add(Pe):(Te.peek().getDistance()>nt&&(Te.poll(),Te.add(Pe)),ie=Te.peek().getDistance()):Pe.expandToQueue(de,ie)}return g.getItems(Te)}}},{key:"createNode",value:function(m){return new _f(m)}},{key:"size",value:function(){return arguments.length===0?d(g,"size",this,1).call(this):d(g,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof xe))return d(g,"insert",this,1).apply(this,arguments);var m=arguments[0],_=arguments[1];if(m.isNull())return null;d(g,"insert",this,1).call(this,m,_)}},{key:"getIntersectsOp",value:function(){return g.intersectsOp}},{key:"verticalSlices",value:function(m,_){for(var k=Math.trunc(Math.ceil(m.size()/_)),j=new Array(_).fill(null),ie=m.iterator(),de=0;de<_;de++){j[de]=new yt;for(var Te=0;ie.hasNext()&&Te<k;){var Pe=ie.next();j[de].add(Pe),Te++}}return j}},{key:"query",value:function(){if(arguments.length===1){var m=arguments[0];return d(g,"query",this,1).call(this,m)}if(arguments.length===2){var _=arguments[0],k=arguments[1];d(g,"query",this,1).call(this,_,k)}}},{key:"getComparator",value:function(){return g.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(m,_){return d(g,"createParentBoundables",this,1).call(this,m,_)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof xe){var m=arguments[0],_=arguments[1];return d(g,"remove",this,1).call(this,m,_)}return d(g,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?d(g,"depth",this,1).call(this):d(g,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(m,_){K.isTrue(!m.isEmpty());var k=Math.trunc(Math.ceil(m.size()/this.getNodeCapacity())),j=new yt(m);Tl.sort(j,g.xComparator);var ie=this.verticalSlices(j,Math.trunc(Math.ceil(Math.sqrt(k))));return this.createParentBoundablesFromVerticalSlices(ie,_)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(pe(arguments[0],ed)){var m=arguments[0];if(this.isEmpty())return null;var _=new Ma(this.getRoot(),this.getRoot(),m);return this.nearestNeighbour(_)}if(arguments[0]instanceof Ma){var k=arguments[0],j=re.POSITIVE_INFINITY,ie=null,de=new Lu;for(de.add(k);!de.isEmpty()&&j>0;){var Te=de.poll(),Pe=Te.getDistance();if(Pe>=j)break;Te.isLeaves()?(j=Pe,ie=Te):Te.expandToQueue(de,j)}return ie===null?null:[ie.getBoundable(0).getItem(),ie.getBoundable(1).getItem()]}}else{if(arguments.length===2){var nt=arguments[0],ht=arguments[1];if(this.isEmpty()||nt.isEmpty())return null;var Ft=new Ma(this.getRoot(),nt.getRoot(),ht);return this.nearestNeighbour(Ft)}if(arguments.length===3){var Zt=arguments[2],dr=new Ns(arguments[0],arguments[1]),Er=new Ma(this.getRoot(),dr,Zt);return this.nearestNeighbour(Er)[0]}if(arguments.length===4){var ln=arguments[2],xn=arguments[3],Sn=new Ns(arguments[0],arguments[1]),ci=new Ma(this.getRoot(),Sn,ln);return this.nearestNeighbourK(ci,xn)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var m=arguments[0],_=arguments[1],k=re.POSITIVE_INFINITY,j=new Lu;for(j.add(m);!j.isEmpty();){var ie=j.poll(),de=ie.getDistance();if(de>_)return!1;if(ie.maximumDistance()<=_)return!0;if(ie.isLeaves()){if((k=de)<=_)return!0}else ie.expandToQueue(j,k)}return!1}if(arguments.length===3){var Te=arguments[0],Pe=arguments[1],nt=arguments[2],ht=new Ma(this.getRoot(),Te.getRoot(),Pe);return this.isWithinDistance(ht,nt)}}},{key:"interfaces_",get:function(){return[Do,T]}}],[{key:"constructor_",value:function(){if(arguments.length===0)g.constructor_.call(this,g.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var m=arguments[0];Ws.constructor_.call(this,m)}}},{key:"centreX",value:function(m){return g.avg(m.getMinX(),m.getMaxX())}},{key:"avg",value:function(m,_){return(m+_)/2}},{key:"getItems",value:function(m){for(var _=new Array(m.size()).fill(null),k=0;!m.isEmpty();){var j=m.poll();_[k]=j.getBoundable(0).getItem(),k++}return _}},{key:"centreY",value:function(m){return g.avg(m.getMinY(),m.getMaxY())}}])}(Ws),_f=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"computeBounds",value:function(){for(var m=null,_=this.getChildBoundables().iterator();_.hasNext();){var k=_.next();m===null?m=new xe(k.getBounds()):m.expandToInclude(k.getBounds())}return m}}],[{key:"constructor_",value:function(){var m=arguments[0];Xi.constructor_.call(this,m)}}])}(Xi);Va.STRtreeNode=_f,Va.xComparator=new(function(){return o(function E(){i(this,E)},[{key:"interfaces_",get:function(){return[oe]}},{key:"compare",value:function(E,g){return Ws.compareDoubles(Va.centreX(E.getBounds()),Va.centreX(g.getBounds()))}}])}()),Va.yComparator=new(function(){return o(function E(){i(this,E)},[{key:"interfaces_",get:function(){return[oe]}},{key:"compare",value:function(E,g){return Ws.compareDoubles(Va.centreY(E.getBounds()),Va.centreY(g.getBounds()))}}])}()),Va.intersectsOp=new(function(){return o(function E(){i(this,E)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(E,g){return E.intersects(g)}}])}()),Va.DEFAULT_NODE_CAPACITY=10;var vh=function(){function E(){i(this,E)}return o(E,null,[{key:"relativeSign",value:function(g,m){return g<m?-1:g>m?1:0}},{key:"compare",value:function(g,m,_){if(m.equals2D(_))return 0;var k=E.relativeSign(m.x,_.x),j=E.relativeSign(m.y,_.y);switch(g){case 0:return E.compareValue(k,j);case 1:return E.compareValue(j,k);case 2:return E.compareValue(j,-k);case 3:return E.compareValue(-k,j);case 4:return E.compareValue(-k,-j);case 5:return E.compareValue(-j,-k);case 6:return E.compareValue(-j,k);case 7:return E.compareValue(k,-j)}return K.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(g,m){return g<0?-1:g>0?1:m<0?-1:m>0?1:0}}])}(),Cc=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(E){E.print(this.coord),E.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(E){var g=E;return this.segmentIndex<g.segmentIndex?-1:this.segmentIndex>g.segmentIndex?1:this.coord.equals2D(g.coord)?0:this._isInterior?g._isInterior?vh.compare(this._segmentOctant,this.coord,g.coord):1:-1}},{key:"isEndPoint",value:function(E){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===E}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[I]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var E=arguments[0],g=arguments[1],m=arguments[2],_=arguments[3];this._segString=E,this.coord=new le(g),this.segmentIndex=m,this._segmentOctant=_,this._isInterior=!g.equals2D(E.getCoordinate(m))}}])}(),Ef=function(){return o(function E(){i(this,E)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])}(),Sc=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var E=new Pt;this.addEndpoints();for(var g=this.iterator(),m=g.next();g.hasNext();){var _=g.next();this.addEdgeCoordinates(m,_,E),m=_}return E.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var E=new yt;this.findCollapsesFromInsertedNodes(E),this.findCollapsesFromExistingVertices(E);for(var g=E.iterator();g.hasNext();){var m=g.next().intValue();this.add(this._edge.getCoordinate(m),m)}}},{key:"createSplitEdgePts",value:function(E,g){var m=g.segmentIndex-E.segmentIndex+2;if(m===2)return[new le(E.coord),new le(g.coord)];var _=this._edge.getCoordinate(g.segmentIndex),k=g.isInterior()||!g.coord.equals2D(_);k||m--;var j=new Array(m).fill(null),ie=0;j[ie++]=new le(E.coord);for(var de=E.segmentIndex+1;de<=g.segmentIndex;de++)j[ie++]=this._edge.getCoordinate(de);return k&&(j[ie]=new le(g.coord)),j}},{key:"print",value:function(E){E.println("Intersections:");for(var g=this.iterator();g.hasNext();)g.next().print(E)}},{key:"findCollapsesFromExistingVertices",value:function(E){for(var g=0;g<this._edge.size()-2;g++){var m=this._edge.getCoordinate(g);this._edge.getCoordinate(g+1);var _=this._edge.getCoordinate(g+2);m.equals2D(_)&&E.add(Ge.valueOf(g+1))}}},{key:"addEdgeCoordinates",value:function(E,g,m){var _=this.createSplitEdgePts(E,g);m.add(_,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(E){this.addEndpoints(),this.addCollapsedNodes();for(var g=this.iterator(),m=g.next();g.hasNext();){var _=g.next(),k=this.createSplitEdge(m,_);E.add(k),m=_}}},{key:"findCollapseIndex",value:function(E,g,m){if(!E.coord.equals2D(g.coord))return!1;var _=g.segmentIndex-E.segmentIndex;return g.isInterior()||_--,_===1&&(m[0]=E.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(E){for(var g=new Array(1).fill(null),m=this.iterator(),_=m.next();m.hasNext();){var k=m.next();this.findCollapseIndex(_,k,g)&&E.add(Ge.valueOf(g[0])),_=k}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var E=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(E),E)}},{key:"createSplitEdge",value:function(E,g){var m=this.createSplitEdgePts(E,g);return new Nl(m,this._edge.getData())}},{key:"add",value:function(E,g){var m=new Cc(this._edge,E,g,this._edge.getSegmentOctant(g)),_=this._nodeMap.get(m);return _!==null?(K.isTrue(_.coord.equals2D(E),"Found equal nodes with different coordinates"),_):(this._nodeMap.put(m,m),m)}},{key:"checkSplitEdgesCorrectness",value:function(E){var g=this._edge.getCoordinates(),m=E.get(0).getCoordinate(0);if(!m.equals2D(g[0]))throw new P("bad split edge start point at "+m);var _=E.get(E.size()-1).getCoordinates(),k=_[_.length-1];if(!k.equals2D(g[g.length-1]))throw new P("bad split edge end point at "+k)}}],[{key:"constructor_",value:function(){this._nodeMap=new Ne,this._edge=null;var E=arguments[0];this._edge=E}}])}(),yh=function(){function E(){i(this,E)}return o(E,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var g=arguments[0],m=arguments[1];if(g===0&&m===0)throw new C("Cannot compute the octant for point ( "+g+", "+m+" )");var _=Math.abs(g),k=Math.abs(m);return g>=0?m>=0?_>=k?0:1:_>=k?7:6:m>=0?_>=k?3:2:_>=k?4:5}if(arguments[0]instanceof le&&arguments[1]instanceof le){var j=arguments[0],ie=arguments[1],de=ie.x-j.x,Te=ie.y-j.y;if(de===0&&Te===0)throw new C("Cannot compute the octant for two identical points "+j);return E.octant(de,Te)}}}])}(),xh=function(){return o(function E(){i(this,E)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(E){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(E){}},{key:"getData",value:function(){}}])}(),bf=function(){return o(function E(){i(this,E)},[{key:"addIntersection",value:function(E,g){}},{key:"interfaces_",get:function(){return[xh]}}])}(),Nl=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(g){return this._pts[g]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(g){return g===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(g),this.getCoordinate(g+1))}},{key:"setData",value:function(g){this._data=g}},{key:"safeOctant",value:function(g,m){return g.equals2D(m)?0:yh.octant(g,m)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var g=arguments[0],m=arguments[1];this.addIntersectionNode(g,m)}else if(arguments.length===4){var _=arguments[1],k=arguments[3],j=new le(arguments[0].getIntersection(k));this.addIntersection(j,_)}}},{key:"toString",value:function(){return xa.toLineString(new hr(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(g,m){var _=m,k=_+1;if(k<this._pts.length){var j=this._pts[k];g.equals2D(j)&&(_=k)}return this._nodeList.add(g,_)}},{key:"addIntersections",value:function(g,m,_){for(var k=0;k<g.getIntersectionNum();k++)this.addIntersection(g,m,_,k)}},{key:"interfaces_",get:function(){return[bf]}}],[{key:"constructor_",value:function(){this._nodeList=new Sc(this),this._pts=null,this._data=null;var g=arguments[0],m=arguments[1];this._pts=g,this._data=m}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var g=arguments[0],m=new yt;return E.getNodedSubstrings(g,m),m}if(arguments.length===2)for(var _=arguments[1],k=arguments[0].iterator();k.hasNext();)k.next().getNodeList().addSplitEdges(_)}}])}(),ua=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof E){var g=arguments[0],m=Ke.index(this.p0,this.p1,g.p0),_=Ke.index(this.p0,this.p1,g.p1);return m>=0&&_>=0||m<=0&&_<=0?Math.max(m,_):0}if(arguments[0]instanceof le){var k=arguments[0];return Ke.index(this.p0,this.p1,k)}}},{key:"toGeometry",value:function(g){return g.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(g){if(!(g instanceof E))return!1;var m=g;return this.p0.equals(m.p0)&&this.p1.equals(m.p1)}},{key:"intersection",value:function(g){var m=new Yi;return m.computeIntersection(this.p0,this.p1,g.p0,g.p1),m.hasIntersection()?m.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof le){var g=arguments[0];if(g.equals(this.p0)||g.equals(this.p1))return new le(g);var m=this.projectionFactor(g),_=new le;return _.x=this.p0.x+m*(this.p1.x-this.p0.x),_.y=this.p0.y+m*(this.p1.y-this.p0.y),_}if(arguments[0]instanceof E){var k=arguments[0],j=this.projectionFactor(k.p0),ie=this.projectionFactor(k.p1);if(j>=1&&ie>=1||j<=0&&ie<=0)return null;var de=this.project(k.p0);j<0&&(de=this.p0),j>1&&(de=this.p1);var Te=this.project(k.p1);return ie<0&&(Te=this.p0),ie>1&&(Te=this.p1),new E(de,Te)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(g){return g===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(g){return Wt.pointToLinePerpendicular(g,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return E.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(g){if(g.equals(this.p0))return 0;if(g.equals(this.p1))return 1;var m=this.p1.x-this.p0.x,_=this.p1.y-this.p0.y,k=m*m+_*_;return k<=0?re.NaN:((g.x-this.p0.x)*m+(g.y-this.p0.y)*_)/k}},{key:"closestPoints",value:function(g){var m=this.intersection(g);if(m!==null)return[m,m];var _=new Array(2).fill(null),k=re.MAX_VALUE,j=null,ie=this.closestPoint(g.p0);k=ie.distance(g.p0),_[0]=ie,_[1]=g.p0;var de=this.closestPoint(g.p1);(j=de.distance(g.p1))<k&&(k=j,_[0]=de,_[1]=g.p1);var Te=g.closestPoint(this.p0);(j=Te.distance(this.p0))<k&&(k=j,_[0]=this.p0,_[1]=Te);var Pe=g.closestPoint(this.p1);return(j=Pe.distance(this.p1))<k&&(k=j,_[0]=this.p1,_[1]=Pe),_}},{key:"closestPoint",value:function(g){var m=this.projectionFactor(g);return m>0&&m<1?this.project(g):this.p0.distance(g)<this.p1.distance(g)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(g){var m=g,_=this.p0.compareTo(m.p0);return _!==0?_:this.p1.compareTo(m.p1)}},{key:"reverse",value:function(){var g=this.p0;this.p0=this.p1,this.p1=g}},{key:"equalsTopo",value:function(g){return this.p0.equals(g.p0)&&this.p1.equals(g.p1)||this.p0.equals(g.p1)&&this.p1.equals(g.p0)}},{key:"lineIntersection",value:function(g){return Ue.intersection(this.p0,this.p1,g.p0,g.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(g,m){var _=this.p0.x+g*(this.p1.x-this.p0.x),k=this.p0.y+g*(this.p1.y-this.p0.y),j=this.p1.x-this.p0.x,ie=this.p1.y-this.p0.y,de=Math.sqrt(j*j+ie*ie),Te=0,Pe=0;if(m!==0){if(de<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");Te=m*j/de,Pe=m*ie/de}return new le(_-Pe,k+Te)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var g=arguments[0];this.setCoordinates(g.p0,g.p1)}else if(arguments.length===2){var m=arguments[0],_=arguments[1];this.p0.x=m.x,this.p0.y=m.y,this.p1.x=_.x,this.p1.y=_.y}}},{key:"segmentFraction",value:function(g){var m=this.projectionFactor(g);return m<0?m=0:(m>1||re.isNaN(m))&&(m=1),m}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(g){var m=this.p1.getY()-this.p0.getY(),_=this.p0.getX()-this.p1.getX(),k=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),j=m*m+_*_,ie=m*m-_*_,de=g.getX(),Te=g.getY();return new le((-ie*de-2*m*_*Te-2*m*k)/j,(ie*Te-2*m*_*de-2*_*k)/j)}},{key:"distance",value:function(){if(arguments[0]instanceof E){var g=arguments[0];return Wt.segmentToSegment(this.p0,this.p1,g.p0,g.p1)}if(arguments[0]instanceof le){var m=arguments[0];return Wt.pointToSegment(m,this.p0,this.p1)}}},{key:"pointAlong",value:function(g){var m=new le;return m.x=this.p0.x+g*(this.p1.x-this.p0.x),m.y=this.p0.y+g*(this.p1.y-this.p0.y),m}},{key:"hashCode",value:function(){var g=re.doubleToLongBits(this.p0.x);g^=31*re.doubleToLongBits(this.p0.y);var m=Math.trunc(g)^Math.trunc(g>>32),_=re.doubleToLongBits(this.p1.x);return _^=31*re.doubleToLongBits(this.p1.y),m^(Math.trunc(_)^Math.trunc(_>>32))}},{key:"interfaces_",get:function(){return[I,T]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)E.constructor_.call(this,new le,new le);else if(arguments.length===1){var g=arguments[0];E.constructor_.call(this,g.p0,g.p1)}else if(arguments.length===2){var m=arguments[0],_=arguments[1];this.p0=m,this.p1=_}else if(arguments.length===4){var k=arguments[0],j=arguments[1],ie=arguments[2],de=arguments[3];E.constructor_.call(this,new le(k,j),new le(ie,de))}}},{key:"midPoint",value:function(g,m){return new le((g.x+m.x)/2,(g.y+m.y)/2)}}])}(),Zl=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var E=arguments[1],g=arguments[2],m=arguments[3];arguments[0].getLineSegment(E,this._overlapSeg1),g.getLineSegment(m,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new ua,this._overlapSeg2=new ua}}])}(),Bc=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(E,g){g.p0=this._pts[E],g.p1=this._pts[E+1]}},{key:"computeSelect",value:function(E,g,m,_){var k=this._pts[g],j=this._pts[m];if(m-g==1)return _.select(this,g),null;if(!E.intersects(k,j))return null;var ie=Math.trunc((g+m)/2);g<ie&&this.computeSelect(E,g,ie,_),ie<m&&this.computeSelect(E,ie,m,_)}},{key:"getCoordinates",value:function(){for(var E=new Array(this._end-this._start+1).fill(null),g=0,m=this._start;m<=this._end;m++)E[g++]=this._pts[m];return E}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var E=arguments[0],g=arguments[1];this.computeOverlaps(this._start,this._end,E,E._start,E._end,g)}else if(arguments.length===6){var m=arguments[0],_=arguments[1],k=arguments[2],j=arguments[3],ie=arguments[4],de=arguments[5];if(_-m==1&&ie-j==1)return de.overlap(this,m,k,j),null;if(!this.overlaps(m,_,k,j,ie))return null;var Te=Math.trunc((m+_)/2),Pe=Math.trunc((j+ie)/2);m<Te&&(j<Pe&&this.computeOverlaps(m,Te,k,j,Pe,de),Pe<ie&&this.computeOverlaps(m,Te,k,Pe,ie,de)),Te<_&&(j<Pe&&this.computeOverlaps(Te,_,k,j,Pe,de),Pe<ie&&this.computeOverlaps(Te,_,k,Pe,ie,de))}}},{key:"setId",value:function(E){this._id=E}},{key:"select",value:function(E,g){this.computeSelect(E,this._start,this._end,g)}},{key:"getEnvelope",value:function(){if(this._env===null){var E=this._pts[this._start],g=this._pts[this._end];this._env=new xe(E,g)}return this._env}},{key:"overlaps",value:function(E,g,m,_,k){return xe.intersects(this._pts[E],this._pts[g],m._pts[_],m._pts[k])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var E=arguments[0],g=arguments[1],m=arguments[2],_=arguments[3];this._pts=E,this._start=g,this._end=m,this._context=_}}])}(),Jl=function(){function E(){i(this,E)}return o(E,null,[{key:"findChainEnd",value:function(g,m){for(var _=m;_<g.length-1&&g[_].equals2D(g[_+1]);)_++;if(_>=g.length-1)return g.length-1;for(var k=at.quadrant(g[_],g[_+1]),j=m+1;j<g.length&&!(!g[j-1].equals2D(g[j])&&at.quadrant(g[j-1],g[j])!==k);)j++;return j-1}},{key:"getChains",value:function(){if(arguments.length===1){var g=arguments[0];return E.getChains(g,null)}if(arguments.length===2){var m=arguments[0],_=arguments[1],k=new yt,j=0;do{var ie=E.findChainEnd(m,j),de=new Bc(m,j,ie,_);k.add(de),j=ie}while(j<m.length-1);return k}}}])}(),Du=function(){return o(function E(){i(this,E)},[{key:"computeNodes",value:function(E){}},{key:"getNodedSubstrings",value:function(){}}])}(),V=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(E){this._segInt=E}},{key:"interfaces_",get:function(){return[Du]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var E=arguments[0];this.setSegmentIntersector(E)}}}}])}(),ye=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return Nl.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(m){for(var _=Jl.getChains(m.getCoordinates(),m).iterator();_.hasNext();){var k=_.next();k.setId(this._idCounter++),this._index.insert(k.getEnvelope(),k),this._monoChains.add(k)}}},{key:"computeNodes",value:function(m){this._nodedSegStrings=m;for(var _=m.iterator();_.hasNext();)this.add(_.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var m=new je(this._segInt),_=this._monoChains.iterator();_.hasNext();)for(var k=_.next(),j=this._index.query(k.getEnvelope()).iterator();j.hasNext();){var ie=j.next();if(ie.getId()>k.getId()&&(k.computeOverlaps(ie,m),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new yt,this._index=new Va,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var m=arguments[0];V.constructor_.call(this,m)}}}}])}(V),je=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"overlap",value:function(){if(arguments.length!==4)return d(g,"overlap",this,1).apply(this,arguments);var m=arguments[1],_=arguments[2],k=arguments[3],j=arguments[0].getContext(),ie=_.getContext();this._si.processIntersections(j,m,ie,k)}}],[{key:"constructor_",value:function(){this._si=null;var m=arguments[0];this._si=m}}])}(Zl);ye.SegmentOverlapAction=je;var Xe=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"isDeletable",value:function(g,m,_,k){var j=this._inputLine[g],ie=this._inputLine[m],de=this._inputLine[_];return!!this.isConcave(j,ie,de)&&!!this.isShallow(j,ie,de,k)&&this.isShallowSampled(j,ie,g,_,k)}},{key:"deleteShallowConcavities",value:function(){for(var g=1,m=this.findNextNonDeletedIndex(g),_=this.findNextNonDeletedIndex(m),k=!1;_<this._inputLine.length;){var j=!1;this.isDeletable(g,m,_,this._distanceTol)&&(this._isDeleted[m]=E.DELETE,j=!0,k=!0),g=j?_:m,m=this.findNextNonDeletedIndex(g),_=this.findNextNonDeletedIndex(m)}return k}},{key:"isShallowConcavity",value:function(g,m,_,k){return Ke.index(g,m,_)===this._angleOrientation&&Wt.pointToSegment(m,g,_)<k}},{key:"isShallowSampled",value:function(g,m,_,k,j){var ie=Math.trunc((k-_)/E.NUM_PTS_TO_CHECK);ie<=0&&(ie=1);for(var de=_;de<k;de+=ie)if(!this.isShallow(g,m,this._inputLine[de],j))return!1;return!0}},{key:"isConcave",value:function(g,m,_){var k=Ke.index(g,m,_)===this._angleOrientation;return k}},{key:"simplify",value:function(g){this._distanceTol=Math.abs(g),g<0&&(this._angleOrientation=Ke.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var m=!1;do m=this.deleteShallowConcavities();while(m);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(g){for(var m=g+1;m<this._inputLine.length&&this._isDeleted[m]===E.DELETE;)m++;return m}},{key:"isShallow",value:function(g,m,_,k){return Wt.pointToSegment(m,g,_)<k}},{key:"collapseLine",value:function(){for(var g=new Pt,m=0;m<this._inputLine.length;m++)this._isDeleted[m]!==E.DELETE&&g.add(this._inputLine[m]);return g.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Ke.COUNTERCLOCKWISE;var g=arguments[0];this._inputLine=g}},{key:"simplify",value:function(g,m){return new E(g).simplify(m)}}])}();Xe.INIT=0,Xe.DELETE=1,Xe.KEEP=1,Xe.NUM_PTS_TO_CHECK=10;var ut=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"getCoordinates",value:function(){return this._ptList.toArray(E.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(g){this._precisionModel=g}},{key:"addPt",value:function(g){var m=new le(g);if(this._precisionModel.makePrecise(m),this.isRedundant(m))return null;this._ptList.add(m)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(g,m){if(m)for(var _=0;_<g.length;_++)this.addPt(g[_]);else for(var k=g.length-1;k>=0;k--)this.addPt(g[k])}},{key:"isRedundant",value:function(g){if(this._ptList.size()<1)return!1;var m=this._ptList.get(this._ptList.size()-1);return g.distance(m)<this._minimimVertexDistance}},{key:"toString",value:function(){return new Ia().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var g=new le(this._ptList.get(0)),m=this._ptList.get(this._ptList.size()-1);if(g.equals(m))return null;this._ptList.add(g)}},{key:"setMinimumVertexDistance",value:function(g){this._minimimVertexDistance=g}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new yt}}])}();ut.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var _t=function(){function E(){i(this,E)}return o(E,null,[{key:"toDegrees",value:function(g){return 180*g/Math.PI}},{key:"normalize",value:function(g){for(;g>Math.PI;)g-=E.PI_TIMES_2;for(;g<=-Math.PI;)g+=E.PI_TIMES_2;return g}},{key:"angle",value:function(){if(arguments.length===1){var g=arguments[0];return Math.atan2(g.y,g.x)}if(arguments.length===2){var m=arguments[0],_=arguments[1],k=_.x-m.x,j=_.y-m.y;return Math.atan2(j,k)}}},{key:"isAcute",value:function(g,m,_){var k=g.x-m.x,j=g.y-m.y;return k*(_.x-m.x)+j*(_.y-m.y)>0}},{key:"isObtuse",value:function(g,m,_){var k=g.x-m.x,j=g.y-m.y;return k*(_.x-m.x)+j*(_.y-m.y)<0}},{key:"interiorAngle",value:function(g,m,_){var k=E.angle(m,g),j=E.angle(m,_);return Math.abs(j-k)}},{key:"normalizePositive",value:function(g){if(g<0){for(;g<0;)g+=E.PI_TIMES_2;g>=E.PI_TIMES_2&&(g=0)}else{for(;g>=E.PI_TIMES_2;)g-=E.PI_TIMES_2;g<0&&(g=0)}return g}},{key:"angleBetween",value:function(g,m,_){var k=E.angle(m,g),j=E.angle(m,_);return E.diff(k,j)}},{key:"diff",value:function(g,m){var _=null;return(_=g<m?m-g:g-m)>Math.PI&&(_=2*Math.PI-_),_}},{key:"toRadians",value:function(g){return g*Math.PI/180}},{key:"getTurn",value:function(g,m){var _=Math.sin(m-g);return _>0?E.COUNTERCLOCKWISE:_<0?E.CLOCKWISE:E.NONE}},{key:"angleBetweenOriented",value:function(g,m,_){var k=E.angle(m,g),j=E.angle(m,_)-k;return j<=-Math.PI?j+E.PI_TIMES_2:j>Math.PI?j-E.PI_TIMES_2:j}}])}();_t.PI_TIMES_2=2*Math.PI,_t.PI_OVER_2=Math.PI/2,_t.PI_OVER_4=Math.PI/4,_t.COUNTERCLOCKWISE=Ke.COUNTERCLOCKWISE,_t.CLOCKWISE=Ke.CLOCKWISE,_t.NONE=Ke.COLLINEAR;var Ut=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"addNextSegment",value:function(g,m){if(this._s0=this._s1,this._s1=this._s2,this._s2=g,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var _=Ke.index(this._s0,this._s1,this._s2),k=_===Ke.CLOCKWISE&&this._side===ae.LEFT||_===Ke.COUNTERCLOCKWISE&&this._side===ae.RIGHT;_===0?this.addCollinear(m):k?this.addOutsideTurn(_,m):this.addInsideTurn(_,m)}},{key:"addLineEndCap",value:function(g,m){var _=new ua(g,m),k=new ua;this.computeOffsetSegment(_,ae.LEFT,this._distance,k);var j=new ua;this.computeOffsetSegment(_,ae.RIGHT,this._distance,j);var ie=m.x-g.x,de=m.y-g.y,Te=Math.atan2(de,ie);switch(this._bufParams.getEndCapStyle()){case x.CAP_ROUND:this._segList.addPt(k.p1),this.addDirectedFillet(m,Te+Math.PI/2,Te-Math.PI/2,Ke.CLOCKWISE,this._distance),this._segList.addPt(j.p1);break;case x.CAP_FLAT:this._segList.addPt(k.p1),this._segList.addPt(j.p1);break;case x.CAP_SQUARE:var Pe=new le;Pe.x=Math.abs(this._distance)*Math.cos(Te),Pe.y=Math.abs(this._distance)*Math.sin(Te);var nt=new le(k.p1.x+Pe.x,k.p1.y+Pe.y),ht=new le(j.p1.x+Pe.x,j.p1.y+Pe.y);this._segList.addPt(nt),this._segList.addPt(ht)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(g,m,_,k){var j=Ue.intersection(m.p0,m.p1,_.p0,_.p1);if(j!==null&&(k<=0?1:j.distance(g)/Math.abs(k))<=this._bufParams.getMitreLimit())return this._segList.addPt(j),null;this.addLimitedMitreJoin(m,_,k,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(g,m){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*E.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===x.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===x.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(m&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,g,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(g){this._segList.addPt(new le(g.x+this._distance,g.y+this._distance)),this._segList.addPt(new le(g.x+this._distance,g.y-this._distance)),this._segList.addPt(new le(g.x-this._distance,g.y-this._distance)),this._segList.addPt(new le(g.x-this._distance,g.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(g,m){this._segList.addPts(g,m)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(g,m,_,k,j){var ie=m.x-g.x,de=m.y-g.y,Te=Math.atan2(de,ie),Pe=_.x-g.x,nt=_.y-g.y,ht=Math.atan2(nt,Pe);k===Ke.CLOCKWISE?Te<=ht&&(Te+=2*Math.PI):Te>=ht&&(Te-=2*Math.PI),this._segList.addPt(m),this.addDirectedFillet(g,Te,ht,k,j),this._segList.addPt(_)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(g,m,_){this._s1=g,this._s2=m,this._side=_,this._seg1.setCoordinates(g,m),this.computeOffsetSegment(this._seg1,_,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(g,m,_,k){var j=this._seg0.p1,ie=_t.angle(j,this._seg0.p0),de=_t.angleBetweenOriented(this._seg0.p0,j,this._seg1.p1)/2,Te=_t.normalize(ie+de),Pe=_t.normalize(Te+Math.PI),nt=k*_,ht=_-nt*Math.abs(Math.sin(de)),Ft=j.x+nt*Math.cos(Pe),Zt=j.y+nt*Math.sin(Pe),dr=new le(Ft,Zt),Er=new ua(j,dr),ln=Er.pointAlongOffset(1,ht),xn=Er.pointAlongOffset(1,-ht);this._side===ae.LEFT?(this._segList.addPt(ln),this._segList.addPt(xn)):(this._segList.addPt(xn),this._segList.addPt(ln))}},{key:"addDirectedFillet",value:function(g,m,_,k,j){var ie=k===Ke.CLOCKWISE?-1:1,de=Math.abs(m-_),Te=Math.trunc(de/this._filletAngleQuantum+.5);if(Te<1)return null;for(var Pe=de/Te,nt=new le,ht=0;ht<Te;ht++){var Ft=m+ie*ht*Pe;nt.x=g.x+j*Math.cos(Ft),nt.y=g.y+j*Math.sin(Ft),this._segList.addPt(nt)}}},{key:"computeOffsetSegment",value:function(g,m,_,k){var j=m===ae.LEFT?1:-1,ie=g.p1.x-g.p0.x,de=g.p1.y-g.p0.y,Te=Math.sqrt(ie*ie+de*de),Pe=j*_*ie/Te,nt=j*_*de/Te;k.p0.x=g.p0.x-nt,k.p0.y=g.p0.y+Pe,k.p1.x=g.p1.x-nt,k.p1.y=g.p1.y+Pe}},{key:"addInsideTurn",value:function(g,m){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*E.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var _=new le((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(_);var k=new le((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(k)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(g){var m=new le(g.x+this._distance,g.y);this._segList.addPt(m),this.addDirectedFillet(g,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(g,m){this._segList.addPt(g.p1),this._segList.addPt(m.p0)}},{key:"init",value:function(g){this._distance=g,this._maxCurveSegmentError=g*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new ut,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(g*E.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(g){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===x.JOIN_BEVEL||this._bufParams.getJoinStyle()===x.JOIN_MITRE?(g&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,Ke.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new ua,this._seg1=new ua,this._offset0=new ua,this._offset1=new ua,this._side=0,this._hasNarrowConcaveAngle=!1;var g=arguments[0],m=arguments[1],_=arguments[2];this._precisionModel=g,this._bufParams=m,this._li=new Yi,this._filletAngleQuantum=Math.PI/2/m.getQuadrantSegments(),m.getQuadrantSegments()>=8&&m.getJoinStyle()===x.JOIN_ROUND&&(this._closingSegLengthFactor=E.MAX_CLOSING_SEG_LEN_FACTOR),this.init(_)}}])}();Ut.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Ut.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Ut.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Ut.MAX_CLOSING_SEG_LEN_FACTOR=80;var nr=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"getOffsetCurve",value:function(g,m){if(this._distance=m,m===0)return null;var _=m<0,k=Math.abs(m),j=this.getSegGen(k);g.length<=1?this.computePointCurve(g[0],j):this.computeOffsetCurve(g,_,j);var ie=j.getCoordinates();return _&&It.reverse(ie),ie}},{key:"computeSingleSidedBufferCurve",value:function(g,m,_){var k=this.simplifyTolerance(this._distance);if(m){_.addSegments(g,!0);var j=Xe.simplify(g,-k),ie=j.length-1;_.initSideSegments(j[ie],j[ie-1],ae.LEFT),_.addFirstSegment();for(var de=ie-2;de>=0;de--)_.addNextSegment(j[de],!0)}else{_.addSegments(g,!1);var Te=Xe.simplify(g,k),Pe=Te.length-1;_.initSideSegments(Te[0],Te[1],ae.LEFT),_.addFirstSegment();for(var nt=2;nt<=Pe;nt++)_.addNextSegment(Te[nt],!0)}_.addLastSegment(),_.closeRing()}},{key:"computeRingBufferCurve",value:function(g,m,_){var k=this.simplifyTolerance(this._distance);m===ae.RIGHT&&(k=-k);var j=Xe.simplify(g,k),ie=j.length-1;_.initSideSegments(j[ie-1],j[0],m);for(var de=1;de<=ie;de++){var Te=de!==1;_.addNextSegment(j[de],Te)}_.closeRing()}},{key:"computeLineBufferCurve",value:function(g,m){var _=this.simplifyTolerance(this._distance),k=Xe.simplify(g,_),j=k.length-1;m.initSideSegments(k[0],k[1],ae.LEFT);for(var ie=2;ie<=j;ie++)m.addNextSegment(k[ie],!0);m.addLastSegment(),m.addLineEndCap(k[j-1],k[j]);var de=Xe.simplify(g,-_),Te=de.length-1;m.initSideSegments(de[Te],de[Te-1],ae.LEFT);for(var Pe=Te-2;Pe>=0;Pe--)m.addNextSegment(de[Pe],!0);m.addLastSegment(),m.addLineEndCap(de[1],de[0]),m.closeRing()}},{key:"computePointCurve",value:function(g,m){switch(this._bufParams.getEndCapStyle()){case x.CAP_ROUND:m.createCircle(g);break;case x.CAP_SQUARE:m.createSquare(g)}}},{key:"getLineCurve",value:function(g,m){if(this._distance=m,this.isLineOffsetEmpty(m))return null;var _=Math.abs(m),k=this.getSegGen(_);if(g.length<=1)this.computePointCurve(g[0],k);else if(this._bufParams.isSingleSided()){var j=m<0;this.computeSingleSidedBufferCurve(g,j,k)}else this.computeLineBufferCurve(g,k);return k.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(g){return g*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(g,m,_){if(this._distance=_,g.length<=2)return this.getLineCurve(g,_);if(_===0)return E.copyCoordinates(g);var k=this.getSegGen(_);return this.computeRingBufferCurve(g,m,k),k.getCoordinates()}},{key:"computeOffsetCurve",value:function(g,m,_){var k=this.simplifyTolerance(this._distance);if(m){var j=Xe.simplify(g,-k),ie=j.length-1;_.initSideSegments(j[ie],j[ie-1],ae.LEFT),_.addFirstSegment();for(var de=ie-2;de>=0;de--)_.addNextSegment(j[de],!0)}else{var Te=Xe.simplify(g,k),Pe=Te.length-1;_.initSideSegments(Te[0],Te[1],ae.LEFT),_.addFirstSegment();for(var nt=2;nt<=Pe;nt++)_.addNextSegment(Te[nt],!0)}_.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(g){return g===0||g<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(g){return new Ut(this._precisionModel,this._bufParams,g)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var g=arguments[0],m=arguments[1];this._precisionModel=g,this._bufParams=m}},{key:"copyCoordinates",value:function(g){for(var m=new Array(g.length).fill(null),_=0;_<m.length;_++)m[_]=new le(g[_]);return m}}])}(),br=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var E=arguments[0],g=new yt,m=this._subgraphs.iterator();m.hasNext();){var _=m.next(),k=_.getEnvelope();E.y<k.getMinY()||E.y>k.getMaxY()||this.findStabbedSegments(E,_.getDirectedEdges(),g)}return g}if(arguments.length===3){if(pe(arguments[2],be)&&arguments[0]instanceof le&&arguments[1]instanceof mr){for(var j=arguments[0],ie=arguments[1],de=arguments[2],Te=ie.getEdge().getCoordinates(),Pe=0;Pe<Te.length-1;Pe++)if(this._seg.p0=Te[Pe],this._seg.p1=Te[Pe+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<j.x||this._seg.isHorizontal()||j.y<this._seg.p0.y||j.y>this._seg.p1.y||Ke.index(this._seg.p0,this._seg.p1,j)===Ke.RIGHT)){var nt=ie.getDepth(ae.LEFT);this._seg.p0.equals(Te[Pe])||(nt=ie.getDepth(ae.RIGHT));var ht=new qr(this._seg,nt);de.add(ht)}}else if(pe(arguments[2],be)&&arguments[0]instanceof le&&pe(arguments[1],be))for(var Ft=arguments[0],Zt=arguments[2],dr=arguments[1].iterator();dr.hasNext();){var Er=dr.next();Er.isForward()&&this.findStabbedSegments(Ft,Er,Zt)}}}},{key:"getDepth",value:function(E){var g=this.findStabbedSegments(E);return g.size()===0?0:Tl.min(g)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new ua;var E=arguments[0];this._subgraphs=E}}])}(),qr=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(E){var g=E;if(this._upwardSeg.minX()>=g._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=g._upwardSeg.minX())return-1;var m=this._upwardSeg.orientationIndex(g._upwardSeg);return m!==0||(m=-1*g._upwardSeg.orientationIndex(this._upwardSeg))!==0?m:this._upwardSeg.compareTo(g._upwardSeg)}},{key:"compareX",value:function(E,g){var m=E.p0.compareTo(g.p0);return m!==0?m:E.p1.compareTo(g.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[I]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var E=arguments[0],g=arguments[1];this._upwardSeg=new ua(E),this._leftDepth=g}}])}();br.DepthSegment=qr;var Qr=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,null,[{key:"constructor_",value:function(){b.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])}(b),tt=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"getY",value:function(){var g=this.y/this.w;if(re.isNaN(g)||re.isInfinite(g))throw new Qr;return g}},{key:"getX",value:function(){var g=this.x/this.w;if(re.isNaN(g)||re.isInfinite(g))throw new Qr;return g}},{key:"getCoordinate",value:function(){var g=new le;return g.x=this.getX(),g.y=this.getY(),g}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var g=arguments[0];this.x=g.x,this.y=g.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var m=arguments[0],_=arguments[1];this.x=m,this.y=_,this.w=1}else if(arguments[0]instanceof E&&arguments[1]instanceof E){var k=arguments[0],j=arguments[1];this.x=k.y*j.w-j.y*k.w,this.y=j.x*k.w-k.x*j.w,this.w=k.x*j.y-j.x*k.y}else if(arguments[0]instanceof le&&arguments[1]instanceof le){var ie=arguments[0],de=arguments[1];this.x=ie.y-de.y,this.y=de.x-ie.x,this.w=ie.x*de.y-de.x*ie.y}}else if(arguments.length===3){var Te=arguments[0],Pe=arguments[1],nt=arguments[2];this.x=Te,this.y=Pe,this.w=nt}else if(arguments.length===4){var ht=arguments[0],Ft=arguments[1],Zt=arguments[2],dr=arguments[3],Er=ht.y-Ft.y,ln=Ft.x-ht.x,xn=ht.x*Ft.y-Ft.x*ht.y,Sn=Zt.y-dr.y,ci=dr.x-Zt.x,un=Zt.x*dr.y-dr.x*Zt.y;this.x=ln*un-ci*xn,this.y=Sn*xn-Er*un,this.w=Er*ci-Sn*ln}}}])}(),St=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"area",value:function(){return E.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return E.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(g){if(g===null)throw new C("Supplied point is null.");return E.interpolateZ(g,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return E.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return E.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return E.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return E.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return E.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return E.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var g=arguments[0],m=arguments[1],_=arguments[2];this.p0=g,this.p1=m,this.p2=_}},{key:"area",value:function(g,m,_){return Math.abs(((_.x-g.x)*(m.y-g.y)-(m.x-g.x)*(_.y-g.y))/2)}},{key:"signedArea",value:function(g,m,_){return((_.x-g.x)*(m.y-g.y)-(m.x-g.x)*(_.y-g.y))/2}},{key:"det",value:function(g,m,_,k){return g*k-m*_}},{key:"interpolateZ",value:function(g,m,_,k){var j=m.x,ie=m.y,de=_.x-j,Te=k.x-j,Pe=_.y-ie,nt=k.y-ie,ht=de*nt-Te*Pe,Ft=g.x-j,Zt=g.y-ie,dr=(nt*Ft-Te*Zt)/ht,Er=(-Pe*Ft+de*Zt)/ht;return m.getZ()+dr*(_.getZ()-m.getZ())+Er*(k.getZ()-m.getZ())}},{key:"longestSideLength",value:function(g,m,_){var k=g.distance(m),j=m.distance(_),ie=_.distance(g),de=k;return j>de&&(de=j),ie>de&&(de=ie),de}},{key:"circumcentreDD",value:function(g,m,_){var k=He.valueOf(g.x).subtract(_.x),j=He.valueOf(g.y).subtract(_.y),ie=He.valueOf(m.x).subtract(_.x),de=He.valueOf(m.y).subtract(_.y),Te=He.determinant(k,j,ie,de).multiply(2),Pe=k.sqr().add(j.sqr()),nt=ie.sqr().add(de.sqr()),ht=He.determinant(j,Pe,de,nt),Ft=He.determinant(k,Pe,ie,nt),Zt=He.valueOf(_.x).subtract(ht.divide(Te)).doubleValue(),dr=He.valueOf(_.y).add(Ft.divide(Te)).doubleValue();return new le(Zt,dr)}},{key:"isAcute",value:function(g,m,_){return!!_t.isAcute(g,m,_)&&!!_t.isAcute(m,_,g)&&!!_t.isAcute(_,g,m)}},{key:"circumcentre",value:function(g,m,_){var k=_.x,j=_.y,ie=g.x-k,de=g.y-j,Te=m.x-k,Pe=m.y-j,nt=2*E.det(ie,de,Te,Pe),ht=E.det(de,ie*ie+de*de,Pe,Te*Te+Pe*Pe),Ft=E.det(ie,ie*ie+de*de,Te,Te*Te+Pe*Pe);return new le(k-ht/nt,j+Ft/nt)}},{key:"perpendicularBisector",value:function(g,m){var _=m.x-g.x,k=m.y-g.y,j=new tt(g.x+_/2,g.y+k/2,1),ie=new tt(g.x-k+_/2,g.y+_+k/2,1);return new tt(j,ie)}},{key:"angleBisector",value:function(g,m,_){var k=m.distance(g),j=k/(k+m.distance(_)),ie=_.x-g.x,de=_.y-g.y;return new le(g.x+j*ie,g.y+j*de)}},{key:"area3D",value:function(g,m,_){var k=m.x-g.x,j=m.y-g.y,ie=m.getZ()-g.getZ(),de=_.x-g.x,Te=_.y-g.y,Pe=_.getZ()-g.getZ(),nt=j*Pe-ie*Te,ht=ie*de-k*Pe,Ft=k*Te-j*de,Zt=nt*nt+ht*ht+Ft*Ft,dr=Math.sqrt(Zt)/2;return dr}},{key:"centroid",value:function(g,m,_){var k=(g.x+m.x+_.x)/3,j=(g.y+m.y+_.y)/3;return new le(k,j)}},{key:"inCentre",value:function(g,m,_){var k=m.distance(_),j=g.distance(_),ie=g.distance(m),de=k+j+ie,Te=(k*g.x+j*m.x+ie*_.x)/de,Pe=(k*g.y+j*m.y+ie*_.y)/de;return new le(Te,Pe)}}])}(),Yt=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(E,g,m,_,k){if(g===0&&E.length<ct.MINIMUM_VALID_SIZE)return null;var j=_,ie=k;E.length>=ct.MINIMUM_VALID_SIZE&&Ke.isCCW(E)&&(j=k,ie=_,m=ae.opposite(m));var de=this._curveBuilder.getRingCurve(E,m,g);this.addCurve(de,j,ie)}},{key:"addRingBothSides",value:function(E,g){this.addRingSide(E,g,ae.LEFT,Y.EXTERIOR,Y.INTERIOR),this.addRingSide(E,g,ae.RIGHT,Y.INTERIOR,Y.EXTERIOR)}},{key:"addPoint",value:function(E){if(this._distance<=0)return null;var g=E.getCoordinates(),m=this._curveBuilder.getLineCurve(g,this._distance);this.addCurve(m,Y.EXTERIOR,Y.INTERIOR)}},{key:"addPolygon",value:function(E){var g=this._distance,m=ae.LEFT;this._distance<0&&(g=-this._distance,m=ae.RIGHT);var _=E.getExteriorRing(),k=It.removeRepeatedPoints(_.getCoordinates());if(this._distance<0&&this.isErodedCompletely(_,this._distance)||this._distance<=0&&k.length<3)return null;this.addRingSide(k,g,m,Y.EXTERIOR,Y.INTERIOR);for(var j=0;j<E.getNumInteriorRing();j++){var ie=E.getInteriorRingN(j),de=It.removeRepeatedPoints(ie.getCoordinates());this._distance>0&&this.isErodedCompletely(ie,-this._distance)||this.addRingSide(de,g,ae.opposite(m),Y.INTERIOR,Y.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(E,g){var m=new St(E[0],E[1],E[2]),_=m.inCentre();return Wt.pointToSegment(_,m.p0,m.p1)<Math.abs(g)}},{key:"addLineString",value:function(E){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var g=It.removeRepeatedPoints(E.getCoordinates());if(It.isRing(g)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(g,this._distance);else{var m=this._curveBuilder.getLineCurve(g,this._distance);this.addCurve(m,Y.EXTERIOR,Y.INTERIOR)}}},{key:"addCurve",value:function(E,g,m){if(E===null||E.length<2)return null;var _=new Nl(E,new lr(0,Y.BOUNDARY,g,m));this._curveList.add(_)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(E){if(E.isEmpty())return null;if(E instanceof Ee)this.addPolygon(E);else if(E instanceof ir)this.addLineString(E);else if(E instanceof Zn)this.addPoint(E);else if(E instanceof qe)this.addCollection(E);else if(E instanceof us)this.addCollection(E);else if(E instanceof Cn)this.addCollection(E);else{if(!(E instanceof Oe))throw new se(E.getGeometryType());this.addCollection(E)}}},{key:"isErodedCompletely",value:function(E,g){var m=E.getCoordinates();if(m.length<4)return g<0;if(m.length===4)return this.isTriangleErodedCompletely(m,g);var _=E.getEnvelopeInternal(),k=Math.min(_.getHeight(),_.getWidth());return g<0&&2*Math.abs(g)>k}},{key:"addCollection",value:function(E){for(var g=0;g<E.getNumGeometries();g++){var m=E.getGeometryN(g);this.add(m)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new yt;var E=arguments[0],g=arguments[1],m=arguments[2];this._inputGeom=E,this._distance=g,this._curveBuilder=m}}])}(),ur=function(){return o(function E(){i(this,E)},[{key:"locate",value:function(E){}}])}(),_r=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,E.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new te;var g=this._parent.getGeometryN(this._index++);return g instanceof Oe?(this._subcollectionIterator=new E(g),this._subcollectionIterator.next()):g}},{key:"remove",value:function(){throw new se(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[Ef]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var g=arguments[0];this._parent=g,this._atStart=!0,this._index=0,this._max=g.getNumGeometries()}},{key:"isAtomic",value:function(g){return!(g instanceof Oe)}}])}(),Gr=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"locate",value:function(g){return E.locate(g,this._geom)}},{key:"interfaces_",get:function(){return[ur]}}],[{key:"constructor_",value:function(){this._geom=null;var g=arguments[0];this._geom=g}},{key:"locatePointInPolygon",value:function(g,m){if(m.isEmpty())return Y.EXTERIOR;var _=m.getExteriorRing(),k=E.locatePointInRing(g,_);if(k!==Y.INTERIOR)return k;for(var j=0;j<m.getNumInteriorRing();j++){var ie=m.getInteriorRingN(j),de=E.locatePointInRing(g,ie);if(de===Y.BOUNDARY)return Y.BOUNDARY;if(de===Y.INTERIOR)return Y.EXTERIOR}return Y.INTERIOR}},{key:"locatePointInRing",value:function(g,m){return m.getEnvelopeInternal().intersects(g)?Qi.locateInRing(g,m.getCoordinates()):Y.EXTERIOR}},{key:"containsPointInPolygon",value:function(g,m){return Y.EXTERIOR!==E.locatePointInPolygon(g,m)}},{key:"locateInGeometry",value:function(g,m){if(m instanceof Ee)return E.locatePointInPolygon(g,m);if(m instanceof Oe)for(var _=new _r(m);_.hasNext();){var k=_.next();if(k!==m){var j=E.locateInGeometry(g,k);if(j!==Y.EXTERIOR)return j}}return Y.EXTERIOR}},{key:"isContained",value:function(g,m){return Y.EXTERIOR!==E.locate(g,m)}},{key:"locate",value:function(g,m){return m.isEmpty()?Y.EXTERIOR:m.getEnvelopeInternal().intersects(g)?E.locateInGeometry(g,m):Y.EXTERIOR}}])}(),$i=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(E){this.getEdges();var g=this._edgeList.indexOf(E),m=g-1;return g===0&&(m=this._edgeList.size()-1),this._edgeList.get(m)}},{key:"propagateSideLabels",value:function(E){for(var g=Y.NONE,m=this.iterator();m.hasNext();){var _=m.next().getLabel();_.isArea(E)&&_.getLocation(E,ae.LEFT)!==Y.NONE&&(g=_.getLocation(E,ae.LEFT))}if(g===Y.NONE)return null;for(var k=g,j=this.iterator();j.hasNext();){var ie=j.next(),de=ie.getLabel();if(de.getLocation(E,ae.ON)===Y.NONE&&de.setLocation(E,ae.ON,k),de.isArea(E)){var Te=de.getLocation(E,ae.LEFT),Pe=de.getLocation(E,ae.RIGHT);if(Pe!==Y.NONE){if(Pe!==k)throw new vt("side location conflict",ie.getCoordinate());Te===Y.NONE&&K.shouldNeverReachHere("found single null side (at "+ie.getCoordinate()+")"),k=Te}else K.isTrue(de.getLocation(E,ae.LEFT)===Y.NONE,"found single null side"),de.setLocation(E,ae.RIGHT,k),de.setLocation(E,ae.LEFT,k)}}}},{key:"getCoordinate",value:function(){var E=this.iterator();return E.hasNext()?E.next().getCoordinate():null}},{key:"print",value:function(E){st.out.println("EdgeEndStar:   "+this.getCoordinate());for(var g=this.iterator();g.hasNext();)g.next().print(E)}},{key:"isAreaLabelsConsistent",value:function(E){return this.computeEdgeEndLabels(E.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(E){var g=this.getEdges();if(g.size()<=0)return!0;var m=g.size()-1,_=g.get(m).getLabel().getLocation(E,ae.LEFT);K.isTrue(_!==Y.NONE,"Found unlabelled area edge");for(var k=_,j=this.iterator();j.hasNext();){var ie=j.next().getLabel();K.isTrue(ie.isArea(E),"Found non-area edge");var de=ie.getLocation(E,ae.LEFT),Te=ie.getLocation(E,ae.RIGHT);if(de===Te||Te!==k)return!1;k=de}return!0}},{key:"findIndex",value:function(E){this.iterator();for(var g=0;g<this._edgeList.size();g++)if(this._edgeList.get(g)===E)return g;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new yt(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(E,g,m){return this._ptInAreaLocation[E]===Y.NONE&&(this._ptInAreaLocation[E]=Gr.locate(g,m[E].getGeometry())),this._ptInAreaLocation[E]}},{key:"toString",value:function(){var E=new Fe;E.append("EdgeEndStar:   "+this.getCoordinate()),E.append(`
`);for(var g=this.iterator();g.hasNext();){var m=g.next();E.append(m),E.append(`
`)}return E.toString()}},{key:"computeEdgeEndLabels",value:function(E){for(var g=this.iterator();g.hasNext();)g.next().computeLabel(E)}},{key:"computeLabelling",value:function(E){this.computeEdgeEndLabels(E[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var g=[!1,!1],m=this.iterator();m.hasNext();)for(var _=m.next().getLabel(),k=0;k<2;k++)_.isLine(k)&&_.getLocation(k)===Y.BOUNDARY&&(g[k]=!0);for(var j=this.iterator();j.hasNext();)for(var ie=j.next(),de=ie.getLabel(),Te=0;Te<2;Te++)if(de.isAnyNull(Te)){var Pe=Y.NONE;if(g[Te])Pe=Y.EXTERIOR;else{var nt=ie.getCoordinate();Pe=this.getLocation(Te,nt,E)}de.setAllLocationsIfNull(Te,Pe)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(E,g){this._edgeMap.put(E,g),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new Ne,this._edgeList=null,this._ptInAreaLocation=[Y.NONE,Y.NONE]}}])}(),Ni=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var m=null,_=null,k=this._SCANNING_FOR_INCOMING,j=0;j<this._resultAreaEdgeList.size();j++){var ie=this._resultAreaEdgeList.get(j),de=ie.getSym();if(ie.getLabel().isArea())switch(m===null&&ie.isInResult()&&(m=ie),k){case this._SCANNING_FOR_INCOMING:if(!de.isInResult())continue;_=de,k=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!ie.isInResult())continue;_.setNext(ie),k=this._SCANNING_FOR_INCOMING}}if(k===this._LINKING_TO_OUTGOING){if(m===null)throw new vt("no outgoing dirEdge found",this.getCoordinate());K.isTrue(m.isInResult(),"unable to link last incoming dirEdge"),_.setNext(m)}}},{key:"insert",value:function(m){var _=m;this.insertEdgeEnd(_,_)}},{key:"getRightmostEdge",value:function(){var m=this.getEdges(),_=m.size();if(_<1)return null;var k=m.get(0);if(_===1)return k;var j=m.get(_-1),ie=k.getQuadrant(),de=j.getQuadrant();return at.isNorthern(ie)&&at.isNorthern(de)?k:at.isNorthern(ie)||at.isNorthern(de)?k.getDy()!==0?k:j.getDy()!==0?j:(K.shouldNeverReachHere("found two horizontal edges incident on node"),null):j}},{key:"print",value:function(m){st.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var _=this.iterator();_.hasNext();){var k=_.next();m.print("out "),k.print(m),m.println(),m.print("in "),k.getSym().print(m),m.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new yt;for(var m=this.iterator();m.hasNext();){var _=m.next();(_.isInResult()||_.getSym().isInResult())&&this._resultAreaEdgeList.add(_)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(m){for(var _=this.iterator();_.hasNext();){var k=_.next().getLabel();k.setAllLocationsIfNull(0,m.getLocation(0)),k.setAllLocationsIfNull(1,m.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var m=null,_=null,k=this._edgeList.size()-1;k>=0;k--){var j=this._edgeList.get(k),ie=j.getSym();_===null&&(_=ie),m!==null&&ie.setNext(m),m=j}_.setNext(m)}},{key:"computeDepths",value:function(){if(arguments.length===1){var m=arguments[0],_=this.findIndex(m),k=m.getDepth(ae.LEFT),j=m.getDepth(ae.RIGHT),ie=this.computeDepths(_+1,this._edgeList.size(),k);if(this.computeDepths(0,_,ie)!==j)throw new vt("depth mismatch at "+m.getCoordinate())}else if(arguments.length===3){for(var de=arguments[1],Te=arguments[2],Pe=arguments[0];Pe<de;Pe++){var nt=this._edgeList.get(Pe);nt.setEdgeDepths(ae.RIGHT,Te),Te=nt.getDepth(ae.LEFT)}return Te}}},{key:"mergeSymLabels",value:function(){for(var m=this.iterator();m.hasNext();){var _=m.next();_.getLabel().merge(_.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(m){for(var _=null,k=null,j=this._SCANNING_FOR_INCOMING,ie=this._resultAreaEdgeList.size()-1;ie>=0;ie--){var de=this._resultAreaEdgeList.get(ie),Te=de.getSym();switch(_===null&&de.getEdgeRing()===m&&(_=de),j){case this._SCANNING_FOR_INCOMING:if(Te.getEdgeRing()!==m)continue;k=Te,j=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(de.getEdgeRing()!==m)continue;k.setNextMin(de),j=this._SCANNING_FOR_INCOMING}}j===this._LINKING_TO_OUTGOING&&(K.isTrue(_!==null,"found null for first outgoing dirEdge"),K.isTrue(_.getEdgeRing()===m,"unable to link last incoming dirEdge"),k.setNextMin(_))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var m=0,_=this.iterator();_.hasNext();)_.next().isInResult()&&m++;return m}if(arguments.length===1){for(var k=arguments[0],j=0,ie=this.iterator();ie.hasNext();)ie.next().getEdgeRing()===k&&j++;return j}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var m=Y.NONE,_=this.iterator();_.hasNext();){var k=_.next(),j=k.getSym();if(!k.isLineEdge()){if(k.isInResult()){m=Y.INTERIOR;break}if(j.isInResult()){m=Y.EXTERIOR;break}}}if(m===Y.NONE)return null;for(var ie=m,de=this.iterator();de.hasNext();){var Te=de.next(),Pe=Te.getSym();Te.isLineEdge()?Te.getEdge().setCovered(ie===Y.INTERIOR):(Te.isInResult()&&(ie=Y.EXTERIOR),Pe.isInResult()&&(ie=Y.INTERIOR))}}},{key:"computeLabelling",value:function(m){d(g,"computeLabelling",this,1).call(this,m),this._label=new lr(Y.NONE);for(var _=this.iterator();_.hasNext();)for(var k=_.next().getEdge().getLabel(),j=0;j<2;j++){var ie=k.getLocation(j);ie!==Y.INTERIOR&&ie!==Y.BOUNDARY||this._label.setLocation(j,Y.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}($i),Gi=function(E){function g(){return i(this,g),n(this,g)}return h(g,E),o(g,[{key:"createNode",value:function(m){return new Fo(m,new Ni)}}])}(Wr),Wa=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"compareTo",value:function(g){var m=g;return E.compareOriented(this._pts,this._orientation,m._pts,m._orientation)}},{key:"interfaces_",get:function(){return[I]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var g=arguments[0];this._pts=g,this._orientation=E.orientation(g)}},{key:"orientation",value:function(g){return It.increasingDirection(g)===1}},{key:"compareOriented",value:function(g,m,_,k){for(var j=m?1:-1,ie=k?1:-1,de=m?g.length:-1,Te=k?_.length:-1,Pe=m?0:g.length-1,nt=k?0:_.length-1;;){var ht=g[Pe].compareTo(_[nt]);if(ht!==0)return ht;var Ft=(Pe+=j)===de,Zt=(nt+=ie)===Te;if(Ft&&!Zt)return-1;if(!Ft&&Zt)return 1;if(Ft&&Zt)return 0}}}])}(),ku=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"print",value:function(E){E.print("MULTILINESTRING ( ");for(var g=0;g<this._edges.size();g++){var m=this._edges.get(g);g>0&&E.print(","),E.print("(");for(var _=m.getCoordinates(),k=0;k<_.length;k++)k>0&&E.print(","),E.print(_[k].x+" "+_[k].y);E.println(")")}E.print(")  ")}},{key:"addAll",value:function(E){for(var g=E.iterator();g.hasNext();)this.add(g.next())}},{key:"findEdgeIndex",value:function(E){for(var g=0;g<this._edges.size();g++)if(this._edges.get(g).equals(E))return g;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(E){return this._edges.get(E)}},{key:"findEqualEdge",value:function(E){var g=new Wa(E.getCoordinates());return this._ocaMap.get(g)}},{key:"add",value:function(E){this._edges.add(E);var g=new Wa(E.getCoordinates());this._ocaMap.put(g,E)}}],[{key:"constructor_",value:function(){this._edges=new yt,this._ocaMap=new Ne}}])}(),Ys=function(){return o(function E(){i(this,E)},[{key:"processIntersections",value:function(E,g,m,_){}},{key:"isDone",value:function(){}}])}(),Tc=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"isTrivialIntersection",value:function(g,m,_,k){if(g===_&&this._li.getIntersectionNum()===1){if(E.isAdjacentSegments(m,k))return!0;if(g.isClosed()){var j=g.size()-1;if(m===0&&k===j||k===0&&m===j)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(g,m,_,k){if(g===_&&m===k)return null;this.numTests++;var j=g.getCoordinates()[m],ie=g.getCoordinates()[m+1],de=_.getCoordinates()[k],Te=_.getCoordinates()[k+1];this._li.computeIntersection(j,ie,de,Te),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(g,m,_,k)||(this._hasIntersection=!0,g.addIntersections(this._li,m,0),_.addIntersections(this._li,k,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[Ys]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var g=arguments[0];this._li=g}},{key:"isAdjacentSegments",value:function(g,m){return Math.abs(g-m)===1}}])}(),td=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(E){E.print(this.coord),E.print(" seg # = "+this.segmentIndex),E.println(" dist = "+this.dist)}},{key:"compareTo",value:function(E){var g=E;return this.compare(g.segmentIndex,g.dist)}},{key:"isEndPoint",value:function(E){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===E}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(E,g){return this.segmentIndex<E?-1:this.segmentIndex>E?1:this.dist<g?-1:this.dist>g?1:0}},{key:"interfaces_",get:function(){return[I]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var E=arguments[0],g=arguments[1],m=arguments[2];this.coord=new le(E),this.segmentIndex=g,this.dist=m}}])}(),rd=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"print",value:function(E){E.println("Intersections:");for(var g=this.iterator();g.hasNext();)g.next().print(E)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(E){this.addEndpoints();for(var g=this.iterator(),m=g.next();g.hasNext();){var _=g.next(),k=this.createSplitEdge(m,_);E.add(k),m=_}}},{key:"addEndpoints",value:function(){var E=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[E],E,0)}},{key:"createSplitEdge",value:function(E,g){var m=g.segmentIndex-E.segmentIndex+2,_=this.edge.pts[g.segmentIndex],k=g.dist>0||!g.coord.equals2D(_);k||m--;var j=new Array(m).fill(null),ie=0;j[ie++]=new le(E.coord);for(var de=E.segmentIndex+1;de<=g.segmentIndex;de++)j[ie++]=this.edge.pts[de];return k&&(j[ie]=g.coord),new Tf(j,new lr(this.edge._label))}},{key:"add",value:function(E,g,m){var _=new td(E,g,m),k=this._nodeMap.get(_);return k!==null?k:(this._nodeMap.put(_,_),_)}},{key:"isIntersection",value:function(E){for(var g=this.iterator();g.hasNext();)if(g.next().coord.equals(E))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new Ne,this.edge=null;var E=arguments[0];this.edge=E}}])}(),Cf=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(E.isTrue(this._matrix[Y.INTERIOR][Y.INTERIOR])||E.isTrue(this._matrix[Y.INTERIOR][Y.BOUNDARY])||E.isTrue(this._matrix[Y.BOUNDARY][Y.INTERIOR])||E.isTrue(this._matrix[Y.BOUNDARY][Y.BOUNDARY]))&&this._matrix[Y.EXTERIOR][Y.INTERIOR]===Tt.FALSE&&this._matrix[Y.EXTERIOR][Y.BOUNDARY]===Tt.FALSE}},{key:"isCoveredBy",value:function(){return(E.isTrue(this._matrix[Y.INTERIOR][Y.INTERIOR])||E.isTrue(this._matrix[Y.INTERIOR][Y.BOUNDARY])||E.isTrue(this._matrix[Y.BOUNDARY][Y.INTERIOR])||E.isTrue(this._matrix[Y.BOUNDARY][Y.BOUNDARY]))&&this._matrix[Y.INTERIOR][Y.EXTERIOR]===Tt.FALSE&&this._matrix[Y.BOUNDARY][Y.EXTERIOR]===Tt.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var g=arguments[0],m=0;m<g.length;m++){var _=Math.trunc(m/3),k=m%3;this._matrix[_][k]=Tt.toDimensionValue(g.charAt(m))}else if(arguments.length===3){var j=arguments[0],ie=arguments[1],de=arguments[2];this._matrix[j][ie]=de}}},{key:"isContains",value:function(){return E.isTrue(this._matrix[Y.INTERIOR][Y.INTERIOR])&&this._matrix[Y.EXTERIOR][Y.INTERIOR]===Tt.FALSE&&this._matrix[Y.EXTERIOR][Y.BOUNDARY]===Tt.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var g=arguments[0],m=0;m<g.length;m++){var _=Math.trunc(m/3),k=m%3;this.setAtLeast(_,k,Tt.toDimensionValue(g.charAt(m)))}else if(arguments.length===3){var j=arguments[0],ie=arguments[1],de=arguments[2];this._matrix[j][ie]<de&&(this._matrix[j][ie]=de)}}},{key:"setAtLeastIfValid",value:function(g,m,_){g>=0&&m>=0&&this.setAtLeast(g,m,_)}},{key:"isWithin",value:function(){return E.isTrue(this._matrix[Y.INTERIOR][Y.INTERIOR])&&this._matrix[Y.INTERIOR][Y.EXTERIOR]===Tt.FALSE&&this._matrix[Y.BOUNDARY][Y.EXTERIOR]===Tt.FALSE}},{key:"isTouches",value:function(g,m){return g>m?this.isTouches(m,g):(g===Tt.A&&m===Tt.A||g===Tt.L&&m===Tt.L||g===Tt.L&&m===Tt.A||g===Tt.P&&m===Tt.A||g===Tt.P&&m===Tt.L)&&this._matrix[Y.INTERIOR][Y.INTERIOR]===Tt.FALSE&&(E.isTrue(this._matrix[Y.INTERIOR][Y.BOUNDARY])||E.isTrue(this._matrix[Y.BOUNDARY][Y.INTERIOR])||E.isTrue(this._matrix[Y.BOUNDARY][Y.BOUNDARY]))}},{key:"isOverlaps",value:function(g,m){return g===Tt.P&&m===Tt.P||g===Tt.A&&m===Tt.A?E.isTrue(this._matrix[Y.INTERIOR][Y.INTERIOR])&&E.isTrue(this._matrix[Y.INTERIOR][Y.EXTERIOR])&&E.isTrue(this._matrix[Y.EXTERIOR][Y.INTERIOR]):g===Tt.L&&m===Tt.L&&this._matrix[Y.INTERIOR][Y.INTERIOR]===1&&E.isTrue(this._matrix[Y.INTERIOR][Y.EXTERIOR])&&E.isTrue(this._matrix[Y.EXTERIOR][Y.INTERIOR])}},{key:"isEquals",value:function(g,m){return g===m&&E.isTrue(this._matrix[Y.INTERIOR][Y.INTERIOR])&&this._matrix[Y.INTERIOR][Y.EXTERIOR]===Tt.FALSE&&this._matrix[Y.BOUNDARY][Y.EXTERIOR]===Tt.FALSE&&this._matrix[Y.EXTERIOR][Y.INTERIOR]===Tt.FALSE&&this._matrix[Y.EXTERIOR][Y.BOUNDARY]===Tt.FALSE}},{key:"toString",value:function(){for(var g=new Rt("123456789"),m=0;m<3;m++)for(var _=0;_<3;_++)g.setCharAt(3*m+_,Tt.toDimensionSymbol(this._matrix[m][_]));return g.toString()}},{key:"setAll",value:function(g){for(var m=0;m<3;m++)for(var _=0;_<3;_++)this._matrix[m][_]=g}},{key:"get",value:function(g,m){return this._matrix[g][m]}},{key:"transpose",value:function(){var g=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=g,g=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=g,g=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=g,this}},{key:"matches",value:function(g){if(g.length!==9)throw new C("Should be length 9: "+g);for(var m=0;m<3;m++)for(var _=0;_<3;_++)if(!E.matches(this._matrix[m][_],g.charAt(3*m+_)))return!1;return!0}},{key:"add",value:function(g){for(var m=0;m<3;m++)for(var _=0;_<3;_++)this.setAtLeast(m,_,g.get(m,_))}},{key:"isDisjoint",value:function(){return this._matrix[Y.INTERIOR][Y.INTERIOR]===Tt.FALSE&&this._matrix[Y.INTERIOR][Y.BOUNDARY]===Tt.FALSE&&this._matrix[Y.BOUNDARY][Y.INTERIOR]===Tt.FALSE&&this._matrix[Y.BOUNDARY][Y.BOUNDARY]===Tt.FALSE}},{key:"isCrosses",value:function(g,m){return g===Tt.P&&m===Tt.L||g===Tt.P&&m===Tt.A||g===Tt.L&&m===Tt.A?E.isTrue(this._matrix[Y.INTERIOR][Y.INTERIOR])&&E.isTrue(this._matrix[Y.INTERIOR][Y.EXTERIOR]):g===Tt.L&&m===Tt.P||g===Tt.A&&m===Tt.P||g===Tt.A&&m===Tt.L?E.isTrue(this._matrix[Y.INTERIOR][Y.INTERIOR])&&E.isTrue(this._matrix[Y.EXTERIOR][Y.INTERIOR]):g===Tt.L&&m===Tt.L&&this._matrix[Y.INTERIOR][Y.INTERIOR]===0}},{key:"interfaces_",get:function(){return[B]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(Tt.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var g=arguments[0];E.constructor_.call(this),this.set(g)}else if(arguments[0]instanceof E){var m=arguments[0];E.constructor_.call(this),this._matrix[Y.INTERIOR][Y.INTERIOR]=m._matrix[Y.INTERIOR][Y.INTERIOR],this._matrix[Y.INTERIOR][Y.BOUNDARY]=m._matrix[Y.INTERIOR][Y.BOUNDARY],this._matrix[Y.INTERIOR][Y.EXTERIOR]=m._matrix[Y.INTERIOR][Y.EXTERIOR],this._matrix[Y.BOUNDARY][Y.INTERIOR]=m._matrix[Y.BOUNDARY][Y.INTERIOR],this._matrix[Y.BOUNDARY][Y.BOUNDARY]=m._matrix[Y.BOUNDARY][Y.BOUNDARY],this._matrix[Y.BOUNDARY][Y.EXTERIOR]=m._matrix[Y.BOUNDARY][Y.EXTERIOR],this._matrix[Y.EXTERIOR][Y.INTERIOR]=m._matrix[Y.EXTERIOR][Y.INTERIOR],this._matrix[Y.EXTERIOR][Y.BOUNDARY]=m._matrix[Y.EXTERIOR][Y.BOUNDARY],this._matrix[Y.EXTERIOR][Y.EXTERIOR]=m._matrix[Y.EXTERIOR][Y.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var g=arguments[0],m=arguments[1];return m===Tt.SYM_DONTCARE||m===Tt.SYM_TRUE&&(g>=0||g===Tt.TRUE)||m===Tt.SYM_FALSE&&g===Tt.FALSE||m===Tt.SYM_P&&g===Tt.P||m===Tt.SYM_L&&g===Tt.L||m===Tt.SYM_A&&g===Tt.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var _=arguments[1];return new E(arguments[0]).matches(_)}}},{key:"isTrue",value:function(g){return g>=0||g===Tt.TRUE}}])}(),Ya=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(g){return g===null||g.length===0?null:(this.ensureCapacity(this._size+g.length),st.arraycopy(g,0,this._data,this._size,g.length),void(this._size+=g.length))}},{key:"ensureCapacity",value:function(g){if(g<=this._data.length)return null;var m=Math.max(g,2*this._data.length);this._data=Pr.copyOf(this._data,m)}},{key:"toArray",value:function(){var g=new Array(this._size).fill(null);return st.arraycopy(this._data,0,g,0,this._size),g}},{key:"add",value:function(g){this.ensureCapacity(this._size+1),this._data[this._size]=g,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)E.constructor_.call(this,10);else if(arguments.length===1){var g=arguments[0];this._data=new Array(g).fill(null)}}}])}(),Sf=function(){function E(){i(this,E)}return o(E,[{key:"getChainStartIndices",value:function(g){var m=0,_=new Ya(Math.trunc(g.length/2));_.add(m);do{var k=this.findChainEnd(g,m);_.add(k),m=k}while(m<g.length-1);return _.toArray()}},{key:"findChainEnd",value:function(g,m){for(var _=at.quadrant(g[m],g[m+1]),k=m+1;k<g.length&&at.quadrant(g[k-1],g[k])===_;)k++;return k-1}},{key:"OLDgetChainStartIndices",value:function(g){var m=0,_=new yt;_.add(m);do{var k=this.findChainEnd(g,m);_.add(k),m=k}while(m<g.length-1);return E.toIntArray(_)}}],[{key:"toIntArray",value:function(g){for(var m=new Array(g.size()).fill(null),_=0;_<m.length;_++)m[_]=g.get(_).intValue();return m}}])}(),Bf=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(E){var g=this.pts[this.startIndex[E]].x,m=this.pts[this.startIndex[E+1]].x;return g>m?g:m}},{key:"getMinX",value:function(E){var g=this.pts[this.startIndex[E]].x,m=this.pts[this.startIndex[E+1]].x;return g<m?g:m}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var E=arguments[0],g=arguments[1],m=arguments[2],_=arguments[3];this.computeIntersectsForChain(this.startIndex[E],this.startIndex[E+1],g,g.startIndex[m],g.startIndex[m+1],_)}else if(arguments.length===6){var k=arguments[0],j=arguments[1],ie=arguments[2],de=arguments[3],Te=arguments[4],Pe=arguments[5];if(j-k==1&&Te-de==1)return Pe.addIntersections(this.e,k,ie.e,de),null;if(!this.overlaps(k,j,ie,de,Te))return null;var nt=Math.trunc((k+j)/2),ht=Math.trunc((de+Te)/2);k<nt&&(de<ht&&this.computeIntersectsForChain(k,nt,ie,de,ht,Pe),ht<Te&&this.computeIntersectsForChain(k,nt,ie,ht,Te,Pe)),nt<j&&(de<ht&&this.computeIntersectsForChain(nt,j,ie,de,ht,Pe),ht<Te&&this.computeIntersectsForChain(nt,j,ie,ht,Te,Pe))}}},{key:"overlaps",value:function(E,g,m,_,k){return xe.intersects(this.pts[E],this.pts[g],m.pts[_],m.pts[k])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(E,g){for(var m=0;m<this.startIndex.length-1;m++)for(var _=0;_<E.startIndex.length-1;_++)this.computeIntersectsForChain(m,E,_,g)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var E=arguments[0];this.e=E,this.pts=E.getCoordinates();var g=new Sf;this.startIndex=g.getChainStartIndices(this.pts)}}])}(),wh=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"getDepth",value:function(g,m){return this._depth[g][m]}},{key:"setDepth",value:function(g,m,_){this._depth[g][m]=_}},{key:"isNull",value:function(){if(arguments.length===0){for(var g=0;g<2;g++)for(var m=0;m<3;m++)if(this._depth[g][m]!==E.NULL_VALUE)return!1;return!0}if(arguments.length===1){var _=arguments[0];return this._depth[_][1]===E.NULL_VALUE}if(arguments.length===2){var k=arguments[0],j=arguments[1];return this._depth[k][j]===E.NULL_VALUE}}},{key:"normalize",value:function(){for(var g=0;g<2;g++)if(!this.isNull(g)){var m=this._depth[g][1];this._depth[g][2]<m&&(m=this._depth[g][2]),m<0&&(m=0);for(var _=1;_<3;_++){var k=0;this._depth[g][_]>m&&(k=1),this._depth[g][_]=k}}}},{key:"getDelta",value:function(g){return this._depth[g][ae.RIGHT]-this._depth[g][ae.LEFT]}},{key:"getLocation",value:function(g,m){return this._depth[g][m]<=0?Y.EXTERIOR:Y.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var g=arguments[0],m=0;m<2;m++)for(var _=1;_<3;_++){var k=g.getLocation(m,_);k!==Y.EXTERIOR&&k!==Y.INTERIOR||(this.isNull(m,_)?this._depth[m][_]=E.depthAtLocation(k):this._depth[m][_]+=E.depthAtLocation(k))}else if(arguments.length===3){var j=arguments[0],ie=arguments[1];arguments[2]===Y.INTERIOR&&this._depth[j][ie]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var g=0;g<2;g++)for(var m=0;m<3;m++)this._depth[g][m]=E.NULL_VALUE}},{key:"depthAtLocation",value:function(g){return g===Y.EXTERIOR?0:g===Y.INTERIOR?1:E.NULL_VALUE}}])}();wh.NULL_VALUE=-1;var Tf=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var m=new Array(2).fill(null);return m[0]=this.pts[0],m[1]=this.pts[1],new g(m,lr.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(m){this._isIsolated=m}},{key:"setName",value:function(m){this._name=m}},{key:"equals",value:function(m){if(!(m instanceof g))return!1;var _=m;if(this.pts.length!==_.pts.length)return!1;for(var k=!0,j=!0,ie=this.pts.length,de=0;de<this.pts.length;de++)if(this.pts[de].equals2D(_.pts[de])||(k=!1),this.pts[de].equals2D(_.pts[--ie])||(j=!1),!k&&!j)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var m=arguments[0];return this.pts[m]}}},{key:"print",value:function(m){m.print("edge "+this._name+": "),m.print("LINESTRING (");for(var _=0;_<this.pts.length;_++)_>0&&m.print(","),m.print(this.pts[_].x+" "+this.pts[_].y);m.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(m){g.updateIM(this._label,m)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(m){m.print("edge "+this._name+": ");for(var _=this.pts.length-1;_>=0;_--)m.print(this.pts[_]+" ");m.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new Bf(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new xe;for(var m=0;m<this.pts.length;m++)this._env.expandToInclude(this.pts[m])}return this._env}},{key:"addIntersection",value:function(m,_,k,j){var ie=new le(m.getIntersection(j)),de=_,Te=m.getEdgeDistance(k,j),Pe=de+1;if(Pe<this.pts.length){var nt=this.pts[Pe];ie.equals2D(nt)&&(de=Pe,Te=0)}this.eiList.add(ie,de,Te)}},{key:"toString",value:function(){var m=new Rt;m.append("edge "+this._name+": "),m.append("LINESTRING (");for(var _=0;_<this.pts.length;_++)_>0&&m.append(","),m.append(this.pts[_].x+" "+this.pts[_].y);return m.append(")  "+this._label+" "+this._depthDelta),m.toString()}},{key:"isPointwiseEqual",value:function(m){if(this.pts.length!==m.pts.length)return!1;for(var _=0;_<this.pts.length;_++)if(!this.pts[_].equals2D(m.pts[_]))return!1;return!0}},{key:"setDepthDelta",value:function(m){this._depthDelta=m}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(m,_,k){for(var j=0;j<m.getIntersectionNum();j++)this.addIntersection(m,_,k,j)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new rd(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new wh,this._depthDelta=0,arguments.length===1){var m=arguments[0];g.constructor_.call(this,m,null)}else if(arguments.length===2){var _=arguments[0],k=arguments[1];this.pts=_,this._label=k}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Cf&&arguments[0]instanceof lr))return d(g,"updateIM",this).apply(this,arguments);var m=arguments[0],_=arguments[1];_.setAtLeastIfValid(m.getLocation(0,ae.ON),m.getLocation(1,ae.ON),1),m.isArea()&&(_.setAtLeastIfValid(m.getLocation(0,ae.LEFT),m.getLocation(1,ae.LEFT),2),_.setAtLeastIfValid(m.getLocation(0,ae.RIGHT),m.getLocation(1,ae.RIGHT),2))}}])}(Vs),Is=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"setWorkingPrecisionModel",value:function(g){this._workingPrecisionModel=g}},{key:"insertUniqueEdge",value:function(g){var m=this._edgeList.findEqualEdge(g);if(m!==null){var _=m.getLabel(),k=g.getLabel();m.isPointwiseEqual(g)||(k=new lr(g.getLabel())).flip(),_.merge(k);var j=E.depthDelta(k),ie=m.getDepthDelta()+j;m.setDepthDelta(ie)}else this._edgeList.add(g),g.setDepthDelta(E.depthDelta(g.getLabel()))}},{key:"buildSubgraphs",value:function(g,m){for(var _=new yt,k=g.iterator();k.hasNext();){var j=k.next(),ie=j.getRightmostCoordinate(),de=new br(_).getDepth(ie);j.computeDepth(de),j.findResultEdges(),_.add(j),m.add(j.getDirectedEdges(),j.getNodes())}}},{key:"createSubgraphs",value:function(g){for(var m=new yt,_=g.getNodes().iterator();_.hasNext();){var k=_.next();if(!k.isVisited()){var j=new ce;j.create(k),m.add(j)}}return Tl.sort(m,Tl.reverseOrder()),m}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(g){if(this._workingNoder!==null)return this._workingNoder;var m=new ye,_=new Yi;return _.setPrecisionModel(g),m.setSegmentIntersector(new Tc(_)),m}},{key:"buffer",value:function(g,m){var _=this._workingPrecisionModel;_===null&&(_=g.getPrecisionModel()),this._geomFact=g.getFactory();var k=new nr(_,this._bufParams),j=new Yt(g,m,k).getCurves();if(j.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(j,_),this._graph=new Ur(new Gi),this._graph.addEdges(this._edgeList.getEdges());var ie=this.createSubgraphs(this._graph),de=new xi(this._geomFact);this.buildSubgraphs(ie,de);var Te=de.getPolygons();return Te.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(Te)}},{key:"computeNodedEdges",value:function(g,m){var _=this.getNoder(m);_.computeNodes(g);for(var k=_.getNodedSubstrings().iterator();k.hasNext();){var j=k.next(),ie=j.getCoordinates();if(ie.length!==2||!ie[0].equals2D(ie[1])){var de=j.getData(),Te=new Tf(j.getCoordinates(),new lr(de));this.insertUniqueEdge(Te)}}}},{key:"setNoder",value:function(g){this._workingNoder=g}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new ku;var g=arguments[0];this._bufParams=g}},{key:"depthDelta",value:function(g){var m=g.getLocation(0,ae.LEFT),_=g.getLocation(0,ae.RIGHT);return m===Y.INTERIOR&&_===Y.EXTERIOR?1:m===Y.EXTERIOR&&_===Y.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(g){for(var m=new Ia,_=new yt;g.hasNext();){var k=g.next(),j=m.createLineString(k.getCoordinates());_.add(j)}return m.buildGeometry(_)}}])}(),Xp=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"rescale",value:function(){if(pe(arguments[0],Ve))for(var g=arguments[0].iterator();g.hasNext();){var m=g.next();this.rescale(m.getCoordinates())}else if(arguments[0]instanceof Array){for(var _=arguments[0],k=0;k<_.length;k++)_[k].x=_[k].x/this._scaleFactor+this._offsetX,_[k].y=_[k].y/this._scaleFactor+this._offsetY;_.length===2&&_[0].equals2D(_[1])&&st.out.println(_)}}},{key:"scale",value:function(){if(pe(arguments[0],Ve)){for(var g=arguments[0],m=new yt(g.size()),_=g.iterator();_.hasNext();){var k=_.next();m.add(new Nl(this.scale(k.getCoordinates()),k.getData()))}return m}if(arguments[0]instanceof Array){for(var j=arguments[0],ie=new Array(j.length).fill(null),de=0;de<j.length;de++)ie[de]=new le(Math.round((j[de].x-this._offsetX)*this._scaleFactor),Math.round((j[de].y-this._offsetY)*this._scaleFactor),j[de].getZ());return It.removeRepeatedPoints(ie)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var g=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(g),g}},{key:"computeNodes",value:function(g){var m=g;this._isScaled&&(m=this.scale(g)),this._noder.computeNodes(m)}},{key:"interfaces_",get:function(){return[Du]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var g=arguments[0],m=arguments[1];E.constructor_.call(this,g,m,0,0)}else if(arguments.length===4){var _=arguments[0],k=arguments[1];this._noder=_,this._scaleFactor=k,this._isScaled=!this.isIntegerPrecision()}}}])}(),Nf=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var g=this._segStrings.iterator();g.hasNext();){var m=g.next().getCoordinates();this.checkEndPtVertexIntersections(m[0],this._segStrings),this.checkEndPtVertexIntersections(m[m.length-1],this._segStrings)}else if(arguments.length===2){for(var _=arguments[0],k=arguments[1].iterator();k.hasNext();)for(var j=k.next().getCoordinates(),ie=1;ie<j.length-1;ie++)if(j[ie].equals(_))throw new P("found endpt/interior pt intersection at index "+ie+" :pt "+_)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var g=this._segStrings.iterator();g.hasNext();)for(var m=g.next(),_=this._segStrings.iterator();_.hasNext();){var k=_.next();this.checkInteriorIntersections(m,k)}else if(arguments.length===2)for(var j=arguments[0],ie=arguments[1],de=j.getCoordinates(),Te=ie.getCoordinates(),Pe=0;Pe<de.length-1;Pe++)for(var nt=0;nt<Te.length-1;nt++)this.checkInteriorIntersections(j,Pe,ie,nt);else if(arguments.length===4){var ht=arguments[0],Ft=arguments[1],Zt=arguments[2],dr=arguments[3];if(ht===Zt&&Ft===dr)return null;var Er=ht.getCoordinates()[Ft],ln=ht.getCoordinates()[Ft+1],xn=Zt.getCoordinates()[dr],Sn=Zt.getCoordinates()[dr+1];if(this._li.computeIntersection(Er,ln,xn,Sn),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Er,ln)||this.hasInteriorIntersection(this._li,xn,Sn)))throw new P("found non-noded intersection at "+Er+"-"+ln+" and "+xn+"-"+Sn)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var g=this._segStrings.iterator();g.hasNext();){var m=g.next();this.checkCollapses(m)}else if(arguments.length===1)for(var _=arguments[0].getCoordinates(),k=0;k<_.length-2;k++)this.checkCollapse(_[k],_[k+1],_[k+2])}},{key:"hasInteriorIntersection",value:function(g,m,_){for(var k=0;k<g.getIntersectionNum();k++){var j=g.getIntersection(k);if(!j.equals(m)&&!j.equals(_))return!0}return!1}},{key:"checkCollapse",value:function(g,m,_){if(g.equals(_))throw new P("found non-noded collapse at "+E.fact.createLineString([g,m,_]))}}],[{key:"constructor_",value:function(){this._li=new Yi,this._segStrings=null;var g=arguments[0];this._segStrings=g}}])}();Nf.fact=new Ia;var If=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"intersectsScaled",value:function(g,m){var _=Math.min(g.x,m.x),k=Math.max(g.x,m.x),j=Math.min(g.y,m.y),ie=Math.max(g.y,m.y),de=this._maxx<_||this._minx>k||this._maxy<j||this._miny>ie;if(de)return!1;var Te=this.intersectsToleranceSquare(g,m);return K.isTrue(!(de&&Te),"Found bad envelope test"),Te}},{key:"initCorners",value:function(g){var m=.5;this._minx=g.x-m,this._maxx=g.x+m,this._miny=g.y-m,this._maxy=g.y+m,this._corner[0]=new le(this._maxx,this._maxy),this._corner[1]=new le(this._minx,this._maxy),this._corner[2]=new le(this._minx,this._miny),this._corner[3]=new le(this._maxx,this._miny)}},{key:"intersects",value:function(g,m){return this._scaleFactor===1?this.intersectsScaled(g,m):(this.copyScaled(g,this._p0Scaled),this.copyScaled(m,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(g){return Math.round(g*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(g,m){m.x=this.scale(g.x),m.y=this.scale(g.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var g=E.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new xe(this._originalPt.x-g,this._originalPt.x+g,this._originalPt.y-g,this._originalPt.y+g)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(g,m){return this._li.computeIntersection(g,m,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(g,m,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(g,m,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(g,m,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(g,m){var _=!1,k=!1;return this._li.computeIntersection(g,m,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(g,m,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(_=!0),this._li.computeIntersection(g,m,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(k=!0),this._li.computeIntersection(g,m,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!_||!k)||!!g.equals(this._pt)||!!m.equals(this._pt))))}},{key:"addSnappedNode",value:function(g,m){var _=g.getCoordinate(m),k=g.getCoordinate(m+1);return!!this.intersects(_,k)&&(g.addIntersection(this.getCoordinate(),m),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var g=arguments[0],m=arguments[1],_=arguments[2];if(this._originalPt=g,this._pt=g,this._scaleFactor=m,this._li=_,m<=0)throw new C("Scale factor must be non-zero");m!==1&&(this._pt=new le(this.scale(g.x),this.scale(g.y)),this._p0Scaled=new le,this._p1Scaled=new le),this.initCorners(this._pt)}}])}();If.SAFE_ENV_EXPANSION_FACTOR=.75;var rl=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var E=arguments[1];arguments[0].getLineSegment(E,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new ua}}])}(),_h=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(arguments.length===1){var E=arguments[0];return this.snap(E,null,-1)}if(arguments.length===3){var g=arguments[0],m=arguments[1],_=arguments[2],k=g.getSafeEnvelope(),j=new nd(g,m,_);return this._index.query(k,new(function(){return o(function ie(){i(this,ie)},[{key:"interfaces_",get:function(){return[bc]}},{key:"visitItem",value:function(ie){ie.select(k,j)}}])}())),j.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var E=arguments[0];this._index=E}}])}(),nd=function(E){function g(){var m;return i(this,g),m=n(this,g),g.constructor_.apply(m,arguments),m}return h(g,E),o(g,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof Bc))return d(g,"select",this,1).apply(this,arguments);var m=arguments[1],_=arguments[0].getContext();if(this._parentEdge===_&&(m===this._hotPixelVertexIndex||m+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(_,m)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var m=arguments[0],_=arguments[1],k=arguments[2];this._hotPixel=m,this._parentEdge=_,this._hotPixelVertexIndex=k}}])}(rl);_h.HotPixelSnapAction=nd;var w0=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(E,g,m,_){if(E===m&&g===_)return null;var k=E.getCoordinates()[g],j=E.getCoordinates()[g+1],ie=m.getCoordinates()[_],de=m.getCoordinates()[_+1];if(this._li.computeIntersection(k,j,ie,de),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var Te=0;Te<this._li.getIntersectionNum();Te++)this._interiorIntersections.add(this._li.getIntersection(Te));E.addIntersections(this._li,g,0),m.addIntersections(this._li,_,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[Ys]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var E=arguments[0];this._li=E,this._interiorIntersections=new yt}}])}(),Nc=function(){return o(function E(){i(this,E),E.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(E){var g=Nl.getNodedSubstrings(E),m=new Nf(g);try{m.checkValid()}catch(_){if(!(_ instanceof b))throw _;_.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return Nl.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(E,g){var m=this.findInteriorIntersections(E,g);this.computeIntersectionSnaps(m),this.computeVertexSnaps(E)}},{key:"findInteriorIntersections",value:function(E,g){var m=new w0(g);return this._noder.setSegmentIntersector(m),this._noder.computeNodes(E),m.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(pe(arguments[0],Ve))for(var E=arguments[0].iterator();E.hasNext();){var g=E.next();this.computeVertexSnaps(g)}else if(arguments[0]instanceof Nl)for(var m=arguments[0],_=m.getCoordinates(),k=0;k<_.length;k++){var j=new If(_[k],this._scaleFactor,this._li);this._pointSnapper.snap(j,m,k)&&m.addIntersection(_[k],k)}}},{key:"computeNodes",value:function(E){this._nodedSegStrings=E,this._noder=new ye,this._pointSnapper=new _h(this._noder.getIndex()),this.snapRound(E,this._li)}},{key:"computeIntersectionSnaps",value:function(E){for(var g=E.iterator();g.hasNext();){var m=g.next(),_=new If(m,this._scaleFactor,this._li);this._pointSnapper.snap(_)}}},{key:"interfaces_",get:function(){return[Du]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var E=arguments[0];this._pm=E,this._li=new Yi,this._li.setPrecisionModel(E),this._scaleFactor=E.getScale()}}])}(),nl=function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return o(E,[{key:"bufferFixedPrecision",value:function(g){var m=new Xp(new Nc(new Ti(1)),g.getScale()),_=new Is(this._bufParams);_.setWorkingPrecisionModel(g),_.setNoder(m),this._resultGeometry=_.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var g=E.MAX_PRECISION_DIGITS;g>=0;g--){try{this.bufferReducedPrecision(g)}catch(j){if(!(j instanceof vt))throw j;this._saveException=j}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var m=arguments[0],_=E.precisionScaleFactor(this._argGeom,this._distance,m),k=new Ti(_);this.bufferFixedPrecision(k)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var g=this._argGeom.getFactory().getPrecisionModel();g.getType()===Ti.FIXED?this.bufferFixedPrecision(g):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(g){this._bufParams.setQuadrantSegments(g)}},{key:"bufferOriginalPrecision",value:function(){try{var g=new Is(this._bufParams);this._resultGeometry=g.buffer(this._argGeom,this._distance)}catch(m){if(!(m instanceof P))throw m;this._saveException=m}}},{key:"getResultGeometry",value:function(g){return this._distance=g,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(g){this._bufParams.setEndCapStyle(g)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new x,this._resultGeometry=null,this._saveException=null,arguments.length===1){var g=arguments[0];this._argGeom=g}else if(arguments.length===2){var m=arguments[0],_=arguments[1];this._argGeom=m,this._bufParams=_}}},{key:"bufferOp",value:function(){if(arguments.length===2){var g=arguments[1];return new E(arguments[0]).getResultGeometry(g)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Be&&typeof arguments[1]=="number"){var m=arguments[1],_=arguments[2],k=new E(arguments[0]);return k.setQuadrantSegments(_),k.getResultGeometry(m)}if(arguments[2]instanceof x&&arguments[0]instanceof Be&&typeof arguments[1]=="number"){var j=arguments[1];return new E(arguments[0],arguments[2]).getResultGeometry(j)}}else if(arguments.length===4){var ie=arguments[1],de=arguments[2],Te=arguments[3],Pe=new E(arguments[0]);return Pe.setQuadrantSegments(de),Pe.setEndCapStyle(Te),Pe.getResultGeometry(ie)}}},{key:"precisionScaleFactor",value:function(g,m,_){var k=g.getEnvelopeInternal(),j=wt.max(Math.abs(k.getMaxX()),Math.abs(k.getMaxY()),Math.abs(k.getMinX()),Math.abs(k.getMinY()))+2*(m>0?m:0),ie=_-Math.trunc(Math.log(j)/Math.log(10)+1);return Math.pow(10,ie)}}])}();nl.CAP_ROUND=x.CAP_ROUND,nl.CAP_BUTT=x.CAP_FLAT,nl.CAP_FLAT=x.CAP_FLAT,nl.CAP_SQUARE=x.CAP_SQUARE,nl.MAX_PRECISION_DIGITS=12;var Xs=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],hs=function(){return o(function E(g){i(this,E),this.geometryFactory=g||new Ia},[{key:"read",value:function(E){var g,m=(g=typeof E=="string"?JSON.parse(E):E).type;if(!wa[m])throw new Error("Unknown GeoJSON type: "+g.type);return Xs.indexOf(m)!==-1?wa[m].call(this,g.coordinates):m==="GeometryCollection"?wa[m].call(this,g.geometries):wa[m].call(this,g)}},{key:"write",value:function(E){var g=E.getGeometryType();if(!La[g])throw new Error("Geometry is not supported");return La[g].call(this,E)}}])}(),wa={Feature:function(E){var g={};for(var m in E)g[m]=E[m];if(E.geometry){var _=E.geometry.type;if(!wa[_])throw new Error("Unknown GeoJSON type: "+E.type);g.geometry=this.read(E.geometry)}return E.bbox&&(g.bbox=wa.bbox.call(this,E.bbox)),g},FeatureCollection:function(E){var g={};if(E.features){g.features=[];for(var m=0;m<E.features.length;++m)g.features.push(this.read(E.features[m]))}return E.bbox&&(g.bbox=this.parse.bbox.call(this,E.bbox)),g},coordinates:function(E){for(var g=[],m=0;m<E.length;++m){var _=E[m];g.push(a(le,p(_)))}return g},bbox:function(E){return this.geometryFactory.createLinearRing([new le(E[0],E[1]),new le(E[2],E[1]),new le(E[2],E[3]),new le(E[0],E[3]),new le(E[0],E[1])])},Point:function(E){var g=a(le,p(E));return this.geometryFactory.createPoint(g)},MultiPoint:function(E){for(var g=[],m=0;m<E.length;++m)g.push(wa.Point.call(this,E[m]));return this.geometryFactory.createMultiPoint(g)},LineString:function(E){var g=wa.coordinates.call(this,E);return this.geometryFactory.createLineString(g)},MultiLineString:function(E){for(var g=[],m=0;m<E.length;++m)g.push(wa.LineString.call(this,E[m]));return this.geometryFactory.createMultiLineString(g)},Polygon:function(E){for(var g=wa.coordinates.call(this,E[0]),m=this.geometryFactory.createLinearRing(g),_=[],k=1;k<E.length;++k){var j=E[k],ie=wa.coordinates.call(this,j),de=this.geometryFactory.createLinearRing(ie);_.push(de)}return this.geometryFactory.createPolygon(m,_)},MultiPolygon:function(E){for(var g=[],m=0;m<E.length;++m){var _=E[m];g.push(wa.Polygon.call(this,_))}return this.geometryFactory.createMultiPolygon(g)},GeometryCollection:function(E){for(var g=[],m=0;m<E.length;++m){var _=E[m];g.push(this.read(_))}return this.geometryFactory.createGeometryCollection(g)}},La={coordinate:function(E){var g=[E.x,E.y];return E.z&&g.push(E.z),E.m&&g.push(E.m),g},Point:function(E){return{type:"Point",coordinates:La.coordinate.call(this,E.getCoordinate())}},MultiPoint:function(E){for(var g=[],m=0;m<E._geometries.length;++m){var _=E._geometries[m],k=La.Point.call(this,_);g.push(k.coordinates)}return{type:"MultiPoint",coordinates:g}},LineString:function(E){for(var g=[],m=E.getCoordinates(),_=0;_<m.length;++_){var k=m[_];g.push(La.coordinate.call(this,k))}return{type:"LineString",coordinates:g}},MultiLineString:function(E){for(var g=[],m=0;m<E._geometries.length;++m){var _=E._geometries[m],k=La.LineString.call(this,_);g.push(k.coordinates)}return{type:"MultiLineString",coordinates:g}},Polygon:function(E){var g=[],m=La.LineString.call(this,E._shell);g.push(m.coordinates);for(var _=0;_<E._holes.length;++_){var k=E._holes[_],j=La.LineString.call(this,k);g.push(j.coordinates)}return{type:"Polygon",coordinates:g}},MultiPolygon:function(E){for(var g=[],m=0;m<E._geometries.length;++m){var _=E._geometries[m],k=La.Polygon.call(this,_);g.push(k.coordinates)}return{type:"MultiPolygon",coordinates:g}},GeometryCollection:function(E){for(var g=[],m=0;m<E._geometries.length;++m){var _=E._geometries[m],k=_.getGeometryType();g.push(La[k].call(this,_))}return{type:"GeometryCollection",geometries:g}}};return{BufferOp:nl,GeoJSONReader:function(){return o(function E(g){i(this,E),this.parser=new hs(g||new Ia)},[{key:"read",value:function(E){return this.parser.read(E)}}])}(),GeoJSONWriter:function(){return o(function E(){i(this,E),this.parser=new hs(this.geometryFactory)},[{key:"write",value:function(E){return this.parser.write(E)}}])}()}})})(w7);var kAe=w7.exports;const RAe=Af(kAe);function zA(){return new ow}function ow(){this.reset()}ow.prototype={constructor:ow,reset:function(){this.s=this.t=0},add:function(r){mF(Zy,r,this.t),mF(this,Zy.s,this.s),this.s?this.t+=Zy.t:this.s=Zy.t},valueOf:function(){return this.s}};var Zy=new ow;function mF(r,e,t){var n=r.s=e+t,i=n-e,a=n-i;r.t=e-a+(t-i)}var Hi=1e-6,ai=Math.PI,Kc=ai/2,vF=ai/4,ah=ai*2,Yf=180/ai,gu=ai/180,bs=Math.abs,OAe=Math.atan,ip=Math.atan2,aa=Math.cos,sa=Math.sin,Ip=Math.sqrt;function _7(r){return r>1?0:r<-1?ai:Math.acos(r)}function $d(r){return r>1?Kc:r<-1?-Kc:Math.asin(r)}function Om(){}function lw(r,e){r&&xF.hasOwnProperty(r.type)&&xF[r.type](r,e)}var yF={Feature:function(r,e){lw(r.geometry,e)},FeatureCollection:function(r,e){for(var t=r.features,n=-1,i=t.length;++n<i;)lw(t[n].geometry,e)}},xF={Sphere:function(r,e){e.sphere()},Point:function(r,e){r=r.coordinates,e.point(r[0],r[1],r[2])},MultiPoint:function(r,e){for(var t=r.coordinates,n=-1,i=t.length;++n<i;)r=t[n],e.point(r[0],r[1],r[2])},LineString:function(r,e){FS(r.coordinates,e,0)},MultiLineString:function(r,e){for(var t=r.coordinates,n=-1,i=t.length;++n<i;)FS(t[n],e,0)},Polygon:function(r,e){wF(r.coordinates,e)},MultiPolygon:function(r,e){for(var t=r.coordinates,n=-1,i=t.length;++n<i;)wF(t[n],e)},GeometryCollection:function(r,e){for(var t=r.geometries,n=-1,i=t.length;++n<i;)lw(t[n],e)}};function FS(r,e,t){var n=-1,i=r.length-t,a;for(e.lineStart();++n<i;)a=r[n],e.point(a[0],a[1],a[2]);e.lineEnd()}function wF(r,e){var t=-1,n=r.length;for(e.polygonStart();++t<n;)FS(r[t],e,1);e.polygonEnd()}function PAe(r,e){r&&yF.hasOwnProperty(r.type)?yF[r.type](r,e):lw(r,e)}zA();zA();function MS(r){return[ip(r[1],r[0]),$d(r[2])]}function ap(r){var e=r[0],t=r[1],n=aa(t);return[n*aa(e),n*sa(e),sa(t)]}function Jy(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function uw(r,e){return[r[1]*e[2]-r[2]*e[1],r[2]*e[0]-r[0]*e[2],r[0]*e[1]-r[1]*e[0]]}function Pb(r,e){r[0]+=e[0],r[1]+=e[1],r[2]+=e[2]}function e2(r,e){return[r[0]*e,r[1]*e,r[2]*e]}function LS(r){var e=Ip(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]/=e,r[1]/=e,r[2]/=e}zA();function E7(r,e){function t(n,i){return n=r(n,i),e(n[0],n[1])}return r.invert&&e.invert&&(t.invert=function(n,i){return n=e.invert(n,i),n&&r.invert(n[0],n[1])}),t}function DS(r,e){return[r>ai?r-ah:r<-ai?r+ah:r,e]}DS.invert=DS;function UAe(r,e,t){return(r%=ah)?e||t?E7(EF(r),bF(e,t)):EF(r):e||t?bF(e,t):DS}function _F(r){return function(e,t){return e+=r,[e>ai?e-ah:e<-ai?e+ah:e,t]}}function EF(r){var e=_F(r);return e.invert=_F(-r),e}function bF(r,e){var t=aa(r),n=sa(r),i=aa(e),a=sa(e);function s(o,l){var u=aa(l),c=aa(o)*u,h=sa(o)*u,f=sa(l),A=f*t+c*n;return[ip(h*i-A*a,c*t-f*n),$d(A*i+h*a)]}return s.invert=function(o,l){var u=aa(l),c=aa(o)*u,h=sa(o)*u,f=sa(l),A=f*i-h*a;return[ip(h*i+f*a,c*t+A*n),$d(A*t-c*n)]},s}function QAe(r,e,t,n,i,a){if(t){var s=aa(e),o=sa(e),l=n*t;i==null?(i=e+n*ah,a=e-l/2):(i=CF(s,i),a=CF(s,a),(n>0?i<a:i>a)&&(i+=n*ah));for(var u,c=i;n>0?c>a:c<a;c-=l)u=MS([s,-o*aa(c),-o*sa(c)]),r.point(u[0],u[1])}}function CF(r,e){e=ap(e),e[0]-=r,LS(e);var t=_7(-e[1]);return((-e[2]<0?-t:t)+ah-Hi)%ah}function b7(){var r=[],e;return{point:function(t,n){e.push([t,n])},lineStart:function(){r.push(e=[])},lineEnd:Om,rejoin:function(){r.length>1&&r.push(r.pop().concat(r.shift()))},result:function(){var t=r;return r=[],e=null,t}}}function GAe(r,e,t,n,i,a){var s=r[0],o=r[1],l=e[0],u=e[1],c=0,h=1,f=l-s,A=u-o,d;if(d=t-s,!(!f&&d>0)){if(d/=f,f<0){if(d<c)return;d<h&&(h=d)}else if(f>0){if(d>h)return;d>c&&(c=d)}if(d=i-s,!(!f&&d<0)){if(d/=f,f<0){if(d>h)return;d>c&&(c=d)}else if(f>0){if(d<c)return;d<h&&(h=d)}if(d=n-o,!(!A&&d>0)){if(d/=A,A<0){if(d<c)return;d<h&&(h=d)}else if(A>0){if(d>h)return;d>c&&(c=d)}if(d=a-o,!(!A&&d<0)){if(d/=A,A<0){if(d>h)return;d>c&&(c=d)}else if(A>0){if(d<c)return;d<h&&(h=d)}return c>0&&(r[0]=s+c*f,r[1]=o+c*A),h<1&&(e[0]=s+h*f,e[1]=o+h*A),!0}}}}}function ix(r,e){return bs(r[0]-e[0])<Hi&&bs(r[1]-e[1])<Hi}function t2(r,e,t,n){this.x=r,this.z=e,this.o=t,this.e=n,this.v=!1,this.n=this.p=null}function C7(r,e,t,n,i){var a=[],s=[],o,l;if(r.forEach(function(d){if(!((p=d.length-1)<=0)){var p,y=d[0],v=d[p],w;if(ix(y,v)){for(i.lineStart(),o=0;o<p;++o)i.point((y=d[o])[0],y[1]);i.lineEnd();return}a.push(w=new t2(y,d,null,!0)),s.push(w.o=new t2(y,null,w,!1)),a.push(w=new t2(v,d,null,!1)),s.push(w.o=new t2(v,null,w,!0))}}),!!a.length){for(s.sort(e),SF(a),SF(s),o=0,l=s.length;o<l;++o)s[o].e=t=!t;for(var u=a[0],c,h;;){for(var f=u,A=!0;f.v;)if((f=f.n)===u)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(A)for(o=0,l=c.length;o<l;++o)i.point((h=c[o])[0],h[1]);else n(f.x,f.n.x,1,i);f=f.n}else{if(A)for(c=f.p.z,o=c.length-1;o>=0;--o)i.point((h=c[o])[0],h[1]);else n(f.x,f.p.x,-1,i);f=f.p}f=f.o,c=f.z,A=!A}while(!f.v);i.lineEnd()}}}function SF(r){if(e=r.length){for(var e,t=0,n=r[0],i;++t<e;)n.n=i=r[t],i.p=n,n=i;n.n=i=r[0],i.p=n}}function S7(r,e){return r<e?-1:r>e?1:r>=e?0:NaN}function HAe(r){return r.length===1&&(r=zAe(r)),{left:function(e,t,n,i){for(n==null&&(n=0),i==null&&(i=e.length);n<i;){var a=n+i>>>1;r(e[a],t)<0?n=a+1:i=a}return n},right:function(e,t,n,i){for(n==null&&(n=0),i==null&&(i=e.length);n<i;){var a=n+i>>>1;r(e[a],t)>0?i=a:n=a+1}return n}}}function zAe(r){return function(e,t){return S7(r(e),t)}}HAe(S7);function B7(r){for(var e=r.length,t,n=-1,i=0,a,s;++n<e;)i+=r[n].length;for(a=new Array(i);--e>=0;)for(s=r[e],t=s.length;--t>=0;)a[--i]=s[t];return a}var Pm=1e9,r2=-Pm;function qAe(r,e,t,n){function i(u,c){return r<=u&&u<=t&&e<=c&&c<=n}function a(u,c,h,f){var A=0,d=0;if(u==null||(A=s(u,h))!==(d=s(c,h))||l(u,c)<0^h>0)do f.point(A===0||A===3?r:t,A>1?n:e);while((A=(A+h+4)%4)!==d);else f.point(c[0],c[1])}function s(u,c){return bs(u[0]-r)<Hi?c>0?0:3:bs(u[0]-t)<Hi?c>0?2:1:bs(u[1]-e)<Hi?c>0?1:0:c>0?3:2}function o(u,c){return l(u.x,c.x)}function l(u,c){var h=s(u,1),f=s(c,1);return h!==f?h-f:h===0?c[1]-u[1]:h===1?u[0]-c[0]:h===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,h=b7(),f,A,d,p,y,v,w,x,b,C,S,I={point:B,lineStart:N,lineEnd:O,polygonStart:M,polygonEnd:F};function B(G,R){i(G,R)&&c.point(G,R)}function T(){for(var G=0,R=0,U=A.length;R<U;++R)for(var W=A[R],Q=1,re=W.length,oe=W[0],P,z,K=oe[0],J=oe[1];Q<re;++Q)P=K,z=J,oe=W[Q],K=oe[0],J=oe[1],z<=n?J>n&&(K-P)*(n-z)>(J-z)*(r-P)&&++G:J<=n&&(K-P)*(n-z)<(J-z)*(r-P)&&--G;return G}function M(){c=h,f=[],A=[],S=!0}function F(){var G=T(),R=S&&G,U=(f=B7(f)).length;(R||U)&&(u.polygonStart(),R&&(u.lineStart(),a(null,null,1,u),u.lineEnd()),U&&C7(f,o,G,a,u),u.polygonEnd()),c=u,f=A=d=null}function N(){I.point=L,A&&A.push(d=[]),C=!0,b=!1,w=x=NaN}function O(){f&&(L(p,y),v&&b&&h.rejoin(),f.push(h.result())),I.point=B,b&&c.lineEnd()}function L(G,R){var U=i(G,R);if(A&&d.push([G,R]),C)p=G,y=R,v=U,C=!1,U&&(c.lineStart(),c.point(G,R));else if(U&&b)c.point(G,R);else{var W=[w=Math.max(r2,Math.min(Pm,w)),x=Math.max(r2,Math.min(Pm,x))],Q=[G=Math.max(r2,Math.min(Pm,G)),R=Math.max(r2,Math.min(Pm,R))];GAe(W,Q,r,e,t,n)?(b||(c.lineStart(),c.point(W[0],W[1])),c.point(Q[0],Q[1]),U||c.lineEnd(),S=!1):U&&(c.lineStart(),c.point(G,R),S=!1)}w=G,x=R,b=U}return I}}var Ub=zA();function jAe(r,e){var t=e[0],n=e[1],i=[sa(t),-aa(t),0],a=0,s=0;Ub.reset();for(var o=0,l=r.length;o<l;++o)if(c=(u=r[o]).length)for(var u,c,h=u[c-1],f=h[0],A=h[1]/2+vF,d=sa(A),p=aa(A),y=0;y<c;++y,f=w,d=b,p=C,h=v){var v=u[y],w=v[0],x=v[1]/2+vF,b=sa(x),C=aa(x),S=w-f,I=S>=0?1:-1,B=I*S,T=B>ai,M=d*b;if(Ub.add(ip(M*I*sa(B),p*C+M*aa(B))),a+=T?S+I*ah:S,T^f>=t^w>=t){var F=uw(ap(h),ap(v));LS(F);var N=uw(i,F);LS(N);var O=(T^S>=0?-1:1)*$d(N[2]);(n>O||n===O&&(F[0]||F[1]))&&(s+=T^S>=0?1:-1)}}return(a<-Hi||a<Hi&&Ub<-Hi)^s&1}zA();function BF(r){return r}zA();zA();var sp=1/0,cw=sp,r1=-sp,hw=r1,TF={point:$Ae,lineStart:Om,lineEnd:Om,polygonStart:Om,polygonEnd:Om,result:function(){var r=[[sp,cw],[r1,hw]];return r1=hw=-(cw=sp=1/0),r}};function $Ae(r,e){r<sp&&(sp=r),r>r1&&(r1=r),e<cw&&(cw=e),e>hw&&(hw=e)}zA();function T7(r,e,t,n){return function(i,a){var s=e(a),o=i.invert(n[0],n[1]),l=b7(),u=e(l),c=!1,h,f,A,d={point:p,lineStart:v,lineEnd:w,polygonStart:function(){d.point=x,d.lineStart=b,d.lineEnd=C,f=[],h=[]},polygonEnd:function(){d.point=p,d.lineStart=v,d.lineEnd=w,f=B7(f);var S=jAe(h,o);f.length?(c||(a.polygonStart(),c=!0),C7(f,VAe,S,t,a)):S&&(c||(a.polygonStart(),c=!0),a.lineStart(),t(null,null,1,a),a.lineEnd()),c&&(a.polygonEnd(),c=!1),f=h=null},sphere:function(){a.polygonStart(),a.lineStart(),t(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function p(S,I){var B=i(S,I);r(S=B[0],I=B[1])&&a.point(S,I)}function y(S,I){var B=i(S,I);s.point(B[0],B[1])}function v(){d.point=y,s.lineStart()}function w(){d.point=p,s.lineEnd()}function x(S,I){A.push([S,I]);var B=i(S,I);u.point(B[0],B[1])}function b(){u.lineStart(),A=[]}function C(){x(A[0][0],A[0][1]),u.lineEnd();var S=u.clean(),I=l.result(),B,T=I.length,M,F,N;if(A.pop(),h.push(A),A=null,!!T){if(S&1){if(F=I[0],(M=F.length-1)>0){for(c||(a.polygonStart(),c=!0),a.lineStart(),B=0;B<M;++B)a.point((N=F[B])[0],N[1]);a.lineEnd()}return}T>1&&S&2&&I.push(I.pop().concat(I.shift())),f.push(I.filter(KAe))}}return d}}function KAe(r){return r.length>1}function VAe(r,e){return((r=r.x)[0]<0?r[1]-Kc-Hi:Kc-r[1])-((e=e.x)[0]<0?e[1]-Kc-Hi:Kc-e[1])}const NF=T7(function(){return!0},WAe,XAe,[-ai,-Kc]);function WAe(r){var e=NaN,t=NaN,n=NaN,i;return{lineStart:function(){r.lineStart(),i=1},point:function(a,s){var o=a>0?ai:-ai,l=bs(a-e);bs(l-ai)<Hi?(r.point(e,t=(t+s)/2>0?Kc:-Kc),r.point(n,t),r.lineEnd(),r.lineStart(),r.point(o,t),r.point(a,t),i=0):n!==o&&l>=ai&&(bs(e-n)<Hi&&(e-=n*Hi),bs(a-o)<Hi&&(a-=o*Hi),t=YAe(e,t,a,s),r.point(n,t),r.lineEnd(),r.lineStart(),r.point(o,t),i=0),r.point(e=a,t=s),n=o},lineEnd:function(){r.lineEnd(),e=t=NaN},clean:function(){return 2-i}}}function YAe(r,e,t,n){var i,a,s=sa(r-t);return bs(s)>Hi?OAe((sa(e)*(a=aa(n))*sa(t)-sa(n)*(i=aa(e))*sa(r))/(i*a*s)):(e+n)/2}function XAe(r,e,t,n){var i;if(r==null)i=t*Kc,n.point(-ai,i),n.point(0,i),n.point(ai,i),n.point(ai,0),n.point(ai,-i),n.point(0,-i),n.point(-ai,-i),n.point(-ai,0),n.point(-ai,i);else if(bs(r[0]-e[0])>Hi){var a=r[0]<e[0]?ai:-ai;i=t*a/2,n.point(-a,i),n.point(0,i),n.point(a,i)}else n.point(e[0],e[1])}function ZAe(r,e){var t=aa(r),n=t>0,i=bs(t)>Hi;function a(c,h,f,A){QAe(A,r,e,f,c,h)}function s(c,h){return aa(c)*aa(h)>t}function o(c){var h,f,A,d,p;return{lineStart:function(){d=A=!1,p=1},point:function(y,v){var w=[y,v],x,b=s(y,v),C=n?b?0:u(y,v):b?u(y+(y<0?ai:-ai),v):0;if(!h&&(d=A=b)&&c.lineStart(),b!==A&&(x=l(h,w),(!x||ix(h,x)||ix(w,x))&&(w[0]+=Hi,w[1]+=Hi,b=s(w[0],w[1]))),b!==A)p=0,b?(c.lineStart(),x=l(w,h),c.point(x[0],x[1])):(x=l(h,w),c.point(x[0],x[1]),c.lineEnd()),h=x;else if(i&&h&&n^b){var S;!(C&f)&&(S=l(w,h,!0))&&(p=0,n?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1])))}b&&(!h||!ix(h,w))&&c.point(w[0],w[1]),h=w,A=b,f=C},lineEnd:function(){A&&c.lineEnd(),h=null},clean:function(){return p|(d&&A)<<1}}}function l(c,h,f){var A=ap(c),d=ap(h),p=[1,0,0],y=uw(A,d),v=Jy(y,y),w=y[0],x=v-w*w;if(!x)return!f&&c;var b=t*v/x,C=-t*w/x,S=uw(p,y),I=e2(p,b),B=e2(y,C);Pb(I,B);var T=S,M=Jy(I,T),F=Jy(T,T),N=M*M-F*(Jy(I,I)-1);if(!(N<0)){var O=Ip(N),L=e2(T,(-M-O)/F);if(Pb(L,I),L=MS(L),!f)return L;var G=c[0],R=h[0],U=c[1],W=h[1],Q;R<G&&(Q=G,G=R,R=Q);var re=R-G,oe=bs(re-ai)<Hi,P=oe||re<Hi;if(!oe&&W<U&&(Q=U,U=W,W=Q),P?oe?U+W>0^L[1]<(bs(L[0]-G)<Hi?U:W):U<=L[1]&&L[1]<=W:re>ai^(G<=L[0]&&L[0]<=R)){var z=e2(T,(-M+O)/F);return Pb(z,I),[L,MS(z)]}}}function u(c,h){var f=n?r:ai-r,A=0;return c<-f?A|=1:c>f&&(A|=2),h<-f?A|=4:h>f&&(A|=8),A}return T7(s,o,a,n?[0,-r]:[-ai,r-ai])}function N7(r){return function(e){var t=new kS;for(var n in r)t[n]=r[n];return t.stream=e,t}}function kS(){}kS.prototype={constructor:kS,point:function(r,e){this.stream.point(r,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function I7(r,e,t){var n=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=r.clipExtent&&r.clipExtent();r.scale(150).translate([0,0]),a!=null&&r.clipExtent(null),PAe(t,r.stream(TF));var s=TF.result(),o=Math.min(n/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),l=+e[0][0]+(n-o*(s[1][0]+s[0][0]))/2,u=+e[0][1]+(i-o*(s[1][1]+s[0][1]))/2;return a!=null&&r.clipExtent(a),r.scale(o*150).translate([l,u])}function JAe(r,e,t){return I7(r,[[0,0],e],t)}var IF=16,ede=aa(30*gu);function FF(r,e){return+e?rde(r,e):tde(r)}function tde(r){return N7({point:function(e,t){e=r(e,t),this.stream.point(e[0],e[1])}})}function rde(r,e){function t(n,i,a,s,o,l,u,c,h,f,A,d,p,y){var v=u-n,w=c-i,x=v*v+w*w;if(x>4*e&&p--){var b=s+f,C=o+A,S=l+d,I=Ip(b*b+C*C+S*S),B=$d(S/=I),T=bs(bs(S)-1)<Hi||bs(a-h)<Hi?(a+h)/2:ip(C,b),M=r(T,B),F=M[0],N=M[1],O=F-n,L=N-i,G=w*O-v*L;(G*G/x>e||bs((v*O+w*L)/x-.5)>.3||s*f+o*A+l*d<ede)&&(t(n,i,a,s,o,l,F,N,T,b/=I,C/=I,S,p,y),y.point(F,N),t(F,N,T,b,C,S,u,c,h,f,A,d,p,y))}}return function(n){var i,a,s,o,l,u,c,h,f,A,d,p,y={point:v,lineStart:w,lineEnd:b,polygonStart:function(){n.polygonStart(),y.lineStart=C},polygonEnd:function(){n.polygonEnd(),y.lineStart=w}};function v(B,T){B=r(B,T),n.point(B[0],B[1])}function w(){h=NaN,y.point=x,n.lineStart()}function x(B,T){var M=ap([B,T]),F=r(B,T);t(h,f,c,A,d,p,h=F[0],f=F[1],c=B,A=M[0],d=M[1],p=M[2],IF,n),n.point(h,f)}function b(){y.point=v,n.lineEnd()}function C(){w(),y.point=S,y.lineEnd=I}function S(B,T){x(i=B,T),a=h,s=f,o=A,l=d,u=p,y.point=x}function I(){t(h,f,c,A,d,p,a,s,i,o,l,u,IF,n),y.lineEnd=b,b()}return y}}var nde=N7({point:function(r,e){this.stream.point(r*gu,e*gu)}});function ide(r){return ade(function(){return r})()}function ade(r){var e,t=150,n=480,i=250,a,s,o=0,l=0,u=0,c=0,h=0,f,A,d=null,p=NF,y=null,v,w,x,b=BF,C=.5,S=FF(F,C),I,B;function T(L){return L=A(L[0]*gu,L[1]*gu),[L[0]*t+a,s-L[1]*t]}function M(L){return L=A.invert((L[0]-a)/t,(s-L[1])/t),L&&[L[0]*Yf,L[1]*Yf]}function F(L,G){return L=e(L,G),[L[0]*t+a,s-L[1]*t]}T.stream=function(L){return I&&B===L?I:I=nde(p(f,S(b(B=L))))},T.clipAngle=function(L){return arguments.length?(p=+L?ZAe(d=L*gu,6*gu):(d=null,NF),O()):d*Yf},T.clipExtent=function(L){return arguments.length?(b=L==null?(y=v=w=x=null,BF):qAe(y=+L[0][0],v=+L[0][1],w=+L[1][0],x=+L[1][1]),O()):y==null?null:[[y,v],[w,x]]},T.scale=function(L){return arguments.length?(t=+L,N()):t},T.translate=function(L){return arguments.length?(n=+L[0],i=+L[1],N()):[n,i]},T.center=function(L){return arguments.length?(o=L[0]%360*gu,l=L[1]%360*gu,N()):[o*Yf,l*Yf]},T.rotate=function(L){return arguments.length?(u=L[0]%360*gu,c=L[1]%360*gu,h=L.length>2?L[2]%360*gu:0,N()):[u*Yf,c*Yf,h*Yf]},T.precision=function(L){return arguments.length?(S=FF(F,C=L*L),O()):Ip(C)},T.fitExtent=function(L,G){return I7(T,L,G)},T.fitSize=function(L,G){return JAe(T,L,G)};function N(){A=E7(f=UAe(u,c,h),e);var L=e(o,l);return a=n-L[0]*t,s=i+L[1]*t,O()}function O(){return I=B=null,T}return function(){return e=r.apply(this,arguments),T.invert=e.invert&&M,N()}}function F7(r){return function(e,t){var n=aa(e),i=aa(t),a=r(n*i);return[a*i*sa(e),a*sa(t)]}}function M7(r){return function(e,t){var n=Ip(e*e+t*t),i=r(n),a=sa(i),s=aa(i);return[ip(e*a,n*s),$d(n&&t*a/n)]}}var sde=F7(function(r){return Ip(2/(1+r))});sde.invert=M7(function(r){return 2*$d(r/2)});var L7=F7(function(r){return(r=_7(r))&&r/sa(r)});L7.invert=M7(function(r){return r});function ode(){return ide(L7).scale(79.4188).clipAngle(180-.001)}function MF(r,e){return[r,e]}MF.invert=MF;var{BufferOp:lde,GeoJSONReader:ude,GeoJSONWriter:cde}=RAe;function hde(r,e,t){t=t||{};var n=t.units||"kilometers",i=t.steps||8;if(!r)throw new Error("geojson is required");if(typeof t!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(e===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var a=[];switch(r.type){case"GeometryCollection":return D1(r,function(s){var o=ax(s,e,n,i);o&&a.push(o)}),$c(a);case"FeatureCollection":return pF(r,function(s){var o=ax(s,e,n,i);o&&pF(o,function(l){l&&a.push(l)})}),$c(a)}return ax(r,e,n,i)}function ax(r,e,t,n){var i=r.properties||{},a=r.type==="Feature"?r.geometry:r;if(a.type==="GeometryCollection"){var s=[];return D1(r,function(p){var y=ax(p,e,t,n);y&&s.push(y)}),$c(s)}var o=fde(a),l={type:a.type,coordinates:k7(a.coordinates,o)},u=new ude,c=u.read(l),h=FAe(MAe(e,t),"meters"),f=lde.bufferOp(c,h,n),A=new cde;if(f=A.write(f),!D7(f.coordinates)){var d={type:f.type,coordinates:R7(f.coordinates,o)};return F_(d,i)}}function D7(r){return Array.isArray(r[0])?D7(r[0]):isNaN(r[0])}function k7(r,e){return typeof r[0]!="object"?e(r):r.map(function(t){return k7(t,e)})}function R7(r,e){return typeof r[0]!="object"?e.invert(r):r.map(function(t){return R7(t,e)})}function fde(r){var e=DAe(r).geometry.coordinates,t=[-e[0],-e[1]];return ode().rotate(t).scale(sl)}var Ade=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Qb=Math.ceil,cu=Math.floor,ul="[BigNumber Error] ",LF=ul+"Number primitive has more than 15 significant digits: ",Hu=1e14,cn=14,Gb=9007199254740991,Hb=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Xf=1e7,ds=1e9;function O7(r){var e,t,n,i=w.prototype={constructor:w,toString:null,valueOf:null},a=new w(1),s=20,o=4,l=-7,u=21,c=-1e7,h=1e7,f=!1,A=1,d=0,p={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},y="0123456789abcdefghijklmnopqrstuvwxyz",v=!0;function w(B,T){var M,F,N,O,L,G,R,U,W=this;if(!(W instanceof w))return new w(B,T);if(T==null){if(B&&B._isBigNumber===!0){W.s=B.s,!B.c||B.e>h?W.c=W.e=null:B.e<c?W.c=[W.e=0]:(W.e=B.e,W.c=B.c.slice());return}if((G=typeof B=="number")&&B*0==0){if(W.s=1/B<0?(B=-B,-1):1,B===~~B){for(O=0,L=B;L>=10;L/=10,O++);O>h?W.c=W.e=null:(W.e=O,W.c=[B]);return}U=String(B)}else{if(!Ade.test(U=String(B)))return n(W,U,G);W.s=U.charCodeAt(0)==45?(U=U.slice(1),-1):1}(O=U.indexOf("."))>-1&&(U=U.replace(".","")),(L=U.search(/e/i))>0?(O<0&&(O=L),O+=+U.slice(L+1),U=U.substring(0,L)):O<0&&(O=U.length)}else{if(ra(T,2,y.length,"Base"),T==10&&v)return W=new w(B),S(W,s+W.e+1,o);if(U=String(B),G=typeof B=="number"){if(B*0!=0)return n(W,U,G,T);if(W.s=1/B<0?(U=U.slice(1),-1):1,w.DEBUG&&U.replace(/^0\.0*|\./,"").length>15)throw Error(LF+B)}else W.s=U.charCodeAt(0)===45?(U=U.slice(1),-1):1;for(M=y.slice(0,T),O=L=0,R=U.length;L<R;L++)if(M.indexOf(F=U.charAt(L))<0){if(F=="."){if(L>O){O=R;continue}}else if(!N&&(U==U.toUpperCase()&&(U=U.toLowerCase())||U==U.toLowerCase()&&(U=U.toUpperCase()))){N=!0,L=-1,O=0;continue}return n(W,String(B),G,T)}G=!1,U=t(U,T,10,W.s),(O=U.indexOf("."))>-1?U=U.replace(".",""):O=U.length}for(L=0;U.charCodeAt(L)===48;L++);for(R=U.length;U.charCodeAt(--R)===48;);if(U=U.slice(L,++R)){if(R-=L,G&&w.DEBUG&&R>15&&(B>Gb||B!==cu(B)))throw Error(LF+W.s*B);if((O=O-L-1)>h)W.c=W.e=null;else if(O<c)W.c=[W.e=0];else{if(W.e=O,W.c=[],L=(O+1)%cn,O<0&&(L+=cn),L<R){for(L&&W.c.push(+U.slice(0,L)),R-=cn;L<R;)W.c.push(+U.slice(L,L+=cn));L=cn-(U=U.slice(L)).length}else L-=R;for(;L--;U+="0");W.c.push(+U)}}else W.c=[W.e=0]}w.clone=O7,w.ROUND_UP=0,w.ROUND_DOWN=1,w.ROUND_CEIL=2,w.ROUND_FLOOR=3,w.ROUND_HALF_UP=4,w.ROUND_HALF_DOWN=5,w.ROUND_HALF_EVEN=6,w.ROUND_HALF_CEIL=7,w.ROUND_HALF_FLOOR=8,w.EUCLID=9,w.config=w.set=function(B){var T,M;if(B!=null)if(typeof B=="object"){if(B.hasOwnProperty(T="DECIMAL_PLACES")&&(M=B[T],ra(M,0,ds,T),s=M),B.hasOwnProperty(T="ROUNDING_MODE")&&(M=B[T],ra(M,0,8,T),o=M),B.hasOwnProperty(T="EXPONENTIAL_AT")&&(M=B[T],M&&M.pop?(ra(M[0],-ds,0,T),ra(M[1],0,ds,T),l=M[0],u=M[1]):(ra(M,-ds,ds,T),l=-(u=M<0?-M:M))),B.hasOwnProperty(T="RANGE"))if(M=B[T],M&&M.pop)ra(M[0],-ds,-1,T),ra(M[1],1,ds,T),c=M[0],h=M[1];else if(ra(M,-ds,ds,T),M)c=-(h=M<0?-M:M);else throw Error(ul+T+" cannot be zero: "+M);if(B.hasOwnProperty(T="CRYPTO"))if(M=B[T],M===!!M)if(M)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))f=M;else throw f=!M,Error(ul+"crypto unavailable");else f=M;else throw Error(ul+T+" not true or false: "+M);if(B.hasOwnProperty(T="MODULO_MODE")&&(M=B[T],ra(M,0,9,T),A=M),B.hasOwnProperty(T="POW_PRECISION")&&(M=B[T],ra(M,0,ds,T),d=M),B.hasOwnProperty(T="FORMAT"))if(M=B[T],typeof M=="object")p=M;else throw Error(ul+T+" not an object: "+M);if(B.hasOwnProperty(T="ALPHABET"))if(M=B[T],typeof M=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(M))v=M.slice(0,10)=="0123456789",y=M;else throw Error(ul+T+" invalid: "+M)}else throw Error(ul+"Object expected: "+B);return{DECIMAL_PLACES:s,ROUNDING_MODE:o,EXPONENTIAL_AT:[l,u],RANGE:[c,h],CRYPTO:f,MODULO_MODE:A,POW_PRECISION:d,FORMAT:p,ALPHABET:y}},w.isBigNumber=function(B){if(!B||B._isBigNumber!==!0)return!1;if(!w.DEBUG)return!0;var T,M,F=B.c,N=B.e,O=B.s;e:if({}.toString.call(F)=="[object Array]"){if((O===1||O===-1)&&N>=-ds&&N<=ds&&N===cu(N)){if(F[0]===0){if(N===0&&F.length===1)return!0;break e}if(T=(N+1)%cn,T<1&&(T+=cn),String(F[0]).length==T){for(T=0;T<F.length;T++)if(M=F[T],M<0||M>=Hu||M!==cu(M))break e;if(M!==0)return!0}}}else if(F===null&&N===null&&(O===null||O===1||O===-1))return!0;throw Error(ul+"Invalid BigNumber: "+B)},w.maximum=w.max=function(){return b(arguments,-1)},w.minimum=w.min=function(){return b(arguments,1)},w.random=function(){var B=9007199254740992,T=Math.random()*B&2097151?function(){return cu(Math.random()*B)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(M){var F,N,O,L,G,R=0,U=[],W=new w(a);if(M==null?M=s:ra(M,0,ds),L=Qb(M/cn),f)if(crypto.getRandomValues){for(F=crypto.getRandomValues(new Uint32Array(L*=2));R<L;)G=F[R]*131072+(F[R+1]>>>11),G>=9e15?(N=crypto.getRandomValues(new Uint32Array(2)),F[R]=N[0],F[R+1]=N[1]):(U.push(G%1e14),R+=2);R=L/2}else if(crypto.randomBytes){for(F=crypto.randomBytes(L*=7);R<L;)G=(F[R]&31)*281474976710656+F[R+1]*1099511627776+F[R+2]*4294967296+F[R+3]*16777216+(F[R+4]<<16)+(F[R+5]<<8)+F[R+6],G>=9e15?crypto.randomBytes(7).copy(F,R):(U.push(G%1e14),R+=7);R=L/7}else throw f=!1,Error(ul+"crypto unavailable");if(!f)for(;R<L;)G=T(),G<9e15&&(U[R++]=G%1e14);for(L=U[--R],M%=cn,L&&M&&(G=Hb[cn-M],U[R]=cu(L/G)*G);U[R]===0;U.pop(),R--);if(R<0)U=[O=0];else{for(O=-1;U[0]===0;U.splice(0,1),O-=cn);for(R=1,G=U[0];G>=10;G/=10,R++);R<cn&&(O-=cn-R)}return W.e=O,W.c=U,W}}(),w.sum=function(){for(var B=1,T=arguments,M=new w(T[0]);B<T.length;)M=M.plus(T[B++]);return M},t=function(){var B="0123456789";function T(M,F,N,O){for(var L,G=[0],R,U=0,W=M.length;U<W;){for(R=G.length;R--;G[R]*=F);for(G[0]+=O.indexOf(M.charAt(U++)),L=0;L<G.length;L++)G[L]>N-1&&(G[L+1]==null&&(G[L+1]=0),G[L+1]+=G[L]/N|0,G[L]%=N)}return G.reverse()}return function(M,F,N,O,L){var G,R,U,W,Q,re,oe,P,z=M.indexOf("."),K=s,J=o;for(z>=0&&(W=d,d=0,M=M.replace(".",""),P=new w(F),re=P.pow(M.length-z),d=W,P.c=T(Ih(su(re.c),re.e,"0"),10,N,B),P.e=P.c.length),oe=T(M,F,N,L?(G=y,B):(G=B,y)),U=W=oe.length;oe[--W]==0;oe.pop());if(!oe[0])return G.charAt(0);if(z<0?--U:(re.c=oe,re.e=U,re.s=O,re=e(re,P,K,J,N),oe=re.c,Q=re.r,U=re.e),R=U+K+1,z=oe[R],W=N/2,Q=Q||R<0||oe[R+1]!=null,Q=J<4?(z!=null||Q)&&(J==0||J==(re.s<0?3:2)):z>W||z==W&&(J==4||Q||J==6&&oe[R-1]&1||J==(re.s<0?8:7)),R<1||!oe[0])M=Q?Ih(G.charAt(1),-K,G.charAt(0)):G.charAt(0);else{if(oe.length=R,Q)for(--N;++oe[--R]>N;)oe[R]=0,R||(++U,oe=[1].concat(oe));for(W=oe.length;!oe[--W];);for(z=0,M="";z<=W;M+=G.charAt(oe[z++]));M=Ih(M,U,G.charAt(0))}return M}}(),e=function(){function B(F,N,O){var L,G,R,U,W=0,Q=F.length,re=N%Xf,oe=N/Xf|0;for(F=F.slice();Q--;)R=F[Q]%Xf,U=F[Q]/Xf|0,L=oe*R+U*re,G=re*R+L%Xf*Xf+W,W=(G/O|0)+(L/Xf|0)+oe*U,F[Q]=G%O;return W&&(F=[W].concat(F)),F}function T(F,N,O,L){var G,R;if(O!=L)R=O>L?1:-1;else for(G=R=0;G<O;G++)if(F[G]!=N[G]){R=F[G]>N[G]?1:-1;break}return R}function M(F,N,O,L){for(var G=0;O--;)F[O]-=G,G=F[O]<N[O]?1:0,F[O]=G*L+F[O]-N[O];for(;!F[0]&&F.length>1;F.splice(0,1));}return function(F,N,O,L,G){var R,U,W,Q,re,oe,P,z,K,J,ue,ge,le,me,xe,Be,Y,Ve=F.s==N.s?1:-1,te=F.c,se=N.c;if(!te||!te[0]||!se||!se[0])return new w(!F.s||!N.s||(te?se&&te[0]==se[0]:!se)?NaN:te&&te[0]==0||!se?Ve*0:Ve/0);for(z=new w(Ve),K=z.c=[],U=F.e-N.e,Ve=O+U+1,G||(G=Hu,U=hu(F.e/cn)-hu(N.e/cn),Ve=Ve/cn|0),W=0;se[W]==(te[W]||0);W++);if(se[W]>(te[W]||0)&&U--,Ve<0)K.push(1),Q=!0;else{for(me=te.length,Be=se.length,W=0,Ve+=2,re=cu(G/(se[0]+1)),re>1&&(se=B(se,re,G),te=B(te,re,G),Be=se.length,me=te.length),le=Be,J=te.slice(0,Be),ue=J.length;ue<Be;J[ue++]=0);Y=se.slice(),Y=[0].concat(Y),xe=se[0],se[1]>=G/2&&xe++;do{if(re=0,R=T(se,J,Be,ue),R<0){if(ge=J[0],Be!=ue&&(ge=ge*G+(J[1]||0)),re=cu(ge/xe),re>1)for(re>=G&&(re=G-1),oe=B(se,re,G),P=oe.length,ue=J.length;T(oe,J,P,ue)==1;)re--,M(oe,Be<P?Y:se,P,G),P=oe.length,R=1;else re==0&&(R=re=1),oe=se.slice(),P=oe.length;if(P<ue&&(oe=[0].concat(oe)),M(J,oe,ue,G),ue=J.length,R==-1)for(;T(se,J,Be,ue)<1;)re++,M(J,Be<ue?Y:se,ue,G),ue=J.length}else R===0&&(re++,J=[0]);K[W++]=re,J[0]?J[ue++]=te[le]||0:(J=[te[le]],ue=1)}while((le++<me||J[0]!=null)&&Ve--);Q=J[0]!=null,K[0]||K.splice(0,1)}if(G==Hu){for(W=1,Ve=K[0];Ve>=10;Ve/=10,W++);S(z,O+(z.e=W+U*cn-1)+1,L,Q)}else z.e=U,z.r=+Q;return z}}();function x(B,T,M,F){var N,O,L,G,R;if(M==null?M=o:ra(M,0,8),!B.c)return B.toString();if(N=B.c[0],L=B.e,T==null)R=su(B.c),R=F==1||F==2&&(L<=l||L>=u)?i2(R,L):Ih(R,L,"0");else if(B=S(new w(B),T,M),O=B.e,R=su(B.c),G=R.length,F==1||F==2&&(T<=O||O<=l)){for(;G<T;R+="0",G++);R=i2(R,O)}else if(T-=L+(F===2&&O>L),R=Ih(R,O,"0"),O+1>G){if(--T>0)for(R+=".";T--;R+="0");}else if(T+=O-G,T>0)for(O+1==G&&(R+=".");T--;R+="0");return B.s<0&&N?"-"+R:R}function b(B,T){for(var M,F,N=1,O=new w(B[0]);N<B.length;N++)F=new w(B[N]),(!F.s||(M=ud(O,F))===T||M===0&&O.s===T)&&(O=F);return O}function C(B,T,M){for(var F=1,N=T.length;!T[--N];T.pop());for(N=T[0];N>=10;N/=10,F++);return(M=F+M*cn-1)>h?B.c=B.e=null:M<c?B.c=[B.e=0]:(B.e=M,B.c=T),B}n=function(){var B=/^(-?)0([xbo])(?=\w[\w.]*$)/i,T=/^([^.]+)\.$/,M=/^\.([^.]+)$/,F=/^-?(Infinity|NaN)$/,N=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(O,L,G,R){var U,W=G?L:L.replace(N,"");if(F.test(W))O.s=isNaN(W)?null:W<0?-1:1;else{if(!G&&(W=W.replace(B,function(Q,re,oe){return U=(oe=oe.toLowerCase())=="x"?16:oe=="b"?2:8,!R||R==U?re:Q}),R&&(U=R,W=W.replace(T,"$1").replace(M,"0.$1")),L!=W))return new w(W,U);if(w.DEBUG)throw Error(ul+"Not a"+(R?" base "+R:"")+" number: "+L);O.s=null}O.c=O.e=null}}();function S(B,T,M,F){var N,O,L,G,R,U,W,Q=B.c,re=Hb;if(Q){e:{for(N=1,G=Q[0];G>=10;G/=10,N++);if(O=T-N,O<0)O+=cn,L=T,R=Q[U=0],W=cu(R/re[N-L-1]%10);else if(U=Qb((O+1)/cn),U>=Q.length)if(F){for(;Q.length<=U;Q.push(0));R=W=0,N=1,O%=cn,L=O-cn+1}else break e;else{for(R=G=Q[U],N=1;G>=10;G/=10,N++);O%=cn,L=O-cn+N,W=L<0?0:cu(R/re[N-L-1]%10)}if(F=F||T<0||Q[U+1]!=null||(L<0?R:R%re[N-L-1]),F=M<4?(W||F)&&(M==0||M==(B.s<0?3:2)):W>5||W==5&&(M==4||F||M==6&&(O>0?L>0?R/re[N-L]:0:Q[U-1])%10&1||M==(B.s<0?8:7)),T<1||!Q[0])return Q.length=0,F?(T-=B.e+1,Q[0]=re[(cn-T%cn)%cn],B.e=-T||0):Q[0]=B.e=0,B;if(O==0?(Q.length=U,G=1,U--):(Q.length=U+1,G=re[cn-O],Q[U]=L>0?cu(R/re[N-L]%re[L])*G:0),F)for(;;)if(U==0){for(O=1,L=Q[0];L>=10;L/=10,O++);for(L=Q[0]+=G,G=1;L>=10;L/=10,G++);O!=G&&(B.e++,Q[0]==Hu&&(Q[0]=1));break}else{if(Q[U]+=G,Q[U]!=Hu)break;Q[U--]=0,G=1}for(O=Q.length;Q[--O]===0;Q.pop());}B.e>h?B.c=B.e=null:B.e<c&&(B.c=[B.e=0])}return B}function I(B){var T,M=B.e;return M===null?B.toString():(T=su(B.c),T=M<=l||M>=u?i2(T,M):Ih(T,M,"0"),B.s<0?"-"+T:T)}return i.absoluteValue=i.abs=function(){var B=new w(this);return B.s<0&&(B.s=1),B},i.comparedTo=function(B,T){return ud(this,new w(B,T))},i.decimalPlaces=i.dp=function(B,T){var M,F,N,O=this;if(B!=null)return ra(B,0,ds),T==null?T=o:ra(T,0,8),S(new w(O),B+O.e+1,T);if(!(M=O.c))return null;if(F=((N=M.length-1)-hu(this.e/cn))*cn,N=M[N])for(;N%10==0;N/=10,F--);return F<0&&(F=0),F},i.dividedBy=i.div=function(B,T){return e(this,new w(B,T),s,o)},i.dividedToIntegerBy=i.idiv=function(B,T){return e(this,new w(B,T),0,1)},i.exponentiatedBy=i.pow=function(B,T){var M,F,N,O,L,G,R,U,W,Q=this;if(B=new w(B),B.c&&!B.isInteger())throw Error(ul+"Exponent not an integer: "+I(B));if(T!=null&&(T=new w(T)),G=B.e>14,!Q.c||!Q.c[0]||Q.c[0]==1&&!Q.e&&Q.c.length==1||!B.c||!B.c[0])return W=new w(Math.pow(+I(Q),G?B.s*(2-n2(B)):+I(B))),T?W.mod(T):W;if(R=B.s<0,T){if(T.c?!T.c[0]:!T.s)return new w(NaN);F=!R&&Q.isInteger()&&T.isInteger(),F&&(Q=Q.mod(T))}else{if(B.e>9&&(Q.e>0||Q.e<-1||(Q.e==0?Q.c[0]>1||G&&Q.c[1]>=24e7:Q.c[0]<8e13||G&&Q.c[0]<=9999975e7)))return O=Q.s<0&&n2(B)?-0:0,Q.e>-1&&(O=1/O),new w(R?1/O:O);d&&(O=Qb(d/cn+2))}for(G?(M=new w(.5),R&&(B.s=1),U=n2(B)):(N=Math.abs(+I(B)),U=N%2),W=new w(a);;){if(U){if(W=W.times(Q),!W.c)break;O?W.c.length>O&&(W.c.length=O):F&&(W=W.mod(T))}if(N){if(N=cu(N/2),N===0)break;U=N%2}else if(B=B.times(M),S(B,B.e+1,1),B.e>14)U=n2(B);else{if(N=+I(B),N===0)break;U=N%2}Q=Q.times(Q),O?Q.c&&Q.c.length>O&&(Q.c.length=O):F&&(Q=Q.mod(T))}return F?W:(R&&(W=a.div(W)),T?W.mod(T):O?S(W,d,o,L):W)},i.integerValue=function(B){var T=new w(this);return B==null?B=o:ra(B,0,8),S(T,T.e+1,B)},i.isEqualTo=i.eq=function(B,T){return ud(this,new w(B,T))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(B,T){return ud(this,new w(B,T))>0},i.isGreaterThanOrEqualTo=i.gte=function(B,T){return(T=ud(this,new w(B,T)))===1||T===0},i.isInteger=function(){return!!this.c&&hu(this.e/cn)>this.c.length-2},i.isLessThan=i.lt=function(B,T){return ud(this,new w(B,T))<0},i.isLessThanOrEqualTo=i.lte=function(B,T){return(T=ud(this,new w(B,T)))===-1||T===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(B,T){var M,F,N,O,L=this,G=L.s;if(B=new w(B,T),T=B.s,!G||!T)return new w(NaN);if(G!=T)return B.s=-T,L.plus(B);var R=L.e/cn,U=B.e/cn,W=L.c,Q=B.c;if(!R||!U){if(!W||!Q)return W?(B.s=-T,B):new w(Q?L:NaN);if(!W[0]||!Q[0])return Q[0]?(B.s=-T,B):new w(W[0]?L:o==3?-0:0)}if(R=hu(R),U=hu(U),W=W.slice(),G=R-U){for((O=G<0)?(G=-G,N=W):(U=R,N=Q),N.reverse(),T=G;T--;N.push(0));N.reverse()}else for(F=(O=(G=W.length)<(T=Q.length))?G:T,G=T=0;T<F;T++)if(W[T]!=Q[T]){O=W[T]<Q[T];break}if(O&&(N=W,W=Q,Q=N,B.s=-B.s),T=(F=Q.length)-(M=W.length),T>0)for(;T--;W[M++]=0);for(T=Hu-1;F>G;){if(W[--F]<Q[F]){for(M=F;M&&!W[--M];W[M]=T);--W[M],W[F]+=Hu}W[F]-=Q[F]}for(;W[0]==0;W.splice(0,1),--U);return W[0]?C(B,W,U):(B.s=o==3?-1:1,B.c=[B.e=0],B)},i.modulo=i.mod=function(B,T){var M,F,N=this;return B=new w(B,T),!N.c||!B.s||B.c&&!B.c[0]?new w(NaN):!B.c||N.c&&!N.c[0]?new w(N):(A==9?(F=B.s,B.s=1,M=e(N,B,0,3),B.s=F,M.s*=F):M=e(N,B,0,A),B=N.minus(M.times(B)),!B.c[0]&&A==1&&(B.s=N.s),B)},i.multipliedBy=i.times=function(B,T){var M,F,N,O,L,G,R,U,W,Q,re,oe,P,z,K,J=this,ue=J.c,ge=(B=new w(B,T)).c;if(!ue||!ge||!ue[0]||!ge[0])return!J.s||!B.s||ue&&!ue[0]&&!ge||ge&&!ge[0]&&!ue?B.c=B.e=B.s=null:(B.s*=J.s,!ue||!ge?B.c=B.e=null:(B.c=[0],B.e=0)),B;for(F=hu(J.e/cn)+hu(B.e/cn),B.s*=J.s,R=ue.length,Q=ge.length,R<Q&&(P=ue,ue=ge,ge=P,N=R,R=Q,Q=N),N=R+Q,P=[];N--;P.push(0));for(z=Hu,K=Xf,N=Q;--N>=0;){for(M=0,re=ge[N]%K,oe=ge[N]/K|0,L=R,O=N+L;O>N;)U=ue[--L]%K,W=ue[L]/K|0,G=oe*U+W*re,U=re*U+G%K*K+P[O]+M,M=(U/z|0)+(G/K|0)+oe*W,P[O--]=U%z;P[O]=M}return M?++F:P.splice(0,1),C(B,P,F)},i.negated=function(){var B=new w(this);return B.s=-B.s||null,B},i.plus=function(B,T){var M,F=this,N=F.s;if(B=new w(B,T),T=B.s,!N||!T)return new w(NaN);if(N!=T)return B.s=-T,F.minus(B);var O=F.e/cn,L=B.e/cn,G=F.c,R=B.c;if(!O||!L){if(!G||!R)return new w(N/0);if(!G[0]||!R[0])return R[0]?B:new w(G[0]?F:N*0)}if(O=hu(O),L=hu(L),G=G.slice(),N=O-L){for(N>0?(L=O,M=R):(N=-N,M=G),M.reverse();N--;M.push(0));M.reverse()}for(N=G.length,T=R.length,N-T<0&&(M=R,R=G,G=M,T=N),N=0;T;)N=(G[--T]=G[T]+R[T]+N)/Hu|0,G[T]=Hu===G[T]?0:G[T]%Hu;return N&&(G=[N].concat(G),++L),C(B,G,L)},i.precision=i.sd=function(B,T){var M,F,N,O=this;if(B!=null&&B!==!!B)return ra(B,1,ds),T==null?T=o:ra(T,0,8),S(new w(O),B,T);if(!(M=O.c))return null;if(N=M.length-1,F=N*cn+1,N=M[N]){for(;N%10==0;N/=10,F--);for(N=M[0];N>=10;N/=10,F++);}return B&&O.e+1>F&&(F=O.e+1),F},i.shiftedBy=function(B){return ra(B,-Gb,Gb),this.times("1e"+B)},i.squareRoot=i.sqrt=function(){var B,T,M,F,N,O=this,L=O.c,G=O.s,R=O.e,U=s+4,W=new w("0.5");if(G!==1||!L||!L[0])return new w(!G||G<0&&(!L||L[0])?NaN:L?O:1/0);if(G=Math.sqrt(+I(O)),G==0||G==1/0?(T=su(L),(T.length+R)%2==0&&(T+="0"),G=Math.sqrt(+T),R=hu((R+1)/2)-(R<0||R%2),G==1/0?T="5e"+R:(T=G.toExponential(),T=T.slice(0,T.indexOf("e")+1)+R),M=new w(T)):M=new w(G+""),M.c[0]){for(R=M.e,G=R+U,G<3&&(G=0);;)if(N=M,M=W.times(N.plus(e(O,N,U,1))),su(N.c).slice(0,G)===(T=su(M.c)).slice(0,G))if(M.e<R&&--G,T=T.slice(G-3,G+1),T=="9999"||!F&&T=="4999"){if(!F&&(S(N,N.e+s+2,0),N.times(N).eq(O))){M=N;break}U+=4,G+=4,F=1}else{(!+T||!+T.slice(1)&&T.charAt(0)=="5")&&(S(M,M.e+s+2,1),B=!M.times(M).eq(O));break}}return S(M,M.e+s+1,o,B)},i.toExponential=function(B,T){return B!=null&&(ra(B,0,ds),B++),x(this,B,T,1)},i.toFixed=function(B,T){return B!=null&&(ra(B,0,ds),B=B+this.e+1),x(this,B,T)},i.toFormat=function(B,T,M){var F,N=this;if(M==null)B!=null&&T&&typeof T=="object"?(M=T,T=null):B&&typeof B=="object"?(M=B,B=T=null):M=p;else if(typeof M!="object")throw Error(ul+"Argument not an object: "+M);if(F=N.toFixed(B,T),N.c){var O,L=F.split("."),G=+M.groupSize,R=+M.secondaryGroupSize,U=M.groupSeparator||"",W=L[0],Q=L[1],re=N.s<0,oe=re?W.slice(1):W,P=oe.length;if(R&&(O=G,G=R,R=O,P-=O),G>0&&P>0){for(O=P%G||G,W=oe.substr(0,O);O<P;O+=G)W+=U+oe.substr(O,G);R>0&&(W+=U+oe.slice(O)),re&&(W="-"+W)}F=Q?W+(M.decimalSeparator||"")+((R=+M.fractionGroupSize)?Q.replace(new RegExp("\\d{"+R+"}\\B","g"),"$&"+(M.fractionGroupSeparator||"")):Q):W}return(M.prefix||"")+F+(M.suffix||"")},i.toFraction=function(B){var T,M,F,N,O,L,G,R,U,W,Q,re,oe=this,P=oe.c;if(B!=null&&(G=new w(B),!G.isInteger()&&(G.c||G.s!==1)||G.lt(a)))throw Error(ul+"Argument "+(G.isInteger()?"out of range: ":"not an integer: ")+I(G));if(!P)return new w(oe);for(T=new w(a),U=M=new w(a),F=R=new w(a),re=su(P),O=T.e=re.length-oe.e-1,T.c[0]=Hb[(L=O%cn)<0?cn+L:L],B=!B||G.comparedTo(T)>0?O>0?T:U:G,L=h,h=1/0,G=new w(re),R.c[0]=0;W=e(G,T,0,1),N=M.plus(W.times(F)),N.comparedTo(B)!=1;)M=F,F=N,U=R.plus(W.times(N=U)),R=N,T=G.minus(W.times(N=T)),G=N;return N=e(B.minus(M),F,0,1),R=R.plus(N.times(U)),M=M.plus(N.times(F)),R.s=U.s=oe.s,O=O*2,Q=e(U,F,O,o).minus(oe).abs().comparedTo(e(R,M,O,o).minus(oe).abs())<1?[U,F]:[R,M],h=L,Q},i.toNumber=function(){return+I(this)},i.toPrecision=function(B,T){return B!=null&&ra(B,1,ds),x(this,B,T,2)},i.toString=function(B){var T,M=this,F=M.s,N=M.e;return N===null?F?(T="Infinity",F<0&&(T="-"+T)):T="NaN":(B==null?T=N<=l||N>=u?i2(su(M.c),N):Ih(su(M.c),N,"0"):B===10&&v?(M=S(new w(M),s+N+1,o),T=Ih(su(M.c),M.e,"0")):(ra(B,2,y.length,"Base"),T=t(Ih(su(M.c),N,"0"),10,B,F,!0)),F<0&&M.c[0]&&(T="-"+T)),T},i.valueOf=i.toJSON=function(){return I(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,r!=null&&w.set(r),w}function hu(r){var e=r|0;return r>0||r===e?e:e-1}function su(r){for(var e,t,n=1,i=r.length,a=r[0]+"";n<i;){for(e=r[n++]+"",t=cn-e.length;t--;e="0"+e);a+=e}for(i=a.length;a.charCodeAt(--i)===48;);return a.slice(0,i+1||1)}function ud(r,e){var t,n,i=r.c,a=e.c,s=r.s,o=e.s,l=r.e,u=e.e;if(!s||!o)return null;if(t=i&&!i[0],n=a&&!a[0],t||n)return t?n?0:-o:s;if(s!=o)return s;if(t=s<0,n=l==u,!i||!a)return n?0:!i^t?1:-1;if(!n)return l>u^t?1:-1;for(o=(l=i.length)<(u=a.length)?l:u,s=0;s<o;s++)if(i[s]!=a[s])return i[s]>a[s]^t?1:-1;return l==u?0:l>u^t?1:-1}function ra(r,e,t,n){if(r<e||r>t||r!==cu(r))throw Error(ul+(n||"Argument")+(typeof r=="number"?r<e||r>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(r))}function n2(r){var e=r.c.length-1;return hu(r.e/cn)==e&&r.c[e]%2!=0}function i2(r,e){return(r.length>1?r.charAt(0)+"."+r.slice(1):r)+(e<0?"e":"e+")+e}function Ih(r,e,t){var n,i;if(e<0){for(i=t+".";++e;i+=t);r=i+r}else if(n=r.length,++e>n){for(i=t,e-=n;--e;i+=t);r+=i}else e<n&&(r=r.slice(0,e)+"."+r.slice(e));return r}var Vc=O7(),dde=class{constructor(r){yr(this,"key");yr(this,"left",null);yr(this,"right",null);this.key=r}},dm=class extends dde{constructor(r){super(r)}},gde=class{constructor(){yr(this,"size",0);yr(this,"modificationCount",0);yr(this,"splayCount",0)}splay(r){const e=this.root;if(e==null)return this.compare(r,r),-1;let t=null,n=null,i=null,a=null,s=e;const o=this.compare;let l;for(;;)if(l=o(s.key,r),l>0){let u=s.left;if(u==null||(l=o(u.key,r),l>0&&(s.left=u.right,u.right=s,s=u,u=s.left,u==null)))break;t==null?n=s:t.left=s,t=s,s=u}else if(l<0){let u=s.right;if(u==null||(l=o(u.key,r),l<0&&(s.right=u.left,u.left=s,s=u,u=s.right,u==null)))break;i==null?a=s:i.right=s,i=s,s=u}else break;return i!=null&&(i.right=s.left,s.left=a),t!=null&&(t.left=s.right,s.right=n),this.root!==s&&(this.root=s,this.splayCount++),l}splayMin(r){let e=r,t=e.left;for(;t!=null;){const n=t;e.left=n.right,n.right=e,e=n,t=e.left}return e}splayMax(r){let e=r,t=e.right;for(;t!=null;){const n=t;e.right=n.left,n.left=e,e=n,t=e.right}return e}_delete(r){if(this.root==null||this.splay(r)!=0)return null;let t=this.root;const n=t,i=t.left;if(this.size--,i==null)this.root=t.right;else{const a=t.right;t=this.splayMax(i),t.right=a,this.root=t}return this.modificationCount++,n}addNewRoot(r,e){this.size++,this.modificationCount++;const t=this.root;if(t==null){this.root=r;return}e<0?(r.left=t,r.right=t.right,t.right=null):(r.right=t,r.left=t.left,t.left=null),this.root=r}_first(){const r=this.root;return r==null?null:(this.root=this.splayMin(r),this.root)}_last(){const r=this.root;return r==null?null:(this.root=this.splayMax(r),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(r){return this.validKey(r)&&this.splay(r)==0}defaultCompare(){return(r,e)=>r<e?-1:r>e?1:0}wrap(){return{getRoot:()=>this.root,setRoot:r=>{this.root=r},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:r=>{this.splayCount=r},splay:r=>this.splay(r),has:r=>this.has(r)}}},V6,W6,fw=class Um extends gde{constructor(t,n){super();yr(this,"root",null);yr(this,"compare");yr(this,"validKey");yr(this,V6,"[object Set]");this.compare=t??this.defaultCompare(),this.validKey=n??(i=>i!=null&&i!=null)}delete(t){return this.validKey(t)?this._delete(t)!=null:!1}deleteAll(t){for(const n of t)this.delete(n)}forEach(t){const n=this[Symbol.iterator]();let i;for(;i=n.next(),!i.done;)t(i.value,i.value,this)}add(t){const n=this.splay(t);return n!=0&&this.addNewRoot(new dm(t),n),this}addAndReturn(t){const n=this.splay(t);return n!=0&&this.addNewRoot(new dm(t),n),this.root.key}addAll(t){for(const n of t)this.add(n)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let a=i.right;for(;a!=null;)i=a,a=i.right;return i.key}firstAfter(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let a=i.left;for(;a!=null;)i=a,a=i.left;return i.key}retainAll(t){const n=new Um(this.compare,this.validKey),i=this.modificationCount;for(const a of t){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(a)&&this.splay(a)==0&&n.add(this.root.key)}n.size!=this.size&&(this.root=n.root,this.size=n.size,this.modificationCount++)}lookup(t){return!this.validKey(t)||this.splay(t)!=0?null:this.root.key}intersection(t){const n=new Um(this.compare,this.validKey);for(const i of this)t.has(i)&&n.add(i);return n}difference(t){const n=new Um(this.compare,this.validKey);for(const i of this)t.has(i)||n.add(i);return n}union(t){const n=this.clone();return n.addAll(t),n}clone(){const t=new Um(this.compare,this.validKey);return t.size=this.size,t.root=this.copyNode(this.root),t}copyNode(t){if(t==null)return null;function n(a,s){let o,l;do{if(o=a.left,l=a.right,o!=null){const u=new dm(o.key);s.left=u,n(o,u)}if(l!=null){const u=new dm(l.key);s.right=u,a=l,s=u}}while(l!=null)}const i=new dm(t.key);return n(t,i),i}toSet(){return this.clone()}entries(){return new mde(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(W6=Symbol.iterator,V6=Symbol.toStringTag,W6)](){return new pde(this.wrap())}},P7=class{constructor(r){yr(this,"tree");yr(this,"path",new Array);yr(this,"modificationCount",null);yr(this,"splayCount");this.tree=r,this.splayCount=r.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const r=this.path[this.path.length-1];return this.getValue(r)}rebuildPath(r){this.path.splice(0,this.path.length),this.tree.splay(r),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(r){for(;r!=null;)this.path.push(r),r=r.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let t=this.tree.getRoot();for(;t!=null;)this.path.push(t),t=t.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let r=this.path[this.path.length-1],e=r.right;if(e!=null){for(;e!=null;)this.path.push(e),e=e.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===r;)r=this.path.pop();return this.path.length>0}},pde=class extends P7{getValue(r){return r.key}},mde=class extends P7{getValue(r){return[r.key,r.key]}},U7=r=>()=>r,RS=r=>{const e=r?(t,n)=>n.minus(t).abs().isLessThanOrEqualTo(r):U7(!1);return(t,n)=>e(t,n)?0:t.comparedTo(n)};function vde(r){const e=r?(t,n,i,a,s)=>t.exponentiatedBy(2).isLessThanOrEqualTo(a.minus(n).exponentiatedBy(2).plus(s.minus(i).exponentiatedBy(2)).times(r)):U7(!1);return(t,n,i)=>{const a=t.x,s=t.y,o=i.x,l=i.y,u=s.minus(l).times(n.x.minus(o)).minus(a.minus(o).times(n.y.minus(l)));return e(u,a,s,o,l)?0:u.comparedTo(0)}}var yde=r=>r,xde=r=>{if(r){const e=new fw(RS(r)),t=new fw(RS(r)),n=(a,s)=>s.addAndReturn(a),i=a=>({x:n(a.x,e),y:n(a.y,t)});return i({x:new Vc(0),y:new Vc(0)}),i}return yde},OS=r=>({set:e=>{of=OS(e)},reset:()=>OS(r),compare:RS(r),snap:xde(r),orient:vde(r)}),of=OS(),gm=(r,e)=>r.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(r.ur.x)&&r.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(r.ur.y),PS=(r,e)=>{if(e.ur.x.isLessThan(r.ll.x)||r.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(r.ll.y)||r.ur.y.isLessThan(e.ll.y))return null;const t=r.ll.x.isLessThan(e.ll.x)?e.ll.x:r.ll.x,n=r.ur.x.isLessThan(e.ur.x)?r.ur.x:e.ur.x,i=r.ll.y.isLessThan(e.ll.y)?e.ll.y:r.ll.y,a=r.ur.y.isLessThan(e.ur.y)?r.ur.y:e.ur.y;return{ll:{x:t,y:i},ur:{x:n,y:a}}},sx=(r,e)=>r.x.times(e.y).minus(r.y.times(e.x)),Q7=(r,e)=>r.x.times(e.x).plus(r.y.times(e.y)),Aw=r=>Q7(r,r).sqrt(),wde=(r,e,t)=>{const n={x:e.x.minus(r.x),y:e.y.minus(r.y)},i={x:t.x.minus(r.x),y:t.y.minus(r.y)};return sx(i,n).div(Aw(i)).div(Aw(n))},_de=(r,e,t)=>{const n={x:e.x.minus(r.x),y:e.y.minus(r.y)},i={x:t.x.minus(r.x),y:t.y.minus(r.y)};return Q7(i,n).div(Aw(i)).div(Aw(n))},DF=(r,e,t)=>e.y.isZero()?null:{x:r.x.plus(e.x.div(e.y).times(t.minus(r.y))),y:t},kF=(r,e,t)=>e.x.isZero()?null:{x:t,y:r.y.plus(e.y.div(e.x).times(t.minus(r.x)))},Ede=(r,e,t,n)=>{if(e.x.isZero())return kF(t,n,r.x);if(n.x.isZero())return kF(r,e,t.x);if(e.y.isZero())return DF(t,n,r.y);if(n.y.isZero())return DF(r,e,t.y);const i=sx(e,n);if(i.isZero())return null;const a={x:t.x.minus(r.x),y:t.y.minus(r.y)},s=sx(a,e).div(i),o=sx(a,n).div(i),l=r.x.plus(o.times(e.x)),u=t.x.plus(s.times(n.x)),c=r.y.plus(o.times(e.y)),h=t.y.plus(s.times(n.y)),f=l.plus(u).div(2),A=c.plus(h).div(2);return{x:f,y:A}},Uc=class G7{constructor(e,t){yr(this,"point");yr(this,"isLeft");yr(this,"segment");yr(this,"otherSE");yr(this,"consumedBy");e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}static compare(e,t){const n=G7.comparePoints(e.point,t.point);return n!==0?n:(e.point!==t.point&&e.link(t),e.isLeft!==t.isLeft?e.isLeft?1:-1:dw.compare(e.segment,t.segment))}static comparePoints(e,t){return e.x.isLessThan(t.x)?-1:e.x.isGreaterThan(t.x)?1:e.y.isLessThan(t.y)?-1:e.y.isGreaterThan(t.y)?1:0}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const t=e.point.events;for(let n=0,i=t.length;n<i;n++){const a=t[n];this.point.events.push(a),a.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let t=0;t<e;t++){const n=this.point.events[t];if(n.segment.consumedBy===void 0)for(let i=t+1;i<e;i++){const a=this.point.events[i];a.consumedBy===void 0&&n.otherSE.point.events===a.otherSE.point.events&&n.segment.consume(a.segment)}}}getAvailableLinkedEvents(){const e=[];for(let t=0,n=this.point.events.length;t<n;t++){const i=this.point.events[t];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}getLeftmostComparator(e){const t=new Map,n=i=>{const a=i.otherSE;t.set(i,{sine:wde(this.point,e.point,a.point),cosine:_de(this.point,e.point,a.point)})};return(i,a)=>{t.has(i)||n(i),t.has(a)||n(a);const{sine:s,cosine:o}=t.get(i),{sine:l,cosine:u}=t.get(a);return s.isGreaterThanOrEqualTo(0)&&l.isGreaterThanOrEqualTo(0)?o.isLessThan(u)?1:o.isGreaterThan(u)?-1:0:s.isLessThan(0)&&l.isLessThan(0)?o.isLessThan(u)?-1:o.isGreaterThan(u)?1:0:l.isLessThan(s)?-1:l.isGreaterThan(s)?1:0}}},bde=class US{constructor(e){yr(this,"events");yr(this,"poly");yr(this,"_isExteriorRing");yr(this,"_enclosingRing");this.events=e;for(let t=0,n=e.length;t<n;t++)e[t].segment.ringOut=this;this.poly=null}static factory(e){const t=[];for(let n=0,i=e.length;n<i;n++){const a=e[n];if(!a.isInResult()||a.ringOut)continue;let s=null,o=a.leftSE,l=a.rightSE;const u=[o],c=o.point,h=[];for(;s=o,o=l,u.push(o),o.point!==c;)for(;;){const f=o.getAvailableLinkedEvents();if(f.length===0){const p=u[0].point,y=u[u.length-1].point;throw new Error(`Unable to complete output ring starting at [${p.x}, ${p.y}]. Last matching segment found ends at [${y.x}, ${y.y}].`)}if(f.length===1){l=f[0].otherSE;break}let A=null;for(let p=0,y=h.length;p<y;p++)if(h[p].point===o.point){A=p;break}if(A!==null){const p=h.splice(A)[0],y=u.splice(p.index);y.unshift(y[0].otherSE),t.push(new US(y.reverse()));continue}h.push({index:u.length,point:o.point});const d=o.getLeftmostComparator(s);l=f.sort(d)[0].otherSE;break}t.push(new US(u))}return t}getGeom(){let e=this.events[0].point;const t=[e];for(let u=1,c=this.events.length-1;u<c;u++){const h=this.events[u].point,f=this.events[u+1].point;of.orient(h,e,f)!==0&&(t.push(h),e=h)}if(t.length===1)return null;const n=t[0],i=t[1];of.orient(n,e,i)===0&&t.shift(),t.push(t[0]);const a=this.isExteriorRing()?1:-1,s=this.isExteriorRing()?0:t.length-1,o=this.isExteriorRing()?t.length:-1,l=[];for(let u=s;u!=o;u+=a)l.push([t[u].x.toNumber(),t[u].y.toNumber()]);return l}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,a;let e=this.events[0];for(let s=1,o=this.events.length;s<o;s++){const l=this.events[s];Uc.compare(e,l)>0&&(e=l)}let t=e.segment.prevInResult(),n=t?t.prevInResult():null;for(;;){if(!t)return null;if(!n)return t.ringOut;if(n.ringOut!==t.ringOut)return((i=n.ringOut)==null?void 0:i.enclosingRing())!==t.ringOut?t.ringOut:(a=t.ringOut)==null?void 0:a.enclosingRing();t=n.prevInResult(),n=t?t.prevInResult():null}}},RF=class{constructor(r){yr(this,"exteriorRing");yr(this,"interiorRings");this.exteriorRing=r,r.poly=this,this.interiorRings=[]}addInterior(r){this.interiorRings.push(r),r.poly=this}getGeom(){const r=this.exteriorRing.getGeom();if(r===null)return null;const e=[r];for(let t=0,n=this.interiorRings.length;t<n;t++){const i=this.interiorRings[t].getGeom();i!==null&&e.push(i)}return e}},Cde=class{constructor(r){yr(this,"rings");yr(this,"polys");this.rings=r,this.polys=this._composePolys(r)}getGeom(){const r=[];for(let e=0,t=this.polys.length;e<t;e++){const n=this.polys[e].getGeom();n!==null&&r.push(n)}return r}_composePolys(r){var t;const e=[];for(let n=0,i=r.length;n<i;n++){const a=r[n];if(!a.poly)if(a.isExteriorRing())e.push(new RF(a));else{const s=a.enclosingRing();s!=null&&s.poly||e.push(new RF(s)),(t=s==null?void 0:s.poly)==null||t.addInterior(a)}}return e}},Sde=class{constructor(r,e=dw.compare){yr(this,"queue");yr(this,"tree");yr(this,"segments");this.queue=r,this.tree=new fw(e),this.segments=[]}process(r){const e=r.segment,t=[];if(r.consumedBy)return r.isLeft?this.queue.delete(r.otherSE):this.tree.delete(e),t;r.isLeft&&this.tree.add(e);let n=e,i=e;do n=this.tree.lastBefore(n);while(n!=null&&n.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(r.isLeft){let a=null;if(n){const o=n.getIntersection(e);if(o!==null&&(e.isAnEndpoint(o)||(a=o),!n.isAnEndpoint(o))){const l=this._splitSafely(n,o);for(let u=0,c=l.length;u<c;u++)t.push(l[u])}}let s=null;if(i){const o=i.getIntersection(e);if(o!==null&&(e.isAnEndpoint(o)||(s=o),!i.isAnEndpoint(o))){const l=this._splitSafely(i,o);for(let u=0,c=l.length;u<c;u++)t.push(l[u])}}if(a!==null||s!==null){let o=null;a===null?o=s:s===null?o=a:o=Uc.comparePoints(a,s)<=0?a:s,this.queue.delete(e.rightSE),t.push(e.rightSE);const l=e.split(o);for(let u=0,c=l.length;u<c;u++)t.push(l[u])}t.length>0?(this.tree.delete(e),t.push(r)):(this.segments.push(e),e.prev=n)}else{if(n&&i){const a=n.getIntersection(i);if(a!==null){if(!n.isAnEndpoint(a)){const s=this._splitSafely(n,a);for(let o=0,l=s.length;o<l;o++)t.push(s[o])}if(!i.isAnEndpoint(a)){const s=this._splitSafely(i,a);for(let o=0,l=s.length;o<l;o++)t.push(s[o])}}}this.tree.delete(e)}return t}_splitSafely(r,e){this.tree.delete(r);const t=r.rightSE;this.queue.delete(t);const n=r.split(e);return n.push(t),r.consumedBy===void 0&&this.tree.add(r),n}},Bde=class{constructor(){yr(this,"type");yr(this,"numMultiPolys")}run(r,e,t){Qm.type=r;const n=[new PF(e,!0)];for(let u=0,c=t.length;u<c;u++)n.push(new PF(t[u],!1));if(Qm.numMultiPolys=n.length,Qm.type==="difference"){const u=n[0];let c=1;for(;c<n.length;)PS(n[c].bbox,u.bbox)!==null?c++:n.splice(c,1)}if(Qm.type==="intersection")for(let u=0,c=n.length;u<c;u++){const h=n[u];for(let f=u+1,A=n.length;f<A;f++)if(PS(h.bbox,n[f].bbox)===null)return[]}const i=new fw(Uc.compare);for(let u=0,c=n.length;u<c;u++){const h=n[u].getSweepEvents();for(let f=0,A=h.length;f<A;f++)i.add(h[f])}const a=new Sde(i);let s=null;for(i.size!=0&&(s=i.first(),i.delete(s));s;){const u=a.process(s);for(let c=0,h=u.length;c<h;c++){const f=u[c];f.consumedBy===void 0&&i.add(f)}i.size!=0?(s=i.first(),i.delete(s)):s=null}of.reset();const o=bde.factory(a.segments);return new Cde(o).getGeom()}},Qm=new Bde,n1=Qm,Tde=0,dw=class ox{constructor(e,t,n,i){yr(this,"id");yr(this,"leftSE");yr(this,"rightSE");yr(this,"rings");yr(this,"windings");yr(this,"ringOut");yr(this,"consumedBy");yr(this,"prev");yr(this,"_prevInResult");yr(this,"_beforeState");yr(this,"_afterState");yr(this,"_isInResult");this.id=++Tde,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=n,this.windings=i}static compare(e,t){const n=e.leftSE.point.x,i=t.leftSE.point.x,a=e.rightSE.point.x,s=t.rightSE.point.x;if(s.isLessThan(n))return 1;if(a.isLessThan(i))return-1;const o=e.leftSE.point.y,l=t.leftSE.point.y,u=e.rightSE.point.y,c=t.rightSE.point.y;if(n.isLessThan(i)){if(l.isLessThan(o)&&l.isLessThan(u))return 1;if(l.isGreaterThan(o)&&l.isGreaterThan(u))return-1;const h=e.comparePoint(t.leftSE.point);if(h<0)return 1;if(h>0)return-1;const f=t.comparePoint(e.rightSE.point);return f!==0?f:-1}if(n.isGreaterThan(i)){if(o.isLessThan(l)&&o.isLessThan(c))return-1;if(o.isGreaterThan(l)&&o.isGreaterThan(c))return 1;const h=t.comparePoint(e.leftSE.point);if(h!==0)return h;const f=e.comparePoint(t.rightSE.point);return f<0?1:f>0?-1:1}if(o.isLessThan(l))return-1;if(o.isGreaterThan(l))return 1;if(a.isLessThan(s)){const h=t.comparePoint(e.rightSE.point);if(h!==0)return h}if(a.isGreaterThan(s)){const h=e.comparePoint(t.rightSE.point);if(h<0)return 1;if(h>0)return-1}if(!a.eq(s)){const h=u.minus(o),f=a.minus(n),A=c.minus(l),d=s.minus(i);if(h.isGreaterThan(f)&&A.isLessThan(d))return 1;if(h.isLessThan(f)&&A.isGreaterThan(d))return-1}return a.isGreaterThan(s)?1:a.isLessThan(s)||u.isLessThan(c)?-1:u.isGreaterThan(c)?1:e.id<t.id?-1:e.id>t.id?1:0}static fromRing(e,t,n){let i,a,s;const o=Uc.comparePoints(e,t);if(o<0)i=e,a=t,s=1;else if(o>0)i=t,a=e,s=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const l=new Uc(i,!0),u=new Uc(a,!1);return new ox(l,u,[n],[s])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(t)?e:t},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(t)?e:t}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}comparePoint(e){return of.orient(this.leftSE.point,e,this.rightSE.point)}getIntersection(e){const t=this.bbox(),n=e.bbox(),i=PS(t,n);if(i===null)return null;const a=this.leftSE.point,s=this.rightSE.point,o=e.leftSE.point,l=e.rightSE.point,u=gm(t,o)&&this.comparePoint(o)===0,c=gm(n,a)&&e.comparePoint(a)===0,h=gm(t,l)&&this.comparePoint(l)===0,f=gm(n,s)&&e.comparePoint(s)===0;if(c&&u)return f&&!h?s:!f&&h?l:null;if(c)return h&&a.x.eq(l.x)&&a.y.eq(l.y)?null:a;if(u)return f&&s.x.eq(o.x)&&s.y.eq(o.y)?null:o;if(f&&h)return null;if(f)return s;if(h)return l;const A=Ede(a,this.vector(),o,e.vector());return A===null||!gm(i,A)?null:of.snap(A)}split(e){const t=[],n=e.events!==void 0,i=new Uc(e,!0),a=new Uc(e,!1),s=this.rightSE;this.replaceRightSE(a),t.push(a),t.push(i);const o=new ox(i,s,this.rings.slice(),this.windings.slice());return Uc.comparePoints(o.leftSE.point,o.rightSE.point)>0&&o.swapEvents(),Uc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(i.checkForConsuming(),a.checkForConsuming()),t}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let t=0,n=this.windings.length;t<n;t++)this.windings[t]*=-1}consume(e){let t=this,n=e;for(;t.consumedBy;)t=t.consumedBy;for(;n.consumedBy;)n=n.consumedBy;const i=ox.compare(t,n);if(i!==0){if(i>0){const a=t;t=n,n=a}if(t.prev===n){const a=t;t=n,n=a}for(let a=0,s=n.rings.length;a<s;a++){const o=n.rings[a],l=n.windings[a],u=t.rings.indexOf(o);u===-1?(t.rings.push(o),t.windings.push(l)):t.windings[u]+=l}n.rings=null,n.windings=null,n.consumedBy=t,n.leftSE.consumedBy=t.leftSE,n.rightSE.consumedBy=t.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const t=this._afterState.rings,n=this._afterState.windings,i=this._afterState.multiPolys;for(let o=0,l=this.rings.length;o<l;o++){const u=this.rings[o],c=this.windings[o],h=t.indexOf(u);h===-1?(t.push(u),n.push(c)):n[h]+=c}const a=[],s=[];for(let o=0,l=t.length;o<l;o++){if(n[o]===0)continue;const u=t[o],c=u.poly;if(s.indexOf(c)===-1)if(u.isExterior)a.push(c);else{s.indexOf(c)===-1&&s.push(c);const h=a.indexOf(u.poly);h!==-1&&a.splice(h,1)}}for(let o=0,l=a.length;o<l;o++){const u=a[o].multiPoly;i.indexOf(u)===-1&&i.push(u)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(n1.type){case"union":{const n=e.length===0,i=t.length===0;this._isInResult=n!==i;break}case"intersection":{let n,i;e.length<t.length?(n=e.length,i=t.length):(n=t.length,i=e.length),this._isInResult=i===n1.numMultiPolys&&n<i;break}case"xor":{const n=Math.abs(e.length-t.length);this._isInResult=n%2===1;break}case"difference":{const n=i=>i.length===1&&i[0].isSubject;this._isInResult=n(e)!==n(t);break}}return this._isInResult}},OF=class{constructor(r,e,t){yr(this,"poly");yr(this,"isExterior");yr(this,"segments");yr(this,"bbox");if(!Array.isArray(r)||r.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=t,this.segments=[],typeof r[0][0]!="number"||typeof r[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const n=of.snap({x:new Vc(r[0][0]),y:new Vc(r[0][1])});this.bbox={ll:{x:n.x,y:n.y},ur:{x:n.x,y:n.y}};let i=n;for(let a=1,s=r.length;a<s;a++){if(typeof r[a][0]!="number"||typeof r[a][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const o=of.snap({x:new Vc(r[a][0]),y:new Vc(r[a][1])});o.x.eq(i.x)&&o.y.eq(i.y)||(this.segments.push(dw.fromRing(i,o,this)),o.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=o.x),o.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=o.y),o.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=o.x),o.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=o.y),i=o)}(!n.x.eq(i.x)||!n.y.eq(i.y))&&this.segments.push(dw.fromRing(i,n,this))}getSweepEvents(){const r=[];for(let e=0,t=this.segments.length;e<t;e++){const n=this.segments[e];r.push(n.leftSE),r.push(n.rightSE)}return r}},Nde=class{constructor(r,e){yr(this,"multiPoly");yr(this,"exteriorRing");yr(this,"interiorRings");yr(this,"bbox");if(!Array.isArray(r))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new OF(r[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let t=1,n=r.length;t<n;t++){const i=new OF(r[t],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=e}getSweepEvents(){const r=this.exteriorRing.getSweepEvents();for(let e=0,t=this.interiorRings.length;e<t;e++){const n=this.interiorRings[e].getSweepEvents();for(let i=0,a=n.length;i<a;i++)r.push(n[i])}return r}},PF=class{constructor(r,e){yr(this,"isSubject");yr(this,"polys");yr(this,"bbox");if(!Array.isArray(r))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof r[0][0][0]=="number"&&(r=[r])}catch{}this.polys=[],this.bbox={ll:{x:new Vc(Number.POSITIVE_INFINITY),y:new Vc(Number.POSITIVE_INFINITY)},ur:{x:new Vc(Number.NEGATIVE_INFINITY),y:new Vc(Number.NEGATIVE_INFINITY)}};for(let t=0,n=r.length;t<n;t++){const i=new Nde(r[t],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=e}getSweepEvents(){const r=[];for(let e=0,t=this.polys.length;e<t;e++){const n=this.polys[e].getSweepEvents();for(let i=0,a=n.length;i<a;i++)r.push(n[i])}return r}},Ide=(r,...e)=>n1.run("union",r,e),Fde=(r,...e)=>n1.run("intersection",r,e),Mde=(r,...e)=>n1.run("difference",r,e);of.set;function Lde(r){const e=[];if(D1(r,i=>{e.push(i.coordinates)}),e.length<2)throw new Error("Must have at least two features");const t=r.features[0].properties||{},n=Mde(e[0],...e.slice(1));return n.length===0?null:n.length===1?GB(n[0],t):HB(n,t)}function Dde(r,e={}){const t=[];if(D1(r,i=>{t.push(i.coordinates)}),t.length<2)throw new Error("Must specify at least 2 geometries");const n=Fde(t[0],...t.slice(1));return n.length===0?null:n.length===1?GB(n[0],e.properties):HB(n,e.properties)}function H7(r,e={}){const t=[];if(D1(r,i=>{t.push(i.coordinates)}),t.length<2)throw new Error("Must have at least 2 geometries");const n=Ide(t[0],...t.slice(1));return n.length===0?null:n.length===1?GB(n[0],e.properties):HB(n,e.properties)}class kde{constructor(){this.geoJSONFormat=new rs}createBuffer(e,t,n="meters",i={}){const a=pt.getLayer(e);if(!a)throw new Error("레이어를 찾을 수 없습니다.");const o=a.olLayer.getSource().getFeatures();if(o.length===0)throw new Error("레이어에 피처가 없습니다.");const u=o.map(p=>this.geoJSONFormat.writeFeatureObject(p,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})).map(p=>{try{return hde(p,t,{units:n})}catch(y){return console.warn("버퍼 생성 실패:",y),null}}).filter(p=>p!==null);if(u.length===0)throw new Error("버퍼 생성에 실패했습니다.");const c=$c(u);let h;if(i.dissolve&&u.length>1)try{let p=u[0];for(let y=1;y<u.length;y++)p=H7($c([p,u[y]]));h=$c([p])}catch(p){console.warn("버퍼 병합 실패, 개별 버퍼 사용:",p),h=c}else h=c;const f=this.geoJSONFormat.readFeatures(h,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),A=`${a.name}_buffer_${t}${n==="kilometers"?"km":"m"}`;return{layerId:pt.addLayer({name:A,features:f,color:i.color||"#3388ff"}),featureCount:f.length,layerName:A}}getBufferStyle(e,t){return new En({fill:new _n({color:this.hexToRgba(e,t)}),stroke:new hn({color:e,width:2})})}hexToRgba(e,t){const n=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return`rgba(${n}, ${i}, ${a}, ${t})`}getUnits(){return[{value:"meters",label:"미터 (m)"},{value:"kilometers",label:"킬로미터 (km)"}]}}const UF=new kde;class Rde{constructor(){this.modal=null,this.currentLayerId=null}show(e=null){if(e||(e=pt.getSelectedLayerId()),!e){alert("먼저 레이어를 선택해주세요.");return}const t=pt.getLayer(e);t&&(this.currentLayerId=e,this.render(t))}render(e){this.close();const t=UF.getUnits();this.modal=document.createElement("div"),this.modal.className="buffer-modal",this.modal.innerHTML=this.getModalHTML(e.name,t),document.body.appendChild(this.modal),this.bindEvents()}getModalHTML(e,t){const n=t.map(i=>'<option value="'+i.value+'">'+i.label+"</option>").join("");return'<div class="buffer-content"><div class="buffer-header"><h3>버퍼 분석</h3><button class="buffer-close" id="buffer-close">&times;</button></div><div class="buffer-body"><div class="buffer-form-group"><label>소스 레이어</label><div class="buffer-layer-name">'+e+'</div></div><div class="buffer-form-group"><label for="buffer-distance">버퍼 거리</label><input type="number" id="buffer-distance" value="100" min="1" step="1"></div><div class="buffer-form-group"><label for="buffer-unit">단위</label><select id="buffer-unit">'+n+'</select></div><div class="buffer-form-group"><label for="buffer-color">버퍼 색상</label><input type="color" id="buffer-color" value="#3388ff"></div><div class="buffer-form-group"><label for="buffer-opacity">투명도</label><input type="range" id="buffer-opacity" min="0.1" max="1" step="0.1" value="0.3"><span id="buffer-opacity-value">0.3</span></div><div class="buffer-form-group"><label for="buffer-dissolve"><input type="checkbox" id="buffer-dissolve"> 버퍼 병합 (Dissolve)</label></div></div><div class="buffer-footer"><button class="btn btn-secondary" id="buffer-cancel">취소</button><button class="btn btn-primary" id="buffer-apply">적용</button></div></div>'}bindEvents(){const e=document.getElementById("buffer-close"),t=document.getElementById("buffer-cancel"),n=document.getElementById("buffer-apply"),i=document.getElementById("buffer-opacity"),a=document.getElementById("buffer-opacity-value");e.addEventListener("click",()=>this.close()),t.addEventListener("click",()=>this.close()),i.addEventListener("input",s=>{a.textContent=s.target.value}),n.addEventListener("click",()=>this.apply())}apply(){const e=parseFloat(document.getElementById("buffer-distance").value),t=document.getElementById("buffer-unit").value,n=document.getElementById("buffer-color").value,i=parseFloat(document.getElementById("buffer-opacity").value),a=document.getElementById("buffer-dissolve").checked;if(isNaN(e)||e<=0){alert("올바른 버퍼 거리를 입력해주세요.");return}try{const s=UF.createBuffer(this.currentLayerId,e,t,{color:n,opacity:i,dissolve:a});alert(`버퍼가 생성되었습니다!
레이어: ${s.layerName}
피처 수: ${s.featureCount}`),this.close()}catch(s){alert("버퍼 생성 실패: "+s.message)}}close(){this.modal&&(this.modal.remove(),this.modal=null)}}const Ode=new Rde;/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var QS=function(r,e){return QS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},QS(r,e)};function cc(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");QS(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var GS=function(){return GS=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},GS.apply(this,arguments)};function Ro(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{u(n.next(c))}catch(h){s(h)}}function l(c){try{u(n.throw(c))}catch(h){s(h)}}function u(c){c.done?a(c.value):i(c.value).then(o,l)}u((n=n.apply(r,[])).next())})}function oo(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function a2(r,e,t){if(arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||e)}var lf=function(){function r(e,t,n,i){this.left=e,this.top=t,this.width=n,this.height=i}return r.prototype.add=function(e,t,n,i){return new r(this.left+e,this.top+t,this.width+n,this.height+i)},r.fromClientRect=function(e,t){return new r(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},r.fromDOMRectList=function(e,t){var n=Array.from(t).find(function(i){return i.width!==0});return n?new r(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):r.EMPTY},r.EMPTY=new r(0,0,0,0),r}(),M_=function(r,e){return lf.fromClientRect(r,e.getBoundingClientRect())},Pde=function(r){var e=r.body,t=r.documentElement;if(!e||!t)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),i=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new lf(0,0,n,i)},L_=function(r){for(var e=[],t=0,n=r.length;t<n;){var i=r.charCodeAt(t++);if(i>=55296&&i<=56319&&t<n){var a=r.charCodeAt(t++);(a&64512)===56320?e.push(((i&1023)<<10)+(a&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},ba=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var n=[],i=-1,a="";++i<t;){var s=r[i];s<=65535?n.push(s):(s-=65536,n.push((s>>10)+55296,s%1024+56320)),(i+1===t||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},QF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ude=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var s2=0;s2<QF.length;s2++)Ude[QF.charCodeAt(s2)]=s2;var GF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var o2=0;o2<GF.length;o2++)Gm[GF.charCodeAt(o2)]=o2;var Qde=function(r){var e=r.length*.75,t=r.length,n,i=0,a,s,o,l;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<t;n+=4)a=Gm[r.charCodeAt(n)],s=Gm[r.charCodeAt(n+1)],o=Gm[r.charCodeAt(n+2)],l=Gm[r.charCodeAt(n+3)],c[i++]=a<<2|s>>4,c[i++]=(s&15)<<4|o>>2,c[i++]=(o&3)<<6|l&63;return u},Gde=function(r){for(var e=r.length,t=[],n=0;n<e;n+=2)t.push(r[n+1]<<8|r[n]);return t},Hde=function(r){for(var e=r.length,t=[],n=0;n<e;n+=4)t.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return t},Fd=5,zB=11,zb=2,zde=zB-Fd,z7=65536>>Fd,qde=1<<Fd,qb=qde-1,jde=1024>>Fd,$de=z7+jde,Kde=$de,Vde=32,Wde=Kde+Vde,Yde=65536>>zB,Xde=1<<zde,Zde=Xde-1,HF=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},Jde=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},e0e=function(r,e){var t=Qde(r),n=Array.isArray(t)?Hde(t):new Uint32Array(t),i=Array.isArray(t)?Gde(t):new Uint16Array(t),a=24,s=HF(i,a/2,n[4]/2),o=n[5]===2?HF(i,(a+n[4])/2):Jde(n,Math.ceil((a+n[4])/4));return new t0e(n[0],n[1],n[2],n[3],s,o)},t0e=function(){function r(e,t,n,i,a,s){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=i,this.index=a,this.data=s}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Fd],t=(t<<zb)+(e&qb),this.data[t];if(e<=65535)return t=this.index[z7+(e-55296>>Fd)],t=(t<<zb)+(e&qb),this.data[t];if(e<this.highStart)return t=Wde-Yde+(e>>zB),t=this.index[t],t+=e>>Fd&Zde,t=this.index[t],t=(t<<zb)+(e&qb),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r}(),zF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r0e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var l2=0;l2<zF.length;l2++)r0e[zF.charCodeAt(l2)]=l2;var n0e="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",qF=50,i0e=1,q7=2,j7=3,a0e=4,s0e=5,jF=7,$7=8,$F=9,dA=10,HS=11,KF=12,zS=13,o0e=14,Hm=15,qS=16,u2=17,pm=18,l0e=19,VF=20,jS=21,mm=22,jb=23,P0=24,Ll=25,zm=26,qm=27,U0=28,u0e=29,vd=30,c0e=31,c2=32,h2=33,$S=34,KS=35,VS=36,i1=37,WS=38,lx=39,ux=40,$b=41,K7=42,h0e=43,f0e=[9001,65288],V7="!",Rn="×",f2="÷",YS=e0e(n0e),Fh=[vd,VS],XS=[i0e,q7,j7,s0e],W7=[dA,$7],WF=[qm,zm],A0e=XS.concat(W7),YF=[WS,lx,ux,$S,KS],d0e=[Hm,zS],g0e=function(r,e){e===void 0&&(e="strict");var t=[],n=[],i=[];return r.forEach(function(a,s){var o=YS.get(a);if(o>qF?(i.push(!0),o-=qF):i.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return n.push(s),t.push(qS);if(o===a0e||o===HS){if(s===0)return n.push(s),t.push(vd);var l=t[s-1];return A0e.indexOf(l)===-1?(n.push(n[s-1]),t.push(l)):(n.push(s),t.push(vd))}if(n.push(s),o===c0e)return t.push(e==="strict"?jS:i1);if(o===K7||o===u0e)return t.push(vd);if(o===h0e)return a>=131072&&a<=196605||a>=196608&&a<=262141?t.push(i1):t.push(vd);t.push(o)}),[n,t,i]},Kb=function(r,e,t,n){var i=n[t];if(Array.isArray(r)?r.indexOf(i)!==-1:r===i)for(var a=t;a<=n.length;){a++;var s=n[a];if(s===e)return!0;if(s!==dA)break}if(i===dA)for(var a=t;a>0;){a--;var o=n[a];if(Array.isArray(r)?r.indexOf(o)!==-1:r===o)for(var l=t;l<=n.length;){l++;var s=n[l];if(s===e)return!0;if(s!==dA)break}if(o!==dA)break}return!1},XF=function(r,e){for(var t=r;t>=0;){var n=e[t];if(n===dA)t--;else return n}return 0},p0e=function(r,e,t,n,i){if(t[n]===0)return Rn;var a=n-1;if(Array.isArray(i)&&i[a]===!0)return Rn;var s=a-1,o=a+1,l=e[a],u=s>=0?e[s]:0,c=e[o];if(l===q7&&c===j7)return Rn;if(XS.indexOf(l)!==-1)return V7;if(XS.indexOf(c)!==-1||W7.indexOf(c)!==-1)return Rn;if(XF(a,e)===$7)return f2;if(YS.get(r[a])===HS||(l===c2||l===h2)&&YS.get(r[o])===HS||l===jF||c===jF||l===$F||[dA,zS,Hm].indexOf(l)===-1&&c===$F||[u2,pm,l0e,P0,U0].indexOf(c)!==-1||XF(a,e)===mm||Kb(jb,mm,a,e)||Kb([u2,pm],jS,a,e)||Kb(KF,KF,a,e))return Rn;if(l===dA)return f2;if(l===jb||c===jb)return Rn;if(c===qS||l===qS)return f2;if([zS,Hm,jS].indexOf(c)!==-1||l===o0e||u===VS&&d0e.indexOf(l)!==-1||l===U0&&c===VS||c===VF||Fh.indexOf(c)!==-1&&l===Ll||Fh.indexOf(l)!==-1&&c===Ll||l===qm&&[i1,c2,h2].indexOf(c)!==-1||[i1,c2,h2].indexOf(l)!==-1&&c===zm||Fh.indexOf(l)!==-1&&WF.indexOf(c)!==-1||WF.indexOf(l)!==-1&&Fh.indexOf(c)!==-1||[qm,zm].indexOf(l)!==-1&&(c===Ll||[mm,Hm].indexOf(c)!==-1&&e[o+1]===Ll)||[mm,Hm].indexOf(l)!==-1&&c===Ll||l===Ll&&[Ll,U0,P0].indexOf(c)!==-1)return Rn;if([Ll,U0,P0,u2,pm].indexOf(c)!==-1)for(var h=a;h>=0;){var f=e[h];if(f===Ll)return Rn;if([U0,P0].indexOf(f)!==-1)h--;else break}if([qm,zm].indexOf(c)!==-1)for(var h=[u2,pm].indexOf(l)!==-1?s:a;h>=0;){var f=e[h];if(f===Ll)return Rn;if([U0,P0].indexOf(f)!==-1)h--;else break}if(WS===l&&[WS,lx,$S,KS].indexOf(c)!==-1||[lx,$S].indexOf(l)!==-1&&[lx,ux].indexOf(c)!==-1||[ux,KS].indexOf(l)!==-1&&c===ux||YF.indexOf(l)!==-1&&[VF,zm].indexOf(c)!==-1||YF.indexOf(c)!==-1&&l===qm||Fh.indexOf(l)!==-1&&Fh.indexOf(c)!==-1||l===P0&&Fh.indexOf(c)!==-1||Fh.concat(Ll).indexOf(l)!==-1&&c===mm&&f0e.indexOf(r[o])===-1||Fh.concat(Ll).indexOf(c)!==-1&&l===pm)return Rn;if(l===$b&&c===$b){for(var A=t[a],d=1;A>0&&(A--,e[A]===$b);)d++;if(d%2!==0)return Rn}return l===c2&&c===h2?Rn:f2},m0e=function(r,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=g0e(r,e.lineBreak),n=t[0],i=t[1],a=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(i=i.map(function(o){return[Ll,vd,K7].indexOf(o)!==-1?i1:o}));var s=e.wordBreak==="keep-all"?a.map(function(o,l){return o&&r[l]>=19968&&r[l]<=40959}):void 0;return[n,i,s]},v0e=function(){function r(e,t,n,i){this.codePoints=e,this.required=t===V7,this.start=n,this.end=i}return r.prototype.slice=function(){return ba.apply(void 0,this.codePoints.slice(this.start,this.end))},r}(),y0e=function(r,e){var t=L_(r),n=m0e(t,e),i=n[0],a=n[1],s=n[2],o=t.length,l=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var c=Rn;u<o&&(c=p0e(t,a,i,++u,s))===Rn;);if(c!==Rn||u===o){var h=new v0e(t,c,l,u);return l=u,{value:h,done:!1}}return{done:!0,value:null}}}},x0e=1,w0e=2,k1=4,ZF=8,gw=10,JF=47,vv=92,_0e=9,E0e=32,A2=34,vm=61,b0e=35,C0e=36,S0e=37,d2=39,g2=40,ym=41,B0e=95,fl=45,T0e=33,N0e=60,I0e=62,F0e=64,M0e=91,L0e=93,D0e=61,k0e=123,p2=63,R0e=125,eM=124,O0e=126,P0e=128,tM=65533,Vb=42,bd=43,U0e=44,Q0e=58,G0e=59,a1=46,H0e=0,z0e=8,q0e=11,j0e=14,$0e=31,K0e=127,kc=-1,Y7=48,X7=97,Z7=101,V0e=102,W0e=117,Y0e=122,J7=65,e9=69,t9=70,X0e=85,Z0e=90,co=function(r){return r>=Y7&&r<=57},J0e=function(r){return r>=55296&&r<=57343},Q0=function(r){return co(r)||r>=J7&&r<=t9||r>=X7&&r<=V0e},ege=function(r){return r>=X7&&r<=Y0e},tge=function(r){return r>=J7&&r<=Z0e},rge=function(r){return ege(r)||tge(r)},nge=function(r){return r>=P0e},m2=function(r){return r===gw||r===_0e||r===E0e},pw=function(r){return rge(r)||nge(r)||r===B0e},rM=function(r){return pw(r)||co(r)||r===fl},ige=function(r){return r>=H0e&&r<=z0e||r===q0e||r>=j0e&&r<=$0e||r===K0e},nA=function(r,e){return r!==vv?!1:e!==gw},v2=function(r,e,t){return r===fl?pw(e)||nA(e,t):pw(r)?!0:!!(r===vv&&nA(r,e))},Wb=function(r,e,t){return r===bd||r===fl?co(e)?!0:e===a1&&co(t):co(r===a1?e:r)},age=function(r){var e=0,t=1;(r[e]===bd||r[e]===fl)&&(r[e]===fl&&(t=-1),e++);for(var n=[];co(r[e]);)n.push(r[e++]);var i=n.length?parseInt(ba.apply(void 0,n),10):0;r[e]===a1&&e++;for(var a=[];co(r[e]);)a.push(r[e++]);var s=a.length,o=s?parseInt(ba.apply(void 0,a),10):0;(r[e]===e9||r[e]===Z7)&&e++;var l=1;(r[e]===bd||r[e]===fl)&&(r[e]===fl&&(l=-1),e++);for(var u=[];co(r[e]);)u.push(r[e++]);var c=u.length?parseInt(ba.apply(void 0,u),10):0;return t*(i+o*Math.pow(10,-s))*Math.pow(10,l*c)},sge={type:2},oge={type:3},lge={type:4},uge={type:13},cge={type:8},hge={type:21},fge={type:9},Age={type:10},dge={type:11},gge={type:12},pge={type:14},y2={type:23},mge={type:1},vge={type:25},yge={type:24},xge={type:26},wge={type:27},_ge={type:28},Ege={type:29},bge={type:31},ZS={type:32},r9=function(){function r(){this._value=[]}return r.prototype.write=function(e){this._value=this._value.concat(L_(e))},r.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==ZS;)e.push(t),t=this.consumeToken();return e},r.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case A2:return this.consumeStringToken(A2);case b0e:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),i=this.peekCodePoint(2);if(rM(t)||nA(n,i)){var a=v2(t,n,i)?w0e:x0e,s=this.consumeName();return{type:5,value:s,flags:a}}break;case C0e:if(this.peekCodePoint(0)===vm)return this.consumeCodePoint(),uge;break;case d2:return this.consumeStringToken(d2);case g2:return sge;case ym:return oge;case Vb:if(this.peekCodePoint(0)===vm)return this.consumeCodePoint(),pge;break;case bd:if(Wb(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case U0e:return lge;case fl:var o=e,l=this.peekCodePoint(0),u=this.peekCodePoint(1);if(Wb(o,l,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(v2(o,l,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===fl&&u===I0e)return this.consumeCodePoint(),this.consumeCodePoint(),yge;break;case a1:if(Wb(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case JF:if(this.peekCodePoint(0)===Vb)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===Vb&&(c=this.consumeCodePoint(),c===JF))return this.consumeToken();if(c===kc)return this.consumeToken()}break;case Q0e:return xge;case G0e:return wge;case N0e:if(this.peekCodePoint(0)===T0e&&this.peekCodePoint(1)===fl&&this.peekCodePoint(2)===fl)return this.consumeCodePoint(),this.consumeCodePoint(),vge;break;case F0e:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),A=this.peekCodePoint(2);if(v2(h,f,A)){var s=this.consumeName();return{type:7,value:s}}break;case M0e:return _ge;case vv:if(nA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case L0e:return Ege;case D0e:if(this.peekCodePoint(0)===vm)return this.consumeCodePoint(),cge;break;case k0e:return dge;case R0e:return gge;case W0e:case X0e:var d=this.peekCodePoint(0),p=this.peekCodePoint(1);return d===bd&&(Q0(p)||p===p2)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case eM:if(this.peekCodePoint(0)===vm)return this.consumeCodePoint(),fge;if(this.peekCodePoint(0)===eM)return this.consumeCodePoint(),hge;break;case O0e:if(this.peekCodePoint(0)===vm)return this.consumeCodePoint(),Age;break;case kc:return ZS}return m2(e)?(this.consumeWhiteSpace(),bge):co(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):pw(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ba(e)}},r.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},r.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},r.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},r.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Q0(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===p2&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n){var i=parseInt(ba.apply(void 0,e.map(function(l){return l===p2?Y7:l})),16),a=parseInt(ba.apply(void 0,e.map(function(l){return l===p2?t9:l})),16);return{type:30,start:i,end:a}}var s=parseInt(ba.apply(void 0,e),16);if(this.peekCodePoint(0)===fl&&Q0(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var o=[];Q0(t)&&o.length<6;)o.push(t),t=this.consumeCodePoint();var a=parseInt(ba.apply(void 0,o),16);return{type:30,start:s,end:a}}else return{type:30,start:s,end:s}},r.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===g2?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===g2?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},r.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===kc)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===d2||t===A2){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===kc||this.peekCodePoint(0)===ym)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),y2)}for(;;){var i=this.consumeCodePoint();if(i===kc||i===ym)return{type:22,value:ba.apply(void 0,e)};if(m2(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===kc||this.peekCodePoint(0)===ym?(this.consumeCodePoint(),{type:22,value:ba.apply(void 0,e)}):(this.consumeBadUrlRemnants(),y2);if(i===A2||i===d2||i===g2||ige(i))return this.consumeBadUrlRemnants(),y2;if(i===vv)if(nA(i,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),y2;else e.push(i)}},r.prototype.consumeWhiteSpace=function(){for(;m2(this.peekCodePoint(0));)this.consumeCodePoint()},r.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===ym||e===kc)return;nA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},r.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var i=Math.min(t,e);n+=ba.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),n},r.prototype.consumeStringToken=function(e){var t="",n=0;do{var i=this._value[n];if(i===kc||i===void 0||i===e)return t+=this.consumeStringSlice(n),{type:0,value:t};if(i===gw)return this._value.splice(0,n),mge;if(i===vv){var a=this._value[n+1];a!==kc&&a!==void 0&&(a===gw?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):nA(i,a)&&(t+=this.consumeStringSlice(n),t+=ba(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},r.prototype.consumeNumber=function(){var e=[],t=k1,n=this.peekCodePoint(0);for((n===bd||n===fl)&&e.push(this.consumeCodePoint());co(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(n===a1&&co(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=ZF;co(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),i=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((n===e9||n===Z7)&&((i===bd||i===fl)&&co(a)||co(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=ZF;co(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[age(e),t]},r.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],i=this.peekCodePoint(0),a=this.peekCodePoint(1),s=this.peekCodePoint(2);if(v2(i,a,s)){var o=this.consumeName();return{type:15,number:t,flags:n,unit:o}}return i===S0e?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},r.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Q0(e)){for(var t=ba(e);Q0(this.peekCodePoint(0))&&t.length<6;)t+=ba(this.consumeCodePoint());m2(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return n===0||J0e(n)||n>1114111?tM:n}return e===kc?tM:e},r.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(rM(t))e+=ba(t);else if(nA(t,this.peekCodePoint(0)))e+=ba(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},r}(),n9=function(){function r(e){this._tokens=e}return r.create=function(e){var t=new r9;return t.write(e),new r(t.read())},r.parseValue=function(e){return r.create(e).parseComponentValue()},r.parseValues=function(e){return r.create(e).parseComponentValues()},r.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},r.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},r.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},r.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||Sge(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},r.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},r.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?ZS:e},r.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},r}(),R1=function(r){return r.type===15},Fp=function(r){return r.type===17},Fi=function(r){return r.type===20},Cge=function(r){return r.type===0},JS=function(r,e){return Fi(r)&&r.value===e},i9=function(r){return r.type!==31},op=function(r){return r.type!==31&&r.type!==4},ch=function(r){var e=[],t=[];return r.forEach(function(n){if(n.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}n.type!==31&&t.push(n)}),t.length&&e.push(t),e},Sge=function(r,e){return e===11&&r.type===12||e===28&&r.type===29?!0:e===2&&r.type===3},FA=function(r){return r.type===17||r.type===15},za=function(r){return r.type===16||FA(r)},a9=function(r){return r.length>1?[r[0],r[1]]:[r[0]]},Ps={type:17,number:0,flags:k1},qB={type:16,number:50,flags:k1},gA={type:16,number:100,flags:k1},jm=function(r,e,t){var n=r[0],i=r[1];return[zi(n,e),zi(typeof i<"u"?i:n,t)]},zi=function(r,e){if(r.type===16)return r.number/100*e;if(R1(r))switch(r.unit){case"rem":case"em":return 16*r.number;case"px":default:return r.number}return r.number},s9="deg",o9="grad",l9="rad",u9="turn",D_={name:"angle",parse:function(r,e){if(e.type===15)switch(e.unit){case s9:return Math.PI*e.number/180;case o9:return Math.PI/200*e.number;case l9:return e.number;case u9:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},c9=function(r){return r.type===15&&(r.unit===s9||r.unit===o9||r.unit===l9||r.unit===u9)},h9=function(r){var e=r.filter(Fi).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Ps,Ps];case"to top":case"bottom":return wu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Ps,gA];case"to right":case"left":return wu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[gA,gA];case"to bottom":case"top":return wu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[gA,Ps];case"to left":case"right":return wu(270)}return 0},wu=function(r){return Math.PI*r/180},bA={name:"color",parse:function(r,e){if(e.type===18){var t=Bge[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(r,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),i=e.value.substring(1,2),a=e.value.substring(2,3);return pA(parseInt(n+n,16),parseInt(i+i,16),parseInt(a+a,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),i=e.value.substring(1,2),a=e.value.substring(2,3),s=e.value.substring(3,4);return pA(parseInt(n+n,16),parseInt(i+i,16),parseInt(a+a,16),parseInt(s+s,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),i=e.value.substring(2,4),a=e.value.substring(4,6);return pA(parseInt(n,16),parseInt(i,16),parseInt(a,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),i=e.value.substring(2,4),a=e.value.substring(4,6),s=e.value.substring(6,8);return pA(parseInt(n,16),parseInt(i,16),parseInt(a,16),parseInt(s,16)/255)}}if(e.type===20){var o=tf[e.value.toUpperCase()];if(typeof o<"u")return o}return tf.TRANSPARENT}},CA=function(r){return(255&r)===0},gs=function(r){var e=255&r,t=255&r>>8,n=255&r>>16,i=255&r>>24;return e<255?"rgba("+i+","+n+","+t+","+e/255+")":"rgb("+i+","+n+","+t+")"},pA=function(r,e,t,n){return(r<<24|e<<16|t<<8|Math.round(n*255)<<0)>>>0},nM=function(r,e){if(r.type===17)return r.number;if(r.type===16){var t=e===3?1:255;return e===3?r.number/100*t:Math.round(r.number/100*t)}return 0},iM=function(r,e){var t=e.filter(op);if(t.length===3){var n=t.map(nM),i=n[0],a=n[1],s=n[2];return pA(i,a,s,1)}if(t.length===4){var o=t.map(nM),i=o[0],a=o[1],s=o[2],l=o[3];return pA(i,a,s,l)}return 0};function Yb(r,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-r)*t*6+r:t<1/2?e:t<2/3?(e-r)*6*(2/3-t)+r:r}var aM=function(r,e){var t=e.filter(op),n=t[0],i=t[1],a=t[2],s=t[3],o=(n.type===17?wu(n.number):D_.parse(r,n))/(Math.PI*2),l=za(i)?i.number/100:0,u=za(a)?a.number/100:0,c=typeof s<"u"&&za(s)?zi(s,1):1;if(l===0)return pA(u*255,u*255,u*255,1);var h=u<=.5?u*(l+1):u+l-u*l,f=u*2-h,A=Yb(f,h,o+1/3),d=Yb(f,h,o),p=Yb(f,h,o-1/3);return pA(A*255,d*255,p*255,c)},Bge={hsl:aM,hsla:aM,rgb:iM,rgba:iM},yv=function(r,e){return bA.parse(r,n9.create(e).parseComponentValue())},tf={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Tge={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Fi(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Nge={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},k_=function(r,e){var t=bA.parse(r,e[0]),n=e[1];return n&&za(n)?{color:t,stop:n}:{color:t,stop:null}},sM=function(r,e){var t=r[0],n=r[r.length-1];t.stop===null&&(t.stop=Ps),n.stop===null&&(n.stop=gA);for(var i=[],a=0,s=0;s<r.length;s++){var o=r[s].stop;if(o!==null){var l=zi(o,e);l>a?i.push(l):i.push(a),a=l}else i.push(null)}for(var u=null,s=0;s<i.length;s++){var c=i[s];if(c===null)u===null&&(u=s);else if(u!==null){for(var h=s-u,f=i[u-1],A=(c-f)/(h+1),d=1;d<=h;d++)i[u+d-1]=A*d;u=null}}return r.map(function(p,y){var v=p.color;return{color:v,stop:Math.max(Math.min(1,i[y]/e),0)}})},Ige=function(r,e,t){var n=e/2,i=t/2,a=zi(r[0],e)-n,s=i-zi(r[1],t);return(Math.atan2(s,a)+Math.PI*2)%(Math.PI*2)},Fge=function(r,e,t){var n=typeof r=="number"?r:Ige(r,e,t),i=Math.abs(e*Math.sin(n))+Math.abs(t*Math.cos(n)),a=e/2,s=t/2,o=i/2,l=Math.sin(n-Math.PI/2)*o,u=Math.cos(n-Math.PI/2)*o;return[i,a-u,a+u,s-l,s+l]},$u=function(r,e){return Math.sqrt(r*r+e*e)},oM=function(r,e,t,n,i){var a=[[0,0],[0,e],[r,0],[r,e]];return a.reduce(function(s,o){var l=o[0],u=o[1],c=$u(t-l,n-u);return(i?c<s.optimumDistance:c>s.optimumDistance)?{optimumCorner:o,optimumDistance:c}:s},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},Mge=function(r,e,t,n,i){var a=0,s=0;switch(r.size){case 0:r.shape===0?a=s=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-i)):r.shape===1&&(a=Math.min(Math.abs(e),Math.abs(e-n)),s=Math.min(Math.abs(t),Math.abs(t-i)));break;case 2:if(r.shape===0)a=s=Math.min($u(e,t),$u(e,t-i),$u(e-n,t),$u(e-n,t-i));else if(r.shape===1){var o=Math.min(Math.abs(t),Math.abs(t-i))/Math.min(Math.abs(e),Math.abs(e-n)),l=oM(n,i,e,t,!0),u=l[0],c=l[1];a=$u(u-e,(c-t)/o),s=o*a}break;case 1:r.shape===0?a=s=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-i)):r.shape===1&&(a=Math.max(Math.abs(e),Math.abs(e-n)),s=Math.max(Math.abs(t),Math.abs(t-i)));break;case 3:if(r.shape===0)a=s=Math.max($u(e,t),$u(e,t-i),$u(e-n,t),$u(e-n,t-i));else if(r.shape===1){var o=Math.max(Math.abs(t),Math.abs(t-i))/Math.max(Math.abs(e),Math.abs(e-n)),h=oM(n,i,e,t,!1),u=h[0],c=h[1];a=$u(u-e,(c-t)/o),s=o*a}break}return Array.isArray(r.size)&&(a=zi(r.size[0],n),s=r.size.length===2?zi(r.size[1],i):a),[a,s]},Lge=function(r,e){var t=wu(180),n=[];return ch(e).forEach(function(i,a){if(a===0){var s=i[0];if(s.type===20&&s.value==="to"){t=h9(i);return}else if(c9(s)){t=D_.parse(r,s);return}}var o=k_(r,i);n.push(o)}),{angle:t,stops:n,type:1}},x2=function(r,e){var t=wu(180),n=[];return ch(e).forEach(function(i,a){if(a===0){var s=i[0];if(s.type===20&&["top","left","right","bottom"].indexOf(s.value)!==-1){t=h9(i);return}else if(c9(s)){t=(D_.parse(r,s)+wu(270))%wu(360);return}}var o=k_(r,i);n.push(o)}),{angle:t,stops:n,type:1}},Dge=function(r,e){var t=wu(180),n=[],i=1,a=0,s=3,o=[];return ch(e).forEach(function(l,u){var c=l[0];if(u===0){if(Fi(c)&&c.value==="linear"){i=1;return}else if(Fi(c)&&c.value==="radial"){i=2;return}}if(c.type===18){if(c.name==="from"){var h=bA.parse(r,c.values[0]);n.push({stop:Ps,color:h})}else if(c.name==="to"){var h=bA.parse(r,c.values[0]);n.push({stop:gA,color:h})}else if(c.name==="color-stop"){var f=c.values.filter(op);if(f.length===2){var h=bA.parse(r,f[1]),A=f[0];Fp(A)&&n.push({stop:{type:16,number:A.number*100,flags:A.flags},color:h})}}}}),i===1?{angle:(t+wu(180))%wu(360),stops:n,type:i}:{size:s,shape:a,stops:n,position:o,type:i}},f9="closest-side",A9="farthest-side",d9="closest-corner",g9="farthest-corner",p9="circle",m9="ellipse",v9="cover",y9="contain",kge=function(r,e){var t=0,n=3,i=[],a=[];return ch(e).forEach(function(s,o){var l=!0;if(o===0){var u=!1;l=s.reduce(function(h,f){if(u)if(Fi(f))switch(f.value){case"center":return a.push(qB),h;case"top":case"left":return a.push(Ps),h;case"right":case"bottom":return a.push(gA),h}else(za(f)||FA(f))&&a.push(f);else if(Fi(f))switch(f.value){case p9:return t=0,!1;case m9:return t=1,!1;case"at":return u=!0,!1;case f9:return n=0,!1;case v9:case A9:return n=1,!1;case y9:case d9:return n=2,!1;case g9:return n=3,!1}else if(FA(f)||za(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return h},l)}if(l){var c=k_(r,s);i.push(c)}}),{size:n,shape:t,stops:i,position:a,type:2}},w2=function(r,e){var t=0,n=3,i=[],a=[];return ch(e).forEach(function(s,o){var l=!0;if(o===0?l=s.reduce(function(c,h){if(Fi(h))switch(h.value){case"center":return a.push(qB),!1;case"top":case"left":return a.push(Ps),!1;case"right":case"bottom":return a.push(gA),!1}else if(za(h)||FA(h))return a.push(h),!1;return c},l):o===1&&(l=s.reduce(function(c,h){if(Fi(h))switch(h.value){case p9:return t=0,!1;case m9:return t=1,!1;case y9:case f9:return n=0,!1;case A9:return n=1,!1;case d9:return n=2,!1;case v9:case g9:return n=3,!1}else if(FA(h)||za(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return c},l)),l){var u=k_(r,s);i.push(u)}}),{size:n,shape:t,stops:i,position:a,type:2}},Rge=function(r){return r.type===1},Oge=function(r){return r.type===2},jB={name:"image",parse:function(r,e){if(e.type===22){var t={url:e.value,type:0};return r.cache.addImage(e.value),t}if(e.type===18){var n=x9[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(r,e.values)}throw new Error("Unsupported image type "+e.type)}};function Pge(r){return!(r.type===20&&r.value==="none")&&(r.type!==18||!!x9[r.name])}var x9={"linear-gradient":Lge,"-moz-linear-gradient":x2,"-ms-linear-gradient":x2,"-o-linear-gradient":x2,"-webkit-linear-gradient":x2,"radial-gradient":kge,"-moz-radial-gradient":w2,"-ms-radial-gradient":w2,"-o-radial-gradient":w2,"-webkit-radial-gradient":w2,"-webkit-gradient":Dge},Uge={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(n){return op(n)&&Pge(n)}).map(function(n){return jB.parse(r,n)})}},Qge={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Fi(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Gge={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(r,e){return ch(e).map(function(t){return t.filter(za)}).map(a9)}},Hge={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(r,e){return ch(e).map(function(t){return t.filter(Fi).map(function(n){return n.value}).join(" ")}).map(zge)}},zge=function(r){switch(r){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},kg;(function(r){r.AUTO="auto",r.CONTAIN="contain",r.COVER="cover"})(kg||(kg={}));var qge={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(r,e){return ch(e).map(function(t){return t.filter(jge)})}},jge=function(r){return Fi(r)||za(r)},R_=function(r){return{name:"border-"+r+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},$ge=R_("top"),Kge=R_("right"),Vge=R_("bottom"),Wge=R_("left"),O_=function(r){return{name:"border-radius-"+r,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return a9(t.filter(za))}}},Yge=O_("top-left"),Xge=O_("top-right"),Zge=O_("bottom-right"),Jge=O_("bottom-left"),P_=function(r){return{name:"border-"+r+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},epe=P_("top"),tpe=P_("right"),rpe=P_("bottom"),npe=P_("left"),U_=function(r){return{name:"border-"+r+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return R1(t)?t.number:0}}},ipe=U_("top"),ape=U_("right"),spe=U_("bottom"),ope=U_("left"),lpe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},upe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(r,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},cpe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(r,e){return e.filter(Fi).reduce(function(t,n){return t|hpe(n.value)},0)}},hpe=function(r){switch(r){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},fpe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Ape={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(r,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},mw;(function(r){r.NORMAL="normal",r.STRICT="strict"})(mw||(mw={}));var dpe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"strict":return mw.STRICT;case"normal":default:return mw.NORMAL}}},gpe={name:"line-height",initialValue:"normal",prefix:!1,type:4},lM=function(r,e){return Fi(r)&&r.value==="normal"?1.2*e:r.type===17?e*r.number:za(r)?zi(r,e):e},ppe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(r,e){return e.type===20&&e.value==="none"?null:jB.parse(r,e)}},mpe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(r,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},e5={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Q_=function(r){return{name:"margin-"+r,initialValue:"0",prefix:!1,type:4}},vpe=Q_("top"),ype=Q_("right"),xpe=Q_("bottom"),wpe=Q_("left"),_pe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(r,e){return e.filter(Fi).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Epe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},G_=function(r){return{name:"padding-"+r,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},bpe=G_("top"),Cpe=G_("right"),Spe=G_("bottom"),Bpe=G_("left"),Tpe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(r,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Npe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(r,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Ipe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&JS(e[0],"none")?[]:ch(e).map(function(t){for(var n={color:tf.TRANSPARENT,offsetX:Ps,offsetY:Ps,blur:Ps},i=0,a=0;a<t.length;a++){var s=t[a];FA(s)?(i===0?n.offsetX=s:i===1?n.offsetY=s:n.blur=s,i++):n.color=bA.parse(r,s)}return n})}},Fpe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Mpe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(r,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=kpe[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},Lpe=function(r){var e=r.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},Dpe=function(r){var e=r.filter(function(l){return l.type===17}).map(function(l){return l.number}),t=e[0],n=e[1];e[2],e[3];var i=e[4],a=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var s=e[12],o=e[13];return e[14],e[15],e.length===16?[t,n,i,a,s,o]:null},kpe={matrix:Lpe,matrix3d:Dpe},uM={type:16,number:50,flags:k1},Rpe=[uM,uM],Ope={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(r,e){var t=e.filter(za);return t.length!==2?Rpe:[t[0],t[1]]}},Ppe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},xv;(function(r){r.NORMAL="normal",r.BREAK_ALL="break-all",r.KEEP_ALL="keep-all"})(xv||(xv={}));var Upe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-all":return xv.BREAK_ALL;case"keep-all":return xv.KEEP_ALL;case"normal":default:return xv.NORMAL}}},Qpe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(r,e){if(e.type===20)return{auto:!0,order:0};if(Fp(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},w9={name:"time",parse:function(r,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Gpe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(r,e){return Fp(e)?e.number:1}},Hpe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},zpe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(r,e){return e.filter(Fi).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},qpe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(r,e){var t=[],n=[];return e.forEach(function(i){switch(i.type){case 20:case 0:t.push(i.value);break;case 17:t.push(i.number.toString());break;case 4:n.push(t.join(" ")),t.length=0;break}}),t.length&&n.push(t.join(" ")),n.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},jpe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},$pe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(r,e){if(Fp(e))return e.number;if(Fi(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Kpe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.filter(Fi).map(function(t){return t.value})}},Vpe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},es=function(r,e){return(r&e)!==0},Wpe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},Ype={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var n=[],i=e.filter(i9),a=0;a<i.length;a++){var s=i[a],o=i[a+1];if(s.type===20){var l=o&&Fp(o)?o.number:1;n.push({counter:s.value,increment:l})}}return n}},Xpe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return[];for(var t=[],n=e.filter(i9),i=0;i<n.length;i++){var a=n[i],s=n[i+1];if(Fi(a)&&a.value!=="none"){var o=s&&Fp(s)?s.number:0;t.push({counter:a.value,reset:o})}}return t}},Zpe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(r,e){return e.filter(R1).map(function(t){return w9.parse(r,t)})}},Jpe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var n=[],i=e.filter(Cge);if(i.length%2!==0)return null;for(var a=0;a<i.length;a+=2){var s=i[a].value,o=i[a+1].value;n.push({open:s,close:o})}return n}},cM=function(r,e,t){if(!r)return"";var n=r[Math.min(e,r.length-1)];return n?t?n.open:n.close:""},eme={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&JS(e[0],"none")?[]:ch(e).map(function(t){for(var n={color:255,offsetX:Ps,offsetY:Ps,blur:Ps,spread:Ps,inset:!1},i=0,a=0;a<t.length;a++){var s=t[a];JS(s,"inset")?n.inset=!0:FA(s)?(i===0?n.offsetX=s:i===1?n.offsetY=s:i===2?n.blur=s:n.spread=s,i++):n.color=bA.parse(r,s)}return n})}},tme={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(r,e){var t=[0,1,2],n=[];return e.filter(Fi).forEach(function(i){switch(i.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),t.forEach(function(i){n.indexOf(i)===-1&&n.push(i)}),n}},rme={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},nme={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(r,e){return R1(e)?e.number:0}},ime=function(){function r(e,t){var n,i;this.animationDuration=gr(e,Zpe,t.animationDuration),this.backgroundClip=gr(e,Tge,t.backgroundClip),this.backgroundColor=gr(e,Nge,t.backgroundColor),this.backgroundImage=gr(e,Uge,t.backgroundImage),this.backgroundOrigin=gr(e,Qge,t.backgroundOrigin),this.backgroundPosition=gr(e,Gge,t.backgroundPosition),this.backgroundRepeat=gr(e,Hge,t.backgroundRepeat),this.backgroundSize=gr(e,qge,t.backgroundSize),this.borderTopColor=gr(e,$ge,t.borderTopColor),this.borderRightColor=gr(e,Kge,t.borderRightColor),this.borderBottomColor=gr(e,Vge,t.borderBottomColor),this.borderLeftColor=gr(e,Wge,t.borderLeftColor),this.borderTopLeftRadius=gr(e,Yge,t.borderTopLeftRadius),this.borderTopRightRadius=gr(e,Xge,t.borderTopRightRadius),this.borderBottomRightRadius=gr(e,Zge,t.borderBottomRightRadius),this.borderBottomLeftRadius=gr(e,Jge,t.borderBottomLeftRadius),this.borderTopStyle=gr(e,epe,t.borderTopStyle),this.borderRightStyle=gr(e,tpe,t.borderRightStyle),this.borderBottomStyle=gr(e,rpe,t.borderBottomStyle),this.borderLeftStyle=gr(e,npe,t.borderLeftStyle),this.borderTopWidth=gr(e,ipe,t.borderTopWidth),this.borderRightWidth=gr(e,ape,t.borderRightWidth),this.borderBottomWidth=gr(e,spe,t.borderBottomWidth),this.borderLeftWidth=gr(e,ope,t.borderLeftWidth),this.boxShadow=gr(e,eme,t.boxShadow),this.color=gr(e,lpe,t.color),this.direction=gr(e,upe,t.direction),this.display=gr(e,cpe,t.display),this.float=gr(e,fpe,t.cssFloat),this.fontFamily=gr(e,qpe,t.fontFamily),this.fontSize=gr(e,jpe,t.fontSize),this.fontStyle=gr(e,Vpe,t.fontStyle),this.fontVariant=gr(e,Kpe,t.fontVariant),this.fontWeight=gr(e,$pe,t.fontWeight),this.letterSpacing=gr(e,Ape,t.letterSpacing),this.lineBreak=gr(e,dpe,t.lineBreak),this.lineHeight=gr(e,gpe,t.lineHeight),this.listStyleImage=gr(e,ppe,t.listStyleImage),this.listStylePosition=gr(e,mpe,t.listStylePosition),this.listStyleType=gr(e,e5,t.listStyleType),this.marginTop=gr(e,vpe,t.marginTop),this.marginRight=gr(e,ype,t.marginRight),this.marginBottom=gr(e,xpe,t.marginBottom),this.marginLeft=gr(e,wpe,t.marginLeft),this.opacity=gr(e,Gpe,t.opacity);var a=gr(e,_pe,t.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=gr(e,Epe,t.overflowWrap),this.paddingTop=gr(e,bpe,t.paddingTop),this.paddingRight=gr(e,Cpe,t.paddingRight),this.paddingBottom=gr(e,Spe,t.paddingBottom),this.paddingLeft=gr(e,Bpe,t.paddingLeft),this.paintOrder=gr(e,tme,t.paintOrder),this.position=gr(e,Npe,t.position),this.textAlign=gr(e,Tpe,t.textAlign),this.textDecorationColor=gr(e,Hpe,(n=t.textDecorationColor)!==null&&n!==void 0?n:t.color),this.textDecorationLine=gr(e,zpe,(i=t.textDecorationLine)!==null&&i!==void 0?i:t.textDecoration),this.textShadow=gr(e,Ipe,t.textShadow),this.textTransform=gr(e,Fpe,t.textTransform),this.transform=gr(e,Mpe,t.transform),this.transformOrigin=gr(e,Ope,t.transformOrigin),this.visibility=gr(e,Ppe,t.visibility),this.webkitTextStrokeColor=gr(e,rme,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=gr(e,nme,t.webkitTextStrokeWidth),this.wordBreak=gr(e,Upe,t.wordBreak),this.zIndex=gr(e,Qpe,t.zIndex)}return r.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},r.prototype.isTransparent=function(){return CA(this.backgroundColor)},r.prototype.isTransformed=function(){return this.transform!==null},r.prototype.isPositioned=function(){return this.position!==0},r.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},r.prototype.isFloating=function(){return this.float!==0},r.prototype.isInlineLevel=function(){return es(this.display,4)||es(this.display,33554432)||es(this.display,268435456)||es(this.display,536870912)||es(this.display,67108864)||es(this.display,134217728)},r}(),ame=function(){function r(e,t){this.content=gr(e,Wpe,t.content),this.quotes=gr(e,Jpe,t.quotes)}return r}(),hM=function(){function r(e,t){this.counterIncrement=gr(e,Ype,t.counterIncrement),this.counterReset=gr(e,Xpe,t.counterReset)}return r}(),gr=function(r,e,t){var n=new r9,i=t!==null&&typeof t<"u"?t.toString():e.initialValue;n.write(i);var a=new n9(n.read());switch(e.type){case 2:var s=a.parseComponentValue();return e.parse(r,Fi(s)?s.value:e.initialValue);case 0:return e.parse(r,a.parseComponentValue());case 1:return e.parse(r,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(e.format){case"angle":return D_.parse(r,a.parseComponentValue());case"color":return bA.parse(r,a.parseComponentValue());case"image":return jB.parse(r,a.parseComponentValue());case"length":var o=a.parseComponentValue();return FA(o)?o:Ps;case"length-percentage":var l=a.parseComponentValue();return za(l)?l:Ps;case"time":return w9.parse(r,a.parseComponentValue())}break}},sme="data-html2canvas-debug",ome=function(r){var e=r.getAttribute(sme);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},t5=function(r,e){var t=ome(r);return t===1||e===t},hh=function(){function r(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,t5(t,3))debugger;this.styles=new ime(e,window.getComputedStyle(t,null)),i5(t)&&(this.styles.animationDuration.some(function(n){return n>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=M_(this.context,t),t5(t,4)&&(this.flags|=16)}return r}(),lme="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",fM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$m=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var _2=0;_2<fM.length;_2++)$m[fM.charCodeAt(_2)]=_2;var ume=function(r){var e=r.length*.75,t=r.length,n,i=0,a,s,o,l;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<t;n+=4)a=$m[r.charCodeAt(n)],s=$m[r.charCodeAt(n+1)],o=$m[r.charCodeAt(n+2)],l=$m[r.charCodeAt(n+3)],c[i++]=a<<2|s>>4,c[i++]=(s&15)<<4|o>>2,c[i++]=(o&3)<<6|l&63;return u},cme=function(r){for(var e=r.length,t=[],n=0;n<e;n+=2)t.push(r[n+1]<<8|r[n]);return t},hme=function(r){for(var e=r.length,t=[],n=0;n<e;n+=4)t.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return t},Md=5,$B=11,Xb=2,fme=$B-Md,_9=65536>>Md,Ame=1<<Md,Zb=Ame-1,dme=1024>>Md,gme=_9+dme,pme=gme,mme=32,vme=pme+mme,yme=65536>>$B,xme=1<<fme,wme=xme-1,AM=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},_me=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},Eme=function(r,e){var t=ume(r),n=Array.isArray(t)?hme(t):new Uint32Array(t),i=Array.isArray(t)?cme(t):new Uint16Array(t),a=24,s=AM(i,a/2,n[4]/2),o=n[5]===2?AM(i,(a+n[4])/2):_me(n,Math.ceil((a+n[4])/4));return new bme(n[0],n[1],n[2],n[3],s,o)},bme=function(){function r(e,t,n,i,a,s){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=i,this.index=a,this.data=s}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Md],t=(t<<Xb)+(e&Zb),this.data[t];if(e<=65535)return t=this.index[_9+(e-55296>>Md)],t=(t<<Xb)+(e&Zb),this.data[t];if(e<this.highStart)return t=vme-yme+(e>>$B),t=this.index[t],t+=e>>Md&wme,t=this.index[t],t=(t<<Xb)+(e&Zb),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r}(),dM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cme=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var E2=0;E2<dM.length;E2++)Cme[dM.charCodeAt(E2)]=E2;var Sme=1,Jb=2,eC=3,gM=4,pM=5,Bme=7,mM=8,tC=9,rC=10,vM=11,yM=12,xM=13,wM=14,nC=15,Tme=function(r){for(var e=[],t=0,n=r.length;t<n;){var i=r.charCodeAt(t++);if(i>=55296&&i<=56319&&t<n){var a=r.charCodeAt(t++);(a&64512)===56320?e.push(((i&1023)<<10)+(a&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},Nme=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var n=[],i=-1,a="";++i<t;){var s=r[i];s<=65535?n.push(s):(s-=65536,n.push((s>>10)+55296,s%1024+56320)),(i+1===t||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},Ime=Eme(lme),pu="×",iC="÷",Fme=function(r){return Ime.get(r)},Mme=function(r,e,t){var n=t-2,i=e[n],a=e[t-1],s=e[t];if(a===Jb&&s===eC)return pu;if(a===Jb||a===eC||a===gM||s===Jb||s===eC||s===gM)return iC;if(a===mM&&[mM,tC,vM,yM].indexOf(s)!==-1||(a===vM||a===tC)&&(s===tC||s===rC)||(a===yM||a===rC)&&s===rC||s===xM||s===pM||s===Bme||a===Sme)return pu;if(a===xM&&s===wM){for(;i===pM;)i=e[--n];if(i===wM)return pu}if(a===nC&&s===nC){for(var o=0;i===nC;)o++,i=e[--n];if(o%2===0)return pu}return iC},Lme=function(r){var e=Tme(r),t=e.length,n=0,i=0,a=e.map(Fme);return{next:function(){if(n>=t)return{done:!0,value:null};for(var s=pu;n<t&&(s=Mme(e,a,++n))===pu;);if(s!==pu||n===t){var o=Nme.apply(null,e.slice(i,n));return i=n,{value:o,done:!1}}return{done:!0,value:null}}}},Dme=function(r){for(var e=Lme(r),t=[],n;!(n=e.next()).done;)n.value&&t.push(n.value.slice());return t},kme=function(r){var e=123;if(r.createRange){var t=r.createRange();if(t.getBoundingClientRect){var n=r.createElement("boundtest");n.style.height=e+"px",n.style.display="block",r.body.appendChild(n),t.selectNode(n);var i=t.getBoundingClientRect(),a=Math.round(i.height);if(r.body.removeChild(n),a===e)return!0}}return!1},Rme=function(r){var e=r.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",r.body.appendChild(e);var t=r.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,i=L_(n.data).map(function(l){return ba(l)}),a=0,s={},o=i.every(function(l,u){t.setStart(n,a),t.setEnd(n,a+l.length);var c=t.getBoundingClientRect();a+=l.length;var h=c.x>s.x||c.y>s.y;return s=c,u===0?!0:h});return r.body.removeChild(e),o},Ome=function(){return typeof new Image().crossOrigin<"u"},Pme=function(){return typeof new XMLHttpRequest().responseType=="string"},Ume=function(r){var e=new Image,t=r.createElement("canvas"),n=t.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},_M=function(r){return r[0]===0&&r[1]===255&&r[2]===0&&r[3]===255},Qme=function(r){var e=r.createElement("canvas"),t=100;e.width=t,e.height=t;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,t,t);var i=new Image,a=e.toDataURL();i.src=a;var s=r5(t,t,0,0,i);return n.fillStyle="red",n.fillRect(0,0,t,t),EM(s).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,t,t).data;n.fillStyle="red",n.fillRect(0,0,t,t);var u=r.createElement("div");return u.style.backgroundImage="url("+a+")",u.style.height=t+"px",_M(l)?EM(r5(t,t,0,0,u)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),_M(n.getImageData(0,0,t,t).data)}).catch(function(){return!1})},r5=function(r,e,t,n,i){var a="http://www.w3.org/2000/svg",s=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject");return s.setAttributeNS(null,"width",r.toString()),s.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",t.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(o),o.appendChild(i),s},EM=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},ks={get SUPPORT_RANGE_BOUNDS(){var r=kme(document);return Object.defineProperty(ks,"SUPPORT_RANGE_BOUNDS",{value:r}),r},get SUPPORT_WORD_BREAKING(){var r=ks.SUPPORT_RANGE_BOUNDS&&Rme(document);return Object.defineProperty(ks,"SUPPORT_WORD_BREAKING",{value:r}),r},get SUPPORT_SVG_DRAWING(){var r=Ume(document);return Object.defineProperty(ks,"SUPPORT_SVG_DRAWING",{value:r}),r},get SUPPORT_FOREIGNOBJECT_DRAWING(){var r=typeof Array.from=="function"&&typeof window.fetch=="function"?Qme(document):Promise.resolve(!1);return Object.defineProperty(ks,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:r}),r},get SUPPORT_CORS_IMAGES(){var r=Ome();return Object.defineProperty(ks,"SUPPORT_CORS_IMAGES",{value:r}),r},get SUPPORT_RESPONSE_TYPE(){var r=Pme();return Object.defineProperty(ks,"SUPPORT_RESPONSE_TYPE",{value:r}),r},get SUPPORT_CORS_XHR(){var r="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ks,"SUPPORT_CORS_XHR",{value:r}),r},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var r=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ks,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:r}),r}},wv=function(){function r(e,t){this.text=e,this.bounds=t}return r}(),Gme=function(r,e,t,n){var i=qme(e,t),a=[],s=0;return i.forEach(function(o){if(t.textDecorationLine.length||o.trim().length>0)if(ks.SUPPORT_RANGE_BOUNDS){var l=bM(n,s,o.length).getClientRects();if(l.length>1){var u=KB(o),c=0;u.forEach(function(f){a.push(new wv(f,lf.fromDOMRectList(r,bM(n,c+s,f.length).getClientRects()))),c+=f.length})}else a.push(new wv(o,lf.fromDOMRectList(r,l)))}else{var h=n.splitText(o.length);a.push(new wv(o,Hme(r,n))),n=h}else ks.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));s+=o.length}),a},Hme=function(r,e){var t=e.ownerDocument;if(t){var n=t.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(n,e);var a=M_(r,n);return n.firstChild&&i.replaceChild(n.firstChild,n),a}}return lf.EMPTY},bM=function(r,e,t){var n=r.ownerDocument;if(!n)throw new Error("Node has no owner document");var i=n.createRange();return i.setStart(r,e),i.setEnd(r,e+t),i},KB=function(r){if(ks.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(r)).map(function(t){return t.segment})}return Dme(r)},zme=function(r,e){if(ks.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(r)).map(function(n){return n.segment})}return $me(r,e)},qme=function(r,e){return e.letterSpacing!==0?KB(r):zme(r,e)},jme=[32,160,4961,65792,65793,4153,4241],$me=function(r,e){for(var t=y0e(r,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],i,a=function(){if(i.value){var s=i.value.slice(),o=L_(s),l="";o.forEach(function(u){jme.indexOf(u)===-1?l+=ba(u):(l.length&&n.push(l),n.push(ba(u)),l="")}),l.length&&n.push(l)}};!(i=t.next()).done;)a();return n},Kme=function(){function r(e,t,n){this.text=Vme(t.data,n.textTransform),this.textBounds=Gme(e,this.text,n,t)}return r}(),Vme=function(r,e){switch(e){case 1:return r.toLowerCase();case 3:return r.replace(Wme,Yme);case 2:return r.toUpperCase();default:return r}},Wme=/(^|\s|:|-|\(|\))([a-z])/g,Yme=function(r,e,t){return r.length>0?e+t.toUpperCase():r},E9=function(r){cc(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.src=n.currentSrc||n.src,i.intrinsicWidth=n.naturalWidth,i.intrinsicHeight=n.naturalHeight,i.context.cache.addImage(i.src),i}return e}(hh),b9=function(r){cc(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.canvas=n,i.intrinsicWidth=n.width,i.intrinsicHeight=n.height,i}return e}(hh),C9=function(r){cc(e,r);function e(t,n){var i=r.call(this,t,n)||this,a=new XMLSerializer,s=M_(t,n);return n.setAttribute("width",s.width+"px"),n.setAttribute("height",s.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(n)),i.intrinsicWidth=n.width.baseVal.value,i.intrinsicHeight=n.height.baseVal.value,i.context.cache.addImage(i.svg),i}return e}(hh),S9=function(r){cc(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.value=n.value,i}return e}(hh),n5=function(r){cc(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.start=n.start,i.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,i}return e}(hh),Xme=[{type:15,flags:0,unit:"px",number:3}],Zme=[{type:16,flags:0,number:50}],Jme=function(r){return r.width>r.height?new lf(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new lf(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r},eve=function(r){var e=r.type===tve?new Array(r.value.length+1).join("•"):r.value;return e.length===0?r.placeholder||"":e},vw="checkbox",yw="radio",tve="password",CM=707406591,VB=function(r){cc(e,r);function e(t,n){var i=r.call(this,t,n)||this;switch(i.type=n.type.toLowerCase(),i.checked=n.checked,i.value=eve(n),(i.type===vw||i.type===yw)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=Jme(i.bounds)),i.type){case vw:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Xme;break;case yw:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Zme;break}return i}return e}(hh),B9=function(r){cc(e,r);function e(t,n){var i=r.call(this,t,n)||this,a=n.options[n.selectedIndex||0];return i.value=a&&a.text||"",i}return e}(hh),T9=function(r){cc(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.value=n.value,i}return e}(hh),N9=function(r){cc(e,r);function e(t,n){var i=r.call(this,t,n)||this;i.src=n.src,i.width=parseInt(n.width,10)||0,i.height=parseInt(n.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){i.tree=F9(t,n.contentWindow.document.documentElement);var a=n.contentWindow.document.documentElement?yv(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):tf.TRANSPARENT,s=n.contentWindow.document.body?yv(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):tf.TRANSPARENT;i.backgroundColor=CA(a)?CA(s)?i.styles.backgroundColor:s:a}}catch{}return i}return e}(hh),rve=["OL","UL","MENU"],cx=function(r,e,t,n){for(var i=e.firstChild,a=void 0;i;i=a)if(a=i.nextSibling,M9(i)&&i.data.trim().length>0)t.textNodes.push(new Kme(r,i,t.styles));else if(wg(i))if(R9(i)&&i.assignedNodes)i.assignedNodes().forEach(function(o){return cx(r,o,t,n)});else{var s=I9(r,i);s.styles.isVisible()&&(nve(i,s,n)?s.flags|=4:ive(s.styles)&&(s.flags|=2),rve.indexOf(i.tagName)!==-1&&(s.flags|=8),t.elements.push(s),i.slot,i.shadowRoot?cx(r,i.shadowRoot,s,n):!xw(i)&&!L9(i)&&!ww(i)&&cx(r,i,s,n))}},I9=function(r,e){return a5(e)?new E9(r,e):D9(e)?new b9(r,e):L9(e)?new C9(r,e):ave(e)?new S9(r,e):sve(e)?new n5(r,e):ove(e)?new VB(r,e):ww(e)?new B9(r,e):xw(e)?new T9(r,e):k9(e)?new N9(r,e):new hh(r,e)},F9=function(r,e){var t=I9(r,e);return t.flags|=4,cx(r,e,t,t),t},nve=function(r,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||WB(r)&&t.styles.isTransparent()},ive=function(r){return r.isPositioned()||r.isFloating()},M9=function(r){return r.nodeType===Node.TEXT_NODE},wg=function(r){return r.nodeType===Node.ELEMENT_NODE},i5=function(r){return wg(r)&&typeof r.style<"u"&&!hx(r)},hx=function(r){return typeof r.className=="object"},ave=function(r){return r.tagName==="LI"},sve=function(r){return r.tagName==="OL"},ove=function(r){return r.tagName==="INPUT"},lve=function(r){return r.tagName==="HTML"},L9=function(r){return r.tagName==="svg"},WB=function(r){return r.tagName==="BODY"},D9=function(r){return r.tagName==="CANVAS"},SM=function(r){return r.tagName==="VIDEO"},a5=function(r){return r.tagName==="IMG"},k9=function(r){return r.tagName==="IFRAME"},BM=function(r){return r.tagName==="STYLE"},uve=function(r){return r.tagName==="SCRIPT"},xw=function(r){return r.tagName==="TEXTAREA"},ww=function(r){return r.tagName==="SELECT"},R9=function(r){return r.tagName==="SLOT"},TM=function(r){return r.tagName.indexOf("-")>0},cve=function(){function r(){this.counters={}}return r.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},r.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},r.prototype.pop=function(e){var t=this;e.forEach(function(n){return t.counters[n].pop()})},r.prototype.parse=function(e){var t=this,n=e.counterIncrement,i=e.counterReset,a=!0;n!==null&&n.forEach(function(o){var l=t.counters[o.counter];l&&o.increment!==0&&(a=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var s=[];return a&&i.forEach(function(o){var l=t.counters[o.counter];s.push(o.counter),l||(l=t.counters[o.counter]=[]),l.push(o.reset)}),s},r}(),NM={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},IM={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},hve={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},fve={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},G0=function(r,e,t,n,i,a){return r<e||r>t?s1(r,i,a.length>0):n.integers.reduce(function(s,o,l){for(;r>=o;)r-=o,s+=n.values[l];return s},"")+a},O9=function(r,e,t,n){var i="";do t||r--,i=n(r)+i,r/=e;while(r*e>=e);return i},_a=function(r,e,t,n,i){var a=t-e+1;return(r<0?"-":"")+(O9(Math.abs(r),a,n,function(s){return ba(Math.floor(s%a)+e)})+i)},cd=function(r,e,t){t===void 0&&(t=". ");var n=e.length;return O9(Math.abs(r),n,!1,function(i){return e[Math.floor(i%n)]})+t},og=1,eA=2,tA=4,Km=8,Mh=function(r,e,t,n,i,a){if(r<-9999||r>9999)return s1(r,4,i.length>0);var s=Math.abs(r),o=i;if(s===0)return e[0]+o;for(var l=0;s>0&&l<=4;l++){var u=s%10;u===0&&es(a,og)&&o!==""?o=e[u]+o:u>1||u===1&&l===0||u===1&&l===1&&es(a,eA)||u===1&&l===1&&es(a,tA)&&r>100||u===1&&l>1&&es(a,Km)?o=e[u]+(l>0?t[l-1]:"")+o:u===1&&l>0&&(o=t[l-1]+o),s=Math.floor(s/10)}return(r<0?n:"")+o},FM="十百千萬",MM="拾佰仟萬",LM="マイナス",aC="마이너스",s1=function(r,e,t){var n=t?". ":"",i=t?"、":"",a=t?", ":"",s=t?" ":"";switch(e){case 0:return"•"+s;case 1:return"◦"+s;case 2:return"◾"+s;case 5:var o=_a(r,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return cd(r,"〇一二三四五六七八九",i);case 6:return G0(r,1,3999,NM,3,n).toLowerCase();case 7:return G0(r,1,3999,NM,3,n);case 8:return _a(r,945,969,!1,n);case 9:return _a(r,97,122,!1,n);case 10:return _a(r,65,90,!1,n);case 11:return _a(r,1632,1641,!0,n);case 12:case 49:return G0(r,1,9999,IM,3,n);case 35:return G0(r,1,9999,IM,3,n).toLowerCase();case 13:return _a(r,2534,2543,!0,n);case 14:case 30:return _a(r,6112,6121,!0,n);case 15:return cd(r,"子丑寅卯辰巳午未申酉戌亥",i);case 16:return cd(r,"甲乙丙丁戊己庚辛壬癸",i);case 17:case 48:return Mh(r,"零一二三四五六七八九",FM,"負",i,eA|tA|Km);case 47:return Mh(r,"零壹貳參肆伍陸柒捌玖",MM,"負",i,og|eA|tA|Km);case 42:return Mh(r,"零一二三四五六七八九",FM,"负",i,eA|tA|Km);case 41:return Mh(r,"零壹贰叁肆伍陆柒捌玖",MM,"负",i,og|eA|tA|Km);case 26:return Mh(r,"〇一二三四五六七八九","十百千万",LM,i,0);case 25:return Mh(r,"零壱弐参四伍六七八九","拾百千万",LM,i,og|eA|tA);case 31:return Mh(r,"영일이삼사오육칠팔구","십백천만",aC,a,og|eA|tA);case 33:return Mh(r,"零一二三四五六七八九","十百千萬",aC,a,0);case 32:return Mh(r,"零壹貳參四五六七八九","拾百千",aC,a,og|eA|tA);case 18:return _a(r,2406,2415,!0,n);case 20:return G0(r,1,19999,fve,3,n);case 21:return _a(r,2790,2799,!0,n);case 22:return _a(r,2662,2671,!0,n);case 22:return G0(r,1,10999,hve,3,n);case 23:return cd(r,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return cd(r,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return _a(r,3302,3311,!0,n);case 28:return cd(r,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",i);case 29:return cd(r,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",i);case 34:return _a(r,3792,3801,!0,n);case 37:return _a(r,6160,6169,!0,n);case 38:return _a(r,4160,4169,!0,n);case 39:return _a(r,2918,2927,!0,n);case 40:return _a(r,1776,1785,!0,n);case 43:return _a(r,3046,3055,!0,n);case 44:return _a(r,3174,3183,!0,n);case 45:return _a(r,3664,3673,!0,n);case 46:return _a(r,3872,3881,!0,n);case 3:default:return _a(r,48,57,!0,n)}},P9="data-html2canvas-ignore",DM=function(){function r(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new cve,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return r.prototype.toIFrame=function(e,t){var n=this,i=Ave(e,t);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var a=e.defaultView.pageXOffset,s=e.defaultView.pageYOffset,o=i.contentWindow,l=o.document,u=pve(i).then(function(){return Ro(n,void 0,void 0,function(){var c,h;return oo(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(xve),o&&(o.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==t.top||o.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-t.left,o.scrollY-t.top,0,0))),c=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,gve(l)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof c=="function"?[2,Promise.resolve().then(function(){return c(l,h)}).then(function(){return i})]:[2,i]}})})});return l.open(),l.write(vve(document.doctype)+"<html></html>"),yve(this.referenceElement.ownerDocument,a,s),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),u},r.prototype.createElementClone=function(e){if(t5(e,2))debugger;if(D9(e))return this.createCanvasClone(e);if(SM(e))return this.createVideoClone(e);if(BM(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return a5(t)&&(a5(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),TM(t)?this.createCustomElementClone(t):t},r.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return sC(e.style,t),t},r.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce(function(a,s){return s&&typeof s.cssText=="string"?a+s.cssText:a},""),i=e.cloneNode(!1);return i.textContent=n,i}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return e.cloneNode(!1)},r.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var i=e.cloneNode(!1);try{i.width=e.width,i.height=e.height;var a=e.getContext("2d"),s=i.getContext("2d");if(s)if(!this.options.allowTaint&&a)s.putImageData(a.getImageData(0,0,e.width,e.height),0,0);else{var o=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}s.drawImage(e,0,0)}return i}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return i},r.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var i=e.ownerDocument.createElement("canvas");return i.width=e.offsetWidth,i.height=e.offsetHeight,i},r.prototype.appendChildNode=function(e,t,n){(!wg(t)||!uve(t)&&!t.hasAttribute(P9)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!wg(t)||!BM(t))&&e.appendChild(this.cloneNode(t,n))},r.prototype.cloneChildNodes=function(e,t,n){for(var i=this,a=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;a;a=a.nextSibling)if(wg(a)&&R9(a)&&typeof a.assignedNodes=="function"){var s=a.assignedNodes();s.length&&s.forEach(function(o){return i.appendChildNode(t,o,n)})}else this.appendChildNode(t,a,n)},r.prototype.cloneNode=function(e,t){if(M9(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&wg(e)&&(i5(e)||hx(e))){var i=this.createElementClone(e);i.style.transitionProperty="none";var a=n.getComputedStyle(e),s=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&i5(i)&&(this.clonedReferenceElement=i),WB(i)&&Eve(i);var l=this.counters.parse(new hM(this.context,a)),u=this.resolvePseudoContent(e,i,s,_v.BEFORE);TM(e)&&(t=!0),SM(e)||this.cloneChildNodes(e,i,t),u&&i.insertBefore(u,i.firstChild);var c=this.resolvePseudoContent(e,i,o,_v.AFTER);return c&&i.appendChild(c),this.counters.pop(l),(a&&(this.options.copyStyles||hx(e))&&!k9(e)||t)&&sC(a,i),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([i,e.scrollLeft,e.scrollTop]),(xw(e)||ww(e))&&(xw(i)||ww(i))&&(i.value=e.value),i}return e.cloneNode(!1)},r.prototype.resolvePseudoContent=function(e,t,n,i){var a=this;if(n){var s=n.content,o=t.ownerDocument;if(!(!o||!s||s==="none"||s==="-moz-alt-content"||n.display==="none")){this.counters.parse(new hM(this.context,n));var l=new ame(this.context,n),u=o.createElement("html2canvaspseudoelement");sC(n,u),l.content.forEach(function(h){if(h.type===0)u.appendChild(o.createTextNode(h.value));else if(h.type===22){var f=o.createElement("img");f.src=h.value,f.style.opacity="1",u.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var A=h.values.filter(Fi);A.length&&u.appendChild(o.createTextNode(e.getAttribute(A[0].value)||""))}else if(h.name==="counter"){var d=h.values.filter(op),p=d[0],y=d[1];if(p&&Fi(p)){var v=a.counters.getCounterValue(p.value),w=y&&Fi(y)?e5.parse(a.context,y.value):3;u.appendChild(o.createTextNode(s1(v,w,!1)))}}else if(h.name==="counters"){var x=h.values.filter(op),p=x[0],b=x[1],y=x[2];if(p&&Fi(p)){var C=a.counters.getCounterValues(p.value),S=y&&Fi(y)?e5.parse(a.context,y.value):3,I=b&&b.type===0?b.value:"",B=C.map(function(F){return s1(F,S,!1)}).join(I);u.appendChild(o.createTextNode(B))}}}else if(h.type===20)switch(h.value){case"open-quote":u.appendChild(o.createTextNode(cM(l.quotes,a.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(cM(l.quotes,--a.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(h.value))}}),u.className=s5+" "+o5;var c=i===_v.BEFORE?" "+s5:" "+o5;return hx(t)?t.className.baseValue+=c:t.className+=c,u}}},r.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},r}(),_v;(function(r){r[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER"})(_v||(_v={}));var Ave=function(r,e){var t=r.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(P9,"true"),r.body.appendChild(t),t},dve=function(r){return new Promise(function(e){if(r.complete){e();return}if(!r.src){e();return}r.onload=e,r.onerror=e})},gve=function(r){return Promise.all([].slice.call(r.images,0).map(dve))},pve=function(r){return new Promise(function(e,t){var n=r.contentWindow;if(!n)return t("No window assigned for iframe");var i=n.document;n.onload=r.onload=function(){n.onload=r.onload=null;var a=setInterval(function(){i.body.childNodes.length>0&&i.readyState==="complete"&&(clearInterval(a),e(r))},50)}})},mve=["all","d","content"],sC=function(r,e){for(var t=r.length-1;t>=0;t--){var n=r.item(t);mve.indexOf(n)===-1&&e.style.setProperty(n,r.getPropertyValue(n))}return e},vve=function(r){var e="";return r&&(e+="<!DOCTYPE ",r.name&&(e+=r.name),r.internalSubset&&(e+=r.internalSubset),r.publicId&&(e+='"'+r.publicId+'"'),r.systemId&&(e+='"'+r.systemId+'"'),e+=">"),e},yve=function(r,e,t){r&&r.defaultView&&(e!==r.defaultView.pageXOffset||t!==r.defaultView.pageYOffset)&&r.defaultView.scrollTo(e,t)},xve=function(r){var e=r[0],t=r[1],n=r[2];e.scrollLeft=t,e.scrollTop=n},wve=":before",_ve=":after",s5="___html2canvas___pseudoelement_before",o5="___html2canvas___pseudoelement_after",kM=`{
    content: "" !important;
    display: none !important;
}`,Eve=function(r){bve(r,"."+s5+wve+kM+`
         .`+o5+_ve+kM)},bve=function(r,e){var t=r.ownerDocument;if(t){var n=t.createElement("style");n.textContent=e,r.appendChild(n)}},U9=function(){function r(){}return r.getOrigin=function(e){var t=r._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},r.isSameOrigin=function(e){return r.getOrigin(e)===r._origin},r.setContext=function(e){r._link=e.document.createElement("a"),r._origin=r.getOrigin(e.location.href)},r._origin="about:blank",r}(),Cve=function(){function r(e,t){this.context=e,this._options=t,this._cache={}}return r.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(lC(e)||Nve(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},r.prototype.match=function(e){return this._cache[e]},r.prototype.loadImage=function(e){return Ro(this,void 0,void 0,function(){var t,n,i,a,s=this;return oo(this,function(o){switch(o.label){case 0:return t=U9.isSameOrigin(e),n=!oC(e)&&this._options.useCORS===!0&&ks.SUPPORT_CORS_IMAGES&&!t,i=!oC(e)&&!t&&!lC(e)&&typeof this._options.proxy=="string"&&ks.SUPPORT_CORS_XHR&&!n,!t&&this._options.allowTaint===!1&&!oC(e)&&!lC(e)&&!i&&!n?[2]:(a=e,i?[4,this.proxy(a)]:[3,2]);case 1:a=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,u){var c=new Image;c.onload=function(){return l(c)},c.onerror=u,(Ive(a)||n)&&(c.crossOrigin="anonymous"),c.src=a,c.complete===!0&&setTimeout(function(){return l(c)},500),s._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+s._options.imageTimeout+"ms) loading image")},s._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},r.prototype.has=function(e){return typeof this._cache[e]<"u"},r.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},r.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var i=e.substring(0,256);return new Promise(function(a,s){var o=ks.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")a(l.response);else{var h=new FileReader;h.addEventListener("load",function(){return a(h.result)},!1),h.addEventListener("error",function(f){return s(f)},!1),h.readAsDataURL(l.response)}else s("Failed to proxy resource "+i+" with status code "+l.status)},l.onerror=s;var u=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),t._options.imageTimeout){var c=t._options.imageTimeout;l.timeout=c,l.ontimeout=function(){return s("Timed out ("+c+"ms) proxying "+i)}}l.send()})},r}(),Sve=/^data:image\/svg\+xml/i,Bve=/^data:image\/.*;base64,/i,Tve=/^data:image\/.*/i,Nve=function(r){return ks.SUPPORT_SVG_DRAWING||!Fve(r)},oC=function(r){return Tve.test(r)},Ive=function(r){return Bve.test(r)},lC=function(r){return r.substr(0,4)==="blob"},Fve=function(r){return r.substr(-3).toLowerCase()==="svg"||Sve.test(r)},cr=function(){function r(e,t){this.type=0,this.x=e,this.y=t}return r.prototype.add=function(e,t){return new r(this.x+e,this.y+t)},r}(),H0=function(r,e,t){return new cr(r.x+(e.x-r.x)*t,r.y+(e.y-r.y)*t)},b2=function(){function r(e,t,n,i){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=i}return r.prototype.subdivide=function(e,t){var n=H0(this.start,this.startControl,e),i=H0(this.startControl,this.endControl,e),a=H0(this.endControl,this.end,e),s=H0(n,i,e),o=H0(i,a,e),l=H0(s,o,e);return t?new r(this.start,n,s,l):new r(l,o,a,this.end)},r.prototype.add=function(e,t){return new r(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},r.prototype.reverse=function(){return new r(this.end,this.endControl,this.startControl,this.start)},r}(),vu=function(r){return r.type===1},Mve=function(){function r(e){var t=e.styles,n=e.bounds,i=jm(t.borderTopLeftRadius,n.width,n.height),a=i[0],s=i[1],o=jm(t.borderTopRightRadius,n.width,n.height),l=o[0],u=o[1],c=jm(t.borderBottomRightRadius,n.width,n.height),h=c[0],f=c[1],A=jm(t.borderBottomLeftRadius,n.width,n.height),d=A[0],p=A[1],y=[];y.push((a+l)/n.width),y.push((d+h)/n.width),y.push((s+p)/n.height),y.push((u+f)/n.height);var v=Math.max.apply(Math,y);v>1&&(a/=v,s/=v,l/=v,u/=v,h/=v,f/=v,d/=v,p/=v);var w=n.width-l,x=n.height-f,b=n.width-h,C=n.height-p,S=t.borderTopWidth,I=t.borderRightWidth,B=t.borderBottomWidth,T=t.borderLeftWidth,M=zi(t.paddingTop,e.bounds.width),F=zi(t.paddingRight,e.bounds.width),N=zi(t.paddingBottom,e.bounds.width),O=zi(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||s>0?Zi(n.left+T/3,n.top+S/3,a-T/3,s-S/3,fi.TOP_LEFT):new cr(n.left+T/3,n.top+S/3),this.topRightBorderDoubleOuterBox=a>0||s>0?Zi(n.left+w,n.top+S/3,l-I/3,u-S/3,fi.TOP_RIGHT):new cr(n.left+n.width-I/3,n.top+S/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?Zi(n.left+b,n.top+x,h-I/3,f-B/3,fi.BOTTOM_RIGHT):new cr(n.left+n.width-I/3,n.top+n.height-B/3),this.bottomLeftBorderDoubleOuterBox=d>0||p>0?Zi(n.left+T/3,n.top+C,d-T/3,p-B/3,fi.BOTTOM_LEFT):new cr(n.left+T/3,n.top+n.height-B/3),this.topLeftBorderDoubleInnerBox=a>0||s>0?Zi(n.left+T*2/3,n.top+S*2/3,a-T*2/3,s-S*2/3,fi.TOP_LEFT):new cr(n.left+T*2/3,n.top+S*2/3),this.topRightBorderDoubleInnerBox=a>0||s>0?Zi(n.left+w,n.top+S*2/3,l-I*2/3,u-S*2/3,fi.TOP_RIGHT):new cr(n.left+n.width-I*2/3,n.top+S*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?Zi(n.left+b,n.top+x,h-I*2/3,f-B*2/3,fi.BOTTOM_RIGHT):new cr(n.left+n.width-I*2/3,n.top+n.height-B*2/3),this.bottomLeftBorderDoubleInnerBox=d>0||p>0?Zi(n.left+T*2/3,n.top+C,d-T*2/3,p-B*2/3,fi.BOTTOM_LEFT):new cr(n.left+T*2/3,n.top+n.height-B*2/3),this.topLeftBorderStroke=a>0||s>0?Zi(n.left+T/2,n.top+S/2,a-T/2,s-S/2,fi.TOP_LEFT):new cr(n.left+T/2,n.top+S/2),this.topRightBorderStroke=a>0||s>0?Zi(n.left+w,n.top+S/2,l-I/2,u-S/2,fi.TOP_RIGHT):new cr(n.left+n.width-I/2,n.top+S/2),this.bottomRightBorderStroke=h>0||f>0?Zi(n.left+b,n.top+x,h-I/2,f-B/2,fi.BOTTOM_RIGHT):new cr(n.left+n.width-I/2,n.top+n.height-B/2),this.bottomLeftBorderStroke=d>0||p>0?Zi(n.left+T/2,n.top+C,d-T/2,p-B/2,fi.BOTTOM_LEFT):new cr(n.left+T/2,n.top+n.height-B/2),this.topLeftBorderBox=a>0||s>0?Zi(n.left,n.top,a,s,fi.TOP_LEFT):new cr(n.left,n.top),this.topRightBorderBox=l>0||u>0?Zi(n.left+w,n.top,l,u,fi.TOP_RIGHT):new cr(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||f>0?Zi(n.left+b,n.top+x,h,f,fi.BOTTOM_RIGHT):new cr(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=d>0||p>0?Zi(n.left,n.top+C,d,p,fi.BOTTOM_LEFT):new cr(n.left,n.top+n.height),this.topLeftPaddingBox=a>0||s>0?Zi(n.left+T,n.top+S,Math.max(0,a-T),Math.max(0,s-S),fi.TOP_LEFT):new cr(n.left+T,n.top+S),this.topRightPaddingBox=l>0||u>0?Zi(n.left+Math.min(w,n.width-I),n.top+S,w>n.width+I?0:Math.max(0,l-I),Math.max(0,u-S),fi.TOP_RIGHT):new cr(n.left+n.width-I,n.top+S),this.bottomRightPaddingBox=h>0||f>0?Zi(n.left+Math.min(b,n.width-T),n.top+Math.min(x,n.height-B),Math.max(0,h-I),Math.max(0,f-B),fi.BOTTOM_RIGHT):new cr(n.left+n.width-I,n.top+n.height-B),this.bottomLeftPaddingBox=d>0||p>0?Zi(n.left+T,n.top+Math.min(C,n.height-B),Math.max(0,d-T),Math.max(0,p-B),fi.BOTTOM_LEFT):new cr(n.left+T,n.top+n.height-B),this.topLeftContentBox=a>0||s>0?Zi(n.left+T+O,n.top+S+M,Math.max(0,a-(T+O)),Math.max(0,s-(S+M)),fi.TOP_LEFT):new cr(n.left+T+O,n.top+S+M),this.topRightContentBox=l>0||u>0?Zi(n.left+Math.min(w,n.width+T+O),n.top+S+M,w>n.width+T+O?0:l-T+O,u-(S+M),fi.TOP_RIGHT):new cr(n.left+n.width-(I+F),n.top+S+M),this.bottomRightContentBox=h>0||f>0?Zi(n.left+Math.min(b,n.width-(T+O)),n.top+Math.min(x,n.height+S+M),Math.max(0,h-(I+F)),f-(B+N),fi.BOTTOM_RIGHT):new cr(n.left+n.width-(I+F),n.top+n.height-(B+N)),this.bottomLeftContentBox=d>0||p>0?Zi(n.left+T+O,n.top+C,Math.max(0,d-(T+O)),p-(B+N),fi.BOTTOM_LEFT):new cr(n.left+T+O,n.top+n.height-(B+N))}return r}(),fi;(function(r){r[r.TOP_LEFT=0]="TOP_LEFT",r[r.TOP_RIGHT=1]="TOP_RIGHT",r[r.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",r[r.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(fi||(fi={}));var Zi=function(r,e,t,n,i){var a=4*((Math.sqrt(2)-1)/3),s=t*a,o=n*a,l=r+t,u=e+n;switch(i){case fi.TOP_LEFT:return new b2(new cr(r,u),new cr(r,u-o),new cr(l-s,e),new cr(l,e));case fi.TOP_RIGHT:return new b2(new cr(r,e),new cr(r+s,e),new cr(l,u-o),new cr(l,u));case fi.BOTTOM_RIGHT:return new b2(new cr(l,e),new cr(l,e+o),new cr(r+s,u),new cr(r,u));case fi.BOTTOM_LEFT:default:return new b2(new cr(l,u),new cr(l-s,u),new cr(r,e+o),new cr(r,e))}},_w=function(r){return[r.topLeftBorderBox,r.topRightBorderBox,r.bottomRightBorderBox,r.bottomLeftBorderBox]},Lve=function(r){return[r.topLeftContentBox,r.topRightContentBox,r.bottomRightContentBox,r.bottomLeftContentBox]},Ew=function(r){return[r.topLeftPaddingBox,r.topRightPaddingBox,r.bottomRightPaddingBox,r.bottomLeftPaddingBox]},Dve=function(){function r(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return r}(),C2=function(){function r(e,t){this.path=e,this.target=t,this.type=1}return r}(),kve=function(){function r(e){this.opacity=e,this.type=2,this.target=6}return r}(),Rve=function(r){return r.type===0},Q9=function(r){return r.type===1},Ove=function(r){return r.type===2},RM=function(r,e){return r.length===e.length?r.some(function(t,n){return t===e[n]}):!1},Pve=function(r,e,t,n,i){return r.map(function(a,s){switch(s){case 0:return a.add(e,t);case 1:return a.add(e+n,t);case 2:return a.add(e+n,t+i);case 3:return a.add(e,t+i)}return a})},G9=function(){function r(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return r}(),H9=function(){function r(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Mve(this.container),this.container.styles.opacity<1&&this.effects.push(new kve(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new Dve(n,i,a))}if(this.container.styles.overflowX!==0){var s=_w(this.curves),o=Ew(this.curves);RM(s,o)?this.effects.push(new C2(s,6)):(this.effects.push(new C2(s,2)),this.effects.push(new C2(o,4)))}}return r.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,i=this.effects.slice(0);n;){var a=n.effects.filter(function(l){return!Q9(l)});if(t||n.container.styles.position!==0||!n.parent){if(i.unshift.apply(i,a),t=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var s=_w(n.curves),o=Ew(n.curves);RM(s,o)||i.unshift(new C2(o,6))}}else i.unshift.apply(i,a);n=n.parent}return i.filter(function(l){return es(l.target,e)})},r}(),l5=function(r,e,t,n){r.container.elements.forEach(function(i){var a=es(i.flags,4),s=es(i.flags,2),o=new H9(i,r);es(i.styles.display,2048)&&n.push(o);var l=es(i.flags,8)?[]:n;if(a||s){var u=a||i.styles.isPositioned()?t:e,c=new G9(o);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var h=i.styles.zIndex.order;if(h<0){var f=0;u.negativeZIndex.some(function(d,p){return h>d.element.container.styles.zIndex.order?(f=p,!1):f>0}),u.negativeZIndex.splice(f,0,c)}else if(h>0){var A=0;u.positiveZIndex.some(function(d,p){return h>=d.element.container.styles.zIndex.order?(A=p+1,!1):A>0}),u.positiveZIndex.splice(A,0,c)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else i.styles.isFloating()?u.nonPositionedFloats.push(c):u.nonPositionedInlineLevel.push(c);l5(o,c,a?c:t,l)}else i.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),l5(o,e,t,l);es(i.flags,8)&&z9(i,l)})},z9=function(r,e){for(var t=r instanceof n5?r.start:1,n=r instanceof n5?r.reversed:!1,i=0;i<e.length;i++){var a=e[i];a.container instanceof S9&&typeof a.container.value=="number"&&a.container.value!==0&&(t=a.container.value),a.listValue=s1(t,a.container.styles.listStyleType,!0),t+=n?-1:1}},Uve=function(r){var e=new H9(r,null),t=new G9(e),n=[];return l5(e,t,t,n),z9(e.container,n),t},OM=function(r,e){switch(e){case 0:return _u(r.topLeftBorderBox,r.topLeftPaddingBox,r.topRightBorderBox,r.topRightPaddingBox);case 1:return _u(r.topRightBorderBox,r.topRightPaddingBox,r.bottomRightBorderBox,r.bottomRightPaddingBox);case 2:return _u(r.bottomRightBorderBox,r.bottomRightPaddingBox,r.bottomLeftBorderBox,r.bottomLeftPaddingBox);case 3:default:return _u(r.bottomLeftBorderBox,r.bottomLeftPaddingBox,r.topLeftBorderBox,r.topLeftPaddingBox)}},Qve=function(r,e){switch(e){case 0:return _u(r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox,r.topRightBorderBox,r.topRightBorderDoubleOuterBox);case 1:return _u(r.topRightBorderBox,r.topRightBorderDoubleOuterBox,r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox);case 2:return _u(r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox,r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox);case 3:default:return _u(r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox,r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox)}},Gve=function(r,e){switch(e){case 0:return _u(r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox,r.topRightBorderDoubleInnerBox,r.topRightPaddingBox);case 1:return _u(r.topRightBorderDoubleInnerBox,r.topRightPaddingBox,r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox);case 2:return _u(r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox,r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox);case 3:default:return _u(r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox,r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox)}},Hve=function(r,e){switch(e){case 0:return S2(r.topLeftBorderStroke,r.topRightBorderStroke);case 1:return S2(r.topRightBorderStroke,r.bottomRightBorderStroke);case 2:return S2(r.bottomRightBorderStroke,r.bottomLeftBorderStroke);case 3:default:return S2(r.bottomLeftBorderStroke,r.topLeftBorderStroke)}},S2=function(r,e){var t=[];return vu(r)?t.push(r.subdivide(.5,!1)):t.push(r),vu(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},_u=function(r,e,t,n){var i=[];return vu(r)?i.push(r.subdivide(.5,!1)):i.push(r),vu(t)?i.push(t.subdivide(.5,!0)):i.push(t),vu(n)?i.push(n.subdivide(.5,!0).reverse()):i.push(n),vu(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},q9=function(r){var e=r.bounds,t=r.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},bw=function(r){var e=r.styles,t=r.bounds,n=zi(e.paddingLeft,t.width),i=zi(e.paddingRight,t.width),a=zi(e.paddingTop,t.width),s=zi(e.paddingBottom,t.width);return t.add(n+e.borderLeftWidth,a+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+i),-(e.borderTopWidth+e.borderBottomWidth+a+s))},zve=function(r,e){return r===0?e.bounds:r===2?bw(e):q9(e)},qve=function(r,e){return r===0?e.bounds:r===2?bw(e):q9(e)},uC=function(r,e,t){var n=zve(lg(r.styles.backgroundOrigin,e),r),i=qve(lg(r.styles.backgroundClip,e),r),a=jve(lg(r.styles.backgroundSize,e),t,n),s=a[0],o=a[1],l=jm(lg(r.styles.backgroundPosition,e),n.width-s,n.height-o),u=$ve(lg(r.styles.backgroundRepeat,e),l,a,n,i),c=Math.round(n.left+l[0]),h=Math.round(n.top+l[1]);return[u,c,h,s,o]},z0=function(r){return Fi(r)&&r.value===kg.AUTO},B2=function(r){return typeof r=="number"},jve=function(r,e,t){var n=e[0],i=e[1],a=e[2],s=r[0],o=r[1];if(!s)return[0,0];if(za(s)&&o&&za(o))return[zi(s,t.width),zi(o,t.height)];var l=B2(a);if(Fi(s)&&(s.value===kg.CONTAIN||s.value===kg.COVER)){if(B2(a)){var u=t.width/t.height;return u<a!=(s.value===kg.COVER)?[t.width,t.width/a]:[t.height*a,t.height]}return[t.width,t.height]}var c=B2(n),h=B2(i),f=c||h;if(z0(s)&&(!o||z0(o))){if(c&&h)return[n,i];if(!l&&!f)return[t.width,t.height];if(f&&l){var A=c?n:i*a,d=h?i:n/a;return[A,d]}var p=c?n:t.width,y=h?i:t.height;return[p,y]}if(l){var v=0,w=0;return za(s)?v=zi(s,t.width):za(o)&&(w=zi(o,t.height)),z0(s)?v=w*a:(!o||z0(o))&&(w=v/a),[v,w]}var x=null,b=null;if(za(s)?x=zi(s,t.width):o&&za(o)&&(b=zi(o,t.height)),x!==null&&(!o||z0(o))&&(b=c&&h?x/n*i:t.height),b!==null&&z0(s)&&(x=c&&h?b/i*n:t.width),x!==null&&b!==null)return[x,b];throw new Error("Unable to calculate background-size for element")},lg=function(r,e){var t=r[e];return typeof t>"u"?r[0]:t},$ve=function(r,e,t,n,i){var a=e[0],s=e[1],o=t[0],l=t[1];switch(r){case 2:return[new cr(Math.round(n.left),Math.round(n.top+s)),new cr(Math.round(n.left+n.width),Math.round(n.top+s)),new cr(Math.round(n.left+n.width),Math.round(l+n.top+s)),new cr(Math.round(n.left),Math.round(l+n.top+s))];case 3:return[new cr(Math.round(n.left+a),Math.round(n.top)),new cr(Math.round(n.left+a+o),Math.round(n.top)),new cr(Math.round(n.left+a+o),Math.round(n.height+n.top)),new cr(Math.round(n.left+a),Math.round(n.height+n.top))];case 1:return[new cr(Math.round(n.left+a),Math.round(n.top+s)),new cr(Math.round(n.left+a+o),Math.round(n.top+s)),new cr(Math.round(n.left+a+o),Math.round(n.top+s+l)),new cr(Math.round(n.left+a),Math.round(n.top+s+l))];default:return[new cr(Math.round(i.left),Math.round(i.top)),new cr(Math.round(i.left+i.width),Math.round(i.top)),new cr(Math.round(i.left+i.width),Math.round(i.height+i.top)),new cr(Math.round(i.left),Math.round(i.height+i.top))]}},Kve="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",PM="Hidden Text",Vve=function(){function r(e){this._data={},this._document=e}return r.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),i=this._document.createElement("img"),a=this._document.createElement("span"),s=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",s.appendChild(n),i.src=Kve,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=t,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(PM)),n.appendChild(a),n.appendChild(i);var o=i.offsetTop-a.offsetTop+2;n.removeChild(a),n.appendChild(this._document.createTextNode(PM)),n.style.lineHeight="normal",i.style.verticalAlign="super";var l=i.offsetTop-n.offsetTop+2;return s.removeChild(n),{baseline:o,middle:l}},r.prototype.getMetrics=function(e,t){var n=e+" "+t;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},r}(),j9=function(){function r(e,t){this.context=e,this.options=t}return r}(),Wve=1e4,Yve=function(r){cc(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i._activeEffects=[],i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),n.canvas||(i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px"),i.fontMetrics=new Vve(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),i}return e.prototype.applyEffects=function(t){for(var n=this;this._activeEffects.length;)this.popEffect();t.forEach(function(i){return n.applyEffect(i)})},e.prototype.applyEffect=function(t){this.ctx.save(),Ove(t)&&(this.ctx.globalAlpha=t.opacity),Rve(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),Q9(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return Ro(this,void 0,void 0,function(){var n;return oo(this,function(i){switch(i.label){case 0:return n=t.element.container.styles,n.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return Ro(this,void 0,void 0,function(){return oo(this,function(n){switch(n.label){case 0:if(es(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,n,i){var a=this;if(n===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+i);else{var s=KB(t.text);s.reduce(function(o,l){return a.ctx.fillText(l,o,t.bounds.top+i),o+a.ctx.measureText(l).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var n=t.fontVariant.filter(function(s){return s==="normal"||s==="small-caps"}).join(""),i=t1e(t.fontFamily).join(", "),a=R1(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,n,t.fontWeight,a,i].join(" "),i,a]},e.prototype.renderTextNode=function(t,n){return Ro(this,void 0,void 0,function(){var i,a,s,o,l,u,c,h,f=this;return oo(this,function(A){return i=this.createFontStyle(n),a=i[0],s=i[1],o=i[2],this.ctx.font=a,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(s,o),u=l.baseline,c=l.middle,h=n.paintOrder,t.textBounds.forEach(function(d){h.forEach(function(p){switch(p){case 0:f.ctx.fillStyle=gs(n.color),f.renderTextWithLetterSpacing(d,n.letterSpacing,u);var y=n.textShadow;y.length&&d.text.trim().length&&(y.slice(0).reverse().forEach(function(v){f.ctx.shadowColor=gs(v.color),f.ctx.shadowOffsetX=v.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=v.offsetY.number*f.options.scale,f.ctx.shadowBlur=v.blur.number,f.renderTextWithLetterSpacing(d,n.letterSpacing,u)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),n.textDecorationLine.length&&(f.ctx.fillStyle=gs(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(v){switch(v){case 1:f.ctx.fillRect(d.bounds.left,Math.round(d.bounds.top+u),d.bounds.width,1);break;case 2:f.ctx.fillRect(d.bounds.left,Math.round(d.bounds.top),d.bounds.width,1);break;case 3:f.ctx.fillRect(d.bounds.left,Math.ceil(d.bounds.top+c),d.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&d.text.trim().length&&(f.ctx.strokeStyle=gs(n.webkitTextStrokeColor),f.ctx.lineWidth=n.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(d.text,d.bounds.left,d.bounds.top+u)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,n,i){if(i&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var a=bw(t),s=Ew(n);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,t.intrinsicWidth,t.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return Ro(this,void 0,void 0,function(){var n,i,a,s,o,l,w,w,u,c,h,f,b,A,d,C,p,y,v,w,x,b,C;return oo(this,function(S){switch(S.label){case 0:this.applyEffects(t.getEffects(4)),n=t.container,i=t.curves,a=n.styles,s=0,o=n.textNodes,S.label=1;case 1:return s<o.length?(l=o[s],[4,this.renderTextNode(l,a)]):[3,4];case 2:S.sent(),S.label=3;case 3:return s++,[3,1];case 4:if(!(n instanceof E9))return[3,8];S.label=5;case 5:return S.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=S.sent(),this.renderReplacedElement(n,i,w),[3,8];case 7:return S.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof b9&&this.renderReplacedElement(n,i,n.canvas),!(n instanceof C9))return[3,12];S.label=9;case 9:return S.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=S.sent(),this.renderReplacedElement(n,i,w),[3,12];case 11:return S.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof N9&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:c=S.sent(),n.width&&n.height&&this.ctx.drawImage(c,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),S.label=14;case 14:if(n instanceof VB&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===vw?n.checked&&(this.ctx.save(),this.path([new cr(n.bounds.left+h*.39363,n.bounds.top+h*.79),new cr(n.bounds.left+h*.16,n.bounds.top+h*.5549),new cr(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new cr(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new cr(n.bounds.left+h*.72983,n.bounds.top+h*.23),new cr(n.bounds.left+h*.84,n.bounds.top+h*.34085),new cr(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=gs(CM),this.ctx.fill(),this.ctx.restore()):n.type===yw&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=gs(CM),this.ctx.fill(),this.ctx.restore())),Xve(n)&&n.value.length){switch(f=this.createFontStyle(a),b=f[0],A=f[1],d=this.fontMetrics.getMetrics(b,A).baseline,this.ctx.font=b,this.ctx.fillStyle=gs(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Jve(n.styles.textAlign),C=bw(n),p=0,n.styles.textAlign){case 1:p+=C.width/2;break;case 2:p+=C.width;break}y=C.add(p,0,0,-C.height/2+1),this.ctx.save(),this.path([new cr(C.left,C.top),new cr(C.left+C.width,C.top),new cr(C.left+C.width,C.top+C.height),new cr(C.left,C.top+C.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new wv(n.value,y),a.letterSpacing,d),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!es(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(v=n.styles.listStyleImage,v.type!==0)return[3,18];w=void 0,x=v.url,S.label=15;case 15:return S.trys.push([15,17,,18]),[4,this.context.cache.match(x)];case 16:return w=S.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return S.sent(),this.context.logger.error("Error loading list-style-image "+x),[3,18];case 18:return[3,20];case 19:t.listValue&&n.styles.listStyleType!==-1&&(b=this.createFontStyle(a)[0],this.ctx.font=b,this.ctx.fillStyle=gs(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",C=new lf(n.bounds.left,n.bounds.top+zi(n.styles.paddingTop,n.bounds.width),n.bounds.width,lM(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new wv(t.listValue,C),a.letterSpacing,lM(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),S.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return Ro(this,void 0,void 0,function(){var n,i,v,a,s,v,o,l,v,u,c,v,h,f,v,A,d,v,p,y,v;return oo(this,function(w){switch(w.label){case 0:if(es(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:w.sent(),n=0,i=t.negativeZIndex,w.label=2;case 2:return n<i.length?(v=i[n],[4,this.renderStack(v)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:w.sent(),a=0,s=t.nonInlineLevel,w.label=7;case 7:return a<s.length?(v=s[a],[4,this.renderNode(v)]):[3,10];case 8:w.sent(),w.label=9;case 9:return a++,[3,7];case 10:o=0,l=t.nonPositionedFloats,w.label=11;case 11:return o<l.length?(v=l[o],[4,this.renderStack(v)]):[3,14];case 12:w.sent(),w.label=13;case 13:return o++,[3,11];case 14:u=0,c=t.nonPositionedInlineLevel,w.label=15;case 15:return u<c.length?(v=c[u],[4,this.renderStack(v)]):[3,18];case 16:w.sent(),w.label=17;case 17:return u++,[3,15];case 18:h=0,f=t.inlineLevel,w.label=19;case 19:return h<f.length?(v=f[h],[4,this.renderNode(v)]):[3,22];case 20:w.sent(),w.label=21;case 21:return h++,[3,19];case 22:A=0,d=t.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return A<d.length?(v=d[A],[4,this.renderStack(v)]):[3,26];case 24:w.sent(),w.label=25;case 25:return A++,[3,23];case 26:p=0,y=t.positiveZIndex,w.label=27;case 27:return p<y.length?(v=y[p],[4,this.renderStack(v)]):[3,30];case 28:w.sent(),w.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var n=this;t.forEach(function(i,a){var s=vu(i)?i.start:i;a===0?n.ctx.moveTo(s.x,s.y):n.ctx.lineTo(s.x,s.y),vu(i)&&n.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},e.prototype.renderRepeat=function(t,n,i,a){this.path(t),this.ctx.fillStyle=n,this.ctx.translate(i,a),this.ctx.fill(),this.ctx.translate(-i,-a)},e.prototype.resizeImage=function(t,n,i){var a;if(t.width===n&&t.height===i)return t;var s=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,o=s.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,i);var l=o.getContext("2d");return l.drawImage(t,0,0,t.width,t.height,0,0,n,i),o},e.prototype.renderBackgroundImage=function(t){return Ro(this,void 0,void 0,function(){var n,i,a,s,o,l;return oo(this,function(u){switch(u.label){case 0:n=t.styles.backgroundImage.length-1,i=function(c){var h,f,A,M,R,U,O,L,B,d,M,R,U,O,L,p,y,v,w,x,b,C,S,I,B,T,M,F,N,O,L,G,R,U,W,Q,re,oe,P,z,K,J;return oo(this,function(ue){switch(ue.label){case 0:if(c.type!==0)return[3,5];h=void 0,f=c.url,ue.label=1;case 1:return ue.trys.push([1,3,,4]),[4,a.context.cache.match(f)];case 2:return h=ue.sent(),[3,4];case 3:return ue.sent(),a.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(A=uC(t,n,[h.width,h.height,h.width/h.height]),M=A[0],R=A[1],U=A[2],O=A[3],L=A[4],B=a.ctx.createPattern(a.resizeImage(h,O,L),"repeat"),a.renderRepeat(M,B,R,U)),[3,6];case 5:Rge(c)?(d=uC(t,n,[null,null,null]),M=d[0],R=d[1],U=d[2],O=d[3],L=d[4],p=Fge(c.angle,O,L),y=p[0],v=p[1],w=p[2],x=p[3],b=p[4],C=document.createElement("canvas"),C.width=O,C.height=L,S=C.getContext("2d"),I=S.createLinearGradient(v,x,w,b),sM(c.stops,y).forEach(function(ge){return I.addColorStop(ge.stop,gs(ge.color))}),S.fillStyle=I,S.fillRect(0,0,O,L),O>0&&L>0&&(B=a.ctx.createPattern(C,"repeat"),a.renderRepeat(M,B,R,U))):Oge(c)&&(T=uC(t,n,[null,null,null]),M=T[0],F=T[1],N=T[2],O=T[3],L=T[4],G=c.position.length===0?[qB]:c.position,R=zi(G[0],O),U=zi(G[G.length-1],L),W=Mge(c,R,U,O,L),Q=W[0],re=W[1],Q>0&&re>0&&(oe=a.ctx.createRadialGradient(F+R,N+U,0,F+R,N+U,Q),sM(c.stops,Q*2).forEach(function(ge){return oe.addColorStop(ge.stop,gs(ge.color))}),a.path(M),a.ctx.fillStyle=oe,Q!==re?(P=t.bounds.left+.5*t.bounds.width,z=t.bounds.top+.5*t.bounds.height,K=re/Q,J=1/K,a.ctx.save(),a.ctx.translate(P,z),a.ctx.transform(1,0,0,K,0,0),a.ctx.translate(-P,-z),a.ctx.fillRect(F,J*(N-z)+z,O,L*J),a.ctx.restore()):a.ctx.fill())),ue.label=6;case 6:return n--,[2]}})},a=this,s=0,o=t.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return s<o.length?(l=o[s],[5,i(l)]):[3,4];case 2:u.sent(),u.label=3;case 3:return s++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,n,i){return Ro(this,void 0,void 0,function(){return oo(this,function(a){return this.path(OM(i,n)),this.ctx.fillStyle=gs(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,n,i,a){return Ro(this,void 0,void 0,function(){var s,o;return oo(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(t,i,a)]:[3,2];case 1:return l.sent(),[2];case 2:return s=Qve(a,i),this.path(s),this.ctx.fillStyle=gs(t),this.ctx.fill(),o=Gve(a,i),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return Ro(this,void 0,void 0,function(){var n,i,a,s,o,l,u,c,h=this;return oo(this,function(f){switch(f.label){case 0:return this.applyEffects(t.getEffects(2)),n=t.container.styles,i=!CA(n.backgroundColor)||n.backgroundImage.length,a=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],s=Zve(lg(n.backgroundClip,0),t.curves),i||n.boxShadow.length?(this.ctx.save(),this.path(s),this.ctx.clip(),CA(n.backgroundColor)||(this.ctx.fillStyle=gs(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(A){h.ctx.save();var d=_w(t.curves),p=A.inset?0:Wve,y=Pve(d,-p+(A.inset?1:-1)*A.spread.number,(A.inset?1:-1)*A.spread.number,A.spread.number*(A.inset?-2:2),A.spread.number*(A.inset?-2:2));A.inset?(h.path(d),h.ctx.clip(),h.mask(y)):(h.mask(d),h.ctx.clip(),h.path(y)),h.ctx.shadowOffsetX=A.offsetX.number+p,h.ctx.shadowOffsetY=A.offsetY.number,h.ctx.shadowColor=gs(A.color),h.ctx.shadowBlur=A.blur.number,h.ctx.fillStyle=A.inset?gs(A.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:o=0,l=0,u=a,f.label=3;case 3:return l<u.length?(c=u[l],c.style!==0&&!CA(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,o,t.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,o,t.curves,3)];case 6:return f.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,o,t.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,o,t.curves)];case 10:f.sent(),f.label=11;case 11:o++,f.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,n,i,a,s){return Ro(this,void 0,void 0,function(){var o,l,u,c,h,f,A,d,p,y,v,w,x,b,C,S,C,S;return oo(this,function(I){return this.ctx.save(),o=Hve(a,i),l=OM(a,i),s===2&&(this.path(l),this.ctx.clip()),vu(l[0])?(u=l[0].start.x,c=l[0].start.y):(u=l[0].x,c=l[0].y),vu(l[1])?(h=l[1].end.x,f=l[1].end.y):(h=l[1].x,f=l[1].y),i===0||i===2?A=Math.abs(u-h):A=Math.abs(c-f),this.ctx.beginPath(),s===3?this.formatPath(o):this.formatPath(l.slice(0,2)),d=n<3?n*3:n*2,p=n<3?n*2:n,s===3&&(d=n,p=n),y=!0,A<=d*2?y=!1:A<=d*2+p?(v=A/(2*d+p),d*=v,p*=v):(w=Math.floor((A+p)/(d+p)),x=(A-w*d)/(w-1),b=(A-(w+1)*d)/w,p=b<=0||Math.abs(p-x)<Math.abs(p-b)?x:b),y&&(s===3?this.ctx.setLineDash([0,d+p]):this.ctx.setLineDash([d,p])),s===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=gs(t),this.ctx.stroke(),this.ctx.setLineDash([]),s===2&&(vu(l[0])&&(C=l[3],S=l[0],this.ctx.beginPath(),this.formatPath([new cr(C.end.x,C.end.y),new cr(S.start.x,S.start.y)]),this.ctx.stroke()),vu(l[1])&&(C=l[1],S=l[2],this.ctx.beginPath(),this.formatPath([new cr(C.end.x,C.end.y),new cr(S.start.x,S.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return Ro(this,void 0,void 0,function(){var n;return oo(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=gs(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=Uve(t),[4,this.renderStack(n)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(j9),Xve=function(r){return r instanceof T9||r instanceof B9?!0:r instanceof VB&&r.type!==yw&&r.type!==vw},Zve=function(r,e){switch(r){case 0:return _w(e);case 2:return Lve(e);case 1:default:return Ew(e)}},Jve=function(r){switch(r){case 1:return"center";case 2:return"right";case 0:default:return"left"}},e1e=["-apple-system","system-ui"],t1e=function(r){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?r.filter(function(e){return e1e.indexOf(e)===-1}):r},r1e=function(r){cc(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=n,i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),i}return e.prototype.render=function(t){return Ro(this,void 0,void 0,function(){var n,i;return oo(this,function(a){switch(a.label){case 0:return n=r5(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,n1e(n)];case 1:return i=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=gs(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(j9),n1e=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},i1e=function(){function r(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,a2([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.prototype.getTime=function(){return Date.now()-this.start},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,a2([this.id,this.getTime()+"ms"],e))},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,a2([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,a2([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.instances={},r}(),a1e=function(){function r(e,t){var n;this.windowBounds=t,this.instanceName="#"+r.instanceCount++,this.logger=new i1e({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new Cve(this,e)}return r.instanceCount=1,r}(),u5=function(r,e){return e===void 0&&(e={}),s1e(r,e)};typeof window<"u"&&U9.setContext(window);var s1e=function(r,e){return Ro(void 0,void 0,void 0,function(){var t,n,i,a,s,o,l,u,c,h,f,A,d,p,y,v,w,x,b,C,I,S,I,B,T,M,F,N,O,L,G,R,U,W,Q,re,oe,P,z,K;return oo(this,function(J){switch(J.label){case 0:if(!r||typeof r!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=r.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(n=t.defaultView,!n)throw new Error("Document is not attached to a Window");return i={allowTaint:(B=e.allowTaint)!==null&&B!==void 0?B:!1,imageTimeout:(T=e.imageTimeout)!==null&&T!==void 0?T:15e3,proxy:e.proxy,useCORS:(M=e.useCORS)!==null&&M!==void 0?M:!1},a=GS({logging:(F=e.logging)!==null&&F!==void 0?F:!0,cache:e.cache},i),s={windowWidth:(N=e.windowWidth)!==null&&N!==void 0?N:n.innerWidth,windowHeight:(O=e.windowHeight)!==null&&O!==void 0?O:n.innerHeight,scrollX:(L=e.scrollX)!==null&&L!==void 0?L:n.pageXOffset,scrollY:(G=e.scrollY)!==null&&G!==void 0?G:n.pageYOffset},o=new lf(s.scrollX,s.scrollY,s.windowWidth,s.windowHeight),l=new a1e(a,o),u=(R=e.foreignObjectRendering)!==null&&R!==void 0?R:!1,c={allowTaint:(U=e.allowTaint)!==null&&U!==void 0?U:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new DM(l,r,c),f=h.clonedReferenceElement,f?[4,h.toIFrame(t,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return A=J.sent(),d=WB(f)||lve(f)?Pde(f.ownerDocument):M_(l,f),p=d.width,y=d.height,v=d.left,w=d.top,x=o1e(l,f,e.backgroundColor),b={canvas:e.canvas,backgroundColor:x,scale:(Q=(W=e.scale)!==null&&W!==void 0?W:n.devicePixelRatio)!==null&&Q!==void 0?Q:1,x:((re=e.x)!==null&&re!==void 0?re:0)+v,y:((oe=e.y)!==null&&oe!==void 0?oe:0)+w,width:(P=e.width)!==null&&P!==void 0?P:Math.ceil(p),height:(z=e.height)!==null&&z!==void 0?z:Math.ceil(y)},u?(l.logger.debug("Document cloned, using foreign object rendering"),I=new r1e(l,b),[4,I.render(f)]):[3,3];case 2:return C=J.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+v+","+w+" with size "+p+"x"+y+" using computed rendering"),l.logger.debug("Starting DOM parsing"),S=F9(l,f),x===S.styles.backgroundColor&&(S.styles.backgroundColor=tf.TRANSPARENT),l.logger.debug("Starting renderer for element at "+b.x+","+b.y+" with size "+b.width+"x"+b.height),I=new Yve(l,b),[4,I.render(S)];case 4:C=J.sent(),J.label=5;case 5:return(!((K=e.removeContainer)!==null&&K!==void 0)||K)&&(DM.destroy(A)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,C]}})})},o1e=function(r,e,t){var n=e.ownerDocument,i=n.documentElement?yv(r,getComputedStyle(n.documentElement).backgroundColor):tf.TRANSPARENT,a=n.body?yv(r,getComputedStyle(n.body).backgroundColor):tf.TRANSPARENT,s=typeof t=="string"?yv(r,t):t===null?tf.TRANSPARENT:4294967295;return e===n.documentElement?CA(i)?CA(a)?s:a:i:s};const l1e=Object.freeze(Object.defineProperty({__proto__:null,default:u5},Symbol.toStringTag,{value:"Module"}));function oi(r){"@babel/helpers - typeof";return oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oi(r)}var go=Uint8Array,Ul=Uint16Array,YB=Int32Array,H_=new go([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),z_=new go([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c5=new go([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$9=function(r,e){for(var t=new Ul(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new YB(t[30]),n=1;n<30;++n)for(var a=t[n];a<t[n+1];++a)i[a]=a-t[n]<<5|n;return{b:t,r:i}},K9=$9(H_,2),V9=K9.b,h5=K9.r;V9[28]=258,h5[258]=28;var W9=$9(z_,0),u1e=W9.b,UM=W9.r,f5=new Ul(32768);for(var Vi=0;Vi<32768;++Vi){var Zf=(Vi&43690)>>1|(Vi&21845)<<1;Zf=(Zf&52428)>>2|(Zf&13107)<<2,Zf=(Zf&61680)>>4|(Zf&3855)<<4,f5[Vi]=((Zf&65280)>>8|(Zf&255)<<8)>>1}var Jc=function(r,e,t){for(var n=r.length,i=0,a=new Ul(e);i<n;++i)r[i]&&++a[r[i]-1];var s=new Ul(e);for(i=1;i<e;++i)s[i]=s[i-1]+a[i-1]<<1;var o;if(t){o=new Ul(1<<e);var l=15-e;for(i=0;i<n;++i)if(r[i])for(var u=i<<4|r[i],c=e-r[i],h=s[r[i]-1]++<<c,f=h|(1<<c)-1;h<=f;++h)o[f5[h]>>l]=u}else for(o=new Ul(n),i=0;i<n;++i)r[i]&&(o[i]=f5[s[r[i]-1]++]>>15-r[i]);return o},MA=new go(288);for(var Vi=0;Vi<144;++Vi)MA[Vi]=8;for(var Vi=144;Vi<256;++Vi)MA[Vi]=9;for(var Vi=256;Vi<280;++Vi)MA[Vi]=7;for(var Vi=280;Vi<288;++Vi)MA[Vi]=8;var o1=new go(32);for(var Vi=0;Vi<32;++Vi)o1[Vi]=5;var c1e=Jc(MA,9,0),h1e=Jc(MA,9,1),f1e=Jc(o1,5,0),A1e=Jc(o1,5,1),cC=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},zu=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},hC=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},XB=function(r){return(r+7)/8|0},Y9=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new go(r.subarray(e,t))},d1e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Vu=function(r,e,t){var n=new Error(e||d1e[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,Vu),!t)throw n;return n},g1e=function(r,e,t,n){var i=r.length,a=0;if(!i||e.f&&!e.l)return t||new go(0);var s=!t,o=s||e.i!=2,l=e.i;s&&(t=new go(i*3));var u=function(Be){var Y=t.length;if(Be>Y){var Ve=new go(Math.max(Y*2,Be));Ve.set(t),t=Ve}},c=e.f||0,h=e.p||0,f=e.b||0,A=e.l,d=e.d,p=e.m,y=e.n,v=i*8;do{if(!A){c=zu(r,h,1);var w=zu(r,h+1,3);if(h+=3,w)if(w==1)A=h1e,d=A1e,p=9,y=5;else if(w==2){var S=zu(r,h,31)+257,I=zu(r,h+10,15)+4,B=S+zu(r,h+5,31)+1;h+=14;for(var T=new go(B),M=new go(19),F=0;F<I;++F)M[c5[F]]=zu(r,h+F*3,7);h+=I*3;for(var N=cC(M),O=(1<<N)-1,L=Jc(M,N,1),F=0;F<B;){var G=L[zu(r,h,O)];h+=G&15;var x=G>>4;if(x<16)T[F++]=x;else{var R=0,U=0;for(x==16?(U=3+zu(r,h,3),h+=2,R=T[F-1]):x==17?(U=3+zu(r,h,7),h+=3):x==18&&(U=11+zu(r,h,127),h+=7);U--;)T[F++]=R}}var W=T.subarray(0,S),Q=T.subarray(S);p=cC(W),y=cC(Q),A=Jc(W,p,1),d=Jc(Q,y,1)}else Vu(1);else{var x=XB(h)+4,b=r[x-4]|r[x-3]<<8,C=x+b;if(C>i){l&&Vu(0);break}o&&u(f+b),t.set(r.subarray(x,C),f),e.b=f+=b,e.p=h=C*8,e.f=c;continue}if(h>v){l&&Vu(0);break}}o&&u(f+131072);for(var re=(1<<p)-1,oe=(1<<y)-1,P=h;;P=h){var R=A[hC(r,h)&re],z=R>>4;if(h+=R&15,h>v){l&&Vu(0);break}if(R||Vu(2),z<256)t[f++]=z;else if(z==256){P=h,A=null;break}else{var K=z-254;if(z>264){var F=z-257,J=H_[F];K=zu(r,h,(1<<J)-1)+V9[F],h+=J}var ue=d[hC(r,h)&oe],ge=ue>>4;ue||Vu(3),h+=ue&15;var Q=u1e[ge];if(ge>3){var J=z_[ge];Q+=hC(r,h)&(1<<J)-1,h+=J}if(h>v){l&&Vu(0);break}o&&u(f+131072);var le=f+K;if(f<Q){var me=a-Q,xe=Math.min(Q,le);for(me+f<0&&Vu(3);f<xe;++f)t[f]=n[me+f]}for(;f<le;++f)t[f]=t[f-Q]}}e.l=A,e.p=P,e.b=f,e.f=c,A&&(c=1,e.m=p,e.d=d,e.n=y)}while(!c);return f!=t.length&&s?Y9(t,0,f):t.subarray(0,f)},Lh=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},xm=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},fC=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var i=t.length,a=t.slice();if(!i)return{t:Z9,l:0};if(i==1){var s=new go(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(C,S){return C.f-S.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],u=0,c=1,h=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};c!=i-1;)o=t[t[u].f<t[h].f?u++:h++],l=t[u!=c&&t[u].f<t[h].f?u++:h++],t[c++]={s:-1,f:o.f+l.f,l:o,r:l};for(var f=a[0].s,n=1;n<i;++n)a[n].s>f&&(f=a[n].s);var A=new Ul(f+1),d=A5(t[c-1],A,0);if(d>e){var n=0,p=0,y=d-e,v=1<<y;for(a.sort(function(S,I){return A[I.s]-A[S.s]||S.f-I.f});n<i;++n){var w=a[n].s;if(A[w]>e)p+=v-(1<<d-A[w]),A[w]=e;else break}for(p>>=y;p>0;){var x=a[n].s;A[x]<e?p-=1<<e-A[x]++-1:++n}for(;n>=0&&p;--n){var b=a[n].s;A[b]==e&&(--A[b],++p)}d=e}return{t:new go(A),l:d}},A5=function(r,e,t){return r.s==-1?Math.max(A5(r.l,e,t+1),A5(r.r,e,t+1)):e[r.s]=t},QM=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new Ul(++e),n=0,i=r[0],a=1,s=function(l){t[n++]=l},o=1;o<=e;++o)if(r[o]==i&&o!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=r[o]}return{c:t.subarray(0,n),n:e}},wm=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},X9=function(r,e,t){var n=t.length,i=XB(e+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var a=0;a<n;++a)r[i+a+4]=t[a];return(i+4+n)*8},GM=function(r,e,t,n,i,a,s,o,l,u,c){Lh(e,c++,t),++i[256];for(var h=fC(i,15),f=h.t,A=h.l,d=fC(a,15),p=d.t,y=d.l,v=QM(f),w=v.c,x=v.n,b=QM(p),C=b.c,S=b.n,I=new Ul(19),B=0;B<w.length;++B)++I[w[B]&31];for(var B=0;B<C.length;++B)++I[C[B]&31];for(var T=fC(I,7),M=T.t,F=T.l,N=19;N>4&&!M[c5[N-1]];--N);var O=u+5<<3,L=wm(i,MA)+wm(a,o1)+s,G=wm(i,f)+wm(a,p)+s+14+3*N+wm(I,M)+2*I[16]+3*I[17]+7*I[18];if(l>=0&&O<=L&&O<=G)return X9(e,c,r.subarray(l,l+u));var R,U,W,Q;if(Lh(e,c,1+(G<L)),c+=2,G<L){R=Jc(f,A,0),U=f,W=Jc(p,y,0),Q=p;var re=Jc(M,F,0);Lh(e,c,x-257),Lh(e,c+5,S-1),Lh(e,c+10,N-4),c+=14;for(var B=0;B<N;++B)Lh(e,c+3*B,M[c5[B]]);c+=3*N;for(var oe=[w,C],P=0;P<2;++P)for(var z=oe[P],B=0;B<z.length;++B){var K=z[B]&31;Lh(e,c,re[K]),c+=M[K],K>15&&(Lh(e,c,z[B]>>5&127),c+=z[B]>>12)}}else R=c1e,U=MA,W=f1e,Q=o1;for(var B=0;B<o;++B){var J=n[B];if(J>255){var K=J>>18&31;xm(e,c,R[K+257]),c+=U[K+257],K>7&&(Lh(e,c,J>>23&31),c+=H_[K]);var ue=J&31;xm(e,c,W[ue]),c+=Q[ue],ue>3&&(xm(e,c,J>>5&8191),c+=z_[ue])}else xm(e,c,R[J]),c+=U[J]}return xm(e,c,R[256]),c+U[256]},p1e=new YB([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Z9=new go(0),m1e=function(r,e,t,n,i,a){var s=a.z||r.length,o=new go(n+s+5*(1+Math.ceil(s/7e3))+i),l=o.subarray(n,o.length-i),u=a.l,c=(a.r||0)&7;if(e){c&&(l[0]=a.r>>3);for(var h=p1e[e-1],f=h>>13,A=h&8191,d=(1<<t)-1,p=a.p||new Ul(32768),y=a.h||new Ul(d+1),v=Math.ceil(t/3),w=2*v,x=function(te){return(r[te]^r[te+1]<<v^r[te+2]<<w)&d},b=new YB(25e3),C=new Ul(288),S=new Ul(32),I=0,B=0,T=a.i||0,M=0,F=a.w||0,N=0;T+2<s;++T){var O=x(T),L=T&32767,G=y[O];if(p[L]=G,y[O]=L,F<=T){var R=s-T;if((I>7e3||M>24576)&&(R>423||!u)){c=GM(r,l,0,b,C,S,B,M,N,T-N,c),M=I=B=0,N=T;for(var U=0;U<286;++U)C[U]=0;for(var U=0;U<30;++U)S[U]=0}var W=2,Q=0,re=A,oe=L-G&32767;if(R>2&&O==x(T-oe))for(var P=Math.min(f,R)-1,z=Math.min(32767,T),K=Math.min(258,R);oe<=z&&--re&&L!=G;){if(r[T+W]==r[T+W-oe]){for(var J=0;J<K&&r[T+J]==r[T+J-oe];++J);if(J>W){if(W=J,Q=oe,J>P)break;for(var ue=Math.min(oe,J-2),ge=0,U=0;U<ue;++U){var le=T-oe+U&32767,me=p[le],xe=le-me&32767;xe>ge&&(ge=xe,G=le)}}}L=G,G=p[L],oe+=L-G&32767}if(Q){b[M++]=268435456|h5[W]<<18|UM[Q];var Be=h5[W]&31,Y=UM[Q]&31;B+=H_[Be]+z_[Y],++C[257+Be],++S[Y],F=T+W,++I}else b[M++]=r[T],++C[r[T]]}}for(T=Math.max(T,F);T<s;++T)b[M++]=r[T],++C[r[T]];c=GM(r,l,u,b,C,S,B,M,N,T-N,c),u||(a.r=c&7|l[c/8|0]<<3,c-=7,a.h=y,a.p=p,a.i=T,a.w=F)}else{for(var T=a.w||0;T<s+u;T+=65535){var Ve=T+65535;Ve>=s&&(l[c/8|0]=u,Ve=s),c=X9(l,c+1,r.subarray(T,Ve))}a.i=s}return Y9(o,0,n+XB(c)+i)},J9=function(){var r=1,e=0;return{p:function(t){for(var n=r,i=e,a=t.length|0,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=n+=t[s];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}r=n,e=i},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},v1e=function(r,e,t,n,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),s=new go(a.length+r.length);s.set(a),s.set(r,a.length),r=s,i.w=a.length}return m1e(r,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,i)},eQ=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},y1e=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var i=J9();i.p(e.dictionary),eQ(r,2,i.d())}},x1e=function(r,e){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&Vu(6,"invalid zlib data"),(r[1]>>5&1)==1&&Vu(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2};function d5(r,e){e||(e={});var t=J9();t.p(r);var n=v1e(r,e,e.dictionary?6:2,4);return y1e(n,e),eQ(n,n.length-4,t.d()),n}function w1e(r,e){return g1e(r.subarray(x1e(r),-4),{i:2},e,e)}var _1e=typeof TextDecoder<"u"&&new TextDecoder,E1e=0;try{_1e.decode(Z9,{stream:!0}),E1e=1}catch{}var jr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function AC(){jr.console&&typeof jr.console.log=="function"&&jr.console.log.apply(jr.console,arguments)}var Ri={log:AC,warn:function(r){jr.console&&(typeof jr.console.warn=="function"?jr.console.warn.apply(jr.console,arguments):AC.call(null,arguments))},error:function(r){jr.console&&(typeof jr.console.error=="function"?jr.console.error.apply(jr.console,arguments):AC(r))}};function dC(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){gd(n.response,e,t)},n.onerror=function(){Ri.error("could not download file")},n.send()}function HM(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function T2(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var Ev,g5,gd=jr.saveAs||((typeof window>"u"?"undefined":oi(window))!=="object"||window!==jr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=jr.URL||jr.webkitURL,i=document.createElement("a");e=e||r.name||"download",i.download=e,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin!==location.origin?HM(i.href)?dC(r,e,t):T2(i,i.target="_blank"):T2(i)):(i.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){T2(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(HM(r))dC(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){T2(n)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:oi(a)!=="object"&&(Ri.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return dC(r,e,t);var i=r.type==="application/octet-stream",a=/constructor/i.test(jr.HTMLElement)||jr.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&a)&&(typeof FileReader>"u"?"undefined":oi(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var c=o.result;c=s?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=c:location=c,n=null},o.readAsDataURL(r)}else{var l=jr.URL||jr.webkitURL,u=l.createObjectURL(r);n?n.location=u:location.href=u,n=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function tQ(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<t.length;n++){var i=t[n].re,a=t[n].process,s=i.exec(r);s&&(e=a(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function gC(r,e){var t=r[0],n=r[1],i=r[2],a=r[3];t=eo(t,n,i,a,e[0],7,-680876936),a=eo(a,t,n,i,e[1],12,-389564586),i=eo(i,a,t,n,e[2],17,606105819),n=eo(n,i,a,t,e[3],22,-1044525330),t=eo(t,n,i,a,e[4],7,-176418897),a=eo(a,t,n,i,e[5],12,1200080426),i=eo(i,a,t,n,e[6],17,-1473231341),n=eo(n,i,a,t,e[7],22,-45705983),t=eo(t,n,i,a,e[8],7,1770035416),a=eo(a,t,n,i,e[9],12,-1958414417),i=eo(i,a,t,n,e[10],17,-42063),n=eo(n,i,a,t,e[11],22,-1990404162),t=eo(t,n,i,a,e[12],7,1804603682),a=eo(a,t,n,i,e[13],12,-40341101),i=eo(i,a,t,n,e[14],17,-1502002290),t=to(t,n=eo(n,i,a,t,e[15],22,1236535329),i,a,e[1],5,-165796510),a=to(a,t,n,i,e[6],9,-1069501632),i=to(i,a,t,n,e[11],14,643717713),n=to(n,i,a,t,e[0],20,-373897302),t=to(t,n,i,a,e[5],5,-701558691),a=to(a,t,n,i,e[10],9,38016083),i=to(i,a,t,n,e[15],14,-660478335),n=to(n,i,a,t,e[4],20,-405537848),t=to(t,n,i,a,e[9],5,568446438),a=to(a,t,n,i,e[14],9,-1019803690),i=to(i,a,t,n,e[3],14,-187363961),n=to(n,i,a,t,e[8],20,1163531501),t=to(t,n,i,a,e[13],5,-1444681467),a=to(a,t,n,i,e[2],9,-51403784),i=to(i,a,t,n,e[7],14,1735328473),t=ro(t,n=to(n,i,a,t,e[12],20,-1926607734),i,a,e[5],4,-378558),a=ro(a,t,n,i,e[8],11,-2022574463),i=ro(i,a,t,n,e[11],16,1839030562),n=ro(n,i,a,t,e[14],23,-35309556),t=ro(t,n,i,a,e[1],4,-1530992060),a=ro(a,t,n,i,e[4],11,1272893353),i=ro(i,a,t,n,e[7],16,-155497632),n=ro(n,i,a,t,e[10],23,-1094730640),t=ro(t,n,i,a,e[13],4,681279174),a=ro(a,t,n,i,e[0],11,-358537222),i=ro(i,a,t,n,e[3],16,-722521979),n=ro(n,i,a,t,e[6],23,76029189),t=ro(t,n,i,a,e[9],4,-640364487),a=ro(a,t,n,i,e[12],11,-421815835),i=ro(i,a,t,n,e[15],16,530742520),t=no(t,n=ro(n,i,a,t,e[2],23,-995338651),i,a,e[0],6,-198630844),a=no(a,t,n,i,e[7],10,1126891415),i=no(i,a,t,n,e[14],15,-1416354905),n=no(n,i,a,t,e[5],21,-57434055),t=no(t,n,i,a,e[12],6,1700485571),a=no(a,t,n,i,e[3],10,-1894986606),i=no(i,a,t,n,e[10],15,-1051523),n=no(n,i,a,t,e[1],21,-2054922799),t=no(t,n,i,a,e[8],6,1873313359),a=no(a,t,n,i,e[15],10,-30611744),i=no(i,a,t,n,e[6],15,-1560198380),n=no(n,i,a,t,e[13],21,1309151649),t=no(t,n,i,a,e[4],6,-145523070),a=no(a,t,n,i,e[11],10,-1120210379),i=no(i,a,t,n,e[2],15,718787259),n=no(n,i,a,t,e[9],21,-343485551),r[0]=mA(t,r[0]),r[1]=mA(n,r[1]),r[2]=mA(i,r[2]),r[3]=mA(a,r[3])}function q_(r,e,t,n,i,a){return e=mA(mA(e,r),mA(n,a)),mA(e<<i|e>>>32-i,t)}function eo(r,e,t,n,i,a,s){return q_(e&t|~e&n,r,e,i,a,s)}function to(r,e,t,n,i,a,s){return q_(e&n|t&~n,r,e,i,a,s)}function ro(r,e,t,n,i,a,s){return q_(e^t^n,r,e,i,a,s)}function no(r,e,t,n,i,a,s){return q_(t^(e|~n),r,e,i,a,s)}function rQ(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)gC(n,b1e(r.substring(e-64,e)));r=r.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(gC(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,gC(n,i),n}function b1e(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}Ev=jr.atob.bind(jr),g5=jr.btoa.bind(jr);var zM="0123456789abcdef".split("");function C1e(r){for(var e="",t=0;t<4;t++)e+=zM[r>>8*t+4&15]+zM[r>>8*t&15];return e}function S1e(r){return String.fromCharCode((255&r)>>0,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function p5(r){return rQ(r).map(S1e).join("")}var B1e=function(r){for(var e=0;e<r.length;e++)r[e]=C1e(r[e]);return r.join("")}(rQ("hello"))!="5d41402abc4b2a76b9719d911017c592";function mA(r,e){if(B1e){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function m5(r,e){var t,n,i,a;if(r!==t){for(var s=(i=r,a=1+(256/r.length>>0),new Array(a+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var c=o[l];u=(u+c+s.charCodeAt(l))%256,o[l]=o[u],o[u]=c}t=r,n=o}else o=n;var h=e.length,f=0,A=0,d="";for(l=0;l<h;l++)A=(A+(c=o[f=(f+1)%256]))%256,o[f]=o[A],o[A]=c,s=o[(o[f]+o[A])%256],d+=String.fromCharCode(e.charCodeAt(l)^s);return d}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var qM={print:4,modify:8,copy:16,"annot-forms":32};function ug(r,e,t,n){this.v=1,this.r=2;var i=192;r.forEach(function(o){if(qM.perm!==void 0)throw new Error("Invalid permission: "+o);i+=qM[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,s),this.P=-(1+(255^i)),this.encryptionKey=p5(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=m5(this.encryptionKey,this.padding)}function cg(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var i=r.charCodeAt(n);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=r[n]}return e}function jM(r){if(oi(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,i){if(i=i||!1,typeof t!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[n,!!i],a},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[t]){var s=e[t][a];try{s[0].apply(r,n)}catch(o){jr.console&&Ri.error("jsPDF PubSub Error",o.message,o)}s[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Cw(r){if(!(this instanceof Cw))return new Cw(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function nQ(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function yd(r,e,t,n,i){if(!(this instanceof yd))return new yd(r,e,t,n,i);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,nQ.call(this,n,i)}function _g(r,e,t,n,i){if(!(this instanceof _g))return new _g(r,e,t,n,i);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,nQ.call(this,n,i)}function Hr(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],a=arguments[3],s=[],o=1,l=16,u="S",c=null;oi(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,i=r.format||i,a=r.compress||r.compressPdf||a,(c=r.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),o=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(l=r.floatPrecision),u=r.defaultPathOperation||"S"),s=r.filters||(a===!0?["FlateEncode"]:s),n=n||"mm",t=(""+(t||"P")).toLowerCase();var h=r.putOnlyUsedFonts||!1,f={},A={internal:{},__private__:{}};A.__private__.PubSub=jM;var d="1.3",p=A.__private__.getPdfVersion=function(){return d};A.__private__.setPdfVersion=function(V){d=V};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};A.__private__.getPageFormats=function(){return y};var v=A.__private__.getPageFormat=function(V){return y[V]};i=i||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},x=w.COMPAT;function b(){this.saveGraphicsState(),Z(new ir(Ke,0,0,-Ke,0,Jl()*Ke).toString()+" cm"),this.setFontSize(this.getFontSize()/Ke),u="n",x=w.ADVANCED}function C(){this.restoreGraphicsState(),u="S",x=w.COMPAT}var S=A.__private__.combineFontStyleAndFontWeight=function(V,ye){if(V=="bold"&&ye=="normal"||V=="bold"&&ye==400||V=="normal"&&ye=="italic"||V=="bold"&&ye=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ye&&(V=ye==400||ye==="normal"?V==="italic"?"italic":"normal":ye!=700&&ye!=="bold"||V!=="normal"?(ye==700?"bold":ye)+""+V:"bold"),V};A.advancedAPI=function(V){var ye=x===w.COMPAT;return ye&&b.call(this),typeof V!="function"||(V(this),ye&&C.call(this)),this},A.compatAPI=function(V){var ye=x===w.ADVANCED;return ye&&C.call(this),typeof V!="function"||(V(this),ye&&b.call(this)),this},A.isAdvancedAPI=function(){return x===w.ADVANCED};var I,B=function(V){if(x!==w.ADVANCED)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},T=A.roundToPrecision=A.__private__.roundToPrecision=function(V,ye){var je=e||ye;if(isNaN(V)||isNaN(je))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(je).replace(/0+$/,"")};I=A.hpf=A.__private__.hpf=typeof l=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return T(V,l)}:l==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return T(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return T(V,16)};var M=A.f2=A.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return T(V,2)},F=A.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return T(V,3)},N=A.scale=A.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return x===w.COMPAT?V*Ke:x===w.ADVANCED?V:void 0},O=function(V){return x===w.COMPAT?Jl()-V:x===w.ADVANCED?V:void 0},L=function(V){return N(O(V))};A.__private__.setPrecision=A.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(e=parseInt(V,10))};var G,R="00000000000000000000000000000000",U=A.__private__.getFileId=function(){return R},W=A.__private__.setFileId=function(V){return R=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():R.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(Qi=new ug(c.userPermissions,c.userPassword,c.ownerPassword,R)),R};A.setFileId=function(V){return W(V),this},A.getFileId=function(){return U()};var Q=A.__private__.convertDateToPDFDate=function(V){var ye=V.getTimezoneOffset(),je=ye<0?"+":"-",Xe=Math.floor(Math.abs(ye/60)),ut=Math.abs(ye%60),_t=[je,K(Xe),"'",K(ut),"'"].join("");return["D:",V.getFullYear(),K(V.getMonth()+1),K(V.getDate()),K(V.getHours()),K(V.getMinutes()),K(V.getSeconds()),_t].join("")},re=A.__private__.convertPDFDateToDate=function(V){var ye=parseInt(V.substr(2,4),10),je=parseInt(V.substr(6,2),10)-1,Xe=parseInt(V.substr(8,2),10),ut=parseInt(V.substr(10,2),10),_t=parseInt(V.substr(12,2),10),Ut=parseInt(V.substr(14,2),10);return new Date(ye,je,Xe,ut,_t,Ut,0)},oe=A.__private__.setCreationDate=function(V){var ye;if(V===void 0&&(V=new Date),V instanceof Date)ye=Q(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ye=V}return G=ye},P=A.__private__.getCreationDate=function(V){var ye=G;return V==="jsDate"&&(ye=re(G)),ye};A.setCreationDate=function(V){return oe(V),this},A.getCreationDate=function(V){return P(V)};var z,K=A.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},J=A.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},ue=0,ge=[],le=[],me=0,xe=[],Be=[],Y=!1,Ve=le,te=function(){ue=0,me=0,le=[],ge=[],xe=[],ke=tn(),Re=tn()};A.__private__.setCustomOutputDestination=function(V){Y=!0,Ve=V};var se=function(V){Y||(Ve=V)};A.__private__.resetCustomOutputDestination=function(){Y=!1,Ve=le};var Z=A.__private__.out=function(V){return V=V.toString(),me+=V.length+1,Ve.push(V),Ve},he=A.__private__.write=function(V){return Z(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},ne=A.__private__.getArrayBuffer=function(V){for(var ye=V.length,je=new ArrayBuffer(ye),Xe=new Uint8Array(je);ye--;)Xe[ye]=V.charCodeAt(ye);return je},ae=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];A.__private__.getStandardFonts=function(){return ae};var _e=r.fontSize||16;A.__private__.setFontSize=A.setFontSize=function(V){return _e=x===w.ADVANCED?V/Ke:V,this};var Me,be=A.__private__.getFontSize=A.getFontSize=function(){return x===w.COMPAT?_e:_e*Ke},Ae=r.R2L||!1;A.__private__.setR2L=A.setR2L=function(V){return Ae=V,this},A.__private__.getR2L=A.getR2L=function(){return Ae};var pe,Fe=A.__private__.setZoomMode=function(V){var ye=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))Me=V;else if(isNaN(V)){if(ye.indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');Me=V}else Me=parseInt(V,10)};A.__private__.getZoomMode=function(){return Me};var Ge,Ze=A.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');pe=V};A.__private__.getPageMode=function(){return pe};var He=A.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');Ge=V};A.__private__.getLayoutMode=function(){return Ge},A.__private__.setDisplayMode=A.setDisplayMode=function(V,ye,je){return Fe(V),He(ye),Ze(je),this};var Je={title:"",subject:"",author:"",keywords:"",creator:""};A.__private__.getDocumentProperty=function(V){if(Object.keys(Je).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Je[V]},A.__private__.getDocumentProperties=function(){return Je},A.__private__.setDocumentProperties=A.setProperties=A.setDocumentProperties=function(V){for(var ye in Je)Je.hasOwnProperty(ye)&&V[ye]&&(Je[ye]=V[ye]);return this},A.__private__.setDocumentProperty=function(V,ye){if(Object.keys(Je).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Je[V]=ye};var Ye,Ke,mt,vt,Dt,yt={},Ar={},ce=[],Ue={},st={},wt={},Wt={},rr=null,wr=0,Ct=[],fn=new jM(A),$n=r.hotfixes||[],Tt={},Ln={},Kn=[],ir=function V(ye,je,Xe,ut,_t,Ut){if(!(this instanceof V))return new V(ye,je,Xe,ut,_t,Ut);isNaN(ye)&&(ye=1),isNaN(je)&&(je=0),isNaN(Xe)&&(Xe=0),isNaN(ut)&&(ut=1),isNaN(_t)&&(_t=0),isNaN(Ut)&&(Ut=0),this._matrix=[ye,je,Xe,ut,_t,Ut]};Object.defineProperty(ir.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(ir.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(ir.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(ir.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(ir.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(ir.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(ir.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(ir.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(ir.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(ir.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(ir.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(ir.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(ir.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ir.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ir.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ir.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ir.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(I).join(V)},ir.prototype.multiply=function(V){var ye=V.sx*this.sx+V.shy*this.shx,je=V.sx*this.shy+V.shy*this.sy,Xe=V.shx*this.sx+V.sy*this.shx,ut=V.shx*this.shy+V.sy*this.sy,_t=V.tx*this.sx+V.ty*this.shx+this.tx,Ut=V.tx*this.shy+V.ty*this.sy+this.ty;return new ir(ye,je,Xe,ut,_t,Ut)},ir.prototype.decompose=function(){var V=this.sx,ye=this.shy,je=this.shx,Xe=this.sy,ut=this.tx,_t=this.ty,Ut=Math.sqrt(V*V+ye*ye),nr=(V/=Ut)*je+(ye/=Ut)*Xe;je-=V*nr,Xe-=ye*nr;var br=Math.sqrt(je*je+Xe*Xe);return nr/=br,V*(Xe/=br)<ye*(je/=br)&&(V=-V,ye=-ye,nr=-nr,Ut=-Ut),{scale:new ir(Ut,0,0,br,0,0),translate:new ir(1,0,0,1,ut,_t),rotate:new ir(V,ye,-ye,V,0,0),skew:new ir(1,0,nr,1,0,0)}},ir.prototype.toString=function(V){return this.join(" ")},ir.prototype.inversed=function(){var V=this.sx,ye=this.shy,je=this.shx,Xe=this.sy,ut=this.tx,_t=this.ty,Ut=1/(V*Xe-ye*je),nr=Xe*Ut,br=-ye*Ut,qr=-je*Ut,Qr=V*Ut;return new ir(nr,br,qr,Qr,-nr*ut-qr*_t,-br*ut-Qr*_t)},ir.prototype.applyToPoint=function(V){var ye=V.x*this.sx+V.y*this.shx+this.tx,je=V.x*this.shy+V.y*this.sy+this.ty;return new Sc(ye,je)},ir.prototype.applyToRectangle=function(V){var ye=this.applyToPoint(V),je=this.applyToPoint(new Sc(V.x+V.w,V.y+V.h));return new yh(ye.x,ye.y,je.x-ye.x,je.y-ye.y)},ir.prototype.clone=function(){var V=this.sx,ye=this.shy,je=this.shx,Xe=this.sy,ut=this.tx,_t=this.ty;return new ir(V,ye,je,Xe,ut,_t)},A.Matrix=ir;var Dn=A.matrixMult=function(V,ye){return ye.multiply(V)},Zn=new ir(1,0,0,1,0,0);A.unitMatrix=A.identityMatrix=Zn;var Br=function(V,ye){if(!st[V]){var je=(ye instanceof yd?"Sh":"P")+(Object.keys(Ue).length+1).toString(10);ye.id=je,st[V]=je,Ue[je]=ye,fn.publish("addPattern",ye)}};A.ShadingPattern=yd,A.TilingPattern=_g,A.addShadingPattern=function(V,ye){return B("addShadingPattern()"),Br(V,ye),this},A.beginTilingPattern=function(V){B("beginTilingPattern()"),bf(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},A.endTilingPattern=function(V,ye){B("endTilingPattern()"),ye.stream=Be[z].join(`
`),Br(V,ye),fn.publish("endTilingPattern",ye),Kn.pop().restore()};var Pr=A.__private__.newObject=function(){var V=tn();return Ee(V,!0),V},tn=A.__private__.newObjectDeferred=function(){return ue++,ge[ue]=function(){return me},ue},Ee=function(V,ye){return ye=typeof ye=="boolean"&&ye,ge[V]=me,ye&&Z(V+" 0 obj"),V},ze=A.__private__.newAdditionalObject=function(){var V={objId:tn(),content:""};return xe.push(V),V},ke=tn(),Re=tn(),Oe=A.__private__.decodeColorString=function(V){var ye=V.split(" ");if(ye.length!==2||ye[1]!=="g"&&ye[1]!=="G")ye.length===5&&(ye[4]==="k"||ye[4]==="K")&&(ye=[(1-ye[0])*(1-ye[3]),(1-ye[1])*(1-ye[3]),(1-ye[2])*(1-ye[3]),"r"]);else{var je=parseFloat(ye[0]);ye=[je,je,je,"r"]}for(var Xe="#",ut=0;ut<3;ut++)Xe+=("0"+Math.floor(255*parseFloat(ye[ut])).toString(16)).slice(-2);return Xe},qe=A.__private__.encodeColorString=function(V){var ye;typeof V=="string"&&(V={ch1:V});var je=V.ch1,Xe=V.ch2,ut=V.ch3,_t=V.ch4,Ut=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof je=="string"&&je.charAt(0)!=="#"){var nr=new tQ(je);if(nr.ok)je=nr.toHex();else if(!/^\d*\.?\d*$/.test(je))throw new Error('Invalid color "'+je+'" passed to jsPDF.encodeColorString.')}if(typeof je=="string"&&/^#[0-9A-Fa-f]{3}$/.test(je)&&(je="#"+je[1]+je[1]+je[2]+je[2]+je[3]+je[3]),typeof je=="string"&&/^#[0-9A-Fa-f]{6}$/.test(je)){var br=parseInt(je.substr(1),16);je=br>>16&255,Xe=br>>8&255,ut=255&br}if(Xe===void 0||_t===void 0&&je===Xe&&Xe===ut)if(typeof je=="string")ye=je+" "+Ut[0];else switch(V.precision){case 2:ye=M(je/255)+" "+Ut[0];break;case 3:default:ye=F(je/255)+" "+Ut[0]}else if(_t===void 0||oi(_t)==="object"){if(_t&&!isNaN(_t.a)&&_t.a===0)return ye=["1.","1.","1.",Ut[1]].join(" ");if(typeof je=="string")ye=[je,Xe,ut,Ut[1]].join(" ");else switch(V.precision){case 2:ye=[M(je/255),M(Xe/255),M(ut/255),Ut[1]].join(" ");break;default:case 3:ye=[F(je/255),F(Xe/255),F(ut/255),Ut[1]].join(" ")}}else if(typeof je=="string")ye=[je,Xe,ut,_t,Ut[2]].join(" ");else switch(V.precision){case 2:ye=[M(je),M(Xe),M(ut),M(_t),Ut[2]].join(" ");break;case 3:default:ye=[F(je),F(Xe),F(ut),F(_t),Ut[2]].join(" ")}return ye},ct=A.__private__.getFilters=function(){return s},xt=A.__private__.putStream=function(V){var ye=(V=V||{}).data||"",je=V.filters||ct(),Xe=V.alreadyAppliedFilters||[],ut=V.addLength1||!1,_t=ye.length,Ut=V.objectId,nr=function(_r){return _r};if(c!==null&&Ut===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(nr=Qi.encryptor(Ut,0));var br={};je===!0&&(je=["FlateEncode"]);var qr=V.additionalKeyValues||[],Qr=(br=Hr.API.processDataByFilters!==void 0?Hr.API.processDataByFilters(ye,je):{data:ye,reverseChain:[]}).reverseChain+(Array.isArray(Xe)?Xe.join(" "):Xe.toString());if(br.data.length!==0&&(qr.push({key:"Length",value:br.data.length}),ut===!0&&qr.push({key:"Length1",value:_t})),Qr.length!=0)if(Qr.split("/").length-1==1)qr.push({key:"Filter",value:Qr});else{qr.push({key:"Filter",value:"["+Qr+"]"});for(var tt=0;tt<qr.length;tt+=1)if(qr[tt].key==="DecodeParms"){for(var St=[],Yt=0;Yt<br.reverseChain.split("/").length-1;Yt+=1)St.push("null");St.push(qr[tt].value),qr[tt].value="["+St.join(" ")+"]"}}Z("<<");for(var ur=0;ur<qr.length;ur++)Z("/"+qr[ur].key+" "+qr[ur].value);Z(">>"),br.data.length!==0&&(Z("stream"),Z(nr(br.data)),Z("endstream"))},lt=A.__private__.putPage=function(V){var ye=V.number,je=V.data,Xe=V.objId,ut=V.contentsObjId;Ee(Xe,!0),Z("<</Type /Page"),Z("/Parent "+V.rootDictionaryObjId+" 0 R"),Z("/Resources "+V.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(I(V.mediaBox.bottomLeftX))+" "+parseFloat(I(V.mediaBox.bottomLeftY))+" "+I(V.mediaBox.topRightX)+" "+I(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&Z("/CropBox ["+I(V.cropBox.bottomLeftX)+" "+I(V.cropBox.bottomLeftY)+" "+I(V.cropBox.topRightX)+" "+I(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&Z("/BleedBox ["+I(V.bleedBox.bottomLeftX)+" "+I(V.bleedBox.bottomLeftY)+" "+I(V.bleedBox.topRightX)+" "+I(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&Z("/TrimBox ["+I(V.trimBox.bottomLeftX)+" "+I(V.trimBox.bottomLeftY)+" "+I(V.trimBox.topRightX)+" "+I(V.trimBox.topRightY)+"]"),V.artBox!==null&&Z("/ArtBox ["+I(V.artBox.bottomLeftX)+" "+I(V.artBox.bottomLeftY)+" "+I(V.artBox.topRightX)+" "+I(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&Z("/UserUnit "+V.userUnit),fn.publish("putPage",{objId:Xe,pageContext:Ct[ye],pageNumber:ye,page:je}),Z("/Contents "+ut+" 0 R"),Z(">>"),Z("endobj");var _t=je.join(`
`);return x===w.ADVANCED&&(_t+=`
Q`),Ee(ut,!0),xt({data:_t,filters:ct(),objectId:ut}),Z("endobj"),Xe},ft=A.__private__.putPages=function(){var V,ye,je=[];for(V=1;V<=wr;V++)Ct[V].objId=tn(),Ct[V].contentsObjId=tn();for(V=1;V<=wr;V++)je.push(lt({number:V,data:Be[V],objId:Ct[V].objId,contentsObjId:Ct[V].contentsObjId,mediaBox:Ct[V].mediaBox,cropBox:Ct[V].cropBox,bleedBox:Ct[V].bleedBox,trimBox:Ct[V].trimBox,artBox:Ct[V].artBox,userUnit:Ct[V].userUnit,rootDictionaryObjId:ke,resourceDictionaryObjId:Re}));Ee(ke,!0),Z("<</Type /Pages");var Xe="/Kids [";for(ye=0;ye<wr;ye++)Xe+=je[ye]+" 0 R ";Z(Xe+"]"),Z("/Count "+wr),Z(">>"),Z("endobj"),fn.publish("postPutPages")},At=function(V){fn.publish("putFont",{font:V,out:Z,newObject:Pr,putStream:xt}),V.isAlreadyPutted!==!0&&(V.objectNumber=Pr(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+cg(V.postScriptName)),Z("/Subtype /Type1"),typeof V.encoding=="string"&&Z("/Encoding /"+V.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},Pt=function(){for(var V in yt)yt.hasOwnProperty(V)&&(h===!1||h===!0&&f.hasOwnProperty(V))&&At(yt[V])},It=function(V){V.objectNumber=Pr();var ye=[];ye.push({key:"Type",value:"/XObject"}),ye.push({key:"Subtype",value:"/Form"}),ye.push({key:"BBox",value:"["+[I(V.x),I(V.y),I(V.x+V.width),I(V.y+V.height)].join(" ")+"]"}),ye.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var je=V.pages[1].join(`
`);xt({data:je,additionalKeyValues:ye,objectId:V.objectNumber}),Z("endobj")},Jt=function(){for(var V in Tt)Tt.hasOwnProperty(V)&&It(Tt[V])},qt=function(V,ye){var je,Xe=[],ut=1/(ye-1);for(je=0;je<1;je+=ut)Xe.push(je);if(Xe.push(1),V[0].offset!=0){var _t={offset:0,color:V[0].color};V.unshift(_t)}if(V[V.length-1].offset!=1){var Ut={offset:1,color:V[V.length-1].color};V.push(Ut)}for(var nr="",br=0,qr=0;qr<Xe.length;qr++){for(je=Xe[qr];je>V[br+1].offset;)br++;var Qr=V[br].offset,tt=(je-Qr)/(V[br+1].offset-Qr),St=V[br].color,Yt=V[br+1].color;nr+=J(Math.round((1-tt)*St[0]+tt*Yt[0]).toString(16))+J(Math.round((1-tt)*St[1]+tt*Yt[1]).toString(16))+J(Math.round((1-tt)*St[2]+tt*Yt[2]).toString(16))}return nr.trim()},Rt=function(V,ye){ye||(ye=21);var je=Pr(),Xe=qt(V.colors,ye),ut=[];ut.push({key:"FunctionType",value:"0"}),ut.push({key:"Domain",value:"[0.0 1.0]"}),ut.push({key:"Size",value:"["+ye+"]"}),ut.push({key:"BitsPerSample",value:"8"}),ut.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ut.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xt({data:Xe,additionalKeyValues:ut,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:je}),Z("endobj"),V.objectNumber=Pr(),Z("<< /ShadingType "+V.type),Z("/ColorSpace /DeviceRGB");var _t="/Coords ["+I(parseFloat(V.coords[0]))+" "+I(parseFloat(V.coords[1]))+" ";V.type===2?_t+=I(parseFloat(V.coords[2]))+" "+I(parseFloat(V.coords[3])):_t+=I(parseFloat(V.coords[2]))+" "+I(parseFloat(V.coords[3]))+" "+I(parseFloat(V.coords[4]))+" "+I(parseFloat(V.coords[5])),Z(_t+="]"),V.matrix&&Z("/Matrix ["+V.matrix.toString()+"]"),Z("/Function "+je+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},hr=function(V,ye){var je=tn(),Xe=Pr();ye.push({resourcesOid:je,objectOid:Xe}),V.objectNumber=Xe;var ut=[];ut.push({key:"Type",value:"/Pattern"}),ut.push({key:"PatternType",value:"1"}),ut.push({key:"PaintType",value:"1"}),ut.push({key:"TilingType",value:"1"}),ut.push({key:"BBox",value:"["+V.boundingBox.map(I).join(" ")+"]"}),ut.push({key:"XStep",value:I(V.xStep)}),ut.push({key:"YStep",value:I(V.yStep)}),ut.push({key:"Resources",value:je+" 0 R"}),V.matrix&&ut.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),xt({data:V.stream,additionalKeyValues:ut,objectId:V.objectNumber}),Z("endobj")},An=function(V){var ye;for(ye in Ue)Ue.hasOwnProperty(ye)&&(Ue[ye]instanceof yd?Rt(Ue[ye]):Ue[ye]instanceof _g&&hr(Ue[ye],V))},Cn=function(V){for(var ye in V.objectNumber=Pr(),Z("<<"),V)switch(ye){case"opacity":Z("/ca "+M(V[ye]));break;case"stroke-opacity":Z("/CA "+M(V[ye]))}Z(">>"),Z("endobj")},Vn=function(){var V;for(V in wt)wt.hasOwnProperty(V)&&Cn(wt[V])},ls=function(){for(var V in Z("/XObject <<"),Tt)Tt.hasOwnProperty(V)&&Tt[V].objectNumber>=0&&Z("/"+V+" "+Tt[V].objectNumber+" 0 R");fn.publish("putXobjectDict"),Z(">>")},Ti=function(){Qi.oid=Pr(),Z("<<"),Z("/Filter /Standard"),Z("/V "+Qi.v),Z("/R "+Qi.r),Z("/U <"+Qi.toHexString(Qi.U)+">"),Z("/O <"+Qi.toHexString(Qi.O)+">"),Z("/P "+Qi.P),Z(">>"),Z("endobj")},ya=function(){for(var V in Z("/Font <<"),yt)yt.hasOwnProperty(V)&&(h===!1||h===!0&&f.hasOwnProperty(V))&&Z("/"+V+" "+yt[V].objectNumber+" 0 R");Z(">>")},us=function(){if(Object.keys(Ue).length>0){for(var V in Z("/Shading <<"),Ue)Ue.hasOwnProperty(V)&&Ue[V]instanceof yd&&Ue[V].objectNumber>=0&&Z("/"+V+" "+Ue[V].objectNumber+" 0 R");fn.publish("putShadingPatternDict"),Z(">>")}},Ia=function(V){if(Object.keys(Ue).length>0){for(var ye in Z("/Pattern <<"),Ue)Ue.hasOwnProperty(ye)&&Ue[ye]instanceof A.TilingPattern&&Ue[ye].objectNumber>=0&&Ue[ye].objectNumber<V&&Z("/"+ye+" "+Ue[ye].objectNumber+" 0 R");fn.publish("putTilingPatternDict"),Z(">>")}},Fa=function(){if(Object.keys(wt).length>0){var V;for(V in Z("/ExtGState <<"),wt)wt.hasOwnProperty(V)&&wt[V].objectNumber>=0&&Z("/"+V+" "+wt[V].objectNumber+" 0 R");fn.publish("putGStateDict"),Z(">>")}},ji=function(V){Ee(V.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ya(),us(),Ia(V.objectOid),Fa(),ls(),Z(">>"),Z("endobj")},To=function(){var V=[];Pt(),Vn(),Jt(),An(V),fn.publish("putResources"),V.forEach(ji),ji({resourcesOid:Re,objectOid:Number.MAX_SAFE_INTEGER}),fn.publish("postPutResources")},ni=function(){fn.publish("putAdditionalObjects");for(var V=0;V<xe.length;V++){var ye=xe[V];Ee(ye.objId,!0),Z(ye.content),Z("endobj")}fn.publish("postPutAdditionalObjects")},No=function(V){Ar[V.fontName]=Ar[V.fontName]||{},Ar[V.fontName][V.fontStyle]=V.id},Cl=function(V,ye,je,Xe,ut){var _t={id:"F"+(Object.keys(yt).length+1).toString(10),postScriptName:V,fontName:ye,fontStyle:je,encoding:Xe,isStandardFont:ut||!1,metadata:{}};return fn.publish("addFont",{font:_t,instance:this}),yt[_t.id]=_t,No(_t),_t.id},Sl=function(V){for(var ye=0,je=ae.length;ye<je;ye++){var Xe=Cl.call(this,V[ye][0],V[ye][1],V[ye][2],ae[ye][3],!0);h===!1&&(f[Xe]=!0);var ut=V[ye][0].split("-");No({id:Xe,fontName:ut[0],fontStyle:ut[1]||""})}fn.publish("addFonts",{fonts:yt,dictionary:Ar})},Ui=function(V){return V.foo=function(){try{return V.apply(this,arguments)}catch(Xe){var ye=Xe.stack||"";~ye.indexOf(" at ")&&(ye=ye.split(" at ")[1]);var je="Error in function "+ye.split(`
`)[0].split("<")[0]+": "+Xe.message;if(!jr.console)throw new Error(je);jr.console.error(je,Xe),jr.alert&&alert(je)}},V.foo.bar=V,V.foo},$a=function(V,ye){var je,Xe,ut,_t,Ut,nr,br,qr,Qr;if(ut=(ye=ye||{}).sourceEncoding||"Unicode",Ut=ye.outputEncoding,(ye.autoencode||Ut)&&yt[Ye].metadata&&yt[Ye].metadata[ut]&&yt[Ye].metadata[ut].encoding&&(_t=yt[Ye].metadata[ut].encoding,!Ut&&yt[Ye].encoding&&(Ut=yt[Ye].encoding),!Ut&&_t.codePages&&(Ut=_t.codePages[0]),typeof Ut=="string"&&(Ut=_t[Ut]),Ut)){for(br=!1,nr=[],je=0,Xe=V.length;je<Xe;je++)(qr=Ut[V.charCodeAt(je)])?nr.push(String.fromCharCode(qr)):nr.push(V[je]),nr[je].charCodeAt(0)>>8&&(br=!0);V=nr.join("")}for(je=V.length;br===void 0&&je!==0;)V.charCodeAt(je-1)>>8&&(br=!0),je--;if(!br)return V;for(nr=ye.noBOM?[]:[254,255],je=0,Xe=V.length;je<Xe;je++){if((Qr=(qr=V.charCodeAt(je))>>8)>>8)throw new Error("Character at position "+je+" of string '"+V+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");nr.push(Qr),nr.push(qr-(Qr<<8))}return String.fromCharCode.apply(void 0,nr)},Ka=A.__private__.pdfEscape=A.pdfEscape=function(V,ye){return $a(V,ye).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},tl=A.__private__.beginPage=function(V){Be[++wr]=[],Ct[wr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},xf(wr),se(Be[z])},Wl=function(V,ye){var je,Xe,ut;switch(t=ye||t,typeof V=="string"&&(je=v(V.toLowerCase()),Array.isArray(je)&&(Xe=je[0],ut=je[1])),Array.isArray(V)&&(Xe=V[0]*Ke,ut=V[1]*Ke),isNaN(Xe)&&(Xe=i[0],ut=i[1]),(Xe>14400||ut>14400)&&(Ri.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Xe=Math.min(14400,Xe),ut=Math.min(14400,ut)),i=[Xe,ut],t.substr(0,1)){case"l":ut>Xe&&(i=[ut,Xe]);break;case"p":Xe>ut&&(i=[ut,Xe])}tl(i),xi(Wr),Z(Ma),vh!==0&&Z(vh+" J"),Cc!==0&&Z(Cc+" j"),fn.publish("addPage",{pageNumber:wr})},yf=function(V){V>0&&V<=wr&&(Be.splice(V,1),Ct.splice(V,1),wr--,z>wr&&(z=wr),this.setPage(z))},xf=function(V){V>0&&V<=wr&&(z=V)},mh=A.__private__.getNumberOfPages=A.getNumberOfPages=function(){return Be.length-1},wc=function(V,ye,je){var Xe,ut=void 0;return je=je||{},V=V!==void 0?V:yt[Ye].fontName,ye=ye!==void 0?ye:yt[Ye].fontStyle,Xe=V.toLowerCase(),Ar[Xe]!==void 0&&Ar[Xe][ye]!==void 0?ut=Ar[Xe][ye]:Ar[V]!==void 0&&Ar[V][ye]!==void 0?ut=Ar[V][ye]:je.disableWarning===!1&&Ri.warn("Unable to look up font label for font '"+V+"', '"+ye+"'. Refer to getFontList() for available fonts."),ut||je.noFallback||(ut=Ar.times[ye])==null&&(ut=Ar.times.normal),ut},Bl=A.__private__.putInfo=function(){var V=Pr(),ye=function(Xe){return Xe};for(var je in c!==null&&(ye=Qi.encryptor(V,0)),Z("<<"),Z("/Producer ("+Ka(ye("jsPDF "+Hr.version))+")"),Je)Je.hasOwnProperty(je)&&Je[je]&&Z("/"+je.substr(0,1).toUpperCase()+je.substr(1)+" ("+Ka(ye(Je[je]))+")");Z("/CreationDate ("+Ka(ye(G))+")"),Z(">>"),Z("endobj")},Yl=A.__private__.putCatalog=function(V){var ye=(V=V||{}).rootDictionaryObjId||ke;switch(Pr(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+ye+" 0 R"),Me||(Me="fullwidth"),Me){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var je=""+Me;je.substr(je.length-1)==="%"&&(Me=parseInt(Me)/100),typeof Me=="number"&&Z("/OpenAction [3 0 R /XYZ null null "+M(Me)+"]")}switch(Ge||(Ge="continuous"),Ge){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}pe&&Z("/PageMode /"+pe),fn.publish("putCatalog"),Z(">>"),Z("endobj")},JA=A.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(ue+1)),Z("/Root "+ue+" 0 R"),Z("/Info "+(ue-1)+" 0 R"),c!==null&&Z("/Encrypt "+Qi.oid+" 0 R"),Z("/ID [ <"+R+"> <"+R+"> ]"),Z(">>")},Mu=A.__private__.putHeader=function(){Z("%PDF-"+d),Z("%ºß¬à")},_c=A.__private__.putXRef=function(){var V="0000000000";Z("xref"),Z("0 "+(ue+1)),Z("0000000000 65535 f ");for(var ye=1;ye<=ue;ye++)typeof ge[ye]=="function"?Z((V+ge[ye]()).slice(-10)+" 00000 n "):ge[ye]!==void 0?Z((V+ge[ye]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},xa=A.__private__.buildDocument=function(){te(),se(le),fn.publish("buildDocument"),Mu(),ft(),ni(),To(),c!==null&&Ti(),Bl(),Yl();var V=me;return _c(),JA(),Z("startxref"),Z(""+V),Z("%%EOF"),se(Be[z]),le.join(`
`)},Gn=A.__private__.getBlob=function(V){return new Blob([ne(V)],{type:"application/pdf"})},Yi=A.output=A.__private__.output=Ui(function(V,ye){switch(typeof(ye=ye||{})=="string"?ye={filename:ye}:ye.filename=ye.filename||"generated.pdf",V){case void 0:return xa();case"save":A.save(ye.filename);break;case"arraybuffer":return ne(xa());case"blob":return Gn(xa());case"bloburi":case"bloburl":if(jr.URL!==void 0&&typeof jr.URL.createObjectURL=="function")return jr.URL&&jr.URL.createObjectURL(Gn(xa()))||void 0;Ri.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var je="",Xe=xa();try{je=g5(Xe)}catch{je=g5(unescape(encodeURIComponent(Xe)))}return"data:application/pdf;filename="+ye.filename+";base64,"+je;case"pdfobjectnewwindow":if(Object.prototype.toString.call(jr)==="[object Window]"){var ut="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",_t=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ye.pdfObjectUrl&&(ut=ye.pdfObjectUrl,_t="");var Ut='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ut+'"'+_t+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ye)+");<\/script></body></html>",nr=jr.open();return nr!==null&&nr.document.write(Ut),nr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(jr)==="[object Window]"){var br='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ye.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ye.filename+'" width="500px" height="400px" /></body></html>',qr=jr.open();if(qr!==null){qr.document.write(br);var Qr=this;qr.document.documentElement.querySelector("#pdfViewer").onload=function(){qr.document.title=ye.filename,qr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Qr.output("bloburl"))}}return qr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(jr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ye)+'"></iframe></body></html>',St=jr.open();if(St!==null&&(St.document.write(tt),St.document.title=ye.filename),St||typeof safari>"u")return St;break;case"datauri":case"dataurl":return jr.document.location.href=this.output("datauristring",ye);default:return null}}),Io=function(V){return Array.isArray($n)===!0&&$n.indexOf(V)>-1};switch(n){case"pt":Ke=1;break;case"mm":Ke=72/25.4;break;case"cm":Ke=72/2.54;break;case"in":Ke=72;break;case"px":Ke=Io("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ke=12;break;case"ex":Ke=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ke=n}var Qi=null;oe(),W();var cs=function(V){return c!==null?Qi.encryptor(V,0):function(ye){return ye}},lr=A.__private__.getPageInfo=A.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ct[V].objId,pageNumber:V,pageContext:Ct[V]}},Fr=A.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ye in Ct)if(Ct[ye].objId===V)break;return lr(ye)},Ec=A.__private__.getCurrentPageInfo=A.getCurrentPageInfo=function(){return{objId:Ct[z].objId,pageNumber:z,pageContext:Ct[z]}};A.addPage=function(){return Wl.apply(this,arguments),this},A.setPage=function(){return xf.apply(this,arguments),se.call(this,Be[z]),this},A.insertPage=function(V){return this.addPage(),this.movePage(z,V),this},A.movePage=function(V,ye){var je,Xe;if(V>ye){je=Be[V],Xe=Ct[V];for(var ut=V;ut>ye;ut--)Be[ut]=Be[ut-1],Ct[ut]=Ct[ut-1];Be[ye]=je,Ct[ye]=Xe,this.setPage(ye)}else if(V<ye){je=Be[V],Xe=Ct[V];for(var _t=V;_t<ye;_t++)Be[_t]=Be[_t+1],Ct[_t]=Ct[_t+1];Be[ye]=je,Ct[ye]=Xe,this.setPage(ye)}return this},A.deletePage=function(){return yf.apply(this,arguments),this},A.__private__.text=A.text=function(V,ye,je,Xe,ut){var _t,Ut,nr,br,qr,Qr,tt,St,Yt,ur=(Xe=Xe||{}).scope||this;if(typeof V=="number"&&typeof ye=="number"&&(typeof je=="string"||Array.isArray(je))){var _r=je;je=ye,ye=V,V=_r}if(arguments[3]instanceof ir?(B("The transform parameter of text() with a Matrix value"),Yt=ut):(nr=arguments[4],br=arguments[5],oi(tt=arguments[3])==="object"&&tt!==null||(typeof nr=="string"&&(br=nr,nr=null),typeof tt=="string"&&(br=tt,tt=null),typeof tt=="number"&&(nr=tt,tt=null),Xe={flags:tt,angle:nr,align:br})),isNaN(ye)||isNaN(je)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return ur;var Gr="",$i=!1,Ni=typeof Xe.lineHeightFactor=="number"?Xe.lineHeightFactor:mr,Gi=ur.internal.scaleFactor;function Wa(un){return un=un.split("	").join(Array(Xe.TabLen||9).join(" ")),Ka(un,tt)}function ku(un){for(var Wn,Di=un.concat(),ca=[],eu=Di.length;eu--;)typeof(Wn=Di.shift())=="string"?ca.push(Wn):Array.isArray(un)&&(Wn.length===1||Wn[1]===void 0&&Wn[2]===void 0)?ca.push(Wn[0]):ca.push([Wn[0],Wn[1],Wn[2]]);return ca}function Ys(un,Wn){var Di;if(typeof un=="string")Di=Wn(un)[0];else if(Array.isArray(un)){for(var ca,eu,Ff=un.concat(),Eh=[],id=Ff.length;id--;)typeof(ca=Ff.shift())=="string"?Eh.push(Wn(ca)[0]):Array.isArray(ca)&&typeof ca[0]=="string"&&(eu=Wn(ca[0],ca[1],ca[2]),Eh.push([eu[0],eu[1],eu[2]]));Di=Eh}return Di}var Tc=!1,td=!0;if(typeof V=="string")Tc=!0;else if(Array.isArray(V)){var rd=V.concat();Ut=[];for(var Cf,Ya=rd.length;Ya--;)(typeof(Cf=rd.shift())!="string"||Array.isArray(Cf)&&typeof Cf[0]!="string")&&(td=!1);Tc=td}if(Tc===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var Sf=_e/ur.internal.scaleFactor,Bf=Sf*(Ni-1);switch(Xe.baseline){case"bottom":je-=Bf;break;case"top":je+=Sf-Bf;break;case"hanging":je+=Sf-2*Bf;break;case"middle":je+=Sf/2-Bf}if((Qr=Xe.maxWidth||0)>0&&(typeof V=="string"?V=ur.splitTextToSize(V,Qr):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function(un,Wn){return un.concat(ur.splitTextToSize(Wn,Qr))},[]))),_t={text:V,x:ye,y:je,options:Xe,mutex:{pdfEscape:Ka,activeFontKey:Ye,fonts:yt,activeFontSize:_e}},fn.publish("preProcessText",_t),V=_t.text,nr=(Xe=_t.options).angle,!(Yt instanceof ir)&&nr&&typeof nr=="number"){nr*=Math.PI/180,Xe.rotationDirection===0&&(nr=-nr),x===w.ADVANCED&&(nr=-nr);var wh=Math.cos(nr),Tf=Math.sin(nr);Yt=new ir(wh,Tf,-Tf,wh,0,0)}else nr&&nr instanceof ir&&(Yt=nr);x!==w.ADVANCED||Yt||(Yt=Zn),(qr=Xe.charSpace||Va)!==void 0&&(Gr+=I(N(qr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(St=Xe.horizontalScale)!==void 0&&(Gr+=I(100*St)+` Tz
`),Xe.lang;var Is=-1,Xp=Xe.renderingMode!==void 0?Xe.renderingMode:Xe.stroke,Nf=ur.internal.getCurrentPageInfo().pageContext;switch(Xp){case 0:case!1:case"fill":Is=0;break;case 1:case!0:case"stroke":Is=1;break;case 2:case"fillThenStroke":Is=2;break;case 3:case"invisible":Is=3;break;case 4:case"fillAndAddForClipping":Is=4;break;case 5:case"strokeAndAddPathForClipping":Is=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Is=6;break;case 7:case"addToPathForClipping":Is=7}var If=Nf.usedRenderingMode!==void 0?Nf.usedRenderingMode:-1;Is!==-1?Gr+=Is+` Tr
`:If!==-1&&(Gr+=`0 Tr
`),Is!==-1&&(Nf.usedRenderingMode=Is),br=Xe.align||"left";var rl,_h=_e*Ni,nd=ur.internal.pageSize.getWidth(),w0=yt[Ye];qr=Xe.charSpace||Va,Qr=Xe.maxWidth||0,tt=Object.assign({autoencode:!0,noBOM:!0},Xe.flags);var Nc=[],nl=function(un){return ur.getStringUnitWidth(un,{font:w0,charSpace:qr,fontSize:_e,doKerning:!1})*_e/Gi};if(Object.prototype.toString.call(V)==="[object Array]"){var Xs;Ut=ku(V),br!=="left"&&(rl=Ut.map(nl));var hs,wa=0;if(br==="right"){ye-=rl[0],V=[],Ya=Ut.length;for(var La=0;La<Ya;La++)La===0?(hs=Do(ye),Xs=Xi(je)):(hs=N(wa-rl[La]),Xs=-_h),V.push([Ut[La],hs,Xs]),wa=rl[La]}else if(br==="center"){ye-=rl[0]/2,V=[],Ya=Ut.length;for(var E=0;E<Ya;E++)E===0?(hs=Do(ye),Xs=Xi(je)):(hs=N((wa-rl[E])/2),Xs=-_h),V.push([Ut[E],hs,Xs]),wa=rl[E]}else if(br==="left"){V=[],Ya=Ut.length;for(var g=0;g<Ya;g++)V.push(Ut[g])}else if(br==="justify"&&w0.encoding==="Identity-H"){V=[],Ya=Ut.length,Qr=Qr!==0?Qr:nd;for(var m=0,_=0;_<Ya;_++)if(Xs=_===0?Xi(je):-_h,hs=_===0?Do(ye):m,_<Ya-1){var k=N((Qr-rl[_])/(Ut[_].split(" ").length-1)),j=Ut[_].split(" ");V.push([j[0]+" ",hs,Xs]),m=0;for(var ie=1;ie<j.length;ie++){var de=(nl(j[ie-1]+" "+j[ie])-nl(j[ie]))*Gi+k;ie==j.length-1?V.push([j[ie],de,0]):V.push([j[ie]+" ",de,0]),m-=de}}else V.push([Ut[_],hs,Xs]);V.push(["",m,0])}else{if(br!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],Ya=Ut.length,Qr=Qr!==0?Qr:nd,_=0;_<Ya;_++)Xs=_===0?Xi(je):-_h,hs=_===0?Do(ye):0,_<Ya-1?Nc.push(I(N((Qr-rl[_])/(Ut[_].split(" ").length-1)))):Nc.push(0),V.push([Ut[_],hs,Xs])}}var Te=typeof Xe.R2L=="boolean"?Xe.R2L:Ae;Te===!0&&(V=Ys(V,function(un,Wn,Di){return[un.split("").reverse().join(""),Wn,Di]})),_t={text:V,x:ye,y:je,options:Xe,mutex:{pdfEscape:Ka,activeFontKey:Ye,fonts:yt,activeFontSize:_e}},fn.publish("postProcessText",_t),V=_t.text,$i=_t.mutex.isHex||!1;var Pe=yt[Ye].encoding;Pe!=="WinAnsiEncoding"&&Pe!=="StandardEncoding"||(V=Ys(V,function(un,Wn,Di){return[Wa(un),Wn,Di]})),Ut=ku(V),V=[];for(var nt,ht,Ft,Zt=0,dr=1,Er=Array.isArray(Ut[0])?dr:Zt,ln="",xn=function(un,Wn,Di){var ca="";return Di instanceof ir?(Di=typeof Xe.angle=="number"?Dn(Di,new ir(1,0,0,1,un,Wn)):Dn(new ir(1,0,0,1,un,Wn),Di),x===w.ADVANCED&&(Di=Dn(new ir(1,0,0,-1,0,0),Di)),ca=Di.join(" ")+` Tm
`):ca=I(un)+" "+I(Wn)+` Td
`,ca},Sn=0;Sn<Ut.length;Sn++){switch(ln="",Er){case dr:Ft=($i?"<":"(")+Ut[Sn][0]+($i?">":")"),nt=parseFloat(Ut[Sn][1]),ht=parseFloat(Ut[Sn][2]);break;case Zt:Ft=($i?"<":"(")+Ut[Sn]+($i?">":")"),nt=Do(ye),ht=Xi(je)}Nc!==void 0&&Nc[Sn]!==void 0&&(ln=Nc[Sn]+` Tw
`),Sn===0?V.push(ln+xn(nt,ht,Yt)+Ft):Er===Zt?V.push(ln+Ft):Er===dr&&V.push(ln+xn(nt,ht,Yt)+Ft)}V=Er===Zt?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var ci=`BT
/`;return ci+=Ye+" "+_e+` Tf
`,ci+=I(_e*Ni)+` TL
`,ci+=Ws+`
`,ci+=Gr,ci+=V,Z(ci+="ET"),f[Ye]=!0,ur};var wf=A.__private__.clip=A.clip=function(V){return Z(V==="evenodd"?"W*":"W"),this};A.clipEvenOdd=function(){return wf("evenodd")},A.__private__.discardPath=A.discardPath=function(){return Z("n"),this};var Vs=A.__private__.isValidStyle=function(V){var ye=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(ye=!0),ye};A.__private__.setDefaultPathOperation=A.setDefaultPathOperation=function(V){return Vs(V)&&(u=V),this};var Fo=A.__private__.getStyle=A.getStyle=function(V){var ye=u;switch(V){case"D":case"S":ye="S";break;case"F":ye="f";break;case"FD":case"DF":ye="B";break;case"f":case"f*":case"B":case"B*":ye=V}return ye},Mo=A.close=function(){return Z("h"),this};A.stroke=function(){return Z("S"),this},A.fill=function(V){return Lo("f",V),this},A.fillEvenOdd=function(V){return Lo("f*",V),this},A.fillStroke=function(V){return Lo("B",V),this},A.fillStrokeEvenOdd=function(V){return Lo("B*",V),this};var Lo=function(V,ye){oi(ye)==="object"?ee(ye,V):Z(V)},yn=function(V){V===null||x===w.ADVANCED&&V===void 0||(V=Fo(V),Z(V))};function q(V,ye,je,Xe,ut){var _t=new _g(ye||this.boundingBox,je||this.xStep,Xe||this.yStep,this.gState,ut||this.matrix);_t.stream=this.stream;var Ut=V+"$$"+this.cloneIndex+++"$$";return Br(Ut,_t),_t}var ee=function(V,ye){var je=st[V.key],Xe=Ue[je];if(Xe instanceof yd)Z("q"),Z(ve(ye)),Xe.gState&&A.setGState(Xe.gState),Z(V.matrix.toString()+" cm"),Z("/"+je+" sh"),Z("Q");else if(Xe instanceof _g){var ut=new ir(1,0,0,-1,0,Jl());V.matrix&&(ut=ut.multiply(V.matrix||Zn),je=q.call(Xe,V.key,V.boundingBox,V.xStep,V.yStep,ut).id),Z("q"),Z("/Pattern cs"),Z("/"+je+" scn"),Xe.gState&&A.setGState(Xe.gState),Z(ye),Z("Q")}},ve=function(V){switch(V){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ne=A.moveTo=function(V,ye){return Z(I(N(V))+" "+I(L(ye))+" m"),this},We=A.lineTo=function(V,ye){return Z(I(N(V))+" "+I(L(ye))+" l"),this},at=A.curveTo=function(V,ye,je,Xe,ut,_t){return Z([I(N(V)),I(L(ye)),I(N(je)),I(L(Xe)),I(N(ut)),I(L(_t)),"c"].join(" ")),this};A.__private__.line=A.line=function(V,ye,je,Xe,ut){if(isNaN(V)||isNaN(ye)||isNaN(je)||isNaN(Xe)||!Vs(ut))throw new Error("Invalid arguments passed to jsPDF.line");return x===w.COMPAT?this.lines([[je-V,Xe-ye]],V,ye,[1,1],ut||"S"):this.lines([[je-V,Xe-ye]],V,ye,[1,1]).stroke()},A.__private__.lines=A.lines=function(V,ye,je,Xe,ut,_t){var Ut,nr,br,qr,Qr,tt,St,Yt,ur,_r,Gr,$i;if(typeof V=="number"&&($i=je,je=ye,ye=V,V=$i),Xe=Xe||[1,1],_t=_t||!1,isNaN(ye)||isNaN(je)||!Array.isArray(V)||!Array.isArray(Xe)||!Vs(ut)||typeof _t!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ne(ye,je),Ut=Xe[0],nr=Xe[1],qr=V.length,_r=ye,Gr=je,br=0;br<qr;br++)(Qr=V[br]).length===2?(_r=Qr[0]*Ut+_r,Gr=Qr[1]*nr+Gr,We(_r,Gr)):(tt=Qr[0]*Ut+_r,St=Qr[1]*nr+Gr,Yt=Qr[2]*Ut+_r,ur=Qr[3]*nr+Gr,_r=Qr[4]*Ut+_r,Gr=Qr[5]*nr+Gr,at(tt,St,Yt,ur,_r,Gr));return _t&&Mo(),yn(ut),this},A.path=function(V){for(var ye=0;ye<V.length;ye++){var je=V[ye],Xe=je.c;switch(je.op){case"m":Ne(Xe[0],Xe[1]);break;case"l":We(Xe[0],Xe[1]);break;case"c":at.apply(this,Xe);break;case"h":Mo()}}return this},A.__private__.rect=A.rect=function(V,ye,je,Xe,ut){if(isNaN(V)||isNaN(ye)||isNaN(je)||isNaN(Xe)||!Vs(ut))throw new Error("Invalid arguments passed to jsPDF.rect");return x===w.COMPAT&&(Xe=-Xe),Z([I(N(V)),I(L(ye)),I(N(je)),I(N(Xe)),"re"].join(" ")),yn(ut),this},A.__private__.triangle=A.triangle=function(V,ye,je,Xe,ut,_t,Ut){if(isNaN(V)||isNaN(ye)||isNaN(je)||isNaN(Xe)||isNaN(ut)||isNaN(_t)||!Vs(Ut))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[je-V,Xe-ye],[ut-je,_t-Xe],[V-ut,ye-_t]],V,ye,[1,1],Ut,!0),this},A.__private__.roundedRect=A.roundedRect=function(V,ye,je,Xe,ut,_t,Ut){if(isNaN(V)||isNaN(ye)||isNaN(je)||isNaN(Xe)||isNaN(ut)||isNaN(_t)||!Vs(Ut))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var nr=4/3*(Math.SQRT2-1);return ut=Math.min(ut,.5*je),_t=Math.min(_t,.5*Xe),this.lines([[je-2*ut,0],[ut*nr,0,ut,_t-_t*nr,ut,_t],[0,Xe-2*_t],[0,_t*nr,-ut*nr,_t,-ut,_t],[2*ut-je,0],[-ut*nr,0,-ut,-_t*nr,-ut,-_t],[0,2*_t-Xe],[0,-_t*nr,ut*nr,-_t,ut,-_t]],V+ut,ye,[1,1],Ut,!0),this},A.__private__.ellipse=A.ellipse=function(V,ye,je,Xe,ut){if(isNaN(V)||isNaN(ye)||isNaN(je)||isNaN(Xe)||!Vs(ut))throw new Error("Invalid arguments passed to jsPDF.ellipse");var _t=4/3*(Math.SQRT2-1)*je,Ut=4/3*(Math.SQRT2-1)*Xe;return Ne(V+je,ye),at(V+je,ye-Ut,V+_t,ye-Xe,V,ye-Xe),at(V-_t,ye-Xe,V-je,ye-Ut,V-je,ye),at(V-je,ye+Ut,V-_t,ye+Xe,V,ye+Xe),at(V+_t,ye+Xe,V+je,ye+Ut,V+je,ye),yn(ut),this},A.__private__.circle=A.circle=function(V,ye,je,Xe){if(isNaN(V)||isNaN(ye)||isNaN(je)||!Vs(Xe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,ye,je,je,Xe)},A.setFont=function(V,ye,je){return je&&(ye=S(ye,je)),Ye=wc(V,ye,{disableWarning:!1}),this};var Bt=A.__private__.getFont=A.getFont=function(){return yt[wc.apply(A,arguments)]};A.__private__.getFontList=A.getFontList=function(){var V,ye,je={};for(V in Ar)if(Ar.hasOwnProperty(V))for(ye in je[V]=[],Ar[V])Ar[V].hasOwnProperty(ye)&&je[V].push(ye);return je},A.addFont=function(V,ye,je,Xe,ut){var _t=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&_t.indexOf(arguments[3])!==-1?ut=arguments[3]:arguments[3]&&_t.indexOf(arguments[3])==-1&&(je=S(je,Xe)),ut=ut||"Identity-H",Cl.call(this,V,ye,je,ut)};var mr,Wr=r.lineWidth||.200025,Ur=A.__private__.getLineWidth=A.getLineWidth=function(){return Wr},xi=A.__private__.setLineWidth=A.setLineWidth=function(V){return Wr=V,Z(I(N(V))+" w"),this};A.__private__.setLineDash=Hr.API.setLineDash=Hr.API.setLineDashPattern=function(V,ye){if(V=V||[],ye=ye||0,isNaN(ye)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(je){return I(N(je))}).join(" "),ye=I(N(ye)),Z("["+V+"] "+ye+" d"),this};var la=A.__private__.getLineHeight=A.getLineHeight=function(){return _e*mr};A.__private__.getLineHeight=A.getLineHeight=function(){return _e*mr};var Ns=A.__private__.setLineHeightFactor=A.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(mr=V),this},Lu=A.__private__.getLineHeightFactor=A.getLineHeightFactor=function(){return mr};Ns(r.lineHeight);var Do=A.__private__.getHorizontalCoordinate=function(V){return N(V)},Xi=A.__private__.getVerticalCoordinate=function(V){return x===w.ADVANCED?V:Ct[z].mediaBox.topRightY-Ct[z].mediaBox.bottomLeftY-N(V)},Tl=A.__private__.getHorizontalCoordinateString=A.getHorizontalCoordinateString=function(V){return I(Do(V))},Xl=A.__private__.getVerticalCoordinateString=A.getVerticalCoordinateString=function(V){return I(Xi(V))},Ma=r.strokeColor||"0 G";A.__private__.getStrokeColor=A.getDrawColor=function(){return Oe(Ma)},A.__private__.setStrokeColor=A.setDrawColor=function(V,ye,je,Xe){return Ma=qe({ch1:V,ch2:ye,ch3:je,ch4:Xe,pdfColorType:"draw",precision:2}),Z(Ma),this};var bc=r.fillColor||"0 g";A.__private__.getFillColor=A.getFillColor=function(){return Oe(bc)},A.__private__.setFillColor=A.setFillColor=function(V,ye,je,Xe){return bc=qe({ch1:V,ch2:ye,ch3:je,ch4:Xe,pdfColorType:"fill",precision:2}),Z(bc),this};var Ws=r.textColor||"0 g",ed=A.__private__.getTextColor=A.getTextColor=function(){return Oe(Ws)};A.__private__.setTextColor=A.setTextColor=function(V,ye,je,Xe){return Ws=qe({ch1:V,ch2:ye,ch3:je,ch4:Xe,pdfColorType:"text",precision:3}),this};var Va=r.charSpace,_f=A.__private__.getCharSpace=A.getCharSpace=function(){return parseFloat(Va||0)};A.__private__.setCharSpace=A.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Va=V,this};var vh=0;A.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},A.__private__.setLineCap=A.setLineCap=function(V){var ye=A.CapJoinStyles[V];if(ye===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return vh=ye,Z(ye+" J"),this};var Cc=0;A.__private__.setLineJoin=A.setLineJoin=function(V){var ye=A.CapJoinStyles[V];if(ye===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Cc=ye,Z(ye+" j"),this},A.__private__.setLineMiterLimit=A.__private__.setMiterLimit=A.setLineMiterLimit=A.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(I(N(V))+" M"),this},A.GState=Cw,A.setGState=function(V){(V=typeof V=="string"?wt[Wt[V]]:Ef(null,V)).equals(rr)||(Z("/"+V.id+" gs"),rr=V)};var Ef=function(V,ye){if(!V||!Wt[V]){var je=!1;for(var Xe in wt)if(wt.hasOwnProperty(Xe)&&wt[Xe].equals(ye)){je=!0;break}if(je)ye=wt[Xe];else{var ut="GS"+(Object.keys(wt).length+1).toString(10);wt[ut]=ye,ye.id=ut}return V&&(Wt[V]=ye.id),fn.publish("addGState",ye),ye}};A.addGState=function(V,ye){return Ef(V,ye),this},A.saveGraphicsState=function(){return Z("q"),ce.push({key:Ye,size:_e,color:Ws}),this},A.restoreGraphicsState=function(){Z("Q");var V=ce.pop();return Ye=V.key,_e=V.size,Ws=V.color,rr=null,this},A.setCurrentTransformationMatrix=function(V){return Z(V.toString()+" cm"),this},A.comment=function(V){return Z("#"+V),this};var Sc=function(V,ye){var je=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return je},set:function(_t){isNaN(_t)||(je=parseFloat(_t))}});var Xe=ye||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Xe},set:function(_t){isNaN(_t)||(Xe=parseFloat(_t))}});var ut="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ut},set:function(_t){ut=_t.toString()}}),this},yh=function(V,ye,je,Xe){Sc.call(this,V,ye),this.type="rect";var ut=je||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ut},set:function(Ut){isNaN(Ut)||(ut=parseFloat(Ut))}});var _t=Xe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return _t},set:function(Ut){isNaN(Ut)||(_t=parseFloat(Ut))}}),this},xh=function(){this.page=wr,this.currentPage=z,this.pages=Be.slice(0),this.pagesContext=Ct.slice(0),this.x=mt,this.y=vt,this.matrix=Dt,this.width=Zl(z),this.height=Jl(z),this.outputDestination=Ve,this.id="",this.objectNumber=-1};xh.prototype.restore=function(){wr=this.page,z=this.currentPage,Ct=this.pagesContext,Be=this.pages,mt=this.x,vt=this.y,Dt=this.matrix,Bc(z,this.width),Du(z,this.height),Ve=this.outputDestination};var bf=function(V,ye,je,Xe,ut){Kn.push(new xh),wr=z=0,Be=[],mt=V,vt=ye,Dt=ut,tl([je,Xe])},Nl=function(V){if(Ln[V])Kn.pop().restore();else{var ye=new xh,je="Xo"+(Object.keys(Tt).length+1).toString(10);ye.id=je,Ln[V]=je,Tt[je]=ye,fn.publish("addFormObject",ye),Kn.pop().restore()}};for(var ua in A.beginFormObject=function(V,ye,je,Xe,ut){return bf(V,ye,je,Xe,ut),this},A.endFormObject=function(V){return Nl(V),this},A.doFormObject=function(V,ye){var je=Tt[Ln[V]];return Z("q"),Z(ye.toString()+" cm"),Z("/"+je.id+" Do"),Z("Q"),this},A.getFormObject=function(V){var ye=Tt[Ln[V]];return{x:ye.x,y:ye.y,width:ye.width,height:ye.height,matrix:ye.matrix}},A.save=function(V,ye){return V=V||"generated.pdf",(ye=ye||{}).returnPromise=ye.returnPromise||!1,ye.returnPromise===!1?(gd(Gn(xa()),V),typeof gd.unload=="function"&&jr.setTimeout&&setTimeout(gd.unload,911),this):new Promise(function(je,Xe){try{var ut=gd(Gn(xa()),V);typeof gd.unload=="function"&&jr.setTimeout&&setTimeout(gd.unload,911),je(ut)}catch(_t){Xe(_t.message)}})},Hr.API)Hr.API.hasOwnProperty(ua)&&(ua==="events"&&Hr.API.events.length?function(V,ye){var je,Xe,ut;for(ut=ye.length-1;ut!==-1;ut--)je=ye[ut][0],Xe=ye[ut][1],V.subscribe.apply(V,[je].concat(typeof Xe=="function"?[Xe]:Xe))}(fn,Hr.API.events):A[ua]=Hr.API[ua]);var Zl=A.getPageWidth=function(V){return(Ct[V=V||z].mediaBox.topRightX-Ct[V].mediaBox.bottomLeftX)/Ke},Bc=A.setPageWidth=function(V,ye){Ct[V].mediaBox.topRightX=ye*Ke+Ct[V].mediaBox.bottomLeftX},Jl=A.getPageHeight=function(V){return(Ct[V=V||z].mediaBox.topRightY-Ct[V].mediaBox.bottomLeftY)/Ke},Du=A.setPageHeight=function(V,ye){Ct[V].mediaBox.topRightY=ye*Ke+Ct[V].mediaBox.bottomLeftY};return A.internal={pdfEscape:Ka,getStyle:Fo,getFont:Bt,getFontSize:be,getCharSpace:_f,getTextColor:ed,getLineHeight:la,getLineHeightFactor:Lu,getLineWidth:Ur,write:he,getHorizontalCoordinate:Do,getVerticalCoordinate:Xi,getCoordinateString:Tl,getVerticalCoordinateString:Xl,collections:{},newObject:Pr,newAdditionalObject:ze,newObjectDeferred:tn,newObjectDeferredBegin:Ee,getFilters:ct,putStream:xt,events:fn,scaleFactor:Ke,pageSize:{getWidth:function(){return Zl(z)},setWidth:function(V){Bc(z,V)},getHeight:function(){return Jl(z)},setHeight:function(V){Du(z,V)}},encryptionOptions:c,encryption:Qi,getEncryptor:cs,output:Yi,getNumberOfPages:mh,pages:Be,out:Z,f2:M,f3:F,getPageInfo:lr,getPageInfoByObjId:Fr,getCurrentPageInfo:Ec,getPDFVersion:p,Point:Sc,Rectangle:yh,Matrix:ir,hasHotfix:Io},Object.defineProperty(A.internal.pageSize,"width",{get:function(){return Zl(z)},set:function(V){Bc(z,V)},enumerable:!0,configurable:!0}),Object.defineProperty(A.internal.pageSize,"height",{get:function(){return Jl(z)},set:function(V){Du(z,V)},enumerable:!0,configurable:!0}),Sl.call(A,ae),Ye="F1",Wl(i,t),fn.publish("initialized"),A}ug.prototype.lsbFirstWord=function(r){return String.fromCharCode(r>>0&255,r>>8&255,r>>16&255,r>>24&255)},ug.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ug.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},ug.prototype.processOwnerPassword=function(r,e){return m5(p5(e).substr(0,5),r)},ug.prototype.encryptor=function(r,e){var t=p5(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return m5(t,n)}},Cw.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||oi(r)!==oi(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},Hr.API={events:[]},Hr.version="2.5.2";var da=Hr.API,ZB=1,l0=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},q0=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},rn=function(r){return r.toFixed(2)},Jf=function(r){return r.toFixed(5)};da.__acroform__={};var bl=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},$M=function(r){return r*ZB},Pc=function(r){var e=new aQ,t=xr.internal.getHeight(r)||0,n=xr.internal.getWidth(r)||0;return e.BBox=[0,0,Number(rn(n)),Number(rn(t))],e},T1e=da.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|=1<<e},N1e=da.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&=~(1<<e)},I1e=da.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},Sa=da.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return I1e(r,e-1)},Ba=da.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return T1e(r,e-1)},Ta=da.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return N1e(r,e-1)},F1e=da.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=r[0],a=r[1],s=r[2],o=r[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=n(a+o)||0,l.upperRight_X=t(i+s)||0,l.upperRight_Y=n(a)||0,[Number(rn(l.lowerLeft_X)),Number(rn(l.lowerLeft_Y)),Number(rn(l.upperRight_X)),Number(rn(l.upperRight_Y))]},M1e=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=v5(r,t),i=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+i+" "+rn(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Pc(r);return a.scope=r.scope,a.stream=e.join(`
`),a}},v5=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=r.multiline?i.map(function(F){return F.split(`
`)}):i.map(function(F){return[F]});var a=t,s=xr.internal.getHeight(r)||0;s=s<0?-s:s;var o=xr.internal.getWidth(r)||0;o=o<0?-o:o;var l=function(F,N,O){if(F+1<i.length){var L=N+" "+i[F+1][0];return N2(L,r,O).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var u,c,h=N2("3",r,a).height,f=r.multiline?s-a:(s-h)/2,A=f+=2,d=0,p=0,y=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+N2(e,r,a=12).width+", FieldWidth:"+o+`
`;break}for(var v="",w=0,x=0;x<i.length;x++)if(i.hasOwnProperty(x)){var b=!1;if(i[x].length!==1&&y!==i[x].length-1){if((h+2)*(w+2)+2>s)continue e;v+=i[x][y],b=!0,p=x,x--}else{v=(v+=i[x][y]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var C=parseInt(x),S=l(C,v,a),I=x>=i.length-1;if(S&&!I){v+=" ",y=0;continue}if(S||I){if(I)p=C;else if(r.multiline&&(h+2)*(w+2)+2>s)continue e}else{if(!r.multiline||(h+2)*(w+2)+2>s)continue e;p=C}}for(var B="",T=d;T<=p;T++){var M=i[T];if(r.multiline){if(T===p){B+=M[y]+" ",y=(y+1)%M.length;continue}if(T===d){B+=M[M.length-1]+" ";continue}}B+=M[0]+" "}switch(B=B.substr(B.length-1)==" "?B.substr(0,B.length-1):B,c=N2(B,r,a).width,r.textAlign){case"right":u=o-c-2;break;case"center":u=(o-c)/2;break;case"left":default:u=2}e+=rn(u)+" "+rn(A)+` Td
`,e+="("+l0(B)+`) Tj
`,e+=-rn(u)+` 0 Td
`,A=-(a+2),c=0,d=b?p:p+1,w++,v=""}break}return n.text=e,n.fontSize=a,n},N2=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},L1e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},D1e=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},k1e=function(r,e){for(var t in r)if(r.hasOwnProperty(t)){var n=t,i=r[t];e.internal.newObjectDeferredBegin(i.objId,!0),oi(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete r[n]}},R1e=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(hc.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(L1e)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");ZB=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new sQ,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a.objId=void 0,a.hasAnnotation&&D1e(a,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,i){var a=!n;for(var s in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(s)){var o=n[s],l=[],u=o.Rect;if(o.Rect&&(o.Rect=F1e(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=xr.createDefaultAppearanceStream(o),oi(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var c=M1e(o);l.push({key:"AP",value:"<</N "+c+">>"}),i.internal.acroformPlugin.xForms.push(c)}if(o.appearanceStreamContent){var h="";for(var f in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(f)){var A=o.appearanceStreamContent[f];if(h+="/"+f+" ",h+="<<",Object.keys(A).length>=1||Array.isArray(A)){for(var s in A)if(A.hasOwnProperty(s)){var d=A[s];typeof d=="function"&&(d=d.call(i,o)),h+="/"+s+" "+d+" ",i.internal.acroformPlugin.xForms.indexOf(d)>=0||i.internal.acroformPlugin.xForms.push(d)}}else typeof(d=A)=="function"&&(d=d.call(i,o)),h+="/"+s+" "+d,i.internal.acroformPlugin.xForms.indexOf(d)>=0||i.internal.acroformPlugin.xForms.push(d);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}a&&k1e(i.internal.acroformPlugin.xForms,i)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},iQ=da.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(s){return s};if(Array.isArray(r)){for(var i="[",a=0;a<r.length;a++)switch(a!==0&&(i+=" "),oi(r[a])){case"boolean":case"number":case"object":i+=r[a].toString();break;case"string":r[a].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),i+="("+l0(n(r[a].toString()))+")"):i+=r[a].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},pC=function(r,e,t){var n=function(i){return i};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),r="("+l0(n(r))+")"},Wc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Wc.prototype.toString=function(){return this.objId+" 0 R"},Wc.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Wc.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],i=this[n];i&&(Array.isArray(i)?r.push({key:n,value:iQ(i,this.objId,this.scope)}):i instanceof Wc?(i.scope=this.scope,r.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&r.push({key:n,value:i}))}return r};var aQ=function(){Wc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};bl(aQ,Wc);var sQ=function(){Wc.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+l0(t(r))+")"}},set:function(t){r=t}})};bl(sQ,Wc);var hc=function r(){Wc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');e=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Sa(e,3)},set:function(v){v?this.F=Ba(e,3):this.F=Ta(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');t=v}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(v){n=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(v){n[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(v){n[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(v){n[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(v){n[3]=v}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Sw)return;a="FieldObject"+r.FieldNum++}var v=function(w){return w};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+l0(v(a))+")"},set:function(v){a=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(v){a=v}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(v){s=v}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/ZB:u},set:function(v){u=v}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Sw||this instanceof Ld))return pC(h,this.objId,this.scope)},set:function(v){v=v.toString(),h=v}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof xs?f:pC(f,this.objId,this.scope)},set:function(v){v=v.toString(),f=this instanceof xs?v:v.substr(0,1)==="("?q0(v.substr(1,v.length-2)):q0(v)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof xs?q0(f.substr(1,f.length-1)):f},set:function(v){v=v.toString(),f=this instanceof xs?"/"+v:v}});var A=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(A)return A},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof xs?A:pC(A,this.objId,this.scope)},set:function(v){v=v.toString(),A=this instanceof xs?v:v.substr(0,1)==="("?q0(v.substr(1,v.length-2)):q0(v)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof xs?q0(A.substr(1,A.length-1)):A},set:function(v){v=v.toString(),A=this instanceof xs?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var d,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(v){v=!!v,p=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(d)return d},set:function(v){d=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,1)},set:function(v){v?this.Ff=Ba(this.Ff,1):this.Ff=Ta(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,2)},set:function(v){v?this.Ff=Ba(this.Ff,2):this.Ff=Ta(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,3)},set:function(v){v?this.Ff=Ba(this.Ff,3):this.Ff=Ta(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');y=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(y){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:y=2;break;case"center":case 1:y=1;break;case"left":case 0:default:y=0}}})};bl(hc,Wc);var Rg=function(){hc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return iQ(e,this.objId,this.scope)},set:function(t){var n,i;i=[],typeof(n=t)=="string"&&(i=function(a,s,o){o||(o=1);for(var l,u=[];l=s.exec(a);)u.push(l[o]);return u}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,18)},set:function(t){t?this.Ff=Ba(this.Ff,18):this.Ff=Ta(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Ba(this.Ff,19):this.Ff=Ta(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,20)},set:function(t){t?(this.Ff=Ba(this.Ff,20),e.sort()):this.Ff=Ta(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,22)},set:function(t){t?this.Ff=Ba(this.Ff,22):this.Ff=Ta(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,23)},set:function(t){t?this.Ff=Ba(this.Ff,23):this.Ff=Ta(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,27)},set:function(t){t?this.Ff=Ba(this.Ff,27):this.Ff=Ta(this.Ff,27)}}),this.hasAppearanceStream=!1};bl(Rg,hc);var Og=function(){Rg.call(this),this.fontName="helvetica",this.combo=!1};bl(Og,Rg);var Pg=function(){Og.call(this),this.combo=!0};bl(Pg,Og);var fx=function(){Pg.call(this),this.edit=!0};bl(fx,Pg);var xs=function(){hc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,15)},set:function(t){t?this.Ff=Ba(this.Ff,15):this.Ff=Ta(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,16)},set:function(t){t?this.Ff=Ba(this.Ff,16):this.Ff=Ta(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,17)},set:function(t){t?this.Ff=Ba(this.Ff,17):this.Ff=Ta(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,26)},set:function(t){t?this.Ff=Ba(this.Ff,26):this.Ff=Ta(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+l0(t(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){oi(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};bl(xs,hc);var Ax=function(){xs.call(this),this.pushButton=!0};bl(Ax,xs);var Ug=function(){xs.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};bl(Ug,xs);var Sw=function(){var r,e;hc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,s=[];for(a in s.push("<<"),n)s.push("/"+a+" ("+l0(i(n[a]))+")");return s.push(">>"),s.join(`
`)},set:function(i){oi(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=xr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};bl(Sw,hc),Ug.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},Ug.prototype.createOption=function(r){var e=new Sw;return e.Parent=this,e.optionName=r,this.Kids.push(e),O1e.call(this.scope,e),e};var dx=function(){xs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=xr.CheckBox.createAppearanceStream()};bl(dx,xs);var Ld=function(){hc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,13)},set:function(e){e?this.Ff=Ba(this.Ff,13):this.Ff=Ta(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,21)},set:function(e){e?this.Ff=Ba(this.Ff,21):this.Ff=Ta(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,23)},set:function(e){e?this.Ff=Ba(this.Ff,23):this.Ff=Ta(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,24)},set:function(e){e?this.Ff=Ba(this.Ff,24):this.Ff=Ta(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,25)},set:function(e){e?this.Ff=Ba(this.Ff,25):this.Ff=Ta(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,26)},set:function(e){e?this.Ff=Ba(this.Ff,26):this.Ff=Ta(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};bl(Ld,hc);var gx=function(){Ld.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,14)},set:function(r){r?this.Ff=Ba(this.Ff,14):this.Ff=Ta(this.Ff,14)}}),this.password=!0};bl(gx,Ld);var xr={CheckBox:{createAppearanceStream:function(){return{N:{On:xr.CheckBox.YesNormal},D:{On:xr.CheckBox.YesPushDown,Off:xr.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=Pc(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),a=v5(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+rn(xr.internal.getWidth(r))+" "+rn(xr.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+rn(a.fontSize)+" Tf "+i),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=Pc(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),i=[],a=xr.internal.getHeight(r),s=xr.internal.getWidth(r),o=v5(r,r.caption);return i.push("1 g"),i.push("0 0 "+rn(s)+" "+rn(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+rn(s-1)+" "+rn(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+rn(o.fontSize)+" Tf "+n),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(r){var e=Pc(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+rn(xr.internal.getWidth(r))+" "+rn(xr.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:xr.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=xr.RadioButton.Circle.YesNormal,e.D[r]=xr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=Pc(r);e.scope=r.scope;var t=[],n=xr.internal.getWidth(r)<=xr.internal.getHeight(r)?xr.internal.getWidth(r)/4:xr.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=xr.internal.Bezier_C,a=Number((n*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Jf(xr.internal.getWidth(r)/2)+" "+Jf(xr.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),t.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),t.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),t.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Pc(r);e.scope=r.scope;var t=[],n=xr.internal.getWidth(r)<=xr.internal.getHeight(r)?xr.internal.getWidth(r)/4:xr.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*xr.internal.Bezier_C).toFixed(5)),s=Number((n*xr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Jf(xr.internal.getWidth(r)/2)+" "+Jf(xr.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Jf(xr.internal.getWidth(r)/2)+" "+Jf(xr.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),t.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),t.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),t.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=Pc(r);e.scope=r.scope;var t=[],n=xr.internal.getWidth(r)<=xr.internal.getHeight(r)?xr.internal.getWidth(r)/4:xr.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*xr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Jf(xr.internal.getWidth(r)/2)+" "+Jf(xr.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:xr.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=xr.RadioButton.Cross.YesNormal,e.D[r]=xr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=Pc(r);e.scope=r.scope;var t=[],n=xr.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+rn(xr.internal.getWidth(r)-2)+" "+rn(xr.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(rn(n.x1.x)+" "+rn(n.x1.y)+" m"),t.push(rn(n.x2.x)+" "+rn(n.x2.y)+" l"),t.push(rn(n.x4.x)+" "+rn(n.x4.y)+" m"),t.push(rn(n.x3.x)+" "+rn(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Pc(r);e.scope=r.scope;var t=xr.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+rn(xr.internal.getWidth(r))+" "+rn(xr.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+rn(xr.internal.getWidth(r)-2)+" "+rn(xr.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(rn(t.x1.x)+" "+rn(t.x1.y)+" m"),n.push(rn(t.x2.x)+" "+rn(t.x2.y)+" l"),n.push(rn(t.x4.x)+" "+rn(t.x4.y)+" m"),n.push(rn(t.x3.x)+" "+rn(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=Pc(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+rn(xr.internal.getWidth(r))+" "+rn(xr.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};xr.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=xr.internal.getWidth(r),t=xr.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},xr.internal.getWidth=function(r){var e=0;return oi(r)==="object"&&(e=$M(r.Rect[2])),e},xr.internal.getHeight=function(r){var e=0;return oi(r)==="object"&&(e=$M(r.Rect[3])),e};var O1e=da.addField=function(r){if(R1e(this,r),!(r instanceof hc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};da.AcroFormChoiceField=Rg,da.AcroFormListBox=Og,da.AcroFormComboBox=Pg,da.AcroFormEditBox=fx,da.AcroFormButton=xs,da.AcroFormPushButton=Ax,da.AcroFormRadioButton=Ug,da.AcroFormCheckBox=dx,da.AcroFormTextField=Ld,da.AcroFormPasswordField=gx,da.AcroFormAppearance=xr,da.AcroForm={ChoiceField:Rg,ListBox:Og,ComboBox:Pg,EditBox:fx,Button:xs,PushButton:Ax,RadioButton:Ug,CheckBox:dx,TextField:Ld,PasswordField:gx,Appearance:xr},Hr.AcroForm={ChoiceField:Rg,ListBox:Og,ComboBox:Pg,EditBox:fx,Button:xs,PushButton:Ax,RadioButton:Ug,CheckBox:dx,TextField:Ld,PasswordField:gx,Appearance:xr};Hr.AcroForm;function oQ(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){r.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=r.__addimage__.getImageFileTypeByImageData=function(F,N){var O,L,G,R,U,W=e;if((N=N||e)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(S(F))for(U in t)for(G=t[U],O=0;O<G.length;O+=1){for(R=!0,L=0;L<G[O].length;L+=1)if(G[O][L]!==void 0&&G[O][L]!==F[L]){R=!1;break}if(R===!0){W=U;break}}else for(U in t)for(G=t[U],O=0;O<G.length;O+=1){for(R=!0,L=0;L<G[O].length;L+=1)if(G[O][L]!==void 0&&G[O][L]!==F.charCodeAt(L)){R=!1;break}if(R===!0){W=U;break}}return W===e&&N!==e&&(W=N),W},i=function F(N){for(var O=this.internal.write,L=this.internal.putStream,G=(0,this.internal.getFilters)();G.indexOf("FlateEncode")!==-1;)G.splice(G.indexOf("FlateEncode"),1);N.objectId=this.internal.newObject();var R=[];if(R.push({key:"Type",value:"/XObject"}),R.push({key:"Subtype",value:"/Image"}),R.push({key:"Width",value:N.width}),R.push({key:"Height",value:N.height}),N.colorSpace===y.INDEXED?R.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(N.palette.length/3-1)+" "+("sMask"in N&&N.sMask!==void 0?N.objectId+2:N.objectId+1)+" 0 R]"}):(R.push({key:"ColorSpace",value:"/"+N.colorSpace}),N.colorSpace===y.DEVICE_CMYK&&R.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),R.push({key:"BitsPerComponent",value:N.bitsPerComponent}),"decodeParameters"in N&&N.decodeParameters!==void 0&&R.push({key:"DecodeParms",value:"<<"+N.decodeParameters+">>"}),"transparency"in N&&Array.isArray(N.transparency)){for(var U="",W=0,Q=N.transparency.length;W<Q;W++)U+=N.transparency[W]+" "+N.transparency[W]+" ";R.push({key:"Mask",value:"["+U+"]"})}N.sMask!==void 0&&R.push({key:"SMask",value:N.objectId+1+" 0 R"});var re=N.filter!==void 0?["/"+N.filter]:void 0;if(L({data:N.data,additionalKeyValues:R,alreadyAppliedFilters:re,objectId:N.objectId}),O("endobj"),"sMask"in N&&N.sMask!==void 0){var oe="/Predictor "+N.predictor+" /Colors 1 /BitsPerComponent "+N.bitsPerComponent+" /Columns "+N.width,P={width:N.width,height:N.height,colorSpace:"DeviceGray",bitsPerComponent:N.bitsPerComponent,decodeParameters:oe,data:N.sMask};"filter"in N&&(P.filter=N.filter),F.call(this,P)}if(N.colorSpace===y.INDEXED){var z=this.internal.newObject();L({data:B(new Uint8Array(N.palette)),objectId:z}),O("endobj")}},a=function(){var F=this.internal.collections.addImage_images;for(var N in F)i.call(this,F[N])},s=function(){var F,N=this.internal.collections.addImage_images,O=this.internal.write;for(var L in N)O("/I"+(F=N[L]).index,F.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var F=this.internal.collections.addImage_images;return o.call(this),F},u=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(F){return typeof r["process"+F.toUpperCase()]=="function"},h=function(F){return oi(F)==="object"&&F.nodeType===1},f=function(F,N){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var O=""+F.getAttribute("src");if(O.indexOf("data:image/")===0)return Ev(unescape(O).split("base64,").pop());var L=r.loadFile(O,!0);if(L!==void 0)return L}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var G;switch(N){case"PNG":G="image/png";break;case"WEBP":G="image/webp";break;case"JPEG":case"JPG":default:G="image/jpeg"}return Ev(F.toDataURL(G,1).split("base64,").pop())}},A=function(F){var N=this.internal.collections.addImage_images;if(N){for(var O in N)if(F===N[O].alias)return N[O]}},d=function(F,N,O){return F||N||(F=-96,N=-96),F<0&&(F=-1*O.width*72/F/this.internal.scaleFactor),N<0&&(N=-1*O.height*72/N/this.internal.scaleFactor),F===0&&(F=N*O.width/O.height),N===0&&(N=F*O.height/O.width),[F,N]},p=function(F,N,O,L,G,R){var U=d.call(this,O,L,G),W=this.internal.getCoordinateString,Q=this.internal.getVerticalCoordinateString,re=l.call(this);if(O=U[0],L=U[1],re[G.index]=G,R){R*=Math.PI/180;var oe=Math.cos(R),P=Math.sin(R),z=function(J){return J.toFixed(4)},K=[z(oe),z(P),z(-1*P),z(oe),0,0,"cm"]}this.internal.write("q"),R?(this.internal.write([1,"0","0",1,W(F),Q(N+L),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([W(O),"0","0",W(L),"0","0","cm"].join(" "))):this.internal.write([W(O),"0","0",W(L),W(F),Q(N+L),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+G.index+" Do"),this.internal.write("Q")},y=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=r.__addimage__.sHashCode=function(F){var N,O,L=0;if(typeof F=="string")for(O=F.length,N=0;N<O;N++)L=(L<<5)-L+F.charCodeAt(N),L|=0;else if(S(F))for(O=F.byteLength/2,N=0;N<O;N++)L=(L<<5)-L+F[N],L|=0;return L},x=r.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var N=!0;return F.length===0&&(N=!1),F.length%4!=0&&(N=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(N=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(N=!1),N},b=r.__addimage__.extractImageFromDataUrl=function(F){var N=(F=F||"").split("base64,"),O=null;if(N.length===2){var L=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(N[0]);Array.isArray(L)&&(O={mimeType:L[1],charset:L[2],data:N[1]})}return O},C=r.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};r.__addimage__.isArrayBuffer=function(F){return C()&&F instanceof ArrayBuffer};var S=r.__addimage__.isArrayBufferView=function(F){return C()&&typeof Uint32Array<"u"&&(F instanceof Int8Array||F instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array)},I=r.__addimage__.binaryStringToUint8Array=function(F){for(var N=F.length,O=new Uint8Array(N),L=0;L<N;L++)O[L]=F.charCodeAt(L);return O},B=r.__addimage__.arrayBufferToBinaryString=function(F){for(var N="",O=S(F)?F:new Uint8Array(F),L=0;L<O.length;L+=8192)N+=String.fromCharCode.apply(null,O.subarray(L,L+8192));return N};r.addImage=function(){var F,N,O,L,G,R,U,W,Q;if(typeof arguments[1]=="number"?(N=e,O=arguments[1],L=arguments[2],G=arguments[3],R=arguments[4],U=arguments[5],W=arguments[6],Q=arguments[7]):(N=arguments[1],O=arguments[2],L=arguments[3],G=arguments[4],R=arguments[5],U=arguments[6],W=arguments[7],Q=arguments[8]),oi(F=arguments[0])==="object"&&!h(F)&&"imageData"in F){var re=F;F=re.imageData,N=re.format||N||e,O=re.x||O||0,L=re.y||L||0,G=re.w||re.width||G,R=re.h||re.height||R,U=re.alias||U,W=re.compression||W,Q=re.rotation||re.angle||Q}var oe=this.internal.getFilters();if(W===void 0&&oe.indexOf("FlateEncode")!==-1&&(W="SLOW"),isNaN(O)||isNaN(L))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var P=T.call(this,F,N,U,W);return p.call(this,O,L,G,R,P,Q),this};var T=function(F,N,O,L){var G,R,U;if(typeof F=="string"&&n(F)===e){F=unescape(F);var W=M(F,!1);(W!==""||(W=r.loadFile(F,!0))!==void 0)&&(F=W)}if(h(F)&&(F=f(F,N)),N=n(F,N),!c(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(((U=O)==null||U.length===0)&&(O=function(Q){return typeof Q=="string"||S(Q)?w(Q):S(Q.data)?w(Q.data):null}(F)),(G=A.call(this,O))||(C()&&(F instanceof Uint8Array||N==="RGBA"||(R=F,F=I(F))),G=this["process"+N.toUpperCase()](F,u.call(this),O,function(Q){return Q&&typeof Q=="string"&&(Q=Q.toUpperCase()),Q in r.image_compression?Q:v.NONE}(L),R)),!G)throw new Error("An unknown error occurred whilst processing the image.");return G},M=r.__addimage__.convertBase64ToBinaryString=function(F,N){var O;N=typeof N!="boolean"||N;var L,G="";if(typeof F=="string"){L=(O=b(F))!==null?O.data:F;try{G=Ev(L)}catch(R){if(N)throw x(L)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+R.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return G};r.getImageProperties=function(F){var N,O,L="";if(h(F)&&(F=f(F)),typeof F=="string"&&n(F)===e&&((L=M(F,!1))===""&&(L=r.loadFile(F)||""),F=L),O=n(F),!c(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(!C()||F instanceof Uint8Array||(F=I(F)),!(N=this["process"+O.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return N.fileType=O,N}})(Hr.API),function(r){var e=function(t){if(t!==void 0&&t!="")return!0};Hr.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,i,a,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,c=!1,h=0;h<u.length&&!c;h++)switch((n=u[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var f=0;f<u.length;f++){n=u[f];var A=this.internal.pdfEscape,d=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(p.objId),w=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+A(v(n.contents))+")",a+=" /Popup "+y.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+A(v(w))+") >>",p.content=a;var x=p.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+x,n.open&&(a+=" /Open true"),a+=" >>",y.content=a,this.internal.write(p.objId,"0 R",y.objId,"0 R");break;case"freetext":i="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var b=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+A(d(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+b+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var C=this.annotations._nameMap[n.options.name];n.options.pageNumber=C.page,n.options.top=C.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+A(d(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var S=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+S+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,i,a,s){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(t),y:u(n),w:l(t+i),h:u(n+a)},options:s,type:"link"})},r.textWithLink=function(t,n,i,a){var s,o,l=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var c=this.splitTextToSize(t,o).length;s=Math.ceil(u*c)}else o=l,s=u;return this.text(t,n,i,a),i+=.2*u,a.align==="center"&&(n-=l/2),a.align==="right"&&(n-=l),this.link(n,i-u,o,s,a),l},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}}(Hr.API),function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];r.__arabicParser__={};var a=r.__arabicParser__.isInArabicSubstitutionA=function(p){return e[p.charCodeAt(0)]!==void 0},s=r.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},o=r.__arabicParser__.isArabicEndLetter=function(p){return s(p)&&a(p)&&e[p.charCodeAt(0)].length<=2},l=r.__arabicParser__.isArabicAlfLetter=function(p){return s(p)&&i.indexOf(p.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return s(p)&&a(p)&&e[p.charCodeAt(0)].length>=1};var u=r.__arabicParser__.arabicLetterHasFinalForm=function(p){return s(p)&&a(p)&&e[p.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(p){return s(p)&&a(p)&&e[p.charCodeAt(0)].length>=3};var c=r.__arabicParser__.arabicLetterHasMedialForm=function(p){return s(p)&&a(p)&&e[p.charCodeAt(0)].length==4},h=r.__arabicParser__.resolveLigatures=function(p){var y=0,v=t,w="",x=0;for(y=0;y<p.length;y+=1)v[p.charCodeAt(y)]!==void 0?(x++,typeof(v=v[p.charCodeAt(y)])=="number"&&(w+=String.fromCharCode(v),v=t,x=0),y===p.length-1&&(v=t,w+=p.charAt(y-(x-1)),y-=x-1,x=0)):(v=t,w+=p.charAt(y-x),y-=x,x=0);return w};r.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var f=r.__arabicParser__.getCorrectForm=function(p,y,v){return s(p)?a(p)===!1?-1:!u(p)||!s(y)&&!s(v)||!s(v)&&o(y)||o(p)&&!s(y)||o(p)&&l(y)||o(p)&&o(y)?0:c(p)&&s(y)&&!o(y)&&s(v)&&u(v)?3:o(p)||!s(v)?1:2:-1},A=function(p){var y=0,v=0,w=0,x="",b="",C="",S=(p=p||"").split("\\s+"),I=[];for(y=0;y<S.length;y+=1){for(I.push(""),v=0;v<S[y].length;v+=1)x=S[y][v],b=S[y][v-1],C=S[y][v+1],s(x)?(w=f(x,b,C),I[y]+=w!==-1?String.fromCharCode(e[x.charCodeAt(0)][w]):x):I[y]+=x;I[y]=h(I[y])}return I.join(" ")},d=r.__arabicParser__.processArabic=r.processArabic=function(){var p,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(y)){var w=0;for(v=[],w=0;w<y.length;w+=1)Array.isArray(y[w])?v.push([A(y[w][0]),y[w][1],y[w][2]]):v.push([A(y[w])]);p=v}else p=A(y);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};r.events.push(["preProcessText",d])}(Hr.API),Hr.API.autoPrint=function(r){var e;switch((r=r||{}).variant=r.variant||"non-conform",r.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var i;if((t=t||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Hr.API),function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(p){l=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var A=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return A},set:function(p){A=p}});var d=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return d},set:function(p){d=p}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},r.getTextDimensions=function(l,u){n.call(this);var c=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),f=u.scaleFactor||this.internal.scaleFactor,A=0,d=0,p=0,y=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var v=u.maxWidth;v>0?typeof l=="string"?l=this.splitTextToSize(l,v):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(x,b){return x.concat(y.splitTextToSize(b,v))},[])):l=Array.isArray(l)?l:[l];for(var w=0;w<l.length;w++)A<(p=this.getStringUnitWidth(l[w],{font:h})*c)&&(A=p);return A!==0&&(d=l.length),{w:A/=f,h:Math.max((d*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/f,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=r.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,f=this.internal.__cell__.tableHeaderRow,A=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,A&&f&&(this.printHeaderRow(l.lineNumber,!0),l.y+=f[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-c,l.y+c,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+c,{align:"center",baseline:"top",maxWidth:l.width-c-c}):this.text(l.text,l.x+c,l.y+c,{align:"left",baseline:"top",maxWidth:l.width-c-c})),this.internal.__cell__.lastCell=l,this};r.table=function(l,u,c,h,f){if(n.call(this),!c)throw new Error("No data for PDF table.");var A,d,p,y,v=[],w=[],x=[],b={},C={},S=[],I=[],B=(f=f||{}).autoSize||!1,T=f.printHeaders!==!1,M=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,F=f.margins||Object.assign({width:this.getPageWidth()},e),N=typeof f.padding=="number"?f.padding:3,O=f.headerBackgroundColor||"#c8c8c8",L=f.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=O,this.internal.__cell__.headerTextColor=L,this.setFontSize(M),h==null)w=v=Object.keys(c[0]),x=v.map(function(){return"left"});else if(Array.isArray(h)&&oi(h[0])==="object")for(v=h.map(function(re){return re.name}),w=h.map(function(re){return re.prompt||re.name||""}),x=h.map(function(re){return re.align||"left"}),A=0;A<h.length;A+=1)C[h[A].name]=h[A].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(w=v=h,x=v.map(function(){return"left"}));if(B||Array.isArray(h)&&typeof h[0]=="string")for(A=0;A<v.length;A+=1){for(b[y=v[A]]=c.map(function(re){return re[y]}),this.setFont(void 0,"bold"),S.push(this.getTextDimensions(w[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),d=b[y],this.setFont(void 0,"normal"),p=0;p<d.length;p+=1)S.push(this.getTextDimensions(d[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);C[y]=Math.max.apply(null,S)+N+N,S=[]}if(T){var G={};for(A=0;A<v.length;A+=1)G[v[A]]={},G[v[A]].text=w[A],G[v[A]].align=x[A];var R=o.call(this,G,C);I=v.map(function(re){return new a(l,u,C[re],R,G[re].text,void 0,G[re].align)}),this.setTableHeaderRow(I),this.printHeaderRow(1,!1)}var U=h.reduce(function(re,oe){return re[oe.name]=oe.align,re},{});for(A=0;A<c.length;A+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:A,data:c[A]},this);var W=o.call(this,c[A],C);for(p=0;p<v.length;p+=1){var Q=c[A][v[p]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:A,col:p,data:Q},this),s.call(this,new a(l,u,C[v[p]],W,Q,A+2,U[v[p]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var c=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(l).map(function(A){var d=l[A];return this.splitTextToSize(d.hasOwnProperty("text")?d.text:d,u[A]-c-c)},this).map(function(A){return this.getLineHeightFactor()*A.length*h/f+c+c},this).reduce(function(A,d){return Math.max(A,d)},0)};r.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},r.printHeaderRow=function(l,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],A=0;A<this.internal.__cell__.tableHeaderRow.length;A+=1){c=this.internal.__cell__.tableHeaderRow[A].clone(),u&&(c.y=this.internal.__cell__.margins.top||0,f.push(c)),c.lineNumber=l;var d=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,c),this.setTextColor(d)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),t=!1}}(Hr.API);var lQ={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},uQ=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],y5=oQ(uQ),cQ=[100,200,300,400,500,600,700,800,900],P1e=oQ(cQ);function x5(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=function(a){return lQ[a=a||"normal"]?a:"normal"}(r.style),n=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(r.weight),i=function(a){return typeof y5[a=a||"normal"]=="number"?a:"normal"}(r.stretch);return{family:e,style:t,weight:n,stretch:i,src:r.src||[],ref:r.ref||{name:e,style:[i,t,n].join(" ")}}}function KM(r,e,t,n){var i;for(i=t;i>=0&&i<e.length;i+=n)if(r[e[i]])return r[e[i]];for(i=t;i>=0&&i<e.length;i-=n)if(r[e[i]])return r[e[i]]}var U1e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},VM={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function WM(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function Q1e(r,e,t){for(var n=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},U1e,t.genericFontFamilies||{}),a=null,s=null,o=0;o<e.length;++o)if(i[(a=x5(e[o])).family]&&(a.family=i[a.family]),r.hasOwnProperty(a.family)){s=r[a.family];break}if(!(s=s||r[n]))throw new Error("Could not find a font-family for the rule '"+WM(a)+"' and default family '"+n+"'.");if(s=function(l,u){if(u[l])return u[l];var c=y5[l],h=c<=y5.normal?-1:1,f=KM(u,uQ,c,h);if(!f)throw new Error("Could not find a matching font-stretch value for "+l);return f}(a.stretch,s),s=function(l,u){if(u[l])return u[l];for(var c=lQ[l],h=0;h<c.length;++h)if(u[c[h]])return u[c[h]];throw new Error("Could not find a matching font-style for "+l)}(a.style,s),!(s=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var c=P1e[l],h=KM(u,cQ,c,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(a.weight,s)))throw new Error("Failed to resolve a font for the rule '"+WM(a)+"'.");return s}function YM(r){return r.trimLeft()}function G1e(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function H1e(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var I2,XM,ZM,mC=["times"];(function(r){var e,t,n,i,a,s,o,l,u,c=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new l,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new s,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new s,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new c}]);var h=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=P;Object.defineProperty(this,"pdf",{get:function(){return z}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(se){K=!!se}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(se){J=!!se}});var ue=0;Object.defineProperty(this,"posX",{get:function(){return ue},set:function(se){isNaN(se)||(ue=se)}});var ge=0;Object.defineProperty(this,"posY",{get:function(){return ge},set:function(se){isNaN(se)||(ge=se)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(se){var Z;typeof se=="number"?Z=[se,se,se,se]:((Z=new Array(4))[0]=se[0],Z[1]=se.length>=2?se[1]:Z[0],Z[2]=se.length>=3?se[2]:Z[0],Z[3]=se.length>=4?se[3]:Z[1]),u.margin=Z}});var le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return le},set:function(se){le=se}});var me=0;Object.defineProperty(this,"lastBreak",{get:function(){return me},set:function(se){me=se}});var xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return xe},set:function(se){xe=se}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(se){se instanceof c&&(u=se)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(se){u.path=se}});var Be=[];Object.defineProperty(this,"ctxStack",{get:function(){return Be},set:function(se){Be=se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(se){var Z;Z=f(se),this.ctx.fillStyle=Z.style,this.ctx.isFillTransparent=Z.a===0,this.ctx.fillOpacity=Z.a,this.pdf.setFillColor(Z.r,Z.g,Z.b,{a:Z.a}),this.pdf.setTextColor(Z.r,Z.g,Z.b,{a:Z.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(se){var Z=f(se);this.ctx.strokeStyle=Z.style,this.ctx.isStrokeTransparent=Z.a===0,this.ctx.strokeOpacity=Z.a,Z.a===0?this.pdf.setDrawColor(255,255,255):(Z.a,this.pdf.setDrawColor(Z.r,Z.g,Z.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(se){["butt","round","square"].indexOf(se)!==-1&&(this.ctx.lineCap=se,this.pdf.setLineCap(se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(se){isNaN(se)||(this.ctx.lineWidth=se,this.pdf.setLineWidth(se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(se){["bevel","round","miter"].indexOf(se)!==-1&&(this.ctx.lineJoin=se,this.pdf.setLineJoin(se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(se){isNaN(se)||(this.ctx.miterLimit=se,this.pdf.setMiterLimit(se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(se){this.ctx.textBaseline=se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(se){["right","end","center","left","start"].indexOf(se)!==-1&&(this.ctx.textAlign=se)}});var Y=null;function Ve(se,Z){if(Y===null){var he=function(ne){var ae=[];return Object.keys(ne).forEach(function(_e){ne[_e].forEach(function(Me){var be=null;switch(Me){case"bold":be={family:_e,weight:"bold"};break;case"italic":be={family:_e,style:"italic"};break;case"bolditalic":be={family:_e,weight:"bold",style:"italic"};break;case"":case"normal":be={family:_e}}be!==null&&(be.ref={name:_e,style:Me},ae.push(be))})}),ae}(se.getFontList());Y=function(ne){for(var ae={},_e=0;_e<ne.length;++_e){var Me=x5(ne[_e]),be=Me.family,Ae=Me.stretch,pe=Me.style,Fe=Me.weight;ae[be]=ae[be]||{},ae[be][Ae]=ae[be][Ae]||{},ae[be][Ae][pe]=ae[be][Ae][pe]||{},ae[be][Ae][pe][Fe]=Me}return ae}(he.concat(Z))}return Y}var te=null;Object.defineProperty(this,"fontFaces",{get:function(){return te},set:function(se){Y=null,te=se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(se){var Z;if(this.ctx.font=se,(Z=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(se))!==null){var he=Z[1],ne=(Z[2],Z[3]),ae=Z[4],_e=(Z[5],Z[6]),Me=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ae)[2];ae=Math.floor(Me==="px"?parseFloat(ae)*this.pdf.internal.scaleFactor:Me==="em"?parseFloat(ae)*this.pdf.getFontSize():parseFloat(ae)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ae);var be=function(Je){var Ye,Ke,mt=[],vt=Je.trim();if(vt==="")return mC;if(vt in VM)return[VM[vt]];for(;vt!=="";){switch(Ke=null,Ye=(vt=YM(vt)).charAt(0)){case'"':case"'":Ke=G1e(vt.substring(1),Ye);break;default:Ke=H1e(vt)}if(Ke===null||(mt.push(Ke[0]),(vt=YM(Ke[1]))!==""&&vt.charAt(0)!==","))return mC;vt=vt.replace(/^,/,"")}return mt}(_e);if(this.fontFaces){var Ae=Q1e(Ve(this.pdf,this.fontFaces),be.map(function(Je){return{family:Je,stretch:"normal",weight:ne,style:he}}));this.pdf.setFont(Ae.ref.name,Ae.ref.style)}else{var pe="";(ne==="bold"||parseInt(ne,10)>=700||he==="bold")&&(pe="bold"),he==="italic"&&(pe+="italic"),pe.length===0&&(pe="normal");for(var Fe="",Ge={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ze=0;Ze<be.length;Ze++){if(this.pdf.internal.getFont(be[Ze],pe,{noFallback:!0,disableWarning:!0})!==void 0){Fe=be[Ze];break}if(pe==="bolditalic"&&this.pdf.internal.getFont(be[Ze],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Fe=be[Ze],pe="bold";else if(this.pdf.internal.getFont(be[Ze],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Fe=be[Ze],pe="normal";break}}if(Fe===""){for(var He=0;He<be.length;He++)if(Ge[be[He]]){Fe=Ge[be[He]];break}}Fe=Fe===""?"Times":Fe,this.pdf.setFont(Fe,pe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(se){this.ctx.globalCompositeOperation=se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(se){this.ctx.globalAlpha=se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(se){this.ctx.lineDashOffset=se,oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(se){this.ctx.lineDash=se,oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(se){this.ctx.ignoreClearRect=!!se}})};h.prototype.setLineDash=function(P){this.lineDash=P},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){b.call(this,"fill",!1)},h.prototype.stroke=function(){b.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(P,z){if(isNaN(P)||isNaN(z))throw Ri.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new s(P,z));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new s(P,z)},h.prototype.closePath=function(){var P=new s(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&oi(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){P=new s(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(P.x,P.y)},h.prototype.lineTo=function(P,z){if(isNaN(P)||isNaN(z))throw Ri.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new s(P,z));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new s(K.x,K.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),b.call(this,null,!0)},h.prototype.quadraticCurveTo=function(P,z,K,J){if(isNaN(K)||isNaN(J)||isNaN(P)||isNaN(z))throw Ri.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ue=this.ctx.transform.applyToPoint(new s(K,J)),ge=this.ctx.transform.applyToPoint(new s(P,z));this.path.push({type:"qct",x1:ge.x,y1:ge.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new s(ue.x,ue.y)},h.prototype.bezierCurveTo=function(P,z,K,J,ue,ge){if(isNaN(ue)||isNaN(ge)||isNaN(P)||isNaN(z)||isNaN(K)||isNaN(J))throw Ri.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var le=this.ctx.transform.applyToPoint(new s(ue,ge)),me=this.ctx.transform.applyToPoint(new s(P,z)),xe=this.ctx.transform.applyToPoint(new s(K,J));this.path.push({type:"bct",x1:me.x,y1:me.y,x2:xe.x,y2:xe.y,x:le.x,y:le.y}),this.ctx.lastPoint=new s(le.x,le.y)},h.prototype.arc=function(P,z,K,J,ue,ge){if(isNaN(P)||isNaN(z)||isNaN(K)||isNaN(J)||isNaN(ue))throw Ri.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ge=!!ge,!this.ctx.transform.isIdentity){var le=this.ctx.transform.applyToPoint(new s(P,z));P=le.x,z=le.y;var me=this.ctx.transform.applyToPoint(new s(0,K)),xe=this.ctx.transform.applyToPoint(new s(0,0));K=Math.sqrt(Math.pow(me.x-xe.x,2)+Math.pow(me.y-xe.y,2))}Math.abs(ue-J)>=2*Math.PI&&(J=0,ue=2*Math.PI),this.path.push({type:"arc",x:P,y:z,radius:K,startAngle:J,endAngle:ue,counterclockwise:ge})},h.prototype.arcTo=function(P,z,K,J,ue){throw new Error("arcTo not implemented.")},h.prototype.rect=function(P,z,K,J){if(isNaN(P)||isNaN(z)||isNaN(K)||isNaN(J))throw Ri.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,z),this.lineTo(P+K,z),this.lineTo(P+K,z+J),this.lineTo(P,z+J),this.lineTo(P,z),this.lineTo(P+K,z),this.lineTo(P,z)},h.prototype.fillRect=function(P,z,K,J){if(isNaN(P)||isNaN(z)||isNaN(K)||isNaN(J))throw Ri.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!A.call(this)){var ue={};this.lineCap!=="butt"&&(ue.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ue.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,z,K,J),this.fill(),ue.hasOwnProperty("lineCap")&&(this.lineCap=ue.lineCap),ue.hasOwnProperty("lineJoin")&&(this.lineJoin=ue.lineJoin)}},h.prototype.strokeRect=function(P,z,K,J){if(isNaN(P)||isNaN(z)||isNaN(K)||isNaN(J))throw Ri.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");d.call(this)||(this.beginPath(),this.rect(P,z,K,J),this.stroke())},h.prototype.clearRect=function(P,z,K,J){if(isNaN(P)||isNaN(z)||isNaN(K)||isNaN(J))throw Ri.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,z,K,J))},h.prototype.save=function(P){P=typeof P!="boolean"||P;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},h.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(z),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(P){var z,K,J,ue;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))z=0,K=0,J=0,ue=0;else{var ge=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(ge!==null)z=parseInt(ge[1]),K=parseInt(ge[2]),J=parseInt(ge[3]),ue=1;else if((ge=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)z=parseInt(ge[1]),K=parseInt(ge[2]),J=parseInt(ge[3]),ue=parseFloat(ge[4]);else{if(ue=1,typeof P=="string"&&P.charAt(0)!=="#"){var le=new tQ(P);P=le.ok?le.toHex():"#000000"}P.length===4?(z=P.substring(1,2),z+=z,K=P.substring(2,3),K+=K,J=P.substring(3,4),J+=J):(z=P.substring(1,3),K=P.substring(3,5),J=P.substring(5,7)),z=parseInt(z,16),K=parseInt(K,16),J=parseInt(J,16)}}return{r:z,g:K,b:J,a:ue,style:P}},A=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},d=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(P,z,K,J){if(isNaN(z)||isNaN(K)||typeof P!="string")throw Ri.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!A.call(this)){var ue=W(this.ctx.transform.rotation),ge=this.ctx.transform.scaleX;N.call(this,{text:P,x:z,y:K,scale:ge,angle:ue,align:this.textAlign,maxWidth:J})}},h.prototype.strokeText=function(P,z,K,J){if(isNaN(z)||isNaN(K)||typeof P!="string")throw Ri.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!d.call(this)){J=isNaN(J)?void 0:J;var ue=W(this.ctx.transform.rotation),ge=this.ctx.transform.scaleX;N.call(this,{text:P,x:z,y:K,scale:ge,renderingMode:"stroke",angle:ue,align:this.textAlign,maxWidth:J})}},h.prototype.measureText=function(P){if(typeof P!="string")throw Ri.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,K=this.pdf.internal.scaleFactor,J=z.internal.getFontSize(),ue=z.getStringUnitWidth(P)*J/z.internal.scaleFactor,ge=function(le){var me=(le=le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return me}}),this};return new ge({width:ue*=Math.round(96*K/72*1e4)/1e4})},h.prototype.scale=function(P,z){if(isNaN(P)||isNaN(z))throw Ri.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new l(P,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},h.prototype.rotate=function(P){if(isNaN(P))throw Ri.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new l(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},h.prototype.translate=function(P,z){if(isNaN(P)||isNaN(z))throw Ri.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new l(1,0,0,1,P,z);this.ctx.transform=this.ctx.transform.multiply(K)},h.prototype.transform=function(P,z,K,J,ue,ge){if(isNaN(P)||isNaN(z)||isNaN(K)||isNaN(J)||isNaN(ue)||isNaN(ge))throw Ri.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var le=new l(P,z,K,J,ue,ge);this.ctx.transform=this.ctx.transform.multiply(le)},h.prototype.setTransform=function(P,z,K,J,ue,ge){P=isNaN(P)?1:P,z=isNaN(z)?0:z,K=isNaN(K)?0:K,J=isNaN(J)?1:J,ue=isNaN(ue)?0:ue,ge=isNaN(ge)?0:ge,this.ctx.transform=new l(P,z,K,J,ue,ge)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(P,z,K,J,ue,ge,le,me,xe){var Be=this.pdf.getImageProperties(P),Y=1,Ve=1,te=1,se=1;J!==void 0&&me!==void 0&&(te=me/J,se=xe/ue,Y=Be.width/J*me/J,Ve=Be.height/ue*xe/ue),ge===void 0&&(ge=z,le=K,z=0,K=0),J!==void 0&&me===void 0&&(me=J,xe=ue),J===void 0&&me===void 0&&(me=Be.width,xe=Be.height);for(var Z,he=this.ctx.transform.decompose(),ne=W(he.rotate.shx),ae=new l,_e=(ae=(ae=(ae=ae.multiply(he.translate)).multiply(he.skew)).multiply(he.scale)).applyToRectangle(new o(ge-z*te,le-K*se,J*Y,ue*Ve)),Me=y.call(this,_e),be=[],Ae=0;Ae<Me.length;Ae+=1)be.indexOf(Me[Ae])===-1&&be.push(Me[Ae]);if(x(be),this.autoPaging)for(var pe=be[0],Fe=be[be.length-1],Ge=pe;Ge<Fe+1;Ge++){this.pdf.setPage(Ge);var Ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],He=Ge===1?this.posY+this.margin[0]:this.margin[0],Je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ye=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ke=Ge===1?0:Je+(Ge-2)*Ye;if(this.ctx.clip_path.length!==0){var mt=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(Z,this.posX+this.margin[3],-Ke+He+this.ctx.prevPageLastElemOffset),C.call(this,"fill",!0),this.path=mt}var vt=JSON.parse(JSON.stringify(_e));vt=w([vt],this.posX+this.margin[3],-Ke+He+this.ctx.prevPageLastElemOffset)[0];var Dt=(Ge>pe||Ge<Fe)&&p.call(this);Dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,Ye,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",vt.x,vt.y,vt.w,vt.h,null,null,ne),Dt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",_e.x,_e.y,_e.w,_e.h,null,null,ne)};var y=function(P,z,K){var J=[];z=z||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ue=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":J.push(Math.floor((P.y+ue)/K)+1);break;case"arc":J.push(Math.floor((P.y+ue-P.radius)/K)+1),J.push(Math.floor((P.y+ue+P.radius)/K)+1);break;case"qct":var ge=Q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);J.push(Math.floor((ge.y+ue)/K)+1),J.push(Math.floor((ge.y+ge.h+ue)/K)+1);break;case"bct":var le=re(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);J.push(Math.floor((le.y+ue)/K)+1),J.push(Math.floor((le.y+le.h+ue)/K)+1);break;case"rect":J.push(Math.floor((P.y+ue)/K)+1),J.push(Math.floor((P.y+P.h+ue)/K)+1)}for(var me=0;me<J.length;me+=1)for(;this.pdf.internal.getNumberOfPages()<J[me];)v.call(this);return J},v=function(){var P=this.fillStyle,z=this.strokeStyle,K=this.font,J=this.lineCap,ue=this.lineWidth,ge=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=z,this.font=K,this.lineCap=J,this.lineWidth=ue,this.lineJoin=ge},w=function(P,z,K){for(var J=0;J<P.length;J++)switch(P[J].type){case"bct":P[J].x2+=z,P[J].y2+=K;case"qct":P[J].x1+=z,P[J].y1+=K;case"mt":case"lt":case"arc":default:P[J].x+=z,P[J].y+=K}return P},x=function(P){return P.sort(function(z,K){return z-K})},b=function(P,z){for(var K,J,ue=this.fillStyle,ge=this.strokeStyle,le=this.lineCap,me=this.lineWidth,xe=Math.abs(me*this.ctx.transform.scaleX),Be=this.lineJoin,Y=JSON.parse(JSON.stringify(this.path)),Ve=JSON.parse(JSON.stringify(this.path)),te=[],se=0;se<Ve.length;se++)if(Ve[se].x!==void 0)for(var Z=y.call(this,Ve[se]),he=0;he<Z.length;he+=1)te.indexOf(Z[he])===-1&&te.push(Z[he]);for(var ne=0;ne<te.length;ne++)for(;this.pdf.internal.getNumberOfPages()<te[ne];)v.call(this);if(x(te),this.autoPaging)for(var ae=te[0],_e=te[te.length-1],Me=ae;Me<_e+1;Me++){this.pdf.setPage(Me),this.fillStyle=ue,this.strokeStyle=ge,this.lineCap=le,this.lineWidth=xe,this.lineJoin=Be;var be=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ae=Me===1?this.posY+this.margin[0]:this.margin[0],pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ge=Me===1?0:pe+(Me-2)*Fe;if(this.ctx.clip_path.length!==0){var Ze=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(K,this.posX+this.margin[3],-Ge+Ae+this.ctx.prevPageLastElemOffset),C.call(this,P,!0),this.path=Ze}if(J=JSON.parse(JSON.stringify(Y)),this.path=w(J,this.posX+this.margin[3],-Ge+Ae+this.ctx.prevPageLastElemOffset),z===!1||Me===0){var He=(Me>ae||Me<_e)&&p.call(this);He&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],be,Fe,null).clip().discardPath()),C.call(this,P,z),He&&this.pdf.restoreGraphicsState()}this.lineWidth=me}else this.lineWidth=xe,C.call(this,P,z),this.lineWidth=me;this.path=Y},C=function(P,z){if((P!=="stroke"||z||!d.call(this))&&(P==="stroke"||z||!A.call(this))){for(var K,J,ue=[],ge=this.path,le=0;le<ge.length;le++){var me=ge[le];switch(me.type){case"begin":ue.push({begin:!0});break;case"close":ue.push({close:!0});break;case"mt":ue.push({start:me,deltas:[],abs:[]});break;case"lt":var xe=ue.length;if(ge[le-1]&&!isNaN(ge[le-1].x)&&(K=[me.x-ge[le-1].x,me.y-ge[le-1].y],xe>0)){for(;xe>=0;xe--)if(ue[xe-1].close!==!0&&ue[xe-1].begin!==!0){ue[xe-1].deltas.push(K),ue[xe-1].abs.push(me);break}}break;case"bct":K=[me.x1-ge[le-1].x,me.y1-ge[le-1].y,me.x2-ge[le-1].x,me.y2-ge[le-1].y,me.x-ge[le-1].x,me.y-ge[le-1].y],ue[ue.length-1].deltas.push(K);break;case"qct":var Be=ge[le-1].x+2/3*(me.x1-ge[le-1].x),Y=ge[le-1].y+2/3*(me.y1-ge[le-1].y),Ve=me.x+2/3*(me.x1-me.x),te=me.y+2/3*(me.y1-me.y),se=me.x,Z=me.y;K=[Be-ge[le-1].x,Y-ge[le-1].y,Ve-ge[le-1].x,te-ge[le-1].y,se-ge[le-1].x,Z-ge[le-1].y],ue[ue.length-1].deltas.push(K);break;case"arc":ue.push({deltas:[],abs:[],arc:!0}),Array.isArray(ue[ue.length-1].abs)&&ue[ue.length-1].abs.push(me)}}J=z?null:P==="stroke"?"stroke":"fill";for(var he=!1,ne=0;ne<ue.length;ne++)if(ue[ne].arc)for(var ae=ue[ne].abs,_e=0;_e<ae.length;_e++){var Me=ae[_e];Me.type==="arc"?B.call(this,Me.x,Me.y,Me.radius,Me.startAngle,Me.endAngle,Me.counterclockwise,void 0,z,!he):O.call(this,Me.x,Me.y),he=!0}else if(ue[ne].close===!0)this.pdf.internal.out("h"),he=!1;else if(ue[ne].begin!==!0){var be=ue[ne].start.x,Ae=ue[ne].start.y;L.call(this,ue[ne].deltas,be,Ae),he=!0}J&&T.call(this,J),z&&M.call(this)}},S=function(P){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-K;case"top":return P+z-K;case"hanging":return P+z-2*K;case"middle":return P+z/2-K;case"ideographic":return P;case"alphabetic":default:return P}},I=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(z,K){this.colorStops.push([z,K])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var B=function(P,z,K,J,ue,ge,le,me,xe){for(var Be=R.call(this,K,J,ue,ge),Y=0;Y<Be.length;Y++){var Ve=Be[Y];Y===0&&(xe?F.call(this,Ve.x1+P,Ve.y1+z):O.call(this,Ve.x1+P,Ve.y1+z)),G.call(this,P,z,Ve.x2,Ve.y2,Ve.x3,Ve.y3,Ve.x4,Ve.y4)}me?M.call(this):T.call(this,le)},T=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(P,z){this.pdf.internal.out(t(P)+" "+n(z)+" m")},N=function(P){var z;switch(P.align){case"right":case"end":z="right";break;case"center":z="center";break;case"left":case"start":default:z="left"}var K=this.pdf.getTextDimensions(P.text),J=S.call(this,P.y),ue=I.call(this,J)-K.h,ge=this.ctx.transform.applyToPoint(new s(P.x,J)),le=this.ctx.transform.decompose(),me=new l;me=(me=(me=me.multiply(le.translate)).multiply(le.skew)).multiply(le.scale);for(var xe,Be,Y,Ve=this.ctx.transform.applyToRectangle(new o(P.x,J,K.w,K.h)),te=me.applyToRectangle(new o(P.x,ue,K.w,K.h)),se=y.call(this,te),Z=[],he=0;he<se.length;he+=1)Z.indexOf(se[he])===-1&&Z.push(se[he]);if(x(Z),this.autoPaging)for(var ne=Z[0],ae=Z[Z.length-1],_e=ne;_e<ae+1;_e++){this.pdf.setPage(_e);var Me=_e===1?this.posY+this.margin[0]:this.margin[0],be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ae=this.pdf.internal.pageSize.height-this.margin[2],pe=Ae-this.margin[0],Fe=this.pdf.internal.pageSize.width-this.margin[1],Ge=Fe-this.margin[3],Ze=_e===1?0:be+(_e-2)*pe;if(this.ctx.clip_path.length!==0){var He=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(xe,this.posX+this.margin[3],-1*Ze+Me),C.call(this,"fill",!0),this.path=He}var Je=w([JSON.parse(JSON.stringify(te))],this.posX+this.margin[3],-Ze+Me+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*P.scale),Y=this.lineWidth,this.lineWidth=Y*P.scale);var Ye=this.autoPaging!=="text";if(Ye||Je.y+Je.h<=Ae){if(Ye||Je.y>=Me&&Je.x<=Fe){var Ke=Ye?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||Fe-Je.x)[0],mt=w([JSON.parse(JSON.stringify(Ve))],this.posX+this.margin[3],-Ze+Me+this.ctx.prevPageLastElemOffset)[0],vt=Ye&&(_e>ne||_e<ae)&&p.call(this);vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ge,pe,null).clip().discardPath()),this.pdf.text(Ke,mt.x,mt.y,{angle:P.angle,align:z,renderingMode:P.renderingMode}),vt&&this.pdf.restoreGraphicsState()}}else Je.y<Ae&&(this.ctx.prevPageLastElemOffset+=Ae-Je.y);P.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=Y)}else P.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*P.scale),Y=this.lineWidth,this.lineWidth=Y*P.scale),this.pdf.text(P.text,ge.x+this.posX,ge.y+this.posY,{angle:P.angle,align:z,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=Y)},O=function(P,z,K,J){K=K||0,J=J||0,this.pdf.internal.out(t(P+K)+" "+n(z+J)+" l")},L=function(P,z,K){return this.pdf.lines(P,z,K,null,null)},G=function(P,z,K,J,ue,ge,le,me){this.pdf.internal.out([e(i(K+P)),e(a(J+z)),e(i(ue+P)),e(a(ge+z)),e(i(le+P)),e(a(me+z)),"c"].join(" "))},R=function(P,z,K,J){for(var ue=2*Math.PI,ge=Math.PI/2;z>K;)z-=ue;var le=Math.abs(K-z);le<ue&&J&&(le=ue-le);for(var me=[],xe=J?-1:1,Be=z;le>1e-5;){var Y=Be+xe*Math.min(le,ge);me.push(U.call(this,P,Be,Y)),le-=Math.abs(Y-Be),Be=Y}return me},U=function(P,z,K){var J=(K-z)/2,ue=P*Math.cos(J),ge=P*Math.sin(J),le=ue,me=-ge,xe=le*le+me*me,Be=xe+le*ue+me*ge,Y=4/3*(Math.sqrt(2*xe*Be)-Be)/(le*ge-me*ue),Ve=le-Y*me,te=me+Y*le,se=Ve,Z=-te,he=J+z,ne=Math.cos(he),ae=Math.sin(he);return{x1:P*Math.cos(z),y1:P*Math.sin(z),x2:Ve*ne-te*ae,y2:Ve*ae+te*ne,x3:se*ne-Z*ae,y3:se*ae+Z*ne,x4:P*Math.cos(K),y4:P*Math.sin(K)}},W=function(P){return 180*P/Math.PI},Q=function(P,z,K,J,ue,ge){var le=P+.5*(K-P),me=z+.5*(J-z),xe=ue+.5*(K-ue),Be=ge+.5*(J-ge),Y=Math.min(P,ue,le,xe),Ve=Math.max(P,ue,le,xe),te=Math.min(z,ge,me,Be),se=Math.max(z,ge,me,Be);return new o(Y,te,Ve-Y,se-te)},re=function(P,z,K,J,ue,ge,le,me){var xe,Be,Y,Ve,te,se,Z,he,ne,ae,_e,Me,be,Ae,pe=K-P,Fe=J-z,Ge=ue-K,Ze=ge-J,He=le-ue,Je=me-ge;for(Be=0;Be<41;Be++)ne=(Z=(Y=P+(xe=Be/40)*pe)+xe*((te=K+xe*Ge)-Y))+xe*(te+xe*(ue+xe*He-te)-Z),ae=(he=(Ve=z+xe*Fe)+xe*((se=J+xe*Ze)-Ve))+xe*(se+xe*(ge+xe*Je-se)-he),Be==0?(_e=ne,Me=ae,be=ne,Ae=ae):(_e=Math.min(_e,ne),Me=Math.min(Me,ae),be=Math.max(be,ne),Ae=Math.max(Ae,ae));return new o(Math.round(_e),Math.round(Me),Math.round(be-_e),Math.round(Ae-Me))},oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,z,K=(P=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:z}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(Hr.API),function(r){var e=function(a){var s,o,l,u,c,h,f,A,d,p;for(o=[],l=0,u=(a+=s="\0\0\0\0".slice(a.length%4||4)).length;u>l;l+=4)(c=(a.charCodeAt(l)<<24)+(a.charCodeAt(l+1)<<16)+(a.charCodeAt(l+2)<<8)+a.charCodeAt(l+3))!==0?(h=(c=((c=((c=((c=(c-(p=c%85))/85)-(d=c%85))/85)-(A=c%85))/85)-(f=c%85))/85)%85,o.push(h+33,f+33,A+33,d+33,p+33)):o.push(122);return function(y,v){for(var w=v;w>0;w--)y.pop()}(o,s.length),String.fromCharCode.apply(String,o)+"~>"},t=function(a){var s,o,l,u,c,h=String,f="length",A=255,d="charCodeAt",p="slice",y="replace";for(a[p](-2),a=a[p](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),l=[],u=0,c=(a+=s="uuuuu"[p](a[f]%5||5))[f];c>u;u+=5)o=52200625*(a[d](u)-33)+614125*(a[d](u+1)-33)+7225*(a[d](u+2)-33)+85*(a[d](u+3)-33)+(a[d](u+4)-33),l.push(A&o>>24,A&o>>16,A&o>>8,A&o);return function(v,w){for(var x=w;x>0;x--)v.pop()}(l,s[f]),h.fromCharCode.apply(h,l)},n=function(a){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),s.test(a)===!1)return"";for(var o="",l=0;l<a.length;l+=2)o+=String.fromCharCode("0x"+(a[l]+a[l+1]));return o},i=function(a){for(var s=new Uint8Array(a.length),o=a.length;o--;)s[o]=a.charCodeAt(o);return a=(s=d5(s)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};r.processDataByFilters=function(a,s){var o=0,l=a||"",u=[];for(typeof(s=s||[])=="string"&&(s=[s]),o=0;o<s.length;o+=1)switch(s[o]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(Hr.API),function(r){r.loadFile=function(e,t,n){return function(i,a,s){a=a!==!1,s=typeof s=="function"?s:function(){};var o=void 0;try{o=function(l,u,c){var h=new XMLHttpRequest,f=0,A=function(d){var p=d.length,y=[],v=String.fromCharCode;for(f=0;f<p;f+=1)y.push(v(255&d.charCodeAt(f)));return y.join("")};if(h.open("GET",l,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?c(A(this.responseText)):c(void 0)}),h.send(null),u&&h.status===200)return A(h.responseText)}(i,a,s)}catch{}return o}(e,t,n)},r.loadImageFile=r.loadFile}(Hr.API),function(r){function e(){return(jr.html2canvas?Promise.resolve(jr.html2canvas):jl(()=>Promise.resolve().then(()=>l1e),void 0)).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function t(){return(jr.DOMPurify?Promise.resolve(jr.DOMPurify):jl(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var n=function(s){var o=oi(s);return o==="undefined"?"undefined":o==="string"||s instanceof String?"string":o==="number"||s instanceof Number?"number":o==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":o==="object"?"object":"unknown"},i=function(s,o){var l=document.createElement(s);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},a=function s(o){var l=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),u=s.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,s,1,[s])).set(o)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(s,o){return s.__proto__=o||a.prototype,s},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(s,o){return this.then(function(){switch(o=o||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:s,dompurify:l})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},a.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,c){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),f=u.firstChild;f;f=f.nextSibling)c!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||h.appendChild(l(f,c));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,c=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:c,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var A=u[f],d=A.src.find(function(p){return p.format==="truetype"});d&&l.addFont(d.url,A.ref.name,A.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),o(this.prop.container,h)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(s,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(s,o):this.outputPdf(s,o)},a.prototype.outputPdf=function(s,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,o)})},a.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},a.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(s){if(n(s)!=="object")return this;var o=Object.keys(s||{}).map(function(l){if(l in a.template.prop)return function(){this.prop[l]=s[l]};switch(l){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[l]=s[l]}}},this);return this.then(function(){return this.thenList(o)})},a.prototype.get=function(s,o){return this.then(function(){var l=s in a.template.prop?this.prop[s]:this.opt[s];return o?o(l):l})},a.prototype.setMargin=function(s){return this.then(function(){switch(n(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},a.prototype.setPageSize=function(s){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(s=s||Hr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:o(s.inner.width,s.k),height:o(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},a.prototype.setProgress=function(s,o,l,u){return s!=null&&(this.progress.val=s),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(s,o,l,u){return this.setProgress(s?this.progress.val+s:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(s,o){var l=this;return this.thenCore(s,o,function(u,c){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,u),h}).then(u,c).then(function(h){return l.updateProgress(1),h})})},a.prototype.thenCore=function(s,o,l){l=l||Promise.prototype.then,s&&(s=s.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),c=l.call(u,s,o);return a.convert(c,this.__proto__)},a.prototype.thenExternal=function(s,o){return Promise.prototype.then.call(this,s,o)},a.prototype.thenList=function(s){var o=this;return s.forEach(function(l){o=o.thenCore(l)}),o},a.prototype.catch=function(s){s&&(s=s.bind(this));var o=Promise.prototype.catch.call(this,s);return a.convert(o,this)},a.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},a.prototype.error=function(s){return this.then(function(){throw new Error(s)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Hr.getPageSize=function(s,o,l){if(oi(s)==="object"){var u=s;s=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",s=(""+(s||"P")).toLowerCase();var c,h=(""+l).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":c=1;break;case"mm":c=72/25.4;break;case"cm":c=72/2.54;break;case"in":c=72;break;case"px":c=.75;break;case"pc":case"em":c=12;break;case"ex":c=6;break;default:throw"Invalid unit: "+o}var A,d=0,p=0;if(f.hasOwnProperty(h))d=f[h][1]/c,p=f[h][0]/c;else try{d=l[1],p=l[0]}catch{throw new Error("Invalid format: "+l)}if(s==="p"||s==="portrait")s="p",p>d&&(A=p,p=d,d=A);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",d>p&&(A=p,p=d,d=A)}return{width:p,height:d,unit:o,k:c,orientation:s}},r.html=function(s,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(x5):null;var l=new a(o);return o.worker?l:l.from(s).doCallback()}}(Hr.API),Hr.API.addJS=function(r){return ZM=r,this.internal.events.subscribe("postPutResources",function(){I2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(I2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),XM=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ZM+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){I2!==void 0&&XM!==void 0&&this.internal.out("/Names <</JavaScript "+I2+" 0 R>>")}),this},function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),a=0;a<i.length;a++){var s=i[a],o=n.exec(s);if(o!=null){var l=o[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,c=[];for(a=0;a<u;a++){var h=t.internal.newObject();c.push(h);var f=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var A=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<c.length;a++)t.internal.write("(page_"+(a+1)+")"+c[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+A+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,i,a){var s={title:i,options:a,children:[]};return n==null&&(n=this.root),n.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var s=n.children[a];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var l=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,i){for(var a=0;a<i.children.length;a++)n.count++,this.count_r(n,i.children[a]);return n.count}}])}(Hr.API),function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,i,a,s,o){var l,u=this.decode.DCT_DECODE,c=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(h){for(var f,A=256*h.charCodeAt(4)+h.charCodeAt(5),d=h.length,p={width:0,height:0,numcomponents:1},y=4;y<d;y+=2){if(y+=A,e.indexOf(h.charCodeAt(y+1))!==-1){f=256*h.charCodeAt(y+5)+h.charCodeAt(y+6),p={width:256*h.charCodeAt(y+7)+h.charCodeAt(y+8),height:f,numcomponents:h.charCodeAt(y+9)};break}A=256*h.charCodeAt(y+2)+h.charCodeAt(y+3)}return p}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}c={data:t,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:i}}return c}}(Hr.API);var j0,F2,JM,eL,tL,z1e=function(){var r,e,t;function n(a){var s,o,l,u,c,h,f,A,d,p,y,v,w,x;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(s=this.readUInt32(),d=(function(){var b,C;for(C=[],b=0;b<4;++b)C.push(String.fromCharCode(this.data[this.pos++]));return C}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},c=this.readUInt16(),u=this.readUInt16()||100,h.delay=1e3*c/u,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(d==="fdAT"&&(this.pos+=4,s-=4),a=(h!=null?h.data:void 0)||this.imgData,v=0;0<=s?v<s:v>s;0<=s?++v:--v)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((p=l-this.transparency.indexed.length)>0)for(w=0;0<=p?w<p:w>p;0<=p?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":f=(y=this.read(s)).indexOf(0),A=String.fromCharCode.apply(String,y.slice(0,f)),this.text[A]=String.fromCharCode.apply(String,y.slice(f+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(x=this.colorType)===4||x===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(a){var s,o;for(o=[],s=0;0<=a?s<a:s>a;0<=a?++s:--s)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(a){var s=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*s),l=0,u=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function c(h,f,A,d){var p,y,v,w,x,b,C,S,I,B,T,M,F,N,O,L,G,R,U,W,Q,re=Math.ceil((u.width-h)/A),oe=Math.ceil((u.height-f)/d),P=u.width==re&&u.height==oe;for(N=s*re,M=P?o:new Uint8Array(N*oe),b=a.length,F=0,y=0;F<oe&&l<b;){switch(a[l++]){case 0:for(w=G=0;G<N;w=G+=1)M[y++]=a[l++];break;case 1:for(w=R=0;R<N;w=R+=1)p=a[l++],x=w<s?0:M[y-s],M[y++]=(p+x)%256;break;case 2:for(w=U=0;U<N;w=U+=1)p=a[l++],v=(w-w%s)/s,O=F&&M[(F-1)*N+v*s+w%s],M[y++]=(O+p)%256;break;case 3:for(w=W=0;W<N;w=W+=1)p=a[l++],v=(w-w%s)/s,x=w<s?0:M[y-s],O=F&&M[(F-1)*N+v*s+w%s],M[y++]=(p+Math.floor((x+O)/2))%256;break;case 4:for(w=Q=0;Q<N;w=Q+=1)p=a[l++],v=(w-w%s)/s,x=w<s?0:M[y-s],F===0?O=L=0:(O=M[(F-1)*N+v*s+w%s],L=v&&M[(F-1)*N+(v-1)*s+w%s]),C=x+O-L,S=Math.abs(C-x),B=Math.abs(C-O),T=Math.abs(C-L),I=S<=B&&S<=T?x:B<=T?O:L,M[y++]=(p+I)%256;break;default:throw new Error("Invalid filter algorithm: "+a[l-1])}if(!P){var z=((f+F*d)*u.width+h)*s,K=F*N;for(w=0;w<re;w+=1){for(var J=0;J<s;J+=1)o[z++]=M[K++];z+=(A-1)*s}}F++}}return a=w1e(a),u.interlaceMethod==1?(c(0,0,8,8),c(4,0,8,8),c(0,4,4,8),c(2,0,4,4),c(0,2,2,4),c(1,0,2,2),c(0,1,1,2)):c(0,0,1,1),o},n.prototype.decodePalette=function(){var a,s,o,l,u,c,h,f,A;for(o=this.palette,c=this.transparency.indexed||[],u=new Uint8Array((c.length||0)+o.length),l=0,a=0,s=h=0,f=o.length;h<f;s=h+=3)u[l++]=o[s],u[l++]=o[s+1],u[l++]=o[s+2],u[l++]=(A=c[a++])!=null?A:255;return u},n.prototype.copyToImageData=function(a,s){var o,l,u,c,h,f,A,d,p,y,v;if(l=this.colors,p=null,o=this.hasAlphaChannel,this.palette.length&&(p=(v=this._decodedPalette)!=null?v:this._decodedPalette=this.decodePalette(),l=4,o=!0),d=(u=a.data||a).length,h=p||s,c=f=0,l===1)for(;c<d;)A=p?4*s[c/4]:f,y=h[A++],u[c++]=y,u[c++]=y,u[c++]=y,u[c++]=o?h[A++]:255,f=A;else for(;c<d;)A=p?4*s[c/4]:f,u[c++]=h[A++],u[c++]=h[A++],u[c++]=h[A++],u[c++]=o?h[A++]:255,f=A},n.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var i=function(){if(Object.prototype.toString.call(jr)==="[object Window]"){try{e=jr.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),r=function(a){var s;if(i()===!0)return t.width=a.width,t.height=a.height,t.clearRect(0,0,a.width,a.height),t.putImageData(a,0,0),(s=new Image).src=e.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(a){var s,o,l,u,c,h,f,A;if(this.animation){for(A=[],o=c=0,h=(f=this.animation.frames).length;c<h;o=++c)s=f[o],l=a.createImageData(s.width,s.height),u=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(l,u),s.imageData=l,A.push(s.image=r(l));return A}},n.prototype.renderFrame=function(a,s){var o,l,u;return o=(l=this.animation.frames)[s],u=l[s-1],s===0&&a.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?a.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&a.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&a.clearRect(o.xOffset,o.yOffset,o.width,o.height),a.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(a){var s,o,l,u,c,h,f=this;return o=0,h=this.animation,u=h.numFrames,l=h.frames,c=h.numPlays,(s=function(){var A,d;if(A=o++%u,d=l[A],f.renderFrame(a,A),u>1&&o/u<c)return f.animation._timeout=setTimeout(s,d.delay)})()},n.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},n.prototype.render=function(a){var s,o;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,s=a.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(o=s.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),s.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function q1e(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,i=r[e++],a=i>>7,s=1<<(7&i)+1;r[e++],r[e++];var o=null,l=null;a&&(o=e,l=s,e+=3*s);var u=!0,c=[],h=0,f=null,A=0,d=null;for(this.width=t,this.height=n;u&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,d=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((F=r[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var p=r[e++];h=r[e++]|r[e++]<<8,f=r[e++],!(1&p)&&(f=null),A=p>>2&7,e++;break;case 254:for(;;){if(!((F=r[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var y=r[e++]|r[e++]<<8,v=r[e++]|r[e++]<<8,w=r[e++]|r[e++]<<8,x=r[e++]|r[e++]<<8,b=r[e++],C=b>>6&1,S=1<<(7&b)+1,I=o,B=l,T=!1;b>>7&&(T=!0,I=e,B=S,e+=3*S);var M=e;for(e++;;){var F;if(!((F=r[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}c.push({x:y,y:v,width:w,height:x,has_local_palette:T,palette_offset:I,palette_size:B,data_offset:M,data_length:e-M,transparent_index:f,interlaced:!!C,delay:h,disposal:A});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return d},this.frameInfo=function(N){if(N<0||N>=c.length)throw new Error("Frame index out of range.");return c[N]},this.decodeAndBlitFrameBGRA=function(N,O){var L=this.frameInfo(N),G=L.width*L.height,R=new Uint8Array(G);rL(r,L.data_offset,R,G);var U=L.palette_offset,W=L.transparent_index;W===null&&(W=256);var Q=L.width,re=t-Q,oe=Q,P=4*(L.y*t+L.x),z=4*((L.y+L.height)*t+L.x),K=P,J=4*re;L.interlaced===!0&&(J+=4*t*7);for(var ue=8,ge=0,le=R.length;ge<le;++ge){var me=R[ge];if(oe===0&&(oe=Q,(K+=J)>=z&&(J=4*re+4*t*(ue-1),K=P+(Q+re)*(ue<<1),ue>>=1)),me===W)K+=4;else{var xe=r[U+3*me],Be=r[U+3*me+1],Y=r[U+3*me+2];O[K++]=Y,O[K++]=Be,O[K++]=xe,O[K++]=255}--oe}},this.decodeAndBlitFrameRGBA=function(N,O){var L=this.frameInfo(N),G=L.width*L.height,R=new Uint8Array(G);rL(r,L.data_offset,R,G);var U=L.palette_offset,W=L.transparent_index;W===null&&(W=256);var Q=L.width,re=t-Q,oe=Q,P=4*(L.y*t+L.x),z=4*((L.y+L.height)*t+L.x),K=P,J=4*re;L.interlaced===!0&&(J+=4*t*7);for(var ue=8,ge=0,le=R.length;ge<le;++ge){var me=R[ge];if(oe===0&&(oe=Q,(K+=J)>=z&&(J=4*re+4*t*(ue-1),K=P+(Q+re)*(ue<<1),ue>>=1)),me===W)K+=4;else{var xe=r[U+3*me],Be=r[U+3*me+1],Y=r[U+3*me+2];O[K++]=xe,O[K++]=Be,O[K++]=Y,O[K++]=255}--oe}}}function rL(r,e,t,n){for(var i=r[e++],a=1<<i,s=a+1,o=s+1,l=i+1,u=(1<<l)-1,c=0,h=0,f=0,A=r[e++],d=new Int32Array(4096),p=null;;){for(;c<16&&A!==0;)h|=r[e++]<<c,c+=8,A===1?A=r[e++]:--A;if(c<l)break;var y=h&u;if(h>>=l,c-=l,y!==a){if(y===s)break;for(var v=y<o?y:p,w=0,x=v;x>a;)x=d[x]>>8,++w;var b=x;if(f+w+(v!==y?1:0)>n)return void Ri.log("Warning, gif stream longer than expected.");t[f++]=b;var C=f+=w;for(v!==y&&(t[f++]=b),x=v;w--;)x=d[x],t[--C]=255&x,x>>=8;p!==null&&o<4096&&(d[o++]=p<<8|b,o>=u+1&&l<12&&(++l,u=u<<1|1)),p=y}else o=s+1,u=(1<<(l=i+1))-1,p=null}return f!==n&&Ri.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function vC(r){var e,t,n,i,a,s=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),h=new Array(65535),f=new Array(65535),A=new Array(64),d=new Array(64),p=[],y=0,v=7,w=new Array(64),x=new Array(64),b=new Array(64),C=new Array(256),S=new Array(2048),I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],B=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],G=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function R(P,z){for(var K=0,J=0,ue=new Array,ge=1;ge<=16;ge++){for(var le=1;le<=P[ge];le++)ue[z[J]]=[],ue[z[J]][0]=K,ue[z[J]][1]=ge,J++,K++;K*=2}return ue}function U(P){for(var z=P[0],K=P[1]-1;K>=0;)z&1<<K&&(y|=1<<v),K--,--v<0&&(y==255?(W(255),W(0)):W(y),v=7,y=0)}function W(P){p.push(P)}function Q(P){W(P>>8&255),W(255&P)}function re(P,z,K,J,ue){for(var ge,le=ue[0],me=ue[240],xe=function(ae,_e){var Me,be,Ae,pe,Fe,Ge,Ze,He,Je,Ye,Ke=0;for(Je=0;Je<8;++Je){Me=ae[Ke],be=ae[Ke+1],Ae=ae[Ke+2],pe=ae[Ke+3],Fe=ae[Ke+4],Ge=ae[Ke+5],Ze=ae[Ke+6];var mt=Me+(He=ae[Ke+7]),vt=Me-He,Dt=be+Ze,yt=be-Ze,Ar=Ae+Ge,ce=Ae-Ge,Ue=pe+Fe,st=pe-Fe,wt=mt+Ue,Wt=mt-Ue,rr=Dt+Ar,wr=Dt-Ar;ae[Ke]=wt+rr,ae[Ke+4]=wt-rr;var Ct=.707106781*(wr+Wt);ae[Ke+2]=Wt+Ct,ae[Ke+6]=Wt-Ct;var fn=.382683433*((wt=st+ce)-(wr=yt+vt)),$n=.5411961*wt+fn,Tt=1.306562965*wr+fn,Ln=.707106781*(rr=ce+yt),Kn=vt+Ln,ir=vt-Ln;ae[Ke+5]=ir+$n,ae[Ke+3]=ir-$n,ae[Ke+1]=Kn+Tt,ae[Ke+7]=Kn-Tt,Ke+=8}for(Ke=0,Je=0;Je<8;++Je){Me=ae[Ke],be=ae[Ke+8],Ae=ae[Ke+16],pe=ae[Ke+24],Fe=ae[Ke+32],Ge=ae[Ke+40],Ze=ae[Ke+48];var Dn=Me+(He=ae[Ke+56]),Zn=Me-He,Br=be+Ze,Pr=be-Ze,tn=Ae+Ge,Ee=Ae-Ge,ze=pe+Fe,ke=pe-Fe,Re=Dn+ze,Oe=Dn-ze,qe=Br+tn,ct=Br-tn;ae[Ke]=Re+qe,ae[Ke+32]=Re-qe;var xt=.707106781*(ct+Oe);ae[Ke+16]=Oe+xt,ae[Ke+48]=Oe-xt;var lt=.382683433*((Re=ke+Ee)-(ct=Pr+Zn)),ft=.5411961*Re+lt,At=1.306562965*ct+lt,Pt=.707106781*(qe=Ee+Pr),It=Zn+Pt,Jt=Zn-Pt;ae[Ke+40]=Jt+ft,ae[Ke+24]=Jt-ft,ae[Ke+8]=It+At,ae[Ke+56]=It-At,Ke++}for(Je=0;Je<64;++Je)Ye=ae[Je]*_e[Je],A[Je]=Ye>0?Ye+.5|0:Ye-.5|0;return A}(P,z),Be=0;Be<64;++Be)d[I[Be]]=xe[Be];var Y=d[0]-K;K=d[0],Y==0?U(J[0]):(U(J[f[ge=32767+Y]]),U(h[ge]));for(var Ve=63;Ve>0&&d[Ve]==0;)Ve--;if(Ve==0)return U(le),K;for(var te,se=1;se<=Ve;){for(var Z=se;d[se]==0&&se<=Ve;)++se;var he=se-Z;if(he>=16){te=he>>4;for(var ne=1;ne<=te;++ne)U(me);he&=15}ge=32767+d[se],U(ue[(he<<4)+f[ge]]),U(h[ge]),se++}return Ve!=63&&U(le),K}function oe(P){P=Math.min(Math.max(P,1),100),a!=P&&(function(z){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var ue=s((K[J]*z+50)/100);ue=Math.min(Math.max(ue,1),255),o[I[J]]=ue}for(var ge=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],le=0;le<64;le++){var me=s((ge[le]*z+50)/100);me=Math.min(Math.max(me,1),255),l[I[le]]=me}for(var xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Be=0,Y=0;Y<8;Y++)for(var Ve=0;Ve<8;Ve++)u[Be]=1/(o[I[Be]]*xe[Y]*xe[Ve]*8),c[Be]=1/(l[I[Be]]*xe[Y]*xe[Ve]*8),Be++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),a=P)}this.encode=function(P,z){z&&oe(z),p=new Array,y=0,v=7,Q(65496),Q(65504),Q(16),W(74),W(70),W(73),W(70),W(0),W(1),W(1),W(0),Q(1),Q(1),W(0),W(0),function(){Q(65499),Q(132),W(0);for(var be=0;be<64;be++)W(o[be]);W(1);for(var Ae=0;Ae<64;Ae++)W(l[Ae])}(),function(be,Ae){Q(65472),Q(17),W(8),Q(Ae),Q(be),W(3),W(1),W(17),W(0),W(2),W(17),W(1),W(3),W(17),W(1)}(P.width,P.height),function(){Q(65476),Q(418),W(0);for(var be=0;be<16;be++)W(B[be+1]);for(var Ae=0;Ae<=11;Ae++)W(T[Ae]);W(16);for(var pe=0;pe<16;pe++)W(M[pe+1]);for(var Fe=0;Fe<=161;Fe++)W(F[Fe]);W(1);for(var Ge=0;Ge<16;Ge++)W(N[Ge+1]);for(var Ze=0;Ze<=11;Ze++)W(O[Ze]);W(17);for(var He=0;He<16;He++)W(L[He+1]);for(var Je=0;Je<=161;Je++)W(G[Je])}(),Q(65498),Q(12),W(3),W(1),W(0),W(2),W(17),W(3),W(17),W(0),W(63),W(0);var K=0,J=0,ue=0;y=0,v=7,this.encode.displayName="_encode_";for(var ge,le,me,xe,Be,Y,Ve,te,se,Z=P.data,he=P.width,ne=P.height,ae=4*he,_e=0;_e<ne;){for(ge=0;ge<ae;){for(Be=ae*_e+ge,Ve=-1,te=0,se=0;se<64;se++)Y=Be+(te=se>>3)*ae+(Ve=4*(7&se)),_e+te>=ne&&(Y-=ae*(_e+1+te-ne)),ge+Ve>=ae&&(Y-=ge+Ve-ae+4),le=Z[Y++],me=Z[Y++],xe=Z[Y++],w[se]=(S[le]+S[me+256>>0]+S[xe+512>>0]>>16)-128,x[se]=(S[le+768>>0]+S[me+1024>>0]+S[xe+1280>>0]>>16)-128,b[se]=(S[le+1280>>0]+S[me+1536>>0]+S[xe+1792>>0]>>16)-128;K=re(w,u,K,e,n),J=re(x,c,J,t,i),ue=re(b,c,ue,t,i),ge+=32}_e+=8}if(v>=0){var Me=[];Me[1]=v+1,Me[0]=(1<<v+1)-1,U(Me)}return Q(65497),new Uint8Array(p)},r=r||50,function(){for(var P=String.fromCharCode,z=0;z<256;z++)C[z]=P(z)}(),e=R(B,T),t=R(N,O),n=R(M,F),i=R(L,G),function(){for(var P=1,z=2,K=1;K<=15;K++){for(var J=P;J<z;J++)f[32767+J]=K,h[32767+J]=[],h[32767+J][1]=K,h[32767+J][0]=J;for(var ue=-(z-1);ue<=-P;ue++)f[32767+ue]=K,h[32767+ue]=[],h[32767+ue][1]=K,h[32767+ue][0]=z-1+ue;P<<=1,z<<=1}}(),function(){for(var P=0;P<256;P++)S[P]=19595*P,S[P+256>>0]=38470*P,S[P+512>>0]=7471*P+32768,S[P+768>>0]=-11059*P,S[P+1024>>0]=-21709*P,S[P+1280>>0]=32768*P+8421375,S[P+1536>>0]=-27439*P,S[P+1792>>0]=-5329*P}(),oe(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function qu(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function nL(r){function e(B){if(!B)throw Error("assert :P")}function t(B,T,M){for(var F=0;4>F;F++)if(B[T+F]!=M.charCodeAt(F))return!0;return!1}function n(B,T,M,F,N){for(var O=0;O<N;O++)B[T+O]=M[F+O]}function i(B,T,M,F){for(var N=0;N<F;N++)B[T+N]=M}function a(B){return new Int32Array(B)}function s(B,T){for(var M=[],F=0;F<B;F++)M.push(new T);return M}function o(B,T){var M=[];return function F(N,O,L){for(var G=L[O],R=0;R<G&&(N.push(L.length>O+1?[]:new T),!(L.length<O+1));R++)F(N[R],O+1,L)}(M,0,B),M}var l=function(){var B=this;function T(D,H){for(var X=1<<H-1>>>0;D&X;)X>>>=1;return X?(D&X-1)+X:D}function M(D,H,X,fe,we){e(!(fe%X));do D[H+(fe-=X)]=we;while(0<fe)}function F(D,H,X,fe,we){if(e(2328>=we),512>=we)var Ce=a(512);else if((Ce=a(we))==null)return 0;return function(Se,Ie,De,Qe,et,dt){var gt,ot,Ot=Ie,bt=1<<De,rt=a(16),it=a(16);for(e(et!=0),e(Qe!=null),e(Se!=null),e(0<De),ot=0;ot<et;++ot){if(15<Qe[ot])return 0;++rt[Qe[ot]]}if(rt[0]==et)return 0;for(it[1]=0,gt=1;15>gt;++gt){if(rt[gt]>1<<gt)return 0;it[gt+1]=it[gt]+rt[gt]}for(ot=0;ot<et;++ot)gt=Qe[ot],0<Qe[ot]&&(dt[it[gt]++]=ot);if(it[15]==1)return(Qe=new N).g=0,Qe.value=dt[0],M(Se,Ot,1,bt,Qe),bt;var Mt,Ht=-1,kt=bt-1,fr=0,tr=1,Dr=1,sr=1<<De;for(ot=0,gt=1,et=2;gt<=De;++gt,et<<=1){if(tr+=Dr<<=1,0>(Dr-=rt[gt]))return 0;for(;0<rt[gt];--rt[gt])(Qe=new N).g=gt,Qe.value=dt[ot++],M(Se,Ot+fr,et,sr,Qe),fr=T(fr,gt)}for(gt=De+1,et=2;15>=gt;++gt,et<<=1){if(tr+=Dr<<=1,0>(Dr-=rt[gt]))return 0;for(;0<rt[gt];--rt[gt]){if(Qe=new N,(fr&kt)!=Ht){for(Ot+=sr,Mt=1<<(Ht=gt)-De;15>Ht&&!(0>=(Mt-=rt[Ht]));)++Ht,Mt<<=1;bt+=sr=1<<(Mt=Ht-De),Se[Ie+(Ht=fr&kt)].g=Mt+De,Se[Ie+Ht].value=Ot-Ie-Ht}Qe.g=gt-De,Qe.value=dt[ot++],M(Se,Ot+(fr>>De),et,sr,Qe),fr=T(fr,gt)}}return tr!=2*it[15]-1?0:bt}(D,H,X,fe,we,Ce)}function N(){this.value=this.g=0}function O(){this.value=this.g=0}function L(){this.G=s(5,N),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Ya,O)}function G(D,H,X,fe){e(D!=null),e(H!=null),e(2147483648>fe),D.Ca=254,D.I=0,D.b=-8,D.Ka=0,D.oa=H,D.pa=X,D.Jd=H,D.Yc=X+fe,D.Zc=4<=fe?X+fe-4+1:X,ge(D)}function R(D,H){for(var X=0;0<H--;)X|=me(D,128)<<H;return X}function U(D,H){var X=R(D,H);return le(D)?-X:X}function W(D,H,X,fe){var we,Ce=0;for(e(D!=null),e(H!=null),e(4294967288>fe),D.Sb=fe,D.Ra=0,D.u=0,D.h=0,4<fe&&(fe=4),we=0;we<fe;++we)Ce+=H[X+we]<<8*we;D.Ra=Ce,D.bb=fe,D.oa=H,D.pa=X}function Q(D){for(;8<=D.u&&D.bb<D.Sb;)D.Ra>>>=8,D.Ra+=D.oa[D.pa+D.bb]<<wh-8>>>0,++D.bb,D.u-=8;K(D)&&(D.h=1,D.u=0)}function re(D,H){if(e(0<=H),!D.h&&H<=Bf){var X=z(D)&Sf[H];return D.u+=H,Q(D),X}return D.h=1,D.u=0}function oe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(D){return D.Ra>>>(D.u&wh-1)>>>0}function K(D){return e(D.bb<=D.Sb),D.h||D.bb==D.Sb&&D.u>wh}function J(D,H){D.u=H,D.h=K(D)}function ue(D){D.u>=Tf&&(e(D.u>=Tf),Q(D))}function ge(D){e(D!=null&&D.oa!=null),D.pa<D.Zc?(D.I=(D.oa[D.pa++]|D.I<<8)>>>0,D.b+=8):(e(D!=null&&D.oa!=null),D.pa<D.Yc?(D.b+=8,D.I=D.oa[D.pa++]|D.I<<8):D.Ka?D.b=0:(D.I<<=8,D.b+=8,D.Ka=1))}function le(D){return R(D,1)}function me(D,H){var X=D.Ca;0>D.b&&ge(D);var fe=D.b,we=X*H>>>8,Ce=(D.I>>>fe>we)+0;for(Ce?(X-=we,D.I-=we+1<<fe>>>0):X=we+1,fe=X,we=0;256<=fe;)we+=8,fe>>=8;return fe=7^we+Is[fe],D.b-=fe,D.Ca=(X<<fe)-1,Ce}function xe(D,H,X){D[H+0]=X>>24&255,D[H+1]=X>>16&255,D[H+2]=X>>8&255,D[H+3]=X>>0&255}function Be(D,H){return D[H+0]<<0|D[H+1]<<8}function Y(D,H){return Be(D,H)|D[H+2]<<16}function Ve(D,H){return Be(D,H)|Be(D,H+2)<<16}function te(D,H){var X=1<<H;return e(D!=null),e(0<H),D.X=a(X),D.X==null?0:(D.Mb=32-H,D.Xa=H,1)}function se(D,H){e(D!=null),e(H!=null),e(D.Xa==H.Xa),n(H.X,0,D.X,0,1<<H.Xa)}function Z(){this.X=[],this.Xa=this.Mb=0}function he(D,H,X,fe){e(X!=null),e(fe!=null);var we=X[0],Ce=fe[0];return we==0&&(we=(D*Ce+H/2)/H),Ce==0&&(Ce=(H*we+D/2)/D),0>=we||0>=Ce?0:(X[0]=we,fe[0]=Ce,1)}function ne(D,H){return D+(1<<H)-1>>>H}function ae(D,H){return((4278255360&D)+(4278255360&H)>>>0&4278255360)+((16711935&D)+(16711935&H)>>>0&16711935)>>>0}function _e(D,H){B[H]=function(X,fe,we,Ce,Se,Ie,De){var Qe;for(Qe=0;Qe<Se;++Qe){var et=B[D](Ie[De+Qe-1],we,Ce+Qe);Ie[De+Qe]=ae(X[fe+Qe],et)}}}function Me(){this.ud=this.hd=this.jd=0}function be(D,H){return((4278124286&(D^H))>>>1)+(D&H)>>>0}function Ae(D){return 0<=D&&256>D?D:0>D?0:255<D?255:void 0}function pe(D,H){return Ae(D+(D-H+.5>>1))}function Fe(D,H,X){return Math.abs(H-X)-Math.abs(D-X)}function Ge(D,H,X,fe,we,Ce,Se){for(fe=Ce[Se-1],X=0;X<we;++X)Ce[Se+X]=fe=ae(D[H+X],fe)}function Ze(D,H,X,fe,we){var Ce;for(Ce=0;Ce<X;++Ce){var Se=D[H+Ce],Ie=Se>>8&255,De=16711935&(De=(De=16711935&Se)+((Ie<<16)+Ie));fe[we+Ce]=(4278255360&Se)+De>>>0}}function He(D,H){H.jd=D>>0&255,H.hd=D>>8&255,H.ud=D>>16&255}function Je(D,H,X,fe,we,Ce){var Se;for(Se=0;Se<fe;++Se){var Ie=H[X+Se],De=Ie>>>8,Qe=Ie,et=255&(et=(et=Ie>>>16)+((D.jd<<24>>24)*(De<<24>>24)>>>5));Qe=255&(Qe=(Qe=Qe+((D.hd<<24>>24)*(De<<24>>24)>>>5))+((D.ud<<24>>24)*(et<<24>>24)>>>5)),we[Ce+Se]=(4278255360&Ie)+(et<<16)+Qe}}function Ye(D,H,X,fe,we){B[H]=function(Ce,Se,Ie,De,Qe,et,dt,gt,ot){for(De=dt;De<gt;++De)for(dt=0;dt<ot;++dt)Qe[et++]=we(Ie[fe(Ce[Se++])])},B[D]=function(Ce,Se,Ie,De,Qe,et,dt){var gt=8>>Ce.b,ot=Ce.Ea,Ot=Ce.K[0],bt=Ce.w;if(8>gt)for(Ce=(1<<Ce.b)-1,bt=(1<<gt)-1;Se<Ie;++Se){var rt,it=0;for(rt=0;rt<ot;++rt)rt&Ce||(it=fe(De[Qe++])),et[dt++]=we(Ot[it&bt]),it>>=gt}else B["VP8LMapColor"+X](De,Qe,Ot,bt,et,dt,Se,Ie,ot)}}function Ke(D,H,X,fe,we){for(X=H+X;H<X;){var Ce=D[H++];fe[we++]=Ce>>16&255,fe[we++]=Ce>>8&255,fe[we++]=Ce>>0&255}}function mt(D,H,X,fe,we){for(X=H+X;H<X;){var Ce=D[H++];fe[we++]=Ce>>16&255,fe[we++]=Ce>>8&255,fe[we++]=Ce>>0&255,fe[we++]=Ce>>24&255}}function vt(D,H,X,fe,we){for(X=H+X;H<X;){var Ce=(Se=D[H++])>>16&240|Se>>12&15,Se=Se>>0&240|Se>>28&15;fe[we++]=Ce,fe[we++]=Se}}function Dt(D,H,X,fe,we){for(X=H+X;H<X;){var Ce=(Se=D[H++])>>16&248|Se>>13&7,Se=Se>>5&224|Se>>3&31;fe[we++]=Ce,fe[we++]=Se}}function yt(D,H,X,fe,we){for(X=H+X;H<X;){var Ce=D[H++];fe[we++]=Ce>>0&255,fe[we++]=Ce>>8&255,fe[we++]=Ce>>16&255}}function Ar(D,H,X,fe,we,Ce){if(Ce==0)for(X=H+X;H<X;)xe(fe,((Ce=D[H++])[0]>>24|Ce[1]>>8&65280|Ce[2]<<8&16711680|Ce[3]<<24)>>>0),we+=32;else n(fe,we,D,H,X)}function ce(D,H){B[H][0]=B[D+"0"],B[H][1]=B[D+"1"],B[H][2]=B[D+"2"],B[H][3]=B[D+"3"],B[H][4]=B[D+"4"],B[H][5]=B[D+"5"],B[H][6]=B[D+"6"],B[H][7]=B[D+"7"],B[H][8]=B[D+"8"],B[H][9]=B[D+"9"],B[H][10]=B[D+"10"],B[H][11]=B[D+"11"],B[H][12]=B[D+"12"],B[H][13]=B[D+"13"],B[H][14]=B[D+"0"],B[H][15]=B[D+"0"]}function Ue(D){return D==CE||D==SE||D==ty||D==BE}function st(){this.eb=[],this.size=this.A=this.fb=0}function wt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Wt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new st,this.f.kb=new wt,this.sd=null}function rr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function wr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ct(D){return alert("todo:WebPSamplerProcessPlane"),D.T}function fn(D,H){var X=D.T,fe=H.ba.f.RGBA,we=fe.eb,Ce=fe.fb+D.ka*fe.A,Se=ru[H.ba.S],Ie=D.y,De=D.O,Qe=D.f,et=D.N,dt=D.ea,gt=D.W,ot=H.cc,Ot=H.dc,bt=H.Mc,rt=H.Nc,it=D.ka,Mt=D.ka+D.T,Ht=D.U,kt=Ht+1>>1;for(it==0?Se(Ie,De,null,null,Qe,et,dt,gt,Qe,et,dt,gt,we,Ce,null,null,Ht):(Se(H.ec,H.fc,Ie,De,ot,Ot,bt,rt,Qe,et,dt,gt,we,Ce-fe.A,we,Ce,Ht),++X);it+2<Mt;it+=2)ot=Qe,Ot=et,bt=dt,rt=gt,et+=D.Rc,gt+=D.Rc,Ce+=2*fe.A,Se(Ie,(De+=2*D.fa)-D.fa,Ie,De,ot,Ot,bt,rt,Qe,et,dt,gt,we,Ce-fe.A,we,Ce,Ht);return De+=D.fa,D.j+Mt<D.o?(n(H.ec,H.fc,Ie,De,Ht),n(H.cc,H.dc,Qe,et,kt),n(H.Mc,H.Nc,dt,gt,kt),X--):1&Mt||Se(Ie,De,null,null,Qe,et,dt,gt,Qe,et,dt,gt,we,Ce+fe.A,null,null,Ht),X}function $n(D,H,X){var fe=D.F,we=[D.J];if(fe!=null){var Ce=D.U,Se=H.ba.S,Ie=Se==ey||Se==ty;H=H.ba.f.RGBA;var De=[0],Qe=D.ka;De[0]=D.T,D.Kb&&(Qe==0?--De[0]:(--Qe,we[0]-=D.width),D.j+D.ka+D.T==D.o&&(De[0]=D.o-D.j-Qe));var et=H.eb;Qe=H.fb+Qe*H.A,D=Wn(fe,we[0],D.width,Ce,De,et,Qe+(Ie?0:3),H.A),e(X==De),D&&Ue(Se)&&ci(et,Qe,Ie,Ce,De,H.A)}return 0}function Tt(D){var H=D.ma,X=H.ba.S,fe=11>X,we=X==Z1||X==J1||X==ey||X==bE||X==12||Ue(X);if(H.memory=null,H.Ib=null,H.Jb=null,H.Nd=null,!td(H.Oa,D,we?11:12))return 0;if(we&&Ue(X)&&Ut(),D.da)alert("todo:use_scaling");else{if(fe){if(H.Ib=Ct,D.Kb){if(X=D.U+1>>1,H.memory=a(D.U+2*X),H.memory==null)return 0;H.ec=H.memory,H.fc=0,H.cc=H.ec,H.dc=H.fc+D.U,H.Mc=H.cc,H.Nc=H.dc+X,H.Ib=fn,Ut()}}else alert("todo:EmitYUV");we&&(H.Jb=$n,fe&&ut())}if(fe&&!sT){for(D=0;256>D;++D)Eq[D]=89858*(D-128)+ny>>ry,Sq[D]=-22014*(D-128)+ny,Cq[D]=-45773*(D-128),bq[D]=113618*(D-128)+ny>>ry;for(D=Jp;D<IE;++D)H=76283*(D-16)+ny>>ry,Bq[D-Jp]=Ni(H,255),Tq[D-Jp]=Ni(H+8>>4,15);sT=1}return 1}function Ln(D){var H=D.ma,X=D.U,fe=D.T;return e(!(1&D.ka)),0>=X||0>=fe?0:(X=H.Ib(D,H),H.Jb!=null&&H.Jb(D,H,X),H.Dc+=X,1)}function Kn(D){D.ma.memory=null}function ir(D,H,X,fe){return re(D,8)!=47?0:(H[0]=re(D,14)+1,X[0]=re(D,14)+1,fe[0]=re(D,1),re(D,3)!=0?0:!D.h)}function Dn(D,H){if(4>D)return D+1;var X=D-2>>1;return(2+(1&D)<<X)+re(H,X)+1}function Zn(D,H){return 120<H?H-120:1<=(X=((X=uq[H-1])>>4)*D+(8-(15&X)))?X:1;var X}function Br(D,H,X){var fe=z(X),we=D[H+=255&fe].g-8;return 0<we&&(J(X,X.u+8),fe=z(X),H+=D[H].value,H+=fe&(1<<we)-1),J(X,X.u+D[H].g),D[H].value}function Pr(D,H,X){return X.g+=D.g,X.value+=D.value<<H>>>0,e(8>=X.g),D.g}function tn(D,H,X){var fe=D.xc;return e((H=fe==0?0:D.vc[D.md*(X>>fe)+(H>>fe)])<D.Wb),D.Ya[H]}function Ee(D,H,X,fe){var we=D.ab,Ce=D.c*H,Se=D.C;H=Se+H;var Ie=X,De=fe;for(fe=D.Ta,X=D.Ua;0<we--;){var Qe=D.gc[we],et=Se,dt=H,gt=Ie,ot=De,Ot=(De=fe,Ie=X,Qe.Ea);switch(e(et<dt),e(dt<=Qe.nc),Qe.hc){case 2:If(gt,ot,(dt-et)*Ot,De,Ie);break;case 0:var bt=et,rt=dt,it=De,Mt=Ie,Ht=(sr=Qe).Ea;bt==0&&(Xp(gt,ot,null,null,1,it,Mt),Ge(gt,ot+1,0,0,Ht-1,it,Mt+1),ot+=Ht,Mt+=Ht,++bt);for(var kt=1<<sr.b,fr=kt-1,tr=ne(Ht,sr.b),Dr=sr.K,sr=sr.w+(bt>>sr.b)*tr;bt<rt;){var ui=Dr,wi=sr,Jn=1;for(Nf(gt,ot,it,Mt-Ht,1,it,Mt);Jn<Ht;){var kn=(Jn&~fr)+kt;kn>Ht&&(kn=Ht),(0,Nc[ui[wi++]>>8&15])(gt,ot+ +Jn,it,Mt+Jn-Ht,kn-Jn,it,Mt+Jn),Jn=kn}ot+=Ht,Mt+=Ht,++bt&fr||(sr+=tr)}dt!=Qe.nc&&n(De,Ie-Ot,De,Ie+(dt-et-1)*Ot,Ot);break;case 1:for(Ot=gt,rt=ot,Ht=(gt=Qe.Ea)-(Mt=gt&~(it=(ot=1<<Qe.b)-1)),bt=ne(gt,Qe.b),kt=Qe.K,Qe=Qe.w+(et>>Qe.b)*bt;et<dt;){for(fr=kt,tr=Qe,Dr=new Me,sr=rt+Mt,ui=rt+gt;rt<sr;)He(fr[tr++],Dr),nl(Dr,Ot,rt,ot,De,Ie),rt+=ot,Ie+=ot;rt<ui&&(He(fr[tr++],Dr),nl(Dr,Ot,rt,Ht,De,Ie),rt+=Ht,Ie+=Ht),++et&it||(Qe+=bt)}break;case 3:if(gt==De&&ot==Ie&&0<Qe.b){for(rt=De,gt=Ot=Ie+(dt-et)*Ot-(Mt=(dt-et)*ne(Qe.Ea,Qe.b)),ot=De,it=Ie,bt=[],Mt=(Ht=Mt)-1;0<=Mt;--Mt)bt[Mt]=ot[it+Mt];for(Mt=Ht-1;0<=Mt;--Mt)rt[gt+Mt]=bt[Mt];rl(Qe,et,dt,De,Ot,De,Ie)}else rl(Qe,et,dt,gt,ot,De,Ie)}Ie=fe,De=X}De!=X&&n(fe,X,Ie,De,Ce)}function ze(D,H){var X=D.V,fe=D.Ba+D.c*D.C,we=H-D.C;if(e(H<=D.l.o),e(16>=we),0<we){var Ce=D.l,Se=D.Ta,Ie=D.Ua,De=Ce.width;if(Ee(D,we,X,fe),we=Ie=[Ie],e((X=D.C)<(fe=H)),e(Ce.v<Ce.va),fe>Ce.o&&(fe=Ce.o),X<Ce.j){var Qe=Ce.j-X;X=Ce.j,we[0]+=Qe*De}if(X>=fe?X=0:(we[0]+=4*Ce.v,Ce.ka=X-Ce.j,Ce.U=Ce.va-Ce.v,Ce.T=fe-X,X=1),X){if(Ie=Ie[0],11>(X=D.ca).S){var et=X.f.RGBA,dt=(fe=X.S,we=Ce.U,Ce=Ce.T,Qe=et.eb,et.A),gt=Ce;for(et=et.fb+D.Ma*et.A;0<gt--;){var ot=Se,Ot=Ie,bt=we,rt=Qe,it=et;switch(fe){case X1:Xs(ot,Ot,bt,rt,it);break;case Z1:hs(ot,Ot,bt,rt,it);break;case CE:hs(ot,Ot,bt,rt,it),ci(rt,it,0,bt,1,0);break;case X3:E(ot,Ot,bt,rt,it);break;case J1:Ar(ot,Ot,bt,rt,it,1);break;case SE:Ar(ot,Ot,bt,rt,it,1),ci(rt,it,0,bt,1,0);break;case ey:Ar(ot,Ot,bt,rt,it,0);break;case ty:Ar(ot,Ot,bt,rt,it,0),ci(rt,it,1,bt,1,0);break;case bE:wa(ot,Ot,bt,rt,it);break;case BE:wa(ot,Ot,bt,rt,it),un(rt,it,bt,1,0);break;case Z3:La(ot,Ot,bt,rt,it);break;default:e(0)}Ie+=De,et+=dt}D.Ma+=Ce}else alert("todo:EmitRescaledRowsYUVA");e(D.Ma<=X.height)}}D.C=H,e(D.C<=D.i)}function ke(D){var H;if(0<D.ua)return 0;for(H=0;H<D.Wb;++H){var X=D.Ya[H].G,fe=D.Ya[H].H;if(0<X[1][fe[1]+0].g||0<X[2][fe[2]+0].g||0<X[3][fe[3]+0].g)return 0}return 1}function Re(D,H,X,fe,we,Ce){if(D.Z!=0){var Se=D.qd,Ie=D.rd;for(e(Df[D.Z]!=null);H<X;++H)Df[D.Z](Se,Ie,fe,we,fe,we,Ce),Se=fe,Ie=we,we+=Ce;D.qd=Se,D.rd=Ie}}function Oe(D,H){var X=D.l.ma,fe=X.Z==0||X.Z==1?D.l.j:D.C;if(fe=D.C<fe?fe:D.C,e(H<=D.l.o),H>fe){var we=D.l.width,Ce=X.ca,Se=X.tb+we*fe,Ie=D.V,De=D.Ba+D.c*fe,Qe=D.gc;e(D.ab==1),e(Qe[0].hc==3),nd(Qe[0],fe,H,Ie,De,Ce,Se),Re(X,fe,H,Ce,Se,we)}D.C=D.Ma=H}function qe(D,H,X,fe,we,Ce,Se){var Ie=D.$/fe,De=D.$%fe,Qe=D.m,et=D.s,dt=X+D.$,gt=dt;we=X+fe*we;var ot=X+fe*Ce,Ot=280+et.ua,bt=D.Pb?Ie:16777216,rt=0<et.ua?et.Wa:null,it=et.wc,Mt=dt<ot?tn(et,De,Ie):null;e(D.C<Ce),e(ot<=we);var Ht=!1;e:for(;;){for(;Ht||dt<ot;){var kt=0;if(Ie>=bt){var fr=dt-X;e((bt=D).Pb),bt.wd=bt.m,bt.xd=fr,0<bt.s.ua&&se(bt.s.Wa,bt.s.vb),bt=Ie+hq}if(De&it||(Mt=tn(et,De,Ie)),e(Mt!=null),Mt.Qb&&(H[dt]=Mt.qb,Ht=!0),!Ht)if(ue(Qe),Mt.jc){kt=Qe,fr=H;var tr=dt,Dr=Mt.pd[z(kt)&Ya-1];e(Mt.jc),256>Dr.g?(J(kt,kt.u+Dr.g),fr[tr]=Dr.value,kt=0):(J(kt,kt.u+Dr.g-256),e(256<=Dr.value),kt=Dr.value),kt==0&&(Ht=!0)}else kt=Br(Mt.G[0],Mt.H[0],Qe);if(Qe.h)break;if(Ht||256>kt){if(!Ht)if(Mt.nd)H[dt]=(Mt.qb|kt<<8)>>>0;else{if(ue(Qe),Ht=Br(Mt.G[1],Mt.H[1],Qe),ue(Qe),fr=Br(Mt.G[2],Mt.H[2],Qe),tr=Br(Mt.G[3],Mt.H[3],Qe),Qe.h)break;H[dt]=(tr<<24|Ht<<16|kt<<8|fr)>>>0}if(Ht=!1,++dt,++De>=fe&&(De=0,++Ie,Se!=null&&Ie<=Ce&&!(Ie%16)&&Se(D,Ie),rt!=null))for(;gt<dt;)kt=H[gt++],rt.X[(506832829*kt&4294967295)>>>rt.Mb]=kt}else if(280>kt){if(kt=Dn(kt-256,Qe),fr=Br(Mt.G[4],Mt.H[4],Qe),ue(Qe),fr=Zn(fe,fr=Dn(fr,Qe)),Qe.h)break;if(dt-X<fr||we-dt<kt)break e;for(tr=0;tr<kt;++tr)H[dt+tr]=H[dt+tr-fr];for(dt+=kt,De+=kt;De>=fe;)De-=fe,++Ie,Se!=null&&Ie<=Ce&&!(Ie%16)&&Se(D,Ie);if(e(dt<=we),De&it&&(Mt=tn(et,De,Ie)),rt!=null)for(;gt<dt;)kt=H[gt++],rt.X[(506832829*kt&4294967295)>>>rt.Mb]=kt}else{if(!(kt<Ot))break e;for(Ht=kt-280,e(rt!=null);gt<dt;)kt=H[gt++],rt.X[(506832829*kt&4294967295)>>>rt.Mb]=kt;kt=dt,e(!(Ht>>>(fr=rt).Xa)),H[kt]=fr.X[Ht],Ht=!0}Ht||e(Qe.h==K(Qe))}if(D.Pb&&Qe.h&&dt<we)e(D.m.h),D.a=5,D.m=D.wd,D.$=D.xd,0<D.s.ua&&se(D.s.vb,D.s.Wa);else{if(Qe.h)break e;Se!=null&&Se(D,Ie>Ce?Ce:Ie),D.a=0,D.$=dt-X}return 1}return D.a=3,0}function ct(D){e(D!=null),D.vc=null,D.yc=null,D.Ya=null;var H=D.Wa;H!=null&&(H.X=null),D.vb=null,e(D!=null)}function xt(){var D=new Nl;return D==null?null:(D.a=0,D.xb=tT,ce("Predictor","VP8LPredictors"),ce("Predictor","VP8LPredictors_C"),ce("PredictorAdd","VP8LPredictorsAdd"),ce("PredictorAdd","VP8LPredictorsAdd_C"),If=Ze,nl=Je,Xs=Ke,hs=mt,wa=vt,La=Dt,E=yt,B.VP8LMapColor32b=_h,B.VP8LMapColor8b=w0,D)}function lt(D,H,X,fe,we){var Ce=1,Se=[D],Ie=[H],De=fe.m,Qe=fe.s,et=null,dt=0;e:for(;;){if(X)for(;Ce&&re(De,1);){var gt=Se,ot=Ie,Ot=fe,bt=1,rt=Ot.m,it=Ot.gc[Ot.ab],Mt=re(rt,2);if(Ot.Oc&1<<Mt)Ce=0;else{switch(Ot.Oc|=1<<Mt,it.hc=Mt,it.Ea=gt[0],it.nc=ot[0],it.K=[null],++Ot.ab,e(4>=Ot.ab),Mt){case 0:case 1:it.b=re(rt,3)+2,bt=lt(ne(it.Ea,it.b),ne(it.nc,it.b),0,Ot,it.K),it.K=it.K[0];break;case 3:var Ht,kt=re(rt,8)+1,fr=16<kt?0:4<kt?1:2<kt?2:3;if(gt[0]=ne(it.Ea,fr),it.b=fr,Ht=bt=lt(kt,1,0,Ot,it.K)){var tr,Dr=kt,sr=it,ui=1<<(8>>sr.b),wi=a(ui);if(wi==null)Ht=0;else{var Jn=sr.K[0],kn=sr.w;for(wi[0]=sr.K[0][0],tr=1;tr<1*Dr;++tr)wi[tr]=ae(Jn[kn+tr],wi[tr-1]);for(;tr<4*ui;++tr)wi[tr]=0;sr.K[0]=null,sr.K[0]=wi,Ht=1}}bt=Ht;break;case 2:break;default:e(0)}Ce=bt}}if(Se=Se[0],Ie=Ie[0],Ce&&re(De,1)&&!(Ce=1<=(dt=re(De,4))&&11>=dt)){fe.a=3;break e}var ki;if(ki=Ce)t:{var Ii,dn,Da,il=fe,ka=Se,al=Ie,_i=dt,Il=X,Fl=il.m,fs=il.s,Ms=[null],ko=1,nu=0,Ic=cq[_i];r:for(;;){if(Il&&re(Fl,1)){var As=re(Fl,3)+2,Ch=ne(ka,As),ad=ne(al,As),E0=Ch*ad;if(!lt(Ch,ad,0,il,Ms))break r;for(Ms=Ms[0],fs.xc=As,Ii=0;Ii<E0;++Ii){var kf=Ms[Ii]>>8&65535;Ms[Ii]=kf,kf>=ko&&(ko=kf+1)}}if(Fl.h)break r;for(dn=0;5>dn;++dn){var ha=J3[dn];!dn&&0<_i&&(ha+=1<<_i),nu<ha&&(nu=ha)}var FE=s(ko*Ic,N),uT=ko,cT=s(uT,L);if(cT==null)var ay=null;else e(65536>=uT),ay=cT;var em=a(nu);if(ay==null||em==null||FE==null){il.a=1;break r}var sy=FE;for(Ii=Da=0;Ii<ko;++Ii){var Ou=ay[Ii],b0=Ou.G,C0=Ou.H,hT=0,oy=1,fT=0;for(dn=0;5>dn;++dn){ha=J3[dn],b0[dn]=sy,C0[dn]=Da,!dn&&0<_i&&(ha+=1<<_i);i:{var ly,ME=ha,uy=il,tm=em,Fq=sy,Mq=Da,LE=0,Rf=uy.m,Lq=re(Rf,1);if(i(tm,0,0,ME),Lq){var Dq=re(Rf,1)+1,kq=re(Rf,1),AT=re(Rf,kq==0?1:8);tm[AT]=1,Dq==2&&(tm[AT=re(Rf,8)]=1);var cy=1}else{var dT=a(19),gT=re(Rf,4)+4;if(19<gT){uy.a=3;var hy=0;break i}for(ly=0;ly<gT;++ly)dT[lq[ly]]=re(Rf,3);var DE=void 0,rm=void 0,pT=uy,Rq=dT,fy=ME,mT=tm,kE=0,Of=pT.m,vT=8,yT=s(128,N);n:for(;F(yT,0,7,Rq,19);){if(re(Of,1)){var Oq=2+2*re(Of,3);if((DE=2+re(Of,Oq))>fy)break n}else DE=fy;for(rm=0;rm<fy&&DE--;){ue(Of);var xT=yT[0+(127&z(Of))];J(Of,Of.u+xT.g);var S0=xT.value;if(16>S0)mT[rm++]=S0,S0!=0&&(vT=S0);else{var Pq=S0==16,wT=S0-16,Uq=sq[wT],_T=re(Of,aq[wT])+Uq;if(rm+_T>fy)break n;for(var Qq=Pq?vT:0;0<_T--;)mT[rm++]=Qq}}kE=1;break n}kE||(pT.a=3),cy=kE}(cy=cy&&!Rf.h)&&(LE=F(Fq,Mq,8,tm,ME)),cy&&LE!=0?hy=LE:(uy.a=3,hy=0)}if(hy==0)break r;if(oy&&oq[dn]==1&&(oy=sy[Da].g==0),hT+=sy[Da].g,Da+=hy,3>=dn){var nm,RE=em[0];for(nm=1;nm<ha;++nm)em[nm]>RE&&(RE=em[nm]);fT+=RE}}if(Ou.nd=oy,Ou.Qb=0,oy&&(Ou.qb=(b0[3][C0[3]+0].value<<24|b0[1][C0[1]+0].value<<16|b0[2][C0[2]+0].value)>>>0,hT==0&&256>b0[0][C0[0]+0].value&&(Ou.Qb=1,Ou.qb+=b0[0][C0[0]+0].value<<8)),Ou.jc=!Ou.Qb&&6>fT,Ou.jc){var Ay,Sh=Ou;for(Ay=0;Ay<Ya;++Ay){var Pf=Ay,Uf=Sh.pd[Pf],dy=Sh.G[0][Sh.H[0]+Pf];256<=dy.value?(Uf.g=dy.g+256,Uf.value=dy.value):(Uf.g=0,Uf.value=0,Pf>>=Pr(dy,8,Uf),Pf>>=Pr(Sh.G[1][Sh.H[1]+Pf],16,Uf),Pf>>=Pr(Sh.G[2][Sh.H[2]+Pf],0,Uf),Pr(Sh.G[3][Sh.H[3]+Pf],24,Uf))}}}fs.vc=Ms,fs.Wb=ko,fs.Ya=ay,fs.yc=FE,ki=1;break t}ki=0}if(!(Ce=ki)){fe.a=3;break e}if(0<dt){if(Qe.ua=1<<dt,!te(Qe.Wa,dt)){fe.a=1,Ce=0;break e}}else Qe.ua=0;var OE=fe,ET=Se,Gq=Ie,PE=OE.s,UE=PE.xc;if(OE.c=ET,OE.i=Gq,PE.md=ne(ET,UE),PE.wc=UE==0?-1:(1<<UE)-1,X){fe.xb=vq;break e}if((et=a(Se*Ie))==null){fe.a=1,Ce=0;break e}Ce=(Ce=qe(fe,et,0,Se,Ie,Ie,null))&&!De.h;break e}return Ce?(we!=null?we[0]=et:(e(et==null),e(X)),fe.$=0,X||ct(Qe)):ct(Qe),Ce}function ft(D,H){var X=D.c*D.i,fe=X+H+16*H;return e(D.c<=H),D.V=a(fe),D.V==null?(D.Ta=null,D.Ua=0,D.a=1,0):(D.Ta=D.V,D.Ua=D.Ba+X+H,1)}function At(D,H){var X=D.C,fe=H-X,we=D.V,Ce=D.Ba+D.c*X;for(e(H<=D.l.o);0<fe;){var Se=16<fe?16:fe,Ie=D.l.ma,De=D.l.width,Qe=De*Se,et=Ie.ca,dt=Ie.tb+De*X,gt=D.Ta,ot=D.Ua;Ee(D,Se,we,Ce),Di(gt,ot,et,dt,Qe),Re(Ie,X,X+Se,et,dt,De),fe-=Se,we+=Se*D.c,X+=Se}e(X==H),D.C=D.Ma=H}function Pt(){this.ub=this.yd=this.td=this.Rb=0}function It(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Jt(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function qt(){this.Yb=function(){var D=[];return function H(X,fe,we){for(var Ce=we[fe],Se=0;Se<Ce&&(X.push(we.length>fe+1?[]:0),!(we.length<fe+1));Se++)H(X[Se],fe+1,we)}(D,0,[3,11]),D}()}function Rt(){this.jb=a(3),this.Wc=o([4,8],qt),this.Xc=o([4,17],qt)}function hr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function An(){this.ld=this.La=this.dd=this.tc=0}function Cn(){this.Na=this.la=0}function Vn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ls(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ti(){this.uc=this.M=this.Nb=0,this.wa=Array(new An),this.Y=0,this.ya=Array(new ls),this.aa=0,this.l=new Ia}function ya(){this.y=a(16),this.f=a(8),this.ea=a(8)}function us(){this.cb=this.a=0,this.sc="",this.m=new oe,this.Od=new Pt,this.Kc=new It,this.ed=new hr,this.Qa=new Jt,this.Ic=this.$c=this.Aa=0,this.D=new Ti,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,oe),this.ia=0,this.pb=s(4,Vn),this.Pa=new Rt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ya),this.Hd=0,this.rb=Array(new Cn),this.sb=0,this.wa=Array(new An),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ls),this.L=this.aa=0,this.gd=o([4,2],An),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ia(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Fa(){var D=new us;return D!=null&&(D.a=0,D.sc="OK",D.cb=0,D.Xb=0,Zp||(Zp=No)),D}function ji(D,H,X){return D.a==0&&(D.a=H,D.sc=X,D.cb=0),0}function To(D,H,X){return 3<=X&&D[H+0]==157&&D[H+1]==1&&D[H+2]==42}function ni(D,H){if(D==null)return 0;if(D.a=0,D.sc="OK",H==null)return ji(D,2,"null VP8Io passed to VP8GetHeaders()");var X=H.data,fe=H.w,we=H.ha;if(4>we)return ji(D,7,"Truncated header.");var Ce=X[fe+0]|X[fe+1]<<8|X[fe+2]<<16,Se=D.Od;if(Se.Rb=!(1&Ce),Se.td=Ce>>1&7,Se.yd=Ce>>4&1,Se.ub=Ce>>5,3<Se.td)return ji(D,3,"Incorrect keyframe parameters.");if(!Se.yd)return ji(D,4,"Frame not displayable.");fe+=3,we-=3;var Ie=D.Kc;if(Se.Rb){if(7>we)return ji(D,7,"cannot parse picture header");if(!To(X,fe,we))return ji(D,3,"Bad code word");Ie.c=16383&(X[fe+4]<<8|X[fe+3]),Ie.Td=X[fe+4]>>6,Ie.i=16383&(X[fe+6]<<8|X[fe+5]),Ie.Ud=X[fe+6]>>6,fe+=7,we-=7,D.za=Ie.c+15>>4,D.Ub=Ie.i+15>>4,H.width=Ie.c,H.height=Ie.i,H.Da=0,H.j=0,H.v=0,H.va=H.width,H.o=H.height,H.da=0,H.ib=H.width,H.hb=H.height,H.U=H.width,H.T=H.height,i((Ce=D.Pa).jb,0,255,Ce.jb.length),e((Ce=D.Qa)!=null),Ce.Cb=0,Ce.Bb=0,Ce.Fb=1,i(Ce.Zb,0,0,Ce.Zb.length),i(Ce.Lb,0,0,Ce.Lb)}if(Se.ub>we)return ji(D,7,"bad partition length");G(Ce=D.m,X,fe,Se.ub),fe+=Se.ub,we-=Se.ub,Se.Rb&&(Ie.Ld=le(Ce),Ie.Kd=le(Ce)),Ie=D.Qa;var De,Qe=D.Pa;if(e(Ce!=null),e(Ie!=null),Ie.Cb=le(Ce),Ie.Cb){if(Ie.Bb=le(Ce),le(Ce)){for(Ie.Fb=le(Ce),De=0;4>De;++De)Ie.Zb[De]=le(Ce)?U(Ce,7):0;for(De=0;4>De;++De)Ie.Lb[De]=le(Ce)?U(Ce,6):0}if(Ie.Bb)for(De=0;3>De;++De)Qe.jb[De]=le(Ce)?R(Ce,8):255}else Ie.Bb=0;if(Ce.Ka)return ji(D,3,"cannot parse segment header");if((Ie=D.ed).zd=le(Ce),Ie.Tb=R(Ce,6),Ie.wb=R(Ce,3),Ie.Pc=le(Ce),Ie.Pc&&le(Ce)){for(Qe=0;4>Qe;++Qe)le(Ce)&&(Ie.vd[Qe]=U(Ce,6));for(Qe=0;4>Qe;++Qe)le(Ce)&&(Ie.od[Qe]=U(Ce,6))}if(D.L=Ie.Tb==0?0:Ie.zd?1:2,Ce.Ka)return ji(D,3,"cannot parse filter header");var et=we;if(we=De=fe,fe=De+et,Ie=et,D.Xb=(1<<R(D.m,2))-1,et<3*(Qe=D.Xb))X=7;else{for(De+=3*Qe,Ie-=3*Qe,et=0;et<Qe;++et){var dt=X[we+0]|X[we+1]<<8|X[we+2]<<16;dt>Ie&&(dt=Ie),G(D.Jc[+et],X,De,dt),De+=dt,Ie-=dt,we+=3}G(D.Jc[+Qe],X,De,Ie),X=De<fe?0:5}if(X!=0)return ji(D,X,"cannot parse partitions");for(X=R(De=D.m,7),we=le(De)?U(De,4):0,fe=le(De)?U(De,4):0,Ie=le(De)?U(De,4):0,Qe=le(De)?U(De,4):0,De=le(De)?U(De,4):0,et=D.Qa,dt=0;4>dt;++dt){if(et.Cb){var gt=et.Zb[dt];et.Fb||(gt+=X)}else{if(0<dt){D.pb[dt]=D.pb[0];continue}gt=X}var ot=D.pb[dt];ot.Sc[0]=TE[Ni(gt+we,127)],ot.Sc[1]=NE[Ni(gt+0,127)],ot.Eb[0]=2*TE[Ni(gt+fe,127)],ot.Eb[1]=101581*NE[Ni(gt+Ie,127)]>>16,8>ot.Eb[1]&&(ot.Eb[1]=8),ot.Qc[0]=TE[Ni(gt+Qe,117)],ot.Qc[1]=NE[Ni(gt+De,127)],ot.lc=gt+De}if(!Se.Rb)return ji(D,4,"Not a key frame.");for(le(Ce),Se=D.Pa,X=0;4>X;++X){for(we=0;8>we;++we)for(fe=0;3>fe;++fe)for(Ie=0;11>Ie;++Ie)Qe=me(Ce,pq[X][we][fe][Ie])?R(Ce,8):dq[X][we][fe][Ie],Se.Wc[X][we].Yb[fe][Ie]=Qe;for(we=0;17>we;++we)Se.Xc[X][we]=Se.Wc[X][mq[we]]}return D.kc=le(Ce),D.kc&&(D.Bd=R(Ce,8)),D.cb=1}function No(D,H,X,fe,we,Ce,Se){var Ie=H[we].Yb[X];for(X=0;16>we;++we){if(!me(D,Ie[X+0]))return we;for(;!me(D,Ie[X+1]);)if(Ie=H[++we].Yb[0],X=0,we==16)return 16;var De=H[we+1].Yb;if(me(D,Ie[X+2])){var Qe=D,et=0;if(me(Qe,(gt=Ie)[(dt=X)+3]))if(me(Qe,gt[dt+6])){for(Ie=0,dt=2*(et=me(Qe,gt[dt+8]))+(gt=me(Qe,gt[dt+9+et])),et=0,gt=fq[dt];gt[Ie];++Ie)et+=et+me(Qe,gt[Ie]);et+=3+(8<<dt)}else me(Qe,gt[dt+7])?(et=7+2*me(Qe,165),et+=me(Qe,145)):et=5+me(Qe,159);else et=me(Qe,gt[dt+4])?3+me(Qe,gt[dt+5]):2;Ie=De[2]}else et=1,Ie=De[1];De=Se+Aq[we],0>(Qe=D).b&&ge(Qe);var dt,gt=Qe.b,ot=(dt=Qe.Ca>>1)-(Qe.I>>gt)>>31;--Qe.b,Qe.Ca+=ot,Qe.Ca|=1,Qe.I-=(dt+1&ot)<<gt,Ce[De]=((et^ot)-ot)*fe[(0<we)+0]}return 16}function Cl(D){var H=D.rb[D.sb-1];H.la=0,H.Na=0,i(D.zc,0,0,D.zc.length),D.ja=0}function Sl(D,H){if(D==null)return 0;if(H==null)return ji(D,2,"NULL VP8Io parameter in VP8Decode().");if(!D.cb&&!ni(D,H))return 0;if(e(D.cb),H.ac==null||H.ac(H)){H.ob&&(D.L=0);var X=iy[D.L];if(D.L==2?(D.yb=0,D.zb=0):(D.yb=H.v-X>>4,D.zb=H.j-X>>4,0>D.yb&&(D.yb=0),0>D.zb&&(D.zb=0)),D.Va=H.o+15+X>>4,D.Hb=H.va+15+X>>4,D.Hb>D.za&&(D.Hb=D.za),D.Va>D.Ub&&(D.Va=D.Ub),0<D.L){var fe=D.ed;for(X=0;4>X;++X){var we;if(D.Qa.Cb){var Ce=D.Qa.Lb[X];D.Qa.Fb||(Ce+=fe.Tb)}else Ce=fe.Tb;for(we=0;1>=we;++we){var Se=D.gd[X][we],Ie=Ce;if(fe.Pc&&(Ie+=fe.vd[0],we&&(Ie+=fe.od[0])),0<(Ie=0>Ie?0:63<Ie?63:Ie)){var De=Ie;0<fe.wb&&(De=4<fe.wb?De>>2:De>>1)>9-fe.wb&&(De=9-fe.wb),1>De&&(De=1),Se.dd=De,Se.tc=2*Ie+De,Se.ld=40<=Ie?2:15<=Ie?1:0}else Se.tc=0;Se.La=we}}}X=0}else ji(D,6,"Frame setup failed"),X=D.a;if(X=X==0){if(X){D.$c=0,0<D.Aa||(D.Ic=Iq);e:{X=D.Ic,fe=4*(De=D.za);var Qe=32*De,et=De+1,dt=0<D.L?De*(0<D.Aa?2:1):0,gt=(D.Aa==2?2:1)*De;if((Se=fe+832+(we=3*(16*X+iy[D.L])/2*Qe)+(Ce=D.Fa!=null&&0<D.Fa.length?D.Kc.c*D.Kc.i:0))!=Se)X=0;else{if(Se>D.Vb){if(D.Vb=0,D.Ec=a(Se),D.Fc=0,D.Ec==null){X=ji(D,1,"no memory during frame initialization.");break e}D.Vb=Se}Se=D.Ec,Ie=D.Fc,D.Ac=Se,D.Bc=Ie,Ie+=fe,D.Gd=s(Qe,ya),D.Hd=0,D.rb=s(et+1,Cn),D.sb=1,D.wa=dt?s(dt,An):null,D.Y=0,D.D.Nb=0,D.D.wa=D.wa,D.D.Y=D.Y,0<D.Aa&&(D.D.Y+=De),e(!0),D.oc=Se,D.pc=Ie,Ie+=832,D.ya=s(gt,ls),D.aa=0,D.D.ya=D.ya,D.D.aa=D.aa,D.Aa==2&&(D.D.aa+=De),D.R=16*De,D.B=8*De,De=(Qe=iy[D.L])*D.R,Qe=Qe/2*D.B,D.sa=Se,D.ta=Ie+De,D.qa=D.sa,D.ra=D.ta+16*X*D.R+Qe,D.Ha=D.qa,D.Ia=D.ra+8*X*D.B+Qe,D.$c=0,Ie+=we,D.mb=Ce?Se:null,D.nb=Ce?Ie:null,e(Ie+Ce<=D.Fc+D.Vb),Cl(D),i(D.Ac,D.Bc,0,fe),X=1}}if(X){if(H.ka=0,H.y=D.sa,H.O=D.ta,H.f=D.qa,H.N=D.ra,H.ea=D.Ha,H.Vd=D.Ia,H.fa=D.R,H.Rc=D.B,H.F=null,H.J=0,!id){for(X=-255;255>=X;++X)ca[255+X]=0>X?-X:X;for(X=-1020;1020>=X;++X)eu[1020+X]=-128>X?-128:127<X?127:X;for(X=-112;112>=X;++X)Ff[112+X]=-16>X?-16:15<X?15:X;for(X=-255;510>=X;++X)Eh[255+X]=0>X?0:255<X?255:X;id=1}g=Bl,m=yf,k=xf,j=mh,ie=wc,_=Wl,de=bc,Te=Ws,Pe=_f,nt=vh,ht=ed,Ft=Va,Zt=Cc,dr=Ef,Er=Lu,ln=Do,xn=Xi,Sn=Tl,Ru[0]=Vs,Ru[1]=JA,Ru[2]=Ec,Ru[3]=wf,Ru[4]=Fo,Ru[5]=Lo,Ru[6]=Mo,Ru[7]=yn,Ru[8]=ee,Ru[9]=q,Lf[0]=Io,Lf[1]=_c,Lf[2]=xa,Lf[3]=Gn,Lf[4]=Qi,Lf[5]=cs,Lf[6]=lr,bh[0]=at,bh[1]=Mu,bh[2]=ve,bh[3]=Ne,bh[4]=mr,bh[5]=Bt,bh[6]=Wr,X=1}else X=0}X&&(X=function(ot,Ot){for(ot.M=0;ot.M<ot.Va;++ot.M){var bt,rt=ot.Jc[ot.M&ot.Xb],it=ot.m,Mt=ot;for(bt=0;bt<Mt.za;++bt){var Ht=it,kt=Mt,fr=kt.Ac,tr=kt.Bc+4*bt,Dr=kt.zc,sr=kt.ya[kt.aa+bt];if(kt.Qa.Bb?sr.$b=me(Ht,kt.Pa.jb[0])?2+me(Ht,kt.Pa.jb[2]):me(Ht,kt.Pa.jb[1]):sr.$b=0,kt.kc&&(sr.Ad=me(Ht,kt.Bd)),sr.Za=!me(Ht,145)+0,sr.Za){var ui=sr.Ob,wi=0;for(kt=0;4>kt;++kt){var Jn,kn=Dr[0+kt];for(Jn=0;4>Jn;++Jn){kn=gq[fr[tr+Jn]][kn];for(var ki=eT[me(Ht,kn[0])];0<ki;)ki=eT[2*ki+me(Ht,kn[ki])];kn=-ki,fr[tr+Jn]=kn}n(ui,wi,fr,tr,4),wi+=4,Dr[0+kt]=kn}}else kn=me(Ht,156)?me(Ht,128)?1:3:me(Ht,163)?2:0,sr.Ob[0]=kn,i(fr,tr,kn,4),i(Dr,0,kn,4);sr.Dd=me(Ht,142)?me(Ht,114)?me(Ht,183)?1:3:2:0}if(Mt.m.Ka)return ji(ot,7,"Premature end-of-partition0 encountered.");for(;ot.ja<ot.za;++ot.ja){if(Mt=rt,Ht=(it=ot).rb[it.sb-1],fr=it.rb[it.sb+it.ja],bt=it.ya[it.aa+it.ja],tr=it.kc?bt.Ad:0)Ht.la=fr.la=0,bt.Za||(Ht.Na=fr.Na=0),bt.Hc=0,bt.Gc=0,bt.ia=0;else{var Ii,dn;if(Ht=fr,fr=Mt,tr=it.Pa.Xc,Dr=it.ya[it.aa+it.ja],sr=it.pb[Dr.$b],kt=Dr.ad,ui=0,wi=it.rb[it.sb-1],kn=Jn=0,i(kt,ui,0,384),Dr.Za)var Da=0,il=tr[3];else{ki=a(16);var ka=Ht.Na+wi.Na;if(ka=Zp(fr,tr[1],ka,sr.Eb,0,ki,0),Ht.Na=wi.Na=(0<ka)+0,1<ka)g(ki,0,kt,ui);else{var al=ki[0]+3>>3;for(ki=0;256>ki;ki+=16)kt[ui+ki]=al}Da=1,il=tr[0]}var _i=15&Ht.la,Il=15&wi.la;for(ki=0;4>ki;++ki){var Fl=1&Il;for(al=dn=0;4>al;++al)_i=_i>>1|(Fl=(ka=Zp(fr,il,ka=Fl+(1&_i),sr.Sc,Da,kt,ui))>Da)<<7,dn=dn<<2|(3<ka?3:1<ka?2:kt[ui+0]!=0),ui+=16;_i>>=4,Il=Il>>1|Fl<<7,Jn=(Jn<<8|dn)>>>0}for(il=_i,Da=Il>>4,Ii=0;4>Ii;Ii+=2){for(dn=0,_i=Ht.la>>4+Ii,Il=wi.la>>4+Ii,ki=0;2>ki;++ki){for(Fl=1&Il,al=0;2>al;++al)ka=Fl+(1&_i),_i=_i>>1|(Fl=0<(ka=Zp(fr,tr[2],ka,sr.Qc,0,kt,ui)))<<3,dn=dn<<2|(3<ka?3:1<ka?2:kt[ui+0]!=0),ui+=16;_i>>=2,Il=Il>>1|Fl<<5}kn|=dn<<4*Ii,il|=_i<<4<<Ii,Da|=(240&Il)<<Ii}Ht.la=il,wi.la=Da,Dr.Hc=Jn,Dr.Gc=kn,Dr.ia=43690&kn?0:sr.ia,tr=!(Jn|kn)}if(0<it.L&&(it.wa[it.Y+it.ja]=it.gd[bt.$b][bt.Za],it.wa[it.Y+it.ja].La|=!tr),Mt.Ka)return ji(ot,7,"Premature end-of-file encountered.")}if(Cl(ot),it=Ot,Mt=1,bt=(rt=ot).D,Ht=0<rt.L&&rt.M>=rt.zb&&rt.M<=rt.Va,rt.Aa==0)e:{if(bt.M=rt.M,bt.uc=Ht,Ys(rt,bt),Mt=1,bt=(dn=rt.D).Nb,Ht=(kn=iy[rt.L])*rt.R,fr=kn/2*rt.B,ki=16*bt*rt.R,al=8*bt*rt.B,tr=rt.sa,Dr=rt.ta-Ht+ki,sr=rt.qa,kt=rt.ra-fr+al,ui=rt.Ha,wi=rt.Ia-fr+al,Il=(_i=dn.M)==0,Jn=_i>=rt.Va-1,rt.Aa==2&&Ys(rt,dn),dn.uc)for(Fl=(ka=rt).D.M,e(ka.D.uc),dn=ka.yb;dn<ka.Hb;++dn){Da=dn,il=Fl;var fs=(Ms=(ha=ka).D).Nb;Ii=ha.R;var Ms=Ms.wa[Ms.Y+Da],ko=ha.sa,nu=ha.ta+16*fs*Ii+16*Da,Ic=Ms.dd,As=Ms.tc;if(As!=0)if(e(3<=As),ha.L==1)0<Da&&ln(ko,nu,Ii,As+4),Ms.La&&Sn(ko,nu,Ii,As),0<il&&Er(ko,nu,Ii,As+4),Ms.La&&xn(ko,nu,Ii,As);else{var Ch=ha.B,ad=ha.qa,E0=ha.ra+8*fs*Ch+8*Da,kf=ha.Ha,ha=ha.Ia+8*fs*Ch+8*Da;fs=Ms.ld,0<Da&&(Te(ko,nu,Ii,As+4,Ic,fs),nt(ad,E0,kf,ha,Ch,As+4,Ic,fs)),Ms.La&&(Ft(ko,nu,Ii,As,Ic,fs),dr(ad,E0,kf,ha,Ch,As,Ic,fs)),0<il&&(de(ko,nu,Ii,As+4,Ic,fs),Pe(ad,E0,kf,ha,Ch,As+4,Ic,fs)),Ms.La&&(ht(ko,nu,Ii,As,Ic,fs),Zt(ad,E0,kf,ha,Ch,As,Ic,fs))}}if(rt.ia&&alert("todo:DitherRow"),it.put!=null){if(dn=16*_i,_i=16*(_i+1),Il?(it.y=rt.sa,it.O=rt.ta+ki,it.f=rt.qa,it.N=rt.ra+al,it.ea=rt.Ha,it.W=rt.Ia+al):(dn-=kn,it.y=tr,it.O=Dr,it.f=sr,it.N=kt,it.ea=ui,it.W=wi),Jn||(_i-=kn),_i>it.o&&(_i=it.o),it.F=null,it.J=null,rt.Fa!=null&&0<rt.Fa.length&&dn<_i&&(it.J=Du(rt,it,dn,_i-dn),it.F=rt.mb,it.F==null&&it.F.length==0)){Mt=ji(rt,3,"Could not decode alpha data.");break e}dn<it.j&&(kn=it.j-dn,dn=it.j,e(!(1&kn)),it.O+=rt.R*kn,it.N+=rt.B*(kn>>1),it.W+=rt.B*(kn>>1),it.F!=null&&(it.J+=it.width*kn)),dn<_i&&(it.O+=it.v,it.N+=it.v>>1,it.W+=it.v>>1,it.F!=null&&(it.J+=it.v),it.ka=dn-it.j,it.U=it.va-it.v,it.T=_i-dn,Mt=it.put(it))}bt+1!=rt.Ic||Jn||(n(rt.sa,rt.ta-Ht,tr,Dr+16*rt.R,Ht),n(rt.qa,rt.ra-fr,sr,kt+8*rt.B,fr),n(rt.Ha,rt.Ia-fr,ui,wi+8*rt.B,fr))}if(!Mt)return ji(ot,6,"Output aborted.")}return 1}(D,H)),H.bc!=null&&H.bc(H),X&=1}return X?(D.cb=0,X):0}function Ui(D,H,X,fe,we){we=D[H+X+32*fe]+(we>>3),D[H+X+32*fe]=-256&we?0>we?0:255:we}function $a(D,H,X,fe,we,Ce){Ui(D,H,0,X,fe+we),Ui(D,H,1,X,fe+Ce),Ui(D,H,2,X,fe-Ce),Ui(D,H,3,X,fe-we)}function Ka(D){return(20091*D>>16)+D}function tl(D,H,X,fe){var we,Ce=0,Se=a(16);for(we=0;4>we;++we){var Ie=D[H+0]+D[H+8],De=D[H+0]-D[H+8],Qe=(35468*D[H+4]>>16)-Ka(D[H+12]),et=Ka(D[H+4])+(35468*D[H+12]>>16);Se[Ce+0]=Ie+et,Se[Ce+1]=De+Qe,Se[Ce+2]=De-Qe,Se[Ce+3]=Ie-et,Ce+=4,H++}for(we=Ce=0;4>we;++we)Ie=(D=Se[Ce+0]+4)+Se[Ce+8],De=D-Se[Ce+8],Qe=(35468*Se[Ce+4]>>16)-Ka(Se[Ce+12]),Ui(X,fe,0,0,Ie+(et=Ka(Se[Ce+4])+(35468*Se[Ce+12]>>16))),Ui(X,fe,1,0,De+Qe),Ui(X,fe,2,0,De-Qe),Ui(X,fe,3,0,Ie-et),Ce++,fe+=32}function Wl(D,H,X,fe){var we=D[H+0]+4,Ce=35468*D[H+4]>>16,Se=Ka(D[H+4]),Ie=35468*D[H+1]>>16;$a(X,fe,0,we+Se,D=Ka(D[H+1]),Ie),$a(X,fe,1,we+Ce,D,Ie),$a(X,fe,2,we-Ce,D,Ie),$a(X,fe,3,we-Se,D,Ie)}function yf(D,H,X,fe,we){tl(D,H,X,fe),we&&tl(D,H+16,X,fe+4)}function xf(D,H,X,fe){m(D,H+0,X,fe,1),m(D,H+32,X,fe+128,1)}function mh(D,H,X,fe){var we;for(D=D[H+0]+4,we=0;4>we;++we)for(H=0;4>H;++H)Ui(X,fe,H,we,D)}function wc(D,H,X,fe){D[H+0]&&j(D,H+0,X,fe),D[H+16]&&j(D,H+16,X,fe+4),D[H+32]&&j(D,H+32,X,fe+128),D[H+48]&&j(D,H+48,X,fe+128+4)}function Bl(D,H,X,fe){var we,Ce=a(16);for(we=0;4>we;++we){var Se=D[H+0+we]+D[H+12+we],Ie=D[H+4+we]+D[H+8+we],De=D[H+4+we]-D[H+8+we],Qe=D[H+0+we]-D[H+12+we];Ce[0+we]=Se+Ie,Ce[8+we]=Se-Ie,Ce[4+we]=Qe+De,Ce[12+we]=Qe-De}for(we=0;4>we;++we)Se=(D=Ce[0+4*we]+3)+Ce[3+4*we],Ie=Ce[1+4*we]+Ce[2+4*we],De=Ce[1+4*we]-Ce[2+4*we],Qe=D-Ce[3+4*we],X[fe+0]=Se+Ie>>3,X[fe+16]=Qe+De>>3,X[fe+32]=Se-Ie>>3,X[fe+48]=Qe-De>>3,fe+=64}function Yl(D,H,X){var fe,we=H-32,Ce=Fs,Se=255-D[we-1];for(fe=0;fe<X;++fe){var Ie,De=Ce,Qe=Se+D[H-1];for(Ie=0;Ie<X;++Ie)D[H+Ie]=De[Qe+D[we+Ie]];H+=32}}function JA(D,H){Yl(D,H,4)}function Mu(D,H){Yl(D,H,8)}function _c(D,H){Yl(D,H,16)}function xa(D,H){var X;for(X=0;16>X;++X)n(D,H+32*X,D,H-32,16)}function Gn(D,H){var X;for(X=16;0<X;--X)i(D,H,D[H-1],16),H+=32}function Yi(D,H,X){var fe;for(fe=0;16>fe;++fe)i(H,X+32*fe,D,16)}function Io(D,H){var X,fe=16;for(X=0;16>X;++X)fe+=D[H-1+32*X]+D[H+X-32];Yi(fe>>5,D,H)}function Qi(D,H){var X,fe=8;for(X=0;16>X;++X)fe+=D[H-1+32*X];Yi(fe>>4,D,H)}function cs(D,H){var X,fe=8;for(X=0;16>X;++X)fe+=D[H+X-32];Yi(fe>>4,D,H)}function lr(D,H){Yi(128,D,H)}function Fr(D,H,X){return D+2*H+X+2>>2}function Ec(D,H){var X,fe=H-32;for(fe=new Uint8Array([Fr(D[fe-1],D[fe+0],D[fe+1]),Fr(D[fe+0],D[fe+1],D[fe+2]),Fr(D[fe+1],D[fe+2],D[fe+3]),Fr(D[fe+2],D[fe+3],D[fe+4])]),X=0;4>X;++X)n(D,H+32*X,fe,0,fe.length)}function wf(D,H){var X=D[H-1],fe=D[H-1+32],we=D[H-1+64],Ce=D[H-1+96];xe(D,H+0,16843009*Fr(D[H-1-32],X,fe)),xe(D,H+32,16843009*Fr(X,fe,we)),xe(D,H+64,16843009*Fr(fe,we,Ce)),xe(D,H+96,16843009*Fr(we,Ce,Ce))}function Vs(D,H){var X,fe=4;for(X=0;4>X;++X)fe+=D[H+X-32]+D[H-1+32*X];for(fe>>=3,X=0;4>X;++X)i(D,H+32*X,fe,4)}function Fo(D,H){var X=D[H-1+0],fe=D[H-1+32],we=D[H-1+64],Ce=D[H-1-32],Se=D[H+0-32],Ie=D[H+1-32],De=D[H+2-32],Qe=D[H+3-32];D[H+0+96]=Fr(fe,we,D[H-1+96]),D[H+1+96]=D[H+0+64]=Fr(X,fe,we),D[H+2+96]=D[H+1+64]=D[H+0+32]=Fr(Ce,X,fe),D[H+3+96]=D[H+2+64]=D[H+1+32]=D[H+0+0]=Fr(Se,Ce,X),D[H+3+64]=D[H+2+32]=D[H+1+0]=Fr(Ie,Se,Ce),D[H+3+32]=D[H+2+0]=Fr(De,Ie,Se),D[H+3+0]=Fr(Qe,De,Ie)}function Mo(D,H){var X=D[H+1-32],fe=D[H+2-32],we=D[H+3-32],Ce=D[H+4-32],Se=D[H+5-32],Ie=D[H+6-32],De=D[H+7-32];D[H+0+0]=Fr(D[H+0-32],X,fe),D[H+1+0]=D[H+0+32]=Fr(X,fe,we),D[H+2+0]=D[H+1+32]=D[H+0+64]=Fr(fe,we,Ce),D[H+3+0]=D[H+2+32]=D[H+1+64]=D[H+0+96]=Fr(we,Ce,Se),D[H+3+32]=D[H+2+64]=D[H+1+96]=Fr(Ce,Se,Ie),D[H+3+64]=D[H+2+96]=Fr(Se,Ie,De),D[H+3+96]=Fr(Ie,De,De)}function Lo(D,H){var X=D[H-1+0],fe=D[H-1+32],we=D[H-1+64],Ce=D[H-1-32],Se=D[H+0-32],Ie=D[H+1-32],De=D[H+2-32],Qe=D[H+3-32];D[H+0+0]=D[H+1+64]=Ce+Se+1>>1,D[H+1+0]=D[H+2+64]=Se+Ie+1>>1,D[H+2+0]=D[H+3+64]=Ie+De+1>>1,D[H+3+0]=De+Qe+1>>1,D[H+0+96]=Fr(we,fe,X),D[H+0+64]=Fr(fe,X,Ce),D[H+0+32]=D[H+1+96]=Fr(X,Ce,Se),D[H+1+32]=D[H+2+96]=Fr(Ce,Se,Ie),D[H+2+32]=D[H+3+96]=Fr(Se,Ie,De),D[H+3+32]=Fr(Ie,De,Qe)}function yn(D,H){var X=D[H+0-32],fe=D[H+1-32],we=D[H+2-32],Ce=D[H+3-32],Se=D[H+4-32],Ie=D[H+5-32],De=D[H+6-32],Qe=D[H+7-32];D[H+0+0]=X+fe+1>>1,D[H+1+0]=D[H+0+64]=fe+we+1>>1,D[H+2+0]=D[H+1+64]=we+Ce+1>>1,D[H+3+0]=D[H+2+64]=Ce+Se+1>>1,D[H+0+32]=Fr(X,fe,we),D[H+1+32]=D[H+0+96]=Fr(fe,we,Ce),D[H+2+32]=D[H+1+96]=Fr(we,Ce,Se),D[H+3+32]=D[H+2+96]=Fr(Ce,Se,Ie),D[H+3+64]=Fr(Se,Ie,De),D[H+3+96]=Fr(Ie,De,Qe)}function q(D,H){var X=D[H-1+0],fe=D[H-1+32],we=D[H-1+64],Ce=D[H-1+96];D[H+0+0]=X+fe+1>>1,D[H+2+0]=D[H+0+32]=fe+we+1>>1,D[H+2+32]=D[H+0+64]=we+Ce+1>>1,D[H+1+0]=Fr(X,fe,we),D[H+3+0]=D[H+1+32]=Fr(fe,we,Ce),D[H+3+32]=D[H+1+64]=Fr(we,Ce,Ce),D[H+3+64]=D[H+2+64]=D[H+0+96]=D[H+1+96]=D[H+2+96]=D[H+3+96]=Ce}function ee(D,H){var X=D[H-1+0],fe=D[H-1+32],we=D[H-1+64],Ce=D[H-1+96],Se=D[H-1-32],Ie=D[H+0-32],De=D[H+1-32],Qe=D[H+2-32];D[H+0+0]=D[H+2+32]=X+Se+1>>1,D[H+0+32]=D[H+2+64]=fe+X+1>>1,D[H+0+64]=D[H+2+96]=we+fe+1>>1,D[H+0+96]=Ce+we+1>>1,D[H+3+0]=Fr(Ie,De,Qe),D[H+2+0]=Fr(Se,Ie,De),D[H+1+0]=D[H+3+32]=Fr(X,Se,Ie),D[H+1+32]=D[H+3+64]=Fr(fe,X,Se),D[H+1+64]=D[H+3+96]=Fr(we,fe,X),D[H+1+96]=Fr(Ce,we,fe)}function ve(D,H){var X;for(X=0;8>X;++X)n(D,H+32*X,D,H-32,8)}function Ne(D,H){var X;for(X=0;8>X;++X)i(D,H,D[H-1],8),H+=32}function We(D,H,X){var fe;for(fe=0;8>fe;++fe)i(H,X+32*fe,D,8)}function at(D,H){var X,fe=8;for(X=0;8>X;++X)fe+=D[H+X-32]+D[H-1+32*X];We(fe>>4,D,H)}function Bt(D,H){var X,fe=4;for(X=0;8>X;++X)fe+=D[H+X-32];We(fe>>3,D,H)}function mr(D,H){var X,fe=4;for(X=0;8>X;++X)fe+=D[H-1+32*X];We(fe>>3,D,H)}function Wr(D,H){We(128,D,H)}function Ur(D,H,X){var fe=D[H-X],we=D[H+0],Ce=3*(we-fe)+_0[1020+D[H-2*X]-D[H+X]],Se=Mf[112+(Ce+4>>3)];D[H-X]=Fs[255+fe+Mf[112+(Ce+3>>3)]],D[H+0]=Fs[255+we-Se]}function xi(D,H,X,fe){var we=D[H+0],Ce=D[H+X];return tu[255+D[H-2*X]-D[H-X]]>fe||tu[255+Ce-we]>fe}function la(D,H,X,fe){return 4*tu[255+D[H-X]-D[H+0]]+tu[255+D[H-2*X]-D[H+X]]<=fe}function Ns(D,H,X,fe,we){var Ce=D[H-3*X],Se=D[H-2*X],Ie=D[H-X],De=D[H+0],Qe=D[H+X],et=D[H+2*X],dt=D[H+3*X];return 4*tu[255+Ie-De]+tu[255+Se-Qe]>fe?0:tu[255+D[H-4*X]-Ce]<=we&&tu[255+Ce-Se]<=we&&tu[255+Se-Ie]<=we&&tu[255+dt-et]<=we&&tu[255+et-Qe]<=we&&tu[255+Qe-De]<=we}function Lu(D,H,X,fe){var we=2*fe+1;for(fe=0;16>fe;++fe)la(D,H+fe,X,we)&&Ur(D,H+fe,X)}function Do(D,H,X,fe){var we=2*fe+1;for(fe=0;16>fe;++fe)la(D,H+fe*X,1,we)&&Ur(D,H+fe*X,1)}function Xi(D,H,X,fe){var we;for(we=3;0<we;--we)Lu(D,H+=4*X,X,fe)}function Tl(D,H,X,fe){var we;for(we=3;0<we;--we)Do(D,H+=4,X,fe)}function Xl(D,H,X,fe,we,Ce,Se,Ie){for(Ce=2*Ce+1;0<we--;){if(Ns(D,H,X,Ce,Se))if(xi(D,H,X,Ie))Ur(D,H,X);else{var De=D,Qe=H,et=X,dt=De[Qe-2*et],gt=De[Qe-et],ot=De[Qe+0],Ot=De[Qe+et],bt=De[Qe+2*et],rt=27*(Mt=_0[1020+3*(ot-gt)+_0[1020+dt-Ot]])+63>>7,it=18*Mt+63>>7,Mt=9*Mt+63>>7;De[Qe-3*et]=Fs[255+De[Qe-3*et]+Mt],De[Qe-2*et]=Fs[255+dt+it],De[Qe-et]=Fs[255+gt+rt],De[Qe+0]=Fs[255+ot-rt],De[Qe+et]=Fs[255+Ot-it],De[Qe+2*et]=Fs[255+bt-Mt]}H+=fe}}function Ma(D,H,X,fe,we,Ce,Se,Ie){for(Ce=2*Ce+1;0<we--;){if(Ns(D,H,X,Ce,Se))if(xi(D,H,X,Ie))Ur(D,H,X);else{var De=D,Qe=H,et=X,dt=De[Qe-et],gt=De[Qe+0],ot=De[Qe+et],Ot=Mf[112+((bt=3*(gt-dt))+4>>3)],bt=Mf[112+(bt+3>>3)],rt=Ot+1>>1;De[Qe-2*et]=Fs[255+De[Qe-2*et]+rt],De[Qe-et]=Fs[255+dt+bt],De[Qe+0]=Fs[255+gt-Ot],De[Qe+et]=Fs[255+ot-rt]}H+=fe}}function bc(D,H,X,fe,we,Ce){Xl(D,H,X,1,16,fe,we,Ce)}function Ws(D,H,X,fe,we,Ce){Xl(D,H,1,X,16,fe,we,Ce)}function ed(D,H,X,fe,we,Ce){var Se;for(Se=3;0<Se;--Se)Ma(D,H+=4*X,X,1,16,fe,we,Ce)}function Va(D,H,X,fe,we,Ce){var Se;for(Se=3;0<Se;--Se)Ma(D,H+=4,1,X,16,fe,we,Ce)}function _f(D,H,X,fe,we,Ce,Se,Ie){Xl(D,H,we,1,8,Ce,Se,Ie),Xl(X,fe,we,1,8,Ce,Se,Ie)}function vh(D,H,X,fe,we,Ce,Se,Ie){Xl(D,H,1,we,8,Ce,Se,Ie),Xl(X,fe,1,we,8,Ce,Se,Ie)}function Cc(D,H,X,fe,we,Ce,Se,Ie){Ma(D,H+4*we,we,1,8,Ce,Se,Ie),Ma(X,fe+4*we,we,1,8,Ce,Se,Ie)}function Ef(D,H,X,fe,we,Ce,Se,Ie){Ma(D,H+4,1,we,8,Ce,Se,Ie),Ma(X,fe+4,1,we,8,Ce,Se,Ie)}function Sc(){this.ba=new Wt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new wr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function yh(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function xh(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function bf(){this.ua=0,this.Wa=new Z,this.vb=new Z,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new L,this.yc=new N}function Nl(){this.xb=this.a=0,this.l=new Ia,this.ca=new Wt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new bf,this.ab=0,this.gc=s(4,xh),this.Oc=0}function ua(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ia,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Zl(D,H,X,fe,we,Ce,Se){for(D=D==null?0:D[H+0],H=0;H<Se;++H)we[Ce+H]=D+X[fe+H]&255,D=we[Ce+H]}function Bc(D,H,X,fe,we,Ce,Se){var Ie;if(D==null)Zl(null,null,X,fe,we,Ce,Se);else for(Ie=0;Ie<Se;++Ie)we[Ce+Ie]=D[H+Ie]+X[fe+Ie]&255}function Jl(D,H,X,fe,we,Ce,Se){if(D==null)Zl(null,null,X,fe,we,Ce,Se);else{var Ie,De=D[H+0],Qe=De,et=De;for(Ie=0;Ie<Se;++Ie)Qe=et+(De=D[H+Ie])-Qe,et=X[fe+Ie]+(-256&Qe?0>Qe?0:255:Qe)&255,Qe=De,we[Ce+Ie]=et}}function Du(D,H,X,fe){var we=H.width,Ce=H.o;if(e(D!=null&&H!=null),0>X||0>=fe||X+fe>Ce)return null;if(!D.Cc){if(D.ga==null){var Se;if(D.ga=new ua,(Se=D.ga==null)||(Se=H.width*H.o,e(D.Gb.length==0),D.Gb=a(Se),D.Uc=0,D.Gb==null?Se=0:(D.mb=D.Gb,D.nb=D.Uc,D.rc=null,Se=1),Se=!Se),!Se){Se=D.ga;var Ie=D.Fa,De=D.P,Qe=D.qc,et=D.mb,dt=D.nb,gt=De+1,ot=Qe-1,Ot=Se.l;if(e(Ie!=null&&et!=null&&H!=null),Df[0]=null,Df[1]=Zl,Df[2]=Bc,Df[3]=Jl,Se.ca=et,Se.tb=dt,Se.c=H.width,Se.i=H.height,e(0<Se.c&&0<Se.i),1>=Qe)H=0;else if(Se.$a=Ie[De+0]>>0&3,Se.Z=Ie[De+0]>>2&3,Se.Lc=Ie[De+0]>>4&3,De=Ie[De+0]>>6&3,0>Se.$a||1<Se.$a||4<=Se.Z||1<Se.Lc||De)H=0;else if(Ot.put=Ln,Ot.ac=Tt,Ot.bc=Kn,Ot.ma=Se,Ot.width=H.width,Ot.height=H.height,Ot.Da=H.Da,Ot.v=H.v,Ot.va=H.va,Ot.j=H.j,Ot.o=H.o,Se.$a)e:{e(Se.$a==1),H=xt();t:for(;;){if(H==null){H=0;break e}if(e(Se!=null),Se.mc=H,H.c=Se.c,H.i=Se.i,H.l=Se.l,H.l.ma=Se,H.l.width=Se.c,H.l.height=Se.i,H.a=0,W(H.m,Ie,gt,ot),!lt(Se.c,Se.i,1,H,null)||(H.ab==1&&H.gc[0].hc==3&&ke(H.s)?(Se.ic=1,Ie=H.c*H.i,H.Ta=null,H.Ua=0,H.V=a(Ie),H.Ba=0,H.V==null?(H.a=1,H=0):H=1):(Se.ic=0,H=ft(H,Se.c)),!H))break t;H=1;break e}Se.mc=null,H=0}else H=ot>=Se.c*Se.i;Se=!H}if(Se)return null;D.ga.Lc!=1?D.Ga=0:fe=Ce-X}e(D.ga!=null),e(X+fe<=Ce);e:{if(H=(Ie=D.ga).c,Ce=Ie.l.o,Ie.$a==0){if(gt=D.rc,ot=D.Vc,Ot=D.Fa,De=D.P+1+X*H,Qe=D.mb,et=D.nb+X*H,e(De<=D.P+D.qc),Ie.Z!=0)for(e(Df[Ie.Z]!=null),Se=0;Se<fe;++Se)Df[Ie.Z](gt,ot,Ot,De,Qe,et,H),gt=Qe,ot=et,et+=H,De+=H;else for(Se=0;Se<fe;++Se)n(Qe,et,Ot,De,H),gt=Qe,ot=et,et+=H,De+=H;D.rc=gt,D.Vc=ot}else{if(e(Ie.mc!=null),H=X+fe,e((Se=Ie.mc)!=null),e(H<=Se.i),Se.C>=H)H=1;else if(Ie.ic||ut(),Ie.ic){Ie=Se.V,gt=Se.Ba,ot=Se.c;var bt=Se.i,rt=(Ot=1,De=Se.$/ot,Qe=Se.$%ot,et=Se.m,dt=Se.s,Se.$),it=ot*bt,Mt=ot*H,Ht=dt.wc,kt=rt<Mt?tn(dt,Qe,De):null;e(rt<=it),e(H<=bt),e(ke(dt));t:for(;;){for(;!et.h&&rt<Mt;){if(Qe&Ht||(kt=tn(dt,Qe,De)),e(kt!=null),ue(et),256>(bt=Br(kt.G[0],kt.H[0],et)))Ie[gt+rt]=bt,++rt,++Qe>=ot&&(Qe=0,++De<=H&&!(De%16)&&Oe(Se,De));else{if(!(280>bt)){Ot=0;break t}bt=Dn(bt-256,et);var fr,tr=Br(kt.G[4],kt.H[4],et);if(ue(et),!(rt>=(tr=Zn(ot,tr=Dn(tr,et)))&&it-rt>=bt)){Ot=0;break t}for(fr=0;fr<bt;++fr)Ie[gt+rt+fr]=Ie[gt+rt+fr-tr];for(rt+=bt,Qe+=bt;Qe>=ot;)Qe-=ot,++De<=H&&!(De%16)&&Oe(Se,De);rt<Mt&&Qe&Ht&&(kt=tn(dt,Qe,De))}e(et.h==K(et))}Oe(Se,De>H?H:De);break t}!Ot||et.h&&rt<it?(Ot=0,Se.a=et.h?5:3):Se.$=rt,H=Ot}else H=qe(Se,Se.V,Se.Ba,Se.c,Se.i,H,At);if(!H){fe=0;break e}}X+fe>=Ce&&(D.Cc=1),fe=1}if(!fe)return null;if(D.Cc&&((fe=D.ga)!=null&&(fe.mc=null),D.ga=null,0<D.Ga))return alert("todo:WebPDequantizeLevels"),null}return D.nb+X*we}function V(D,H,X,fe,we,Ce){for(;0<we--;){var Se,Ie=D,De=H+(X?1:0),Qe=D,et=H+(X?0:3);for(Se=0;Se<fe;++Se){var dt=Qe[et+4*Se];dt!=255&&(dt*=32897,Ie[De+4*Se+0]=Ie[De+4*Se+0]*dt>>23,Ie[De+4*Se+1]=Ie[De+4*Se+1]*dt>>23,Ie[De+4*Se+2]=Ie[De+4*Se+2]*dt>>23)}H+=Ce}}function ye(D,H,X,fe,we){for(;0<fe--;){var Ce;for(Ce=0;Ce<X;++Ce){var Se=D[H+2*Ce+0],Ie=15&(Qe=D[H+2*Ce+1]),De=4369*Ie,Qe=(240&Qe|Qe>>4)*De>>16;D[H+2*Ce+0]=(240&Se|Se>>4)*De>>16&240|(15&Se|Se<<4)*De>>16>>4&15,D[H+2*Ce+1]=240&Qe|Ie}H+=we}}function je(D,H,X,fe,we,Ce,Se,Ie){var De,Qe,et=255;for(Qe=0;Qe<we;++Qe){for(De=0;De<fe;++De){var dt=D[H+De];Ce[Se+4*De]=dt,et&=dt}H+=X,Se+=Ie}return et!=255}function Xe(D,H,X,fe,we){var Ce;for(Ce=0;Ce<we;++Ce)X[fe+Ce]=D[H+Ce]>>8}function ut(){ci=V,un=ye,Wn=je,Di=Xe}function _t(D,H,X){B[D]=function(fe,we,Ce,Se,Ie,De,Qe,et,dt,gt,ot,Ot,bt,rt,it,Mt,Ht){var kt,fr=Ht-1>>1,tr=Ie[De+0]|Qe[et+0]<<16,Dr=dt[gt+0]|ot[Ot+0]<<16;e(fe!=null);var sr=3*tr+Dr+131074>>2;for(H(fe[we+0],255&sr,sr>>16,bt,rt),Ce!=null&&(sr=3*Dr+tr+131074>>2,H(Ce[Se+0],255&sr,sr>>16,it,Mt)),kt=1;kt<=fr;++kt){var ui=Ie[De+kt]|Qe[et+kt]<<16,wi=dt[gt+kt]|ot[Ot+kt]<<16,Jn=tr+ui+Dr+wi+524296,kn=Jn+2*(ui+Dr)>>3;sr=kn+tr>>1,tr=(Jn=Jn+2*(tr+wi)>>3)+ui>>1,H(fe[we+2*kt-1],255&sr,sr>>16,bt,rt+(2*kt-1)*X),H(fe[we+2*kt-0],255&tr,tr>>16,bt,rt+(2*kt-0)*X),Ce!=null&&(sr=Jn+Dr>>1,tr=kn+wi>>1,H(Ce[Se+2*kt-1],255&sr,sr>>16,it,Mt+(2*kt-1)*X),H(Ce[Se+2*kt+0],255&tr,tr>>16,it,Mt+(2*kt+0)*X)),tr=ui,Dr=wi}1&Ht||(sr=3*tr+Dr+131074>>2,H(fe[we+Ht-1],255&sr,sr>>16,bt,rt+(Ht-1)*X),Ce!=null&&(sr=3*Dr+tr+131074>>2,H(Ce[Se+Ht-1],255&sr,sr>>16,it,Mt+(Ht-1)*X)))}}function Ut(){ru[X1]=yq,ru[Z1]=rT,ru[X3]=xq,ru[J1]=nT,ru[ey]=iT,ru[bE]=aT,ru[Z3]=wq,ru[CE]=rT,ru[SE]=nT,ru[ty]=iT,ru[BE]=aT}function nr(D){return D&-16384?0>D?0:255:D>>_q}function br(D,H){return nr((19077*D>>8)+(26149*H>>8)-14234)}function qr(D,H,X){return nr((19077*D>>8)-(6419*H>>8)-(13320*X>>8)+8708)}function Qr(D,H){return nr((19077*D>>8)+(33050*H>>8)-17685)}function tt(D,H,X,fe,we){fe[we+0]=br(D,X),fe[we+1]=qr(D,H,X),fe[we+2]=Qr(D,H)}function St(D,H,X,fe,we){fe[we+0]=Qr(D,H),fe[we+1]=qr(D,H,X),fe[we+2]=br(D,X)}function Yt(D,H,X,fe,we){var Ce=qr(D,H,X);H=Ce<<3&224|Qr(D,H)>>3,fe[we+0]=248&br(D,X)|Ce>>5,fe[we+1]=H}function ur(D,H,X,fe,we){var Ce=240&Qr(D,H)|15;fe[we+0]=240&br(D,X)|qr(D,H,X)>>4,fe[we+1]=Ce}function _r(D,H,X,fe,we){fe[we+0]=255,tt(D,H,X,fe,we+1)}function Gr(D,H,X,fe,we){St(D,H,X,fe,we),fe[we+3]=255}function $i(D,H,X,fe,we){tt(D,H,X,fe,we),fe[we+3]=255}function Ni(D,H){return 0>D?0:D>H?H:D}function Gi(D,H,X){B[D]=function(fe,we,Ce,Se,Ie,De,Qe,et,dt){for(var gt=et+(-2&dt)*X;et!=gt;)H(fe[we+0],Ce[Se+0],Ie[De+0],Qe,et),H(fe[we+1],Ce[Se+0],Ie[De+0],Qe,et+X),we+=2,++Se,++De,et+=2*X;1&dt&&H(fe[we+0],Ce[Se+0],Ie[De+0],Qe,et)}}function Wa(D,H,X){return X==0?D==0?H==0?6:5:H==0?4:0:X}function ku(D,H,X,fe,we){switch(D>>>30){case 3:m(H,X,fe,we,0);break;case 2:_(H,X,fe,we);break;case 1:j(H,X,fe,we)}}function Ys(D,H){var X,fe,we=H.M,Ce=H.Nb,Se=D.oc,Ie=D.pc+40,De=D.oc,Qe=D.pc+584,et=D.oc,dt=D.pc+600;for(X=0;16>X;++X)Se[Ie+32*X-1]=129;for(X=0;8>X;++X)De[Qe+32*X-1]=129,et[dt+32*X-1]=129;for(0<we?Se[Ie-1-32]=De[Qe-1-32]=et[dt-1-32]=129:(i(Se,Ie-32-1,127,21),i(De,Qe-32-1,127,9),i(et,dt-32-1,127,9)),fe=0;fe<D.za;++fe){var gt=H.ya[H.aa+fe];if(0<fe){for(X=-1;16>X;++X)n(Se,Ie+32*X-4,Se,Ie+32*X+12,4);for(X=-1;8>X;++X)n(De,Qe+32*X-4,De,Qe+32*X+4,4),n(et,dt+32*X-4,et,dt+32*X+4,4)}var ot=D.Gd,Ot=D.Hd+fe,bt=gt.ad,rt=gt.Hc;if(0<we&&(n(Se,Ie-32,ot[Ot].y,0,16),n(De,Qe-32,ot[Ot].f,0,8),n(et,dt-32,ot[Ot].ea,0,8)),gt.Za){var it=Se,Mt=Ie-32+16;for(0<we&&(fe>=D.za-1?i(it,Mt,ot[Ot].y[15],4):n(it,Mt,ot[Ot+1].y,0,4)),X=0;4>X;X++)it[Mt+128+X]=it[Mt+256+X]=it[Mt+384+X]=it[Mt+0+X];for(X=0;16>X;++X,rt<<=2)it=Se,Mt=Ie+oT[X],Ru[gt.Ob[X]](it,Mt),ku(rt,bt,16*+X,it,Mt)}else if(it=Wa(fe,we,gt.Ob[0]),Lf[it](Se,Ie),rt!=0)for(X=0;16>X;++X,rt<<=2)ku(rt,bt,16*+X,Se,Ie+oT[X]);for(X=gt.Gc,it=Wa(fe,we,gt.Dd),bh[it](De,Qe),bh[it](et,dt),rt=bt,it=De,Mt=Qe,255&(gt=X>>0)&&(170&gt?k(rt,256,it,Mt):ie(rt,256,it,Mt)),gt=et,rt=dt,255&(X>>=8)&&(170&X?k(bt,320,gt,rt):ie(bt,320,gt,rt)),we<D.Ub-1&&(n(ot[Ot].y,0,Se,Ie+480,16),n(ot[Ot].f,0,De,Qe+224,8),n(ot[Ot].ea,0,et,dt+224,8)),X=8*Ce*D.B,ot=D.sa,Ot=D.ta+16*fe+16*Ce*D.R,bt=D.qa,gt=D.ra+8*fe+X,rt=D.Ha,it=D.Ia+8*fe+X,X=0;16>X;++X)n(ot,Ot+X*D.R,Se,Ie+32*X,16);for(X=0;8>X;++X)n(bt,gt+X*D.B,De,Qe+32*X,8),n(rt,it+X*D.B,et,dt+32*X,8)}}function Tc(D,H,X,fe,we,Ce,Se,Ie,De){var Qe=[0],et=[0],dt=0,gt=De!=null?De.kd:0,ot=De??new yh;if(D==null||12>X)return 7;ot.data=D,ot.w=H,ot.ha=X,H=[H],X=[X],ot.gb=[ot.gb];e:{var Ot=H,bt=X,rt=ot.gb;if(e(D!=null),e(bt!=null),e(rt!=null),rt[0]=0,12<=bt[0]&&!t(D,Ot[0],"RIFF")){if(t(D,Ot[0]+8,"WEBP")){rt=3;break e}var it=Ve(D,Ot[0]+4);if(12>it||4294967286<it){rt=3;break e}if(gt&&it>bt[0]-8){rt=7;break e}rt[0]=it,Ot[0]+=12,bt[0]-=12}rt=0}if(rt!=0)return rt;for(it=0<ot.gb[0],X=X[0];;){e:{var Mt=D;bt=H,rt=X;var Ht=Qe,kt=et,fr=Ot=[0];if((sr=dt=[dt])[0]=0,8>rt[0])rt=7;else{if(!t(Mt,bt[0],"VP8X")){if(Ve(Mt,bt[0]+4)!=10){rt=3;break e}if(18>rt[0]){rt=7;break e}var tr=Ve(Mt,bt[0]+8),Dr=1+Y(Mt,bt[0]+12);if(2147483648<=Dr*(Mt=1+Y(Mt,bt[0]+15))){rt=3;break e}fr!=null&&(fr[0]=tr),Ht!=null&&(Ht[0]=Dr),kt!=null&&(kt[0]=Mt),bt[0]+=18,rt[0]-=18,sr[0]=1}rt=0}}if(dt=dt[0],Ot=Ot[0],rt!=0)return rt;if(bt=!!(2&Ot),!it&&dt)return 3;if(Ce!=null&&(Ce[0]=!!(16&Ot)),Se!=null&&(Se[0]=bt),Ie!=null&&(Ie[0]=0),Se=Qe[0],Ot=et[0],dt&&bt&&De==null){rt=0;break}if(4>X){rt=7;break}if(it&&dt||!it&&!dt&&!t(D,H[0],"ALPH")){X=[X],ot.na=[ot.na],ot.P=[ot.P],ot.Sa=[ot.Sa];e:{tr=D,rt=H,it=X;var sr=ot.gb;Ht=ot.na,kt=ot.P,fr=ot.Sa,Dr=22,e(tr!=null),e(it!=null),Mt=rt[0];var ui=it[0];for(e(Ht!=null),e(fr!=null),Ht[0]=null,kt[0]=null,fr[0]=0;;){if(rt[0]=Mt,it[0]=ui,8>ui){rt=7;break e}var wi=Ve(tr,Mt+4);if(4294967286<wi){rt=3;break e}var Jn=8+wi+1&-2;if(Dr+=Jn,0<sr&&Dr>sr){rt=3;break e}if(!t(tr,Mt,"VP8 ")||!t(tr,Mt,"VP8L")){rt=0;break e}if(ui[0]<Jn){rt=7;break e}t(tr,Mt,"ALPH")||(Ht[0]=tr,kt[0]=Mt+8,fr[0]=wi),Mt+=Jn,ui-=Jn}}if(X=X[0],ot.na=ot.na[0],ot.P=ot.P[0],ot.Sa=ot.Sa[0],rt!=0)break}X=[X],ot.Ja=[ot.Ja],ot.xa=[ot.xa];e:if(sr=D,rt=H,it=X,Ht=ot.gb[0],kt=ot.Ja,fr=ot.xa,tr=rt[0],Mt=!t(sr,tr,"VP8 "),Dr=!t(sr,tr,"VP8L"),e(sr!=null),e(it!=null),e(kt!=null),e(fr!=null),8>it[0])rt=7;else{if(Mt||Dr){if(sr=Ve(sr,tr+4),12<=Ht&&sr>Ht-12){rt=3;break e}if(gt&&sr>it[0]-8){rt=7;break e}kt[0]=sr,rt[0]+=8,it[0]-=8,fr[0]=Dr}else fr[0]=5<=it[0]&&sr[tr+0]==47&&!(sr[tr+4]>>5),kt[0]=it[0];rt=0}if(X=X[0],ot.Ja=ot.Ja[0],ot.xa=ot.xa[0],H=H[0],rt!=0)break;if(4294967286<ot.Ja)return 3;if(Ie==null||bt||(Ie[0]=ot.xa?2:1),Se=[Se],Ot=[Ot],ot.xa){if(5>X){rt=7;break}Ie=Se,gt=Ot,bt=Ce,D==null||5>X?D=0:5<=X&&D[H+0]==47&&!(D[H+4]>>5)?(it=[0],sr=[0],Ht=[0],W(kt=new P,D,H,X),ir(kt,it,sr,Ht)?(Ie!=null&&(Ie[0]=it[0]),gt!=null&&(gt[0]=sr[0]),bt!=null&&(bt[0]=Ht[0]),D=1):D=0):D=0}else{if(10>X){rt=7;break}Ie=Ot,D==null||10>X||!To(D,H+3,X-3)?D=0:(gt=D[H+0]|D[H+1]<<8|D[H+2]<<16,bt=16383&(D[H+7]<<8|D[H+6]),D=16383&(D[H+9]<<8|D[H+8]),1&gt||3<(gt>>1&7)||!(gt>>4&1)||gt>>5>=ot.Ja||!bt||!D?D=0:(Se&&(Se[0]=bt),Ie&&(Ie[0]=D),D=1))}if(!D||(Se=Se[0],Ot=Ot[0],dt&&(Qe[0]!=Se||et[0]!=Ot)))return 3;De!=null&&(De[0]=ot,De.offset=H-De.w,e(4294967286>H-De.w),e(De.offset==De.ha-X));break}return rt==0||rt==7&&dt&&De==null?(Ce!=null&&(Ce[0]|=ot.na!=null&&0<ot.na.length),fe!=null&&(fe[0]=Se),we!=null&&(we[0]=Ot),0):rt}function td(D,H,X){var fe=H.width,we=H.height,Ce=0,Se=0,Ie=fe,De=we;if(H.Da=D!=null&&0<D.Da,H.Da&&(Ie=D.cd,De=D.bd,Ce=D.v,Se=D.j,11>X||(Ce&=-2,Se&=-2),0>Ce||0>Se||0>=Ie||0>=De||Ce+Ie>fe||Se+De>we))return 0;if(H.v=Ce,H.j=Se,H.va=Ce+Ie,H.o=Se+De,H.U=Ie,H.T=De,H.da=D!=null&&0<D.da,H.da){if(!he(Ie,De,X=[D.ib],Ce=[D.hb]))return 0;H.ib=X[0],H.hb=Ce[0]}return H.ob=D!=null&&D.ob,H.Kb=D==null||!D.Sd,H.da&&(H.ob=H.ib<3*fe/4&&H.hb<3*we/4,H.Kb=0),1}function rd(D){if(D==null)return 2;if(11>D.S){var H=D.f.RGBA;H.fb+=(D.height-1)*H.A,H.A=-H.A}else H=D.f.kb,D=D.height,H.O+=(D-1)*H.fa,H.fa=-H.fa,H.N+=(D-1>>1)*H.Ab,H.Ab=-H.Ab,H.W+=(D-1>>1)*H.Db,H.Db=-H.Db,H.F!=null&&(H.J+=(D-1)*H.lb,H.lb=-H.lb);return 0}function Cf(D,H,X,fe){if(fe==null||0>=D||0>=H)return 2;if(X!=null){if(X.Da){var we=X.cd,Ce=X.bd,Se=-2&X.v,Ie=-2&X.j;if(0>Se||0>Ie||0>=we||0>=Ce||Se+we>D||Ie+Ce>H)return 2;D=we,H=Ce}if(X.da){if(!he(D,H,we=[X.ib],Ce=[X.hb]))return 2;D=we[0],H=Ce[0]}}fe.width=D,fe.height=H;e:{var De=fe.width,Qe=fe.height;if(D=fe.S,0>=De||0>=Qe||!(D>=X1&&13>D))D=2;else{if(0>=fe.Rd&&fe.sd==null){Se=Ce=we=H=0;var et=(Ie=De*lT[D])*Qe;if(11>D||(Ce=(Qe+1)/2*(H=(De+1)/2),D==12&&(Se=(we=De)*Qe)),(Qe=a(et+2*Ce+Se))==null){D=1;break e}fe.sd=Qe,11>D?((De=fe.f.RGBA).eb=Qe,De.fb=0,De.A=Ie,De.size=et):((De=fe.f.kb).y=Qe,De.O=0,De.fa=Ie,De.Fd=et,De.f=Qe,De.N=0+et,De.Ab=H,De.Cd=Ce,De.ea=Qe,De.W=0+et+Ce,De.Db=H,De.Ed=Ce,D==12&&(De.F=Qe,De.J=0+et+2*Ce),De.Tc=Se,De.lb=we)}if(H=1,we=fe.S,Ce=fe.width,Se=fe.height,we>=X1&&13>we)if(11>we)D=fe.f.RGBA,H&=(Ie=Math.abs(D.A))*(Se-1)+Ce<=D.size,H&=Ie>=Ce*lT[we],H&=D.eb!=null;else{D=fe.f.kb,Ie=(Ce+1)/2,et=(Se+1)/2,De=Math.abs(D.fa),Qe=Math.abs(D.Ab);var dt=Math.abs(D.Db),gt=Math.abs(D.lb),ot=gt*(Se-1)+Ce;H&=De*(Se-1)+Ce<=D.Fd,H&=Qe*(et-1)+Ie<=D.Cd,H=(H&=dt*(et-1)+Ie<=D.Ed)&De>=Ce&Qe>=Ie&dt>=Ie,H&=D.y!=null,H&=D.f!=null,H&=D.ea!=null,we==12&&(H&=gt>=Ce,H&=ot<=D.Tc,H&=D.F!=null)}else H=0;D=H?0:2}}return D!=0||X!=null&&X.fd&&(D=rd(fe)),D}var Ya=64,Sf=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Bf=24,wh=32,Tf=8,Is=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];_e("Predictor0","PredictorAdd0"),B.Predictor0=function(){return 4278190080},B.Predictor1=function(D){return D},B.Predictor2=function(D,H,X){return H[X+0]},B.Predictor3=function(D,H,X){return H[X+1]},B.Predictor4=function(D,H,X){return H[X-1]},B.Predictor5=function(D,H,X){return be(be(D,H[X+1]),H[X+0])},B.Predictor6=function(D,H,X){return be(D,H[X-1])},B.Predictor7=function(D,H,X){return be(D,H[X+0])},B.Predictor8=function(D,H,X){return be(H[X-1],H[X+0])},B.Predictor9=function(D,H,X){return be(H[X+0],H[X+1])},B.Predictor10=function(D,H,X){return be(be(D,H[X-1]),be(H[X+0],H[X+1]))},B.Predictor11=function(D,H,X){var fe=H[X+0];return 0>=Fe(fe>>24&255,D>>24&255,(H=H[X-1])>>24&255)+Fe(fe>>16&255,D>>16&255,H>>16&255)+Fe(fe>>8&255,D>>8&255,H>>8&255)+Fe(255&fe,255&D,255&H)?fe:D},B.Predictor12=function(D,H,X){var fe=H[X+0];return(Ae((D>>24&255)+(fe>>24&255)-((H=H[X-1])>>24&255))<<24|Ae((D>>16&255)+(fe>>16&255)-(H>>16&255))<<16|Ae((D>>8&255)+(fe>>8&255)-(H>>8&255))<<8|Ae((255&D)+(255&fe)-(255&H)))>>>0},B.Predictor13=function(D,H,X){var fe=H[X-1];return(pe((D=be(D,H[X+0]))>>24&255,fe>>24&255)<<24|pe(D>>16&255,fe>>16&255)<<16|pe(D>>8&255,fe>>8&255)<<8|pe(D>>0&255,fe>>0&255))>>>0};var Xp=B.PredictorAdd0;B.PredictorAdd1=Ge,_e("Predictor2","PredictorAdd2"),_e("Predictor3","PredictorAdd3"),_e("Predictor4","PredictorAdd4"),_e("Predictor5","PredictorAdd5"),_e("Predictor6","PredictorAdd6"),_e("Predictor7","PredictorAdd7"),_e("Predictor8","PredictorAdd8"),_e("Predictor9","PredictorAdd9"),_e("Predictor10","PredictorAdd10"),_e("Predictor11","PredictorAdd11"),_e("Predictor12","PredictorAdd12"),_e("Predictor13","PredictorAdd13");var Nf=B.PredictorAdd2;Ye("ColorIndexInverseTransform","MapARGB","32b",function(D){return D>>8&255},function(D){return D}),Ye("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(D){return D},function(D){return D>>8&255});var If,rl=B.ColorIndexInverseTransform,_h=B.MapARGB,nd=B.VP8LColorIndexInverseTransformAlpha,w0=B.MapAlpha,Nc=B.VP8LPredictorsAdd=[];Nc.length=16,(B.VP8LPredictors=[]).length=16,(B.VP8LPredictorsAdd_C=[]).length=16,(B.VP8LPredictors_C=[]).length=16;var nl,Xs,hs,wa,La,E,g,m,_,k,j,ie,de,Te,Pe,nt,ht,Ft,Zt,dr,Er,ln,xn,Sn,ci,un,Wn,Di,ca=a(511),eu=a(2041),Ff=a(225),Eh=a(767),id=0,_0=eu,Mf=Ff,Fs=Eh,tu=ca,X1=0,Z1=1,X3=2,J1=3,ey=4,bE=5,Z3=6,CE=7,SE=8,ty=9,BE=10,aq=[2,3,7],sq=[3,3,11],J3=[280,256,256,256,40],oq=[0,1,1,1,0],lq=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],uq=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],cq=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],hq=8,TE=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],NE=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Zp=null,fq=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Aq=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],eT=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],dq=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],gq=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],pq=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],mq=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Lf=[],Ru=[],bh=[],vq=1,tT=2,Df=[],ru=[];_t("UpsampleRgbLinePair",tt,3),_t("UpsampleBgrLinePair",St,3),_t("UpsampleRgbaLinePair",$i,4),_t("UpsampleBgraLinePair",Gr,4),_t("UpsampleArgbLinePair",_r,4),_t("UpsampleRgba4444LinePair",ur,2),_t("UpsampleRgb565LinePair",Yt,2);var yq=B.UpsampleRgbLinePair,xq=B.UpsampleBgrLinePair,rT=B.UpsampleRgbaLinePair,nT=B.UpsampleBgraLinePair,iT=B.UpsampleArgbLinePair,aT=B.UpsampleRgba4444LinePair,wq=B.UpsampleRgb565LinePair,ry=16,ny=1<<ry-1,Jp=-227,IE=482,_q=6,sT=0,Eq=a(256),bq=a(256),Cq=a(256),Sq=a(256),Bq=a(IE-Jp),Tq=a(IE-Jp);Gi("YuvToRgbRow",tt,3),Gi("YuvToBgrRow",St,3),Gi("YuvToRgbaRow",$i,4),Gi("YuvToBgraRow",Gr,4),Gi("YuvToArgbRow",_r,4),Gi("YuvToRgba4444Row",ur,2),Gi("YuvToRgb565Row",Yt,2);var oT=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],iy=[0,2,8],Nq=[8,7,6,4,4,2,2,2,1,1,1,1],Iq=1;this.WebPDecodeRGBA=function(D,H,X,fe,we){var Ce=Z1,Se=new Sc,Ie=new Wt;Se.ba=Ie,Ie.S=Ce,Ie.width=[Ie.width],Ie.height=[Ie.height];var De=Ie.width,Qe=Ie.height,et=new rr;if(et==null||D==null)var dt=2;else e(et!=null),dt=Tc(D,H,X,et.width,et.height,et.Pd,et.Qd,et.format,null);if(dt!=0?De=0:(De!=null&&(De[0]=et.width[0]),Qe!=null&&(Qe[0]=et.height[0]),De=1),De){Ie.width=Ie.width[0],Ie.height=Ie.height[0],fe!=null&&(fe[0]=Ie.width),we!=null&&(we[0]=Ie.height);e:{if(fe=new Ia,(we=new yh).data=D,we.w=H,we.ha=X,we.kd=1,H=[0],e(we!=null),((D=Tc(we.data,we.w,we.ha,null,null,null,H,null,we))==0||D==7)&&H[0]&&(D=4),(H=D)==0){if(e(Se!=null),fe.data=we.data,fe.w=we.w+we.offset,fe.ha=we.ha-we.offset,fe.put=Ln,fe.ac=Tt,fe.bc=Kn,fe.ma=Se,we.xa){if((D=xt())==null){Se=1;break e}if(function(gt,ot){var Ot=[0],bt=[0],rt=[0];t:for(;;){if(gt==null)return 0;if(ot==null)return gt.a=2,0;if(gt.l=ot,gt.a=0,W(gt.m,ot.data,ot.w,ot.ha),!ir(gt.m,Ot,bt,rt)){gt.a=3;break t}if(gt.xb=tT,ot.width=Ot[0],ot.height=bt[0],!lt(Ot[0],bt[0],1,gt,null))break t;return 1}return e(gt.a!=0),0}(D,fe)){if(fe=(H=Cf(fe.width,fe.height,Se.Oa,Se.ba))==0){t:{fe=D;r:for(;;){if(fe==null){fe=0;break t}if(e(fe.s.yc!=null),e(fe.s.Ya!=null),e(0<fe.s.Wb),e((X=fe.l)!=null),e((we=X.ma)!=null),fe.xb!=0){if(fe.ca=we.ba,fe.tb=we.tb,e(fe.ca!=null),!td(we.Oa,X,J1)){fe.a=2;break r}if(!ft(fe,X.width)||X.da)break r;if((X.da||Ue(fe.ca.S))&&ut(),11>fe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),fe.ca.f.kb.F!=null&&ut()),fe.Pb&&0<fe.s.ua&&fe.s.vb.X==null&&!te(fe.s.vb,fe.s.Wa.Xa)){fe.a=1;break r}fe.xb=0}if(!qe(fe,fe.V,fe.Ba,fe.c,fe.i,X.o,ze))break r;we.Dc=fe.Ma,fe=1;break t}e(fe.a!=0),fe=0}fe=!fe}fe&&(H=D.a)}else H=D.a}else{if((D=new Fa)==null){Se=1;break e}if(D.Fa=we.na,D.P=we.P,D.qc=we.Sa,ni(D,fe)){if((H=Cf(fe.width,fe.height,Se.Oa,Se.ba))==0){if(D.Aa=0,X=Se.Oa,e((we=D)!=null),X!=null){if(0<(De=0>(De=X.Md)?0:100<De?255:255*De/100)){for(Qe=et=0;4>Qe;++Qe)12>(dt=we.pb[Qe]).lc&&(dt.ia=De*Nq[0>dt.lc?0:dt.lc]>>3),et|=dt.ia;et&&(alert("todo:VP8InitRandom"),we.ia=1)}we.Ga=X.Id,100<we.Ga?we.Ga=100:0>we.Ga&&(we.Ga=0)}Sl(D,fe)||(H=D.a)}}else H=D.a}H==0&&Se.Oa!=null&&Se.Oa.fd&&(H=rd(Se.ba))}Se=H}Ce=Se!=0?null:11>Ce?Ie.f.RGBA.eb:Ie.f.kb.y}else Ce=null;return Ce};var lT=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(B,T){for(var M="",F=0;F<4;F++)M+=String.fromCharCode(B[T++]);return M}function c(B,T){return(B[T+0]<<0|B[T+1]<<8|B[T+2]<<16)>>>0}function h(B,T){return(B[T+0]<<0|B[T+1]<<8|B[T+2]<<16|B[T+3]<<24)>>>0}new l;var f=[0],A=[0],d=[],p=new l,y=r,v=function(B,T){var M={},F=0,N=!1,O=0,L=0;if(M.frames=[],!function(z,K,J,ue){for(var ge=0;ge<ue;ge++)if(z[K+ge]!=J.charCodeAt(ge))return!0;return!1}(B,T,"RIFF",4)){var G,R;for(h(B,T+=4),T+=8;T<B.length;){var U=u(B,T),W=h(B,T+=4);T+=4;var Q=W+(1&W);switch(U){case"VP8 ":case"VP8L":M.frames[F]===void 0&&(M.frames[F]={}),(P=M.frames[F]).src_off=N?L:T-8,P.src_size=O+W+8,F++,N&&(N=!1,O=0,L=0);break;case"VP8X":(P=M.header={}).feature_flags=B[T];var re=T+4;P.canvas_width=1+c(B,re),re+=3,P.canvas_height=1+c(B,re),re+=3;break;case"ALPH":N=!0,O=Q+8,L=T-8;break;case"ANIM":(P=M.header).bgcolor=h(B,T),re=T+4,P.loop_count=(G=B)[(R=re)+0]<<0|G[R+1]<<8,re+=2;break;case"ANMF":var oe,P;(P=M.frames[F]={}).offset_x=2*c(B,T),T+=3,P.offset_y=2*c(B,T),T+=3,P.width=1+c(B,T),T+=3,P.height=1+c(B,T),T+=3,P.duration=c(B,T),T+=3,oe=B[T++],P.dispose=1&oe,P.blend=oe>>1&1}U!="ANMF"&&(T+=Q)}return M}}(y,0);v.response=y,v.rgbaoutput=!0,v.dataurl=!1;var w=v.header?v.header:null,x=v.frames?v.frames:null;if(w){w.loop_counter=w.loop_count,f=[w.canvas_height],A=[w.canvas_width];for(var b=0;b<x.length&&x[b].blend!=0;b++);}var C=x[0],S=p.WebPDecodeRGBA(y,C.src_off,C.src_size,A,f);C.rgba=S,C.imgwidth=A[0],C.imgheight=f[0];for(var I=0;I<A[0]*f[0]*4;I++)d[I]=S[I];return this.width=A,this.height=f,this.data=d,this}(function(r){var e=function(){return typeof d5=="function"},t=function(f,A,d,p){var y=4,v=s;switch(p){case r.image_compression.FAST:y=1,v=a;break;case r.image_compression.MEDIUM:y=6,v=o;break;case r.image_compression.SLOW:y=9,v=l}f=n(f,A,d,v);var w=d5(f,{level:y});return r.__addimage__.arrayBufferToBinaryString(w)},n=function(f,A,d,p){for(var y,v,w,x=f.length/A,b=new Uint8Array(f.length+x),C=c(),S=0;S<x;S+=1){if(w=S*A,y=f.subarray(w,w+A),p)b.set(p(y,d,v),w+S);else{for(var I,B=C.length,T=[];I<B;I+=1)T[I]=C[I](y,d,v);var M=h(T.concat());b.set(T[M],w+S)}v=y}return b},i=function(f){var A=Array.apply([],f);return A.unshift(0),A},a=function(f,A){var d,p=[],y=f.length;p[0]=1;for(var v=0;v<y;v+=1)d=f[v-A]||0,p[v+1]=f[v]-d+256&255;return p},s=function(f,A,d){var p,y=[],v=f.length;y[0]=2;for(var w=0;w<v;w+=1)p=d&&d[w]||0,y[w+1]=f[w]-p+256&255;return y},o=function(f,A,d){var p,y,v=[],w=f.length;v[0]=3;for(var x=0;x<w;x+=1)p=f[x-A]||0,y=d&&d[x]||0,v[x+1]=f[x]+256-(p+y>>>1)&255;return v},l=function(f,A,d){var p,y,v,w,x=[],b=f.length;x[0]=4;for(var C=0;C<b;C+=1)p=f[C-A]||0,y=d&&d[C]||0,v=d&&d[C-A]||0,w=u(p,y,v),x[C+1]=f[C]-w+256&255;return x},u=function(f,A,d){if(f===A&&A===d)return f;var p=Math.abs(A-d),y=Math.abs(f-d),v=Math.abs(f+A-d-d);return p<=y&&p<=v?f:y<=v?A:d},c=function(){return[i,a,s,o,l]},h=function(f){var A=f.map(function(d){return d.reduce(function(p,y){return p+Math.abs(y)},0)});return A.indexOf(Math.min.apply(null,A))};r.processPNG=function(f,A,d,p){var y,v,w,x,b,C,S,I,B,T,M,F,N,O,L,G=this.decode.FLATE_DECODE,R="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(w=new z1e(f)).imgData,v=w.bits,y=w.colorSpace,b=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){B=(I=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,M=new Uint8Array(B*w.colors),T=new Uint8Array(B);var U,W=w.pixelBitlength-w.bits;for(O=0,L=0;O<B;O++){for(N=I[O],U=0;U<W;)M[L++]=N>>>U&255,U+=w.bits;T[O]=N>>>U&255}}if(w.bits===16){B=(I=new Uint32Array(w.decodePixels().buffer)).length,M=new Uint8Array(B*(32/w.pixelBitlength)*w.colors),T=new Uint8Array(B*(32/w.pixelBitlength)),F=w.colors>1,O=0,L=0;for(var Q=0;O<B;)N=I[O++],M[L++]=N>>>0&255,F&&(M[L++]=N>>>16&255,N=I[O++],M[L++]=N>>>0&255),T[Q++]=N>>>16&255;v=8}p!==r.image_compression.NONE&&e()?(f=t(M,w.width*w.colors,w.colors,p),S=t(T,w.width,1,p)):(f=M,S=T,G=void 0)}if(w.colorType===3&&(y=this.color_spaces.INDEXED,C=w.palette,w.transparency.indexed)){var re=w.transparency.indexed,oe=0;for(O=0,B=re.length;O<B;++O)oe+=re[O];if((oe/=255)===B-1&&re.indexOf(0)!==-1)x=[re.indexOf(0)];else if(oe!==B){for(I=w.decodePixels(),T=new Uint8Array(I.length),O=0,B=I.length;O<B;O++)T[O]=re[I[O]];S=t(T,w.width,1)}}var P=function(z){var K;switch(z){case r.image_compression.FAST:K=11;break;case r.image_compression.MEDIUM:K=13;break;case r.image_compression.SLOW:K=14;break;default:K=12}return K}(p);return G===this.decode.FLATE_DECODE&&(R="/Predictor "+P+" "),R+="/Colors "+b+" /BitsPerComponent "+v+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(S&&this.__addimage__.isArrayBuffer(S)||this.__addimage__.isArrayBufferView(S))&&(S=this.__addimage__.arrayBufferToBinaryString(S)),{alias:d,data:f,index:A,filter:G,decodeParameters:R,transparency:x,palette:C,sMask:S,predictor:P,width:w.width,height:w.height,bitsPerComponent:v,colorSpace:y}}}})(Hr.API),function(r){r.processGIF89A=function(e,t,n,i){var a=new q1e(e),s=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:s,height:o},c=new vC(100).encode(u,100);return r.processJPEG.call(this,c,t,n,i)},r.processGIF87A=r.processGIF89A}(Hr.API),qu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},qu.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){Ri.log("bit decode error:"+t)}},qu.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}t!==0&&(this.pos+=4-t)}},qu.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<r;i++){var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*i*4,o=a>>4,l=15&a,u=this.palette[o];if(this.data[s]=u.blue,this.data[s+1]=u.green,this.data[s+2]=u.red,this.data[s+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[s+4]=u.blue,this.data[s+4+1]=u.green,this.data[s+4+2]=u.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},qu.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;if(i<this.palette.length){var s=this.palette[i];this.data[a]=s.red,this.data[a+1]=s.green,this.data[a+2]=s.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}r!==0&&(this.pos+=4-r)}},qu.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,u=a>>15?255:0,c=n*this.width*4+4*i;this.data[c]=l,this.data[c+1]=o,this.data[c+2]=s,this.data[c+3]=u}this.pos+=r}},qu.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&t)/t*255|0,u=(s>>11)/e*255|0,c=i*this.width*4+4*a;this.data[c]=u,this.data[c+1]=l,this.data[c+2]=o,this.data[c+3]=255}this.pos+=r}},qu.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},qu.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=s}},qu.prototype.getData=function(){return this.data},function(r){r.processBMP=function(e,t,n,i){var a=new qu(e,!1),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},u=new vC(100).encode(l,100);return r.processJPEG.call(this,u,t,n,i)}}(Hr.API),nL.prototype.getData=function(){return this.data},function(r){r.processWEBP=function(e,t,n,i){var a=new nL(e),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},u=new vC(100).encode(l,100);return r.processJPEG.call(this,u,t,n,i)}}(Hr.API),Hr.API.processRGBA=function(r,e,t){for(var n=r.data,i=n.length,a=new Uint8Array(i/4*3),s=new Uint8Array(i/4),o=0,l=0,u=0;u<i;u+=4){var c=n[u],h=n[u+1],f=n[u+2],A=n[u+3];a[o++]=c,a[o++]=h,a[o++]=f,s[l++]=A}var d=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:d,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Hr.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},j0=Hr.API,F2=j0.getCharWidthsArray=function(r,e){var t,n,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,c=u.fof?u.fof:1,h=e.doKerning!==!1,f=0,A=r.length,d=0,p=o[0]||l,y=[];for(t=0;t<A;t++)n=r.charCodeAt(t),typeof i.metadata.widthOfString=="function"?y.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+s*(1e3/a)||0)/1e3):(f=h&&oi(u[n])==="object"&&!isNaN(parseInt(u[n][d],10))?u[n][d]/c:0,y.push((o[n]||p)/l+f)),d=n;return y},JM=j0.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return j0.processArabic&&(r=j0.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,i)/t:F2.apply(this,arguments).reduce(function(a,s){return a+s},0)},eL=function(r,e,t,n){for(var i=[],a=0,s=r.length,o=0;a!==s&&o+e[a]<t;)o+=e[a],a++;i.push(r.slice(0,a));var l=a;for(o=0;a!==s;)o+e[a]>n&&(i.push(r.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&i.push(r.slice(l,a)),i},tL=function(r,e,t){t||(t={});var n,i,a,s,o,l,u,c=[],h=[c],f=t.textIndent||0,A=0,d=0,p=r.split(" "),y=F2.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?p[0].length+2:t.lineIndent||0){var v=Array(l).join(" "),w=[];p.map(function(b){(b=b.split(/\s*\n/)).length>1?w=w.concat(b.map(function(C,S){return(S&&C.length?`
`:"")+C})):w.push(b[0])}),p=w,l=JM.apply(this,[v,t])}for(a=0,s=p.length;a<s;a++){var x=0;if(n=p[a],l&&n[0]==`
`&&(n=n.substr(1),x=1),f+A+(d=(i=F2.apply(this,[n,t])).reduce(function(b,C){return b+C},0))>e||x){if(d>e){for(o=eL.apply(this,[n,i,e-(f+A),e]),c.push(o.shift()),c=[o.pop()];o.length;)h.push([o.shift()]);d=i.slice(n.length-(c[0]?c[0].length:0)).reduce(function(b,C){return b+C},0)}else c=[n];h.push(c),f=d+l,A=y}else c.push(n),f+=A+d,A=y}return u=l?function(b,C){return(C?v:"")+b.join(" ")}:function(b){return b.join(" ")},h.map(u)},j0.splitTextToSize=function(r,e,t){var n,i=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var h=this.internal.getFont(c.fontName,c.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=t.lineIndent;var o,l,u=[];for(o=0,l=n.length;o<l;o++)u=u.concat(tL.apply(this,[n[o],s,a]));return u},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},n={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],n["0123456789abcdef"[i]]=e[i];var a=function(h){return"0x"+parseInt(h,10).toString(16)},s=r.__fontmetrics__.compress=function(h){var f,A,d,p,y=["{"];for(var v in h){if(f=h[v],isNaN(parseInt(v,10))?A="'"+v+"'":(v=parseInt(v,10),A=(A=a(v).slice(2)).slice(0,-1)+n[A.slice(-1)]),typeof f=="number")f<0?(d=a(f).slice(3),p="-"):(d=a(f).slice(2),p=""),d=p+d.slice(0,-1)+n[d.slice(-1)];else{if(oi(f)!=="object")throw new Error("Don't know what to do with value type "+oi(f)+".");d=s(f)}y.push(A+d)}return y.push("}"),y.join("")},o=r.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,A,d,p,y={},v=1,w=y,x=[],b="",C="",S=h.length-1,I=1;I<S;I+=1)(p=h[I])=="'"?f?(d=f.join(""),f=void 0):f=[]:f?f.push(p):p=="{"?(x.push([w,d]),w={},d=void 0):p=="}"?((A=x.pop())[0][A[1]]=w,d=void 0,w=A[0]):p=="-"?v=-1:d===void 0?t.hasOwnProperty(p)?(b+=t[p],d=parseInt(b,16)*v,v=1,b=""):b+=p:t.hasOwnProperty(p)?(C+=t[p],w[d]=parseInt(C,16)*v,v=1,d=void 0,C=""):C+=p;return y},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},c={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(h){var f=h.font,A=c.Unicode[f.postScriptName];A&&(f.metadata.Unicode={},f.metadata.Unicode.widths=A.widths,f.metadata.Unicode.kerning=A.kerning);var d=u.Unicode[f.postScriptName];d&&(f.metadata.Unicode.encoding=d,f.encoding=d.codePages[0])}])}(Hr.API),function(r){var e=function(t){for(var n=t.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=t.charCodeAt(a);return i};r.API.events.push(["addFont",function(t){var n=void 0,i=t.font,a=t.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Ev(o)),s.metadata=r.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,n)}}])}(Hr),function(r){function e(){return(jr.canvg?Promise.resolve(jr.canvg):jl(()=>import("./index.es-CU16RYG0.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Hr.API.addSvgAsImage=function(t,n,i,a,s,o,l,u){if(isNaN(n)||isNaN(i))throw Ri.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(s))throw Ri.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=a,c.height=s;var h=c.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,c.width,c.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},A=this;return e().then(function(d){return d.fromString(h,t,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(d){return d.render(f)}).then(function(){A.addImage(c.toDataURL("image/jpeg",1),n,i,a,s,l,u)})}}(),Hr.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,t);return this},Hr.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,i,a,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],u=0,c=0,h=0;function f(d,p){var y,v=!1;for(y=0;y<d.length;y+=1)d[y]===p&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var A=o.length;for(h=0;h<A;h+=1)t[o[h]].value=t[o[h]].defaultValue,t[o[h]].explicitSet=!1}if(oi(r)==="object"){for(i in r)if(a=r[i],f(o,i)&&a!==void 0){if(t[i].type==="boolean"&&typeof a=="boolean")t[i].value=a;else if(t[i].type==="name"&&f(t[i].valueSet,a))t[i].value=a;else if(t[i].type==="integer"&&Number.isInteger(a))t[i].value=a;else if(t[i].type==="array"){for(u=0;u<a.length;u+=1)if(n=!0,a[u].length===1&&typeof a[u][0]=="number")l.push(String(a[u]-1));else if(a[u].length>1){for(c=0;c<a[u].length;c+=1)typeof a[u][c]!="number"&&(n=!1);n===!0&&l.push([a[u][0]-1,a[u][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var d,p=[];for(d in t)t[d].explicitSet===!0&&(t[d].type==="name"?p.push("/"+d+" /"+t[d].value):p.push("/"+d+" "+t[d].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+s.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+a+s+o+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Hr.API),function(r){var e=r.API,t=e.pdfEscape16=function(a,s){for(var o,l=s.metadata.Unicode.widths,u=["","0","00","000","0000"],c=[""],h=0,f=a.length;h<f;++h){if(o=s.metadata.characterToGlyph(a.charCodeAt(h)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=a.charCodeAt(h),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(s.metadata.widthOfGlyph(o),10)])),o=="0")return c.join("");o=o.toString(16),c.push(u[4-o.length],o)}return c.join("")},n=function(a){var s,o,l,u,c,h,f;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,f=(o=Object.keys(a).sort(function(A,d){return A-d})).length;h<f;h++)s=o[h],l.length>=100&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[s]!==void 0&&a[s]!==null&&typeof a[s].toString=="function"&&(u=("0000"+a[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+u+">"));return l.length&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),c+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,u=s.newObject,c=s.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="Identity-H"){for(var h=o.metadata.Unicode.widths,f=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),A="",d=0;d<f.length;d++)A+=String.fromCharCode(f[d]);var p=u();c({data:A,addLength1:!0,objectId:p}),l("endobj");var y=u();c({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var v=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+cg(o.fontName)),l("/FontFile2 "+p+" 0 R"),l("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var w=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+cg(o.fontName)),l("/FontDescriptor "+v+" 0 R"),l("/W "+r.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+y+" 0 R"),l("/BaseFont /"+cg(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+w+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,u=s.newObject,c=s.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var h=o.metadata.rawData,f="",A=0;A<h.length;A++)f+=String.fromCharCode(h[A]);var d=u();c({data:f,addLength1:!0,objectId:d}),l("endobj");var p=u();c({data:n(o.metadata.toUnicode),addLength1:!0,objectId:p}),l("endobj");var y=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+d+" 0 R"),l("/Flags 96"),l("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+cg(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var v=0;v<o.metadata.hmtx.widths.length;v++)o.metadata.hmtx.widths[v]=parseInt(o.metadata.hmtx.widths[v]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+cg(o.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var i=function(a){var s,o=a.text||"",l=a.x,u=a.y,c=a.options||{},h=a.mutex||{},f=h.pdfEscape,A=h.activeFontKey,d=h.fonts,p=A,y="",v=0,w="",x=d[p].encoding;if(d[p].encoding!=="Identity-H")return{text:o,x:l,y:u,options:c,mutex:h};for(w=o,p=A,Array.isArray(o)&&(w=o[0]),v=0;v<w.length;v+=1)d[p].metadata.hasOwnProperty("cmap")&&(s=d[p].metadata.cmap.unicode.codeMap[w[v].charCodeAt(0)]),s||w[v].charCodeAt(0)<256&&d[p].metadata.hasOwnProperty("Unicode")?y+=w[v]:y+="";var b="";return parseInt(p.slice(1))<14||x==="WinAnsiEncoding"?b=f(y,p).split("").map(function(C){return C.charCodeAt(0).toString(16)}).join(""):x==="Identity-H"&&(b=t(y,d[p])),h.isHex=!0,{text:b,x:l,y:u,options:c,mutex:h}};e.events.push(["postProcessText",function(a){var s=a.text||"",o=[],l={text:s,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(s)){var u=0;for(u=0;u<s.length;u+=1)Array.isArray(s[u])&&s[u].length===3?o.push([i(Object.assign({},l,{text:s[u][0]})).text,s[u][1],s[u][2]]):o.push(i(Object.assign({},l,{text:s[u]})).text);a.text=o}else a.text=i(Object.assign({},l,{text:s})).text}])}(Hr),function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Hr.API),function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var i,a,s,o,l,u,c,h=e,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],A=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,x=0;this.__bidiEngine__={};var b=function(F){var N=F.charCodeAt(),O=N>>8,L=p[O];return L!==void 0?h[256*L+(255&N)]:O===252||O===253?"AL":v.test(O)?"L":O===8?"R":"N"},C=function(F){for(var N,O=0;O<F.length;O++){if((N=b(F.charAt(O)))==="L")return!1;if(N==="R")return!0}return!1},S=function(F,N,O,L){var G,R,U,W,Q=N[L];switch(Q){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(Q="AN");break;case"AL":w=!0,Q="R";break;case"WS":Q="N";break;case"CS":L<1||L+1>=N.length||(G=O[L-1])!=="EN"&&G!=="AN"||(R=N[L+1])!=="EN"&&R!=="AN"?Q="N":w&&(R="AN"),Q=R===G?R:"N";break;case"ES":Q=(G=L>0?O[L-1]:"B")==="EN"&&L+1<N.length&&N[L+1]==="EN"?"EN":"N";break;case"ET":if(L>0&&O[L-1]==="EN"){Q="EN";break}if(w){Q="N";break}for(U=L+1,W=N.length;U<W&&N[U]==="ET";)U++;Q=U<W&&N[U]==="EN"?"EN":"N";break;case"NSM":if(s&&!o){for(W=N.length,U=L+1;U<W&&N[U]==="NSM";)U++;if(U<W){var re=F[L],oe=re>=1425&&re<=2303||re===64286;if(G=N[U],oe&&(G==="R"||G==="AL")){Q="R";break}}}Q=L<1||(G=N[L-1])==="B"?"N":O[L-1];break;case"B":w=!1,i=!0,Q=x;break;case"S":a=!0,Q="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":Q="N"}return Q},I=function(F,N,O){var L=F.split("");return O&&B(L,O,{hiLevel:x}),L.reverse(),N&&N.reverse(),L.join("")},B=function(F,N,O){var L,G,R,U,W,Q=-1,re=F.length,oe=0,P=[],z=x?A:f,K=[];for(w=!1,i=!1,a=!1,G=0;G<re;G++)K[G]=b(F[G]);for(R=0;R<re;R++){if(W=oe,P[R]=S(F,K,P,R),L=240&(oe=z[W][d[P[R]]]),oe&=15,N[R]=U=z[oe][5],L>0)if(L===16){for(G=Q;G<R;G++)N[G]=1;Q=-1}else Q=-1;if(z[oe][6])Q===-1&&(Q=R);else if(Q>-1){for(G=Q;G<R;G++)N[G]=U;Q=-1}K[R]==="B"&&(N[R]=0),O.hiLevel|=U}a&&function(J,ue,ge){for(var le=0;le<ge;le++)if(J[le]==="S"){ue[le]=x;for(var me=le-1;me>=0&&J[me]==="WS";me--)ue[me]=x}}(K,N,re)},T=function(F,N,O,L,G){if(!(G.hiLevel<F)){if(F===1&&x===1&&!i)return N.reverse(),void(O&&O.reverse());for(var R,U,W,Q,re=N.length,oe=0;oe<re;){if(L[oe]>=F){for(W=oe+1;W<re&&L[W]>=F;)W++;for(Q=oe,U=W-1;Q<U;Q++,U--)R=N[Q],N[Q]=N[U],N[U]=R,O&&(R=O[Q],O[Q]=O[U],O[U]=R);oe=W}oe++}}},M=function(F,N,O){var L=F.split(""),G={hiLevel:x};return O||(O=[]),B(L,O,G),function(R,U,W){if(W.hiLevel!==0&&c)for(var Q,re=0;re<R.length;re++)U[re]===1&&(Q=y.indexOf(R[re]))>=0&&(R[re]=y[Q+1])}(L,O,G),T(2,L,N,O,G),T(1,L,N,O,G),L.join("")};return this.__bidiEngine__.doBidiReorder=function(F,N,O){if(function(G,R){if(R)for(var U=0;U<G.length;U++)R[U]=U;o===void 0&&(o=C(G)),u===void 0&&(u=C(G))}(F,N),s||!l||u)if(s&&l&&o^u)x=o?1:0,F=I(F,N,O);else if(!s&&l&&u)x=o?1:0,F=M(F,N,O),F=I(F,N);else if(!s||o||l||u){if(s&&!l&&o^u)F=I(F,N),o?(x=0,F=M(F,N,O)):(x=1,F=M(F,N,O),F=I(F,N));else if(s&&o&&!l&&u)x=1,F=M(F,N,O),F=I(F,N);else if(!s&&!l&&o^u){var L=c;o?(x=1,F=M(F,N,O),x=0,c=!1,F=M(F,N,O),c=L):(x=0,F=M(F,N,O),F=I(F,N),x=1,c=!1,F=M(F,N,O),c=L,F=I(F,N))}}else x=0,F=M(F,N,O);else x=o?1:0,F=M(F,N,O);return F},this.__bidiEngine__.setOptions=function(F){F&&(s=F.isInputVisual,l=F.isOutputVisual,o=F.isInputRtl,u=F.isOutputRtl,c=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var i=n.text,a=(n.x,n.y,n.options||{}),s=(n.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(s=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?s.push([t.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):s.push([t.doBidiReorder(i[o])]);n.text=s}else n.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Hr),Hr.API.TTFFont=function(){function r(e){var t;if(this.rawData=e,t=this.contents=new LA(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new aye(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new j1e(this.contents),this.head=new K1e(this),this.name=new Z1e(this),this.cmap=new hQ(this),this.toUnicode={},this.hhea=new V1e(this),this.maxp=new J1e(this),this.hmtx=new eye(this),this.post=new Y1e(this),this.os2=new W1e(this),this.loca=new iye(this),this.glyf=new tye(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,o,l,u;for(u=[],s=0,o=(l=this.bbox).length;s<o;s++)e=l[s],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var i,a,s,o;for(s=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)i=e.charCodeAt(a),s+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/t)||0;return s*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r}();var fc,LA=function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,i;for(i=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,i,a,s,o,l;return e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^a)+65536*(255^s)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*i+16777216*a+65536*s+256*o+l},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,i,a;for(a=[],n=0,i=e.length;n<i;n++)t=e[n],a.push(this.writeByte(t));return a},r}(),j1e=function(){var r;function e(t){var n,i,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,i,a,s,o,l,u,c,h,f,A,d,p;for(p in A=Object.keys(t).length,l=Math.log(2),h=16*Math.floor(Math.log(A)/l),s=Math.floor(h/l),c=16*A-h,(i=new LA).writeInt(this.scalarType),i.writeShort(A),i.writeShort(h),i.writeShort(s),i.writeShort(c),a=16*A,u=i.pos+a,o=null,d=[],t)for(f=t[p],i.writeString(p),i.writeInt(r(f)),i.writeInt(u),i.writeInt(f.length),d=d.concat(f),p==="head"&&(o=u),u+=f.length;u%4;)d.push(0),u++;return i.write(d),n=2981146554-r(i.data),i.pos=o+8,i.writeUInt32(n),i.data},r=function(t){var n,i,a,s;for(t=fQ.call(t);t.length%4;)t.push(0);for(a=new LA(t),i=0,n=0,s=t.length;n<s;n=n+=4)i+=a.readUInt32();return 4294967295&i},e}(),$1e={}.hasOwnProperty,fh=function(r,e){for(var t in e)$1e.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};fc=function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var K1e=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fh(e,fc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new LA).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),iL=function(){function r(e,t){var n,i,a,s,o,l,u,c,h,f,A,d,p,y,v,w,x;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(A=e.readUInt16(),f=A/2,e.pos+=6,a=function(){var b,C;for(C=[],l=b=0;0<=f?b<f:b>f;l=0<=f?++b:--b)C.push(e.readUInt16());return C}(),e.pos+=2,p=function(){var b,C;for(C=[],l=b=0;0<=f?b<f:b>f;l=0<=f?++b:--b)C.push(e.readUInt16());return C}(),u=function(){var b,C;for(C=[],l=b=0;0<=f?b<f:b>f;l=0<=f?++b:--b)C.push(e.readUInt16());return C}(),c=function(){var b,C;for(C=[],l=b=0;0<=f?b<f:b>f;l=0<=f?++b:--b)C.push(e.readUInt16());return C}(),i=(this.length-e.pos+this.offset)/2,o=function(){var b,C;for(C=[],l=b=0;0<=i?b<i:b>i;l=0<=i?++b:--b)C.push(e.readUInt16());return C}(),l=v=0,x=a.length;v<x;l=++v)for(y=a[l],n=w=d=p[l];d<=y?w<=y:w>=y;n=d<=y?++w:--w)c[l]===0?s=n+u[l]:(s=o[c[l]/2+(n-d)-(f-l)]||0)!==0&&(s+=u[l]),this.codeMap[n]=65535&s}e.pos=h}return r.encode=function(e,t){var n,i,a,s,o,l,u,c,h,f,A,d,p,y,v,w,x,b,C,S,I,B,T,M,F,N,O,L,G,R,U,W,Q,re,oe,P,z,K,J,ue,ge,le,me,xe,Be,Y;switch(L=new LA,s=Object.keys(e).sort(function(Ve,te){return Ve-te}),t){case"macroman":for(p=0,y=function(){var Ve=[];for(d=0;d<256;++d)Ve.push(0);return Ve}(),w={0:0},a={},G=0,Q=s.length;G<Q;G++)w[me=e[i=s[G]]]==null&&(w[me]=++p),a[i]={old:e[i],new:w[e[i]]},y[i]=w[e[i]];return L.writeUInt16(1),L.writeUInt16(0),L.writeUInt32(12),L.writeUInt16(0),L.writeUInt16(262),L.writeUInt16(0),L.write(y),{charMap:a,subtable:L.data,maxGlyphID:p+1};case"unicode":for(N=[],h=[],x=0,w={},n={},v=u=null,R=0,re=s.length;R<re;R++)w[C=e[i=s[R]]]==null&&(w[C]=++x),n[i]={old:C,new:w[C]},o=w[C]-i,v!=null&&o===u||(v&&h.push(v),N.push(i),u=o),v=i;for(v&&h.push(v),h.push(65535),N.push(65535),M=2*(T=N.length),B=2*Math.pow(Math.log(T)/Math.LN2,2),f=Math.log(B/2)/Math.LN2,I=2*T-B,l=[],S=[],A=[],d=U=0,oe=N.length;U<oe;d=++U){if(F=N[d],c=h[d],F===65535){l.push(0),S.push(0);break}if(F-(O=n[F].new)>=32768)for(l.push(0),S.push(2*(A.length+T-d)),i=W=F;F<=c?W<=c:W>=c;i=F<=c?++W:--W)A.push(n[i].new);else l.push(O-F),S.push(0)}for(L.writeUInt16(3),L.writeUInt16(1),L.writeUInt32(12),L.writeUInt16(4),L.writeUInt16(16+8*T+2*A.length),L.writeUInt16(0),L.writeUInt16(M),L.writeUInt16(B),L.writeUInt16(f),L.writeUInt16(I),ge=0,P=h.length;ge<P;ge++)i=h[ge],L.writeUInt16(i);for(L.writeUInt16(0),le=0,z=N.length;le<z;le++)i=N[le],L.writeUInt16(i);for(xe=0,K=l.length;xe<K;xe++)o=l[xe],L.writeUInt16(o);for(Be=0,J=S.length;Be<J;Be++)b=S[Be],L.writeUInt16(b);for(Y=0,ue=A.length;Y<ue;Y++)p=A[Y],L.writeUInt16(p);return{charMap:n,subtable:L.data,maxGlyphID:x+1}}},r}(),hQ=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fh(e,fc),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,i,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)n=new iL(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var i,a;return n==null&&(n="macroman"),i=iL.encode(t,n),(a=new LA).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},e}(),V1e=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fh(e,fc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),W1e=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fh(e,fc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,i;for(i=[],n=0;n<10;++n)i.push(t.readByte());return i}(),this.charRange=function(){var n,i;for(i=[],n=0;n<4;++n)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,i;for(i=[],n=0;n<2;n=++n)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),Y1e=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fh(e,fc),e.prototype.tag="post",e.prototype.parse=function(t){var n,i,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var s;for(i=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)n=t.readByte(),a.push(this.names.push(t.readString(n)));return a;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)u.push(t.readUInt32());return u}).call(this)}},e}(),X1e=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Z1e=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fh(e,fc),e.prototype.tag="name",e.prototype.parse=function(t){var n,i,a,s,o,l,u,c,h,f,A;for(t.pos=this.offset,t.readShort(),n=t.readShort(),l=t.readShort(),i=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(u={},s=h=0,f=i.length;h<f;s=++h)a=i[s],t.pos=a.offset,c=t.readString(a.length),o=new X1e(c,a),u[A=a.nameID]==null&&(u[A]=[]),u[a.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),J1e=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fh(e,fc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),eye=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fh(e,fc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,i,a,s,o,l,u;for(t.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,h;for(h=[],n=c=0;0<=a?c<a:c>a;n=0<=a?++c:--c)h.push(t.readInt16());return h}(),this.widths=(function(){var c,h,f,A;for(A=[],c=0,h=(f=this.metrics).length;c<h;c++)s=f[c],A.push(s.advance);return A}).call(this),i=this.widths[this.widths.length-1],u=[],n=o=0;0<=a?o<a:o>a;n=0<=a?++o:--o)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),fQ=[].slice,tye=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fh(e,fc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,i,a,s,o,l,u,c,h,f;return t in this.cache?this.cache[t]:(s=this.file.loca,n=this.file.contents,i=s.indexOf(t),(a=s.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+i,o=(l=new LA(n.read(a))).readShort(),c=l.readShort(),f=l.readShort(),u=l.readShort(),h=l.readShort(),this.cache[t]=o===-1?new nye(l,c,f,u,h):new rye(l,o,c,f,u,h),this.cache[t]))},e.prototype.encode=function(t,n,i){var a,s,o,l,u;for(o=[],s=[],l=0,u=n.length;l<u;l++)a=t[n[l]],s.push(o.length),a&&(o=o.concat(a.encode(i)));return s.push(o.length),{table:o,offsets:s}},e}(),rye=function(){function r(e,t,n,i,a,s){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=s,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),nye=function(){function r(e,t,n,i,a){var s,o;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new LA(fQ.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r}(),iye=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fh(e,fc),e.prototype.tag="loca",e.prototype.parse=function(t){var n,i;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var a,s;for(s=[],i=0,a=this.length;i<a;i+=2)s.push(2*t.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],i=0,a=this.length;i<a;i+=4)s.push(t.readUInt32());return s}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var i=new Uint32Array(this.offsets.length),a=0,s=0,o=0;o<i.length;++o)if(i[o]=a,s<n.length&&n[s]==o){++s,i[o]=a;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(a+=u)}for(var c=new Array(4*i.length),h=0;h<i.length;++h)c[4*h+3]=255&i[h],c[4*h+2]=(65280&i[h])>>8,c[4*h+1]=(16711680&i[h])>>16,c[4*h]=(4278190080&i[h])>>24;return c},e}(),aye=function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,i,a;for(t in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[t],e[t]=i[n];return e},r.prototype.glyphsFor=function(e){var t,n,i,a,s,o,l;for(i={},s=0,o=e.length;s<o;s++)i[a=e[s]]=this.font.glyf.glyphFor(a);for(a in t=[],i)(n=i[a])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(a in l=this.glyphsFor(t))n=l[a],i[a]=n;return i},r.prototype.encode=function(e,t){var n,i,a,s,o,l,u,c,h,f,A,d,p,y,v;for(i in n=hQ.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),A={0:0},v=n.charMap)A[(l=v[i]).old]=l.new;for(d in f=n.maxGlyphID,s)d in A||(A[d]=f++);return c=function(w){var x,b;for(x in b={},w)b[w[x]]=x;return b}(A),h=Object.keys(c).sort(function(w,x){return w-x}),p=function(){var w,x,b;for(b=[],w=0,x=h.length;w<x;w++)o=h[w],b.push(c[o]);return b}(),a=this.font.glyf.encode(s,p,A),u=this.font.loca.encode(a.offsets,p),y={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},r}();Hr.API.PDFObject=function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,i,a,s;if(Array.isArray(t))return"["+function(){var o,l,u;for(u=[],o=0,l=t.length;o<l;o++)n=t[o],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in a=["<<"],t)s=t[i],a.push("/"+i+" "+e.convert(s));return a.push(">>"),a.join(`
`)}return""+t},e}();class sye{constructor(){this.formats=[{value:"png",label:"PNG 이미지"},{value:"jpg",label:"JPG 이미지"},{value:"pdf",label:"PDF 문서"}]}async exportMapWithOverlays(e={}){const{format:t="png",filename:n="e-GIS_map",quality:i=.92,scale:a=2,overlays:s={}}=e,o=document.getElementById("map");if(!o)throw new Error("지도 요소를 찾을 수 없습니다.");await this.waitForMapRender();try{const l=await u5(o,{useCORS:!0,allowTaint:!0,scale:a,logging:!1,backgroundColor:"#ffffff"}),u=this.drawOverlays(l,s,a);switch(t){case"png":this.downloadAsPNG(u,n);break;case"jpg":this.downloadAsJPG(u,n,i);break;case"pdf":this.downloadAsPDF(u,n);break;default:throw new Error("지원하지 않는 형식입니다.")}return{success:!0,format:t,filename:n}}catch(l){throw console.error("내보내기 실패:",l),l}}drawOverlays(e,t,n){const i=document.createElement("canvas");i.width=e.width,i.height=e.height;const a=i.getContext("2d");a.drawImage(e,0,0);const s=i.width,o=i.height,l=n;return t.title&&this.drawTitle(a,t.title,s,o,l),t.scaleBar&&this.drawScaleBar(a,t.scaleBar,s,o,l),t.compass&&this.drawCompass(a,t.compass,s,o,l),t.legend&&this.drawLegend(a,t.legend,s,o,l),t.textBox&&this.drawTextBox(a,t.textBox,s,o,l),i}drawTitle(e,t,n,i,a){const{text:s,fontSize:o=24,fontWeight:l="bold",fontFamily:u="Malgun Gothic",color:c="#333333",shadow:h=!1,shadowColor:f="rgba(0,0,0,0.3)",stroke:A=!1,strokeColor:d="#ffffff",strokeWidth:p=2,x:y=.5,y:v=.08}=t,w=o*a,x=y*n,b=v*i;e.save(),e.font=`${l} ${w}px "${u}", sans-serif`;const C=e.measureText(s).width+40*a;e.fillStyle="rgba(255, 255, 255, 0.85)",e.fillRect(x-C/2,b-w/2-10*a,C,w+20*a),e.textAlign="center",e.textBaseline="middle",h&&(e.shadowColor=f,e.shadowBlur=6*a,e.shadowOffsetX=3*a,e.shadowOffsetY=3*a),A&&(e.strokeStyle=d,e.lineWidth=p*a,e.strokeText(s,x,b)),e.fillStyle=c,e.fillText(s,x,b),e.restore()}drawScaleBar(e,t,n,i,a){const s=Nr.getMap();if(!s)return;const{fontSize:o=12,fontFamily:l="Malgun Gothic",color:u="#333333",x:c=.05,y:h=.92}=t,f=s.getView(),A=f.getResolution(),d=f.getProjection().getMetersPerUnit(),p=A*d,y=[100,200,500,1e3,2e3,5e3,1e4,2e4,5e4,1e5],v=100*a;let w=y[0],x=v;for(const B of y){const T=B/p;if(T>=50*a&&T<=200*a){w=B,x=T;break}}const b=c*n,C=h*i,S=8*a,I=o*a;e.save(),e.fillStyle="rgba(255, 255, 255, 0.85)",e.fillRect(b-5*a,C-25*a,x+20*a,45*a),e.fillStyle="#333",e.fillRect(b,C,x,S),e.fillStyle="#fff",e.fillRect(b,C,x/2,S),e.strokeStyle="#333",e.lineWidth=a,e.strokeRect(b,C,x,S),e.beginPath(),e.moveTo(b,C-3*a),e.lineTo(b,C+S+3*a),e.moveTo(b+x/2,C-3*a),e.lineTo(b+x/2,C+S+3*a),e.moveTo(b+x,C-3*a),e.lineTo(b+x,C+S+3*a),e.stroke(),e.fillStyle=u,e.font=`${I}px "${l}", sans-serif`,e.textAlign="center",e.fillText("0",b,C-8*a),e.fillText(this.formatDistance(w/2),b+x/2,C-8*a),e.fillText(this.formatDistance(w),b+x,C-8*a),e.restore()}formatDistance(e){return e>=1e3?e/1e3+" km":e+" m"}drawCompass(e,t,n,i,a){const{size:s=50,x:o=.92,y:l=.12}=t,u=s*a,c=o*n,h=l*i;e.save(),e.beginPath(),e.arc(c,h,u,0,Math.PI*2),e.fillStyle="rgba(255, 255, 255, 0.9)",e.fill(),e.strokeStyle="#666",e.lineWidth=2*a,e.stroke(),e.beginPath(),e.moveTo(c,h-u*.7),e.lineTo(c-u*.2,h),e.lineTo(c,h-u*.1),e.closePath(),e.fillStyle="#d32f2f",e.fill(),e.beginPath(),e.moveTo(c,h-u*.7),e.lineTo(c+u*.2,h),e.lineTo(c,h-u*.1),e.closePath(),e.fillStyle="#b71c1c",e.fill(),e.beginPath(),e.moveTo(c,h+u*.7),e.lineTo(c-u*.2,h),e.lineTo(c,h+u*.1),e.closePath(),e.fillStyle="#fff",e.strokeStyle="#333",e.lineWidth=a,e.fill(),e.stroke(),e.beginPath(),e.moveTo(c,h+u*.7),e.lineTo(c+u*.2,h),e.lineTo(c,h+u*.1),e.closePath(),e.fillStyle="#eee",e.fill(),e.stroke(),e.fillStyle="#333",e.font=`bold ${14*a}px "Malgun Gothic", sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillText("N",c,h-u-10*a),e.restore()}drawLegend(e,t,n,i,a){const{layers:s,fontSize:o=12,fontFamily:l="Malgun Gothic",color:u="#333333",x:c=.85,y:h=.35}=t;if(!s||s.length===0)return;const f=10*a,A=o*a,d=20*a,p=120*a,y=s.length*d+f*3,v=c*n,w=h*i;e.save(),e.fillStyle="rgba(255, 255, 255, 0.9)",e.fillRect(v,w,p,y),e.strokeStyle="#999",e.lineWidth=a,e.strokeRect(v,w,p,y),e.fillStyle=u,e.font=`bold ${A}px "${l}", sans-serif`,e.textAlign="left",e.fillText("범례",v+f,w+f+10*a),s.forEach((x,b)=>{const C=w+f*2+10*a+b*d;e.fillStyle=x.color,e.fillRect(v+f,C,14*a,14*a),e.strokeStyle="#666",e.strokeRect(v+f,C,14*a,14*a),e.fillStyle=u,e.font=`${(o-1)*a}px "${l}", sans-serif`,e.fillText(x.name.length>10?x.name.substring(0,10)+"...":x.name,v+f+18*a,C+11*a)}),e.restore()}drawTextBox(e,t,n,i,a){const{text:s,fontSize:o=12,fontWeight:l="normal",fontFamily:u="Malgun Gothic",color:c="#333333",shadow:h=!1,stroke:f=!1,strokeColor:A="#ffffff",strokeWidth:d=1,x:p=.05,y=.75}=t;if(!s)return;const v=10*a,w=s.split(`
`),x=o*a,b=(o+4)*a,C=Math.min(200*a,n*.4),S=w.length*b+v*2,I=p*n,B=y*i;e.save(),e.fillStyle="rgba(255, 255, 255, 0.9)",e.fillRect(I,B,C,S),e.strokeStyle="#999",e.lineWidth=a,e.strokeRect(I,B,C,S),e.font=`${l} ${x}px "${u}", sans-serif`,e.textAlign="left",h&&(e.shadowColor="rgba(0,0,0,0.3)",e.shadowBlur=4*a,e.shadowOffsetX=2*a,e.shadowOffsetY=2*a),w.forEach((T,M)=>{const F=B+v+b*(M+.8);f&&(e.strokeStyle=A,e.lineWidth=d*a,e.strokeText(T.substring(0,30),I+v,F)),e.fillStyle=c,e.fillText(T.substring(0,30),I+v,F)}),e.restore()}async exportMap(e={}){const{format:t="png",filename:n="e-GIS_map",quality:i=.92,scale:a=2,noBasemap:s=!1}=e,o=document.getElementById("map");if(!o)throw new Error("지도 요소를 찾을 수 없습니다.");const l=Nr.getMap();let u=[];s&&l&&(l.getLayers().forEach(c=>{(c.constructor.name==="TileLayer"||c.getSource&&c.getSource().constructor.name.includes("Tile"))&&c.getVisible()&&(u.push(c),c.setVisible(!1))}),l.renderSync()),await this.waitForMapRender();try{const c=await u5(o,{useCORS:!0,allowTaint:!0,scale:a,logging:!1,backgroundColor:s?null:"#ffffff"});switch(u.forEach(h=>h.setVisible(!0)),u.length>0&&l&&l.renderSync(),t){case"png":this.downloadAsPNG(c,n);break;case"jpg":this.downloadAsJPG(c,n,i);break;case"pdf":this.downloadAsPDF(c,n);break;default:throw new Error("지원하지 않는 형식입니다.")}return{success:!0,format:t,filename:n}}catch(c){throw u.forEach(h=>h.setVisible(!0)),c}}waitForMapRender(){return new Promise(e=>{const t=Nr.getMap();t?(t.once("rendercomplete",e),t.renderSync()):e()})}downloadAsPNG(e,t){const n=document.createElement("a");n.download=`${t}.png`,n.href=e.toDataURL("image/png"),n.click()}downloadAsJPG(e,t,n){const i=document.createElement("a");i.download=`${t}.jpg`,i.href=e.toDataURL("image/jpeg",n),i.click()}downloadAsPDF(e,t){const n=e.toDataURL("image/png"),i=e.width,a=e.height,s=new Hr({orientation:i>a?"landscape":"portrait",unit:"px",format:[i,a]});s.addImage(n,"PNG",0,0,i,a),s.save(`${t}.pdf`)}getFormats(){return this.formats}}const aL=new sye;class oye{constructor(){this.modal=null,this.previewCanvas=null,this.previewCtx=null,this.dragging=null,this.dragOffset={x:0,y:0},this.elements={title:{enabled:!1,text:"지도 제목",x:.5,y:.08,fontSize:24,fontWeight:"bold",fontFamily:"Malgun Gothic",color:"#333333",shadow:!1,shadowColor:"#000000",stroke:!1,strokeColor:"#ffffff",strokeWidth:2},scaleBar:{enabled:!0,x:.05,y:.92,fontSize:12,fontFamily:"Malgun Gothic",color:"#333333"},compass:{enabled:!0,x:.92,y:.12,size:50},legend:{enabled:!1,x:.85,y:.35,fontSize:12,fontFamily:"Malgun Gothic",color:"#333333"},textBox:{enabled:!1,text:"",x:.05,y:.75,fontSize:12,fontWeight:"normal",fontFamily:"Malgun Gothic",color:"#333333",shadow:!1,stroke:!1,strokeColor:"#ffffff",strokeWidth:1}},this.fonts=[{value:"Malgun Gothic",label:"맑은 고딕"},{value:"Nanum Gothic",label:"나눔고딕"},{value:"Noto Sans KR",label:"Noto Sans"},{value:"Arial",label:"Arial"},{value:"Georgia",label:"Georgia"},{value:"Times New Roman",label:"Times"}]}show(){this.render()}render(){this.close();const e=aL.getFormats();this.modal=document.createElement("div"),this.modal.className="export-modal",this.modal.innerHTML=this.getModalHTML(e),document.body.appendChild(this.modal),this.addStyles(),this.syncUIFromElements(),this.bindEvents()}getModalHTML(e){const t=e.map(a=>'<option value="'+a.value+'">'+a.label+"</option>").join(""),i=pt.getAllLayers().filter(a=>a.type==="vector").map(a=>`<label class="legend-layer-item">
        <input type="checkbox" value="${a.id}" checked>
        <span class="layer-color" style="background: ${a.color||a.fillColor||"#4292c6"}"></span>
        <span>${a.name}</span>
      </label>`).join("")||'<p class="no-layers">표시할 레이어가 없습니다</p>';return`
      <div class="export-content export-content-large">
        <div class="export-header">
          <h3>지도 내보내기</h3>
          <button class="export-close" id="export-close">&times;</button>
        </div>
        <div class="export-body-grid">
          <!-- 왼쪽: 옵션 -->
          <div class="export-options">
            <div class="export-section">
              <h4>기본 설정</h4>
              <div class="export-form-group">
                <label for="export-filename">파일 이름</label>
                <input type="text" id="export-filename" value="e-GIS_map" placeholder="파일 이름">
              </div>
              <div class="export-form-group">
                <label for="export-format">파일 형식</label>
                <select id="export-format">${t}</select>
              </div>
              <div class="export-form-group" id="quality-group" style="display:none;">
                <label for="export-quality">이미지 품질</label>
                <input type="range" id="export-quality" min="0.5" max="1" step="0.1" value="0.92">
                <span id="export-quality-value">92%</span>
              </div>
              <div class="export-form-group">
                <label for="export-scale">해상도 배율</label>
                <select id="export-scale">
                  <option value="1">1x (기본)</option>
                  <option value="2" selected>2x (고해상도)</option>
                  <option value="3">3x (초고해상도)</option>
                </select>
              </div>
            </div>

            <div class="export-section">
              <h4>지도 요소 <span class="help-text">(미리보기에서 드래그하여 위치 조정)</span></h4>

              <!-- 제목 -->
              <div class="export-element-group">
                <label class="export-toggle">
                  <input type="checkbox" id="opt-title">
                  <span>제목</span>
                </label>
                <div class="element-options" id="title-options" style="display:none;">
                  <input type="text" id="title-text" placeholder="제목 입력">
                  ${this.getStyleOptionsHTML("title")}
                </div>
              </div>

              <!-- 축척 -->
              <div class="export-element-group">
                <label class="export-toggle">
                  <input type="checkbox" id="opt-scale-bar" checked>
                  <span>축척 바</span>
                </label>
                <div class="element-options" id="scale-options">
                  ${this.getBasicStyleHTML("scale")}
                </div>
              </div>

              <!-- 방위표 -->
              <div class="export-element-group">
                <label class="export-toggle">
                  <input type="checkbox" id="opt-compass" checked>
                  <span>방위표</span>
                </label>
                <div class="element-options" id="compass-options">
                  <div class="style-row">
                    <label>크기</label>
                    <input type="number" id="compass-size" min="30" max="100">
                  </div>
                </div>
              </div>

              <!-- 범례 -->
              <div class="export-element-group">
                <label class="export-toggle">
                  <input type="checkbox" id="opt-legend">
                  <span>범례</span>
                </label>
                <div class="element-options legend-options" id="legend-options" style="display:none;">
                  <div class="legend-layers">
                    ${i}
                  </div>
                  ${this.getBasicStyleHTML("legend")}
                </div>
              </div>

              <!-- 텍스트 박스 -->
              <div class="export-element-group">
                <label class="export-toggle">
                  <input type="checkbox" id="opt-textbox">
                  <span>텍스트 박스</span>
                </label>
                <div class="element-options" id="textbox-options" style="display:none;">
                  <textarea id="textbox-content" rows="3" placeholder="추가할 텍스트 입력"></textarea>
                  ${this.getStyleOptionsHTML("textbox")}
                </div>
              </div>
            </div>
          </div>

          <!-- 오른쪽: 미리보기 -->
          <div class="export-preview-container">
            <h4>미리보기 <span class="help-text">(요소를 드래그하여 이동)</span></h4>
            <div class="export-preview" id="export-preview">
              <canvas id="preview-canvas"></canvas>
            </div>
            <div class="preview-actions">
              <button class="btn btn-secondary btn-sm" id="reset-positions">위치 초기화</button>
              <button class="btn btn-secondary btn-sm" id="refresh-preview">새로고침</button>
            </div>
          </div>
        </div>
        <div class="export-footer">
          <button class="btn btn-secondary" id="export-cancel">취소</button>
          <button class="btn btn-primary" id="export-apply">내보내기</button>
        </div>
      </div>
    `}getStyleOptionsHTML(e){const t=this.fonts.map(n=>`<option value="${n.value}">${n.label}</option>`).join("");return`
      <div class="style-options">
        <div class="style-row">
          <label>글꼴</label>
          <select id="${e}-font">${t}</select>
        </div>
        <div class="style-row">
          <label>크기</label>
          <input type="number" id="${e}-size" min="8" max="72">
        </div>
        <div class="style-row">
          <label>굵기</label>
          <select id="${e}-weight">
            <option value="normal">보통</option>
            <option value="bold">굵게</option>
          </select>
        </div>
        <div class="style-row">
          <label>색상</label>
          <input type="color" id="${e}-color">
        </div>
        <div class="style-row">
          <label class="checkbox-inline">
            <input type="checkbox" id="${e}-shadow">
            <span>그림자</span>
          </label>
          <input type="color" id="${e}-shadow-color" style="width:40px;">
        </div>
        <div class="style-row">
          <label class="checkbox-inline">
            <input type="checkbox" id="${e}-stroke">
            <span>테두리</span>
          </label>
          <input type="color" id="${e}-stroke-color" style="width:40px;">
          <input type="number" id="${e}-stroke-width" min="1" max="5" style="width:50px;">
        </div>
      </div>
    `}getBasicStyleHTML(e){const t=this.fonts.map(n=>`<option value="${n.value}">${n.label}</option>`).join("");return`
      <div class="style-options">
        <div class="style-row">
          <label>글꼴</label>
          <select id="${e}-font">${t}</select>
        </div>
        <div class="style-row">
          <label>크기</label>
          <input type="number" id="${e}-size" min="8" max="24">
        </div>
        <div class="style-row">
          <label>색상</label>
          <input type="color" id="${e}-color">
        </div>
      </div>
    `}syncUIFromElements(){const e=this.elements.title;this.setChecked("opt-title",e.enabled),this.setValue("title-text",e.text),this.setValue("title-font",e.fontFamily),this.setValue("title-size",e.fontSize),this.setValue("title-weight",e.fontWeight),this.setValue("title-color",e.color),this.setChecked("title-shadow",e.shadow),this.setValue("title-shadow-color",e.shadowColor),this.setChecked("title-stroke",e.stroke),this.setValue("title-stroke-color",e.strokeColor),this.setValue("title-stroke-width",e.strokeWidth),document.getElementById("title-options").style.display=e.enabled?"block":"none";const t=this.elements.scaleBar;this.setChecked("opt-scale-bar",t.enabled),this.setValue("scale-font",t.fontFamily),this.setValue("scale-size",t.fontSize),this.setValue("scale-color",t.color);const n=this.elements.compass;this.setChecked("opt-compass",n.enabled),this.setValue("compass-size",n.size);const i=this.elements.legend;this.setChecked("opt-legend",i.enabled),this.setValue("legend-font",i.fontFamily),this.setValue("legend-size",i.fontSize),this.setValue("legend-color",i.color),document.getElementById("legend-options").style.display=i.enabled?"block":"none";const a=this.elements.textBox;this.setChecked("opt-textbox",a.enabled),this.setValue("textbox-content",a.text),this.setValue("textbox-font",a.fontFamily),this.setValue("textbox-size",a.fontSize),this.setValue("textbox-weight",a.fontWeight),this.setValue("textbox-color",a.color),this.setChecked("textbox-shadow",a.shadow),this.setChecked("textbox-stroke",a.stroke),this.setValue("textbox-stroke-color",a.strokeColor),this.setValue("textbox-stroke-width",a.strokeWidth),document.getElementById("textbox-options").style.display=a.enabled?"block":"none"}setValue(e,t){const n=document.getElementById(e);n&&(n.value=t)}setChecked(e,t){const n=document.getElementById(e);n&&(n.checked=t)}bindEvents(){const e=document.getElementById("export-close"),t=document.getElementById("export-cancel"),n=document.getElementById("export-apply"),i=document.getElementById("export-format"),a=document.getElementById("export-quality"),s=document.getElementById("export-quality-value"),o=document.getElementById("quality-group"),l=document.getElementById("refresh-preview"),u=document.getElementById("reset-positions");e.addEventListener("click",()=>this.close()),t.addEventListener("click",()=>this.close()),i.addEventListener("change",c=>{o.style.display=c.target.value==="jpg"?"block":"none"}),a.addEventListener("input",c=>{s.textContent=Math.round(c.target.value*100)+"%"}),document.getElementById("opt-title").addEventListener("change",c=>{this.elements.title.enabled=c.target.checked,document.getElementById("title-options").style.display=c.target.checked?"block":"none",this.updatePreview()}),document.getElementById("opt-scale-bar").addEventListener("change",c=>{this.elements.scaleBar.enabled=c.target.checked,this.updatePreview()}),document.getElementById("opt-compass").addEventListener("change",c=>{this.elements.compass.enabled=c.target.checked,this.updatePreview()}),document.getElementById("opt-legend").addEventListener("change",c=>{this.elements.legend.enabled=c.target.checked,document.getElementById("legend-options").style.display=c.target.checked?"block":"none",this.updatePreview()}),document.getElementById("opt-textbox").addEventListener("change",c=>{this.elements.textBox.enabled=c.target.checked,document.getElementById("textbox-options").style.display=c.target.checked?"block":"none",this.updatePreview()}),this.bindInput("title-text","title","text"),this.bindInput("title-font","title","fontFamily"),this.bindInput("title-size","title","fontSize",!0),this.bindInput("title-weight","title","fontWeight"),this.bindInput("title-color","title","color"),this.bindCheckbox("title-shadow","title","shadow"),this.bindInput("title-shadow-color","title","shadowColor"),this.bindCheckbox("title-stroke","title","stroke"),this.bindInput("title-stroke-color","title","strokeColor"),this.bindInput("title-stroke-width","title","strokeWidth",!0),this.bindInput("scale-font","scaleBar","fontFamily"),this.bindInput("scale-size","scaleBar","fontSize",!0),this.bindInput("scale-color","scaleBar","color"),this.bindInput("compass-size","compass","size",!0),this.bindInput("legend-font","legend","fontFamily"),this.bindInput("legend-size","legend","fontSize",!0),this.bindInput("legend-color","legend","color"),this.bindInput("textbox-content","textBox","text"),this.bindInput("textbox-font","textBox","fontFamily"),this.bindInput("textbox-size","textBox","fontSize",!0),this.bindInput("textbox-weight","textBox","fontWeight"),this.bindInput("textbox-color","textBox","color"),this.bindCheckbox("textbox-shadow","textBox","shadow"),this.bindCheckbox("textbox-stroke","textBox","stroke"),this.bindInput("textbox-stroke-color","textBox","strokeColor"),this.bindInput("textbox-stroke-width","textBox","strokeWidth",!0),l.addEventListener("click",()=>this.updatePreview()),u.addEventListener("click",()=>this.resetPositions()),n.addEventListener("click",()=>this.doExport()),this.setupDragEvents(),setTimeout(()=>this.updatePreview(),100)}bindInput(e,t,n,i=!1){const a=document.getElementById(e);if(!a)return;const s=o=>{this.elements[t][n]=i?parseInt(o.target.value)||0:o.target.value,this.updatePreview()};a.addEventListener("input",s),a.addEventListener("change",s)}bindCheckbox(e,t,n){const i=document.getElementById(e);i&&i.addEventListener("change",a=>{this.elements[t][n]=a.target.checked,this.updatePreview()})}setupDragEvents(){const e=document.getElementById("preview-canvas");e&&(e.addEventListener("mousedown",t=>this.onMouseDown(t)),e.addEventListener("mousemove",t=>this.onMouseMove(t)),e.addEventListener("mouseup",()=>this.onMouseUp()),e.addEventListener("mouseleave",()=>this.onMouseUp()))}onMouseDown(e){const t=document.getElementById("preview-canvas"),n=t.getBoundingClientRect(),i=t.width/n.width,a=t.height/n.height,s=(e.clientX-n.left)*i,o=(e.clientY-n.top)*a,l=this.hitTest(s,o);l&&(this.dragging=l,this.dragOffset={x:s-this.elements[l].x*t.width,y:o-this.elements[l].y*t.height},t.style.cursor="grabbing")}onMouseMove(e){const t=document.getElementById("preview-canvas"),n=t.getBoundingClientRect(),i=t.width/n.width,a=t.height/n.height,s=(e.clientX-n.left)*i,o=(e.clientY-n.top)*a;if(this.dragging)this.elements[this.dragging].x=Math.max(.05,Math.min(.95,(s-this.dragOffset.x)/t.width)),this.elements[this.dragging].y=Math.max(.05,Math.min(.95,(o-this.dragOffset.y)/t.height)),this.updatePreview();else{const l=this.hitTest(s,o);t.style.cursor=l?"grab":"default"}}onMouseUp(){const e=document.getElementById("preview-canvas");e&&(e.style.cursor="default"),this.dragging=null}hitTest(e,t){const n=document.getElementById("preview-canvas"),i=n.width,a=n.height,s=["title","scaleBar","compass","legend","textBox"];for(const o of s){const l=this.elements[o];if(!l.enabled)continue;const u=l.x*i,c=l.y*a;let h={x:0,y:0,w:0,h:0};switch(o){case"title":h={x:u-100,y:c-20,w:200,h:40};break;case"scaleBar":h={x:u-10,y:c-30,w:100,h:40};break;case"compass":const f=l.size*.4;h={x:u-f,y:c-f,w:f*2,h:f*2};break;case"legend":h={x:u-10,y:c-10,w:80,h:70};break;case"textBox":h={x:u-10,y:c-10,w:100,h:50};break}if(e>=h.x&&e<=h.x+h.w&&t>=h.y&&t<=h.y+h.h)return o}return null}resetPositions(){this.elements.title.x=.5,this.elements.title.y=.08,this.elements.scaleBar.x=.05,this.elements.scaleBar.y=.92,this.elements.compass.x=.92,this.elements.compass.y=.12,this.elements.legend.x=.85,this.elements.legend.y=.35,this.elements.textBox.x=.05,this.elements.textBox.y=.75,this.updatePreview()}updatePreview(){const e=document.getElementById("export-preview"),t=document.getElementById("preview-canvas");if(!e||!t)return;const n=e.clientWidth-10||300,i=Math.round(n*.67);t.width=n,t.height=i,t.style.width="100%",t.style.height="auto";const a=t.getContext("2d");a.fillStyle="#e8e8e8",a.fillRect(0,0,n,i),a.fillStyle="#c5d8e8",a.fillRect(8,8,n-16,i-16),this.drawPreviewElements(a,n,i)}drawPreviewElements(e,t,n){this.elements.title.enabled&&this.drawPreviewTitle(e,t,n),this.elements.scaleBar.enabled&&this.drawPreviewScaleBar(e,t,n),this.elements.compass.enabled&&this.drawPreviewCompass(e,t,n),this.elements.legend.enabled&&this.drawPreviewLegend(e,t,n),this.elements.textBox.enabled&&this.elements.textBox.text&&this.drawPreviewTextBox(e,t,n)}drawPreviewTitle(e,t,n){const i=this.elements.title,a=i.x*t,s=i.y*n,o=Math.max(8,i.fontSize*.5);e.save(),e.font=`${i.fontWeight} ${o}px "${i.fontFamily}", sans-serif`;const l=e.measureText(i.text||"지도 제목").width+20;e.fillStyle="rgba(255, 255, 255, 0.85)",e.fillRect(a-l/2,s-o,l,o*1.8),e.textAlign="center",e.textBaseline="middle",i.shadow&&(e.shadowColor=i.shadowColor,e.shadowBlur=4,e.shadowOffsetX=2,e.shadowOffsetY=2),i.stroke&&(e.strokeStyle=i.strokeColor,e.lineWidth=i.strokeWidth*.5,e.strokeText(i.text||"지도 제목",a,s)),e.fillStyle=i.color,e.fillText(i.text||"지도 제목",a,s),e.restore()}drawPreviewScaleBar(e,t,n){const i=this.elements.scaleBar,a=i.x*t,s=i.y*n,o=Math.max(6,i.fontSize*.5);e.save(),e.fillStyle="rgba(255, 255, 255, 0.85)",e.fillRect(a-5,s-20,70,30),e.fillStyle="#333",e.fillRect(a,s,50,4),e.fillStyle="#fff",e.fillRect(a,s,25,4),e.strokeStyle="#333",e.lineWidth=.5,e.strokeRect(a,s,50,4),e.font=`${o}px "${i.fontFamily}", sans-serif`,e.fillStyle=i.color,e.textAlign="center",e.fillText("0",a,s-5),e.fillText("1km",a+50,s-5),e.restore()}drawPreviewCompass(e,t,n){const i=this.elements.compass,a=i.x*t,s=i.y*n,o=i.size*.3;e.save(),e.beginPath(),e.arc(a,s,o,0,Math.PI*2),e.fillStyle="rgba(255, 255, 255, 0.9)",e.fill(),e.strokeStyle="#666",e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(a,s-o*.7),e.lineTo(a-o*.2,s),e.lineTo(a,s-o*.1),e.closePath(),e.fillStyle="#d32f2f",e.fill(),e.beginPath(),e.moveTo(a,s-o*.7),e.lineTo(a+o*.2,s),e.lineTo(a,s-o*.1),e.closePath(),e.fillStyle="#b71c1c",e.fill(),e.beginPath(),e.moveTo(a,s+o*.7),e.lineTo(a-o*.2,s),e.lineTo(a,s+o*.1),e.closePath(),e.fillStyle="#fff",e.strokeStyle="#333",e.lineWidth=.5,e.fill(),e.stroke(),e.beginPath(),e.moveTo(a,s+o*.7),e.lineTo(a+o*.2,s),e.lineTo(a,s+o*.1),e.closePath(),e.fillStyle="#eee",e.fill(),e.stroke(),e.fillStyle="#333",e.font=`bold ${o*.4}px sans-serif`,e.textAlign="center",e.fillText("N",a,s-o-3),e.restore()}drawPreviewLegend(e,t,n){const i=this.elements.legend,a=i.x*t,s=i.y*n,o=Math.max(6,i.fontSize*.5);e.save(),e.fillStyle="rgba(255, 255, 255, 0.9)",e.fillRect(a,s,70,55),e.strokeStyle="#999",e.lineWidth=.5,e.strokeRect(a,s,70,55),e.fillStyle=i.color,e.font=`bold ${o}px "${i.fontFamily}", sans-serif`,e.textAlign="left",e.fillText("범례",a+5,s+12),["#4292c6","#41ab5d","#fd8d3c"].forEach((u,c)=>{e.fillStyle=u,e.fillRect(a+5,s+18+c*12,10,10),e.fillStyle=i.color,e.font=`${o-1}px sans-serif`,e.fillText("레이어",a+18,s+26+c*12)}),e.restore()}drawPreviewTextBox(e,t,n){const i=this.elements.textBox,a=i.x*t,s=i.y*n,o=Math.max(6,i.fontSize*.5),l=i.text.split(`
`).slice(0,3);e.save();const u=90,c=l.length*(o+4)+10;e.fillStyle="rgba(255, 255, 255, 0.9)",e.fillRect(a,s,u,c),e.strokeStyle="#999",e.lineWidth=.5,e.strokeRect(a,s,u,c),e.font=`${i.fontWeight} ${o}px "${i.fontFamily}", sans-serif`,e.textAlign="left",i.shadow&&(e.shadowColor="rgba(0,0,0,0.3)",e.shadowBlur=2,e.shadowOffsetX=1,e.shadowOffsetY=1),l.forEach((h,f)=>{const A=s+8+(f+1)*(o+2);i.stroke&&(e.strokeStyle=i.strokeColor,e.lineWidth=i.strokeWidth*.3,e.strokeText(h.substring(0,15),a+5,A)),e.fillStyle=i.color,e.fillText(h.substring(0,15),a+5,A)}),e.restore()}async doExport(){const e=document.getElementById("export-filename").value.trim()||"e-GIS_map",t=document.getElementById("export-format").value,n=parseFloat(document.getElementById("export-quality").value),i=parseInt(document.getElementById("export-scale").value);console.log("Export settings:",{title:this.elements.title,scaleBar:this.elements.scaleBar,compass:this.elements.compass,legend:this.elements.legend,textBox:this.elements.textBox});const a={title:this.elements.title.enabled?{...this.elements.title}:null,scaleBar:this.elements.scaleBar.enabled?{...this.elements.scaleBar}:null,compass:this.elements.compass.enabled?{...this.elements.compass}:null,legend:this.elements.legend.enabled?{...this.elements.legend,...this.getLegendConfig()}:null,textBox:this.elements.textBox.enabled&&this.elements.textBox.text?{...this.elements.textBox}:null};console.log("Overlay options being passed:",a);const s=document.getElementById("export-apply");s.disabled=!0,s.textContent="내보내는 중...";try{await aL.exportMapWithOverlays({filename:e,format:t,quality:n,scale:i,overlays:a}),this.close()}catch(o){console.error("Export error:",o),alert("내보내기 실패: "+o.message),s.disabled=!1,s.textContent="내보내기"}}getLegendConfig(){const e=document.querySelectorAll('#legend-options input[type="checkbox"][value]:checked'),t=[];return e.forEach(n=>{const i=pt.getLayer(n.value);i&&t.push({id:i.id,name:i.name,color:i.color||i.fillColor||"#4292c6"})}),{layers:t}}addStyles(){if(document.getElementById("export-panel-styles-v4"))return;const e=document.createElement("style");e.id="export-panel-styles-v4",e.textContent=`
      .export-modal {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
      }

      .export-content {
        background: var(--bg-panel, #fff);
        border-radius: var(--radius-lg, 8px);
        box-shadow: var(--shadow-lg, 0 4px 20px rgba(0,0,0,0.15));
        max-height: 90vh;
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }

      .export-content-large {
        width: 850px;
        max-width: 95vw;
      }

      .export-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--spacing-md, 12px) var(--spacing-lg, 16px);
        border-bottom: 1px solid var(--border-color, #e0e0e0);
      }

      .export-header h3 {
        margin: 0;
        font-size: var(--font-size-lg, 16px);
      }

      .export-close {
        background: none;
        border: none;
        font-size: 24px;
        cursor: pointer;
        color: var(--text-secondary, #666);
      }

      .export-body-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--spacing-lg, 16px);
        padding: var(--spacing-lg, 16px);
        max-height: 65vh;
        overflow-y: auto;
      }

      .export-options {
        overflow-y: auto;
        max-height: 100%;
        padding-right: var(--spacing-sm, 8px);
      }

      .export-section {
        margin-bottom: var(--spacing-md, 12px);
      }

      .export-section h4 {
        font-size: var(--font-size-sm, 13px);
        font-weight: 600;
        color: var(--text-primary, #333);
        margin-bottom: var(--spacing-sm, 8px);
        padding-bottom: var(--spacing-xs, 4px);
        border-bottom: 1px solid var(--border-color, #e0e0e0);
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
      }

      .help-text {
        font-size: var(--font-size-xs, 11px);
        font-weight: normal;
        color: var(--text-secondary, #666);
      }

      .export-form-group {
        margin-bottom: var(--spacing-sm, 8px);
      }

      .export-form-group label {
        display: block;
        font-size: var(--font-size-sm, 13px);
        margin-bottom: 4px;
      }

      .export-form-group input,
      .export-form-group select {
        width: 100%;
        padding: var(--spacing-xs, 4px) var(--spacing-sm, 8px);
        border: 1px solid var(--border-color, #e0e0e0);
        border-radius: var(--radius-sm, 4px);
        font-size: var(--font-size-sm, 13px);
      }

      .export-element-group {
        margin-bottom: var(--spacing-sm, 8px);
        border: 1px solid var(--border-color, #e0e0e0);
        border-radius: var(--radius-sm, 4px);
        padding: var(--spacing-sm, 8px);
      }

      .export-toggle {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        cursor: pointer;
        font-size: var(--font-size-sm, 13px);
        font-weight: 500;
      }

      .element-options {
        margin-top: var(--spacing-sm, 8px);
        padding: var(--spacing-sm, 8px);
        background: var(--bg-tertiary, #f5f5f5);
        border-radius: var(--radius-sm, 4px);
      }

      .element-options input[type="text"],
      .element-options textarea {
        width: 100%;
        padding: var(--spacing-xs, 4px) var(--spacing-sm, 8px);
        border: 1px solid var(--border-color, #e0e0e0);
        border-radius: var(--radius-sm, 4px);
        font-size: var(--font-size-sm, 13px);
        margin-bottom: var(--spacing-xs, 4px);
      }

      .style-options {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-xs, 4px);
      }

      .style-row {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        font-size: var(--font-size-xs, 11px);
      }

      .style-row > label:first-child {
        width: 45px;
        flex-shrink: 0;
      }

      .style-row select,
      .style-row input[type="number"] {
        flex: 1;
        padding: 2px 4px;
        border: 1px solid var(--border-color, #e0e0e0);
        border-radius: var(--radius-sm, 4px);
        font-size: var(--font-size-xs, 11px);
      }

      .style-row input[type="color"] {
        width: 30px;
        height: 22px;
        padding: 0;
        border: 1px solid var(--border-color, #e0e0e0);
        border-radius: var(--radius-sm, 4px);
        cursor: pointer;
      }

      .checkbox-inline {
        display: flex;
        align-items: center;
        gap: 4px;
        cursor: pointer;
        white-space: nowrap;
      }

      .legend-layers {
        max-height: 100px;
        overflow-y: auto;
        margin-bottom: var(--spacing-sm, 8px);
      }

      .legend-layer-item {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        padding: 2px 0;
        font-size: var(--font-size-xs, 11px);
        cursor: pointer;
      }

      .layer-color {
        width: 12px;
        height: 12px;
        border-radius: 2px;
        border: 1px solid var(--border-color, #e0e0e0);
      }

      .export-preview-container {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-sm, 8px);
      }

      .export-preview-container h4 {
        font-size: var(--font-size-sm, 13px);
        font-weight: 600;
        margin: 0;
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
      }

      .export-preview {
        border: 1px solid var(--border-color, #e0e0e0);
        border-radius: var(--radius-sm, 4px);
        background: var(--bg-tertiary, #f5f5f5);
        min-height: 220px;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
      }

      .export-preview canvas {
        max-width: 100%;
        height: auto;
      }

      .preview-actions {
        display: flex;
        gap: var(--spacing-sm, 8px);
        justify-content: flex-end;
      }

      .export-footer {
        display: flex;
        justify-content: flex-end;
        gap: var(--spacing-sm, 8px);
        padding: var(--spacing-md, 12px) var(--spacing-lg, 16px);
        border-top: 1px solid var(--border-color, #e0e0e0);
      }

      .no-layers {
        color: var(--text-secondary, #666);
        font-size: var(--font-size-xs, 11px);
        margin: 0;
      }
    `,document.head.appendChild(e)}close(){this.modal&&(this.modal.remove(),this.modal=null)}}const lye=new oye;function ts(){return ts=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ts.apply(null,arguments)}var AQ={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function an(r){return typeof r=="number"}function sn(r){return!r||typeof r!="object"||typeof r.constructor!="function"?!1:r.isBigNumber===!0&&typeof r.constructor.prototype=="object"&&r.constructor.prototype.isBigNumber===!0||typeof r.constructor.isDecimal=="function"&&r.constructor.isDecimal(r)===!0}function rf(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isComplex===!0||!1}function O1(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isFraction===!0||!1}function yu(r){return r&&r.constructor.prototype.isUnit===!0||!1}function ho(r){return typeof r=="string"}var ti=Array.isArray;function Lr(r){return r&&r.constructor.prototype.isMatrix===!0||!1}function Su(r){return Array.isArray(r)||Lr(r)}function Bw(r){return r&&r.isDenseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function Cd(r){return r&&r.isSparseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function JB(r){return r&&r.constructor.prototype.isRange===!0||!1}function j_(r){return r&&r.constructor.prototype.isIndex===!0||!1}function uye(r){return typeof r=="boolean"}function cye(r){return r&&r.constructor.prototype.isResultSet===!0||!1}function dQ(r){return r&&r.constructor.prototype.isHelp===!0||!1}function hye(r){return typeof r=="function"}function fye(r){return r instanceof Date}function Aye(r){return r instanceof RegExp}function $_(r){return!!(r&&typeof r=="object"&&r.constructor===Object&&!rf(r)&&!O1(r))}function dye(r){return r===null}function gye(r){return r===void 0}function Kd(r){return r&&r.isAccessorNode===!0&&r.constructor.prototype.isNode===!0||!1}function mu(r){return r&&r.isArrayNode===!0&&r.constructor.prototype.isNode===!0||!1}function pye(r){return r&&r.isAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function mye(r){return r&&r.isBlockNode===!0&&r.constructor.prototype.isNode===!0||!1}function vye(r){return r&&r.isConditionalNode===!0&&r.constructor.prototype.isNode===!0||!1}function Pn(r){return r&&r.isConstantNode===!0&&r.constructor.prototype.isNode===!0||!1}function w5(r){return Pn(r)||Ua(r)&&r.args.length===1&&Pn(r.args[0])&&"-+~".includes(r.op)}function P1(r){return r&&r.isFunctionAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function DA(r){return r&&r.isFunctionNode===!0&&r.constructor.prototype.isNode===!0||!1}function Mp(r){return r&&r.isIndexNode===!0&&r.constructor.prototype.isNode===!0||!1}function mi(r){return r&&r.isNode===!0&&r.constructor.prototype.isNode===!0||!1}function K_(r){return r&&r.isObjectNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ua(r){return r&&r.isOperatorNode===!0&&r.constructor.prototype.isNode===!0||!1}function uf(r){return r&&r.isParenthesisNode===!0&&r.constructor.prototype.isNode===!0||!1}function yye(r){return r&&r.isRangeNode===!0&&r.constructor.prototype.isNode===!0||!1}function xye(r){return r&&r.isRelationalNode===!0&&r.constructor.prototype.isNode===!0||!1}function Cs(r){return r&&r.isSymbolNode===!0&&r.constructor.prototype.isNode===!0||!1}function gQ(r){return r&&r.constructor.prototype.isChain===!0||!1}function Si(r){var e=typeof r;return e==="object"?r===null?"null":sn(r)?"BigNumber":r.constructor&&r.constructor.name?r.constructor.name:"Object":e}function Yr(r){var e=typeof r;if(e==="number"||e==="string"||e==="boolean"||r===null||r===void 0)return r;if(typeof r.clone=="function")return r.clone();if(Array.isArray(r))return r.map(function(t){return Yr(t)});if(r instanceof Date)return new Date(r.valueOf());if(sn(r))return r;if($_(r))return wye(r,Yr);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(r,")"))}function wye(r,e){var t={};for(var n in r)vr(r,n)&&(t[n]=e(r[n]));return t}function pQ(r,e){for(var t in e)vr(e,t)&&(r[t]=e[t]);return r}function Vd(r,e){var t,n,i;if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(n=0,i=r.length;n<i;n++)if(!Vd(r[n],e[n]))return!1;return!0}else{if(typeof r=="function")return r===e;if(r instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in r)if(!(t in e)||!Vd(r[t],e[t]))return!1;for(t in e)if(!(t in r))return!1;return!0}else return r===e}}function _ye(r,e,t){var n=!0,i;Object.defineProperty(r,e,{get:function(){return n&&(i=t(),n=!1),i},set:function(s){i=s,n=!1},configurable:!0,enumerable:!0})}function vr(r,e){return r&&Object.hasOwnProperty.call(r,e)}function Eye(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],a=r[i];a!==void 0&&(t[i]=a)}return t}var bye=["Matrix","Array"],Cye=["number","BigNumber","Fraction"],Nt=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(AQ)};ts(Nt,AQ,{MATRIX_OPTIONS:bye,NUMBER_OPTIONS:Cye});function sL(){return!0}function ou(){return!1}function $0(){}const oL="Argument is not a typed-function.";function mQ(){function r(Ae){return typeof Ae=="object"&&Ae!==null&&Ae.constructor===Object}const e=[{name:"number",test:function(Ae){return typeof Ae=="number"}},{name:"string",test:function(Ae){return typeof Ae=="string"}},{name:"boolean",test:function(Ae){return typeof Ae=="boolean"}},{name:"Function",test:function(Ae){return typeof Ae=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(Ae){return Ae instanceof Date}},{name:"RegExp",test:function(Ae){return Ae instanceof RegExp}},{name:"Object",test:r},{name:"null",test:function(Ae){return Ae===null}},{name:"undefined",test:function(Ae){return Ae===void 0}}],t={name:"any",test:sL,isAny:!0};let n,i,a=0,s={createCount:0};function o(Ae){const pe=n.get(Ae);if(pe)return pe;let Fe='Unknown type "'+Ae+'"';const Ge=Ae.toLowerCase();let Ze;for(Ze of i)if(Ze.toLowerCase()===Ge){Fe+='. Did you mean "'+Ze+'" ?';break}throw new TypeError(Fe)}function l(Ae){let pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const Fe=pe?o(pe).index:i.length,Ge=[];for(let He=0;He<Ae.length;++He){if(!Ae[He]||typeof Ae[He].name!="string"||typeof Ae[He].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Je=Ae[He].name;if(n.has(Je))throw new TypeError('Duplicate type name "'+Je+'"');Ge.push(Je),n.set(Je,{name:Je,test:Ae[He].test,isAny:Ae[He].isAny,index:Fe+He,conversionsTo:[]})}const Ze=i.slice(Fe);i=i.slice(0,Fe).concat(Ge).concat(Ze);for(let He=Fe+Ge.length;He<i.length;++He)n.get(i[He]).index=He}function u(){n=new Map,i=[],a=0,l([t],!1)}u(),l(e);function c(){let Ae;for(Ae of i)n.get(Ae).conversionsTo=[];a=0}function h(Ae){const pe=i.filter(Fe=>{const Ge=n.get(Fe);return!Ge.isAny&&Ge.test(Ae)});return pe.length?pe:["any"]}function f(Ae){return Ae&&typeof Ae=="function"&&"_typedFunctionData"in Ae}function A(Ae,pe,Fe){if(!f(Ae))throw new TypeError(oL);const Ge=Fe&&Fe.exact,Ze=Array.isArray(pe)?pe.join(","):pe,He=b(Ze),Je=y(He);if(!Ge||Je in Ae.signatures){const vt=Ae._typedFunctionData.signatureMap.get(Je);if(vt)return vt}const Ye=He.length;let Ke;if(Ge){Ke=[];let vt;for(vt in Ae.signatures)Ke.push(Ae._typedFunctionData.signatureMap.get(vt))}else Ke=Ae._typedFunctionData.signatures;for(let vt=0;vt<Ye;++vt){const Dt=He[vt],yt=[];let Ar;for(Ar of Ke){const ce=B(Ar.params,vt);if(!(!ce||Dt.restParam&&!ce.restParam)){if(!ce.hasAny){const Ue=x(ce);if(Dt.types.some(st=>!Ue.has(st.name)))continue}yt.push(Ar)}}if(Ke=yt,Ke.length===0)break}let mt;for(mt of Ke)if(mt.params.length<=Ye)return mt;throw new TypeError("Signature not found (signature: "+(Ae.name||"unnamed")+"("+y(He,", ")+"))")}function d(Ae,pe,Fe){return A(Ae,pe,Fe).implementation}function p(Ae,pe){const Fe=o(pe);if(Fe.test(Ae))return Ae;const Ge=Fe.conversionsTo;if(Ge.length===0)throw new Error("There are no conversions to "+pe+" defined.");for(let Ze=0;Ze<Ge.length;Ze++)if(o(Ge[Ze].from).test(Ae))return Ge[Ze].convert(Ae);throw new Error("Cannot convert "+Ae+" to "+pe)}function y(Ae){let pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return Ae.map(Fe=>Fe.name).join(pe)}function v(Ae){const pe=Ae.indexOf("...")===0,Ge=(pe?Ae.length>3?Ae.slice(3):"any":Ae).split("|").map(Ye=>o(Ye.trim()));let Ze=!1,He=pe?"...":"";return{types:Ge.map(function(Ye){return Ze=Ye.isAny||Ze,He+=Ye.name+"|",{name:Ye.name,typeIndex:Ye.index,test:Ye.test,isAny:Ye.isAny,conversion:null,conversionIndex:-1}}),name:He.slice(0,-1),hasAny:Ze,hasConversion:!1,restParam:pe}}function w(Ae){const pe=Ae.types.map(Je=>Je.name),Fe=U(pe);let Ge=Ae.hasAny,Ze=Ae.name;const He=Fe.map(function(Je){const Ye=o(Je.from);return Ge=Ye.isAny||Ge,Ze+="|"+Je.from,{name:Je.from,typeIndex:Ye.index,test:Ye.test,isAny:Ye.isAny,conversion:Je,conversionIndex:Je.index}});return{types:Ae.types.concat(He),name:Ze,hasAny:Ge,hasConversion:He.length>0,restParam:Ae.restParam}}function x(Ae){return Ae.typeSet||(Ae.typeSet=new Set,Ae.types.forEach(pe=>Ae.typeSet.add(pe.name))),Ae.typeSet}function b(Ae){const pe=[];if(typeof Ae!="string")throw new TypeError("Signatures must be strings");const Fe=Ae.trim();if(Fe==="")return pe;const Ge=Fe.split(",");for(let Ze=0;Ze<Ge.length;++Ze){const He=v(Ge[Ze].trim());if(He.restParam&&Ze!==Ge.length-1)throw new SyntaxError('Unexpected rest parameter "'+Ge[Ze]+'": only allowed for the last parameter');if(He.types.length===0)return null;pe.push(He)}return pe}function C(Ae){const pe=me(Ae);return pe?pe.restParam:!1}function S(Ae){if(!Ae||Ae.types.length===0)return sL;if(Ae.types.length===1)return o(Ae.types[0].name).test;if(Ae.types.length===2){const pe=o(Ae.types[0].name).test,Fe=o(Ae.types[1].name).test;return function(Ze){return pe(Ze)||Fe(Ze)}}else{const pe=Ae.types.map(function(Fe){return o(Fe.name).test});return function(Ge){for(let Ze=0;Ze<pe.length;Ze++)if(pe[Ze](Ge))return!0;return!1}}}function I(Ae){let pe,Fe,Ge;if(C(Ae)){pe=le(Ae).map(S);const Ze=pe.length,He=S(me(Ae)),Je=function(Ye){for(let Ke=Ze;Ke<Ye.length;Ke++)if(!He(Ye[Ke]))return!1;return!0};return function(Ke){for(let mt=0;mt<pe.length;mt++)if(!pe[mt](Ke[mt]))return!1;return Je(Ke)&&Ke.length>=Ze+1}}else return Ae.length===0?function(He){return He.length===0}:Ae.length===1?(Fe=S(Ae[0]),function(He){return Fe(He[0])&&He.length===1}):Ae.length===2?(Fe=S(Ae[0]),Ge=S(Ae[1]),function(He){return Fe(He[0])&&Ge(He[1])&&He.length===2}):(pe=Ae.map(S),function(He){for(let Je=0;Je<pe.length;Je++)if(!pe[Je](He[Je]))return!1;return He.length===pe.length})}function B(Ae,pe){return pe<Ae.length?Ae[pe]:C(Ae)?me(Ae):null}function T(Ae,pe){const Fe=B(Ae,pe);return Fe?x(Fe):new Set}function M(Ae){return Ae.conversion===null||Ae.conversion===void 0}function F(Ae,pe){const Fe=new Set;return Ae.forEach(Ge=>{const Ze=T(Ge.params,pe);let He;for(He of Ze)Fe.add(He)}),Fe.has("any")?["any"]:Array.from(Fe)}function N(Ae,pe,Fe){let Ge,Ze;const He=Ae||"unnamed";let Je=Fe,Ye;for(Ye=0;Ye<pe.length;Ye++){const Dt=[];if(Je.forEach(yt=>{const Ar=B(yt.params,Ye),ce=S(Ar);(Ye<yt.params.length||C(yt.params))&&ce(pe[Ye])&&Dt.push(yt)}),Dt.length===0){if(Ze=F(Je,Ye),Ze.length>0){const yt=h(pe[Ye]);return Ge=new TypeError("Unexpected type of argument in function "+He+" (expected: "+Ze.join(" or ")+", actual: "+yt.join(" | ")+", index: "+Ye+")"),Ge.data={category:"wrongType",fn:He,index:Ye,actual:yt,expected:Ze},Ge}}else Je=Dt}const Ke=Je.map(function(Dt){return C(Dt.params)?1/0:Dt.params.length});if(pe.length<Math.min.apply(null,Ke))return Ze=F(Je,Ye),Ge=new TypeError("Too few arguments in function "+He+" (expected: "+Ze.join(" or ")+", index: "+pe.length+")"),Ge.data={category:"tooFewArgs",fn:He,index:pe.length,expected:Ze},Ge;const mt=Math.max.apply(null,Ke);if(pe.length>mt)return Ge=new TypeError("Too many arguments in function "+He+" (expected: "+mt+", actual: "+pe.length+")"),Ge.data={category:"tooManyArgs",fn:He,index:pe.length,expectedLength:mt},Ge;const vt=[];for(let Dt=0;Dt<pe.length;++Dt)vt.push(h(pe[Dt]).join("|"));return Ge=new TypeError('Arguments of type "'+vt.join(", ")+'" do not match any of the defined signatures of function '+He+"."),Ge.data={category:"mismatch",actual:vt},Ge}function O(Ae){let pe=i.length+1;for(let Fe=0;Fe<Ae.types.length;Fe++)pe=Math.min(pe,Ae.types[Fe].typeIndex);return pe}function L(Ae){let pe=a+1;for(let Fe=0;Fe<Ae.types.length;Fe++)M(Ae.types[Fe])||(pe=Math.min(pe,Ae.types[Fe].conversionIndex));return pe}function G(Ae,pe){if(Ae.hasAny){if(!pe.hasAny)return .1}else if(pe.hasAny)return-.1;if(Ae.restParam){if(!pe.restParam)return .01}else if(pe.restParam)return-.01;const Fe=O(Ae)-O(pe);if(Fe<0)return-.001;if(Fe>0)return .001;const Ge=L(Ae),Ze=L(pe);if(Ae.hasConversion){if(!pe.hasConversion)return(1+Ge)*1e-6}else if(pe.hasConversion)return-(1+Ze)*1e-6;const He=Ge-Ze;return He<0?-1e-7:He>0?1e-7:0}function R(Ae,pe){const Fe=Ae.params,Ge=pe.params,Ze=me(Fe),He=me(Ge),Je=C(Fe),Ye=C(Ge);if(Je&&Ze.hasAny){if(!Ye||!He.hasAny)return 1e7}else if(Ye&&He.hasAny)return-1e7;let Ke=0,mt=0,vt;for(vt of Fe)vt.hasAny&&++Ke,vt.hasConversion&&++mt;let Dt=0,yt=0;for(vt of Ge)vt.hasAny&&++Dt,vt.hasConversion&&++yt;if(Ke!==Dt)return(Ke-Dt)*1e6;if(Je&&Ze.hasConversion){if(!Ye||!He.hasConversion)return 1e5}else if(Ye&&He.hasConversion)return-1e5;if(mt!==yt)return(mt-yt)*1e4;if(Je){if(!Ye)return 1e3}else if(Ye)return-1e3;const Ar=(Fe.length-Ge.length)*(Je?-100:100);if(Ar!==0)return Ar;const ce=[];let Ue=0;for(let rr=0;rr<Fe.length;++rr){const wr=G(Fe[rr],Ge[rr]);ce.push(wr),Ue+=wr}if(Ue!==0)return(Ue<0?-10:10)+Ue;let st,wt=9;const Wt=wt/(ce.length+1);for(st of ce){if(st!==0)return(st<0?-wt:wt)+st;wt-=Wt}return 0}function U(Ae){if(Ae.length===0)return[];const pe=Ae.map(o);if(Ae.length===1)return pe[0].conversionsTo;const Fe=new Set(Ae),Ge=new Set;for(let He=0;He<pe.length;++He)for(const Je of pe[He].conversionsTo)Fe.has(Je.from)||Ge.add(Je.from);const Ze=[];for(const He of Ge){let Je=a+1,Ye=null;for(let Ke=0;Ke<pe.length;++Ke)for(const mt of pe[Ke].conversionsTo)mt.from===He&&mt.index<Je&&(Je=mt.index,Ye=mt);Ze.push(Ye)}return Ze}function W(Ae,pe){let Fe=pe,Ge="";if(Ae.some(He=>He.hasConversion)){const He=C(Ae),Je=Ae.map(Q);Ge=Je.map(Ye=>Ye.name).join(";"),Fe=function(){const Ke=[],mt=He?arguments.length-1:arguments.length;for(let vt=0;vt<mt;vt++)Ke[vt]=Je[vt](arguments[vt]);return He&&(Ke[mt]=arguments[mt].map(Je[mt])),pe.apply(this,Ke)}}let Ze=Fe;if(C(Ae)){const He=Ae.length-1;Ze=function(){return Fe.apply(this,xe(arguments,0,He).concat([xe(arguments,He)]))}}return Ge&&Object.defineProperty(Ze,"name",{value:Ge}),Ze}function Q(Ae){let pe,Fe,Ge,Ze;const He=[],Je=[];let Ye="";Ae.types.forEach(function(mt){mt.conversion&&(Ye+=mt.conversion.from+"~>"+mt.conversion.to+",",He.push(o(mt.conversion.from).test),Je.push(mt.conversion.convert))}),Ye?Ye=Ye.slice(0,-1):Ye="pass";let Ke=mt=>mt;switch(Je.length){case 0:break;case 1:pe=He[0],Ge=Je[0],Ke=function(vt){return pe(vt)?Ge(vt):vt};break;case 2:pe=He[0],Fe=He[1],Ge=Je[0],Ze=Je[1],Ke=function(vt){return pe(vt)?Ge(vt):Fe(vt)?Ze(vt):vt};break;default:Ke=function(vt){for(let Dt=0;Dt<Je.length;Dt++)if(He[Dt](vt))return Je[Dt](vt);return vt}}return Object.defineProperty(Ke,"name",{value:Ye}),Ke}function re(Ae){function pe(Fe,Ge,Ze){if(Ge<Fe.length){const He=Fe[Ge];let Je=[];if(He.restParam){const Ye=He.types.filter(M);Ye.length<He.types.length&&Je.push({types:Ye,name:"..."+Ye.map(Ke=>Ke.name).join("|"),hasAny:Ye.some(Ke=>Ke.isAny),hasConversion:!1,restParam:!0}),Je.push(He)}else Je=He.types.map(function(Ye){return{types:[Ye],name:Ye.name,hasAny:Ye.isAny,hasConversion:Ye.conversion,restParam:!1}});return Y(Je,function(Ye){return pe(Fe,Ge+1,Ze.concat([Ye]))})}else return[Ze]}return pe(Ae,0,[])}function oe(Ae,pe){const Fe=Math.max(Ae.length,pe.length);for(let Ye=0;Ye<Fe;Ye++){const Ke=T(Ae,Ye),mt=T(pe,Ye);let vt=!1,Dt;for(Dt of mt)if(Ke.has(Dt)){vt=!0;break}if(!vt)return!1}const Ge=Ae.length,Ze=pe.length,He=C(Ae),Je=C(pe);return He?Je?Ge===Ze:Ze>=Ge:Je?Ge>=Ze:Ge===Ze}function P(Ae){return Ae.map(pe=>he(pe)?se(pe.referToSelf.callback):Z(pe)?te(pe.referTo.references,pe.referTo.callback):pe)}function z(Ae,pe,Fe){const Ge=[];let Ze;for(Ze of Ae){let He=Fe[Ze];if(typeof He!="number")throw new TypeError('No definition for referenced signature "'+Ze+'"');if(He=pe[He],typeof He!="function")return!1;Ge.push(He)}return Ge}function K(Ae,pe,Fe){const Ge=P(Ae),Ze=new Array(Ge.length).fill(!1);let He=!0;for(;He;){He=!1;let Je=!0;for(let Ye=0;Ye<Ge.length;++Ye){if(Ze[Ye])continue;const Ke=Ge[Ye];if(he(Ke))Ge[Ye]=Ke.referToSelf.callback(Fe),Ge[Ye].referToSelf=Ke.referToSelf,Ze[Ye]=!0,Je=!1;else if(Z(Ke)){const mt=z(Ke.referTo.references,Ge,pe);mt?(Ge[Ye]=Ke.referTo.callback.apply(this,mt),Ge[Ye].referTo=Ke.referTo,Ze[Ye]=!0,Je=!1):He=!0}}if(Je&&He)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return Ge}function J(Ae){const pe=/\bthis(\(|\.signatures\b)/;Object.keys(Ae).forEach(Fe=>{const Ge=Ae[Fe];if(pe.test(Ge.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function ue(Ae,pe){if(s.createCount++,Object.keys(pe).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&J(pe);const Fe=[],Ge=[],Ze={},He=[];let Je;for(Je in pe){if(!Object.prototype.hasOwnProperty.call(pe,Je))continue;const Rt=b(Je);if(!Rt)continue;Fe.forEach(function(Vn){if(oe(Vn,Rt))throw new TypeError('Conflicting signatures "'+y(Vn)+'" and "'+y(Rt)+'".')}),Fe.push(Rt);const hr=Ge.length;Ge.push(pe[Je]);const An=Rt.map(w);let Cn;for(Cn of re(An)){const Vn=y(Cn);He.push({params:Cn,name:Vn,fn:hr}),Cn.every(ls=>!ls.hasConversion)&&(Ze[Vn]=hr)}}He.sort(R);const Ye=K(Ge,Ze,qt);let Ke;for(Ke in Ze)Object.prototype.hasOwnProperty.call(Ze,Ke)&&(Ze[Ke]=Ye[Ze[Ke]]);const mt=[],vt=new Map;for(Ke of He)vt.has(Ke.name)||(Ke.fn=Ye[Ke.fn],mt.push(Ke),vt.set(Ke.name,Ke));const Dt=mt[0]&&mt[0].params.length<=2&&!C(mt[0].params),yt=mt[1]&&mt[1].params.length<=2&&!C(mt[1].params),Ar=mt[2]&&mt[2].params.length<=2&&!C(mt[2].params),ce=mt[3]&&mt[3].params.length<=2&&!C(mt[3].params),Ue=mt[4]&&mt[4].params.length<=2&&!C(mt[4].params),st=mt[5]&&mt[5].params.length<=2&&!C(mt[5].params),wt=Dt&&yt&&Ar&&ce&&Ue&&st;for(let Rt=0;Rt<mt.length;++Rt)mt[Rt].test=I(mt[Rt].params);const Wt=Dt?S(mt[0].params[0]):ou,rr=yt?S(mt[1].params[0]):ou,wr=Ar?S(mt[2].params[0]):ou,Ct=ce?S(mt[3].params[0]):ou,fn=Ue?S(mt[4].params[0]):ou,$n=st?S(mt[5].params[0]):ou,Tt=Dt?S(mt[0].params[1]):ou,Ln=yt?S(mt[1].params[1]):ou,Kn=Ar?S(mt[2].params[1]):ou,ir=ce?S(mt[3].params[1]):ou,Dn=Ue?S(mt[4].params[1]):ou,Zn=st?S(mt[5].params[1]):ou;for(let Rt=0;Rt<mt.length;++Rt)mt[Rt].implementation=W(mt[Rt].params,mt[Rt].fn);const Br=Dt?mt[0].implementation:$0,Pr=yt?mt[1].implementation:$0,tn=Ar?mt[2].implementation:$0,Ee=ce?mt[3].implementation:$0,ze=Ue?mt[4].implementation:$0,ke=st?mt[5].implementation:$0,Re=Dt?mt[0].params.length:-1,Oe=yt?mt[1].params.length:-1,qe=Ar?mt[2].params.length:-1,ct=ce?mt[3].params.length:-1,xt=Ue?mt[4].params.length:-1,lt=st?mt[5].params.length:-1,ft=wt?6:0,At=mt.length,Pt=mt.map(Rt=>Rt.test),It=mt.map(Rt=>Rt.implementation),Jt=function(){for(let hr=ft;hr<At;hr++)if(Pt[hr](arguments))return It[hr].apply(this,arguments);return s.onMismatch(Ae,arguments,mt)};function qt(Rt,hr){return arguments.length===Re&&Wt(Rt)&&Tt(hr)?Br.apply(this,arguments):arguments.length===Oe&&rr(Rt)&&Ln(hr)?Pr.apply(this,arguments):arguments.length===qe&&wr(Rt)&&Kn(hr)?tn.apply(this,arguments):arguments.length===ct&&Ct(Rt)&&ir(hr)?Ee.apply(this,arguments):arguments.length===xt&&fn(Rt)&&Dn(hr)?ze.apply(this,arguments):arguments.length===lt&&$n(Rt)&&Zn(hr)?ke.apply(this,arguments):Jt.apply(this,arguments)}try{Object.defineProperty(qt,"name",{value:Ae})}catch{}return qt.signatures=Ze,qt._typedFunctionData={signatures:mt,signatureMap:vt},qt}function ge(Ae,pe,Fe){throw N(Ae,pe,Fe)}function le(Ae){return xe(Ae,0,Ae.length-1)}function me(Ae){return Ae[Ae.length-1]}function xe(Ae,pe,Fe){return Array.prototype.slice.call(Ae,pe,Fe)}function Be(Ae,pe){for(let Fe=0;Fe<Ae.length;Fe++)if(pe(Ae[Fe]))return Ae[Fe]}function Y(Ae,pe){return Array.prototype.concat.apply([],Ae.map(pe))}function Ve(){const Ae=le(arguments).map(Fe=>y(b(Fe))),pe=me(arguments);if(typeof pe!="function")throw new TypeError("Callback function expected as last argument");return te(Ae,pe)}function te(Ae,pe){return{referTo:{references:Ae,callback:pe}}}function se(Ae){if(typeof Ae!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:Ae}}}function Z(Ae){return Ae&&typeof Ae.referTo=="object"&&Array.isArray(Ae.referTo.references)&&typeof Ae.referTo.callback=="function"}function he(Ae){return Ae&&typeof Ae.referToSelf=="object"&&typeof Ae.referToSelf.callback=="function"}function ne(Ae,pe){if(!Ae)return pe;if(pe&&pe!==Ae){const Fe=new Error("Function names do not match (expected: "+Ae+", actual: "+pe+")");throw Fe.data={actual:pe,expected:Ae},Fe}return Ae}function ae(Ae){let pe;for(const Fe in Ae)Object.prototype.hasOwnProperty.call(Ae,Fe)&&(f(Ae[Fe])||typeof Ae[Fe].signature=="string")&&(pe=ne(pe,Ae[Fe].name));return pe}function _e(Ae,pe){let Fe;for(Fe in pe)if(Object.prototype.hasOwnProperty.call(pe,Fe)){if(Fe in Ae&&pe[Fe]!==Ae[Fe]){const Ge=new Error('Signature "'+Fe+'" is defined twice');throw Ge.data={signature:Fe,sourceFunction:pe[Fe],destFunction:Ae[Fe]},Ge}Ae[Fe]=pe[Fe]}}const Me=s;s=function(Ae){const pe=typeof Ae=="string",Fe=pe?1:0;let Ge=pe?Ae:"";const Ze={};for(let He=Fe;He<arguments.length;++He){const Je=arguments[He];let Ye={},Ke;if(typeof Je=="function"?(Ke=Je.name,typeof Je.signature=="string"?Ye[Je.signature]=Je:f(Je)&&(Ye=Je.signatures)):r(Je)&&(Ye=Je,pe||(Ke=ae(Je))),Object.keys(Ye).length===0){const mt=new TypeError("Argument to 'typed' at index "+He+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw mt.data={index:He,argument:Je},mt}pe||(Ge=ne(Ge,Ke)),_e(Ze,Ye)}return ue(Ge||"",Ze)},s.create=mQ,s.createCount=Me.createCount,s.onMismatch=ge,s.throwMismatchError=ge,s.createError=N,s.clear=u,s.clearConversions=c,s.addTypes=l,s._findType=o,s.referTo=Ve,s.referToSelf=se,s.convert=p,s.findSignature=A,s.find=d,s.isTypedFunction=f,s.warnAgainstDeprecatedThis=!0,s.addType=function(Ae,pe){let Fe="any";pe!==!1&&n.has("Object")&&(Fe="Object"),s.addTypes([Ae],Fe)};function be(Ae){if(!Ae||typeof Ae.from!="string"||typeof Ae.to!="string"||typeof Ae.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(Ae.to===Ae.from)throw new SyntaxError('Illegal to define conversion from "'+Ae.from+'" to itself.')}return s.addConversion=function(Ae){let pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};be(Ae);const Fe=o(Ae.to),Ge=Fe.conversionsTo.find(Ze=>Ze.from===Ae.from);if(Ge)if(pe&&pe.override)s.removeConversion({from:Ge.from,to:Ae.to,convert:Ge.convert});else throw new Error('There is already a conversion from "'+Ae.from+'" to "'+Fe.name+'"');Fe.conversionsTo.push({from:Ae.from,to:Fe.name,convert:Ae.convert,index:a++})},s.addConversions=function(Ae,pe){Ae.forEach(Fe=>s.addConversion(Fe,pe))},s.removeConversion=function(Ae){be(Ae);const pe=o(Ae.to),Fe=Be(pe.conversionsTo,Ze=>Ze.from===Ae.from);if(!Fe)throw new Error("Attempt to remove nonexistent conversion from "+Ae.from+" to "+Ae.to);if(Fe.convert!==Ae.convert)throw new Error("Conversion to remove does not match existing conversion");const Ge=pe.conversionsTo.indexOf(Fe);pe.conversionsTo.splice(Ge,1)},s.resolve=function(Ae,pe){if(!f(Ae))throw new TypeError(oL);const Fe=Ae._typedFunctionData.signatures;for(let Ge=0;Ge<Fe.length;++Ge)if(Fe[Ge].test(pe))return Fe[Ge];return null},s}const Eg=mQ();function Sr(r){return typeof r=="boolean"?!0:isFinite(r)?r===Math.round(r):!1}var vA=Math.sign||function(r){return r>0?1:r<0?-1:0},Sye=Math.log2||function(e){return Math.log(e)/Math.LN2},Bye=Math.log10||function(e){return Math.log(e)/Math.LN10},Tye=Math.log1p||function(r){return Math.log(r+1)},Nye=Math.cbrt||function(e){if(e===0)return e;var t=e<0,n;return t&&(e=-e),isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,t?-n:n},Iye=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function yC(r,e,t){var n={2:"0b",8:"0o",16:"0x"},i=n[e],a="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Sr(t))throw new Error("size must be an integer");if(r>2**(t-1)-1||r<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!Sr(r))throw new Error("Value must be an integer");r<0&&(r=r+2**t),a="i".concat(t)}var s="";return r<0&&(r=-r,s="-"),"".concat(s).concat(i).concat(r.toString(e)).concat(a)}function Dd(r,e){if(typeof e=="function")return e(r);if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity";if(isNaN(r))return"NaN";var{notation:t,precision:n,wordSize:i}=vQ(e);switch(t){case"fixed":return yQ(r,n);case"exponential":return xQ(r,n);case"engineering":return Fye(r,n);case"bin":return yC(r,2,i);case"oct":return yC(r,8,i);case"hex":return yC(r,16,i);case"auto":return Mye(r,n,e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],s=arguments[4];return a!=="."?a+s:s});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function vQ(r){var e="auto",t,n;if(r!==void 0)if(an(r))t=r;else if(sn(r))t=r.toNumber();else if($_(r))r.precision!==void 0&&(t=lL(r.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),r.wordSize!==void 0&&(n=lL(r.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),r.notation&&(e=r.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:t,wordSize:n}}function U1(r){var e=String(r).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+r);var t=e[1],n=e[2],i=parseFloat(e[4]||"0"),a=n.indexOf(".");i+=a!==-1?a-1:n.length-1;var s=n.replace(".","").replace(/^0*/,function(o){return i-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return s.length===0&&(s.push(0),i++),{sign:t,coefficients:s,exponent:i}}function Fye(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=U1(r),n=V_(t,e),i=n.exponent,a=n.coefficients,s=i%3===0?i:i<0?i-3-i%3:i-i%3;if(an(e))for(;e>a.length||i-s+1>a.length;)a.push(0);else for(var o=Math.abs(i-s)-(a.length-1),l=0;l<o;l++)a.push(0);for(var u=Math.abs(i-s),c=1;u>0;)c++,u--;var h=a.slice(c).join(""),f=an(e)&&h.length||h.match(/[1-9]/)?"."+h:"",A=a.slice(0,c).join("")+f+"e"+(i>=0?"+":"")+s.toString();return n.sign+A}function yQ(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=U1(r),n=typeof e=="number"?V_(t,t.exponent+1+e):t,i=n.coefficients,a=n.exponent+1,s=a+(e||0);return i.length<s&&(i=i.concat(Qg(s-i.length))),a<0&&(i=Qg(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),n.sign+i.join("")}function xQ(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=U1(r),n=e?V_(t,e):t,i=n.coefficients,a=n.exponent;i.length<e&&(i=i.concat(Qg(e-i.length)));var s=i.shift();return n.sign+s+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function Mye(r,e,t){if(isNaN(r)||!isFinite(r))return String(r);var n=uL(t==null?void 0:t.lowerExp,-3),i=uL(t==null?void 0:t.upperExp,5),a=U1(r),s=e?V_(a,e):a;if(s.exponent<n||s.exponent>=i)return xQ(r,e);var o=s.coefficients,l=s.exponent;o.length<e&&(o=o.concat(Qg(e-o.length))),o=o.concat(Qg(l-o.length+1+(o.length<e?e-o.length:0))),o=Qg(-l).concat(o);var u=l>0?l:0;return u<o.length-1&&o.splice(u+1,0,"."),s.sign+o.join("")}function V_(r,e){for(var t={sign:r.sign,coefficients:r.coefficients,exponent:r.exponent},n=t.coefficients;e<=0;)n.unshift(0),t.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var a=e-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),t.exponent++,a++),a--,n[a]++}}return t}function Qg(r){for(var e=[],t=0;t<r;t++)e.push(0);return e}function Lye(r){return r.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var Dye=Number.EPSILON||2220446049250313e-31;function Wo(r,e,t){if(t==null)return r===e;if(r===e)return!0;if(isNaN(r)||isNaN(e))return!1;if(isFinite(r)&&isFinite(e)){var n=Math.abs(r-e);return n<=Dye?!0:n<=Math.max(Math.abs(r),Math.abs(e))*t}return!1}var kye=Math.acosh||function(r){return Math.log(Math.sqrt(r*r-1)+r)},Rye=Math.asinh||function(r){return Math.log(Math.sqrt(r*r+1)+r)},Oye=Math.atanh||function(r){return Math.log((1+r)/(1-r))/2},Pye=Math.cosh||function(r){return(Math.exp(r)+Math.exp(-r))/2},Uye=Math.sinh||function(r){return(Math.exp(r)-Math.exp(-r))/2},Qye=Math.tanh||function(r){var e=Math.exp(2*r);return(e-1)/(e+1)};function Gye(r,e){var t=!0,n=e>0?!0:e<0?!1:1/e===1/0;return t^n?-r:r}function lL(r,e){if(an(r))return r;if(sn(r))return r.toNumber();e()}function uL(r,e){return an(r)?r:sn(r)?r.toNumber():e}function Le(r,e,t,n){function i(a){var s=Eye(a,e.map(qye));return Hye(r,e,a),t(s)}return i.isFactory=!0,i.fn=r,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function Hye(r,e,t){var n=e.filter(a=>!zye(a)).every(a=>t[a]!==void 0);if(!n){var i=e.filter(a=>t[a]===void 0);throw new Error('Cannot create function "'.concat(r,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function zye(r){return r&&r[0]==="?"}function qye(r){return r&&r[0]==="?"?r.slice(1):r}function jo(r,e){if(_Q(r)&&wQ(r,e))return r[e];throw typeof r[e]=="function"&&e3(r,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function lp(r,e,t){if(_Q(r)&&wQ(r,e))return r[e]=t,t;throw new Error('No access to property "'+e+'"')}function jye(r,e){return e in r}function wQ(r,e){return!r||typeof r!="object"?!1:vr(Kye,e)?!0:!(e in Object.prototype||e in Function.prototype)}function $ye(r,e){if(!e3(r,e))throw new Error('No access to method "'+e+'"');return r[e]}function e3(r,e){return r==null||typeof r[e]!="function"||vr(r,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(r)?!1:vr(Vye,e)?!0:!(e in Object.prototype||e in Function.prototype)}function _Q(r){return typeof r=="object"&&r&&r.constructor===Object}var Kye={length:!0,name:!0},Vye={toString:!0,valueOf:!0,toLocaleString:!0};class W_{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).values()}get(e){return jo(this.wrappedObject,e)}set(e,t){return lp(this.wrappedObject,e,t),this}has(e){return jye(this.wrappedObject,e)}entries(){return bQ(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class EQ{constructor(e,t,n){this.a=e,this.b=t,this.bKeys=n,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,t){return this.bKeys.has(e)?this.b.set(e,t):this.a.set(e,t),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return bQ(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function bQ(r,e){return{next:()=>{var t=r.next();return t.done?t:{value:e(t.value),done:!1}}}}function l1(){return new Map}function Gg(r){if(!r)return l1();if(CQ(r))return r;if($_(r))return new W_(r);throw new Error("createMap can create maps from objects or Maps")}function Wye(r){if(r instanceof W_)return r.wrappedObject;var e={};for(var t of r.keys()){var n=r.get(t);lp(e,t,n)}return e}function CQ(r){return r?r instanceof Map||r instanceof W_||typeof r.set=="function"&&typeof r.get=="function"&&typeof r.keys=="function"&&typeof r.has=="function":!1}var SQ=function(){return SQ=Eg.create,Eg},Yye=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Xye=Le("typed",Yye,function(e){var{BigNumber:t,Complex:n,DenseMatrix:i,Fraction:a}=e,s=SQ();return s.clear(),s.addTypes([{name:"number",test:an},{name:"Complex",test:rf},{name:"BigNumber",test:sn},{name:"Fraction",test:O1},{name:"Unit",test:yu},{name:"identifier",test:o=>ho&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(o)},{name:"string",test:ho},{name:"Chain",test:gQ},{name:"Array",test:ti},{name:"Matrix",test:Lr},{name:"DenseMatrix",test:Bw},{name:"SparseMatrix",test:Cd},{name:"Range",test:JB},{name:"Index",test:j_},{name:"boolean",test:uye},{name:"ResultSet",test:cye},{name:"Help",test:dQ},{name:"function",test:hye},{name:"Date",test:fye},{name:"RegExp",test:Aye},{name:"null",test:dye},{name:"undefined",test:gye},{name:"AccessorNode",test:Kd},{name:"ArrayNode",test:mu},{name:"AssignmentNode",test:pye},{name:"BlockNode",test:mye},{name:"ConditionalNode",test:vye},{name:"ConstantNode",test:Pn},{name:"FunctionNode",test:DA},{name:"FunctionAssignmentNode",test:P1},{name:"IndexNode",test:Mp},{name:"Node",test:mi},{name:"ObjectNode",test:K_},{name:"OperatorNode",test:Ua},{name:"ParenthesisNode",test:uf},{name:"RangeNode",test:yye},{name:"RelationalNode",test:xye},{name:"SymbolNode",test:Cs},{name:"Map",test:CQ},{name:"Object",test:$_}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(t||xC(l),Lye(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new t(l)}},{from:"number",to:"Complex",convert:function(l){return n||M2(l),new n(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return n||M2(l),new n(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return n||M2(l),new n(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){a||wC(l);var u=new a(l);if(u.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(l){var u=Number(l);if(isNaN(u))throw new Error('Cannot convert "'+l+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(l){t||xC(l);try{return new t(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){a||wC(l);try{return new a(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){n||M2(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return t||xC(l),new t(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return a||wC(l),new a(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||Zye(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),s.onMismatch=(o,l,u)=>{var c=s.createError(o,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Su(l[0])&&u.some(f=>!f.params.includes(","))){var h=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw h.data=c.data,h}throw c},s.onMismatch=(o,l,u)=>{var c=s.createError(o,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Su(l[0])&&u.some(f=>!f.params.includes(","))){var h=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw h.data=c.data,h}throw c},s});function xC(r){throw new Error("Cannot convert value ".concat(r," into a BigNumber: no class 'BigNumber' provided"))}function M2(r){throw new Error("Cannot convert value ".concat(r," into a Complex number: no class 'Complex' provided"))}function Zye(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function wC(r){throw new Error("Cannot convert value ".concat(r," into a Fraction, no class 'Fraction' provided."))}var Jye="ResultSet",e2e=[],t2e=Le(Jye,e2e,()=>{function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return r.prototype.type="ResultSet",r.prototype.isResultSet=!0,r.prototype.valueOf=function(){return this.entries},r.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},r.fromJSON=function(e){return new r(e.entries)},r},{isClass:!0});/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var bg=9e15,qA=1e9,_5="0123456789abcdef",Tw="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Nw="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",E5={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-bg,maxE:bg,crypto:!1},BQ,jh,Xr=!0,Y_="[DecimalError] ",kA=Y_+"Invalid argument: ",TQ=Y_+"Precision limit exceeded",NQ=Y_+"crypto unavailable",IQ="[object Decimal]",bo=Math.floor,Ja=Math.pow,r2e=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,n2e=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,i2e=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,FQ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ac=1e7,Rr=7,a2e=9007199254740991,s2e=Tw.length-1,b5=Nw.length-1,zt={toStringTag:IQ};zt.absoluteValue=zt.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),Ir(r)};zt.ceil=function(){return Ir(new this.constructor(this),this.e+1,2)};zt.clampedTo=zt.clamp=function(r,e){var t,n=this,i=n.constructor;if(r=new i(r),e=new i(e),!r.s||!e.s)return new i(NaN);if(r.gt(e))throw Error(kA+e);return t=n.cmp(r),t<0?r:n.cmp(e)>0?e:new i(n)};zt.comparedTo=zt.cmp=function(r){var e,t,n,i,a=this,s=a.d,o=(r=new a.constructor(r)).d,l=a.s,u=r.s;if(!s||!o)return!l||!u?NaN:l!==u?l:s===o?0:!s^l<0?1:-1;if(!s[0]||!o[0])return s[0]?l:o[0]?-u:0;if(l!==u)return l;if(a.e!==r.e)return a.e>r.e^l<0?1:-1;for(n=s.length,i=o.length,e=0,t=n<i?n:i;e<t;++e)if(s[e]!==o[e])return s[e]>o[e]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1};zt.cosine=zt.cos=function(){var r,e,t=this,n=t.constructor;return t.d?t.d[0]?(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+Rr,n.rounding=1,t=o2e(n,RQ(n,t)),n.precision=r,n.rounding=e,Ir(jh==2||jh==3?t.neg():t,r,e,!0)):new n(1):new n(NaN)};zt.cubeRoot=zt.cbrt=function(){var r,e,t,n,i,a,s,o,l,u,c=this,h=c.constructor;if(!c.isFinite()||c.isZero())return new h(c);for(Xr=!1,a=c.s*Ja(c.s*c,1/3),!a||Math.abs(a)==1/0?(t=Us(c.d),r=c.e,(a=(r-t.length+1)%3)&&(t+=a==1||a==-2?"0":"00"),a=Ja(t,1/3),r=bo((r+1)/3)-(r%3==(r<0?-1:2)),a==1/0?t="5e"+r:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+r),n=new h(t),n.s=c.s):n=new h(a.toString()),s=(r=h.precision)+3;;)if(o=n,l=o.times(o).times(o),u=l.plus(c),n=Oi(u.plus(c).times(o),u.plus(l),s+2,1),Us(o.d).slice(0,s)===(t=Us(n.d)).slice(0,s))if(t=t.slice(s-3,s+1),t=="9999"||!i&&t=="4999"){if(!i&&(Ir(o,r+1,0),o.times(o).times(o).eq(c))){n=o;break}s+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Ir(n,r+1,1),e=!n.times(n).times(n).eq(c));break}return Xr=!0,Ir(n,r,h.rounding,e)};zt.decimalPlaces=zt.dp=function(){var r,e=this.d,t=NaN;if(e){if(r=e.length-1,t=(r-bo(this.e/Rr))*Rr,r=e[r],r)for(;r%10==0;r/=10)t--;t<0&&(t=0)}return t};zt.dividedBy=zt.div=function(r){return Oi(this,new this.constructor(r))};zt.dividedToIntegerBy=zt.divToInt=function(r){var e=this,t=e.constructor;return Ir(Oi(e,new t(r),0,1,1),t.precision,t.rounding)};zt.equals=zt.eq=function(r){return this.cmp(r)===0};zt.floor=function(){return Ir(new this.constructor(this),this.e+1,3)};zt.greaterThan=zt.gt=function(r){return this.cmp(r)>0};zt.greaterThanOrEqualTo=zt.gte=function(r){var e=this.cmp(r);return e==1||e===0};zt.hyperbolicCosine=zt.cosh=function(){var r,e,t,n,i,a=this,s=a.constructor,o=new s(1);if(!a.isFinite())return new s(a.s?1/0:NaN);if(a.isZero())return o;t=s.precision,n=s.rounding,s.precision=t+Math.max(a.e,a.sd())+4,s.rounding=1,i=a.d.length,i<32?(r=Math.ceil(i/3),e=(1/Z_(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),a=up(s,1,a.times(e),new s(1),!0);for(var l,u=r,c=new s(8);u--;)l=a.times(a),a=o.minus(l.times(c.minus(l.times(c))));return Ir(a,s.precision=t,s.rounding=n,!0)};zt.hyperbolicSine=zt.sinh=function(){var r,e,t,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,t=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=up(a,2,i,i,!0);else{r=1.4*Math.sqrt(n),r=r>16?16:r|0,i=i.times(1/Z_(5,r)),i=up(a,2,i,i,!0);for(var s,o=new a(5),l=new a(16),u=new a(20);r--;)s=i.times(i),i=i.times(o.plus(s.times(l.times(s).plus(u))))}return a.precision=e,a.rounding=t,Ir(i,e,t,!0)};zt.hyperbolicTangent=zt.tanh=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+7,n.rounding=1,Oi(t.sinh(),t.cosh(),n.precision=r,n.rounding=e)):new n(t.s)};zt.inverseCosine=zt.acos=function(){var r=this,e=r.constructor,t=r.abs().cmp(1),n=e.precision,i=e.rounding;return t!==-1?t===0?r.isNeg()?Yc(e,n,i):new e(0):new e(NaN):r.isZero()?Yc(e,n+4,i).times(.5):(e.precision=n+6,e.rounding=1,r=new e(1).minus(r).div(r.plus(1)).sqrt().atan(),e.precision=n,e.rounding=i,r.times(2))};zt.inverseHyperbolicCosine=zt.acosh=function(){var r,e,t=this,n=t.constructor;return t.lte(1)?new n(t.eq(1)?0:NaN):t.isFinite()?(r=n.precision,e=n.rounding,n.precision=r+Math.max(Math.abs(t.e),t.sd())+4,n.rounding=1,Xr=!1,t=t.times(t).minus(1).sqrt().plus(t),Xr=!0,n.precision=r,n.rounding=e,t.ln()):new n(t)};zt.inverseHyperbolicSine=zt.asinh=function(){var r,e,t=this,n=t.constructor;return!t.isFinite()||t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+2*Math.max(Math.abs(t.e),t.sd())+6,n.rounding=1,Xr=!1,t=t.times(t).plus(1).sqrt().plus(t),Xr=!0,n.precision=r,n.rounding=e,t.ln())};zt.inverseHyperbolicTangent=zt.atanh=function(){var r,e,t,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(r=a.precision,e=a.rounding,n=i.sd(),Math.max(n,r)<2*-i.e-1?Ir(new a(i),r,e,!0):(a.precision=t=n-i.e,i=Oi(i.plus(1),new a(1).minus(i),t+r,1),a.precision=r+4,a.rounding=1,i=i.ln(),a.precision=r,a.rounding=e,i.times(.5))):new a(NaN)};zt.inverseSine=zt.asin=function(){var r,e,t,n,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),t=a.precision,n=a.rounding,e!==-1?e===0?(r=Yc(a,t+4,n).times(.5),r.s=i.s,r):new a(NaN):(a.precision=t+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=t,a.rounding=n,i.times(2)))};zt.inverseTangent=zt.atan=function(){var r,e,t,n,i,a,s,o,l,u=this,c=u.constructor,h=c.precision,f=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&h+4<=b5)return s=Yc(c,h+4,f).times(.25),s.s=u.s,s}else{if(!u.s)return new c(NaN);if(h+4<=b5)return s=Yc(c,h+4,f).times(.5),s.s=u.s,s}for(c.precision=o=h+10,c.rounding=1,t=Math.min(28,o/Rr+2|0),r=t;r;--r)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(Xr=!1,e=Math.ceil(o/Rr),n=1,l=u.times(u),s=new c(u),i=u;r!==-1;)if(i=i.times(l),a=s.minus(i.div(n+=2)),i=i.times(l),s=a.plus(i.div(n+=2)),s.d[e]!==void 0)for(r=e;s.d[r]===a.d[r]&&r--;);return t&&(s=s.times(2<<t-1)),Xr=!0,Ir(s,c.precision=h,c.rounding=f,!0)};zt.isFinite=function(){return!!this.d};zt.isInteger=zt.isInt=function(){return!!this.d&&bo(this.e/Rr)>this.d.length-2};zt.isNaN=function(){return!this.s};zt.isNegative=zt.isNeg=function(){return this.s<0};zt.isPositive=zt.isPos=function(){return this.s>0};zt.isZero=function(){return!!this.d&&this.d[0]===0};zt.lessThan=zt.lt=function(r){return this.cmp(r)<0};zt.lessThanOrEqualTo=zt.lte=function(r){return this.cmp(r)<1};zt.logarithm=zt.log=function(r){var e,t,n,i,a,s,o,l,u=this,c=u.constructor,h=c.precision,f=c.rounding,A=5;if(r==null)r=new c(10),e=!0;else{if(r=new c(r),t=r.d,r.s<0||!t||!t[0]||r.eq(1))return new c(NaN);e=r.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new c(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)a=!0;else{for(i=t[0];i%10===0;)i/=10;a=i!==1}if(Xr=!1,o=h+A,s=yA(u,o),n=e?Iw(c,o+10):yA(r,o),l=Oi(s,n,o,1),u1(l.d,i=h,f))do if(o+=10,s=yA(u,o),n=e?Iw(c,o+10):yA(r,o),l=Oi(s,n,o,1),!a){+Us(l.d).slice(i+1,i+15)+1==1e14&&(l=Ir(l,h+1,0));break}while(u1(l.d,i+=10,f));return Xr=!0,Ir(l,h,f)};zt.minus=zt.sub=function(r){var e,t,n,i,a,s,o,l,u,c,h,f,A=this,d=A.constructor;if(r=new d(r),!A.d||!r.d)return!A.s||!r.s?r=new d(NaN):A.d?r.s=-r.s:r=new d(r.d||A.s!==r.s?A:NaN),r;if(A.s!=r.s)return r.s=-r.s,A.plus(r);if(u=A.d,f=r.d,o=d.precision,l=d.rounding,!u[0]||!f[0]){if(f[0])r.s=-r.s;else if(u[0])r=new d(A);else return new d(l===3?-0:0);return Xr?Ir(r,o,l):r}if(t=bo(r.e/Rr),c=bo(A.e/Rr),u=u.slice(),a=c-t,a){for(h=a<0,h?(e=u,a=-a,s=f.length):(e=f,t=c,s=u.length),n=Math.max(Math.ceil(o/Rr),s)+2,a>n&&(a=n,e.length=1),e.reverse(),n=a;n--;)e.push(0);e.reverse()}else{for(n=u.length,s=f.length,h=n<s,h&&(s=n),n=0;n<s;n++)if(u[n]!=f[n]){h=u[n]<f[n];break}a=0}for(h&&(e=u,u=f,f=e,r.s=-r.s),s=u.length,n=f.length-s;n>0;--n)u[s++]=0;for(n=f.length;n>a;){if(u[--n]<f[n]){for(i=n;i&&u[--i]===0;)u[i]=ac-1;--u[i],u[n]+=ac}u[n]-=f[n]}for(;u[--s]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(r.d=u,r.e=X_(u,t),Xr?Ir(r,o,l):r):new d(l===3?-0:0)};zt.modulo=zt.mod=function(r){var e,t=this,n=t.constructor;return r=new n(r),!t.d||!r.s||r.d&&!r.d[0]?new n(NaN):!r.d||t.d&&!t.d[0]?Ir(new n(t),n.precision,n.rounding):(Xr=!1,n.modulo==9?(e=Oi(t,r.abs(),0,3,1),e.s*=r.s):e=Oi(t,r,0,n.modulo,1),e=e.times(r),Xr=!0,t.minus(e))};zt.naturalExponential=zt.exp=function(){return C5(this)};zt.naturalLogarithm=zt.ln=function(){return yA(this)};zt.negated=zt.neg=function(){var r=new this.constructor(this);return r.s=-r.s,Ir(r)};zt.plus=zt.add=function(r){var e,t,n,i,a,s,o,l,u,c,h=this,f=h.constructor;if(r=new f(r),!h.d||!r.d)return!h.s||!r.s?r=new f(NaN):h.d||(r=new f(r.d||h.s===r.s?h:NaN)),r;if(h.s!=r.s)return r.s=-r.s,h.minus(r);if(u=h.d,c=r.d,o=f.precision,l=f.rounding,!u[0]||!c[0])return c[0]||(r=new f(h)),Xr?Ir(r,o,l):r;if(a=bo(h.e/Rr),n=bo(r.e/Rr),u=u.slice(),i=a-n,i){for(i<0?(t=u,i=-i,s=c.length):(t=c,n=a,s=u.length),a=Math.ceil(o/Rr),s=a>s?a+1:s+1,i>s&&(i=s,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(s=u.length,i=c.length,s-i<0&&(i=s,t=c,c=u,u=t),e=0;i;)e=(u[--i]=u[i]+c[i]+e)/ac|0,u[i]%=ac;for(e&&(u.unshift(e),++n),s=u.length;u[--s]==0;)u.pop();return r.d=u,r.e=X_(u,n),Xr?Ir(r,o,l):r};zt.precision=zt.sd=function(r){var e,t=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(kA+r);return t.d?(e=MQ(t.d),r&&t.e+1>e&&(e=t.e+1)):e=NaN,e};zt.round=function(){var r=this,e=r.constructor;return Ir(new e(r),r.e+1,e.rounding)};zt.sine=zt.sin=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+Rr,n.rounding=1,t=u2e(n,RQ(n,t)),n.precision=r,n.rounding=e,Ir(jh>2?t.neg():t,r,e,!0)):new n(NaN)};zt.squareRoot=zt.sqrt=function(){var r,e,t,n,i,a,s=this,o=s.d,l=s.e,u=s.s,c=s.constructor;if(u!==1||!o||!o[0])return new c(!u||u<0&&(!o||o[0])?NaN:o?s:1/0);for(Xr=!1,u=Math.sqrt(+s),u==0||u==1/0?(e=Us(o),(e.length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=bo((l+1)/2)-(l<0||l%2),u==1/0?e="5e"+l:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),n=new c(e)):n=new c(u.toString()),t=(l=c.precision)+3;;)if(a=n,n=a.plus(Oi(s,a,t+2,1)).times(.5),Us(a.d).slice(0,t)===(e=Us(n.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(Ir(a,l+1,0),a.times(a).eq(s))){n=a;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ir(n,l+1,1),r=!n.times(n).eq(s));break}return Xr=!0,Ir(n,l,c.rounding,r)};zt.tangent=zt.tan=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+10,n.rounding=1,t=t.sin(),t.s=1,t=Oi(t,new n(1).minus(t.times(t)).sqrt(),r+10,0),n.precision=r,n.rounding=e,Ir(jh==2||jh==4?t.neg():t,r,e,!0)):new n(NaN)};zt.times=zt.mul=function(r){var e,t,n,i,a,s,o,l,u,c=this,h=c.constructor,f=c.d,A=(r=new h(r)).d;if(r.s*=c.s,!f||!f[0]||!A||!A[0])return new h(!r.s||f&&!f[0]&&!A||A&&!A[0]&&!f?NaN:!f||!A?r.s/0:r.s*0);for(t=bo(c.e/Rr)+bo(r.e/Rr),l=f.length,u=A.length,l<u&&(a=f,f=A,A=a,s=l,l=u,u=s),a=[],s=l+u,n=s;n--;)a.push(0);for(n=u;--n>=0;){for(e=0,i=l+n;i>n;)o=a[i]+A[n]*f[i-n-1]+e,a[i--]=o%ac|0,e=o/ac|0;a[i]=(a[i]+e)%ac|0}for(;!a[--s];)a.pop();return e?++t:a.shift(),r.d=a,r.e=X_(a,t),Xr?Ir(r,h.precision,h.rounding):r};zt.toBinary=function(r,e){return t3(this,2,r,e)};zt.toDecimalPlaces=zt.toDP=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:(xl(r,0,qA),e===void 0?e=n.rounding:xl(e,0,8),Ir(t,r+t.e+1,e))};zt.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=sh(n,!0):(xl(r,0,qA),e===void 0?e=i.rounding:xl(e,0,8),n=Ir(new i(n),r+1,e),t=sh(n,!0,r+1)),n.isNeg()&&!n.isZero()?"-"+t:t};zt.toFixed=function(r,e){var t,n,i=this,a=i.constructor;return r===void 0?t=sh(i):(xl(r,0,qA),e===void 0?e=a.rounding:xl(e,0,8),n=Ir(new a(i),r+i.e+1,e),t=sh(n,!1,r+n.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};zt.toFraction=function(r){var e,t,n,i,a,s,o,l,u,c,h,f,A=this,d=A.d,p=A.constructor;if(!d)return new p(A);if(u=t=new p(1),n=l=new p(0),e=new p(n),a=e.e=MQ(d)-A.e-1,s=a%Rr,e.d[0]=Ja(10,s<0?Rr+s:s),r==null)r=a>0?e:u;else{if(o=new p(r),!o.isInt()||o.lt(u))throw Error(kA+o);r=o.gt(e)?a>0?e:u:o}for(Xr=!1,o=new p(Us(d)),c=p.precision,p.precision=a=d.length*Rr*2;h=Oi(o,e,0,1,1),i=t.plus(h.times(n)),i.cmp(r)!=1;)t=n,n=i,i=u,u=l.plus(h.times(i)),l=i,i=e,e=o.minus(h.times(i)),o=i;return i=Oi(r.minus(t),n,0,1,1),l=l.plus(i.times(u)),t=t.plus(i.times(n)),l.s=u.s=A.s,f=Oi(u,n,a,1).minus(A).abs().cmp(Oi(l,t,a,1).minus(A).abs())<1?[u,n]:[l,t],p.precision=c,Xr=!0,f};zt.toHexadecimal=zt.toHex=function(r,e){return t3(this,16,r,e)};zt.toNearest=function(r,e){var t=this,n=t.constructor;if(t=new n(t),r==null){if(!t.d)return t;r=new n(1),e=n.rounding}else{if(r=new n(r),e===void 0?e=n.rounding:xl(e,0,8),!t.d)return r.s?t:r;if(!r.d)return r.s&&(r.s=t.s),r}return r.d[0]?(Xr=!1,t=Oi(t,r,0,e,1).times(r),Xr=!0,Ir(t)):(r.s=t.s,t=r),t};zt.toNumber=function(){return+this};zt.toOctal=function(r,e){return t3(this,8,r,e)};zt.toPower=zt.pow=function(r){var e,t,n,i,a,s,o=this,l=o.constructor,u=+(r=new l(r));if(!o.d||!r.d||!o.d[0]||!r.d[0])return new l(Ja(+o,u));if(o=new l(o),o.eq(1))return o;if(n=l.precision,a=l.rounding,r.eq(1))return Ir(o,n,a);if(e=bo(r.e/Rr),e>=r.d.length-1&&(t=u<0?-u:u)<=a2e)return i=LQ(l,o,t,n),r.s<0?new l(1).div(i):Ir(i,n,a);if(s=o.s,s<0){if(e<r.d.length-1)return new l(NaN);if(r.d[e]&1||(s=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=s,o}return t=Ja(+o,u),e=t==0||!isFinite(t)?bo(u*(Math.log("0."+Us(o.d))/Math.LN10+o.e+1)):new l(t+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?s/0:0):(Xr=!1,l.rounding=o.s=1,t=Math.min(12,(e+"").length),i=C5(r.times(yA(o,n+t)),n),i.d&&(i=Ir(i,n+5,1),u1(i.d,n,a)&&(e=n+10,i=Ir(C5(r.times(yA(o,e+t)),e),e+5,1),+Us(i.d).slice(n+1,n+15)+1==1e14&&(i=Ir(i,n+1,0)))),i.s=s,Xr=!0,l.rounding=a,Ir(i,n,a))};zt.toPrecision=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=sh(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(xl(r,1,qA),e===void 0?e=i.rounding:xl(e,0,8),n=Ir(new i(n),r,e),t=sh(n,r<=n.e||n.e<=i.toExpNeg,r)),n.isNeg()&&!n.isZero()?"-"+t:t};zt.toSignificantDigits=zt.toSD=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):(xl(r,1,qA),e===void 0?e=n.rounding:xl(e,0,8)),Ir(new n(t),r,e)};zt.toString=function(){var r=this,e=r.constructor,t=sh(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+t:t};zt.truncated=zt.trunc=function(){return Ir(new this.constructor(this),this.e+1,1)};zt.valueOf=zt.toJSON=function(){var r=this,e=r.constructor,t=sh(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+t:t};function Us(r){var e,t,n,i=r.length-1,a="",s=r[0];if(i>0){for(a+=s,e=1;e<i;e++)n=r[e]+"",t=Rr-n.length,t&&(a+=iA(t)),a+=n;s=r[e],n=s+"",t=Rr-n.length,t&&(a+=iA(t))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}function xl(r,e,t){if(r!==~~r||r<e||r>t)throw Error(kA+r)}function u1(r,e,t,n){var i,a,s,o;for(a=r[0];a>=10;a/=10)--e;return--e<0?(e+=Rr,i=0):(i=Math.ceil((e+1)/Rr),e%=Rr),a=Ja(10,Rr-e),o=r[i]%a|0,n==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),s=t<4&&o==99999||t>3&&o==49999||o==5e4||o==0):s=(t<4&&o+1==a||t>3&&o+1==a/2)&&(r[i+1]/a/100|0)==Ja(10,e-2)-1||(o==a/2||o==0)&&(r[i+1]/a/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),s=(n||t<4)&&o==9999||!n&&t>3&&o==4999):s=((n||t<4)&&o+1==a||!n&&t>3&&o+1==a/2)&&(r[i+1]/a/1e3|0)==Ja(10,e-3)-1,s}function px(r,e,t){for(var n,i=[0],a,s=0,o=r.length;s<o;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=_5.indexOf(r.charAt(s++)),n=0;n<i.length;n++)i[n]>t-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/t|0,i[n]%=t)}return i.reverse()}function o2e(r,e){var t,n,i;if(e.isZero())return e;n=e.d.length,n<32?(t=Math.ceil(n/3),i=(1/Z_(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),r.precision+=t,e=up(r,1,e.times(i),new r(1));for(var a=t;a--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return r.precision-=t,e}var Oi=function(){function r(n,i,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*i+o,n[l]=s%a|0,o=s/a|0;return o&&n.unshift(o),n}function e(n,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function t(n,i,a,s){for(var o=0;a--;)n[a]-=o,o=n[a]<i[a]?1:0,n[a]=o*s+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s,o,l){var u,c,h,f,A,d,p,y,v,w,x,b,C,S,I,B,T,M,F,N,O=n.constructor,L=n.s==i.s?1:-1,G=n.d,R=i.d;if(!G||!G[0]||!R||!R[0])return new O(!n.s||!i.s||(G?R&&G[0]==R[0]:!R)?NaN:G&&G[0]==0||!R?L*0:L/0);for(l?(A=1,c=n.e-i.e):(l=ac,A=Rr,c=bo(n.e/A)-bo(i.e/A)),F=R.length,T=G.length,v=new O(L),w=v.d=[],h=0;R[h]==(G[h]||0);h++);if(R[h]>(G[h]||0)&&c--,a==null?(S=a=O.precision,s=O.rounding):o?S=a+(n.e-i.e)+1:S=a,S<0)w.push(1),d=!0;else{if(S=S/A+2|0,h=0,F==1){for(f=0,R=R[0],S++;(h<T||f)&&S--;h++)I=f*l+(G[h]||0),w[h]=I/R|0,f=I%R|0;d=f||h<T}else{for(f=l/(R[0]+1)|0,f>1&&(R=r(R,f,l),G=r(G,f,l),F=R.length,T=G.length),B=F,x=G.slice(0,F),b=x.length;b<F;)x[b++]=0;N=R.slice(),N.unshift(0),M=R[0],R[1]>=l/2&&++M;do f=0,u=e(R,x,F,b),u<0?(C=x[0],F!=b&&(C=C*l+(x[1]||0)),f=C/M|0,f>1?(f>=l&&(f=l-1),p=r(R,f,l),y=p.length,b=x.length,u=e(p,x,y,b),u==1&&(f--,t(p,F<y?N:R,y,l))):(f==0&&(u=f=1),p=R.slice()),y=p.length,y<b&&p.unshift(0),t(x,p,b,l),u==-1&&(b=x.length,u=e(R,x,F,b),u<1&&(f++,t(x,F<b?N:R,b,l))),b=x.length):u===0&&(f++,x=[0]),w[h++]=f,u&&x[0]?x[b++]=G[B]||0:(x=[G[B]],b=1);while((B++<T||x[0]!==void 0)&&S--);d=x[0]!==void 0}w[0]||w.shift()}if(A==1)v.e=c,BQ=d;else{for(h=1,f=w[0];f>=10;f/=10)h++;v.e=h+c*A-1,Ir(v,o?a+v.e+1:a,s,d)}return v}}();function Ir(r,e,t,n){var i,a,s,o,l,u,c,h,f,A=r.constructor;e:if(e!=null){if(h=r.d,!h)return r;for(i=1,o=h[0];o>=10;o/=10)i++;if(a=e-i,a<0)a+=Rr,s=e,c=h[f=0],l=c/Ja(10,i-s-1)%10|0;else if(f=Math.ceil((a+1)/Rr),o=h.length,f>=o)if(n){for(;o++<=f;)h.push(0);c=l=0,i=1,a%=Rr,s=a-Rr+1}else break e;else{for(c=o=h[f],i=1;o>=10;o/=10)i++;a%=Rr,s=a-Rr+i,l=s<0?0:c/Ja(10,i-s-1)%10|0}if(n=n||e<0||h[f+1]!==void 0||(s<0?c:c%Ja(10,i-s-1)),u=t<4?(l||n)&&(t==0||t==(r.s<0?3:2)):l>5||l==5&&(t==4||n||t==6&&(a>0?s>0?c/Ja(10,i-s):0:h[f-1])%10&1||t==(r.s<0?8:7)),e<1||!h[0])return h.length=0,u?(e-=r.e+1,h[0]=Ja(10,(Rr-e%Rr)%Rr),r.e=-e||0):h[0]=r.e=0,r;if(a==0?(h.length=f,o=1,f--):(h.length=f+1,o=Ja(10,Rr-a),h[f]=s>0?(c/Ja(10,i-s)%Ja(10,s)|0)*o:0),u)for(;;)if(f==0){for(a=1,s=h[0];s>=10;s/=10)a++;for(s=h[0]+=o,o=1;s>=10;s/=10)o++;a!=o&&(r.e++,h[0]==ac&&(h[0]=1));break}else{if(h[f]+=o,h[f]!=ac)break;h[f--]=0,o=1}for(a=h.length;h[--a]===0;)h.pop()}return Xr&&(r.e>A.maxE?(r.d=null,r.e=NaN):r.e<A.minE&&(r.e=0,r.d=[0])),r}function sh(r,e,t){if(!r.isFinite())return kQ(r);var n,i=r.e,a=Us(r.d),s=a.length;return e?(t&&(n=t-s)>0?a=a.charAt(0)+"."+a.slice(1)+iA(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(r.e<0?"e":"e+")+r.e):i<0?(a="0."+iA(-i-1)+a,t&&(n=t-s)>0&&(a+=iA(n))):i>=s?(a+=iA(i+1-s),t&&(n=t-i-1)>0&&(a=a+"."+iA(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),t&&(n=t-s)>0&&(i+1===s&&(a+="."),a+=iA(n))),a}function X_(r,e){var t=r[0];for(e*=Rr;t>=10;t/=10)e++;return e}function Iw(r,e,t){if(e>s2e)throw Xr=!0,t&&(r.precision=t),Error(TQ);return Ir(new r(Tw),e,1,!0)}function Yc(r,e,t){if(e>b5)throw Error(TQ);return Ir(new r(Nw),e,t,!0)}function MQ(r){var e=r.length-1,t=e*Rr+1;if(e=r[e],e){for(;e%10==0;e/=10)t--;for(e=r[0];e>=10;e/=10)t++}return t}function iA(r){for(var e="";r--;)e+="0";return e}function LQ(r,e,t,n){var i,a=new r(1),s=Math.ceil(n/Rr+4);for(Xr=!1;;){if(t%2&&(a=a.times(e),hL(a.d,s)&&(i=!0)),t=bo(t/2),t===0){t=a.d.length-1,i&&a.d[t]===0&&++a.d[t];break}e=e.times(e),hL(e.d,s)}return Xr=!0,a}function cL(r){return r.d[r.d.length-1]&1}function DQ(r,e,t){for(var n,i,a=new r(e[0]),s=0;++s<e.length;){if(i=new r(e[s]),!i.s){a=i;break}n=a.cmp(i),(n===t||n===0&&a.s===t)&&(a=i)}return a}function C5(r,e){var t,n,i,a,s,o,l,u=0,c=0,h=0,f=r.constructor,A=f.rounding,d=f.precision;if(!r.d||!r.d[0]||r.e>17)return new f(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:NaN);for(e==null?(Xr=!1,l=d):l=e,o=new f(.03125);r.e>-2;)r=r.times(o),h+=5;for(n=Math.log(Ja(2,h))/Math.LN10*2+5|0,l+=n,t=a=s=new f(1),f.precision=l;;){if(a=Ir(a.times(r),l,1),t=t.times(++c),o=s.plus(Oi(a,t,l,1)),Us(o.d).slice(0,l)===Us(s.d).slice(0,l)){for(i=h;i--;)s=Ir(s.times(s),l,1);if(e==null)if(u<3&&u1(s.d,l-n,A,u))f.precision=l+=10,t=a=o=new f(1),c=0,u++;else return Ir(s,f.precision=d,A,Xr=!0);else return f.precision=d,s}s=o}}function yA(r,e){var t,n,i,a,s,o,l,u,c,h,f,A=1,d=10,p=r,y=p.d,v=p.constructor,w=v.rounding,x=v.precision;if(p.s<0||!y||!y[0]||!p.e&&y[0]==1&&y.length==1)return new v(y&&!y[0]?-1/0:p.s!=1?NaN:y?0:p);if(e==null?(Xr=!1,c=x):c=e,v.precision=c+=d,t=Us(y),n=t.charAt(0),Math.abs(a=p.e)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)p=p.times(r),t=Us(p.d),n=t.charAt(0),A++;a=p.e,n>1?(p=new v("0."+t),a++):p=new v(n+"."+t.slice(1))}else return u=Iw(v,c+2,x).times(a+""),p=yA(new v(n+"."+t.slice(1)),c-d).plus(u),v.precision=x,e==null?Ir(p,x,w,Xr=!0):p;for(h=p,l=s=p=Oi(p.minus(1),p.plus(1),c,1),f=Ir(p.times(p),c,1),i=3;;){if(s=Ir(s.times(f),c,1),u=l.plus(Oi(s,new v(i),c,1)),Us(u.d).slice(0,c)===Us(l.d).slice(0,c))if(l=l.times(2),a!==0&&(l=l.plus(Iw(v,c+2,x).times(a+""))),l=Oi(l,new v(A),c,1),e==null)if(u1(l.d,c-d,w,o))v.precision=c+=d,u=s=p=Oi(h.minus(1),h.plus(1),c,1),f=Ir(p.times(p),c,1),i=o=1;else return Ir(l,v.precision=x,w,Xr=!0);else return v.precision=x,l;l=u,i+=2}}function kQ(r){return String(r.s*r.s/0)}function mx(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,r.e=t=t-n-1,r.d=[],n=(t+1)%Rr,t<0&&(n+=Rr),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=Rr;n<i;)r.d.push(+e.slice(n,n+=Rr));e=e.slice(n),n=Rr-e.length}else n-=i;for(;n--;)e+="0";r.d.push(+e),Xr&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function l2e(r,e){var t,n,i,a,s,o,l,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),FQ.test(e))return mx(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(n2e.test(e))t=16,e=e.toLowerCase();else if(r2e.test(e))t=2;else if(i2e.test(e))t=8;else throw Error(kA+e);for(a=e.search(/p/i),a>0?(l=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),s=a>=0,n=r.constructor,s&&(e=e.replace(".",""),o=e.length,a=o-a,i=LQ(n,new n(t),a,a*2)),u=px(e,t,ac),c=u.length-1,a=c;u[a]===0;--a)u.pop();return a<0?new n(r.s*0):(r.e=X_(u,c),r.d=u,Xr=!1,s&&(r=Oi(r,i,o*4)),l&&(r=r.times(Math.abs(l)<54?Ja(2,l):RA.pow(2,l))),Xr=!0,r)}function u2e(r,e){var t,n=e.d.length;if(n<3)return e.isZero()?e:up(r,2,e,e);t=1.4*Math.sqrt(n),t=t>16?16:t|0,e=e.times(1/Z_(5,t)),e=up(r,2,e,e);for(var i,a=new r(5),s=new r(16),o=new r(20);t--;)i=e.times(e),e=e.times(a.plus(i.times(s.times(i).minus(o))));return e}function up(r,e,t,n,i){var a,s,o,l,u=r.precision,c=Math.ceil(u/Rr);for(Xr=!1,l=t.times(t),o=new r(n);;){if(s=Oi(o.times(l),new r(e++*e++),u,1),o=i?n.plus(s):n.minus(s),n=Oi(s.times(l),new r(e++*e++),u,1),s=o.plus(n),s.d[c]!==void 0){for(a=c;s.d[a]===o.d[a]&&a--;);if(a==-1)break}a=o,o=n,n=s,s=a}return Xr=!0,s.d.length=c+1,s}function Z_(r,e){for(var t=r;--e;)t*=r;return t}function RQ(r,e){var t,n=e.s<0,i=Yc(r,r.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return jh=n?4:1,e;if(t=e.divToInt(i),t.isZero())jh=n?3:2;else{if(e=e.minus(t.times(i)),e.lte(a))return jh=cL(t)?n?2:3:n?4:1,e;jh=cL(t)?n?1:4:n?3:2}return e.minus(i).abs()}function t3(r,e,t,n){var i,a,s,o,l,u,c,h,f,A=r.constructor,d=t!==void 0;if(d?(xl(t,1,qA),n===void 0?n=A.rounding:xl(n,0,8)):(t=A.precision,n=A.rounding),!r.isFinite())c=kQ(r);else{for(c=sh(r),s=c.indexOf("."),d?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,s>=0&&(c=c.replace(".",""),f=new A(1),f.e=c.length-s,f.d=px(sh(f),10,i),f.e=f.d.length),h=px(c,10,i),a=l=h.length;h[--l]==0;)h.pop();if(!h[0])c=d?"0p+0":"0";else{if(s<0?a--:(r=new A(r),r.d=h,r.e=a,r=Oi(r,f,t,n,0,i),h=r.d,a=r.e,u=BQ),s=h[t],o=i/2,u=u||h[t+1]!==void 0,u=n<4?(s!==void 0||u)&&(n===0||n===(r.s<0?3:2)):s>o||s===o&&(n===4||u||n===6&&h[t-1]&1||n===(r.s<0?8:7)),h.length=t,u)for(;++h[--t]>i-1;)h[t]=0,t||(++a,h.unshift(1));for(l=h.length;!h[l-1];--l);for(s=0,c="";s<l;s++)c+=_5.charAt(h[s]);if(d){if(l>1)if(e==16||e==8){for(s=e==16?4:3,--l;l%s;l++)c+="0";for(h=px(c,i,e),l=h.length;!h[l-1];--l);for(s=1,c="1.";s<l;s++)c+=_5.charAt(h[s])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>l)for(a-=l;a--;)c+="0";else a<l&&(c=c.slice(0,a)+"."+c.slice(a))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return r.s<0?"-"+c:c}function hL(r,e){if(r.length>e)return r.length=e,!0}function c2e(r){return new this(r).abs()}function h2e(r){return new this(r).acos()}function f2e(r){return new this(r).acosh()}function A2e(r,e){return new this(r).plus(e)}function d2e(r){return new this(r).asin()}function g2e(r){return new this(r).asinh()}function p2e(r){return new this(r).atan()}function m2e(r){return new this(r).atanh()}function v2e(r,e){r=new this(r),e=new this(e);var t,n=this.precision,i=this.rounding,a=n+4;return!r.s||!e.s?t=new this(NaN):!r.d&&!e.d?(t=Yc(this,a,1).times(e.s>0?.25:.75),t.s=r.s):!e.d||r.isZero()?(t=e.s<0?Yc(this,n,i):new this(0),t.s=r.s):!r.d||e.isZero()?(t=Yc(this,a,1).times(.5),t.s=r.s):e.s<0?(this.precision=a,this.rounding=1,t=this.atan(Oi(r,e,a,1)),e=Yc(this,a,1),this.precision=n,this.rounding=i,t=r.s<0?t.minus(e):t.plus(e)):t=this.atan(Oi(r,e,a,1)),t}function y2e(r){return new this(r).cbrt()}function x2e(r){return Ir(r=new this(r),r.e+1,2)}function w2e(r,e,t){return new this(r).clamp(e,t)}function _2e(r){if(!r||typeof r!="object")throw Error(Y_+"Object expected");var e,t,n,i=r.defaults===!0,a=["precision",1,qA,"rounding",0,8,"toExpNeg",-bg,0,"toExpPos",0,bg,"maxE",0,bg,"minE",-bg,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(t=a[e],i&&(this[t]=E5[t]),(n=r[t])!==void 0)if(bo(n)===n&&n>=a[e+1]&&n<=a[e+2])this[t]=n;else throw Error(kA+t+": "+n);if(t="crypto",i&&(this[t]=E5[t]),(n=r[t])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(NQ);else this[t]=!1;else throw Error(kA+t+": "+n);return this}function E2e(r){return new this(r).cos()}function b2e(r){return new this(r).cosh()}function OQ(r){var e,t,n;function i(a){var s,o,l,u=this;if(!(u instanceof i))return new i(a);if(u.constructor=i,fL(a)){u.s=a.s,Xr?!a.d||a.e>i.maxE?(u.e=NaN,u.d=null):a.e<i.minE?(u.e=0,u.d=[0]):(u.e=a.e,u.d=a.d.slice()):(u.e=a.e,u.d=a.d?a.d.slice():a.d);return}if(l=typeof a,l==="number"){if(a===0){u.s=1/a<0?-1:1,u.e=0,u.d=[0];return}if(a<0?(a=-a,u.s=-1):u.s=1,a===~~a&&a<1e7){for(s=0,o=a;o>=10;o/=10)s++;Xr?s>i.maxE?(u.e=NaN,u.d=null):s<i.minE?(u.e=0,u.d=[0]):(u.e=s,u.d=[a]):(u.e=s,u.d=[a]);return}if(a*0!==0){a||(u.s=NaN),u.e=NaN,u.d=null;return}return mx(u,a.toString())}if(l==="string")return(o=a.charCodeAt(0))===45?(a=a.slice(1),u.s=-1):(o===43&&(a=a.slice(1)),u.s=1),FQ.test(a)?mx(u,a):l2e(u,a);if(l==="bigint")return a<0?(a=-a,u.s=-1):u.s=1,mx(u,a.toString());throw Error(kA+a)}if(i.prototype=zt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=_2e,i.clone=OQ,i.isDecimal=fL,i.abs=c2e,i.acos=h2e,i.acosh=f2e,i.add=A2e,i.asin=d2e,i.asinh=g2e,i.atan=p2e,i.atanh=m2e,i.atan2=v2e,i.cbrt=y2e,i.ceil=x2e,i.clamp=w2e,i.cos=E2e,i.cosh=b2e,i.div=C2e,i.exp=S2e,i.floor=B2e,i.hypot=T2e,i.ln=N2e,i.log=I2e,i.log10=M2e,i.log2=F2e,i.max=L2e,i.min=D2e,i.mod=k2e,i.mul=R2e,i.pow=O2e,i.random=P2e,i.round=U2e,i.sign=Q2e,i.sin=G2e,i.sinh=H2e,i.sqrt=z2e,i.sub=q2e,i.sum=j2e,i.tan=$2e,i.tanh=K2e,i.trunc=V2e,r===void 0&&(r={}),r&&r.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function C2e(r,e){return new this(r).div(e)}function S2e(r){return new this(r).exp()}function B2e(r){return Ir(r=new this(r),r.e+1,3)}function T2e(){var r,e,t=new this(0);for(Xr=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Xr=!0,new this(1/0);t=e}return Xr=!0,t.sqrt()}function fL(r){return r instanceof RA||r&&r.toStringTag===IQ||!1}function N2e(r){return new this(r).ln()}function I2e(r,e){return new this(r).log(e)}function F2e(r){return new this(r).log(2)}function M2e(r){return new this(r).log(10)}function L2e(){return DQ(this,arguments,-1)}function D2e(){return DQ(this,arguments,1)}function k2e(r,e){return new this(r).mod(e)}function R2e(r,e){return new this(r).mul(e)}function O2e(r,e){return new this(r).pow(e)}function P2e(r){var e,t,n,i,a=0,s=new this(1),o=[];if(r===void 0?r=this.precision:xl(r,1,qA),n=Math.ceil(r/Rr),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));a<n;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);a<n;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(o.push(i%1e7),a+=4);a=n/4}else throw Error(NQ);else for(;a<n;)o[a++]=Math.random()*1e7|0;for(n=o[--a],r%=Rr,n&&r&&(i=Ja(10,Rr-r),o[a]=(n/i|0)*i);o[a]===0;a--)o.pop();if(a<0)t=0,o=[0];else{for(t=-1;o[0]===0;t-=Rr)o.shift();for(n=1,i=o[0];i>=10;i/=10)n++;n<Rr&&(t-=Rr-n)}return s.e=t,s.d=o,s}function U2e(r){return Ir(r=new this(r),r.e+1,this.rounding)}function Q2e(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function G2e(r){return new this(r).sin()}function H2e(r){return new this(r).sinh()}function z2e(r){return new this(r).sqrt()}function q2e(r,e){return new this(r).sub(e)}function j2e(){var r=0,e=arguments,t=new this(e[r]);for(Xr=!1;t.s&&++r<e.length;)t=t.plus(e[r]);return Xr=!0,Ir(t,this.precision,this.rounding)}function $2e(r){return new this(r).tan()}function K2e(r){return new this(r).tanh()}function V2e(r){return Ir(r=new this(r),r.e+1,1)}zt[Symbol.for("nodejs.util.inspect.custom")]=zt.toString;zt[Symbol.toStringTag]="Decimal";var RA=zt.constructor=OQ(E5);Tw=new RA(Tw);Nw=new RA(Nw);var W2e="BigNumber",Y2e=["?on","config"],X2e=Le(W2e,Y2e,r=>{var{on:e,config:t}=r,n=RA.clone({precision:t.precision,modulo:RA.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&n.config({precision:i.precision})}),n},{isClass:!0});const io=Math.cosh||function(r){return Math.abs(r)<1e-9?1-r:(Math.exp(r)+Math.exp(-r))*.5},lu=Math.sinh||function(r){return Math.abs(r)<1e-9?r:(Math.exp(r)-Math.exp(-r))*.5},Z2e=r=>{const e=Math.sin(.5*r);return-2*e*e},_C=function(r,e){return r=Math.abs(r),e=Math.abs(e),r<e&&([r,e]=[e,r]),r<1e8?Math.sqrt(r*r+e*e):(e/=r,r*Math.sqrt(1+e*e))},K0=function(){throw SyntaxError("Invalid Param")};function EC(r,e){const t=Math.abs(r),n=Math.abs(e);return r===0?Math.log(n):e===0?Math.log(t):t<3e3&&n<3e3?Math.log(r*r+e*e)*.5:(r=r*.5,e=e*.5,.5*Math.log(r*r+e*e)+Math.LN2)}const J2e={re:0,im:0},pd=function(r,e){const t=J2e;if(r==null)t.re=t.im=0;else if(e!==void 0)t.re=r,t.im=e;else switch(typeof r){case"object":if("im"in r&&"re"in r)t.re=r.re,t.im=r.im;else if("abs"in r&&"arg"in r){if(!isFinite(r.abs)&&isFinite(r.arg))return Et.INFINITY;t.re=r.abs*Math.cos(r.arg),t.im=r.abs*Math.sin(r.arg)}else if("r"in r&&"phi"in r){if(!isFinite(r.r)&&isFinite(r.phi))return Et.INFINITY;t.re=r.r*Math.cos(r.phi),t.im=r.r*Math.sin(r.phi)}else r.length===2?(t.re=r[0],t.im=r[1]):K0();break;case"string":t.im=t.re=0;const n=r.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,a=0;n===null&&K0();for(let s=0;s<n.length;s++){const o=n[s];o===" "||o==="	"||o===`
`||(o==="+"?i++:o==="-"?a++:o==="i"||o==="I"?(i+a===0&&K0(),n[s+1]!==" "&&!isNaN(n[s+1])?(t.im+=parseFloat((a%2?"-":"")+n[s+1]),s++):t.im+=parseFloat((a%2?"-":"")+"1"),i=a=0):((i+a===0||isNaN(o))&&K0(),n[s+1]==="i"||n[s+1]==="I"?(t.im+=parseFloat((a%2?"-":"")+o),s++):t.re+=parseFloat((a%2?"-":"")+o),i=a=0))}i+a>0&&K0();break;case"number":t.im=0,t.re=r;break;default:K0()}return isNaN(t.re)||isNaN(t.im),t};function Et(r,e){if(!(this instanceof Et))return new Et(r,e);const t=pd(r,e);this.re=t.re,this.im=t.im}Et.prototype={re:0,im:0,sign:function(){const r=_C(this.re,this.im);return new Et(this.re/r,this.im/r)},add:function(r,e){const t=pd(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im));return n||i?n&&i?Et.NAN:Et.INFINITY:new Et(this.re+t.re,this.im+t.im)},sub:function(r,e){const t=pd(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im));return n||i?n&&i?Et.NAN:Et.INFINITY:new Et(this.re-t.re,this.im-t.im)},mul:function(r,e){const t=pd(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im)),a=this.re===0&&this.im===0,s=t.re===0&&t.im===0;return n&&s||i&&a?Et.NAN:n||i?Et.INFINITY:t.im===0&&this.im===0?new Et(this.re*t.re,0):new Et(this.re*t.re-this.im*t.im,this.re*t.im+this.im*t.re)},div:function(r,e){const t=pd(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im)),a=this.re===0&&this.im===0,s=t.re===0&&t.im===0;if(a&&s||n&&i)return Et.NAN;if(s||n)return Et.INFINITY;if(a||i)return Et.ZERO;if(t.im===0)return new Et(this.re/t.re,this.im/t.re);if(Math.abs(t.re)<Math.abs(t.im)){const o=t.re/t.im,l=t.re*o+t.im;return new Et((this.re*o+this.im)/l,(this.im*o-this.re)/l)}else{const o=t.im/t.re,l=t.im*o+t.re;return new Et((this.re+this.im*o)/l,(this.im-this.re*o)/l)}},pow:function(r,e){const t=pd(r,e),n=this.re===0&&this.im===0;if(t.re===0&&t.im===0)return Et.ONE;if(t.im===0){if(this.im===0&&this.re>0)return new Et(Math.pow(this.re,t.re),0);if(this.re===0)switch((t.re%4+4)%4){case 0:return new Et(Math.pow(this.im,t.re),0);case 1:return new Et(0,Math.pow(this.im,t.re));case 2:return new Et(-Math.pow(this.im,t.re),0);case 3:return new Et(0,-Math.pow(this.im,t.re))}}if(n&&t.re>0)return Et.ZERO;const a=Math.atan2(this.im,this.re),s=EC(this.re,this.im);let o=Math.exp(t.re*s-t.im*a),l=t.im*s+t.re*a;return new Et(o*Math.cos(l),o*Math.sin(l))},sqrt:function(){const r=this.re,e=this.im;if(e===0)return r>=0?new Et(Math.sqrt(r),0):new Et(0,Math.sqrt(-r));const t=_C(r,e);let n=Math.sqrt(.5*(t+Math.abs(r))),i=Math.abs(e)/(2*n);return r>=0?new Et(n,e<0?-i:i):new Et(i,e<0?-n:n)},exp:function(){const r=Math.exp(this.re);return this.im===0?new Et(r,0):new Et(r*Math.cos(this.im),r*Math.sin(this.im))},expm1:function(){const r=this.re,e=this.im;return new Et(Math.expm1(r)*Math.cos(e)+Z2e(e),Math.exp(r)*Math.sin(e))},log:function(){const r=this.re,e=this.im;return e===0&&r>0?new Et(Math.log(r),0):new Et(EC(r,e),Math.atan2(e,r))},abs:function(){return _C(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const r=this.re,e=this.im;return new Et(Math.sin(r)*io(e),Math.cos(r)*lu(e))},cos:function(){const r=this.re,e=this.im;return new Et(Math.cos(r)*io(e),-Math.sin(r)*lu(e))},tan:function(){const r=2*this.re,e=2*this.im,t=Math.cos(r)+io(e);return new Et(Math.sin(r)/t,lu(e)/t)},cot:function(){const r=2*this.re,e=2*this.im,t=Math.cos(r)-io(e);return new Et(-Math.sin(r)/t,lu(e)/t)},sec:function(){const r=this.re,e=this.im,t=.5*io(2*e)+.5*Math.cos(2*r);return new Et(Math.cos(r)*io(e)/t,Math.sin(r)*lu(e)/t)},csc:function(){const r=this.re,e=this.im,t=.5*io(2*e)-.5*Math.cos(2*r);return new Et(Math.sin(r)*io(e)/t,-Math.cos(r)*lu(e)/t)},asin:function(){const r=this.re,e=this.im,t=new Et(e*e-r*r+1,-2*r*e).sqrt(),n=new Et(t.re-e,t.im+r).log();return new Et(n.im,-n.re)},acos:function(){const r=this.re,e=this.im,t=new Et(e*e-r*r+1,-2*r*e).sqrt(),n=new Et(t.re-e,t.im+r).log();return new Et(Math.PI/2-n.im,n.re)},atan:function(){const r=this.re,e=this.im;if(r===0){if(e===1)return new Et(0,1/0);if(e===-1)return new Et(0,-1/0)}const t=r*r+(1-e)*(1-e),n=new Et((1-e*e-r*r)/t,-2*r/t).log();return new Et(-.5*n.im,.5*n.re)},acot:function(){const r=this.re,e=this.im;if(e===0)return new Et(Math.atan2(1,r),0);const t=r*r+e*e;return t!==0?new Et(r/t,-e/t).atan():new Et(r!==0?r/0:0,e!==0?-e/0:0).atan()},asec:function(){const r=this.re,e=this.im;if(r===0&&e===0)return new Et(0,1/0);const t=r*r+e*e;return t!==0?new Et(r/t,-e/t).acos():new Et(r!==0?r/0:0,e!==0?-e/0:0).acos()},acsc:function(){const r=this.re,e=this.im;if(r===0&&e===0)return new Et(Math.PI/2,1/0);const t=r*r+e*e;return t!==0?new Et(r/t,-e/t).asin():new Et(r!==0?r/0:0,e!==0?-e/0:0).asin()},sinh:function(){const r=this.re,e=this.im;return new Et(lu(r)*Math.cos(e),io(r)*Math.sin(e))},cosh:function(){const r=this.re,e=this.im;return new Et(io(r)*Math.cos(e),lu(r)*Math.sin(e))},tanh:function(){const r=2*this.re,e=2*this.im,t=io(r)+Math.cos(e);return new Et(lu(r)/t,Math.sin(e)/t)},coth:function(){const r=2*this.re,e=2*this.im,t=io(r)-Math.cos(e);return new Et(lu(r)/t,-Math.sin(e)/t)},csch:function(){const r=this.re,e=this.im,t=Math.cos(2*e)-io(2*r);return new Et(-2*lu(r)*Math.cos(e)/t,2*io(r)*Math.sin(e)/t)},sech:function(){const r=this.re,e=this.im,t=Math.cos(2*e)+io(2*r);return new Et(2*io(r)*Math.cos(e)/t,-2*lu(r)*Math.sin(e)/t)},asinh:function(){const r=this.re,e=this.im;if(e===0){if(r===0)return new Et(0,0);const a=Math.abs(r),s=Math.log(a+Math.sqrt(a*a+1));return new Et(r<0?-s:s,0)}const t=r*r-e*e+1,n=2*r*e,i=new Et(t,n).sqrt();return new Et(r+i.re,e+i.im).log()},acosh:function(){const r=this.re,e=this.im;if(e===0){if(r>1)return new Et(Math.log(r+Math.sqrt(r-1)*Math.sqrt(r+1)),0);if(r<-1){const i=Math.sqrt(r*r-1);return new Et(Math.log(-r+i),Math.PI)}return new Et(0,Math.acos(r))}const t=new Et(r-1,e).sqrt(),n=new Et(r+1,e).sqrt();return new Et(r+t.re*n.re-t.im*n.im,e+t.re*n.im+t.im*n.re).log()},atanh:function(){const r=this.re,e=this.im;if(e===0){if(r===0)return new Et(0,0);if(r===1)return new Et(1/0,0);if(r===-1)return new Et(-1/0,0);if(-1<r&&r<1)return new Et(.5*Math.log((1+r)/(1-r)),0);if(r>1){const l=(r+1)/(r-1);return new Et(.5*Math.log(l),-Math.PI/2)}const o=(1+r)/(1-r);return new Et(.5*Math.log(-o),Math.PI/2)}const t=1-r,n=1+r,i=t*t+e*e;if(i===0)return new Et(r!==-1?r/0:0,e!==0?e/0:0);const a=(n*t-e*e)/i,s=(e*t+n*e)/i;return new Et(EC(a,s)/2,Math.atan2(s,a)/2)},acoth:function(){const r=this.re,e=this.im;if(r===0&&e===0)return new Et(0,Math.PI/2);const t=r*r+e*e;return t!==0?new Et(r/t,-e/t).atanh():new Et(r!==0?r/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const r=this.re,e=this.im;if(e===0){if(r===0)return new Et(1/0,0);const n=1/r;return new Et(Math.log(n+Math.sqrt(n*n+1)),0)}const t=r*r+e*e;return t!==0?new Et(r/t,-e/t).asinh():new Et(r!==0?r/0:0,e!==0?-e/0:0).asinh()},asech:function(){const r=this.re,e=this.im;if(this.isZero())return Et.INFINITY;const t=r*r+e*e;return t!==0?new Et(r/t,-e/t).acosh():new Et(r!==0?r/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return Et.INFINITY;if(this.isInfinite())return Et.ZERO;const r=this.re,e=this.im,t=r*r+e*e;return new Et(r/t,-e/t)},conjugate:function(){return new Et(this.re,-this.im)},neg:function(){return new Et(-this.re,-this.im)},ceil:function(r){return r=Math.pow(10,r||0),new Et(Math.ceil(this.re*r)/r,Math.ceil(this.im*r)/r)},floor:function(r){return r=Math.pow(10,r||0),new Et(Math.floor(this.re*r)/r,Math.floor(this.im*r)/r)},round:function(r){return r=Math.pow(10,r||0),new Et(Math.round(this.re*r)/r,Math.round(this.im*r)/r)},equals:function(r,e){const t=pd(r,e);return Math.abs(t.re-this.re)<=Et.EPSILON&&Math.abs(t.im-this.im)<=Et.EPSILON},clone:function(){return new Et(this.re,this.im)},toString:function(){let r=this.re,e=this.im,t="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(r)<Et.EPSILON&&(r=0),Math.abs(e)<Et.EPSILON&&(e=0),e===0?t+r:(r!==0?(t+=r,t+=" ",e<0?(e=-e,t+="-"):t+="+",t+=" "):e<0&&(e=-e,t+="-"),e!==1&&(t+=e),t+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};Et.ZERO=new Et(0,0);Et.ONE=new Et(1,0);Et.I=new Et(0,1);Et.PI=new Et(Math.PI,0);Et.E=new Et(Math.E,0);Et.INFINITY=new Et(1/0,1/0);Et.NAN=new Et(NaN,NaN);Et.EPSILON=1e-15;var exe="Complex",txe=[],rxe=Le(exe,txe,()=>(Object.defineProperty(Et,"name",{value:"Complex"}),Et.prototype.constructor=Et,Et.prototype.type="Complex",Et.prototype.isComplex=!0,Et.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Et.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Et.prototype.format=function(r){var e="",t=this.im,n=this.re,i=Dd(this.re,r),a=Dd(this.im,r),s=an(r)?r:r?r.precision:null;if(s!==null){var o=Math.pow(10,-s);Math.abs(n/t)<o&&(n=0),Math.abs(t/n)<o&&(t=0)}return t===0?e=i:n===0?t===1?e="i":t===-1?e="-i":e=a+"i":t<0?t===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":t===1?e=i+" + i":e=i+" + "+a+"i",e},Et.fromPolar=function(r){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Et(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],n=arguments[1];if(an(t)){if(yu(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),an(n))return new Et({r:t,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Et.prototype.valueOf=Et.prototype.toString,Et.fromJSON=function(r){return new Et(r)},Et.compare=function(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0},Et),{isClass:!0}),PQ={exports:{}};/**
 * @license Fraction.js v4.3.0 20/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(r,e){(function(t){var n=2e3,i={s:1,n:0,d:1};function a(v,w){if(isNaN(v=parseInt(v,10)))throw p();return v*w}function s(v,w){if(w===0)throw d();var x=Object.create(A.prototype);x.s=v<0?-1:1,v=v<0?-v:v;var b=f(v,w);return x.n=v/b,x.d=w/b,x}function o(v){for(var w={},x=v,b=2,C=4;C<=x;){for(;x%b===0;)x/=b,w[b]=(w[b]||0)+1;C+=1+2*b++}return x!==v?x>1&&(w[x]=(w[x]||0)+1):w[v]=(w[v]||0)+1,w}var l=function(v,w){var x=0,b=1,C=1,S=0,I=0,B=0,T=1,M=1,F=0,N=1,O=1,L=1,G=1e7,R;if(v!=null)if(w!==void 0){if(x=v,b=w,C=x*b,x%1!==0||b%1!==0)throw y()}else switch(typeof v){case"object":{if("d"in v&&"n"in v)x=v.n,b=v.d,"s"in v&&(x*=v.s);else if(0 in v)x=v[0],1 in v&&(b=v[1]);else throw p();C=x*b;break}case"number":{if(v<0&&(C=v,v=-v),v%1===0)x=v;else if(v>0){for(v>=1&&(M=Math.pow(10,Math.floor(1+Math.log(v)/Math.LN10)),v/=M);N<=G&&L<=G;)if(R=(F+O)/(N+L),v===R){N+L<=G?(x=F+O,b=N+L):L>N?(x=O,b=L):(x=F,b=N);break}else v>R?(F+=O,N+=L):(O+=F,L+=N),N>G?(x=O,b=L):(x=F,b=N);x*=M}else(isNaN(v)||isNaN(w))&&(b=x=NaN);break}case"string":{if(N=v.match(/\d+|./g),N===null)throw p();if(N[F]==="-"?(C=-1,F++):N[F]==="+"&&F++,N.length===F+1?I=a(N[F++],C):N[F+1]==="."||N[F]==="."?(N[F]!=="."&&(S=a(N[F++],C)),F++,(F+1===N.length||N[F+1]==="("&&N[F+3]===")"||N[F+1]==="'"&&N[F+3]==="'")&&(I=a(N[F],C),T=Math.pow(10,N[F].length),F++),(N[F]==="("&&N[F+2]===")"||N[F]==="'"&&N[F+2]==="'")&&(B=a(N[F+1],C),M=Math.pow(10,N[F+1].length)-1,F+=3)):N[F+1]==="/"||N[F+1]===":"?(I=a(N[F],C),T=a(N[F+2],1),F+=3):N[F+3]==="/"&&N[F+1]===" "&&(S=a(N[F],C),I=a(N[F+2],C),T=a(N[F+4],1),F+=5),N.length<=F){b=T*M,C=x=B+b*S+M*I;break}}default:throw p()}if(b===0)throw d();i.s=C<0?-1:1,i.n=Math.abs(x),i.d=Math.abs(b)};function u(v,w,x){for(var b=1;w>0;v=v*v%x,w>>=1)w&1&&(b=b*v%x);return b}function c(v,w){for(;w%2===0;w/=2);for(;w%5===0;w/=5);if(w===1)return 0;for(var x=10%w,b=1;x!==1;b++)if(x=x*10%w,b>n)return 0;return b}function h(v,w,x){for(var b=1,C=u(10,x,w),S=0;S<300;S++){if(b===C)return S;b=b*10%w,C=C*10%w}return 0}function f(v,w){if(!v)return w;if(!w)return v;for(;;){if(v%=w,!v)return w;if(w%=v,!w)return v}}function A(v,w){if(l(v,w),this instanceof A)v=f(i.d,i.n),this.s=i.s,this.n=i.n/v,this.d=i.d/v;else return s(i.s*i.n,i.d)}var d=function(){return new Error("Division by Zero")},p=function(){return new Error("Invalid argument")},y=function(){return new Error("Parameters must be integer")};A.prototype={s:1,n:0,d:1,abs:function(){return s(this.n,this.d)},neg:function(){return s(-this.s*this.n,this.d)},add:function(v,w){return l(v,w),s(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(v,w){return l(v,w),s(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(v,w){return l(v,w),s(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(v,w){return l(v,w),s(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return s(this.s*this.n,this.d)},mod:function(v,w){if(isNaN(this.n)||isNaN(this.d))return new A(NaN);if(v===void 0)return s(this.s*this.n%this.d,1);if(l(v,w),i.n===0&&this.d===0)throw d();return s(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(v,w){return l(v,w),s(f(i.n,this.n)*f(i.d,this.d),i.d*this.d)},lcm:function(v,w){return l(v,w),i.n===0&&this.n===0?s(0,1):s(i.n*this.n,f(i.n,this.n)*f(i.d,this.d))},ceil:function(v){return v=Math.pow(10,v||0),isNaN(this.n)||isNaN(this.d)?new A(NaN):s(Math.ceil(v*this.s*this.n/this.d),v)},floor:function(v){return v=Math.pow(10,v||0),isNaN(this.n)||isNaN(this.d)?new A(NaN):s(Math.floor(v*this.s*this.n/this.d),v)},round:function(v){return v=Math.pow(10,v||0),isNaN(this.n)||isNaN(this.d)?new A(NaN):s(Math.round(v*this.s*this.n/this.d),v)},inverse:function(){return s(this.s*this.d,this.n)},pow:function(v,w){if(l(v,w),i.d===1)return i.s<0?s(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):s(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var x=o(this.n),b=o(this.d),C=1,S=1;for(var I in x)if(I!=="1"){if(I==="0"){C=0;break}if(x[I]*=i.n,x[I]%i.d===0)x[I]/=i.d;else return null;C*=Math.pow(I,x[I])}for(var I in b)if(I!=="1"){if(b[I]*=i.n,b[I]%i.d===0)b[I]/=i.d;else return null;S*=Math.pow(I,b[I])}return i.s<0?s(S,C):s(C,S)},equals:function(v,w){return l(v,w),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(v,w){l(v,w);var x=this.s*this.n*i.d-i.s*i.n*this.d;return(0<x)-(x<0)},simplify:function(v){if(isNaN(this.n)||isNaN(this.d))return this;v=v||.001;for(var w=this.abs(),x=w.toContinued(),b=1;b<x.length;b++){for(var C=s(x[b-1],1),S=b-2;S>=0;S--)C=C.inverse().add(x[S]);if(Math.abs(C.sub(w).valueOf())<v)return C.mul(this.s)}return this},divisible:function(v,w){return l(v,w),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(v){var w,x="",b=this.n,C=this.d;return this.s<0&&(x+="-"),C===1?x+=b:(v&&(w=Math.floor(b/C))>0&&(x+=w,x+=" ",b%=C),x+=b,x+="/",x+=C),x},toLatex:function(v){var w,x="",b=this.n,C=this.d;return this.s<0&&(x+="-"),C===1?x+=b:(v&&(w=Math.floor(b/C))>0&&(x+=w,b%=C),x+="\\frac{",x+=b,x+="}{",x+=C,x+="}"),x},toContinued:function(){var v,w=this.n,x=this.d,b=[];if(isNaN(w)||isNaN(x))return b;do b.push(Math.floor(w/x)),v=w%x,w=x,x=v;while(w!==1);return b},toString:function(v){var w=this.n,x=this.d;if(isNaN(w)||isNaN(x))return"NaN";v=v||15;var b=c(w,x),C=h(w,x,b),S=this.s<0?"-":"";if(S+=w/x|0,w%=x,w*=10,w&&(S+="."),b){for(var I=C;I--;)S+=w/x|0,w%=x,w*=10;S+="(";for(var I=b;I--;)S+=w/x|0,w%=x,w*=10;S+=")"}else for(var I=v;w&&I--;)S+=w/x|0,w%=x,w*=10;return S}},Object.defineProperty(A,"__esModule",{value:!0}),A.default=A,A.Fraction=A,r.exports=A})()})(PQ);var nxe=PQ.exports;const Dh=Af(nxe);var ixe="Fraction",axe=[],sxe=Le(ixe,axe,()=>(Object.defineProperty(Dh,"name",{value:"Fraction"}),Dh.prototype.constructor=Dh,Dh.prototype.type="Fraction",Dh.prototype.isFraction=!0,Dh.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Dh.fromJSON=function(r){return new Dh(r)},Dh),{isClass:!0}),oxe="Range",lxe=[],uxe=Le(oxe,lxe,()=>{function r(e,t,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,a=t!=null,s=n!=null;if(i){if(sn(e))e=e.toNumber();else if(typeof e!="number")throw new TypeError("Parameter start must be a number")}if(a){if(sn(t))t=t.toNumber();else if(typeof t!="number")throw new TypeError("Parameter end must be a number")}if(s){if(sn(n))n=n.toNumber();else if(typeof n!="number")throw new TypeError("Parameter step must be a number")}this.start=i?parseFloat(e):0,this.end=a?parseFloat(t):0,this.step=s?parseFloat(n):1}return r.prototype.type="Range",r.prototype.isRange=!0,r.parse=function(e){if(typeof e!="string")return null;var t=e.split(":"),n=t.map(function(a){return parseFloat(a)}),i=n.some(function(a){return isNaN(a)});if(i)return null;switch(n.length){case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[2],n[1]);default:return null}},r.prototype.clone=function(){return new r(this.start,this.end,this.step)},r.prototype.size=function(){var e=0,t=this.start,n=this.step,i=this.end,a=i-t;return vA(n)===vA(a)?e=Math.ceil(a/n):a===0&&(e=0),isNaN(e)&&(e=0),[e]},r.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},r.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},r.prototype.forEach=function(e){var t=this.start,n=this.step,i=this.end,a=0;if(n>0)for(;t<i;)e(t,[a],this),t+=n,a++;else if(n<0)for(;t>i;)e(t,[a],this),t+=n,a++},r.prototype.map=function(e){var t=[];return this.forEach(function(n,i,a){t[i[0]]=e(n,i,a)}),t},r.prototype.toArray=function(){var e=[];return this.forEach(function(t,n){e[n[0]]=t}),e},r.prototype.valueOf=function(){return this.toArray()},r.prototype.format=function(e){var t=Dd(this.start,e);return this.step!==1&&(t+=":"+Dd(this.step,e)),t+=":"+Dd(this.end,e),t},r.prototype.toString=function(){return this.format()},r.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},r.fromJSON=function(e){return new r(e.start,e.end,e.step)},r},{isClass:!0}),cxe="Matrix",hxe=[],fxe=Le(cxe,hxe,()=>{function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.type="Matrix",r.prototype.isMatrix=!0,r.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},r.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},r.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},r.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},r.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},r.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},r.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},r.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},r.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},r.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},r.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},r.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},r.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},r.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},r.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},r.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},r.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},r},{isClass:!0});function bC(r,e,t){var n=r.constructor,i=new n(2),a="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Sr(t))throw new Error("size must be an integer");if(r.greaterThan(i.pow(t-1).sub(1))||r.lessThan(i.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!r.isInteger())throw new Error("Value must be an integer");r.lessThan(0)&&(r=r.add(i.pow(t))),a="i".concat(t)}switch(e){case 2:return"".concat(r.toBinary()).concat(a);case 8:return"".concat(r.toOctal()).concat(a);case 16:return"".concat(r.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function Axe(r,e){if(typeof e=="function")return e(r);if(!r.isFinite())return r.isNaN()?"NaN":r.gt(0)?"Infinity":"-Infinity";var{notation:t,precision:n,wordSize:i}=vQ(e);switch(t){case"fixed":return gxe(r,n);case"exponential":return AL(r,n);case"engineering":return dxe(r,n);case"bin":return bC(r,2,i);case"oct":return bC(r,8,i);case"hex":return bC(r,16,i);case"auto":{var a=dL(e==null?void 0:e.lowerExp,-3),s=dL(e==null?void 0:e.upperExp,5);if(r.isZero())return"0";var o,l=r.toSignificantDigits(n),u=l.e;return u>=a&&u<s?o=l.toFixed():o=AL(r,n),o.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],h=arguments[4];return c!=="."?c+h:h})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function dxe(r,e){var t=r.e,n=t%3===0?t:t<0?t-3-t%3:t-t%3,i=r.mul(Math.pow(10,-n)),a=i.toPrecision(e);if(a.includes("e")){var s=r.constructor;a=new s(a).toFixed()}return a+"e"+(t>=0?"+":"")+n.toString()}function AL(r,e){return e!==void 0?r.toExponential(e-1):r.toExponential()}function gxe(r,e){return r.toFixed(e)}function dL(r,e){return an(r)?r:sn(r)?r.toNumber():e}function pxe(r,e){var t=r.length-e.length,n=r.length;return r.substring(t,n)===e}function pn(r,e){var t=mxe(r,e);return e&&typeof e=="object"&&"truncate"in e&&t.length>e.truncate?t.substring(0,e.truncate-3)+"...":t}function mxe(r,e){if(typeof r=="number")return Dd(r,e);if(sn(r))return Axe(r,e);if(vxe(r))return!e||e.fraction!=="decimal"?r.s*r.n+"/"+r.d:r.toString();if(Array.isArray(r))return UQ(r,e);if(ho(r))return Cg(r);if(typeof r=="function")return r.syntax?String(r.syntax):"function";if(r&&typeof r=="object"){if(typeof r.format=="function")return r.format(e);if(r&&r.toString(e)!=={}.toString())return r.toString(e);var t=Object.keys(r).map(n=>Cg(n)+": "+pn(r[n],e));return"{"+t.join(", ")+"}"}return String(r)}function Cg(r){for(var e=String(r),t="",n=0;n<e.length;){var i=e.charAt(n);t+=i in gL?gL[i]:i,n++}return'"'+t+'"'}var gL={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function xu(r){var e=String(r);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function UQ(r,e){if(Array.isArray(r)){for(var t="[",n=r.length,i=0;i<n;i++)i!==0&&(t+=", "),t+=UQ(r[i],e);return t+="]",t}else return pn(r,e)}function vxe(r){return r&&typeof r=="object"&&typeof r.s=="number"&&typeof r.n=="number"&&typeof r.d=="number"||!1}function S5(r,e){if(!ho(r))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Si(r)+", index: 0)");if(!ho(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Si(e)+", index: 1)");return r===e?0:r>e?1:-1}function mn(r,e,t){if(!(this instanceof mn))throw new SyntaxError("Constructor must be called with the new operator");this.actual=r,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(r)?"["+r.join(", ")+"]":r)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}mn.prototype=new RangeError;mn.prototype.constructor=RangeError;mn.prototype.name="DimensionError";mn.prototype.isDimensionError=!0;function Ac(r,e,t){if(!(this instanceof Ac))throw new SyntaxError("Constructor must be called with the new operator");this.index=r,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Ac.prototype=new RangeError;Ac.prototype.constructor=RangeError;Ac.prototype.name="IndexError";Ac.prototype.isIndexError=!0;function en(r){for(var e=[];Array.isArray(r);)e.push(r.length),r=r[0];return e}function QQ(r,e,t){var n,i=r.length;if(i!==e[t])throw new mn(i,e[t]);if(t<e.length-1){var a=t+1;for(n=0;n<i;n++){var s=r[n];if(!Array.isArray(s))throw new mn(e.length-1,e.length,"<");QQ(r[n],e,a)}}else for(n=0;n<i;n++)if(Array.isArray(r[n]))throw new mn(e.length+1,e.length,">")}function pL(r,e){var t=e.length===0;if(t){if(Array.isArray(r))throw new mn(r.length,0)}else QQ(r,e,0)}function Fw(r,e){var t=r.isMatrix?r._size:en(r),n=e._sourceSize;n.forEach((i,a)=>{if(i!==null&&i!==t[a])throw new mn(i,t[a])})}function Ei(r,e){if(r!==void 0){if(!an(r)||!Sr(r))throw new TypeError("Index must be an integer (value: "+r+")");if(r<0||typeof e=="number"&&r>=e)throw new Ac(r,e)}}function cp(r){for(var e=0;e<r._dimensions.length;++e){var t=r._dimensions[e];if(t._data&&ti(t._data)){if(t._size[0]===0)return!0}else if(t.isRange){if(t.start===t.end)return!0}else if(ho(t)&&t.length===0)return!0}return!1}function hp(r,e,t){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!an(i)||!Sr(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+pn(e)+")")}),(an(r)||sn(r))&&(r=[r]);var n=t!==void 0?t:0;return B5(r,e,0,n),r}function B5(r,e,t,n){var i,a,s=r.length,o=e[t],l=Math.min(s,o);if(r.length=o,t<e.length-1){var u=t+1;for(i=0;i<l;i++)a=r[i],Array.isArray(a)||(a=[a],r[i]=a),B5(a,e,u,n);for(i=l;i<o;i++)a=[],r[i]=a,B5(a,e,u,n)}else{for(i=0;i<l;i++)for(;Array.isArray(r[i]);)r[i]=r[i][0];for(i=l;i<o;i++)r[i]=n}}function r3(r,e){var t=jn(r),n=t.length;if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new mn(0,n,"!=");e=n3(e,n);var i=GQ(e);if(n!==i)throw new mn(i,n,"!=");try{return yxe(t,e)}catch(a){throw a instanceof mn?new mn(i,n,"!="):a}}function n3(r,e){var t=GQ(r),n=r.slice(),i=-1,a=r.indexOf(i),s=r.indexOf(i,a+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var o=a>=0,l=e%t===0;if(o)if(l)n[a]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return n}function GQ(r){return r.reduce((e,t)=>e*t,1)}function yxe(r,e){for(var t=r,n,i=e.length-1;i>0;i--){var a=e[i];n=[];for(var s=t.length/a,o=0;o<s;o++)n.push(t.slice(o*a,(o+1)*a));t=n}return t}function Mw(r,e){for(var t=en(r);Array.isArray(r)&&r.length===1;)r=r[0],t.shift();for(var n=t.length;t[n-1]===1;)n--;return n<t.length&&(r=HQ(r,n,0),t.length=n),r}function HQ(r,e,t){var n,i;if(t<e){var a=t+1;for(n=0,i=r.length;n<i;n++)r[n]=HQ(r[n],e,a)}else for(;Array.isArray(r);)r=r[0];return r}function zQ(r,e,t,n){var i=n||en(r);if(t)for(var a=0;a<t;a++)r=[r],i.unshift(1);for(r=qQ(r,e,0);i.length<e;)i.push(1);return r}function qQ(r,e,t){var n,i;if(Array.isArray(r)){var a=t+1;for(n=0,i=r.length;n<i;n++)r[n]=qQ(r[n],e,a)}else for(var s=t;s<e;s++)r=[r];return r}function jn(r){if(!Array.isArray(r))return r;var e=[];return r.forEach(function t(n){Array.isArray(n)?n.forEach(t):e.push(n)}),e}function nf(r,e){return Array.prototype.map.call(r,e)}function J_(r,e){Array.prototype.forEach.call(r,e)}function jQ(r,e){if(en(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,e)}function Lw(r,e){if(en(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,t=>e.test(t))}function mL(r,e){return Array.prototype.join.call(r,e)}function fp(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;var e=[],t=0;e[0]={value:r[0],identifier:0};for(var n=1;n<r.length;n++)r[n]===r[n-1]?t++:t=0,e.push({value:r[n],identifier:t});return e}function Dw(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;for(var e=[],t=0;t<r.length;t++)e.push(r[t].value);return e}function c1(r,e){for(var t,n=0,i=0;i<r.length;i++){var a=r[i],s=Array.isArray(a);if(i===0&&s&&(n=a.length),s&&a.length!==n)return;var o=s?c1(a,e):e(a);if(t===void 0)t=o;else if(t!==o)return"mixed"}return t}function $Q(r,e,t,n){if(n<t){if(r.length!==e.length)throw new mn(r.length,e.length);for(var i=[],a=0;a<r.length;a++)i[a]=$Q(r[a],e[a],t,n+1);return i}else return r.concat(e)}function KQ(){var r=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(r.length===1)return r[0];if(r.length>1)return r.slice(1).reduce(function(t,n){return $Q(t,n,e,0)},r[0]);throw new Error("Wrong number of arguments in function concat")}function xxe(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];for(var n=e.map(f=>f.length),i=Math.max(...n),a=new Array(i).fill(null),s=0;s<e.length;s++)for(var o=e[s],l=n[s],u=0;u<l;u++){var c=i-l+u;o[u]>a[c]&&(a[c]=o[u])}for(var h=0;h<e.length;h++)kw(e[h],a);return a}function kw(r,e){for(var t=e.length,n=r.length,i=0;i<n;i++){var a=t-n+i;if(r[i]<e[a]&&r[i]>1||r[i]>e[a])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(r,") not possible to broadcast dimension ").concat(n," with size ").concat(r[i]," to size ").concat(e[a]))}}function vL(r,e){var t=en(r);if(Vd(t,e))return r;kw(t,e);var n=xxe(t,e),i=n.length,a=[...Array(i-t.length).fill(1),...t],s=_xe(r);t.length<i&&(s=r3(s,a),t=en(s));for(var o=0;o<i;o++)t[o]<n[o]&&(s=wxe(s,n[o],o),t=en(s));return s}function wxe(r,e,t){return KQ(...Array(e).fill(r),t)}function _xe(r){return ts([],r)}function Exe(r){var e=0,t=1,n=Object.create(null),i=Object.create(null),a=0,s=function(l){var u=i[l];if(u&&(delete n[u],delete i[l],--e,t===u)){if(!e){a=0,t=1;return}for(;!Object.prototype.hasOwnProperty.call(n,++t););}};return r=Math.abs(r),{hit:function(l){var u=i[l],c=++a;if(n[c]=l,i[l]=c,!u)return++e,e<=r?void 0:(l=n[t],s(l),l);if(delete n[u],t===u)for(;!Object.prototype.hasOwnProperty.call(n,++t););},delete:s,clear:function(){e=a=0,t=1,n=Object.create(null),i=Object.create(null)}}}function Q1(r){var{hasher:e,limit:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t=t??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function n(){typeof n.cache!="object"&&(n.cache={values:new Map,lru:Exe(t||Number.POSITIVE_INFINITY)});for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=e(i);if(n.cache.values.has(s))return n.cache.lru.hit(s),n.cache.values.get(s);var o=r.apply(r,i);return n.cache.values.set(s,o),n.cache.values.delete(n.cache.lru.hit(s)),o}}function VQ(r){return Object.keys(r.signatures||{}).reduce(function(e,t){var n=(t.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}var bxe="DenseMatrix",Cxe=["Matrix"],Sxe=Le(bxe,Cxe,r=>{var{Matrix:e}=r;function t(c,h){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(h&&!ho(h))throw new Error("Invalid datatype: "+h);if(Lr(c))c.type==="DenseMatrix"?(this._data=Yr(c._data),this._size=Yr(c._size),this._datatype=h||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=h||c._datatype);else if(c&&ti(c.data)&&ti(c.size))this._data=c.data,this._size=c.size,pL(this._data,this._size),this._datatype=h||c.datatype;else if(ti(c))this._data=u(c),this._size=en(this._data),pL(this._data,this._size),this._datatype=h;else{if(c)throw new TypeError("Unsupported type of data ("+Si(c)+")");this._data=[],this._size=[0],this._datatype=h}}t.prototype=new e,t.prototype.createDenseMatrix=function(c,h){return new t(c,h)},Object.defineProperty(t,"name",{value:"DenseMatrix"}),t.prototype.constructor=t,t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return c1(this._data,Si)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(c,h){return new t(c,h)},t.prototype.subset=function(c,h,f){switch(arguments.length){case 1:return n(this,c);case 2:case 3:return a(this,c,h,f);default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.get=function(c){if(!ti(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new mn(c.length,this._size.length);for(var h=0;h<c.length;h++)Ei(c[h],this._size[h]);for(var f=this._data,A=0,d=c.length;A<d;A++){var p=c[A];Ei(p,f.length),f=f[p]}return f},t.prototype.set=function(c,h,f){if(!ti(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new mn(c.length,this._size.length,"<");var A,d,p,y=c.map(function(w){return w+1});l(this,y,f);var v=this._data;for(A=0,d=c.length-1;A<d;A++)p=c[A],Ei(p,v.length),v=v[p];return p=c[c.length-1],Ei(p,v.length),v[p]=h,this};function n(c,h){if(!j_(h))throw new TypeError("Invalid index");var f=h.isScalar();if(f)return c.get(h.min());var A=h.size();if(A.length!==c._size.length)throw new mn(A.length,c._size.length);for(var d=h.min(),p=h.max(),y=0,v=c._size.length;y<v;y++)Ei(d[y],c._size[y]),Ei(p[y],c._size[y]);return new t(i(c._data,h,A.length,0),c._datatype)}function i(c,h,f,A){var d=A===f-1,p=h.dimension(A);return d?p.map(function(y){return Ei(y,c.length),c[y]}).valueOf():p.map(function(y){Ei(y,c.length);var v=c[y];return i(v,h,f,A+1)}).valueOf()}function a(c,h,f,A){if(!h||h.isIndex!==!0)throw new TypeError("Invalid index");var d=h.size(),p=h.isScalar(),y;if(Lr(f)?(y=f.size(),f=f.valueOf()):y=en(f),p){if(y.length!==0)throw new TypeError("Scalar expected");c.set(h.min(),f,A)}else{if(!Vd(y,d))try{y.length===0?f=vL([f],d):f=vL(f,d),y=en(f)}catch{}if(d.length<c._size.length)throw new mn(d.length,c._size.length,"<");if(y.length<d.length){for(var v=0,w=0;d[v]===1&&y[v]===1;)v++;for(;d[v]===1;)w++,v++;f=zQ(f,d.length,w,y)}if(!Vd(d,y))throw new mn(d,y,">");var x=h.max().map(function(S){return S+1});l(c,x,A);var b=d.length,C=0;s(c._data,h,f,b,C)}return c}function s(c,h,f,A,d){var p=d===A-1,y=h.dimension(d);p?y.forEach(function(v,w){Ei(v),c[v]=f[w[0]]}):y.forEach(function(v,w){Ei(v),s(c[v],h,f[w[0]],A,d+1)})}t.prototype.resize=function(c,h,f){if(!Su(c))throw new TypeError("Array or Matrix expected");var A=c.valueOf().map(p=>Array.isArray(p)&&p.length===1?p[0]:p),d=f?this.clone():this;return o(d,A,h)};function o(c,h,f){if(h.length===0){for(var A=c._data;ti(A);)A=A[0];return A}return c._size=h.slice(0),c._data=hp(c._data,c._size,f),c}t.prototype.reshape=function(c,h){var f=h?this.clone():this;f._data=r3(f._data,c);var A=f._size.reduce((d,p)=>d*p);return f._size=n3(c,A),f};function l(c,h,f){for(var A=c._size.slice(0),d=!1;A.length<h.length;)A.push(0),d=!0;for(var p=0,y=h.length;p<y;p++)h[p]>A[p]&&(A[p]=h[p],d=!0);d&&o(c,A,f)}t.prototype.clone=function(){var c=new t({data:Yr(this._data),size:Yr(this._size),datatype:this._datatype});return c},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(c){var h=this,f=VQ(c),A=function y(v,w){return ti(v)?v.map(function(x,b){return y(x,w.concat(b))}):f===1?c(v):f===2?c(v,w):c(v,w,h)},d=A(this._data,[]),p=this._datatype!==void 0?c1(d,Si):void 0;return new t(d,p)},t.prototype.forEach=function(c){var h=this,f=function A(d,p){ti(d)?d.forEach(function(y,v){A(y,p.concat(v))}):c(d,p,h)};f(this._data,[])},t.prototype[Symbol.iterator]=function*(){var c=function*h(f,A){if(ti(f))for(var d=0;d<f.length;d++)yield*h(f[d],A.concat(d));else yield{value:f,index:A}};yield*c(this._data,[])},t.prototype.rows=function(){var c=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var f=this._data;for(var A of f)c.push(new t([A],this._datatype));return c},t.prototype.columns=function(){var c=this,h=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var A=this._data,d=function(v){var w=A.map(x=>[x[v]]);h.push(new t(w,c._datatype))},p=0;p<f[1];p++)d(p);return h},t.prototype.toArray=function(){return Yr(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(c){return pn(this._data,c)},t.prototype.toString=function(){return pn(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(c){if(c){if(sn(c)&&(c=c.toNumber()),!an(c)||!Sr(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var h=c>0?c:0,f=c<0?-c:0,A=this._size[0],d=this._size[1],p=Math.min(A-f,d-h),y=[],v=0;v<p;v++)y[v]=this._data[v+f][v+h];return new t({data:y,size:[p],datatype:this._datatype})},t.diagonal=function(c,h,f,A){if(!ti(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(I){if(sn(I)&&(I=I.toNumber()),!an(I)||!Sr(I)||I<1)throw new Error("Size values must be positive integers");return I}),f){if(sn(f)&&(f=f.toNumber()),!an(f)||!Sr(f))throw new TypeError("The parameter k must be an integer number")}else f=0;var d=f>0?f:0,p=f<0?-f:0,y=c[0],v=c[1],w=Math.min(y-p,v-d),x;if(ti(h)){if(h.length!==w)throw new Error("Invalid value array length");x=function(B){return h[B]}}else if(Lr(h)){var b=h.size();if(b.length!==1||b[0]!==w)throw new Error("Invalid matrix length");x=function(B){return h.get([B])}}else x=function(){return h};A||(A=sn(x(0))?x(0).mul(0):0);var C=[];if(c.length>0){C=hp(C,c,A);for(var S=0;S<w;S++)C[S+p][S+d]=x(S)}return new t({data:C,size:[y,v]})},t.fromJSON=function(c){return new t(c)},t.prototype.swapRows=function(c,h){if(!an(c)||!Sr(c)||!an(h)||!Sr(h))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Ei(c,this._size[0]),Ei(h,this._size[0]),t._swapRows(c,h,this._data),this},t._swapRows=function(c,h,f){var A=f[c];f[c]=f[h],f[h]=A};function u(c){return Lr(c)?u(c.valueOf()):ti(c)?c.map(u):c}return t},{isClass:!0}),yL="clone",Bxe=["typed"],Txe=Le(yL,Bxe,r=>{var{typed:e}=r;return e(yL,{any:Yr})});function WQ(r){var e=r.length,t=r[0].length,n,i,a=[];for(i=0;i<t;i++){var s=[];for(n=0;n<e;n++)s.push(r[n][i]);a.push(s)}return a}function Lp(r){for(var e=0;e<r.length;e++)if(Su(r[e]))return!0;return!1}function cf(r,e){Lr(r)&&(r=r.valueOf());for(var t=0,n=r.length;t<n;t++){var i=r[t];Array.isArray(i)?cf(i,e):e(i)}}function vn(r,e,t){return r&&typeof r.map=="function"?r.map(function(n){return vn(n,e)}):e(r)}function eE(r,e,t){var n=Array.isArray(r)?en(r):r.size();if(e<0||e>=n.length)throw new Ac(e,n.length);return Lr(r)?r.create(Rw(r.valueOf(),e,t)):Rw(r,e,t)}function Rw(r,e,t){var n,i,a,s;if(e<=0)if(Array.isArray(r[0])){for(s=WQ(r),i=[],n=0;n<s.length;n++)i[n]=Rw(s[n],e-1,t);return i}else{for(a=r[0],n=1;n<r.length;n++)a=t(a,r[n]);return a}else{for(i=[],n=0;n<r.length;n++)i[n]=Rw(r[n],e-1,t);return i}}function xL(r,e,t,n,i,a,s,o,l,u,c){var h=r._values,f=r._index,A=r._ptr,d,p,y,v;if(n)for(p=A[e],y=A[e+1],d=p;d<y;d++)v=f[d],t[v]!==a?(t[v]=a,s.push(v),n[v]=h[d]):(n[v]=o(n[v],h[d]),i[v]=a);else for(p=A[e],y=A[e+1],d=p;d<y;d++)v=f[d],t[v]!==a?(t[v]=a,s.push(v)):i[v]=a}var wL="isInteger",Nxe=["typed"],Ixe=Le(wL,Nxe,r=>{var{typed:e}=r;return e(wL,{number:Sr,BigNumber:function(n){return n.isInt()},Fraction:function(n){return n.d===1&&isFinite(n.n)},"Array | Matrix":e.referToSelf(t=>n=>vn(n,t))})}),dc="number",Dp="number, number";function YQ(r){return Math.abs(r)}YQ.signature=dc;function XQ(r,e){return r+e}XQ.signature=Dp;function ZQ(r,e){return r-e}ZQ.signature=Dp;function JQ(r,e){return r*e}JQ.signature=Dp;function eG(r){return-r}eG.signature=dc;function tG(r){return r}tG.signature=dc;function Vm(r){return Nye(r)}Vm.signature=dc;function rG(r){return r*r*r}rG.signature=dc;function nG(r){return Math.exp(r)}nG.signature=dc;function iG(r){return Iye(r)}iG.signature=dc;function aG(r,e){if(!Sr(r)||!Sr(e))throw new Error("Parameters in function lcm must be integer numbers");if(r===0||e===0)return 0;for(var t,n=r*e;e!==0;)t=e,e=r%t,r=t;return Math.abs(n/r)}aG.signature=Dp;function Fxe(r,e){return Math.log(r)}function sG(r){return Bye(r)}sG.signature=dc;function oG(r){return Sye(r)}oG.signature=dc;function _L(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,t=e<0;if(t&&(e=-e),e===0)throw new Error("Root must be non-zero");if(r<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(r===0)return t?1/0:0;if(!isFinite(r))return t?0:r;var n=Math.pow(Math.abs(r),1/e);return n=r<0?-n:n,t?1/n:n}function T5(r){return vA(r)}T5.signature=dc;function lG(r){return r*r}lG.signature=dc;function uG(r,e){var t,n,i,a=0,s=1,o=1,l=0;if(!Sr(r)||!Sr(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(r/e),i=r-n*e,t=a,a=s-n*a,s=t,t=o,o=l-n*o,l=t,r=e,e=i;var u;return r<0?u=[-r,-s,-l]:u=[r,r?s:0,l],u}uG.signature=Dp;function cG(r,e){return r*r<1&&e===1/0||r*r>1&&e===-1/0?0:Math.pow(r,e)}cG.signature=Dp;function _m(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!Sr(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(yQ(r,e))}var Mxe="number",kp="number, number";function hG(r,e){if(!Sr(r)||!Sr(e))throw new Error("Integers expected in function bitAnd");return r&e}hG.signature=kp;function fG(r){if(!Sr(r))throw new Error("Integer expected in function bitNot");return~r}fG.signature=Mxe;function AG(r,e){if(!Sr(r)||!Sr(e))throw new Error("Integers expected in function bitOr");return r|e}AG.signature=kp;function dG(r,e){if(!Sr(r)||!Sr(e))throw new Error("Integers expected in function bitXor");return r^e}dG.signature=kp;function gG(r,e){if(!Sr(r)||!Sr(e))throw new Error("Integers expected in function leftShift");return r<<e}gG.signature=kp;function pG(r,e){if(!Sr(r)||!Sr(e))throw new Error("Integers expected in function rightArithShift");return r>>e}pG.signature=kp;function mG(r,e){if(!Sr(r)||!Sr(e))throw new Error("Integers expected in function rightLogShift");return r>>>e}mG.signature=kp;function $h(r,e){if(e<r)return 1;if(e===r)return e;var t=e+r>>1;return $h(r,t)*$h(t+1,e)}function vG(r,e){if(!Sr(r)||r<0)throw new TypeError("Positive integer value expected in function combinations");if(!Sr(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>r)throw new TypeError("k must be less than or equal to n");for(var t=r-e,n=1,i=e<t?t+1:e+1,a=2,s=e<t?e:t,o=i;o<=r;++o)for(n*=o;a<=s&&n%a===0;)n/=a,++a;return a<=s&&(n/=$h(a,s)),n}vG.signature="number, number";var Lxe=Math.PI,Dxe=2*Math.PI,kxe=Math.E,Rxe=1.618033988749895,Oxe="number",i3="number, number";function yG(r){return!r}yG.signature=Oxe;function xG(r,e){return!!(r||e)}xG.signature=i3;function wG(r,e){return!!r!=!!e}wG.signature=i3;function _G(r,e){return!!(r&&e)}_G.signature=i3;function Ow(r){var e;if(Sr(r))return r<=0?isFinite(r)?1/0:NaN:r>171?1/0:$h(1,r-1);if(r<.5)return Math.PI/(Math.sin(Math.PI*r)*Ow(1-r));if(r>=171.35)return 1/0;if(r>85){var t=r*r,n=t*r,i=n*r,a=i*r;return Math.sqrt(2*Math.PI/r)*Math.pow(r/Math.E,r)*(1+1/(12*r)+1/(288*t)-139/(51840*n)-571/(2488320*i)+163879/(209018880*a)+5246819/(75246796800*a*r))}--r,e=Hg[0];for(var s=1;s<Hg.length;++s)e+=Hg[s]/(r+s);var o=r+EG+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,r+.5)*Math.exp(-o)*e}Ow.signature="number";var EG=4.7421875,Hg=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],bG=.9189385332046728,Pxe=5,Uxe=7,EL=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function Pw(r){if(r<0)return NaN;if(r===0)return 1/0;if(!isFinite(r))return r;if(r<.5)return Math.log(Math.PI/Math.sin(Math.PI*r))-Pw(1-r);r=r-1;for(var e=r+Pxe+.5,t=EL[0],n=Uxe-1;n>=1;n--)t+=EL[n]/(r+n);return bG+(r+.5)*Math.log(e)-e+Math.log(t)}Pw.signature="number";var So="number";function CG(r){return kye(r)}CG.signature=So;function SG(r){return Math.atan(1/r)}SG.signature=So;function BG(r){return isFinite(r)?(Math.log((r+1)/r)+Math.log(r/(r-1)))/2:0}BG.signature=So;function TG(r){return Math.asin(1/r)}TG.signature=So;function NG(r){var e=1/r;return Math.log(e+Math.sqrt(e*e+1))}NG.signature=So;function IG(r){return Math.acos(1/r)}IG.signature=So;function FG(r){var e=1/r,t=Math.sqrt(e*e-1);return Math.log(t+e)}FG.signature=So;function MG(r){return Rye(r)}MG.signature=So;function LG(r){return Oye(r)}LG.signature=So;function DG(r){return 1/Math.tan(r)}DG.signature=So;function kG(r){var e=Math.exp(2*r);return(e+1)/(e-1)}kG.signature=So;function RG(r){return 1/Math.sin(r)}RG.signature=So;function OG(r){return r===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(r)-Math.exp(-r)))*vA(r)}OG.signature=So;function PG(r){return 1/Math.cos(r)}PG.signature=So;function UG(r){return 2/(Math.exp(r)+Math.exp(-r))}UG.signature=So;function QG(r){return Uye(r)}QG.signature=So;var tE="number";function GG(r){return r<0}GG.signature=tE;function HG(r){return r>0}HG.signature=tE;function zG(r){return r===0}zG.signature=tE;function qG(r){return Number.isNaN(r)}qG.signature=tE;var bL="isNegative",Qxe=["typed"],Gxe=Le(bL,Qxe,r=>{var{typed:e}=r;return e(bL,{number:GG,BigNumber:function(n){return n.isNeg()&&!n.isZero()&&!n.isNaN()},Fraction:function(n){return n.s<0},Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>vn(n,t))})}),CL="isNumeric",Hxe=["typed"],zxe=Le(CL,Hxe,r=>{var{typed:e}=r;return e(CL,{"number | BigNumber | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(t=>n=>vn(n,t))})}),SL="hasNumericValue",qxe=["typed","isNumeric"],jxe=Le(SL,qxe,r=>{var{typed:e,isNumeric:t}=r;return e(SL,{boolean:()=>!0,string:function(i){return i.trim().length>0&&!isNaN(Number(i))},any:function(i){return t(i)}})}),BL="isPositive",$xe=["typed"],Kxe=Le(BL,$xe,r=>{var{typed:e}=r;return e(BL,{number:HG,BigNumber:function(n){return!n.isNeg()&&!n.isZero()&&!n.isNaN()},Fraction:function(n){return n.s>0&&n.n>0},Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>vn(n,t))})}),TL="isZero",Vxe=["typed"],Wxe=Le(TL,Vxe,r=>{var{typed:e}=r;return e(TL,{number:zG,BigNumber:function(n){return n.isZero()},Complex:function(n){return n.re===0&&n.im===0},Fraction:function(n){return n.d===1&&n.n===0},Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>vn(n,t))})}),NL="isNaN",Yxe=["typed"],Xxe=Le(NL,Yxe,r=>{var{typed:e}=r;return e(NL,{number:qG,BigNumber:function(n){return n.isNaN()},Fraction:function(n){return!1},Complex:function(n){return n.isNaN()},Unit:function(n){return Number.isNaN(n.value)},"Array | Matrix":e.referToSelf(t=>n=>vn(n,t))})}),IL="typeOf",Zxe=["typed"],Jxe=Le(IL,Zxe,r=>{var{typed:e}=r;return e(IL,{any:Si})});function Bu(r,e,t){if(t==null)return r.eq(e);if(r.eq(e))return!0;if(r.isNaN()||e.isNaN())return!1;if(r.isFinite()&&e.isFinite()){var n=r.minus(e).abs();if(n.isZero())return!0;var i=r.constructor.max(r.abs(),e.abs());return n.lte(i.times(t))}return!1}function ewe(r,e,t){return Wo(r.re,e.re,t)&&Wo(r.im,e.im,t)}var Rp=Le("compareUnits",["typed"],r=>{var{typed:e}=r;return{"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(t,[n.valueType(),i.valueType()])(n.value,i.value)})}}),Uw="equalScalar",twe=["typed","config"],rwe=Le(Uw,twe,r=>{var{typed:e,config:t}=r,n=Rp({typed:e});return e(Uw,{"boolean, boolean":function(a,s){return a===s},"number, number":function(a,s){return Wo(a,s,t.epsilon)},"BigNumber, BigNumber":function(a,s){return a.eq(s)||Bu(a,s,t.epsilon)},"Fraction, Fraction":function(a,s){return a.equals(s)},"Complex, Complex":function(a,s){return ewe(a,s,t.epsilon)}},n)});Le(Uw,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Uw,{"number, number":function(i,a){return Wo(i,a,t.epsilon)}})});var nwe="SparseMatrix",iwe=["typed","equalScalar","Matrix"],awe=Le(nwe,iwe,r=>{var{typed:e,equalScalar:t,Matrix:n}=r;function i(p,y){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(y&&!ho(y))throw new Error("Invalid datatype: "+y);if(Lr(p))a(this,p,y);else if(p&&ti(p.index)&&ti(p.ptr)&&ti(p.size))this._values=p.values,this._index=p.index,this._ptr=p.ptr,this._size=p.size,this._datatype=y||p.datatype;else if(ti(p))s(this,p,y);else{if(p)throw new TypeError("Unsupported type of data ("+Si(p)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=y}}function a(p,y,v){y.type==="SparseMatrix"?(p._values=y._values?Yr(y._values):void 0,p._index=Yr(y._index),p._ptr=Yr(y._ptr),p._size=Yr(y._size),p._datatype=v||y._datatype):s(p,y.valueOf(),v||y._datatype)}function s(p,y,v){p._values=[],p._index=[],p._ptr=[],p._datatype=v;var w=y.length,x=0,b=t,C=0;if(ho(v)&&(b=e.find(t,[v,v])||t,C=e.convert(0,v)),w>0){var S=0;do{p._ptr.push(p._index.length);for(var I=0;I<w;I++){var B=y[I];if(ti(B)){if(S===0&&x<B.length&&(x=B.length),S<B.length){var T=B[S];b(T,C)||(p._values.push(T),p._index.push(I))}}else S===0&&x<1&&(x=1),b(B,C)||(p._values.push(B),p._index.push(I))}S++}while(S<x)}p._ptr.push(p._index.length),p._size=[w,x]}i.prototype=new n,i.prototype.createSparseMatrix=function(p,y){return new i(p,y)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return c1(this._values,Si)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(p,y){return new i(p,y)},i.prototype.density=function(){var p=this._size[0],y=this._size[1];return p!==0&&y!==0?this._index.length/(p*y):0},i.prototype.subset=function(p,y,v){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,p);case 2:case 3:return l(this,p,y,v);default:throw new SyntaxError("Wrong number of arguments")}};function o(p,y){if(!j_(y))throw new TypeError("Invalid index");var v=y.isScalar();if(v)return p.get(y.min());var w=y.size();if(w.length!==p._size.length)throw new mn(w.length,p._size.length);var x,b,C,S,I=y.min(),B=y.max();for(x=0,b=p._size.length;x<b;x++)Ei(I[x],p._size[x]),Ei(B[x],p._size[x]);var T=p._values,M=p._index,F=p._ptr,N=y.dimension(0),O=y.dimension(1),L=[],G=[];N.forEach(function(Q,re){G[Q]=re[0],L[Q]=!0});var R=T?[]:void 0,U=[],W=[];return O.forEach(function(Q){for(W.push(U.length),C=F[Q],S=F[Q+1];C<S;C++)x=M[C],L[x]===!0&&(U.push(G[x]),R&&R.push(T[C]))}),W.push(U.length),new i({values:R,index:U,ptr:W,size:w,datatype:p._datatype})}function l(p,y,v,w){if(!y||y.isIndex!==!0)throw new TypeError("Invalid index");var x=y.size(),b=y.isScalar(),C;if(Lr(v)?(C=v.size(),v=v.toArray()):C=en(v),b){if(C.length!==0)throw new TypeError("Scalar expected");p.set(y.min(),v,w)}else{if(x.length!==1&&x.length!==2)throw new mn(x.length,p._size.length,"<");if(C.length<x.length){for(var S=0,I=0;x[S]===1&&C[S]===1;)S++;for(;x[S]===1;)I++,S++;v=zQ(v,x.length,I,C)}if(!Vd(x,C))throw new mn(x,C,">");if(x.length===1){var B=y.dimension(0);B.forEach(function(F,N){Ei(F),p.set([F,0],v[N[0]],w)})}else{var T=y.dimension(0),M=y.dimension(1);T.forEach(function(F,N){Ei(F),M.forEach(function(O,L){Ei(O),p.set([F,O],v[N[0]][L[0]],w)})})}}return p}i.prototype.get=function(p){if(!ti(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new mn(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var y=p[0],v=p[1];Ei(y,this._size[0]),Ei(v,this._size[1]);var w=u(y,this._ptr[v],this._ptr[v+1],this._index);return w<this._ptr[v+1]&&this._index[w]===y?this._values[w]:0},i.prototype.set=function(p,y,v){if(!ti(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new mn(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var w=p[0],x=p[1],b=this._size[0],C=this._size[1],S=t,I=0;ho(this._datatype)&&(S=e.find(t,[this._datatype,this._datatype])||t,I=e.convert(0,this._datatype)),(w>b-1||x>C-1)&&(f(this,Math.max(w+1,b),Math.max(x+1,C),v),b=this._size[0],C=this._size[1]),Ei(w,b),Ei(x,C);var B=u(w,this._ptr[x],this._ptr[x+1],this._index);return B<this._ptr[x+1]&&this._index[B]===w?S(y,I)?c(B,x,this._values,this._index,this._ptr):this._values[B]=y:S(y,I)||h(B,w,x,y,this._values,this._index,this._ptr),this};function u(p,y,v,w){if(v-y===0)return v;for(var x=y;x<v;x++)if(w[x]===p)return x;return y}function c(p,y,v,w,x){v.splice(p,1),w.splice(p,1);for(var b=y+1;b<x.length;b++)x[b]--}function h(p,y,v,w,x,b,C){x.splice(p,0,w),b.splice(p,0,y);for(var S=v+1;S<C.length;S++)C[S]++}i.prototype.resize=function(p,y,v){if(!Su(p))throw new TypeError("Array or Matrix expected");var w=p.valueOf().map(b=>Array.isArray(b)&&b.length===1?b[0]:b);if(w.length!==2)throw new Error("Only two dimensions matrix are supported");w.forEach(function(b){if(!an(b)||!Sr(b)||b<0)throw new TypeError("Invalid size, must contain positive integers (size: "+pn(w)+")")});var x=v?this.clone():this;return f(x,w[0],w[1],y)};function f(p,y,v,w){var x=w||0,b=t,C=0;ho(p._datatype)&&(b=e.find(t,[p._datatype,p._datatype])||t,C=e.convert(0,p._datatype),x=e.convert(x,p._datatype));var S=!b(x,C),I=p._size[0],B=p._size[1],T,M,F;if(v>B){for(M=B;M<v;M++)if(p._ptr[M]=p._values.length,S)for(T=0;T<I;T++)p._values.push(x),p._index.push(T);p._ptr[v]=p._values.length}else v<B&&(p._ptr.splice(v+1,B-v),p._values.splice(p._ptr[v],p._values.length),p._index.splice(p._ptr[v],p._index.length));if(B=v,y>I){if(S){var N=0;for(M=0;M<B;M++){p._ptr[M]=p._ptr[M]+N,F=p._ptr[M+1]+N;var O=0;for(T=I;T<y;T++,O++)p._values.splice(F+O,0,x),p._index.splice(F+O,0,T),N++}p._ptr[B]=p._values.length}}else if(y<I){var L=0;for(M=0;M<B;M++){p._ptr[M]=p._ptr[M]-L;var G=p._ptr[M],R=p._ptr[M+1]-L;for(F=G;F<R;F++)T=p._index[F],T>y-1&&(p._values.splice(F,1),p._index.splice(F,1),L++)}p._ptr[M]=p._values.length}return p._size[0]=y,p._size[1]=v,p}i.prototype.reshape=function(p,y){if(!ti(p))throw new TypeError("Array expected");if(p.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");p.forEach(function(Q){if(!an(Q)||!Sr(Q)||Q<=-2||Q===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+pn(p)+")")});var v=this._size[0]*this._size[1];p=n3(p,v);var w=p[0]*p[1];if(v!==w)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var x=y?this.clone():this;if(this._size[0]===p[0]&&this._size[1]===p[1])return x;for(var b=[],C=0;C<x._ptr.length;C++)for(var S=0;S<x._ptr[C+1]-x._ptr[C];S++)b.push(C);for(var I=x._values.slice(),B=x._index.slice(),T=0;T<x._index.length;T++){var M=B[T],F=b[T],N=M*x._size[1]+F;b[T]=N%p[1],B[T]=Math.floor(N/p[1])}x._values.length=0,x._index.length=0,x._ptr.length=p[1]+1,x._size=p.slice();for(var O=0;O<x._ptr.length;O++)x._ptr[O]=0;for(var L=0;L<I.length;L++){var G=B[L],R=b[L],U=I[L],W=u(G,x._ptr[R],x._ptr[R+1],x._index);h(W,G,R,U,x._values,x._index,x._ptr)}return x},i.prototype.clone=function(){var p=new i({values:this._values?Yr(this._values):void 0,index:Yr(this._index),ptr:Yr(this._ptr),size:Yr(this._size),datatype:this._datatype});return p},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(p,y){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var v=this,w=this._size[0],x=this._size[1],b=VQ(p),C=function(I,B,T){return b===1?p(I):b===2?p(I,[B,T]):p(I,[B,T],v)};return A(this,0,w-1,0,x-1,C,y)};function A(p,y,v,w,x,b,C){var S=[],I=[],B=[],T=t,M=0;ho(p._datatype)&&(T=e.find(t,[p._datatype,p._datatype])||t,M=e.convert(0,p._datatype));for(var F=function(z,K,J){z=b(z,K,J),T(z,M)||(S.push(z),I.push(K))},N=w;N<=x;N++){B.push(S.length);var O=p._ptr[N],L=p._ptr[N+1];if(C)for(var G=O;G<L;G++){var R=p._index[G];R>=y&&R<=v&&F(p._values[G],R-y,N-w)}else{for(var U={},W=O;W<L;W++){var Q=p._index[W];U[Q]=p._values[W]}for(var re=y;re<=v;re++){var oe=re in U?U[re]:0;F(oe,re-y,N-w)}}}return B.push(S.length),new i({values:S,index:I,ptr:B,size:[v-y+1,x-w+1]})}i.prototype.forEach=function(p,y){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var v=this,w=this._size[0],x=this._size[1],b=0;b<x;b++){var C=this._ptr[b],S=this._ptr[b+1];if(y)for(var I=C;I<S;I++){var B=this._index[I];p(this._values[I],[B,b],v)}else{for(var T={},M=C;M<S;M++){var F=this._index[M];T[F]=this._values[M]}for(var N=0;N<w;N++){var O=N in T?T[N]:0;p(O,[N,b],v)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var p=this._size[1],y=0;y<p;y++)for(var v=this._ptr[y],w=this._ptr[y+1],x=v;x<w;x++){var b=this._index[x];yield{value:this._values[x],index:[b,y]}}},i.prototype.toArray=function(){return d(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return d(this._values,this._index,this._ptr,this._size,!1)};function d(p,y,v,w,x){var b=w[0],C=w[1],S=[],I,B;for(I=0;I<b;I++)for(S[I]=[],B=0;B<C;B++)S[I][B]=0;for(B=0;B<C;B++)for(var T=v[B],M=v[B+1],F=T;F<M;F++)I=y[F],S[I][B]=p?x?Yr(p[F]):p[F]:1;return S}return i.prototype.format=function(p){for(var y=this._size[0],v=this._size[1],w=this.density(),x="Sparse Matrix ["+pn(y,p)+" x "+pn(v,p)+"] density: "+pn(w,p)+`
`,b=0;b<v;b++)for(var C=this._ptr[b],S=this._ptr[b+1],I=C;I<S;I++){var B=this._index[I];x+=`
    (`+pn(B,p)+", "+pn(b,p)+") ==> "+(this._values?pn(this._values[I],p):"X")}return x},i.prototype.toString=function(){return pn(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(p){if(p){if(sn(p)&&(p=p.toNumber()),!an(p)||!Sr(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var y=p>0?p:0,v=p<0?-p:0,w=this._size[0],x=this._size[1],b=Math.min(w-v,x-y),C=[],S=[],I=[];I[0]=0;for(var B=y;B<x&&C.length<b;B++)for(var T=this._ptr[B],M=this._ptr[B+1],F=T;F<M;F++){var N=this._index[F];if(N===B-y+v){C.push(this._values[F]),S[C.length-1]=N-v;break}}return I.push(C.length),new i({values:C,index:S,ptr:I,size:[b,1]})},i.fromJSON=function(p){return new i(p)},i.diagonal=function(p,y,v,w,x){if(!ti(p))throw new TypeError("Array expected, size parameter");if(p.length!==2)throw new Error("Only two dimensions matrix are supported");if(p=p.map(function(Q){if(sn(Q)&&(Q=Q.toNumber()),!an(Q)||!Sr(Q)||Q<1)throw new Error("Size values must be positive integers");return Q}),v){if(sn(v)&&(v=v.toNumber()),!an(v)||!Sr(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var b=t,C=0;ho(x)&&(b=e.find(t,[x,x])||t,C=e.convert(0,x));var S=v>0?v:0,I=v<0?-v:0,B=p[0],T=p[1],M=Math.min(B-I,T-S),F;if(ti(y)){if(y.length!==M)throw new Error("Invalid value array length");F=function(re){return y[re]}}else if(Lr(y)){var N=y.size();if(N.length!==1||N[0]!==M)throw new Error("Invalid matrix length");F=function(re){return y.get([re])}}else F=function(){return y};for(var O=[],L=[],G=[],R=0;R<T;R++){G.push(O.length);var U=R-S;if(U>=0&&U<M){var W=F(U);b(W,C)||(L.push(U+I),O.push(W))}}return G.push(O.length),new i({values:O,index:L,ptr:G,size:[B,T]})},i.prototype.swapRows=function(p,y){if(!an(p)||!Sr(p)||!an(y)||!Sr(y))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Ei(p,this._size[0]),Ei(y,this._size[0]),i._swapRows(p,y,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(p,y,v,w,x){for(var b=w[p],C=w[p+1],S=b;S<C;S++)x(v[S],y[S])},i._swapRows=function(p,y,v,w,x,b){for(var C=0;C<v;C++){var S=b[C],I=b[C+1],B=u(p,S,I,x),T=u(y,S,I,x);if(B<I&&T<I&&x[B]===p&&x[T]===y){if(w){var M=w[B];w[B]=w[T],w[T]=M}continue}if(B<I&&x[B]===p&&(T>=I||x[T]!==y)){var F=w?w[B]:void 0;x.splice(T,0,y),w&&w.splice(T,0,F),x.splice(T<=B?B+1:B,1),w&&w.splice(T<=B?B+1:B,1);continue}if(T<I&&x[T]===y&&(B>=I||x[B]!==p)){var N=w?w[T]:void 0;x.splice(B,0,p),w&&w.splice(B,0,N),x.splice(B<=T?T+1:T,1),w&&w.splice(B<=T?T+1:T,1)}}},i},{isClass:!0}),swe="number",owe=["typed"];function lwe(r){var e=r.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],i=e[3];return{input:r,radix:t,integerPart:n,fractionalPart:i}}else return null}function uwe(r){for(var e=parseInt(r.integerPart,r.radix),t=0,n=0;n<r.fractionalPart.length;n++){var i=parseInt(r.fractionalPart[n],r.radix);t+=i/Math.pow(r.radix,n+1)}var a=e+t;if(isNaN(a))throw new SyntaxError('String "'+r.input+'" is not a valid number');return a}var cwe=Le(swe,owe,r=>{var{typed:e}=r,t=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var a=lwe(i);if(a)return uwe(a);var s=0,o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(s=Number(o[2]),i=o[1]);var l=Number(i);if(isNaN(l))throw new SyntaxError('String "'+i+'" is not a valid number');if(o){if(l>2**s-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));l>=2**(s-1)&&(l=l-2**s)}return l},BigNumber:function(i){return i.toNumber()},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),null:function(i){return 0},"Unit, string | Unit":function(i,a){return i.toNumber(a)},"Array | Matrix":e.referToSelf(n=>i=>vn(i,n))});return t.fromJSON=function(n){return parseFloat(n.value)},t}),FL="string",hwe=["typed"],fwe=Le(FL,hwe,r=>{var{typed:e}=r;return e(FL,{"":function(){return""},number:Dd,null:function(n){return"null"},boolean:function(n){return n+""},string:function(n){return n},"Array | Matrix":e.referToSelf(t=>n=>vn(n,t)),any:function(n){return String(n)}})}),ML="boolean",Awe=["typed"],dwe=Le(ML,Awe,r=>{var{typed:e}=r;return e(ML,{"":function(){return!1},boolean:function(n){return n},number:function(n){return!!n},null:function(n){return!1},BigNumber:function(n){return!n.isZero()},string:function(n){var i=n.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;var a=Number(n);if(n!==""&&!isNaN(a))return!!a;throw new Error('Cannot convert "'+n+'" to a boolean')},"Array | Matrix":e.referToSelf(t=>n=>vn(n,t))})}),gwe="bignumber",pwe=["typed","BigNumber"],mwe=Le(gwe,pwe,r=>{var{typed:e,BigNumber:t}=r;return e("bignumber",{"":function(){return new t(0)},number:function(i){return new t(i+"")},string:function(i){var a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(a){var s=a[2],o=t(a[1]),l=new t(2).pow(Number(s));if(o.gt(l.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var u=new t(2).pow(Number(s)-1);return o.gte(u)?o.sub(l):o}return new t(i)},BigNumber:function(i){return i},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),Fraction:function(i){return new t(i.n).div(i.d).times(i.s)},null:function(i){return new t(0)},"Array | Matrix":e.referToSelf(n=>i=>vn(i,n))})}),vwe="complex",ywe=["typed","Complex"],xwe=Le(vwe,ywe,r=>{var{typed:e,Complex:t}=r;return e("complex",{"":function(){return t.ZERO},number:function(i){return new t(i,0)},"number, number":function(i,a){return new t(i,a)},"BigNumber, BigNumber":function(i,a){return new t(i.toNumber(),a.toNumber())},Fraction:function(i){return new t(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return t(i)},null:function(i){return t(0)},Object:function(i){if("re"in i&&"im"in i)return new t(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new t(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(n=>i=>vn(i,n))})}),wwe="fraction",_we=["typed","Fraction"],Ewe=Le(wwe,_we,r=>{var{typed:e,Fraction:t}=r;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new t(i)},string:function(i){return new t(i)},"number, number":function(i,a){return new t(i,a)},null:function(i){return new t(0)},BigNumber:function(i){return new t(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),Object:function(i){return new t(i)},"Array | Matrix":e.referToSelf(n=>i=>vn(i,n))})}),LL="matrix",bwe=["typed","Matrix","DenseMatrix","SparseMatrix"],Cwe=Le(LL,bwe,r=>{var{typed:e,Matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(LL,{"":function(){return a([])},string:function(o){return a([],o)},"string, string":function(o,l){return a([],o,l)},Array:function(o){return a(o)},Matrix:function(o){return a(o,o.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(s,o,l){if(o==="dense"||o==="default"||o===void 0)return new n(s,l);if(o==="sparse")return new i(s,l);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),DL="matrixFromFunction",Swe=["typed","matrix","isZero"],Bwe=Le(DL,Swe,r=>{var{typed:e,matrix:t,isZero:n}=r;return e(DL,{"Array | Matrix, function, string, string":function(s,o,l,u){return i(s,o,l,u)},"Array | Matrix, function, string":function(s,o,l){return i(s,o,l)},"Matrix, function":function(s,o){return i(s,o,"dense")},"Array, function":function(s,o){return i(s,o,"dense").toArray()},"Array | Matrix, string, function":function(s,o,l){return i(s,l,o)},"Array | Matrix, string, string, function":function(s,o,l,u){return i(s,u,o,l)}});function i(a,s,o,l){var u;return l!==void 0?u=t(o,l):u=t(o),u.resize(a),u.forEach(function(c,h){var f=s(h);n(f)||u.set(h,f)}),u}}),kL="matrixFromRows",Twe=["typed","matrix","flatten","size"],Nwe=Le(kL,Twe,r=>{var{typed:e,matrix:t,flatten:n,size:i}=r;return e(kL,{"...Array":function(l){return a(l)},"...Matrix":function(l){return t(a(l.map(u=>u.toArray())))}});function a(o){if(o.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var l=s(o[0]),u=[];for(var c of o){var h=s(c);if(h!==l)throw new TypeError("The vectors had different length: "+(l|0)+" ≠ "+(h|0));u.push(n(c))}return u}function s(o){var l=i(o);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),RL="matrixFromColumns",Iwe=["typed","matrix","flatten","size"],Fwe=Le(RL,Iwe,r=>{var{typed:e,matrix:t,flatten:n,size:i}=r;return e(RL,{"...Array":function(l){return a(l)},"...Matrix":function(l){return t(a(l.map(u=>u.toArray())))}});function a(o){if(o.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var l=s(o[0]),u=[],c=0;c<l;c++)u[c]=[];for(var h of o){var f=s(h);if(f!==l)throw new TypeError("The vectors had different length: "+(l|0)+" ≠ "+(f|0));for(var A=n(h),d=0;d<l;d++)u[d].push(A[d])}return u}function s(o){var l=i(o);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),OL="splitUnit",Mwe=["typed"],Lwe=Le(OL,Mwe,r=>{var{typed:e}=r;return e(OL,{"Unit, Array":function(n,i){return n.splitUnit(i)}})}),PL="unaryMinus",Dwe=["typed"],kwe=Le(PL,Dwe,r=>{var{typed:e}=r;return e(PL,{number:eG,"Complex | BigNumber | Fraction":t=>t.neg(),Unit:e.referToSelf(t=>n=>{var i=n.clone();return i.value=e.find(t,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(t=>n=>vn(n,t))})}),UL="unaryPlus",Rwe=["typed","config","BigNumber"],Owe=Le(UL,Rwe,r=>{var{typed:e,config:t,BigNumber:n}=r;return e(UL,{number:tG,Complex:function(a){return a},BigNumber:function(a){return a},Fraction:function(a){return a},Unit:function(a){return a.clone()},"Array | Matrix":e.referToSelf(i=>a=>vn(a,i)),"boolean | string":function(a){return t.number==="BigNumber"?new n(+a):+a}})}),QL="abs",Pwe=["typed"],Uwe=Le(QL,Pwe,r=>{var{typed:e}=r;return e(QL,{number:YQ,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),"Array | Matrix":e.referToSelf(t=>n=>vn(n,t))})}),GL="apply",Qwe=["typed","isInteger"],a3=Le(GL,Qwe,r=>{var{typed:e,isInteger:t}=r;return e(GL,{"Array | Matrix, number | BigNumber, function":function(i,a,s){if(!t(a))throw new TypeError("Integer number expected for dimension");var o=Array.isArray(i)?en(i):i.size();if(a<0||a>=o.length)throw new Ac(a,o.length);return Lr(i)?i.create(Qw(i.valueOf(),a,s)):Qw(i,a,s)}})});function Qw(r,e,t){var n,i,a;if(e<=0)if(Array.isArray(r[0])){for(a=Gwe(r),i=[],n=0;n<a.length;n++)i[n]=Qw(a[n],e-1,t);return i}else return t(r);else{for(i=[],n=0;n<r.length;n++)i[n]=Qw(r[n],e-1,t);return i}}function Gwe(r){var e=r.length,t=r[0].length,n,i,a=[];for(i=0;i<t;i++){var s=[];for(n=0;n<e;n++)s.push(r[n][i]);a.push(s)}return a}var HL="addScalar",Hwe=["typed"],zwe=Le(HL,Hwe,r=>{var{typed:e}=r;return e(HL,{"number, number":XQ,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(t,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),zL="subtractScalar",qwe=["typed"],jwe=Le(zL,qwe,r=>{var{typed:e}=r;return e(zL,{"number, number":ZQ,"Complex, Complex":function(n,i){return n.sub(i)},"BigNumber, BigNumber":function(n,i){return n.minus(i)},"Fraction, Fraction":function(n,i){return n.sub(i)},"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(t,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),qL="cbrt",$we=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],Kwe=Le(qL,$we,r=>{var{config:e,typed:t,isNegative:n,unaryMinus:i,matrix:a,Complex:s,BigNumber:o,Fraction:l}=r;return t(qL,{number:Vm,Complex:u,"Complex, boolean":u,BigNumber:function(f){return f.cbrt()},Unit:c});function u(h,f){var A=h.arg()/3,d=h.abs(),p=new s(Vm(d),0).mul(new s(0,A).exp());if(f){var y=[p,new s(Vm(d),0).mul(new s(0,A+Math.PI*2/3).exp()),new s(Vm(d),0).mul(new s(0,A-Math.PI*2/3).exp())];return e.matrix==="Array"?y:a(y)}else return p}function c(h){if(h.value&&rf(h.value)){var f=h.clone();return f.value=1,f=f.pow(1/3),f.value=u(h.value),f}else{var A=n(h.value);A&&(h.value=i(h.value));var d;sn(h.value)?d=new o(1).div(3):O1(h.value)?d=new l(1,3):d=1/3;var p=h.pow(d);return A&&(p.value=i(p.value)),p}}}),Vwe="matAlgo11xS0s",Wwe=["typed","equalScalar"],$s=Le(Vwe,Wwe,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s,o){var l=i._values,u=i._index,c=i._ptr,h=i._size,f=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var A=h[0],d=h[1],p,y=t,v=0,w=s;typeof f=="string"&&(p=f,y=e.find(t,[p,p]),v=e.convert(0,p),a=e.convert(a,p),w=e.find(s,[p,p]));for(var x=[],b=[],C=[],S=0;S<d;S++){C[S]=b.length;for(var I=c[S],B=c[S+1],T=I;T<B;T++){var M=u[T],F=o?w(a,l[T]):w(l[T],a);y(F,v)||(b.push(M),x.push(F))}}return C[d]=b.length,i.createSparseMatrix({values:x,index:b,ptr:C,size:[A,d],datatype:p})}}),Ywe="matAlgo12xSfs",Xwe=["typed","DenseMatrix"],ss=Le(Ywe,Xwe,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,a,s,o){var l=i._values,u=i._index,c=i._ptr,h=i._size,f=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var A=h[0],d=h[1],p,y=s;typeof f=="string"&&(p=f,a=e.convert(a,p),y=e.find(s,[p,p]));for(var v=[],w=[],x=[],b=0;b<d;b++){for(var C=b+1,S=c[b],I=c[b+1],B=S;B<I;B++){var T=u[B];w[T]=l[B],x[T]=C}for(var M=0;M<A;M++)b===0&&(v[M]=[]),x[M]===C?v[M][b]=o?y(a,w[M]):y(w[M],a):v[M][b]=o?y(a,0):y(0,a)}return new t({data:v,size:[A,d],datatype:p})}}),Zwe="matAlgo14xDs",Jwe=["typed"],gc=Le(Zwe,Jwe,r=>{var{typed:e}=r;return function(i,a,s,o){var l=i._data,u=i._size,c=i._datatype,h,f=s;typeof c=="string"&&(h=c,a=e.convert(a,h),f=e.find(s,[h,h]));var A=u.length>0?t(f,0,u,u[0],l,a,o):[];return i.createDenseMatrix({data:A,size:Yr(u),datatype:h})};function t(n,i,a,s,o,l,u){var c=[];if(i===a.length-1)for(var h=0;h<s;h++)c[h]=u?n(l,o[h]):n(o[h],l);else for(var f=0;f<s;f++)c[f]=t(n,i+1,a,a[i+1],o[f],l,u);return c}}),N5="ceil",e_e=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],t_e=Le(N5,["typed","config","round"],r=>{var{typed:e,config:t,round:n}=r;return e(N5,{number:function(a){return Wo(a,n(a),t.epsilon)?n(a):Math.ceil(a)},"number, number":function(a,s){if(Wo(a,n(a,s),t.epsilon))return n(a,s);var[o,l]="".concat(a,"e").split("e"),u=Math.ceil(Number("".concat(o,"e").concat(Number(l)+s)));return[o,l]="".concat(u,"e").split("e"),Number("".concat(o,"e").concat(Number(l)-s))}})}),r_e=Le(N5,e_e,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o}=r,l=$s({typed:e,equalScalar:a}),u=ss({typed:e,DenseMatrix:o}),c=gc({typed:e}),h=t_e({typed:e,config:t,round:n});return e("ceil",{number:h.signatures.number,"number,number":h.signatures["number,number"],Complex:function(A){return A.ceil()},"Complex, number":function(A,d){return A.ceil(d)},"Complex, BigNumber":function(A,d){return A.ceil(d.toNumber())},BigNumber:function(A){return Bu(A,n(A),t.epsilon)?n(A):A.ceil()},"BigNumber, BigNumber":function(A,d){return Bu(A,n(A,d),t.epsilon)?n(A,d):A.toDecimalPlaces(d.toNumber(),RA.ROUND_CEIL)},Fraction:function(A){return A.ceil()},"Fraction, number":function(A,d){return A.ceil(d)},"Fraction, BigNumber":function(A,d){return A.ceil(d.toNumber())},"Array | Matrix":e.referToSelf(f=>A=>vn(A,f)),"Array, number | BigNumber":e.referToSelf(f=>(A,d)=>vn(A,p=>f(p,d))),"SparseMatrix, number | BigNumber":e.referToSelf(f=>(A,d)=>l(A,d,f,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(f=>(A,d)=>c(A,d,f,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(f=>(A,d)=>c(i(d),A,f,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(f=>(A,d)=>a(A,0)?s(d.size(),d.storage()):d.storage()==="dense"?c(d,A,f,!0):u(d,A,f,!0))})}),jL="cube",n_e=["typed"],i_e=Le(jL,n_e,r=>{var{typed:e}=r;return e(jL,{number:rG,Complex:function(n){return n.mul(n).mul(n)},BigNumber:function(n){return n.times(n).times(n)},Fraction:function(n){return n.pow(3)},Unit:function(n){return n.pow(3)}})}),$L="exp",a_e=["typed"],s_e=Le($L,a_e,r=>{var{typed:e}=r;return e($L,{number:nG,Complex:function(n){return n.exp()},BigNumber:function(n){return n.exp()}})}),KL="expm1",o_e=["typed","Complex"],l_e=Le(KL,o_e,r=>{var{typed:e,Complex:t}=r;return e(KL,{number:iG,Complex:function(i){var a=Math.exp(i.re);return new t(a*Math.cos(i.im)-1,a*Math.sin(i.im))},BigNumber:function(i){return i.exp().minus(1)}})}),I5="fix",u_e=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],c_e=Le(I5,["typed","ceil","floor"],r=>{var{typed:e,ceil:t,floor:n}=r;return e(I5,{number:function(a){return a>0?n(a):t(a)},"number, number":function(a,s){return a>0?n(a,s):t(a,s)}})}),h_e=Le(I5,u_e,r=>{var{typed:e,Complex:t,matrix:n,ceil:i,floor:a,equalScalar:s,zeros:o,DenseMatrix:l}=r,u=ss({typed:e,DenseMatrix:l}),c=gc({typed:e}),h=c_e({typed:e,ceil:i,floor:a});return e("fix",{number:h.signatures.number,"number, number | BigNumber":h.signatures["number,number"],Complex:function(A){return new t(A.re>0?Math.floor(A.re):Math.ceil(A.re),A.im>0?Math.floor(A.im):Math.ceil(A.im))},"Complex, number":function(A,d){return new t(A.re>0?a(A.re,d):i(A.re,d),A.im>0?a(A.im,d):i(A.im,d))},"Complex, BigNumber":function(A,d){var p=d.toNumber();return new t(A.re>0?a(A.re,p):i(A.re,p),A.im>0?a(A.im,p):i(A.im,p))},BigNumber:function(A){return A.isNegative()?i(A):a(A)},"BigNumber, number | BigNumber":function(A,d){return A.isNegative()?i(A,d):a(A,d)},Fraction:function(A){return A.s<0?A.ceil():A.floor()},"Fraction, number | BigNumber":function(A,d){return A.s<0?i(A,d):a(A,d)},"Array | Matrix":e.referToSelf(f=>A=>vn(A,f)),"Array | Matrix, number | BigNumber":e.referToSelf(f=>(A,d)=>vn(A,p=>f(p,d))),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(f=>(A,d)=>c(n(d),A,f,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(f=>(A,d)=>s(A,0)?o(d.size(),d.storage()):d.storage()==="dense"?c(d,A,f,!0):u(d,A,f,!0))})}),F5="floor",f_e=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],A_e=Le(F5,["typed","config","round"],r=>{var{typed:e,config:t,round:n}=r;return e(F5,{number:function(a){return Wo(a,n(a),t.epsilon)?n(a):Math.floor(a)},"number, number":function(a,s){if(Wo(a,n(a,s),t.epsilon))return n(a,s);var[o,l]="".concat(a,"e").split("e"),u=Math.floor(Number("".concat(o,"e").concat(Number(l)+s)));return[o,l]="".concat(u,"e").split("e"),Number("".concat(o,"e").concat(Number(l)-s))}})}),jG=Le(F5,f_e,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o}=r,l=$s({typed:e,equalScalar:a}),u=ss({typed:e,DenseMatrix:o}),c=gc({typed:e}),h=A_e({typed:e,config:t,round:n});return e("floor",{number:h.signatures.number,"number,number":h.signatures["number,number"],Complex:function(A){return A.floor()},"Complex, number":function(A,d){return A.floor(d)},"Complex, BigNumber":function(A,d){return A.floor(d.toNumber())},BigNumber:function(A){return Bu(A,n(A),t.epsilon)?n(A):A.floor()},"BigNumber, BigNumber":function(A,d){return Bu(A,n(A,d),t.epsilon)?n(A,d):A.toDecimalPlaces(d.toNumber(),RA.ROUND_FLOOR)},Fraction:function(A){return A.floor()},"Fraction, number":function(A,d){return A.floor(d)},"Fraction, BigNumber":function(A,d){return A.floor(d.toNumber())},"Array | Matrix":e.referToSelf(f=>A=>vn(A,f)),"Array, number | BigNumber":e.referToSelf(f=>(A,d)=>vn(A,p=>f(p,d))),"SparseMatrix, number | BigNumber":e.referToSelf(f=>(A,d)=>l(A,d,f,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(f=>(A,d)=>c(A,d,f,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(f=>(A,d)=>c(i(d),A,f,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(f=>(A,d)=>a(A,0)?s(d.size(),d.storage()):d.storage()==="dense"?c(d,A,f,!0):u(d,A,f,!0))})}),d_e="matAlgo02xDS0",g_e=["typed","equalScalar"],pc=Le(d_e,g_e,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s,o){var l=i._data,u=i._size,c=i._datatype||i.getDataType(),h=a._values,f=a._index,A=a._ptr,d=a._size,p=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(u.length!==d.length)throw new mn(u.length,d.length);if(u[0]!==d[0]||u[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");if(!h)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var y=u[0],v=u[1],w,x=t,b=0,C=s;typeof c=="string"&&c===p&&c!=="mixed"&&(w=c,x=e.find(t,[w,w]),b=e.convert(0,w),C=e.find(s,[w,w]));for(var S=[],I=[],B=[],T=0;T<v;T++){B[T]=I.length;for(var M=A[T],F=A[T+1],N=M;N<F;N++){var O=f[N],L=o?C(h[N],l[O][T]):C(l[O][T],h[N]);x(L,b)||(I.push(O),S.push(L))}}return B[v]=I.length,a.createSparseMatrix({values:S,index:I,ptr:B,size:[y,v],datatype:c===i._datatype&&p===a._datatype?w:void 0})}}),p_e="matAlgo03xDSf",m_e=["typed"],Zo=Le(p_e,m_e,r=>{var{typed:e}=r;return function(n,i,a,s){var o=n._data,l=n._size,u=n._datatype||n.getDataType(),c=i._values,h=i._index,f=i._ptr,A=i._size,d=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==A.length)throw new mn(l.length,A.length);if(l[0]!==A[0]||l[1]!==A[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+A+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=l[0],y=l[1],v,w=0,x=a;typeof u=="string"&&u===d&&u!=="mixed"&&(v=u,w=e.convert(0,v),x=e.find(a,[v,v]));for(var b=[],C=0;C<p;C++)b[C]=[];for(var S=[],I=[],B=0;B<y;B++){for(var T=B+1,M=f[B],F=f[B+1],N=M;N<F;N++){var O=h[N];S[O]=s?x(c[N],o[O][B]):x(o[O][B],c[N]),I[O]=T}for(var L=0;L<p;L++)I[L]===T?b[L][B]=S[L]:b[L][B]=s?x(w,o[L][B]):x(o[L][B],w)}return n.createDenseMatrix({data:b,size:[p,y],datatype:u===n._datatype&&d===i._datatype?v:void 0})}}),v_e="matAlgo05xSfSf",y_e=["typed","equalScalar"],rE=Le(v_e,y_e,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s){var o=i._values,l=i._index,u=i._ptr,c=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),f=a._values,A=a._index,d=a._ptr,p=a._size,y=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==p.length)throw new mn(c.length,p.length);if(c[0]!==p[0]||c[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+p+")");var v=c[0],w=c[1],x,b=t,C=0,S=s;typeof h=="string"&&h===y&&h!=="mixed"&&(x=h,b=e.find(t,[x,x]),C=e.convert(0,x),S=e.find(s,[x,x]));var I=o&&f?[]:void 0,B=[],T=[],M=I?[]:void 0,F=I?[]:void 0,N=[],O=[],L,G,R,U;for(G=0;G<w;G++){T[G]=B.length;var W=G+1;for(R=u[G],U=u[G+1];R<U;R++)L=l[R],B.push(L),N[L]=W,M&&(M[L]=o[R]);for(R=d[G],U=d[G+1];R<U;R++)L=A[R],N[L]!==W&&B.push(L),O[L]=W,F&&(F[L]=f[R]);if(I)for(R=T[G];R<B.length;){L=B[R];var Q=N[L],re=O[L];if(Q===W||re===W){var oe=Q===W?M[L]:C,P=re===W?F[L]:C,z=S(oe,P);b(z,C)?B.splice(R,1):(I.push(z),R++)}}}return T[w]=B.length,i.createSparseMatrix({values:I,index:B,ptr:T,size:[v,w],datatype:h===i._datatype&&y===a._datatype?x:void 0})}}),x_e="matAlgo13xDD",w_e=["typed"],__e=Le(x_e,w_e,r=>{var{typed:e}=r;return function(i,a,s){var o=i._data,l=i._size,u=i._datatype,c=a._data,h=a._size,f=a._datatype,A=[];if(l.length!==h.length)throw new mn(l.length,h.length);for(var d=0;d<l.length;d++){if(l[d]!==h[d])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");A[d]=l[d]}var p,y=s;typeof u=="string"&&u===f&&(p=u,y=e.find(s,[p,p]));var v=A.length>0?t(y,0,A,A[0],o,c):[];return i.createDenseMatrix({data:v,size:A,datatype:p})};function t(n,i,a,s,o,l){var u=[];if(i===a.length-1)for(var c=0;c<s;c++)u[c]=n(o[c],l[c]);else for(var h=0;h<s;h++)u[h]=t(n,i+1,a,a[i+1],o[h],l[h]);return u}}),E_e="broadcast",b_e=["concat"],C_e=Le(E_e,b_e,r=>{var{concat:e}=r;return function(i,a){var s=Math.max(i._size.length,a._size.length);if(i._size.length===a._size.length&&i._size.every((d,p)=>d===a._size[p]))return[i,a];for(var o=t(i._size,s,0),l=t(a._size,s,0),u=[],c=0;c<s;c++)u[c]=Math.max(o[c],l[c]);kw(o,u),kw(l,u);var h=i.clone(),f=a.clone();h._size.length<s?h.reshape(t(h._size,s,1)):f._size.length<s&&f.reshape(t(f._size,s,1));for(var A=0;A<s;A++)h._size[A]<u[A]&&(h=n(h,u[A],A)),f._size[A]<u[A]&&(f=n(f,u[A],A));return[h,f]};function t(i,a,s){return[...Array(a-i.length).fill(s),...i]}function n(i,a,s){return e(...Array(a).fill(i),s)}}),S_e="matrixAlgorithmSuite",B_e=["typed","matrix","concat"],Li=Le(S_e,B_e,r=>{var{typed:e,matrix:t,concat:n}=r,i=__e({typed:e}),a=gc({typed:e}),s=C_e({concat:n});return function(l){var u=l.elop,c=l.SD||l.DS,h;u?(h={"DenseMatrix, DenseMatrix":(p,y)=>i(...s(p,y),u),"Array, Array":(p,y)=>i(...s(t(p),t(y)),u).valueOf(),"Array, DenseMatrix":(p,y)=>i(...s(t(p),y),u),"DenseMatrix, Array":(p,y)=>i(...s(p,t(y)),u)},l.SS&&(h["SparseMatrix, SparseMatrix"]=(p,y)=>l.SS(...s(p,y),u,!1)),l.DS&&(h["DenseMatrix, SparseMatrix"]=(p,y)=>l.DS(...s(p,y),u,!1),h["Array, SparseMatrix"]=(p,y)=>l.DS(...s(t(p),y),u,!1)),c&&(h["SparseMatrix, DenseMatrix"]=(p,y)=>c(...s(y,p),u,!0),h["SparseMatrix, Array"]=(p,y)=>c(...s(t(y),p),u,!0))):(h={"DenseMatrix, DenseMatrix":e.referToSelf(p=>(y,v)=>i(...s(y,v),p)),"Array, Array":e.referToSelf(p=>(y,v)=>i(...s(t(y),t(v)),p).valueOf()),"Array, DenseMatrix":e.referToSelf(p=>(y,v)=>i(...s(t(y),v),p)),"DenseMatrix, Array":e.referToSelf(p=>(y,v)=>i(...s(y,t(v)),p))},l.SS&&(h["SparseMatrix, SparseMatrix"]=e.referToSelf(p=>(y,v)=>l.SS(...s(y,v),p,!1))),l.DS&&(h["DenseMatrix, SparseMatrix"]=e.referToSelf(p=>(y,v)=>l.DS(...s(y,v),p,!1)),h["Array, SparseMatrix"]=e.referToSelf(p=>(y,v)=>l.DS(...s(t(y),v),p,!1))),c&&(h["SparseMatrix, DenseMatrix"]=e.referToSelf(p=>(y,v)=>c(...s(v,y),p,!0)),h["SparseMatrix, Array"]=e.referToSelf(p=>(y,v)=>c(...s(t(v),y),p,!0))));var f=l.scalar||"any",A=l.Ds||l.Ss;A&&(u?(h["DenseMatrix,"+f]=(p,y)=>a(p,y,u,!1),h[f+", DenseMatrix"]=(p,y)=>a(y,p,u,!0),h["Array,"+f]=(p,y)=>a(t(p),y,u,!1).valueOf(),h[f+", Array"]=(p,y)=>a(t(y),p,u,!0).valueOf()):(h["DenseMatrix,"+f]=e.referToSelf(p=>(y,v)=>a(y,v,p,!1)),h[f+", DenseMatrix"]=e.referToSelf(p=>(y,v)=>a(v,y,p,!0)),h["Array,"+f]=e.referToSelf(p=>(y,v)=>a(t(y),v,p,!1).valueOf()),h[f+", Array"]=e.referToSelf(p=>(y,v)=>a(t(v),y,p,!0).valueOf())));var d=l.sS!==void 0?l.sS:l.Ss;return u?(l.Ss&&(h["SparseMatrix,"+f]=(p,y)=>l.Ss(p,y,u,!1)),d&&(h[f+", SparseMatrix"]=(p,y)=>d(y,p,u,!0))):(l.Ss&&(h["SparseMatrix,"+f]=e.referToSelf(p=>(y,v)=>l.Ss(y,v,p,!1))),d&&(h[f+", SparseMatrix"]=e.referToSelf(p=>(y,v)=>d(v,y,p,!0)))),u&&u.signatures&&pQ(h,u.signatures),h}}),VL="mod",T_e=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],$G=Le(VL,T_e,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o,concat:l}=r,u=jG({typed:e,config:t,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o}),c=pc({typed:e,equalScalar:a}),h=Zo({typed:e}),f=rE({typed:e,equalScalar:a}),A=$s({typed:e,equalScalar:a}),d=ss({typed:e,DenseMatrix:o}),p=Li({typed:e,matrix:i,concat:l});return e(VL,{"number, number":y,"BigNumber, BigNumber":function(w,x){return x.isZero()?w:w.sub(x.mul(u(w.div(x))))},"Fraction, Fraction":function(w,x){return x.equals(0)?w:w.sub(x.mul(u(w.div(x))))}},p({SS:f,DS:h,SD:c,Ss:A,sS:d}));function y(v,w){return w===0?v:v-w*u(v/w)}}),N_e="matAlgo01xDSid",I_e=["typed"],jA=Le(N_e,I_e,r=>{var{typed:e}=r;return function(n,i,a,s){var o=n._data,l=n._size,u=n._datatype||n.getDataType(),c=i._values,h=i._index,f=i._ptr,A=i._size,d=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==A.length)throw new mn(l.length,A.length);if(l[0]!==A[0]||l[1]!==A[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+A+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=l[0],y=l[1],v=typeof u=="string"&&u!=="mixed"&&u===d?u:void 0,w=v?e.find(a,[v,v]):a,x,b,C=[];for(x=0;x<p;x++)C[x]=[];var S=[],I=[];for(b=0;b<y;b++){for(var B=b+1,T=f[b],M=f[b+1],F=T;F<M;F++)x=h[F],S[x]=s?w(c[F],o[x][b]):w(o[x][b],c[F]),I[x]=B;for(x=0;x<p;x++)I[x]===B?C[x][b]=S[x]:C[x][b]=o[x][b]}return n.createDenseMatrix({data:C,size:[p,y],datatype:u===n._datatype&&d===i._datatype?v:void 0})}}),F_e="matAlgo04xSidSid",M_e=["typed","equalScalar"],s3=Le(F_e,M_e,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s){var o=i._values,l=i._index,u=i._ptr,c=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),f=a._values,A=a._index,d=a._ptr,p=a._size,y=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==p.length)throw new mn(c.length,p.length);if(c[0]!==p[0]||c[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+p+")");var v=c[0],w=c[1],x,b=t,C=0,S=s;typeof h=="string"&&h===y&&h!=="mixed"&&(x=h,b=e.find(t,[x,x]),C=e.convert(0,x),S=e.find(s,[x,x]));var I=o&&f?[]:void 0,B=[],T=[],M=o&&f?[]:void 0,F=o&&f?[]:void 0,N=[],O=[],L,G,R,U,W;for(G=0;G<w;G++){T[G]=B.length;var Q=G+1;for(U=u[G],W=u[G+1],R=U;R<W;R++)L=l[R],B.push(L),N[L]=Q,M&&(M[L]=o[R]);for(U=d[G],W=d[G+1],R=U;R<W;R++)if(L=A[R],N[L]===Q){if(M){var re=S(M[L],f[R]);b(re,C)?N[L]=null:M[L]=re}}else B.push(L),O[L]=Q,F&&(F[L]=f[R]);if(M&&F)for(R=T[G];R<B.length;)L=B[R],N[L]===Q?(I[R]=M[L],R++):O[L]===Q?(I[R]=F[L],R++):B.splice(R,1)}return T[w]=B.length,i.createSparseMatrix({values:I,index:B,ptr:T,size:[v,w],datatype:h===i._datatype&&y===a._datatype?x:void 0})}}),L_e="matAlgo10xSids",D_e=["typed","DenseMatrix"],u0=Le(L_e,D_e,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,a,s,o){var l=i._values,u=i._index,c=i._ptr,h=i._size,f=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var A=h[0],d=h[1],p,y=s;typeof f=="string"&&(p=f,a=e.convert(a,p),y=e.find(s,[p,p]));for(var v=[],w=[],x=[],b=0;b<d;b++){for(var C=b+1,S=c[b],I=c[b+1],B=S;B<I;B++){var T=u[B];w[T]=l[B],x[T]=C}for(var M=0;M<A;M++)b===0&&(v[M]=[]),x[M]===C?v[M][b]=o?y(a,w[M]):y(w[M],a):v[M][b]=a}return new t({data:v,size:[A,d],datatype:p})}});function c0(r,e,t,n){if(!(this instanceof c0))throw new SyntaxError("Constructor must be called with the new operator");this.fn=r,this.count=e,this.min=t,this.max=n,this.message="Wrong number of arguments in function "+r+" ("+e+" provided, "+t+(n!=null?"-"+n:"")+" expected)",this.stack=new Error().stack}c0.prototype=new Error;c0.prototype.constructor=Error;c0.prototype.name="ArgumentsError";c0.prototype.isArgumentsError=!0;var WL="gcd",k_e=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],CC="number | BigNumber | Fraction | Matrix | Array",R_e="".concat(CC,", ").concat(CC,", ...").concat(CC);function YL(r){return!r.some(e=>Array.isArray(e))}var O_e=Le(WL,k_e,r=>{var{typed:e,matrix:t,config:n,round:i,equalScalar:a,zeros:s,BigNumber:o,DenseMatrix:l,concat:u}=r,c=$G({typed:e,config:n,round:i,matrix:t,equalScalar:a,zeros:s,DenseMatrix:l,concat:u}),h=jA({typed:e}),f=s3({typed:e,equalScalar:a}),A=u0({typed:e,DenseMatrix:l}),d=Li({typed:e,matrix:t,concat:u});return e(WL,{"number, number":p,"BigNumber, BigNumber":y,"Fraction, Fraction":(v,w)=>v.gcd(w)},d({SS:f,DS:h,Ss:A}),{[R_e]:e.referToSelf(v=>(w,x,b)=>{for(var C=v(w,x),S=0;S<b.length;S++)C=v(C,b[S]);return C}),Array:e.referToSelf(v=>w=>{if(w.length===1&&Array.isArray(w[0])&&YL(w[0]))return v(...w[0]);if(YL(w))return v(...w);throw new c0("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(v=>w=>v(w.toArray()))});function p(v,w){if(!Sr(v)||!Sr(w))throw new Error("Parameters in function gcd must be integer numbers");for(var x;w!==0;)x=c(v,w),v=w,w=x;return v<0?-v:v}function y(v,w){if(!v.isInt()||!w.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var x=new o(0);!w.isZero();){var b=c(v,w);v=w,w=b}return v.lt(x)?v.neg():v}}),P_e="matAlgo06xS0S0",U_e=["typed","equalScalar"],nE=Le(P_e,U_e,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s){var o=i._values,l=i._size,u=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=a._values,h=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(l.length!==h.length)throw new mn(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");var A=l[0],d=l[1],p,y=t,v=0,w=s;typeof u=="string"&&u===f&&u!=="mixed"&&(p=u,y=e.find(t,[p,p]),v=e.convert(0,p),w=e.find(s,[p,p]));for(var x=o&&c?[]:void 0,b=[],C=[],S=x?[]:void 0,I=[],B=[],T=0;T<d;T++){C[T]=b.length;var M=T+1;if(xL(i,T,I,S,B,M,b,w),xL(a,T,I,S,B,M,b,w),S)for(var F=C[T];F<b.length;){var N=b[F];if(B[N]===M){var O=S[N];y(O,v)?b.splice(F,1):(x.push(O),F++)}else b.splice(F,1)}else for(var L=C[T];L<b.length;){var G=b[L];B[G]!==M?b.splice(L,1):L++}}return C[d]=b.length,i.createSparseMatrix({values:x,index:b,ptr:C,size:[A,d],datatype:u===i._datatype&&f===a._datatype?p:void 0})}}),XL="lcm",Q_e=["typed","matrix","equalScalar","concat"],G_e=Le(XL,Q_e,r=>{var{typed:e,matrix:t,equalScalar:n,concat:i}=r,a=pc({typed:e,equalScalar:n}),s=nE({typed:e,equalScalar:n}),o=$s({typed:e,equalScalar:n}),l=Li({typed:e,matrix:t,concat:i}),u="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(u,", ").concat(u,", ...").concat(u)]=e.referToSelf(f=>(A,d,p)=>{for(var y=f(A,d),v=0;v<p.length;v++)y=f(y,p[v]);return y}),e(XL,{"number, number":aG,"BigNumber, BigNumber":h,"Fraction, Fraction":(f,A)=>f.lcm(A)},l({SS:s,DS:a,Ss:o}),c);function h(f,A){if(!f.isInt()||!A.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(f.isZero())return f;if(A.isZero())return A;for(var d=f.times(A);!A.isZero();){var p=A;A=f.mod(p),f=p}return d.div(f).abs()}}),ZL="log10",H_e=["typed","config","Complex"],z_e=Le(ZL,H_e,r=>{var{typed:e,config:t,Complex:n}=r;return e(ZL,{number:function(a){return a>=0||t.predictable?sG(a):new n(a,0).log().div(Math.LN10)},Complex:function(a){return new n(a).log().div(Math.LN10)},BigNumber:function(a){return!a.isNegative()||t.predictable?a.log():new n(a.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":e.referToSelf(i=>a=>vn(a,i))})}),JL="log2",q_e=["typed","config","Complex"],j_e=Le(JL,q_e,r=>{var{typed:e,config:t,Complex:n}=r;return e(JL,{number:function(s){return s>=0||t.predictable?oG(s):i(new n(s,0))},Complex:i,BigNumber:function(s){return!s.isNegative()||t.predictable?s.log(2):i(new n(s.toNumber(),0))},"Array | Matrix":e.referToSelf(a=>s=>vn(s,a))});function i(a){var s=Math.sqrt(a.re*a.re+a.im*a.im);return new n(Math.log2?Math.log2(s):Math.log(s)/Math.LN2,Math.atan2(a.im,a.re)/Math.LN2)}}),$_e="multiplyScalar",K_e=["typed"],V_e=Le($_e,K_e,r=>{var{typed:e}=r;return e("multiplyScalar",{"number, number":JQ,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(t,n)=>n.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,n)=>t.multiply(n)})}),eD="multiply",W_e=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Y_e=Le(eD,W_e,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:i,equalScalar:a,dot:s}=r,o=$s({typed:e,equalScalar:a}),l=gc({typed:e});function u(C,S){switch(C.length){case 1:switch(S.length){case 1:if(C[0]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(C[0]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+C[0]+") must match Matrix rows ("+S[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+S.length+" dimensions)")}break;case 2:switch(S.length){case 1:if(C[1]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+C[1]+") must match Vector length ("+S[0]+")");break;case 2:if(C[1]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+C[1]+") must match Matrix B rows ("+S[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+S.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+C.length+" dimensions)")}}function c(C,S,I){if(I===0)throw new Error("Cannot multiply two empty vectors");return s(C,S)}function h(C,S){if(S.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return f(C,S)}function f(C,S){var I=C._data,B=C._size,T=C._datatype||C.getDataType(),M=S._data,F=S._size,N=S._datatype||S.getDataType(),O=B[0],L=F[1],G,R=n,U=i;T&&N&&T===N&&typeof T=="string"&&T!=="mixed"&&(G=T,R=e.find(n,[G,G]),U=e.find(i,[G,G]));for(var W=[],Q=0;Q<L;Q++){for(var re=U(I[0],M[0][Q]),oe=1;oe<O;oe++)re=R(re,U(I[oe],M[oe][Q]));W[Q]=re}return C.createDenseMatrix({data:W,size:[L],datatype:T===C._datatype&&N===S._datatype?G:void 0})}var A=e("_multiplyMatrixVector",{"DenseMatrix, any":p,"SparseMatrix, any":w}),d=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":y,"DenseMatrix, SparseMatrix":v,"SparseMatrix, DenseMatrix":x,"SparseMatrix, SparseMatrix":b});function p(C,S){var I=C._data,B=C._size,T=C._datatype||C.getDataType(),M=S._data,F=S._datatype||S.getDataType(),N=B[0],O=B[1],L,G=n,R=i;T&&F&&T===F&&typeof T=="string"&&T!=="mixed"&&(L=T,G=e.find(n,[L,L]),R=e.find(i,[L,L]));for(var U=[],W=0;W<N;W++){for(var Q=I[W],re=R(Q[0],M[0]),oe=1;oe<O;oe++)re=G(re,R(Q[oe],M[oe]));U[W]=re}return C.createDenseMatrix({data:U,size:[N],datatype:T===C._datatype&&F===S._datatype?L:void 0})}function y(C,S){var I=C._data,B=C._size,T=C._datatype||C.getDataType(),M=S._data,F=S._size,N=S._datatype||S.getDataType(),O=B[0],L=B[1],G=F[1],R,U=n,W=i;T&&N&&T===N&&typeof T=="string"&&T!=="mixed"&&T!=="mixed"&&(R=T,U=e.find(n,[R,R]),W=e.find(i,[R,R]));for(var Q=[],re=0;re<O;re++){var oe=I[re];Q[re]=[];for(var P=0;P<G;P++){for(var z=W(oe[0],M[0][P]),K=1;K<L;K++)z=U(z,W(oe[K],M[K][P]));Q[re][P]=z}}return C.createDenseMatrix({data:Q,size:[O,G],datatype:T===C._datatype&&N===S._datatype?R:void 0})}function v(C,S){var I=C._data,B=C._size,T=C._datatype||C.getDataType(),M=S._values,F=S._index,N=S._ptr,O=S._size,L=S._datatype||S._data===void 0?S._datatype:S.getDataType();if(!M)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var G=B[0],R=O[1],U,W=n,Q=i,re=a,oe=0;T&&L&&T===L&&typeof T=="string"&&T!=="mixed"&&(U=T,W=e.find(n,[U,U]),Q=e.find(i,[U,U]),re=e.find(a,[U,U]),oe=e.convert(0,U));for(var P=[],z=[],K=[],J=S.createSparseMatrix({values:P,index:z,ptr:K,size:[G,R],datatype:T===C._datatype&&L===S._datatype?U:void 0}),ue=0;ue<R;ue++){K[ue]=z.length;var ge=N[ue],le=N[ue+1];if(le>ge)for(var me=0,xe=0;xe<G;xe++){for(var Be=xe+1,Y=void 0,Ve=ge;Ve<le;Ve++){var te=F[Ve];me!==Be?(Y=Q(I[xe][te],M[Ve]),me=Be):Y=W(Y,Q(I[xe][te],M[Ve]))}me===Be&&!re(Y,oe)&&(z.push(xe),P.push(Y))}}return K[R]=z.length,J}function w(C,S){var I=C._values,B=C._index,T=C._ptr,M=C._datatype||C._data===void 0?C._datatype:C.getDataType();if(!I)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var F=S._data,N=S._datatype||S.getDataType(),O=C._size[0],L=S._size[0],G=[],R=[],U=[],W,Q=n,re=i,oe=a,P=0;M&&N&&M===N&&typeof M=="string"&&M!=="mixed"&&(W=M,Q=e.find(n,[W,W]),re=e.find(i,[W,W]),oe=e.find(a,[W,W]),P=e.convert(0,W));var z=[],K=[];U[0]=0;for(var J=0;J<L;J++){var ue=F[J];if(!oe(ue,P))for(var ge=T[J],le=T[J+1],me=ge;me<le;me++){var xe=B[me];K[xe]?z[xe]=Q(z[xe],re(ue,I[me])):(K[xe]=!0,R.push(xe),z[xe]=re(ue,I[me]))}}for(var Be=R.length,Y=0;Y<Be;Y++){var Ve=R[Y];G[Y]=z[Ve]}return U[1]=R.length,C.createSparseMatrix({values:G,index:R,ptr:U,size:[O,1],datatype:M===C._datatype&&N===S._datatype?W:void 0})}function x(C,S){var I=C._values,B=C._index,T=C._ptr,M=C._datatype||C._data===void 0?C._datatype:C.getDataType();if(!I)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var F=S._data,N=S._datatype||S.getDataType(),O=C._size[0],L=S._size[0],G=S._size[1],R,U=n,W=i,Q=a,re=0;M&&N&&M===N&&typeof M=="string"&&M!=="mixed"&&(R=M,U=e.find(n,[R,R]),W=e.find(i,[R,R]),Q=e.find(a,[R,R]),re=e.convert(0,R));for(var oe=[],P=[],z=[],K=C.createSparseMatrix({values:oe,index:P,ptr:z,size:[O,G],datatype:M===C._datatype&&N===S._datatype?R:void 0}),J=[],ue=[],ge=0;ge<G;ge++){z[ge]=P.length;for(var le=ge+1,me=0;me<L;me++){var xe=F[me][ge];if(!Q(xe,re))for(var Be=T[me],Y=T[me+1],Ve=Be;Ve<Y;Ve++){var te=B[Ve];ue[te]!==le?(ue[te]=le,P.push(te),J[te]=W(xe,I[Ve])):J[te]=U(J[te],W(xe,I[Ve]))}}for(var se=z[ge],Z=P.length,he=se;he<Z;he++){var ne=P[he];oe[he]=J[ne]}}return z[G]=P.length,K}function b(C,S){var I=C._values,B=C._index,T=C._ptr,M=C._datatype||C._data===void 0?C._datatype:C.getDataType(),F=S._values,N=S._index,O=S._ptr,L=S._datatype||S._data===void 0?S._datatype:S.getDataType(),G=C._size[0],R=S._size[1],U=I&&F,W,Q=n,re=i;M&&L&&M===L&&typeof M=="string"&&M!=="mixed"&&(W=M,Q=e.find(n,[W,W]),re=e.find(i,[W,W]));for(var oe=U?[]:void 0,P=[],z=[],K=C.createSparseMatrix({values:oe,index:P,ptr:z,size:[G,R],datatype:M===C._datatype&&L===S._datatype?W:void 0}),J=U?[]:void 0,ue=[],ge,le,me,xe,Be,Y,Ve,te,se=0;se<R;se++){z[se]=P.length;var Z=se+1;for(Be=O[se],Y=O[se+1],xe=Be;xe<Y;xe++)if(te=N[xe],U)for(le=T[te],me=T[te+1],ge=le;ge<me;ge++)Ve=B[ge],ue[Ve]!==Z?(ue[Ve]=Z,P.push(Ve),J[Ve]=re(F[xe],I[ge])):J[Ve]=Q(J[Ve],re(F[xe],I[ge]));else for(le=T[te],me=T[te+1],ge=le;ge<me;ge++)Ve=B[ge],ue[Ve]!==Z&&(ue[Ve]=Z,P.push(Ve));if(U)for(var he=z[se],ne=P.length,ae=he;ae<ne;ae++){var _e=P[ae];oe[ae]=J[_e]}}return z[R]=P.length,K}return e(eD,i,{"Array, Array":e.referTo("Matrix, Matrix",C=>(S,I)=>{u(en(S),en(I));var B=C(t(S),t(I));return Lr(B)?B.valueOf():B}),"Matrix, Matrix":function(S,I){var B=S.size(),T=I.size();return u(B,T),B.length===1?T.length===1?c(S,I,B[0]):h(S,I):T.length===1?A(S,I):d(S,I)},"Matrix, Array":e.referTo("Matrix,Matrix",C=>(S,I)=>C(S,t(I))),"Array, Matrix":e.referToSelf(C=>(S,I)=>C(t(S,I.storage()),I)),"SparseMatrix, any":function(S,I){return o(S,I,i,!1)},"DenseMatrix, any":function(S,I){return l(S,I,i,!1)},"any, SparseMatrix":function(S,I){return o(I,S,i,!0)},"any, DenseMatrix":function(S,I){return l(I,S,i,!0)},"Array, any":function(S,I){return l(t(S),I,i,!1).valueOf()},"any, Array":function(S,I){return l(t(I),S,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(C=>(S,I,B)=>{for(var T=C(S,I),M=0;M<B.length;M++)T=C(T,B[M]);return T})})}),tD="nthRoot",X_e=["typed","matrix","equalScalar","BigNumber","concat"],Z_e=Le(tD,X_e,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i,concat:a}=r,s=jA({typed:e}),o=pc({typed:e,equalScalar:n}),l=nE({typed:e,equalScalar:n}),u=$s({typed:e,equalScalar:n}),c=Li({typed:e,matrix:t,concat:a});function h(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(tD,{number:_L,"number, number":_L,BigNumber:A=>f(A,new i(2)),"BigNumber, BigNumber":f,Complex:h,"Complex, number":h,Array:e.referTo("DenseMatrix,number",A=>d=>A(t(d),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",A=>d=>A(d,2)),SparseMatrix:e.referTo("SparseMatrix,number",A=>d=>A(d,2)),"SparseMatrix, SparseMatrix":e.referToSelf(A=>(d,p)=>{if(p.density()===1)return l(d,p,A);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(A=>(d,p)=>{if(p.density()===1)return s(d,p,A,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",A=>(d,p)=>A(t(d),p)),"number | BigNumber, SparseMatrix":e.referToSelf(A=>(d,p)=>{if(p.density()===1)return u(p,d,A,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:o,Ss:u,sS:!1}));function f(A,d){var p=i.precision,y=i.clone({precision:p+2}),v=new i(0),w=new y(1),x=d.isNegative();if(x&&(d=d.neg()),d.isZero())throw new Error("Root must be non-zero");if(A.isNegative()&&!d.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(A.isZero())return x?new y(1/0):0;if(!A.isFinite())return x?v:A;var b=A.abs().pow(w.div(d));return b=A.isNeg()?b.neg():b,new i((x?w.div(b):b).toPrecision(p))}}),rD="sign",J_e=["typed","BigNumber","Fraction","complex"],eEe=Le(rD,J_e,r=>{var{typed:e,BigNumber:t,complex:n,Fraction:i}=r;return e(rD,{number:T5,Complex:function(s){return s.im===0?n(T5(s.re)):s.sign()},BigNumber:function(s){return new t(s.cmp(0))},Fraction:function(s){return new i(s.s,1)},"Array | Matrix":e.referToSelf(a=>s=>vn(s,a)),Unit:e.referToSelf(a=>s=>{if(!s._isDerived()&&s.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(a,s.valueType())(s.value)})})}),tEe="sqrt",rEe=["config","typed","Complex"],nEe=Le(tEe,rEe,r=>{var{config:e,typed:t,Complex:n}=r;return t("sqrt",{number:i,Complex:function(s){return s.sqrt()},BigNumber:function(s){return!s.isNegative()||e.predictable?s.sqrt():i(s.toNumber())},Unit:function(s){return s.pow(.5)}});function i(a){return isNaN(a)?NaN:a>=0||e.predictable?Math.sqrt(a):new n(a,0).sqrt()}}),nD="square",iEe=["typed"],aEe=Le(nD,iEe,r=>{var{typed:e}=r;return e(nD,{number:lG,Complex:function(n){return n.mul(n)},BigNumber:function(n){return n.times(n)},Fraction:function(n){return n.mul(n)},Unit:function(n){return n.pow(2)}})}),iD="subtract",sEe=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],oEe=Le(iD,sEe,r=>{var{typed:e,matrix:t,equalScalar:n,subtractScalar:i,unaryMinus:a,DenseMatrix:s,concat:o}=r,l=jA({typed:e}),u=Zo({typed:e}),c=rE({typed:e,equalScalar:n}),h=u0({typed:e,DenseMatrix:s}),f=ss({typed:e,DenseMatrix:s}),A=Li({typed:e,matrix:t,concat:o});return e(iD,{"any, any":i},A({elop:i,SS:c,DS:l,SD:u,Ss:f,sS:h}))}),aD="xgcd",lEe=["typed","config","matrix","BigNumber"],uEe=Le(aD,lEe,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(aD,{"number, number":function(o,l){var u=uG(o,l);return t.matrix==="Array"?u:n(u)},"BigNumber, BigNumber":a});function a(s,o){var l,u,c,h=new i(0),f=new i(1),A=h,d=f,p=f,y=h;if(!s.isInt()||!o.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!o.isZero();)u=s.div(o).floor(),c=s.mod(o),l=A,A=d.minus(u.times(A)),d=l,l=p,p=y.minus(u.times(p)),y=l,s=o,o=c;var v;return s.lt(h)?v=[s.neg(),d.neg(),y.neg()]:v=[s,s.isZero()?0:d,y],t.matrix==="Array"?v:n(v)}}),sD="invmod",cEe=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],hEe=Le(sD,cEe,r=>{var{typed:e,config:t,BigNumber:n,xgcd:i,equal:a,smaller:s,mod:o,add:l,isInteger:u}=r;return e(sD,{"number, number":c,"BigNumber, BigNumber":c});function c(h,f){if(!u(h)||!u(f))throw new Error("Parameters in function invmod must be integer numbers");if(h=o(h,f),a(f,0))throw new Error("Divisor must be non zero");var A=i(h,f);A=A.valueOf();var[d,p]=A;return a(d,n(1))?(p=o(p,f),s(p,n(0))&&(p=l(p,f)),p):NaN}}),fEe="matAlgo09xS0Sf",AEe=["typed","equalScalar"],KG=Le(fEe,AEe,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s){var o=i._values,l=i._index,u=i._ptr,c=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),f=a._values,A=a._index,d=a._ptr,p=a._size,y=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==p.length)throw new mn(c.length,p.length);if(c[0]!==p[0]||c[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+p+")");var v=c[0],w=c[1],x,b=t,C=0,S=s;typeof h=="string"&&h===y&&h!=="mixed"&&(x=h,b=e.find(t,[x,x]),C=e.convert(0,x),S=e.find(s,[x,x]));var I=o&&f?[]:void 0,B=[],T=[],M=I?[]:void 0,F=[],N,O,L,G,R;for(O=0;O<w;O++){T[O]=B.length;var U=O+1;if(M)for(G=d[O],R=d[O+1],L=G;L<R;L++)N=A[L],F[N]=U,M[N]=f[L];for(G=u[O],R=u[O+1],L=G;L<R;L++)if(N=l[L],M){var W=F[N]===U?M[N]:C,Q=S(o[L],W);b(Q,C)||(B.push(N),I.push(Q))}else B.push(N)}return T[w]=B.length,i.createSparseMatrix({values:I,index:B,ptr:T,size:[v,w],datatype:h===i._datatype&&y===a._datatype?x:void 0})}}),oD="dotMultiply",dEe=["typed","matrix","equalScalar","multiplyScalar","concat"],gEe=Le(oD,dEe,r=>{var{typed:e,matrix:t,equalScalar:n,multiplyScalar:i,concat:a}=r,s=pc({typed:e,equalScalar:n}),o=KG({typed:e,equalScalar:n}),l=$s({typed:e,equalScalar:n}),u=Li({typed:e,matrix:t,concat:a});return e(oD,u({elop:i,SS:o,DS:s,Ss:l}))});function pEe(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero()||e.eq(-1)||r.eq(e))return r;if(e.isZero()||r.eq(-1))return e;if(!r.isFinite()||!e.isFinite()){if(!r.isFinite()&&!e.isFinite())return r.isNegative()===e.isNegative()?r:new t(0);if(!r.isFinite())return e.isNegative()?r:r.isNegative()?new t(0):e;if(!e.isFinite())return r.isNegative()?e:e.isNegative()?new t(0):r}return o3(r,e,function(n,i){return n&i})}function h1(r){if(r.isFinite()&&!r.isInteger())throw new Error("Integer expected in function bitNot");var e=r.constructor,t=e.precision;e.config({precision:1e9});var n=r.plus(new e(1));return n.s=-n.s||null,e.config({precision:t}),n}function mEe(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);var n=new t(-1);return r.isZero()||e.eq(n)||r.eq(e)?e:e.isZero()||r.eq(n)?r:!r.isFinite()||!e.isFinite()?!r.isFinite()&&!r.isNegative()&&e.isNegative()||r.isNegative()&&!e.isNegative()&&!e.isFinite()?n:r.isNegative()&&e.isNegative()?r.isFinite()?r:e:r.isFinite()?e:r:o3(r,e,function(i,a){return i|a})}function o3(r,e,t){var n=r.constructor,i,a,s=+(r.s<0),o=+(e.s<0);if(s){i=L2(h1(r));for(var l=0;l<i.length;++l)i[l]^=1}else i=L2(r);if(o){a=L2(h1(e));for(var u=0;u<a.length;++u)a[u]^=1}else a=L2(e);var c,h,f;i.length<=a.length?(c=i,h=a,f=s):(c=a,h=i,f=o);var A=c.length,d=h.length,p=t(s,o)^1,y=new n(p^1),v=new n(1),w=new n(2),x=n.precision;for(n.config({precision:1e9});A>0;)t(c[--A],h[--d])===p&&(y=y.plus(v)),v=v.times(w);for(;d>0;)t(f,h[--d])===p&&(y=y.plus(v)),v=v.times(w);return n.config({precision:x}),p===0&&(y.s=-y.s),y}function L2(r){for(var e=r.d,t=e[0]+"",n=1;n<e.length;++n){for(var i=e[n]+"",a=7-i.length;a--;)i="0"+i;t+=i}for(var s=t.length;t.charAt(s)==="0";)s--;var o=r.e,l=t.slice(0,s+1||1),u=l.length;if(o>0)if(++o>u)for(o-=u;o--;)l+="0";else o<u&&(l=l.slice(0,o)+"."+l.slice(o));for(var c=[0],h=0;h<l.length;){for(var f=c.length;f--;)c[f]*=10;c[0]+=parseInt(l.charAt(h++));for(var A=0;A<c.length;++A)c[A]>1&&((c[A+1]===null||c[A+1]===void 0)&&(c[A+1]=0),c[A+1]+=c[A]>>1,c[A]&=1)}return c.reverse()}function vEe(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero())return e;if(e.isZero())return r;if(r.eq(e))return new t(0);var n=new t(-1);return r.eq(n)?h1(e):e.eq(n)?h1(r):!r.isFinite()||!e.isFinite()?!r.isFinite()&&!e.isFinite()?n:new t(r.isNegative()===e.isNegative()?1/0:-1/0):o3(r,e,function(i,a){return i^a})}function yEe(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:!r.isFinite()&&!e.isFinite()?new t(NaN):e.lt(55)?r.times(Math.pow(2,e.toNumber())+""):r.times(new t(2).pow(e))}function xEe(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:e.isFinite()?e.lt(55)?r.div(Math.pow(2,e.toNumber())+"").floor():r.div(new t(2).pow(e)).floor():r.isNegative()?new t(-1):r.isFinite()?new t(0):new t(NaN)}var lD="bitAnd",wEe=["typed","matrix","equalScalar","concat"],VG=Le(lD,wEe,r=>{var{typed:e,matrix:t,equalScalar:n,concat:i}=r,a=pc({typed:e,equalScalar:n}),s=nE({typed:e,equalScalar:n}),o=$s({typed:e,equalScalar:n}),l=Li({typed:e,matrix:t,concat:i});return e(lD,{"number, number":hG,"BigNumber, BigNumber":pEe},l({SS:s,DS:a,Ss:o}))}),uD="bitNot",_Ee=["typed"],EEe=Le(uD,_Ee,r=>{var{typed:e}=r;return e(uD,{number:fG,BigNumber:h1,"Array | Matrix":e.referToSelf(t=>n=>vn(n,t))})}),cD="bitOr",bEe=["typed","matrix","equalScalar","DenseMatrix","concat"],WG=Le(cD,bEe,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a}=r,s=jA({typed:e}),o=s3({typed:e,equalScalar:n}),l=u0({typed:e,DenseMatrix:i}),u=Li({typed:e,matrix:t,concat:a});return e(cD,{"number, number":AG,"BigNumber, BigNumber":mEe},u({SS:o,DS:s,Ss:l}))}),CEe="matAlgo07xSSf",SEe=["typed","DenseMatrix"],Ah=Le(CEe,SEe,r=>{var{typed:e,DenseMatrix:t}=r;return function(a,s,o){var l=a._size,u=a._datatype||a._data===void 0?a._datatype:a.getDataType(),c=s._size,h=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(l.length!==c.length)throw new mn(l.length,c.length);if(l[0]!==c[0]||l[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+c+")");var f=l[0],A=l[1],d,p=0,y=o;typeof u=="string"&&u===h&&u!=="mixed"&&(d=u,p=e.convert(0,d),y=e.find(o,[d,d]));var v,w,x=[];for(v=0;v<f;v++)x[v]=[];var b=[],C=[],S=[],I=[];for(w=0;w<A;w++){var B=w+1;for(n(a,w,S,b,B),n(s,w,I,C,B),v=0;v<f;v++){var T=S[v]===B?b[v]:p,M=I[v]===B?C[v]:p;x[v][w]=y(T,M)}}return new t({data:x,size:[f,A],datatype:u===a._datatype&&h===s._datatype?d:void 0})};function n(i,a,s,o,l){for(var u=i._values,c=i._index,h=i._ptr,f=h[a],A=h[a+1];f<A;f++){var d=c[f];s[d]=l,o[d]=u[f]}}}),hD="bitXor",BEe=["typed","matrix","DenseMatrix","concat"],TEe=Le(hD,BEe,r=>{var{typed:e,matrix:t,DenseMatrix:n,concat:i}=r,a=Zo({typed:e}),s=Ah({typed:e,DenseMatrix:n}),o=ss({typed:e,DenseMatrix:n}),l=Li({typed:e,matrix:t,concat:i});return e(hD,{"number, number":dG,"BigNumber, BigNumber":vEe},l({SS:s,DS:a,Ss:o}))}),fD="arg",NEe=["typed"],IEe=Le(fD,NEe,r=>{var{typed:e}=r;return e(fD,{number:function(n){return Math.atan2(0,n)},BigNumber:function(n){return n.constructor.atan2(0,n)},Complex:function(n){return n.arg()},"Array | Matrix":e.referToSelf(t=>n=>vn(n,t))})}),AD="conj",FEe=["typed"],MEe=Le(AD,FEe,r=>{var{typed:e}=r;return e(AD,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),"Array | Matrix":e.referToSelf(t=>n=>vn(n,t))})}),dD="im",LEe=["typed"],DEe=Le(dD,LEe,r=>{var{typed:e}=r;return e(dD,{number:()=>0,"BigNumber | Fraction":t=>t.mul(0),Complex:t=>t.im,"Array | Matrix":e.referToSelf(t=>n=>vn(n,t))})}),gD="re",kEe=["typed"],REe=Le(gD,kEe,r=>{var{typed:e}=r;return e(gD,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.re,"Array | Matrix":e.referToSelf(t=>n=>vn(n,t))})}),pD="not",OEe=["typed"],PEe=Le(pD,OEe,r=>{var{typed:e}=r;return e(pD,{"null | undefined":()=>!0,number:yG,Complex:function(n){return n.re===0&&n.im===0},BigNumber:function(n){return n.isZero()||n.isNaN()},Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>vn(n,t))})}),mD="or",UEe=["typed","matrix","equalScalar","DenseMatrix","concat"],YG=Le(mD,UEe,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a}=r,s=Zo({typed:e}),o=rE({typed:e,equalScalar:n}),l=ss({typed:e,DenseMatrix:i}),u=Li({typed:e,matrix:t,concat:a});return e(mD,{"number, number":xG,"Complex, Complex":function(h,f){return h.re!==0||h.im!==0||f.re!==0||f.im!==0},"BigNumber, BigNumber":function(h,f){return!h.isZero()&&!h.isNaN()||!f.isZero()&&!f.isNaN()},"Unit, Unit":e.referToSelf(c=>(h,f)=>c(h.value||0,f.value||0))},u({SS:o,DS:s,Ss:l}))}),vD="xor",QEe=["typed","matrix","DenseMatrix","concat"],GEe=Le(vD,QEe,r=>{var{typed:e,matrix:t,DenseMatrix:n,concat:i}=r,a=Zo({typed:e}),s=Ah({typed:e,DenseMatrix:n}),o=ss({typed:e,DenseMatrix:n}),l=Li({typed:e,matrix:t,concat:i});return e(vD,{"number, number":wG,"Complex, Complex":function(c,h){return(c.re!==0||c.im!==0)!=(h.re!==0||h.im!==0)},"BigNumber, BigNumber":function(c,h){return(!c.isZero()&&!c.isNaN())!=(!h.isZero()&&!h.isNaN())},"Unit, Unit":e.referToSelf(u=>(c,h)=>u(c.value||0,h.value||0))},l({SS:s,DS:a,Ss:o}))}),yD="concat",HEe=["typed","matrix","isInteger"],XG=Le(yD,HEe,r=>{var{typed:e,matrix:t,isInteger:n}=r;return e(yD,{"...Array | Matrix | number | BigNumber":function(a){var s,o=a.length,l=-1,u,c=!1,h=[];for(s=0;s<o;s++){var f=a[s];if(Lr(f)&&(c=!0),an(f)||sn(f)){if(s!==o-1)throw new Error("Dimension must be specified as last argument");if(u=l,l=f.valueOf(),!n(l))throw new TypeError("Integer number expected for dimension");if(l<0||s>0&&l>u)throw new Ac(l,u+1)}else{var A=Yr(f).valueOf(),d=en(A);if(h[s]=A,u=l,l=d.length-1,s>0&&l!==u)throw new mn(u+1,l+1)}}if(h.length===0)throw new SyntaxError("At least one matrix expected");for(var p=h.shift();h.length;)p=KQ(p,h.shift(),l);return c?t(p):p},"...string":function(a){return a.join("")}})}),xD="column",zEe=["typed","Index","matrix","range"],ZG=Le(xD,zEe,r=>{var{typed:e,Index:t,matrix:n,range:i}=r;return e(xD,{"Matrix, number":a,"Array, number":function(o,l){return a(n(Yr(o)),l).valueOf()}});function a(s,o){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Ei(o,s.size()[1]);var l=i(0,s.size()[0]),u=new t(l,o),c=s.subset(u);return Lr(c)?c:n([[c]])}}),wD="count",qEe=["typed","size","prod"],jEe=Le(wD,qEe,r=>{var{typed:e,size:t,prod:n}=r;return e(wD,{string:function(a){return a.length},"Matrix | Array":function(a){return n(t(a))}})}),_D="cross",$Ee=["typed","matrix","subtract","multiply"],KEe=Le(_D,$Ee,r=>{var{typed:e,matrix:t,subtract:n,multiply:i}=r;return e(_D,{"Matrix, Matrix":function(o,l){return t(a(o.toArray(),l.toArray()))},"Matrix, Array":function(o,l){return t(a(o.toArray(),l))},"Array, Matrix":function(o,l){return t(a(o,l.toArray()))},"Array, Array":a});function a(s,o){var l=Math.max(en(s).length,en(o).length);s=Mw(s),o=Mw(o);var u=en(s),c=en(o);if(u.length!==1||c.length!==1||u[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+u.join(", ")+"], B = ["+c.join(", ")+"])");var h=[n(i(s[1],o[2]),i(s[2],o[1])),n(i(s[2],o[0]),i(s[0],o[2])),n(i(s[0],o[1]),i(s[1],o[0]))];return l>1?[h]:h}}),ED="diag",VEe=["typed","matrix","DenseMatrix","SparseMatrix"],WEe=Le(ED,VEe,r=>{var{typed:e,matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(ED,{Array:function(u){return a(u,0,en(u),null)},"Array, number":function(u,c){return a(u,c,en(u),null)},"Array, BigNumber":function(u,c){return a(u,c.toNumber(),en(u),null)},"Array, string":function(u,c){return a(u,0,en(u),c)},"Array, number, string":function(u,c,h){return a(u,c,en(u),h)},"Array, BigNumber, string":function(u,c,h){return a(u,c.toNumber(),en(u),h)},Matrix:function(u){return a(u,0,u.size(),u.storage())},"Matrix, number":function(u,c){return a(u,c,u.size(),u.storage())},"Matrix, BigNumber":function(u,c){return a(u,c.toNumber(),u.size(),u.storage())},"Matrix, string":function(u,c){return a(u,0,u.size(),c)},"Matrix, number, string":function(u,c,h){return a(u,c,u.size(),h)},"Matrix, BigNumber, string":function(u,c,h){return a(u,c.toNumber(),u.size(),h)}});function a(l,u,c,h){if(!Sr(u))throw new TypeError("Second parameter in function diag must be an integer");var f=u>0?u:0,A=u<0?-u:0;switch(c.length){case 1:return s(l,u,h,c[0],A,f);case 2:return o(l,u,h,c,A,f)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function s(l,u,c,h,f,A){var d=[h+f,h+A];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var p=c==="sparse"?i.diagonal(d,l,u):n.diagonal(d,l,u);return c!==null?p:p.valueOf()}function o(l,u,c,h,f,A){if(Lr(l)){var d=l.diagonal(u);return c!==null?c!==d.storage()?t(d,c):d:d.valueOf()}for(var p=Math.min(h[0]-f,h[1]-A),y=[],v=0;v<p;v++)y[v]=l[v+f][v+A];return c!==null?t(y):y}});function Op(r,e,t,n,i){if(Eg.isTypedFunction(r)){var a=[e,t,n],s=Eg.resolve(r,a);if(s)return h(s.implementation,a);var o=[e,t],l=Eg.resolve(r,o);if(l)return h(l.implementation,o);var u=[e],c=Eg.resolve(r,u);return c?h(c.implementation,u):h(r,a)}else return r(e,t,n);function h(f,A){try{return f.apply(f,A)}catch(y){var d;if(y instanceof TypeError&&((d=y.data)===null||d===void 0?void 0:d.category)==="wrongType"){var p=[];throw p.push("value: ".concat(Si(e))),A.length>=2&&p.push("index: ".concat(Si(t))),A.length>=3&&p.push("array: ".concat(Si(n))),new TypeError("Function ".concat(i," cannot apply callback arguments ")+"".concat(r.name,"(").concat(p.join(", "),") at index ").concat(JSON.stringify(t)))}else throw new TypeError("Function ".concat(i," cannot apply callback arguments ")+"to function ".concat(r.name,": ").concat(y.message))}}}var YEe="filter",XEe=["typed"],ZEe=Le(YEe,XEe,r=>{var{typed:e}=r;return e("filter",{"Array, function":bD,"Matrix, function":function(n,i){return n.create(bD(n.toArray(),i))},"Array, RegExp":Lw,"Matrix, RegExp":function(n,i){return n.create(Lw(n.toArray(),i))}})});function bD(r,e){return jQ(r,function(t,n,i){return Op(e,t,[n],i,"filter")})}var CD="flatten",JEe=["typed","matrix"],ebe=Le(CD,JEe,r=>{var{typed:e,matrix:t}=r;return e(CD,{Array:function(i){return jn(i)},Matrix:function(i){var a=jn(i.toArray());return t(a)}})}),SD="forEach",tbe=["typed"],rbe=Le(SD,tbe,r=>{var{typed:e}=r;return e(SD,{"Array, function":nbe,"Matrix, function":function(n,i){n.forEach(i)}})});function nbe(r,e){var t=function n(i,a){if(Array.isArray(i))J_(i,function(s,o){n(s,a.concat(o))});else return Op(e,i,a,r,"forEach")};t(r,[])}var BD="getMatrixDataType",ibe=["typed"],abe=Le(BD,ibe,r=>{var{typed:e}=r;return e(BD,{Array:function(n){return c1(n,Si)},Matrix:function(n){return n.getDataType()}})}),TD="identity",sbe=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],obe=Le(TD,sbe,r=>{var{typed:e,config:t,matrix:n,BigNumber:i,DenseMatrix:a,SparseMatrix:s}=r;return e(TD,{"":function(){return t.matrix==="Matrix"?n([]):[]},string:function(c){return n(c)},"number | BigNumber":function(c){return l(c,c,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,h){return l(c,c,h)},"number | BigNumber, number | BigNumber":function(c,h){return l(c,h,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,h,f){return l(c,h,f)},Array:function(c){return o(c)},"Array, string":function(c,h){return o(c,h)},Matrix:function(c){return o(c.valueOf(),c.storage())},"Matrix, string":function(c,h){return o(c.valueOf(),h)}});function o(u,c){switch(u.length){case 0:return c?n(c):[];case 1:return l(u[0],u[0],c);case 2:return l(u[0],u[1],c);default:throw new Error("Vector containing two values expected")}}function l(u,c,h){var f=sn(u)||sn(c)?i:null;if(sn(u)&&(u=u.toNumber()),sn(c)&&(c=c.toNumber()),!Sr(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!Sr(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var A=f?new i(1):1,d=f?new f(0):0,p=[u,c];if(h){if(h==="sparse")return s.diagonal(p,A,0,d);if(h==="dense")return a.diagonal(p,A,0,d);throw new TypeError('Unknown matrix type "'.concat(h,'"'))}for(var y=hp([],p,d),v=u<c?u:c,w=0;w<v;w++)y[w][w]=A;return y}}),ND="kron",lbe=["typed","matrix","multiplyScalar"],ube=Le(ND,lbe,r=>{var{typed:e,matrix:t,multiplyScalar:n}=r;return e(ND,{"Matrix, Matrix":function(s,o){return t(i(s.toArray(),o.toArray()))},"Matrix, Array":function(s,o){return t(i(s.toArray(),o))},"Array, Matrix":function(s,o){return t(i(s,o.toArray()))},"Array, Array":i});function i(a,s){if(en(a).length===1&&(a=[a]),en(s).length===1&&(s=[s]),en(a).length>2||en(s).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(a.length)+", y = "+JSON.stringify(s.length)+")");var o=[],l=[];return a.map(function(u){return s.map(function(c){return l=[],o.push(l),u.map(function(h){return c.map(function(f){return l.push(n(h,f))})})})})&&o}}),ID="map",cbe=["typed"],hbe=Le(ID,cbe,r=>{var{typed:e}=r;return e(ID,{"Array, function":fbe,"Matrix, function":function(n,i){return n.map(i)}})});function fbe(r,e){var t=function n(i,a){return Array.isArray(i)?i.map(function(s,o){return n(s,a.concat(o))}):Op(e,i,a,r,"map")};return t(r,[])}var FD="diff",Abe=["typed","matrix","subtract","number"],JG=Le(FD,Abe,r=>{var{typed:e,matrix:t,subtract:n,number:i}=r;return e(FD,{"Array | Matrix":function(c){return Lr(c)?t(s(c.toArray())):s(c)},"Array | Matrix, number":function(c,h){if(!Sr(h))throw new RangeError("Dimension must be a whole number");return Lr(c)?t(a(c.toArray(),h)):a(c,h)},"Array, BigNumber":e.referTo("Array,number",u=>(c,h)=>u(c,i(h))),"Matrix, BigNumber":e.referTo("Matrix,number",u=>(c,h)=>u(c,i(h)))});function a(u,c){if(Lr(u)&&(u=u.toArray()),!Array.isArray(u))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var h=[];return u.forEach(f=>{h.push(a(f,c-1))}),h}else{if(c===0)return s(u);throw RangeError("Cannot have negative dimension")}}function s(u){for(var c=[],h=u.length,f=1;f<h;f++)c.push(o(u[f-1],u[f]));return c}function o(u,c){Lr(u)&&(u=u.toArray()),Lr(c)&&(c=c.toArray());var h=Array.isArray(u),f=Array.isArray(c);if(h&&f)return l(u,c);if(!h&&!f)return n(c,u);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function l(u,c){if(u.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var h=[],f=u.length,A=0;A<f;A++)h.push(o(u[A],c[A]));return h}}),dbe="ones",gbe=["typed","config","matrix","BigNumber"],pbe=Le(dbe,gbe,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e("ones",{"":function(){return t.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var h=u.pop();return a(u,h)}else return t.matrix==="Array"?a(u):a(u,"default")},Array:a,Matrix:function(u){var c=u.storage();return a(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return a(u.valueOf(),c)}});function a(l,u){var c=s(l),h=c?new i(1):1;if(o(l),u){var f=n(u);return l.length>0?f.resize(l,h):f}else{var A=[];return l.length>0?hp(A,l,h):A}}function s(l){var u=!1;return l.forEach(function(c,h,f){sn(c)&&(u=!0,f[h]=c.toNumber())}),u}function o(l){l.forEach(function(u){if(typeof u!="number"||!Sr(u)||u<0)throw new Error("Parameters in function ones must be positive integers")})}});function l3(){throw new Error('No "bignumber" implementation available')}function eH(){throw new Error('No "fraction" implementation available')}function tH(){throw new Error('No "matrix" implementation available')}var MD="range",mbe=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],rH=Le(MD,mbe,r=>{var{typed:e,config:t,matrix:n,bignumber:i,smaller:a,smallerEq:s,larger:o,largerEq:l,add:u,isPositive:c}=r;return e(MD,{string:f,"string, boolean":f,"number, number":function(y,v){return h(A(y,v,1,!1))},"number, number, number":function(y,v,w){return h(A(y,v,w,!1))},"number, number, boolean":function(y,v,w){return h(A(y,v,1,w))},"number, number, number, boolean":function(y,v,w,x){return h(A(y,v,w,x))},"BigNumber, BigNumber":function(y,v){var w=y.constructor;return h(A(y,v,new w(1),!1))},"BigNumber, BigNumber, BigNumber":function(y,v,w){return h(A(y,v,w,!1))},"BigNumber, BigNumber, boolean":function(y,v,w){var x=y.constructor;return h(A(y,v,new x(1),w))},"BigNumber, BigNumber, BigNumber, boolean":function(y,v,w,x){return h(A(y,v,w,x))},"Unit, Unit, Unit":function(y,v,w){return h(A(y,v,w,!1))},"Unit, Unit, Unit, boolean":function(y,v,w,x){return h(A(y,v,w,x))}});function h(p){return t.matrix==="Matrix"?n?n(p):tH():p}function f(p,y){var v=d(p);if(!v)throw new SyntaxError('String "'+p+'" is no valid range');return t.number==="BigNumber"?(i===void 0&&l3(),h(A(i(v.start),i(v.end),i(v.step)))):h(A(v.start,v.end,v.step,y))}function A(p,y,v,w){for(var x=[],b=c(v)?w?s:a:w?l:o,C=p;b(C,y);)x.push(C),C=u(C,v);return x}function d(p){var y=p.split(":"),v=y.map(function(x){return Number(x)}),w=v.some(function(x){return isNaN(x)});if(w)return null;switch(v.length){case 2:return{start:v[0],end:v[1],step:1};case 3:return{start:v[0],end:v[2],step:v[1]};default:return null}}}),LD="reshape",vbe=["typed","isInteger","matrix"],ybe=Le(LD,vbe,r=>{var{typed:e,isInteger:t}=r;return e(LD,{"Matrix, Array":function(i,a){return i.reshape(a,!0)},"Array, Array":function(i,a){return a.forEach(function(s){if(!t(s))throw new TypeError("Invalid size for dimension: "+s)}),r3(i,a)}})}),xbe="resize",wbe=["config","matrix"],_be=Le(xbe,wbe,r=>{var{config:e,matrix:t}=r;return function(a,s,o){if(arguments.length!==2&&arguments.length!==3)throw new c0("resize",arguments.length,2,3);if(Lr(s)&&(s=s.valueOf()),sn(s[0])&&(s=s.map(function(c){return sn(c)?c.toNumber():c})),Lr(a))return a.resize(s,o,!0);if(typeof a=="string")return n(a,s,o);var l=Array.isArray(a)?!1:e.matrix!=="Array";if(s.length===0){for(;Array.isArray(a);)a=a[0];return Yr(a)}else{Array.isArray(a)||(a=[a]),a=Yr(a);var u=hp(a,s,o);return l?t(u):u}};function n(i,a,s){if(s!==void 0){if(typeof s!="string"||s.length!==1)throw new TypeError("Single character expected as defaultValue")}else s=" ";if(a.length!==1)throw new mn(a.length,1);var o=a[0];if(typeof o!="number"||!Sr(o))throw new TypeError("Invalid size, must contain positive integers (size: "+pn(a)+")");if(i.length>o)return i.substring(0,o);if(i.length<o){for(var l=i,u=0,c=o-i.length;u<c;u++)l+=s;return l}else return i}}),DD="rotate",Ebe=["typed","multiply","rotationMatrix"],bbe=Le(DD,Ebe,r=>{var{typed:e,multiply:t,rotationMatrix:n}=r;return e(DD,{"Array , number | BigNumber | Complex | Unit":function(s,o){i(s,2);var l=t(n(o),s);return l.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(s,o){return i(s,2),t(n(o),s)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(s,o,l){i(s,3);var u=t(n(o,l),s);return u},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(s,o,l){return i(s,3),t(n(o,l),s)}});function i(a,s){var o=Array.isArray(a)?en(a):a.size();if(o.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(o.length===2&&o[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(o[0]!==s)throw new RangeError("Vector must be of dimensions 1x".concat(s))}}),kD="rotationMatrix",Cbe=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],Sbe=Le(kD,Cbe,r=>{var{typed:e,config:t,multiplyScalar:n,addScalar:i,unaryMinus:a,norm:s,BigNumber:o,matrix:l,DenseMatrix:u,SparseMatrix:c,cos:h,sin:f}=r;return e(kD,{"":function(){return t.matrix==="Matrix"?l([]):[]},string:function(x){return l(x)},"number | BigNumber | Complex | Unit":function(x){return A(x,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(x,b){return A(x,b)},"number | BigNumber | Complex | Unit, Array":function(x,b){var C=l(b);return d(C),v(x,C,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(x,b){d(b);var C=b.storage()||(t.matrix==="Matrix"?"dense":void 0);return v(x,b,C)},"number | BigNumber | Complex | Unit, Array, string":function(x,b,C){var S=l(b);return d(S),v(x,S,C)},"number | BigNumber | Complex | Unit, Matrix, string":function(x,b,C){return d(b),v(x,b,C)}});function A(w,x){var b=sn(w),C=b?new o(-1):-1,S=h(w),I=f(w),B=[[S,n(C,I)],[I,S]];return y(B,x)}function d(w){var x=w.size();if(x.length<1||x[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function p(w){return w.reduce((x,b)=>n(x,b))}function y(w,x){if(x){if(x==="sparse")return new c(w);if(x==="dense")return new u(w);throw new TypeError('Unknown matrix type "'.concat(x,'"'))}return w}function v(w,x,b){var C=s(x);if(C===0)throw new RangeError("Rotation around zero vector");var S=sn(w)?o:null,I=S?new S(1):1,B=S?new S(-1):-1,T=S?new S(x.get([0])/C):x.get([0])/C,M=S?new S(x.get([1])/C):x.get([1])/C,F=S?new S(x.get([2])/C):x.get([2])/C,N=h(w),O=i(I,a(N)),L=f(w),G=i(N,p([T,T,O])),R=i(p([T,M,O]),p([B,F,L])),U=i(p([T,F,O]),p([M,L])),W=i(p([T,M,O]),p([F,L])),Q=i(N,p([M,M,O])),re=i(p([M,F,O]),p([B,T,L])),oe=i(p([T,F,O]),p([B,M,L])),P=i(p([M,F,O]),p([T,L])),z=i(N,p([F,F,O])),K=[[G,R,U],[W,Q,re],[oe,P,z]];return y(K,b)}}),RD="row",Bbe=["typed","Index","matrix","range"],nH=Le(RD,Bbe,r=>{var{typed:e,Index:t,matrix:n,range:i}=r;return e(RD,{"Matrix, number":a,"Array, number":function(o,l){return a(n(Yr(o)),l).valueOf()}});function a(s,o){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Ei(o,s.size()[0]);var l=i(0,s.size()[1]),u=new t(o,l),c=s.subset(u);return Lr(c)?c:n([[c]])}}),OD="size",Tbe=["typed","config","?matrix"],Nbe=Le(OD,Tbe,r=>{var{typed:e,config:t,matrix:n}=r;return e(OD,{Matrix:function(a){return a.create(a.size())},Array:en,string:function(a){return t.matrix==="Array"?[a.length]:n([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return t.matrix==="Array"?[]:n?n([]):tH()}})}),PD="squeeze",Ibe=["typed","matrix"],Fbe=Le(PD,Ibe,r=>{var{typed:e,matrix:t}=r;return e(PD,{Array:function(i){return Mw(Yr(i))},Matrix:function(i){var a=Mw(i.toArray());return Array.isArray(a)?t(a):a},any:function(i){return Yr(i)}})}),UD="subset",Mbe=["typed","matrix","zeros","add"],iH=Le(UD,Mbe,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r;return e(UD,{"Matrix, Index":function(o,l){return cp(l)?t():(Fw(o,l),o.subset(l))},"Array, Index":e.referTo("Matrix, Index",function(s){return function(o,l){var u=s(t(o),l);return l.isScalar()?u:u.valueOf()}}),"Object, Index":Dbe,"string, Index":Lbe,"Matrix, Index, any, any":function(o,l,u,c){return cp(l)?o:(Fw(o,l),o.clone().subset(l,a(u,l),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,l,u,c){var h=s(t(o),l,u,c);return h.isMatrix?h.valueOf():h}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,l,u){return s(t(o),l,u,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,l,u){return s(o,l,u,void 0)}}),"string, Index, string":QD,"string, Index, string, string":QD,"Object, Index, any":kbe});function a(s,o){if(typeof s=="string")throw new Error("can't boradcast a string");if(o._isScalar)return s;var l=o.size();if(l.every(u=>u>0))try{return i(s,n(l))}catch{return s}else return s}});function Lbe(r,e){if(!j_(e))throw new TypeError("Index expected");if(cp(e))return"";if(Fw(Array.from(r),e),e.size().length!==1)throw new mn(e.size().length,1);var t=r.length;Ei(e.min()[0],t),Ei(e.max()[0],t);var n=e.dimension(0),i="";return n.forEach(function(a){i+=r.charAt(a)}),i}function QD(r,e,t,n){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(cp(e))return r;if(Fw(Array.from(r),e),e.size().length!==1)throw new mn(e.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var i=e.dimension(0),a=i.size()[0];if(a!==t.length)throw new mn(i.size()[0],t.length);var s=r.length;Ei(e.min()[0]),Ei(e.max()[0]);for(var o=[],l=0;l<s;l++)o[l]=r.charAt(l);if(i.forEach(function(h,f){o[h]=t.charAt(f[0])}),o.length>s)for(var u=s-1,c=o.length;u<c;u++)o[u]||(o[u]=n);return o.join("")}function Dbe(r,e){if(!cp(e)){if(e.size().length!==1)throw new mn(e.size(),1);var t=e.dimension(0);if(typeof t!="string")throw new TypeError("String expected as index to retrieve an object property");return jo(r,t)}}function kbe(r,e,t){if(cp(e))return r;if(e.size().length!==1)throw new mn(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var i=Yr(r);return lp(i,n,t),i}var GD="transpose",Rbe=["typed","matrix"],Obe=Le(GD,Rbe,r=>{var{typed:e,matrix:t}=r;return e(GD,{Array:s=>n(t(s)).valueOf(),Matrix:n,any:Yr});function n(s){var o=s.size(),l;switch(o.length){case 1:l=s.clone();break;case 2:{var u=o[0],c=o[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+pn(o)+")");switch(s.storage()){case"dense":l=i(s,u,c);break;case"sparse":l=a(s,u,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+pn(o)+")")}return l}function i(s,o,l){for(var u=s._data,c=[],h,f=0;f<l;f++){h=c[f]=[];for(var A=0;A<o;A++)h[A]=Yr(u[A][f])}return s.createDenseMatrix({data:c,size:[l,o],datatype:s._datatype})}function a(s,o,l){for(var u=s._values,c=s._index,h=s._ptr,f=u?[]:void 0,A=[],d=[],p=[],y=0;y<o;y++)p[y]=0;var v,w,x;for(v=0,w=c.length;v<w;v++)p[c[v]]++;for(var b=0,C=0;C<o;C++)d.push(b),b+=p[C],p[C]=d[C];for(d.push(b),x=0;x<l;x++)for(var S=h[x],I=h[x+1],B=S;B<I;B++){var T=p[c[B]]++;A[T]=x,u&&(f[T]=Yr(u[B]))}return s.createSparseMatrix({values:f,index:A,ptr:d,size:[l,o],datatype:s._datatype})}}),HD="ctranspose",Pbe=["typed","transpose","conj"],Ube=Le(HD,Pbe,r=>{var{typed:e,transpose:t,conj:n}=r;return e(HD,{any:function(a){return n(t(a))}})}),zD="zeros",Qbe=["typed","config","matrix","BigNumber"],Gbe=Le(zD,Qbe,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(zD,{"":function(){return t.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var h=u.pop();return a(u,h)}else return t.matrix==="Array"?a(u):a(u,"default")},Array:a,Matrix:function(u){var c=u.storage();return a(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return a(u.valueOf(),c)}});function a(l,u){var c=s(l),h=c?new i(0):0;if(o(l),u){var f=n(u);return l.length>0?f.resize(l,h):f}else{var A=[];return l.length>0?hp(A,l,h):A}}function s(l){var u=!1;return l.forEach(function(c,h,f){sn(c)&&(u=!0,f[h]=c.toNumber())}),u}function o(l){l.forEach(function(u){if(typeof u!="number"||!Sr(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}}),qD="fft",Hbe=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],zbe=Le(qD,Hbe,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:i,divideScalar:a,exp:s,tau:o,i:l,dotDivide:u,conj:c,pow:h,ceil:f,log2:A}=r;return e(qD,{Array:d,Matrix:function(x){return x.create(d(x.toArray()))}});function d(w){var x=en(w);return x.length===1?v(w,x[0]):p(w.map(b=>d(b,x.slice(1))),0)}function p(w,x){var b=en(w);if(x!==0)return new Array(b[0]).fill(0).map((S,I)=>p(w[I],x-1));if(b.length===1)return v(w);function C(S){var I=en(S);return new Array(I[1]).fill(0).map((B,T)=>new Array(I[0]).fill(0).map((M,F)=>S[F][T]))}return C(p(C(w),1))}function y(w){for(var x=w.length,b=s(a(i(-1,i(l,o)),x)),C=[],S=1-x;S<x;S++)C.push(h(b,a(h(S,2),2)));for(var I=h(2,f(A(x+x-1))),B=[...new Array(x).fill(0).map((R,U)=>i(w[U],C[x-1+U])),...new Array(I-x).fill(0)],T=[...new Array(x+x-1).fill(0).map((R,U)=>a(1,C[U])),...new Array(I-(x+x-1)).fill(0)],M=v(B),F=v(T),N=new Array(I).fill(0).map((R,U)=>i(M[U],F[U])),O=u(c(d(c(N))),I),L=[],G=x-1;G<x+x-1;G++)L.push(i(O[G],C[G]));return L}function v(w){var x=w.length;if(x===1)return[w[0]];if(x%2===0){for(var b=[...v(w.filter((B,T)=>T%2===0)),...v(w.filter((B,T)=>T%2===1))],C=0;C<x/2;C++){var S=b[C],I=i(b[C+x/2],s(i(i(o,l),a(-C,x))));b[C]=n(S,I),b[C+x/2]=n(S,i(-1,I))}return b}else return y(w)}}),jD="ifft",qbe=["typed","fft","dotDivide","conj"],jbe=Le(jD,qbe,r=>{var{typed:e,fft:t,dotDivide:n,conj:i}=r;return e(jD,{"Array | Matrix":function(s){var o=Lr(s)?s.size():en(s);return n(i(t(i(s))),o.reduce((l,u)=>l*u,1))}})});function $be(r,e){if(oi(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(oi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Kbe(r){var e=$be(r,"string");return oi(e)=="symbol"?e:e+""}function as(r,e,t){return(e=Kbe(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function $D(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Vbe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$D(Object(t),!0).forEach(function(n){as(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):$D(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Wbe="solveODE",Ybe=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],Xbe=Le(Wbe,Ybe,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:a,max:s,map:o,abs:l,isPositive:u,isNegative:c,larger:h,smaller:f,matrix:A,bignumber:d,unaryMinus:p}=r;function y(B){return function(T,M,F,N){var O=!(M.length===2&&(M.every(S)||M.every(yu)));if(O)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var L=M[0],G=M[1],R=h(G,L),U=N.firstStep;if(U!==void 0&&!u(U))throw new Error('"firstStep" must be positive');var W=N.maxStep;if(W!==void 0&&!u(W))throw new Error('"maxStep" must be positive');var Q=N.minStep;if(Q&&c(Q))throw new Error('"minStep" must be positive or zero');var re=[L,G,U,Q,W].filter(Ae=>Ae!==void 0);if(!(re.every(S)||re.every(yu)))throw new Error('Inconsistent type of "t" dependant variables');for(var oe=1,P=N.tol?N.tol:1e-4,z=N.minDelta?N.minDelta:.2,K=N.maxDelta?N.maxDelta:5,J=N.maxIter?N.maxIter:1e4,ue=[L,G,...F,W,Q].some(sn),[ge,le,me,xe]=ue?[d(B.a),d(B.c),d(B.b),d(B.bp)]:[B.a,B.c,B.b,B.bp],Be=U?R?U:p(U):a(n(G,L),oe),Y=[L],Ve=[F],te=n(me,xe),se=0,Z=0,he=b(R),ne=C(R);he(Y[se],G);){var ae=[];Be=ne(Y[se],G,Be),ae.push(T(Y[se],Ve[se]));for(var _e=1;_e<le.length;++_e)ae.push(T(t(Y[se],i(le[_e],Be)),t(Ve[se],i(Be,ge[_e],ae))));var Me=s(l(o(i(te,ae),Ae=>yu(Ae)?Ae.value:Ae)));Me<P&&P/Me>1/4&&(Y.push(t(Y[se],Be)),Ve.push(t(Ve[se],i(Be,me,ae))),se++);var be=.84*(P/Me)**(1/5);if(f(be,z)?be=z:h(be,K)&&(be=K),be=ue?d(be):be,Be=i(Be,be),W&&h(l(Be),W)?Be=R?W:p(W):Q&&f(l(Be),Q)&&(Be=R?Q:p(Q)),Z++,Z>J)throw new Error("Maximum number of iterations reached, try changing options")}return{t:Y,y:Ve}}}function v(B,T,M,F){var N=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],O=[null,1/2,3/4,1],L=[2/9,1/3,4/9,0],G=[7/24,1/4,1/3,1/8],R={a:N,c:O,b:L,bp:G};return y(R)(B,T,M,F)}function w(B,T,M,F){var N=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],O=[null,1/5,3/10,4/5,8/9,1,1],L=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],G=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],R={a:N,c:O,b:L,bp:G};return y(R)(B,T,M,F)}function x(B,T,M,F){var N=F.method?F.method:"RK45",O={RK23:v,RK45:w};if(N.toUpperCase()in O){var L=Vbe({},F);return delete L.method,O[N.toUpperCase()](B,T,M,L)}else{var G=Object.keys(O).map(U=>'"'.concat(U,'"')),R="".concat(G.slice(0,-1).join(", ")," and ").concat(G.slice(-1));throw new Error('Unavailable method "'.concat(N,'". Available methods are ').concat(R))}}function b(B){return B?f:h}function C(B){var T=B?h:f;return function(M,F,N){var O=t(M,N);return T(O,F)?n(F,M):N}}function S(B){return sn(B)||an(B)}function I(B,T,M,F){var N=x(B,T.toArray(),M.toArray(),F);return{t:A(N.t),y:A(N.y)}}return e("solveODE",{"function, Array, Array, Object":x,"function, Matrix, Matrix, Object":I,"function, Array, Array":(B,T,M)=>x(B,T,M,{}),"function, Matrix, Matrix":(B,T,M)=>I(B,T,M,{}),"function, Array, number | BigNumber | Unit":(B,T,M)=>{var F=x(B,T,[M],{});return{t:F.t,y:F.y.map(N=>N[0])}},"function, Matrix, number | BigNumber | Unit":(B,T,M)=>{var F=x(B,T.toArray(),[M],{});return{t:A(F.t),y:A(F.y.map(N=>N[0]))}},"function, Array, number | BigNumber | Unit, Object":(B,T,M,F)=>{var N=x(B,T,[M],F);return{t:N.t,y:N.y.map(O=>O[0])}},"function, Matrix, number | BigNumber | Unit, Object":(B,T,M,F)=>{var N=x(B,T.toArray(),[M],F);return{t:A(N.t),y:A(N.y.map(O=>O[0]))}}})}),Zbe="erf",Jbe=["typed"],eCe=Le(Zbe,Jbe,r=>{var{typed:e}=r;return e("name",{number:function(s){var o=Math.abs(s);return o>=nCe?vA(s):o<=tCe?vA(s)*t(o):o<=4?vA(s)*(1-n(o)):vA(s)*(1-i(o))},"Array | Matrix":e.referToSelf(a=>s=>vn(s,a))});function t(a){var s=a*a,o=kh[0][4]*s,l=s,u;for(u=0;u<3;u+=1)o=(o+kh[0][u])*s,l=(l+V0[0][u])*s;return a*(o+kh[0][3])/(l+V0[0][3])}function n(a){var s=kh[1][8]*a,o=a,l;for(l=0;l<7;l+=1)s=(s+kh[1][l])*a,o=(o+V0[1][l])*a;var u=(s+kh[1][7])/(o+V0[1][7]),c=parseInt(a*16)/16,h=(a-c)*(a+c);return Math.exp(-c*c)*Math.exp(-h)*u}function i(a){var s=1/(a*a),o=kh[2][5]*s,l=s,u;for(u=0;u<4;u+=1)o=(o+kh[2][u])*s,l=(l+V0[2][u])*s;var c=s*(o+kh[2][4])/(l+V0[2][4]);c=(rCe-c)/a,s=parseInt(a*16)/16;var h=(a-s)*(a+s);return Math.exp(-s*s)*Math.exp(-h)*c}}),tCe=.46875,rCe=.5641895835477563,kh=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],V0=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],nCe=Math.pow(2,53),KD="zeta",iCe=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],aCe=Le(KD,iCe,r=>{var{typed:e,config:t,multiply:n,pow:i,divide:a,factorial:s,equal:o,smallerEq:l,isNegative:u,gamma:c,sin:h,subtract:f,add:A,Complex:d,BigNumber:p,pi:y}=r;return e(KD,{number:S=>v(S,I=>I,()=>20),BigNumber:S=>v(S,I=>new p(I),()=>Math.abs(Math.log10(t.epsilon))),Complex:w});function v(S,I,B){return o(S,0)?I(-.5):o(S,1)?I(NaN):isFinite(S)?x(S,I,B,T=>T):u(S)?I(NaN):I(1)}function w(S){return S.re===0&&S.im===0?new d(-.5):S.re===1?new d(NaN,NaN):S.re===1/0&&S.im===0?new d(1):S.im===1/0||S.re===-1/0?new d(NaN,NaN):x(S,I=>I,I=>Math.round(1.3*15+.9*Math.abs(I.im)),I=>I.re)}function x(S,I,B,T){var M=B(S);if(T(S)>-(M-1)/2)return C(S,I(M),I);var F=n(i(2,S),i(I(y),f(S,1)));return F=n(F,h(n(a(I(y),2),S))),F=n(F,c(f(1,S))),n(F,x(f(1,S),I,B,T))}function b(S,I){for(var B=S,T=S;l(T,I);T=A(T,1)){var M=a(n(s(A(I,f(T,1))),i(4,T)),n(s(f(I,T)),s(n(2,T))));B=A(B,M)}return n(I,B)}function C(S,I,B){for(var T=a(1,n(b(B(0),I),f(1,i(2,f(1,S))))),M=B(0),F=B(1);l(F,I);F=A(F,1))M=A(M,a(n((-1)**(F-1),b(F,I)),i(F,S)));return n(T,M)}}),VD="mode",sCe=["typed","isNaN","isNumeric"],oCe=Le(VD,sCe,r=>{var{typed:e,isNaN:t,isNumeric:n}=r;return e(VD,{"Array | Matrix":i,"...":function(s){return i(s)}});function i(a){a=jn(a.valueOf());var s=a.length;if(s===0)throw new Error("Cannot calculate mode of an empty array");for(var o={},l=[],u=0,c=0;c<a.length;c++){var h=a[c];if(n(h)&&t(h))throw new Error("Cannot calculate mode of an array containing NaN values");h in o||(o[h]=0),o[h]++,o[h]===u?l.push(h):o[h]>u&&(u=o[h],l=[h])}return l}});function Yo(r,e,t){var n;return String(r).includes("Unexpected type")?(n=arguments.length>2?" (type: "+Si(t)+", value: "+JSON.stringify(t)+")":" (type: "+r.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(r).includes("complex numbers")?(n=arguments.length>2?" (type: "+Si(t)+", value: "+JSON.stringify(t)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):r}var WD="prod",lCe=["typed","config","multiplyScalar","numeric"],uCe=Le(WD,lCe,r=>{var{typed:e,config:t,multiplyScalar:n,numeric:i}=r;return e(WD,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(o,l){throw new Error("prod(A, dim) is not yet supported")},"...":function(o){return a(o)}});function a(s){var o;if(cf(s,function(l){try{o=o===void 0?l:n(o,l)}catch(u){throw Yo(u,"prod",l)}}),typeof o=="string"&&(o=i(o,t.number)),o===void 0)throw new Error("Cannot calculate prod of an empty array");return o}}),YD="format",cCe=["typed"],hCe=Le(YD,cCe,r=>{var{typed:e}=r;return e(YD,{any:pn,"any, Object | function | number | BigNumber":pn})}),XD="bin",fCe=["typed","format"],ACe=Le(XD,fCe,r=>{var{typed:e,format:t}=r;return e(XD,{"number | BigNumber":function(i){return t(i,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(i,a){return t(i,{notation:"bin",wordSize:a})}})}),ZD="oct",dCe=["typed","format"],gCe=Le(ZD,dCe,r=>{var{typed:e,format:t}=r;return e(ZD,{"number | BigNumber":function(i){return t(i,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(i,a){return t(i,{notation:"oct",wordSize:a})}})}),JD="hex",pCe=["typed","format"],mCe=Le(JD,pCe,r=>{var{typed:e,format:t}=r;return e(JD,{"number | BigNumber":function(i){return t(i,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(i,a){return t(i,{notation:"hex",wordSize:a})}})}),aH=/\$([\w.]+)/g,ek="print",vCe=["typed"],sH=Le(ek,vCe,r=>{var{typed:e}=r;return e(ek,{"string, Object | Array":tk,"string, Object | Array, number | Object":tk})});function tk(r,e,t){return r.replace(aH,function(n,i){var a=i.split("."),s=e[a.shift()];for(s!==void 0&&s.isMatrix&&(s=s.toArray());a.length&&s!==void 0;){var o=a.shift();s=o?s[o]:s+"."}return s!==void 0?ho(s)?s:pn(s,t):n})}var rk="to",yCe=["typed","matrix","concat"],xCe=Le(rk,yCe,r=>{var{typed:e,matrix:t,concat:n}=r,i=Li({typed:e,matrix:t,concat:n});return e(rk,{"Unit, Unit | string":(a,s)=>a.to(s)},i({Ds:!0}))}),nk="isPrime",wCe=["typed"],_Ce=Le(nk,wCe,r=>{var{typed:e}=r;return e(nk,{number:function(n){if(n*0!==0)return!1;if(n<=3)return n>1;if(n%2===0||n%3===0)return!1;for(var i=5;i*i<=n;i+=6)if(n%i===0||n%(i+2)===0)return!1;return!0},BigNumber:function(n){if(n.toNumber()*0!==0)return!1;if(n.lte(3))return n.gt(1);if(n.mod(2).eq(0)||n.mod(3).eq(0))return!1;if(n.lt(Math.pow(2,32))){for(var i=n.toNumber(),a=5;a*a<=i;a+=6)if(i%a===0||i%(a+2)===0)return!1;return!0}function s(w,x,b){for(var C=1;!x.eq(0);)x.mod(2).eq(0)?(x=x.div(2),w=w.mul(w).mod(b)):(x=x.sub(1),C=w.mul(C).mod(b));return C}var o=n.constructor.clone({precision:n.toFixed(0).length*2});n=new o(n);for(var l=0,u=n.sub(1);u.mod(2).eq(0);)u=u.div(2),l+=1;var c=null;if(n.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(w=>w<n);else{var h=Math.min(n.toNumber()-2,Math.floor(2*Math.pow(n.toFixed(0).length*Math.log(10),2)));c=[];for(var f=2;f<=h;f+=1)c.push(h)}for(var A=0;A<c.length;A+=1){var d=c[A],p=s(n.sub(n).add(d),u,n);if(!p.eq(1)){for(var y=0,v=p;!v.eq(n.sub(1));y+=1,v=v.mul(v).mod(n))if(y===l-1)return!1}}return!0},"Array | Matrix":e.referToSelf(t=>n=>vn(n,t))})}),ECe="numeric",bCe=["number","?bignumber","?fraction"],CCe=Le(ECe,bCe,r=>{var{number:e,bignumber:t,fraction:n}=r,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:s=>e(s),BigNumber:t?s=>t(s):l3,Fraction:n?s=>n(s):eH};return function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=Si(o);if(!(c in i))throw new TypeError("Cannot convert "+o+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(l in a))throw new TypeError("Cannot convert "+o+' to type "'+l+'"; valid output types are '+Object.keys(a).join(", "));return l===c?o:a[l](o)}}),ik="divideScalar",SCe=["typed","numeric"],BCe=Le(ik,SCe,r=>{var{typed:e,numeric:t}=r;return e(ik,{"number, number":function(i,a){return i/a},"Complex, Complex":function(i,a){return i.div(a)},"BigNumber, BigNumber":function(i,a){return i.div(a)},"Fraction, Fraction":function(i,a){return i.div(a)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})}),ak="pow",TCe=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],NCe=Le(ak,TCe,r=>{var{typed:e,config:t,identity:n,multiply:i,matrix:a,inv:s,number:o,fraction:l,Complex:u}=r;return e(ak,{"number, number":c,"Complex, Complex":function(d,p){return d.pow(p)},"BigNumber, BigNumber":function(d,p){return p.isInteger()||d>=0||t.predictable?d.pow(p):new u(d.toNumber(),0).pow(p.toNumber(),0)},"Fraction, Fraction":function(d,p){var y=d.pow(p);if(y!=null)return y;if(t.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(d.valueOf(),p.valueOf())},"Array, number":h,"Array, BigNumber":function(d,p){return h(d,p.toNumber())},"Matrix, number":f,"Matrix, BigNumber":function(d,p){return f(d,p.toNumber())},"Unit, number | BigNumber":function(d,p){return d.pow(p)}});function c(A,d){if(t.predictable&&!Sr(d)&&A<0)try{var p=l(d),y=o(p);if((d===y||Math.abs((d-y)/d)<1e-14)&&p.d%2===1)return(p.n%2===0?1:-1)*Math.pow(-A,d)}catch{}return t.predictable&&(A<-1&&d===1/0||A>-1&&A<0&&d===-1/0)?NaN:Sr(d)||A>=0||t.predictable?cG(A,d):A*A<1&&d===1/0||A*A>1&&d===-1/0?0:new u(A,0).pow(d,0)}function h(A,d){if(!Sr(d))throw new TypeError("For A^b, b must be an integer (value is "+d+")");var p=en(A);if(p.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+p.length+" dimensions)");if(p[0]!==p[1])throw new Error("For A^b, A must be square (size is "+p[0]+"x"+p[1]+")");if(d<0)try{return h(s(A),-d)}catch(w){throw w.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+d+")"):w}for(var y=n(p[0]).valueOf(),v=A;d>=1;)(d&1)===1&&(y=i(v,y)),d>>=1,v=i(v,v);return y}function f(A,d){return a(h(A.valueOf(),d))}}),W0="Number of decimals in function round must be an integer",sk="round",ICe=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],FCe=Le(sk,ICe,r=>{var{typed:e,config:t,matrix:n,equalScalar:i,zeros:a,BigNumber:s,DenseMatrix:o}=r,l=$s({typed:e,equalScalar:i}),u=ss({typed:e,DenseMatrix:o}),c=gc({typed:e});function h(f){return Math.abs(U1(f).exponent)}return e(sk,{number:function(A){var d=_m(A,h(t.epsilon)),p=Wo(A,d,t.epsilon)?d:A;return _m(p)},"number, number":function(A,d){var p=h(t.epsilon);if(d>=p)return _m(A,d);var y=_m(A,p),v=Wo(A,y,t.epsilon)?y:A;return _m(v,d)},"number, BigNumber":function(A,d){if(!d.isInteger())throw new TypeError(W0);return new s(A).toDecimalPlaces(d.toNumber())},Complex:function(A){return A.round()},"Complex, number":function(A,d){if(d%1)throw new TypeError(W0);return A.round(d)},"Complex, BigNumber":function(A,d){if(!d.isInteger())throw new TypeError(W0);var p=d.toNumber();return A.round(p)},BigNumber:function(A){var d=new s(A).toDecimalPlaces(h(t.epsilon)),p=Bu(A,d,t.epsilon)?d:A;return p.toDecimalPlaces(0)},"BigNumber, BigNumber":function(A,d){if(!d.isInteger())throw new TypeError(W0);var p=h(t.epsilon);if(d>=p)return A.toDecimalPlaces(d.toNumber());var y=A.toDecimalPlaces(p),v=Bu(A,y,t.epsilon)?y:A;return v.toDecimalPlaces(d.toNumber())},Fraction:function(A){return A.round()},"Fraction, number":function(A,d){if(d%1)throw new TypeError(W0);return A.round(d)},"Fraction, BigNumber":function(A,d){if(!d.isInteger())throw new TypeError(W0);return A.round(d.toNumber())},"Unit, number, Unit":e.referToSelf(f=>function(A,d,p){var y=A.toNumeric(p);return p.multiply(f(y,d))}),"Unit, BigNumber, Unit":e.referToSelf(f=>(A,d,p)=>f(A,d.toNumber(),p)),"Unit, Unit":e.referToSelf(f=>(A,d)=>f(A,0,d)),"Array | Matrix, number, Unit":e.referToSelf(f=>(A,d,p)=>vn(A,y=>f(y,d,p))),"Array | Matrix, BigNumber, Unit":e.referToSelf(f=>(A,d,p)=>f(A,d.toNumber(),p)),"Array | Matrix, Unit":e.referToSelf(f=>(A,d)=>f(A,0,d)),"Array | Matrix":e.referToSelf(f=>A=>vn(A,f)),"SparseMatrix, number | BigNumber":e.referToSelf(f=>(A,d)=>l(A,d,f,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(f=>(A,d)=>c(A,d,f,!1)),"Array, number | BigNumber":e.referToSelf(f=>(A,d)=>c(n(A),d,f,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(f=>(A,d)=>i(A,0)?a(d.size(),d.storage()):u(d,A,f,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(f=>(A,d)=>i(A,0)?a(d.size(),d.storage()):c(d,A,f,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(f=>(A,d)=>c(n(d),A,f,!0).valueOf())})}),ok="log",MCe=["config","typed","divideScalar","Complex"],LCe=Le(ok,MCe,r=>{var{typed:e,config:t,divideScalar:n,Complex:i}=r;return e(ok,{number:function(s){return s>=0||t.predictable?Fxe(s):new i(s,0).log()},Complex:function(s){return s.log()},BigNumber:function(s){return!s.isNegative()||t.predictable?s.ln():new i(s.toNumber(),0).log()},"any, any":e.referToSelf(a=>(s,o)=>n(a(s),a(o)))})}),lk="log1p",DCe=["typed","config","divideScalar","log","Complex"],kCe=Le(lk,DCe,r=>{var{typed:e,config:t,divideScalar:n,log:i,Complex:a}=r;return e(lk,{number:function(l){return l>=-1||t.predictable?Tye(l):s(new a(l,0))},Complex:s,BigNumber:function(l){var u=l.plus(1);return!u.isNegative()||t.predictable?u.ln():s(new a(l.toNumber(),0))},"Array | Matrix":e.referToSelf(o=>l=>vn(l,o)),"any, any":e.referToSelf(o=>(l,u)=>n(o(l),i(u)))});function s(o){var l=o.re+1;return new a(Math.log(Math.sqrt(l*l+o.im*o.im)),Math.atan2(o.im,l))}}),uk="nthRoots",RCe=["config","typed","divideScalar","Complex"],OCe=Le(uk,RCe,r=>{var{typed:e,config:t,divideScalar:n,Complex:i}=r,a=[function(l){return new i(l,0)},function(l){return new i(0,l)},function(l){return new i(-l,0)},function(l){return new i(0,-l)}];function s(o,l){if(l<0)throw new Error("Root must be greater than zero");if(l===0)throw new Error("Root must be non-zero");if(l%1!==0)throw new Error("Root must be an integer");if(o===0||o.abs()===0)return[new i(0,0)];var u=typeof o=="number",c;(u||o.re===0||o.im===0)&&(u?c=2*+(o<0):o.im===0?c=2*+(o.re<0):c=2*+(o.im<0)+1);for(var h=o.arg(),f=o.abs(),A=[],d=Math.pow(f,1/l),p=0;p<l;p++){var y=(c+4*p)/l;if(y===Math.round(y)){A.push(a[y%4](d));continue}A.push(new i({r:d,phi:(h+2*Math.PI*p)/l}))}return A}return e(uk,{Complex:function(l){return s(l,2)},"Complex, number":s})}),ck="dotPow",PCe=["typed","equalScalar","matrix","pow","DenseMatrix","concat"],UCe=Le(ck,PCe,r=>{var{typed:e,equalScalar:t,matrix:n,pow:i,DenseMatrix:a,concat:s}=r,o=Zo({typed:e}),l=Ah({typed:e,DenseMatrix:a}),u=$s({typed:e,equalScalar:t}),c=ss({typed:e,DenseMatrix:a}),h=Li({typed:e,matrix:n,concat:s}),f={};for(var A in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,A)&&!A.includes("Matrix")&&!A.includes("Array")&&(f[A]=i.signatures[A]);var d=e(f);return e(ck,h({elop:d,SS:l,DS:o,Ss:u,sS:c}))}),hk="dotDivide",QCe=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat"],GCe=Le(hk,QCe,r=>{var{typed:e,matrix:t,equalScalar:n,divideScalar:i,DenseMatrix:a,concat:s}=r,o=pc({typed:e,equalScalar:n}),l=Zo({typed:e}),u=Ah({typed:e,DenseMatrix:a}),c=$s({typed:e,equalScalar:n}),h=ss({typed:e,DenseMatrix:a}),f=Li({typed:e,matrix:t,concat:s});return e(hk,f({elop:i,SS:u,DS:l,SD:o,Ss:c,sS:h}))});function G1(r){var{DenseMatrix:e}=r;return function(n,i,a){var s=n.size();if(s.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+pn(s)+")");var o=s[0],l=s[1];if(o!==l)throw new RangeError("Matrix must be square (size: "+pn(s)+")");var u=[];if(Lr(i)){var c=i.size(),h=i._data;if(c.length===1){if(c[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var f=0;f<o;f++)u[f]=[h[f]];return new e({data:u,size:[o,1],datatype:i._datatype})}if(c.length===2){if(c[0]!==o||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Bw(i)){if(a){u=[];for(var A=0;A<o;A++)u[A]=[h[A][0]];return new e({data:u,size:[o,1],datatype:i._datatype})}return i}if(Cd(i)){for(var d=0;d<o;d++)u[d]=[0];for(var p=i._values,y=i._index,v=i._ptr,w=v[1],x=v[0];x<w;x++){var b=y[x];u[b][0]=p[x]}return new e({data:u,size:[o,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(ti(i)){var C=en(i);if(C.length===1){if(C[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var S=0;S<o;S++)u[S]=[i[S]];return new e({data:u,size:[o,1]})}if(C.length===2){if(C[0]!==o||C[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var I=0;I<o;I++)u[I]=[i[I][0]];return new e({data:u,size:[o,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var fk="lsolve",HCe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],zCe=Le(fk,HCe,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=r,l=G1({DenseMatrix:o});return e(fk,{"SparseMatrix, Array | Matrix":function(f,A){return c(f,A)},"DenseMatrix, Array | Matrix":function(f,A){return u(f,A)},"Array, Array | Matrix":function(f,A){var d=t(f),p=u(d,A);return p.valueOf()}});function u(h,f){f=l(h,f,!0);for(var A=f._data,d=h._size[0],p=h._size[1],y=[],v=h._data,w=0;w<p;w++){var x=A[w][0]||0,b=void 0;if(s(x,0))b=0;else{var C=v[w][w];if(s(C,0))throw new Error("Linear system cannot be solved since matrix is singular");b=n(x,C);for(var S=w+1;S<d;S++)A[S]=[a(A[S][0]||0,i(b,v[S][w]))]}y[w]=[b]}return new o({data:y,size:[d,1]})}function c(h,f){f=l(h,f,!0);for(var A=f._data,d=h._size[0],p=h._size[1],y=h._values,v=h._index,w=h._ptr,x=[],b=0;b<p;b++){var C=A[b][0]||0;if(s(C,0))x[b]=[0];else{for(var S=0,I=[],B=[],T=w[b],M=w[b+1],F=T;F<M;F++){var N=v[F];N===b?S=y[F]:N>b&&(I.push(y[F]),B.push(N))}if(s(S,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var O=n(C,S),L=0,G=B.length;L<G;L++){var R=B[L];A[R]=[a(A[R][0]||0,i(O,I[L]))]}x[b]=[O]}}return new o({data:x,size:[d,1]})}}),Ak="usolve",qCe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],jCe=Le(Ak,qCe,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=r,l=G1({DenseMatrix:o});return e(Ak,{"SparseMatrix, Array | Matrix":function(f,A){return c(f,A)},"DenseMatrix, Array | Matrix":function(f,A){return u(f,A)},"Array, Array | Matrix":function(f,A){var d=t(f),p=u(d,A);return p.valueOf()}});function u(h,f){f=l(h,f,!0);for(var A=f._data,d=h._size[0],p=h._size[1],y=[],v=h._data,w=p-1;w>=0;w--){var x=A[w][0]||0,b=void 0;if(s(x,0))b=0;else{var C=v[w][w];if(s(C,0))throw new Error("Linear system cannot be solved since matrix is singular");b=n(x,C);for(var S=w-1;S>=0;S--)A[S]=[a(A[S][0]||0,i(b,v[S][w]))]}y[w]=[b]}return new o({data:y,size:[d,1]})}function c(h,f){f=l(h,f,!0);for(var A=f._data,d=h._size[0],p=h._size[1],y=h._values,v=h._index,w=h._ptr,x=[],b=p-1;b>=0;b--){var C=A[b][0]||0;if(s(C,0))x[b]=[0];else{for(var S=0,I=[],B=[],T=w[b],M=w[b+1],F=M-1;F>=T;F--){var N=v[F];N===b?S=y[F]:N<b&&(I.push(y[F]),B.push(N))}if(s(S,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var O=n(C,S),L=0,G=B.length;L<G;L++){var R=B[L];A[R]=[a(A[R][0],i(O,I[L]))]}x[b]=[O]}}return new o({data:x,size:[d,1]})}}),dk="lsolveAll",$Ce=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],KCe=Le(dk,$Ce,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=r,l=G1({DenseMatrix:o});return e(dk,{"SparseMatrix, Array | Matrix":function(f,A){return c(f,A)},"DenseMatrix, Array | Matrix":function(f,A){return u(f,A)},"Array, Array | Matrix":function(f,A){var d=t(f),p=u(d,A);return p.map(y=>y.valueOf())}});function u(h,f){for(var A=[l(h,f,!0)._data.map(B=>B[0])],d=h._data,p=h._size[0],y=h._size[1],v=0;v<y;v++)for(var w=A.length,x=0;x<w;x++){var b=A[x];if(s(d[v][v],0))if(s(b[v],0)){if(x===0){var S=[...b];S[v]=1;for(var I=v+1;I<y;I++)S[I]=a(S[I],d[I][v]);A.push(S)}}else{if(x===0)return[];A.splice(x,1),x-=1,w-=1}else{b[v]=n(b[v],d[v][v]);for(var C=v+1;C<y;C++)b[C]=a(b[C],i(b[v],d[C][v]))}}return A.map(B=>new o({data:B.map(T=>[T]),size:[p,1]}))}function c(h,f){for(var A=[l(h,f,!0)._data.map(oe=>oe[0])],d=h._size[0],p=h._size[1],y=h._values,v=h._index,w=h._ptr,x=0;x<p;x++)for(var b=A.length,C=0;C<b;C++){for(var S=A[C],I=[],B=[],T=w[x],M=w[x+1],F=0,N=T;N<M;N++){var O=v[N];O===x?F=y[N]:O>x&&(I.push(y[N]),B.push(O))}if(s(F,0))if(s(S[x],0)){if(C===0){var U=[...S];U[x]=1;for(var W=0,Q=B.length;W<Q;W++){var re=B[W];U[re]=a(U[re],I[W])}A.push(U)}}else{if(C===0)return[];A.splice(C,1),C-=1,b-=1}else{S[x]=n(S[x],F);for(var L=0,G=B.length;L<G;L++){var R=B[L];S[R]=a(S[R],i(S[x],I[L]))}}}return A.map(oe=>new o({data:oe.map(P=>[P]),size:[d,1]}))}}),gk="usolveAll",VCe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],WCe=Le(gk,VCe,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=r,l=G1({DenseMatrix:o});return e(gk,{"SparseMatrix, Array | Matrix":function(f,A){return c(f,A)},"DenseMatrix, Array | Matrix":function(f,A){return u(f,A)},"Array, Array | Matrix":function(f,A){var d=t(f),p=u(d,A);return p.map(y=>y.valueOf())}});function u(h,f){for(var A=[l(h,f,!0)._data.map(B=>B[0])],d=h._data,p=h._size[0],y=h._size[1],v=y-1;v>=0;v--)for(var w=A.length,x=0;x<w;x++){var b=A[x];if(s(d[v][v],0))if(s(b[v],0)){if(x===0){var S=[...b];S[v]=1;for(var I=v-1;I>=0;I--)S[I]=a(S[I],d[I][v]);A.push(S)}}else{if(x===0)return[];A.splice(x,1),x-=1,w-=1}else{b[v]=n(b[v],d[v][v]);for(var C=v-1;C>=0;C--)b[C]=a(b[C],i(b[v],d[C][v]))}}return A.map(B=>new o({data:B.map(T=>[T]),size:[p,1]}))}function c(h,f){for(var A=[l(h,f,!0)._data.map(oe=>oe[0])],d=h._size[0],p=h._size[1],y=h._values,v=h._index,w=h._ptr,x=p-1;x>=0;x--)for(var b=A.length,C=0;C<b;C++){for(var S=A[C],I=[],B=[],T=w[x],M=w[x+1],F=0,N=M-1;N>=T;N--){var O=v[N];O===x?F=y[N]:O<x&&(I.push(y[N]),B.push(O))}if(s(F,0))if(s(S[x],0)){if(C===0){var U=[...S];U[x]=1;for(var W=0,Q=B.length;W<Q;W++){var re=B[W];U[re]=a(U[re],I[W])}A.push(U)}}else{if(C===0)return[];A.splice(C,1),C-=1,b-=1}else{S[x]=n(S[x],F);for(var L=0,G=B.length;L<G;L++){var R=B[L];S[R]=a(S[R],i(S[x],I[L]))}}}return A.map(oe=>new o({data:oe.map(P=>[P]),size:[d,1]}))}}),YCe="matAlgo08xS0Sid",XCe=["typed","equalScalar"],u3=Le(YCe,XCe,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s){var o=i._values,l=i._index,u=i._ptr,c=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),f=a._values,A=a._index,d=a._ptr,p=a._size,y=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==p.length)throw new mn(c.length,p.length);if(c[0]!==p[0]||c[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+p+")");if(!o||!f)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var v=c[0],w=c[1],x,b=t,C=0,S=s;typeof h=="string"&&h===y&&h!=="mixed"&&(x=h,b=e.find(t,[x,x]),C=e.convert(0,x),S=e.find(s,[x,x]));for(var I=[],B=[],T=[],M=[],F=[],N,O,L,G,R=0;R<w;R++){T[R]=B.length;var U=R+1;for(O=u[R],L=u[R+1],N=O;N<L;N++)G=l[N],F[G]=U,M[G]=o[N],B.push(G);for(O=d[R],L=d[R+1],N=O;N<L;N++)G=A[N],F[G]===U&&(M[G]=S(M[G],f[N]));for(N=T[R];N<B.length;){G=B[N];var W=M[G];b(W,C)?B.splice(N,1):(I.push(W),N++)}}return T[w]=B.length,i.createSparseMatrix({values:I,index:B,ptr:T,size:[v,w],datatype:h===i._datatype&&y===a._datatype?x:void 0})}}),c3=Le("useMatrixForArrayScalar",["typed","matrix"],r=>{var{typed:e,matrix:t}=r;return{"Array, number":e.referTo("DenseMatrix, number",n=>(i,a)=>n(t(i),a).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",n=>(i,a)=>n(t(i),a).valueOf()),"number, Array":e.referTo("number, DenseMatrix",n=>(i,a)=>n(i,t(a)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",n=>(i,a)=>n(i,t(a)).valueOf())}}),pk="leftShift",ZCe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],JCe=Le(pk,ZCe,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:a,concat:s}=r,o=jA({typed:e}),l=pc({typed:e,equalScalar:n}),u=u3({typed:e,equalScalar:n}),c=u0({typed:e,DenseMatrix:a}),h=$s({typed:e,equalScalar:n}),f=gc({typed:e}),A=Li({typed:e,matrix:t,concat:s}),d=c3({typed:e,matrix:t});return e(pk,{"number, number":gG,"BigNumber, BigNumber":yEe,"SparseMatrix, number | BigNumber":e.referToSelf(p=>(y,v)=>n(v,0)?y.clone():h(y,v,p,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(p=>(y,v)=>n(v,0)?y.clone():f(y,v,p,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(p=>(y,v)=>n(y,0)?i(v.size(),v.storage()):c(v,y,p,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(p=>(y,v)=>n(y,0)?i(v.size(),v.storage()):f(v,y,p,!0))},d,A({SS:u,DS:o,SD:l}))}),mk="rightArithShift",eSe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],tSe=Le(mk,eSe,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:a,concat:s}=r,o=jA({typed:e}),l=pc({typed:e,equalScalar:n}),u=u3({typed:e,equalScalar:n}),c=u0({typed:e,DenseMatrix:a}),h=$s({typed:e,equalScalar:n}),f=gc({typed:e}),A=Li({typed:e,matrix:t,concat:s}),d=c3({typed:e,matrix:t});return e(mk,{"number, number":pG,"BigNumber, BigNumber":xEe,"SparseMatrix, number | BigNumber":e.referToSelf(p=>(y,v)=>n(v,0)?y.clone():h(y,v,p,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(p=>(y,v)=>n(v,0)?y.clone():f(y,v,p,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(p=>(y,v)=>n(y,0)?i(v.size(),v.storage()):c(v,y,p,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(p=>(y,v)=>n(y,0)?i(v.size(),v.storage()):f(v,y,p,!0))},d,A({SS:u,DS:o,SD:l}))}),vk="rightLogShift",rSe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],nSe=Le(vk,rSe,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:a,concat:s}=r,o=jA({typed:e}),l=pc({typed:e,equalScalar:n}),u=u3({typed:e,equalScalar:n}),c=u0({typed:e,DenseMatrix:a}),h=$s({typed:e,equalScalar:n}),f=gc({typed:e}),A=Li({typed:e,matrix:t,concat:s}),d=c3({typed:e,matrix:t});return e(vk,{"number, number":mG,"SparseMatrix, number | BigNumber":e.referToSelf(p=>(y,v)=>n(v,0)?y.clone():h(y,v,p,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(p=>(y,v)=>n(v,0)?y.clone():f(y,v,p,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(p=>(y,v)=>n(y,0)?i(v.size(),v.storage()):c(v,y,p,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(p=>(y,v)=>n(y,0)?i(v.size(),v.storage()):f(v,y,p,!0))},d,A({SS:u,DS:o,SD:l}))}),yk="and",iSe=["typed","matrix","equalScalar","zeros","not","concat"],oH=Le(yk,iSe,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:a,concat:s}=r,o=pc({typed:e,equalScalar:n}),l=nE({typed:e,equalScalar:n}),u=$s({typed:e,equalScalar:n}),c=gc({typed:e}),h=Li({typed:e,matrix:t,concat:s});return e(yk,{"number, number":_G,"Complex, Complex":function(A,d){return(A.re!==0||A.im!==0)&&(d.re!==0||d.im!==0)},"BigNumber, BigNumber":function(A,d){return!A.isZero()&&!d.isZero()&&!A.isNaN()&&!d.isNaN()},"Unit, Unit":e.referToSelf(f=>(A,d)=>f(A.value||0,d.value||0)),"SparseMatrix, any":e.referToSelf(f=>(A,d)=>a(d)?i(A.size(),A.storage()):u(A,d,f,!1)),"DenseMatrix, any":e.referToSelf(f=>(A,d)=>a(d)?i(A.size(),A.storage()):c(A,d,f,!1)),"any, SparseMatrix":e.referToSelf(f=>(A,d)=>a(A)?i(A.size(),A.storage()):u(d,A,f,!0)),"any, DenseMatrix":e.referToSelf(f=>(A,d)=>a(A)?i(A.size(),A.storage()):c(d,A,f,!0)),"Array, any":e.referToSelf(f=>(A,d)=>f(t(A),d).valueOf()),"any, Array":e.referToSelf(f=>(A,d)=>f(A,t(d)).valueOf())},h({SS:l,DS:o}))}),Gw="compare",aSe=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],sSe=Le(Gw,aSe,r=>{var{typed:e,config:t,equalScalar:n,matrix:i,BigNumber:a,Fraction:s,DenseMatrix:o,concat:l}=r,u=Zo({typed:e}),c=rE({typed:e,equalScalar:n}),h=ss({typed:e,DenseMatrix:o}),f=Li({typed:e,matrix:i,concat:l}),A=Rp({typed:e});return e(Gw,oSe({typed:e,config:t}),{"boolean, boolean":function(p,y){return p===y?0:p>y?1:-1},"BigNumber, BigNumber":function(p,y){return Bu(p,y,t.epsilon)?new a(0):new a(p.cmp(y))},"Fraction, Fraction":function(p,y){return new s(p.compare(y))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},A,f({SS:c,DS:u,Ss:h}))}),oSe=Le(Gw,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Gw,{"number, number":function(i,a){return Wo(i,a,t.epsilon)?0:i>a?1:-1}})}),lSe=function r(e,t){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,s=/^0x[0-9a-f]+$/i,o=/^0/,l=function(x){return r.insensitive&&(""+x).toLowerCase()||""+x},u=l(e).replace(i,"")||"",c=l(t).replace(i,"")||"",h=u.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),A=parseInt(u.match(s),16)||h.length!==1&&u.match(a)&&Date.parse(u),d=parseInt(c.match(s),16)||A&&c.match(a)&&Date.parse(c)||null,p,y;if(d){if(A<d)return-1;if(A>d)return 1}for(var v=0,w=Math.max(h.length,f.length);v<w;v++){if(p=!(h[v]||"").match(o)&&parseFloat(h[v])||h[v]||0,y=!(f[v]||"").match(o)&&parseFloat(f[v])||f[v]||0,isNaN(p)!==isNaN(y))return isNaN(p)?1:-1;if(typeof p!=typeof y&&(p+="",y+=""),p<y)return-1;if(p>y)return 1}return 0};const Y0=Af(lSe);var xk="compareNatural",uSe=["typed","compare"],cSe=Le(xk,uSe,r=>{var{typed:e,compare:t}=r,n=t.signatures["boolean,boolean"];return e(xk,{"any, any":i});function i(l,u){var c=Si(l),h=Si(u),f;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(h==="number"||h==="BigNumber"||h==="Fraction"))return f=t(l,u),f.toString()!=="0"?f>0?1:-1:Y0(c,h);var A=["Array","DenseMatrix","SparseMatrix"];if(A.includes(c)||A.includes(h))return f=a(i,l,u),f!==0?f:Y0(c,h);if(c!==h)return Y0(c,h);if(c==="Complex")return hSe(l,u);if(c==="Unit")return l.equalBase(u)?i(l.value,u.value):s(i,l.formatUnits(),u.formatUnits());if(c==="boolean")return n(l,u);if(c==="string")return Y0(l,u);if(c==="Object")return o(i,l,u);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function a(l,u,c){return Cd(u)&&Cd(c)?s(l,u.toJSON().values,c.toJSON().values):Cd(u)?a(l,u.toArray(),c):Cd(c)?a(l,u,c.toArray()):Bw(u)?a(l,u.toJSON().data,c):Bw(c)?a(l,u,c.toJSON().data):Array.isArray(u)?Array.isArray(c)?s(l,u,c):a(l,u,[c]):a(l,[u],c)}function s(l,u,c){for(var h=0,f=Math.min(u.length,c.length);h<f;h++){var A=l(u[h],c[h]);if(A!==0)return A}return u.length>c.length?1:u.length<c.length?-1:0}function o(l,u,c){var h=Object.keys(u),f=Object.keys(c);h.sort(Y0),f.sort(Y0);var A=s(l,h,f);if(A!==0)return A;for(var d=0;d<h.length;d++){var p=l(u[h[d]],c[f[d]]);if(p!==0)return p}return 0}});function hSe(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0}var wk="compareText",fSe=["typed","matrix","concat"];S5.signature="any, any";var ASe=Le(wk,fSe,r=>{var{typed:e,matrix:t,concat:n}=r,i=Li({typed:e,matrix:t,concat:n});return e(wk,S5,i({elop:S5,Ds:!0}))}),Hw="equal",dSe=["typed","matrix","equalScalar","DenseMatrix","concat"],gSe=Le(Hw,dSe,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a}=r,s=Zo({typed:e}),o=Ah({typed:e,DenseMatrix:i}),l=ss({typed:e,DenseMatrix:i}),u=Li({typed:e,matrix:t,concat:a});return e(Hw,pSe({typed:e,equalScalar:n}),u({elop:n,SS:o,DS:s,Ss:l}))}),pSe=Le(Hw,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(Hw,{"any, any":function(i,a){return i===null?a===null:a===null?i===null:i===void 0?a===void 0:a===void 0?i===void 0:t(i,a)}})}),_k="equalText",mSe=["typed","compareText","isZero"],vSe=Le(_k,mSe,r=>{var{typed:e,compareText:t,isZero:n}=r;return e(_k,{"any, any":function(a,s){return n(t(a,s))}})}),zw="smaller",ySe=["typed","config","matrix","DenseMatrix","concat"],xSe=Le(zw,ySe,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:a}=r,s=Zo({typed:e}),o=Ah({typed:e,DenseMatrix:i}),l=ss({typed:e,DenseMatrix:i}),u=Li({typed:e,matrix:n,concat:a}),c=Rp({typed:e});return e(zw,wSe({typed:e,config:t}),{"boolean, boolean":(h,f)=>h<f,"BigNumber, BigNumber":function(f,A){return f.lt(A)&&!Bu(f,A,t.epsilon)},"Fraction, Fraction":(h,f)=>h.compare(f)===-1,"Complex, Complex":function(f,A){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:o,DS:s,Ss:l}))}),wSe=Le(zw,["typed","config"],r=>{var{typed:e,config:t}=r;return e(zw,{"number, number":function(i,a){return i<a&&!Wo(i,a,t.epsilon)}})}),qw="smallerEq",_Se=["typed","config","matrix","DenseMatrix","concat"],ESe=Le(qw,_Se,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:a}=r,s=Zo({typed:e}),o=Ah({typed:e,DenseMatrix:i}),l=ss({typed:e,DenseMatrix:i}),u=Li({typed:e,matrix:n,concat:a}),c=Rp({typed:e});return e(qw,bSe({typed:e,config:t}),{"boolean, boolean":(h,f)=>h<=f,"BigNumber, BigNumber":function(f,A){return f.lte(A)||Bu(f,A,t.epsilon)},"Fraction, Fraction":(h,f)=>h.compare(f)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:o,DS:s,Ss:l}))}),bSe=Le(qw,["typed","config"],r=>{var{typed:e,config:t}=r;return e(qw,{"number, number":function(i,a){return i<=a||Wo(i,a,t.epsilon)}})}),jw="larger",CSe=["typed","config","matrix","DenseMatrix","concat"],SSe=Le(jw,CSe,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:a}=r,s=Zo({typed:e}),o=Ah({typed:e,DenseMatrix:i}),l=ss({typed:e,DenseMatrix:i}),u=Li({typed:e,matrix:n,concat:a}),c=Rp({typed:e});return e(jw,BSe({typed:e,config:t}),{"boolean, boolean":(h,f)=>h>f,"BigNumber, BigNumber":function(f,A){return f.gt(A)&&!Bu(f,A,t.epsilon)},"Fraction, Fraction":(h,f)=>h.compare(f)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:o,DS:s,Ss:l}))}),BSe=Le(jw,["typed","config"],r=>{var{typed:e,config:t}=r;return e(jw,{"number, number":function(i,a){return i>a&&!Wo(i,a,t.epsilon)}})}),$w="largerEq",TSe=["typed","config","matrix","DenseMatrix","concat"],NSe=Le($w,TSe,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:a}=r,s=Zo({typed:e}),o=Ah({typed:e,DenseMatrix:i}),l=ss({typed:e,DenseMatrix:i}),u=Li({typed:e,matrix:n,concat:a}),c=Rp({typed:e});return e($w,ISe({typed:e,config:t}),{"boolean, boolean":(h,f)=>h>=f,"BigNumber, BigNumber":function(f,A){return f.gte(A)||Bu(f,A,t.epsilon)},"Fraction, Fraction":(h,f)=>h.compare(f)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:o,DS:s,Ss:l}))}),ISe=Le($w,["typed","config"],r=>{var{typed:e,config:t}=r;return e($w,{"number, number":function(i,a){return i>=a||Wo(i,a,t.epsilon)}})}),Ek="deepEqual",FSe=["typed","equal"],MSe=Le(Ek,FSe,r=>{var{typed:e,equal:t}=r;return e(Ek,{"any, any":function(a,s){return n(a.valueOf(),s.valueOf())}});function n(i,a){if(Array.isArray(i))if(Array.isArray(a)){var s=i.length;if(s!==a.length)return!1;for(var o=0;o<s;o++)if(!n(i[o],a[o]))return!1;return!0}else return!1;else return Array.isArray(a)?!1:t(i,a)}}),Kw="unequal",LSe=["typed","config","equalScalar","matrix","DenseMatrix","concat"],DSe=Le(Kw,LSe,r=>{var{typed:e,config:t,equalScalar:n,matrix:i,DenseMatrix:a,concat:s}=r,o=Zo({typed:e}),l=Ah({typed:e,DenseMatrix:a}),u=ss({typed:e,DenseMatrix:a}),c=Li({typed:e,matrix:i,concat:s});return e(Kw,kSe({typed:e,equalScalar:n}),c({elop:h,SS:l,DS:o,Ss:u}));function h(f,A){return!n(f,A)}}),kSe=Le(Kw,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(Kw,{"any, any":function(i,a){return i===null?a!==null:a===null?i!==null:i===void 0?a!==void 0:a===void 0?i!==void 0:!t(i,a)}})}),bk="partitionSelect",RSe=["typed","isNumeric","isNaN","compare"],OSe=Le(bk,RSe,r=>{var{typed:e,isNumeric:t,isNaN:n,compare:i}=r,a=i,s=(u,c)=>-i(u,c);return e(bk,{"Array | Matrix, number":function(c,h){return o(c,h,a)},"Array | Matrix, number, string":function(c,h,f){if(f==="asc")return o(c,h,a);if(f==="desc")return o(c,h,s);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":o});function o(u,c,h){if(!Sr(c)||c<0)throw new Error("k must be a non-negative integer");if(Lr(u)){var f=u.size();if(f.length>1)throw new Error("Only one dimensional matrices supported");return l(u.valueOf(),c,h)}if(Array.isArray(u))return l(u,c,h)}function l(u,c,h){if(c>=u.length)throw new Error("k out of bounds");for(var f=0;f<u.length;f++)if(t(u[f])&&n(u[f]))return u[f];for(var A=0,d=u.length-1;A<d;){for(var p=A,y=d,v=u[Math.floor(Math.random()*(d-A+1))+A];p<y;)if(h(u[p],v)>=0){var w=u[y];u[y]=u[p],u[p]=w,--y}else++p;h(u[p],v)>0&&--p,c<=p?d=p:A=p+1}return u[c]}}),Ck="sort",PSe=["typed","matrix","compare","compareNatural"],USe=Le(Ck,PSe,r=>{var{typed:e,matrix:t,compare:n,compareNatural:i}=r,a=n,s=(c,h)=>-n(c,h);return e(Ck,{Array:function(h){return l(h),h.sort(a)},Matrix:function(h){return u(h),t(h.toArray().sort(a),h.storage())},"Array, function":function(h,f){return l(h),h.sort(f)},"Matrix, function":function(h,f){return u(h),t(h.toArray().sort(f),h.storage())},"Array, string":function(h,f){return l(h),h.sort(o(f))},"Matrix, string":function(h,f){return u(h),t(h.toArray().sort(o(f)),h.storage())}});function o(c){if(c==="asc")return a;if(c==="desc")return s;if(c==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function l(c){if(en(c).length!==1)throw new Error("One dimensional array expected")}function u(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),Sk="max",QSe=["typed","config","numeric","larger"],lH=Le(Sk,QSe,r=>{var{typed:e,config:t,numeric:n,larger:i}=r;return e(Sk,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(l,u){return eE(l,u.valueOf(),a)},"...":function(l){if(Lp(l))throw new TypeError("Scalar values expected in function max");return s(l)}});function a(o,l){try{return i(o,l)?o:l}catch(u){throw Yo(u,"max",l)}}function s(o){var l;if(cf(o,function(u){try{isNaN(u)&&typeof u=="number"?l=NaN:(l===void 0||i(u,l))&&(l=u)}catch(c){throw Yo(c,"max",u)}}),l===void 0)throw new Error("Cannot calculate max of an empty array");return typeof l=="string"&&(l=n(l,t.number)),l}}),Bk="min",GSe=["typed","config","numeric","smaller"],uH=Le(Bk,GSe,r=>{var{typed:e,config:t,numeric:n,smaller:i}=r;return e(Bk,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(l,u){return eE(l,u.valueOf(),a)},"...":function(l){if(Lp(l))throw new TypeError("Scalar values expected in function min");return s(l)}});function a(o,l){try{return i(o,l)?o:l}catch(u){throw Yo(u,"min",l)}}function s(o){var l;if(cf(o,function(u){try{isNaN(u)&&typeof u=="number"?l=NaN:(l===void 0||i(u,l))&&(l=u)}catch(c){throw Yo(c,"min",u)}}),l===void 0)throw new Error("Cannot calculate min of an empty array");return typeof l=="string"&&(l=n(l,t.number)),l}}),HSe="ImmutableDenseMatrix",zSe=["smaller","DenseMatrix"],qSe=Le(HSe,zSe,r=>{var{smaller:e,DenseMatrix:t}=r;function n(i,a){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(a&&!ho(a))throw new Error("Invalid datatype: "+a);if(Lr(i)||ti(i)){var s=new t(i,a);this._data=s._data,this._size=s._size,this._datatype=s._datatype,this._min=null,this._max=null}else if(i&&ti(i.data)&&ti(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+Si(i)+")");this._data=[],this._size=[0],this._datatype=a,this._min=null,this._max=null}}return n.prototype=new t,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(i){switch(arguments.length){case 1:{var a=t.prototype.subset.call(this,i);return Lr(a)?new n({data:a._data,size:a._size,datatype:a._datatype}):a}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:Yr(this._data),size:Yr(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(i){return new n(i)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(a){(i===null||e(a,i))&&(i=a)}),this._min=i!==null?i:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(a){(i===null||e(i,a))&&(i=a)}),this._max=i!==null?i:void 0}return this._max},n},{isClass:!0}),jSe="Index",$Se=["ImmutableDenseMatrix","getMatrixDataType"],KSe=Le(jSe,$Se,r=>{var{ImmutableDenseMatrix:e,getMatrixDataType:t}=r;function n(a){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var s=0,o=arguments.length;s<o;s++){var l=arguments[s],u=ti(l),c=Lr(l),h=null;if(JB(l))this._dimensions.push(l),this._isScalar=!1;else if(u||c){var f=void 0;t(l)==="boolean"?(u&&(f=i(Tk(l).valueOf())),c&&(f=i(Tk(l._data).valueOf())),h=l.valueOf().length):f=i(l.valueOf()),this._dimensions.push(f);var A=f.size();(A.length!==1||A[0]!==1||h!==null)&&(this._isScalar=!1)}else if(typeof l=="number")this._dimensions.push(i([l]));else if(typeof l=="string")this._dimensions.push(l);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._sourceSize.push(h)}}n.prototype.type="Index",n.prototype.isIndex=!0;function i(a){for(var s=0,o=a.length;s<o;s++)if(typeof a[s]!="number"||!Sr(a[s]))throw new TypeError("Index parameters must be positive integer numbers");return new e(a)}return n.prototype.clone=function(){var a=new n;return a._dimensions=Yr(this._dimensions),a._isScalar=this._isScalar,a._sourceSize=this._sourceSize,a},n.create=function(a){var s=new n;return n.apply(s,a),s},n.prototype.size=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var l=this._dimensions[s];a[s]=typeof l=="string"?1:l.size()[0]}return a},n.prototype.max=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var l=this._dimensions[s];a[s]=typeof l=="string"?l:l.max()}return a},n.prototype.min=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var l=this._dimensions[s];a[s]=typeof l=="string"?l:l.min()}return a},n.prototype.forEach=function(a){for(var s=0,o=this._dimensions.length;s<o;s++)a(this._dimensions[s],s,this)},n.prototype.dimension=function(a){return this._dimensions[a]||null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var l=this._dimensions[s];a.push(typeof l=="string"?l:l.toArray())}return a},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var l=this._dimensions[s];typeof l=="string"?a.push(JSON.stringify(l)):a.push(l.toString())}return"["+a.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(a){return n.create(a.dimensions)},n},{isClass:!0});function Tk(r){var e=[];return r.forEach((t,n)=>{t&&e.push(n)}),e}var VSe="FibonacciHeap",WSe=["smaller","larger"],YSe=Le(VSe,WSe,r=>{var{smaller:e,larger:t}=r,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(c,h){var f={key:c,value:h,degree:0};if(this._minimum){var A=this._minimum;f.left=A,f.right=A.right,A.right=f,f.right.left=f,e(c,A.key)&&(this._minimum=f)}else f.left=f,f.right=f,this._minimum=f;return this._size++,f},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var h=this._minimum,f=c.degree,A=c.child;f>0;){var d=A.right;A.left.right=A.right,A.right.left=A.left,A.left=h,A.right=h.right,h.right=A,A.right.left=A,A.parent=null,A=d,f--}return c.left.right=c.right,c.right.left=c.left,c===c.right?h=null:(h=c.right,h=u(h,this._size)),this._size--,this._minimum=h,c},i.prototype.remove=function(c){this._minimum=a(this._minimum,c,-1),this.extractMinimum()};function a(c,h,f){h.key=f;var A=h.parent;return A&&e(h.key,A.key)&&(s(c,h,A),o(c,A)),e(h.key,c.key)&&(c=h),c}function s(c,h,f){h.left.right=h.right,h.right.left=h.left,f.degree--,f.child===h&&(f.child=h.right),f.degree===0&&(f.child=null),h.left=c,h.right=c.right,c.right=h,h.right.left=h,h.parent=null,h.mark=!1}function o(c,h){var f=h.parent;f&&(h.mark?(s(c,h,f),o(f)):h.mark=!0)}var l=function(h,f){h.left.right=h.right,h.right.left=h.left,h.parent=f,f.child?(h.left=f.child,h.right=f.child.right,f.child.right=h,h.right.left=h):(f.child=h,h.right=h,h.left=h),f.degree++,h.mark=!1};function u(c,h){var f=Math.floor(Math.log(h)*n)+1,A=new Array(f),d=0,p=c;if(p)for(d++,p=p.right;p!==c;)d++,p=p.right;for(var y;d>0;){for(var v=p.degree,w=p.right;y=A[v],!!y;){if(t(p.key,y.key)){var x=y;y=p,p=x}l(y,p),A[v]=null,v++}A[v]=p,p=w,d--}c=null;for(var b=0;b<f;b++)y=A[b],y&&(c?(y.left.right=y.right,y.right.left=y.left,y.left=c,y.right=c.right,c.right=y,y.right.left=y,e(y.key,c.key)&&(c=y)):c=y);return c}return i},{isClass:!0}),XSe="Spa",ZSe=["addScalar","equalScalar","FibonacciHeap"],JSe=Le(XSe,ZSe,r=>{var{addScalar:e,equalScalar:t,FibonacciHeap:n}=r;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(a,s){if(this._values[a])this._values[a].value=s;else{var o=this._heap.insert(a,s);this._values[a]=o}},i.prototype.get=function(a){var s=this._values[a];return s?s.value:0},i.prototype.accumulate=function(a,s){var o=this._values[a];o?o.value=e(o.value,s):(o=this._heap.insert(a,s),this._values[a]=o)},i.prototype.forEach=function(a,s,o){var l=this._heap,u=this._values,c=[],h=l.extractMinimum();for(h&&c.push(h);h&&h.key<=s;)h.key>=a&&(t(h.value,0)||o(h.key,h.value,this)),h=l.extractMinimum(),h&&c.push(h);for(var f=0;f<c.length;f++){var A=c[f];h=l.insert(A.key,A.value),u[h.key]=h}},i.prototype.swap=function(a,s){var o=this._values[a],l=this._values[s];if(!o&&l)o=this._heap.insert(a,l.value),this._heap.remove(l),this._values[a]=o,this._values[s]=void 0;else if(o&&!l)l=this._heap.insert(s,o.value),this._heap.remove(o),this._values[s]=l,this._values[a]=void 0;else if(o&&l){var u=o.value;o.value=l.value,l.value=u}},i},{isClass:!0}),e5e=Q1(function(r){return new r(1).exp()},{hasher:iE}),t5e=Q1(function(r){return new r(1).plus(new r(5).sqrt()).div(2)},{hasher:iE}),h3=Q1(function(r){return r.acos(-1)},{hasher:iE}),r5e=Q1(function(r){return h3(r).times(2)},{hasher:iE});function iE(r){return r[0].precision}function Nk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function SC(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Nk(Object(t),!0).forEach(function(n){as(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Nk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var n5e="Unit",i5e=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],a5e=Le(n5e,i5e,r=>{var{on:e,config:t,addScalar:n,subtractScalar:i,multiplyScalar:a,divideScalar:s,pow:o,abs:l,fix:u,round:c,equal:h,isNumeric:f,format:A,number:d,Complex:p,BigNumber:y,Fraction:v}=r,w=d;function x(se,Z){if(!(this instanceof x))throw new Error("Constructor must be called with the new operator");if(!(se==null||f(se)||rf(se)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,Z===void 0)this.units=[],this.dimensions=W.map(ne=>0);else if(typeof Z=="string"){var he=x.parse(Z);this.units=he.units,this.dimensions=he.dimensions}else if(yu(Z)&&Z.value===null)this.fixPrefix=Z.fixPrefix,this.skipAutomaticSimplification=Z.skipAutomaticSimplification,this.dimensions=Z.dimensions.slice(0),this.units=Z.units.map(ne=>ts({},ne));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(se)}Object.defineProperty(x,"name",{value:"Unit"}),x.prototype.constructor=x,x.prototype.type="Unit",x.prototype.isUnit=!0;var b,C,S;function I(){for(;S===" "||S==="	";)M()}function B(se){return se>="0"&&se<="9"||se==="."}function T(se){return se>="0"&&se<="9"}function M(){C++,S=b.charAt(C)}function F(se){C=se,S=b.charAt(C)}function N(){var se="",Z=C;if(S==="+"?M():S==="-"&&(se+=S,M()),!B(S))return F(Z),null;if(S==="."){if(se+=S,M(),!T(S))return F(Z),null}else{for(;T(S);)se+=S,M();S==="."&&(se+=S,M())}for(;T(S);)se+=S,M();if(S==="E"||S==="e"){var he="",ne=C;if(he+=S,M(),(S==="+"||S==="-")&&(he+=S,M()),!T(S))return F(ne),se;for(se=se+he;T(S);)se+=S,M()}return se}function O(){for(var se="";T(S)||x.isValidAlpha(S);)se+=S,M();var Z=se.charAt(0);return x.isValidAlpha(Z)?se:null}function L(se){return S===se?(M(),se):null}x.parse=function(se,Z){if(Z=Z||{},b=se,C=-1,S="",typeof b!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var he=new x;he.units=[];var ne=1,ae=!1;M(),I();var _e=N(),Me=null;if(_e){if(t.number==="BigNumber")Me=new y(_e);else if(t.number==="Fraction")try{Me=new v(_e)}catch{Me=parseFloat(_e)}else Me=parseFloat(_e);I(),L("*")?(ne=1,ae=!0):L("/")&&(ne=-1,ae=!0)}for(var be=[],Ae=1;;){for(I();S==="(";)be.push(ne),Ae*=ne,ne=1,M(),I();var pe=void 0;if(S){var Fe=S;if(pe=O(),pe===null)throw new SyntaxError('Unexpected "'+Fe+'" in "'+b+'" at index '+C.toString())}else break;var Ge=G(pe);if(Ge===null)throw new SyntaxError('Unit "'+pe+'" not found.');var Ze=ne*Ae;if(I(),L("^")){I();var He=N();if(He===null)throw new SyntaxError('In "'+se+'", "^" must be followed by a floating-point number');Ze*=He}he.units.push({unit:Ge.unit,prefix:Ge.prefix,power:Ze});for(var Je=0;Je<W.length;Je++)he.dimensions[Je]+=(Ge.unit.dimensions[Je]||0)*Ze;for(I();S===")";){if(be.length===0)throw new SyntaxError('Unmatched ")" in "'+b+'" at index '+C.toString());Ae/=be.pop(),M(),I()}if(ae=!1,L("*")?(ne=1,ae=!0):L("/")?(ne=-1,ae=!0):ne=1,Ge.unit.base){var Ye=Ge.unit.base.key;ue.auto[Ye]={unit:Ge.unit,prefix:Ge.prefix}}}if(I(),S)throw new SyntaxError('Could not parse: "'+se+'"');if(ae)throw new SyntaxError('Trailing characters: "'+se+'"');if(be.length!==0)throw new SyntaxError('Unmatched "(" in "'+b+'"');if(he.units.length===0&&!Z.allowNoUnits)throw new SyntaxError('"'+se+'" contains no units');return he.value=Me!==void 0?he._normalize(Me):null,he},x.prototype.clone=function(){var se=new x;se.fixPrefix=this.fixPrefix,se.skipAutomaticSimplification=this.skipAutomaticSimplification,se.value=Yr(this.value),se.dimensions=this.dimensions.slice(0),se.units=[];for(var Z=0;Z<this.units.length;Z++){se.units[Z]={};for(var he in this.units[Z])vr(this.units[Z],he)&&(se.units[Z][he]=this.units[Z][he])}return se},x.prototype.valueType=function(){return Si(this.value)},x.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},x.prototype._normalize=function(se){if(se==null||this.units.length===0)return se;for(var Z=se,he=x._getNumberConverter(Si(se)),ne=0;ne<this.units.length;ne++){var ae=he(this.units[ne].unit.value),_e=he(this.units[ne].prefix.value),Me=he(this.units[ne].power);Z=a(Z,o(a(ae,_e),Me))}return Z},x.prototype._denormalize=function(se,Z){if(se==null||this.units.length===0)return se;for(var he=se,ne=x._getNumberConverter(Si(se)),ae=0;ae<this.units.length;ae++){var _e=ne(this.units[ae].unit.value),Me=ne(this.units[ae].prefix.value),be=ne(this.units[ae].power);he=s(he,o(a(_e,Me),be))}return he};var G=Q1(se=>{if(vr(z,se)){var Z=z[se],he=Z.prefixes[""];return{unit:Z,prefix:he}}for(var ne in z)if(vr(z,ne)&&pxe(se,ne)){var ae=z[ne],_e=se.length-ne.length,Me=se.substring(0,_e),be=vr(ae.prefixes,Me)?ae.prefixes[Me]:void 0;if(be!==void 0)return{unit:ae,prefix:be}}return null},{hasher:se=>se[0],limit:100});x.isValuelessUnit=function(se){return G(se)!==null},x.prototype.hasBase=function(se){if(typeof se=="string"&&(se=Q[se]),!se)return!1;for(var Z=0;Z<W.length;Z++)if(Math.abs((this.dimensions[Z]||0)-(se.dimensions[Z]||0))>1e-12)return!1;return!0},x.prototype.equalBase=function(se){for(var Z=0;Z<W.length;Z++)if(Math.abs((this.dimensions[Z]||0)-(se.dimensions[Z]||0))>1e-12)return!1;return!0},x.prototype.equals=function(se){return this.equalBase(se)&&h(this.value,se.value)},x.prototype.multiply=function(se){for(var Z=this.clone(),he=yu(se)?se:new x(se),ne=0;ne<W.length;ne++)Z.dimensions[ne]=(this.dimensions[ne]||0)+(he.dimensions[ne]||0);for(var ae=0;ae<he.units.length;ae++){var _e=SC({},he.units[ae]);Z.units.push(_e)}if(this.value!==null||he.value!==null){var Me=this.value===null?this._normalize(1):this.value,be=he.value===null?he._normalize(1):he.value;Z.value=a(Me,be)}else Z.value=null;return yu(se)&&(Z.skipAutomaticSimplification=!1),R(Z)},x.prototype.divideInto=function(se){return new x(se).divide(this)},x.prototype.divide=function(se){for(var Z=this.clone(),he=yu(se)?se:new x(se),ne=0;ne<W.length;ne++)Z.dimensions[ne]=(this.dimensions[ne]||0)-(he.dimensions[ne]||0);for(var ae=0;ae<he.units.length;ae++){var _e=SC(SC({},he.units[ae]),{},{power:-he.units[ae].power});Z.units.push(_e)}if(this.value!==null||he.value!==null){var Me=this.value===null?this._normalize(1):this.value,be=he.value===null?he._normalize(1):he.value;Z.value=s(Me,be)}else Z.value=null;return yu(se)&&(Z.skipAutomaticSimplification=!1),R(Z)},x.prototype.pow=function(se){for(var Z=this.clone(),he=0;he<W.length;he++)Z.dimensions[he]=(this.dimensions[he]||0)*se;for(var ne=0;ne<Z.units.length;ne++)Z.units[ne].power*=se;return Z.value!==null?Z.value=o(Z.value,se):Z.value=null,Z.skipAutomaticSimplification=!1,R(Z)};function R(se){return se.equalBase(Q.NONE)&&se.value!==null&&!t.predictable?se.value:se}x.prototype.abs=function(){var se=this.clone();if(se.value!==null)if(se._isDerived()||se.units.length===0||se.units[0].unit.offset===0)se.value=l(se.value);else{var Z=se._numberConverter(),he=Z(se.units[0].unit.value),ne=Z(se.units[0].unit.offset),ae=a(he,ne);se.value=i(l(n(se.value,ae)),ae)}for(var _e in se.units)(se.units[_e].unit.name==="VA"||se.units[_e].unit.name==="VAR")&&(se.units[_e].unit=z.W);return se},x.prototype.to=function(se){var Z=this.value===null?this._normalize(1):this.value,he;if(typeof se=="string")he=x.parse(se);else if(yu(se))he=se.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(he))throw new Error("Units do not match ('".concat(he.toString(),"' != '").concat(this.toString(),"')"));if(he.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||he.units.length===0||this.units[0].unit.offset===he.units[0].unit.offset)he.value=Yr(Z);else{var ne=x._getNumberConverter(Si(Z)),ae=this.units[0].unit.value,_e=this.units[0].unit.offset,Me=a(ae,_e),be=he.units[0].unit.value,Ae=he.units[0].unit.offset,pe=a(be,Ae);he.value=n(Z,ne(i(Me,pe)))}return he.fixPrefix=!0,he.skipAutomaticSimplification=!0,he},x.prototype.toNumber=function(se){return w(this.toNumeric(se))},x.prototype.toNumeric=function(se){var Z;return se?Z=this.to(se):Z=this.clone(),Z._isDerived()||Z.units.length===0?Z._denormalize(Z.value):Z._denormalize(Z.value,Z.units[0].prefix.value)},x.prototype.toString=function(){return this.format()},x.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},x.fromJSON=function(se){var Z,he=new x(se.value,(Z=se.unit)!==null&&Z!==void 0?Z:void 0);return he.fixPrefix=se.fixPrefix||!1,he},x.prototype.valueOf=x.prototype.toString,x.prototype.simplify=function(){var se=this.clone(),Z=[],he;for(var ne in ge)if(vr(ge,ne)&&se.hasBase(Q[ne])){he=ne;break}if(he==="NONE")se.units=[];else{var ae;if(he&&vr(ge,he)&&(ae=ge[he]),ae)se.units=[{unit:ae.unit,prefix:ae.prefix,power:1}];else{for(var _e=!1,Me=0;Me<W.length;Me++){var be=W[Me];Math.abs(se.dimensions[Me]||0)>1e-12&&(vr(ge,be)?Z.push({unit:ge[be].unit,prefix:ge[be].prefix,power:se.dimensions[Me]||0}):_e=!0)}Z.length<se.units.length&&!_e&&(se.units=Z)}}return se},x.prototype.toSI=function(){for(var se=this.clone(),Z=[],he=0;he<W.length;he++){var ne=W[he];if(Math.abs(se.dimensions[he]||0)>1e-12)if(vr(ue.si,ne))Z.push({unit:ue.si[ne].unit,prefix:ue.si[ne].prefix,power:se.dimensions[he]||0});else throw new Error("Cannot express custom unit "+ne+" in SI units")}return se.units=Z,se.fixPrefix=!0,se.skipAutomaticSimplification=!0,this.value!==null?(se.value=null,this.to(se)):se},x.prototype.formatUnits=function(){for(var se="",Z="",he=0,ne=0,ae=0;ae<this.units.length;ae++)this.units[ae].power>0?(he++,se+=" "+this.units[ae].prefix.name+this.units[ae].unit.name,Math.abs(this.units[ae].power-1)>1e-15&&(se+="^"+this.units[ae].power)):this.units[ae].power<0&&ne++;if(ne>0)for(var _e=0;_e<this.units.length;_e++)this.units[_e].power<0&&(he>0?(Z+=" "+this.units[_e].prefix.name+this.units[_e].unit.name,Math.abs(this.units[_e].power+1)>1e-15&&(Z+="^"+-this.units[_e].power)):(Z+=" "+this.units[_e].prefix.name+this.units[_e].unit.name,Z+="^"+this.units[_e].power));se=se.substr(1),Z=Z.substr(1),he>1&&ne>0&&(se="("+se+")"),ne>1&&he>0&&(Z="("+Z+")");var Me=se;return he>0&&ne>0&&(Me+=" / "),Me+=Z,Me},x.prototype.format=function(se){var Z=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),he=!1;typeof Z.value<"u"&&Z.value!==null&&rf(Z.value)&&(he=Math.abs(Z.value.re)<1e-14);for(var ne in Z.units)vr(Z.units,ne)&&Z.units[ne].unit&&(Z.units[ne].unit.name==="VA"&&he?Z.units[ne].unit=z.VAR:Z.units[ne].unit.name==="VAR"&&!he&&(Z.units[ne].unit=z.VA));Z.units.length===1&&!Z.fixPrefix&&Math.abs(Z.units[0].power-Math.round(Z.units[0].power))<1e-14&&(Z.units[0].prefix=Z._bestPrefix());var ae=Z._denormalize(Z.value),_e=Z.value!==null?A(ae,se||{}):"",Me=Z.formatUnits();return Z.value&&rf(Z.value)&&(_e="("+_e+")"),Me.length>0&&_e.length>0&&(_e+=" "),_e+=Me,_e},x.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var se=this.value!==null?l(this.value):0,Z=l(this.units[0].unit.value),he=this.units[0].prefix;if(se===0)return he;var ne=this.units[0].power,ae=Math.log(se/Math.pow(he.value*Z,ne))/Math.LN10-1.2;if(ae>-2.200001&&ae<1.800001)return he;ae=Math.abs(ae);var _e=this.units[0].unit.prefixes;for(var Me in _e)if(vr(_e,Me)){var be=_e[Me];if(be.scientific){var Ae=Math.abs(Math.log(se/Math.pow(be.value*Z,ne))/Math.LN10-1.2);(Ae<ae||Ae===ae&&be.name.length<he.name.length)&&(he=be,ae=Ae)}}return he},x.prototype.splitUnit=function(se){for(var Z=this.clone(),he=[],ne=0;ne<se.length&&(Z=Z.to(se[ne]),ne!==se.length-1);ne++){var ae=Z.toNumeric(),_e=c(ae),Me=void 0,be=h(_e,ae);be?Me=_e:Me=u(Z.toNumeric());var Ae=new x(Me,se[ne].toString());he.push(Ae),Z=i(Z,Ae)}for(var pe=0,Fe=0;Fe<he.length;Fe++)pe=n(pe,he[Fe].value);return h(pe,this.value)&&(Z.value=0),he.push(Z),he};var U={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};U.SHORTLONG=ts({},U.SHORT,U.LONG),U.BINARY_SHORT=ts({},U.BINARY_SHORT_SI,U.BINARY_SHORT_IEC),U.BINARY_LONG=ts({},U.BINARY_LONG_SI,U.BINARY_LONG_IEC);var W=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],Q={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var re in Q)vr(Q,re)&&(Q[re].key=re);var oe={},P={name:"",base:oe,value:1,offset:0,dimensions:W.map(se=>0)},z={meter:{name:"meter",base:Q.LENGTH,prefixes:U.LONG,value:1,offset:0},inch:{name:"inch",base:Q.LENGTH,prefixes:U.NONE,value:.0254,offset:0},foot:{name:"foot",base:Q.LENGTH,prefixes:U.NONE,value:.3048,offset:0},yard:{name:"yard",base:Q.LENGTH,prefixes:U.NONE,value:.9144,offset:0},mile:{name:"mile",base:Q.LENGTH,prefixes:U.NONE,value:1609.344,offset:0},link:{name:"link",base:Q.LENGTH,prefixes:U.NONE,value:.201168,offset:0},rod:{name:"rod",base:Q.LENGTH,prefixes:U.NONE,value:5.0292,offset:0},chain:{name:"chain",base:Q.LENGTH,prefixes:U.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:Q.LENGTH,prefixes:U.NONE,value:1e-10,offset:0},m:{name:"m",base:Q.LENGTH,prefixes:U.SHORT,value:1,offset:0},in:{name:"in",base:Q.LENGTH,prefixes:U.NONE,value:.0254,offset:0},ft:{name:"ft",base:Q.LENGTH,prefixes:U.NONE,value:.3048,offset:0},yd:{name:"yd",base:Q.LENGTH,prefixes:U.NONE,value:.9144,offset:0},mi:{name:"mi",base:Q.LENGTH,prefixes:U.NONE,value:1609.344,offset:0},li:{name:"li",base:Q.LENGTH,prefixes:U.NONE,value:.201168,offset:0},rd:{name:"rd",base:Q.LENGTH,prefixes:U.NONE,value:5.02921,offset:0},ch:{name:"ch",base:Q.LENGTH,prefixes:U.NONE,value:20.1168,offset:0},mil:{name:"mil",base:Q.LENGTH,prefixes:U.NONE,value:254e-7,offset:0},m2:{name:"m2",base:Q.SURFACE,prefixes:U.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:Q.SURFACE,prefixes:U.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:Q.SURFACE,prefixes:U.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:Q.SURFACE,prefixes:U.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:Q.SURFACE,prefixes:U.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:Q.SURFACE,prefixes:U.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:Q.SURFACE,prefixes:U.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:Q.SURFACE,prefixes:U.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:Q.SURFACE,prefixes:U.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:Q.SURFACE,prefixes:U.NONE,value:1e4,offset:0},m3:{name:"m3",base:Q.VOLUME,prefixes:U.CUBIC,value:1,offset:0},L:{name:"L",base:Q.VOLUME,prefixes:U.SHORT,value:.001,offset:0},l:{name:"l",base:Q.VOLUME,prefixes:U.SHORT,value:.001,offset:0},litre:{name:"litre",base:Q.VOLUME,prefixes:U.LONG,value:.001,offset:0},cuin:{name:"cuin",base:Q.VOLUME,prefixes:U.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:Q.VOLUME,prefixes:U.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:Q.VOLUME,prefixes:U.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:Q.VOLUME,prefixes:U.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:Q.VOLUME,prefixes:U.NONE,value:15e-6,offset:0},drop:{name:"drop",base:Q.VOLUME,prefixes:U.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:Q.VOLUME,prefixes:U.NONE,value:5e-8,offset:0},minim:{name:"minim",base:Q.VOLUME,prefixes:U.NONE,value:6161152e-14,offset:0},fluiddram:{name:"fluiddram",base:Q.VOLUME,prefixes:U.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:Q.VOLUME,prefixes:U.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:Q.VOLUME,prefixes:U.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:Q.VOLUME,prefixes:U.NONE,value:1e-6,offset:0},cup:{name:"cup",base:Q.VOLUME,prefixes:U.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:Q.VOLUME,prefixes:U.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:Q.VOLUME,prefixes:U.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:Q.VOLUME,prefixes:U.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:Q.VOLUME,prefixes:U.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:Q.VOLUME,prefixes:U.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:Q.VOLUME,prefixes:U.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:Q.VOLUME,prefixes:U.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:Q.VOLUME,prefixes:U.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:Q.VOLUME,prefixes:U.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:Q.VOLUME,prefixes:U.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:Q.VOLUME,prefixes:U.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:Q.VOLUME,prefixes:U.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:Q.VOLUME,prefixes:U.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:Q.VOLUME,prefixes:U.NONE,value:.1173478,offset:0},obl:{name:"obl",base:Q.VOLUME,prefixes:U.NONE,value:.1589873,offset:0},g:{name:"g",base:Q.MASS,prefixes:U.SHORT,value:.001,offset:0},gram:{name:"gram",base:Q.MASS,prefixes:U.LONG,value:.001,offset:0},ton:{name:"ton",base:Q.MASS,prefixes:U.SHORT,value:907.18474,offset:0},t:{name:"t",base:Q.MASS,prefixes:U.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:Q.MASS,prefixes:U.LONG,value:1e3,offset:0},grain:{name:"grain",base:Q.MASS,prefixes:U.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:Q.MASS,prefixes:U.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:Q.MASS,prefixes:U.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:Q.MASS,prefixes:U.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:Q.MASS,prefixes:U.NONE,value:45.359237,offset:0},stick:{name:"stick",base:Q.MASS,prefixes:U.NONE,value:.115,offset:0},stone:{name:"stone",base:Q.MASS,prefixes:U.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:Q.MASS,prefixes:U.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:Q.MASS,prefixes:U.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:Q.MASS,prefixes:U.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:Q.MASS,prefixes:U.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:Q.MASS,prefixes:U.NONE,value:45.359237,offset:0},s:{name:"s",base:Q.TIME,prefixes:U.SHORT,value:1,offset:0},min:{name:"min",base:Q.TIME,prefixes:U.NONE,value:60,offset:0},h:{name:"h",base:Q.TIME,prefixes:U.NONE,value:3600,offset:0},second:{name:"second",base:Q.TIME,prefixes:U.LONG,value:1,offset:0},sec:{name:"sec",base:Q.TIME,prefixes:U.LONG,value:1,offset:0},minute:{name:"minute",base:Q.TIME,prefixes:U.NONE,value:60,offset:0},hour:{name:"hour",base:Q.TIME,prefixes:U.NONE,value:3600,offset:0},day:{name:"day",base:Q.TIME,prefixes:U.NONE,value:86400,offset:0},week:{name:"week",base:Q.TIME,prefixes:U.NONE,value:7*86400,offset:0},month:{name:"month",base:Q.TIME,prefixes:U.NONE,value:2629800,offset:0},year:{name:"year",base:Q.TIME,prefixes:U.NONE,value:31557600,offset:0},decade:{name:"decade",base:Q.TIME,prefixes:U.NONE,value:315576e3,offset:0},century:{name:"century",base:Q.TIME,prefixes:U.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:Q.TIME,prefixes:U.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:Q.FREQUENCY,prefixes:U.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:Q.FREQUENCY,prefixes:U.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:Q.ANGLE,prefixes:U.SHORT,value:1,offset:0},radian:{name:"radian",base:Q.ANGLE,prefixes:U.LONG,value:1,offset:0},deg:{name:"deg",base:Q.ANGLE,prefixes:U.SHORT,value:null,offset:0},degree:{name:"degree",base:Q.ANGLE,prefixes:U.LONG,value:null,offset:0},grad:{name:"grad",base:Q.ANGLE,prefixes:U.SHORT,value:null,offset:0},gradian:{name:"gradian",base:Q.ANGLE,prefixes:U.LONG,value:null,offset:0},cycle:{name:"cycle",base:Q.ANGLE,prefixes:U.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:Q.ANGLE,prefixes:U.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:Q.ANGLE,prefixes:U.NONE,value:null,offset:0},A:{name:"A",base:Q.CURRENT,prefixes:U.SHORT,value:1,offset:0},ampere:{name:"ampere",base:Q.CURRENT,prefixes:U.LONG,value:1,offset:0},K:{name:"K",base:Q.TEMPERATURE,prefixes:U.SHORT,value:1,offset:0},degC:{name:"degC",base:Q.TEMPERATURE,prefixes:U.SHORT,value:1,offset:273.15},degF:{name:"degF",base:Q.TEMPERATURE,prefixes:U.SHORT,value:new v(5,9),offset:459.67},degR:{name:"degR",base:Q.TEMPERATURE,prefixes:U.SHORT,value:new v(5,9),offset:0},kelvin:{name:"kelvin",base:Q.TEMPERATURE,prefixes:U.LONG,value:1,offset:0},celsius:{name:"celsius",base:Q.TEMPERATURE,prefixes:U.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:Q.TEMPERATURE,prefixes:U.LONG,value:new v(5,9),offset:459.67},rankine:{name:"rankine",base:Q.TEMPERATURE,prefixes:U.LONG,value:new v(5,9),offset:0},mol:{name:"mol",base:Q.AMOUNT_OF_SUBSTANCE,prefixes:U.SHORT,value:1,offset:0},mole:{name:"mole",base:Q.AMOUNT_OF_SUBSTANCE,prefixes:U.LONG,value:1,offset:0},cd:{name:"cd",base:Q.LUMINOUS_INTENSITY,prefixes:U.SHORT,value:1,offset:0},candela:{name:"candela",base:Q.LUMINOUS_INTENSITY,prefixes:U.LONG,value:1,offset:0},N:{name:"N",base:Q.FORCE,prefixes:U.SHORT,value:1,offset:0},newton:{name:"newton",base:Q.FORCE,prefixes:U.LONG,value:1,offset:0},dyn:{name:"dyn",base:Q.FORCE,prefixes:U.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:Q.FORCE,prefixes:U.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:Q.FORCE,prefixes:U.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:Q.FORCE,prefixes:U.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:Q.FORCE,prefixes:U.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:Q.FORCE,prefixes:U.NONE,value:9.80665,offset:0},J:{name:"J",base:Q.ENERGY,prefixes:U.SHORT,value:1,offset:0},joule:{name:"joule",base:Q.ENERGY,prefixes:U.LONG,value:1,offset:0},erg:{name:"erg",base:Q.ENERGY,prefixes:U.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:Q.ENERGY,prefixes:U.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:Q.ENERGY,prefixes:U.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:Q.ENERGY,prefixes:U.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:Q.ENERGY,prefixes:U.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:Q.POWER,prefixes:U.SHORT,value:1,offset:0},watt:{name:"watt",base:Q.POWER,prefixes:U.LONG,value:1,offset:0},hp:{name:"hp",base:Q.POWER,prefixes:U.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:Q.POWER,prefixes:U.SHORT,value:p.I,offset:0},VA:{name:"VA",base:Q.POWER,prefixes:U.SHORT,value:1,offset:0},Pa:{name:"Pa",base:Q.PRESSURE,prefixes:U.SHORT,value:1,offset:0},psi:{name:"psi",base:Q.PRESSURE,prefixes:U.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:Q.PRESSURE,prefixes:U.NONE,value:101325,offset:0},bar:{name:"bar",base:Q.PRESSURE,prefixes:U.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:Q.PRESSURE,prefixes:U.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:Q.PRESSURE,prefixes:U.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:Q.PRESSURE,prefixes:U.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:Q.PRESSURE,prefixes:U.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:Q.ELECTRIC_CHARGE,prefixes:U.LONG,value:1,offset:0},C:{name:"C",base:Q.ELECTRIC_CHARGE,prefixes:U.SHORT,value:1,offset:0},farad:{name:"farad",base:Q.ELECTRIC_CAPACITANCE,prefixes:U.LONG,value:1,offset:0},F:{name:"F",base:Q.ELECTRIC_CAPACITANCE,prefixes:U.SHORT,value:1,offset:0},volt:{name:"volt",base:Q.ELECTRIC_POTENTIAL,prefixes:U.LONG,value:1,offset:0},V:{name:"V",base:Q.ELECTRIC_POTENTIAL,prefixes:U.SHORT,value:1,offset:0},ohm:{name:"ohm",base:Q.ELECTRIC_RESISTANCE,prefixes:U.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:Q.ELECTRIC_INDUCTANCE,prefixes:U.LONG,value:1,offset:0},H:{name:"H",base:Q.ELECTRIC_INDUCTANCE,prefixes:U.SHORT,value:1,offset:0},siemens:{name:"siemens",base:Q.ELECTRIC_CONDUCTANCE,prefixes:U.LONG,value:1,offset:0},S:{name:"S",base:Q.ELECTRIC_CONDUCTANCE,prefixes:U.SHORT,value:1,offset:0},weber:{name:"weber",base:Q.MAGNETIC_FLUX,prefixes:U.LONG,value:1,offset:0},Wb:{name:"Wb",base:Q.MAGNETIC_FLUX,prefixes:U.SHORT,value:1,offset:0},tesla:{name:"tesla",base:Q.MAGNETIC_FLUX_DENSITY,prefixes:U.LONG,value:1,offset:0},T:{name:"T",base:Q.MAGNETIC_FLUX_DENSITY,prefixes:U.SHORT,value:1,offset:0},b:{name:"b",base:Q.BIT,prefixes:U.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:Q.BIT,prefixes:U.BINARY_LONG,value:1,offset:0},B:{name:"B",base:Q.BIT,prefixes:U.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:Q.BIT,prefixes:U.BINARY_LONG,value:8,offset:0}},K={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function J(se){if(se.number==="BigNumber"){var Z=h3(y);z.rad.value=new y(1),z.deg.value=Z.div(180),z.grad.value=Z.div(200),z.cycle.value=Z.times(2),z.arcsec.value=Z.div(648e3),z.arcmin.value=Z.div(10800)}else z.rad.value=1,z.deg.value=Math.PI/180,z.grad.value=Math.PI/200,z.cycle.value=Math.PI*2,z.arcsec.value=Math.PI/648e3,z.arcmin.value=Math.PI/10800;z.radian.value=z.rad.value,z.degree.value=z.deg.value,z.gradian.value=z.grad.value}J(t),e&&e("config",function(se,Z){se.number!==Z.number&&J(se)});var ue={si:{NONE:{unit:P,prefix:U.NONE[""]},LENGTH:{unit:z.m,prefix:U.SHORT[""]},MASS:{unit:z.g,prefix:U.SHORT.k},TIME:{unit:z.s,prefix:U.SHORT[""]},CURRENT:{unit:z.A,prefix:U.SHORT[""]},TEMPERATURE:{unit:z.K,prefix:U.SHORT[""]},LUMINOUS_INTENSITY:{unit:z.cd,prefix:U.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:z.mol,prefix:U.SHORT[""]},ANGLE:{unit:z.rad,prefix:U.SHORT[""]},BIT:{unit:z.bits,prefix:U.SHORT[""]},FORCE:{unit:z.N,prefix:U.SHORT[""]},ENERGY:{unit:z.J,prefix:U.SHORT[""]},POWER:{unit:z.W,prefix:U.SHORT[""]},PRESSURE:{unit:z.Pa,prefix:U.SHORT[""]},ELECTRIC_CHARGE:{unit:z.C,prefix:U.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:z.F,prefix:U.SHORT[""]},ELECTRIC_POTENTIAL:{unit:z.V,prefix:U.SHORT[""]},ELECTRIC_RESISTANCE:{unit:z.ohm,prefix:U.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:z.H,prefix:U.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:z.S,prefix:U.SHORT[""]},MAGNETIC_FLUX:{unit:z.Wb,prefix:U.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:z.T,prefix:U.SHORT[""]},FREQUENCY:{unit:z.Hz,prefix:U.SHORT[""]}}};ue.cgs=JSON.parse(JSON.stringify(ue.si)),ue.cgs.LENGTH={unit:z.m,prefix:U.SHORT.c},ue.cgs.MASS={unit:z.g,prefix:U.SHORT[""]},ue.cgs.FORCE={unit:z.dyn,prefix:U.SHORT[""]},ue.cgs.ENERGY={unit:z.erg,prefix:U.NONE[""]},ue.us=JSON.parse(JSON.stringify(ue.si)),ue.us.LENGTH={unit:z.ft,prefix:U.NONE[""]},ue.us.MASS={unit:z.lbm,prefix:U.NONE[""]},ue.us.TEMPERATURE={unit:z.degF,prefix:U.NONE[""]},ue.us.FORCE={unit:z.lbf,prefix:U.NONE[""]},ue.us.ENERGY={unit:z.BTU,prefix:U.BTU[""]},ue.us.POWER={unit:z.hp,prefix:U.NONE[""]},ue.us.PRESSURE={unit:z.psi,prefix:U.NONE[""]},ue.auto=JSON.parse(JSON.stringify(ue.si));var ge=ue.auto;x.setUnitSystem=function(se){if(vr(ue,se))ge=ue[se];else throw new Error("Unit system "+se+" does not exist. Choices are: "+Object.keys(ue).join(", "))},x.getUnitSystem=function(){for(var se in ue)if(vr(ue,se)&&ue[se]===ge)return se},x.typeConverters={BigNumber:function(Z){return Z!=null&&Z.isFraction?new y(Z.n).div(Z.d).times(Z.s):new y(Z+"")},Fraction:function(Z){return new v(Z)},Complex:function(Z){return Z},number:function(Z){return Z!=null&&Z.isFraction?d(Z):Z}},x.prototype._numberConverter=function(){var se=x.typeConverters[this.valueType()];if(se)return se;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},x._getNumberConverter=function(se){if(!x.typeConverters[se])throw new TypeError('Unsupported type "'+se+'"');return x.typeConverters[se]};for(var le in z)if(vr(z,le)){var me=z[le];me.dimensions=me.base.dimensions}for(var xe in K)if(vr(K,xe)){var Be=z[K[xe]],Y={};for(var Ve in Be)vr(Be,Ve)&&(Y[Ve]=Be[Ve]);Y.name=xe,z[xe]=Y}x.isValidAlpha=function(Z){return/^[a-zA-Z]$/.test(Z)};function te(se){for(var Z=0;Z<se.length;Z++){if(S=se.charAt(Z),Z===0&&!x.isValidAlpha(S))throw new Error('Invalid unit name (must begin with alpha character): "'+se+'"');if(Z>0&&!(x.isValidAlpha(S)||T(S)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+se+'"')}}return x.createUnit=function(se,Z){if(typeof se!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(Z&&Z.override){for(var he in se)if(vr(se,he)&&x.deleteUnit(he),se[he].aliases)for(var ne=0;ne<se[he].aliases.length;ne++)x.deleteUnit(se[he].aliases[ne])}var ae;for(var _e in se)vr(se,_e)&&(ae=x.createUnitSingle(_e,se[_e]));return ae},x.createUnitSingle=function(se,Z){if((typeof Z>"u"||Z===null)&&(Z={}),typeof se!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(vr(z,se))throw new Error('Cannot create unit "'+se+'": a unit with that name already exists');te(se);var he=null,ne=[],ae=0,_e,Me,be;if(Z&&Z.type==="Unit")he=Z.clone();else if(typeof Z=="string")Z!==""&&(_e=Z);else if(typeof Z=="object")_e=Z.definition,Me=Z.prefixes,ae=Z.offset,be=Z.baseName,Z.aliases&&(ne=Z.aliases.valueOf());else throw new TypeError('Cannot create unit "'+se+'" from "'+Z.toString()+'": expecting "string" or "Unit" or "Object"');if(ne){for(var Ae=0;Ae<ne.length;Ae++)if(vr(z,ne[Ae]))throw new Error('Cannot create alias "'+ne[Ae]+'": a unit with that name already exists')}if(_e&&typeof _e=="string"&&!he)try{he=x.parse(_e,{allowNoUnits:!0})}catch(ce){throw ce.message='Could not create unit "'+se+'" from "'+_e+'": '+ce.message,ce}else _e&&_e.type==="Unit"&&(he=_e.clone());ne=ne||[],ae=ae||0,Me&&Me.toUpperCase?Me=U[Me.toUpperCase()]||U.NONE:Me=U.NONE;var pe={};if(he){pe={name:se,value:he.value,dimensions:he.dimensions.slice(0),prefixes:Me,offset:ae};var He=!1;for(var Je in Q)if(vr(Q,Je)){for(var Ye=!0,Ke=0;Ke<W.length;Ke++)if(Math.abs((pe.dimensions[Ke]||0)-(Q[Je].dimensions[Ke]||0))>1e-12){Ye=!1;break}if(Ye){He=!0,pe.base=Q[Je];break}}if(!He){be=be||se+"_STUFF";var mt={dimensions:he.dimensions.slice(0)};mt.key=be,Q[be]=mt,ge[be]={unit:pe,prefix:U.NONE[""]},pe.base=Q[be]}}else{if(be=be||se+"_STUFF",W.indexOf(be)>=0)throw new Error('Cannot create new base unit "'+se+'": a base unit with that name already exists (and cannot be overridden)');W.push(be);for(var Fe in Q)vr(Q,Fe)&&(Q[Fe].dimensions[W.length-1]=0);for(var Ge={dimensions:[]},Ze=0;Ze<W.length;Ze++)Ge.dimensions[Ze]=0;Ge.dimensions[W.length-1]=1,Ge.key=be,Q[be]=Ge,pe={name:se,value:1,dimensions:Q[be].dimensions.slice(0),prefixes:Me,offset:ae,base:Q[be]},ge[be]={unit:pe,prefix:U.NONE[""]}}x.UNITS[se]=pe;for(var vt=0;vt<ne.length;vt++){var Dt=ne[vt],yt={};for(var Ar in pe)vr(pe,Ar)&&(yt[Ar]=pe[Ar]);yt.name=Dt,x.UNITS[Dt]=yt}return delete G.cache,new x(null,se)},x.deleteUnit=function(se){delete x.UNITS[se],delete G.cache},x.PREFIXES=U,x.BASE_DIMENSIONS=W,x.BASE_UNITS=Q,x.UNIT_SYSTEMS=ue,x.UNITS=z,x},{isClass:!0}),Ik="unit",s5e=["typed","Unit"],o5e=Le(Ik,s5e,r=>{var{typed:e,Unit:t}=r;return e(Ik,{Unit:function(i){return i.clone()},string:function(i){return t.isValuelessUnit(i)?new t(null,i):t.parse(i,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(i,a){return new t(i,a)},"number | BigNumber | Fraction":function(i){return new t(i)},"Array | Matrix":e.referToSelf(n=>i=>vn(i,n))})}),Fk="sparse",l5e=["typed","SparseMatrix"],u5e=Le(Fk,l5e,r=>{var{typed:e,SparseMatrix:t}=r;return e(Fk,{"":function(){return new t([])},string:function(i){return new t([],i)},"Array | Matrix":function(i){return new t(i)},"Array | Matrix, string":function(i,a){return new t(i,a)}})}),Mk="createUnit",c5e=["typed","Unit"],h5e=Le(Mk,c5e,r=>{var{typed:e,Unit:t}=r;return e(Mk,{"Object, Object":function(i,a){return t.createUnit(i,a)},Object:function(i){return t.createUnit(i,{})},"string, Unit | string | Object, Object":function(i,a,s){var o={};return o[i]=a,t.createUnit(o,s)},"string, Unit | string | Object":function(i,a){var s={};return s[i]=a,t.createUnit(s,{})},string:function(i){var a={};return a[i]={},t.createUnit(a,{})}})}),Lk="acos",f5e=["typed","config","Complex"],A5e=Le(Lk,f5e,r=>{var{typed:e,config:t,Complex:n}=r;return e(Lk,{number:function(a){return a>=-1&&a<=1||t.predictable?Math.acos(a):new n(a,0).acos()},Complex:function(a){return a.acos()},BigNumber:function(a){return a.acos()}})}),Dk="acosh",d5e=["typed","config","Complex"],g5e=Le(Dk,d5e,r=>{var{typed:e,config:t,Complex:n}=r;return e(Dk,{number:function(a){return a>=1||t.predictable?CG(a):a<=-1?new n(Math.log(Math.sqrt(a*a-1)-a),Math.PI):new n(a,0).acosh()},Complex:function(a){return a.acosh()},BigNumber:function(a){return a.acosh()}})}),kk="acot",p5e=["typed","BigNumber"],m5e=Le(kk,p5e,r=>{var{typed:e,BigNumber:t}=r;return e(kk,{number:SG,Complex:function(i){return i.acot()},BigNumber:function(i){return new t(1).div(i).atan()}})}),Rk="acoth",v5e=["typed","config","Complex","BigNumber"],y5e=Le(Rk,v5e,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(Rk,{number:function(s){return s>=1||s<=-1||t.predictable?BG(s):new n(s,0).acoth()},Complex:function(s){return s.acoth()},BigNumber:function(s){return new i(1).div(s).atanh()}})}),Ok="acsc",x5e=["typed","config","Complex","BigNumber"],w5e=Le(Ok,x5e,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(Ok,{number:function(s){return s<=-1||s>=1||t.predictable?TG(s):new n(s,0).acsc()},Complex:function(s){return s.acsc()},BigNumber:function(s){return new i(1).div(s).asin()}})}),Pk="acsch",_5e=["typed","BigNumber"],E5e=Le(Pk,_5e,r=>{var{typed:e,BigNumber:t}=r;return e(Pk,{number:NG,Complex:function(i){return i.acsch()},BigNumber:function(i){return new t(1).div(i).asinh()}})}),Uk="asec",b5e=["typed","config","Complex","BigNumber"],C5e=Le(Uk,b5e,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(Uk,{number:function(s){return s<=-1||s>=1||t.predictable?IG(s):new n(s,0).asec()},Complex:function(s){return s.asec()},BigNumber:function(s){return new i(1).div(s).acos()}})}),Qk="asech",S5e=["typed","config","Complex","BigNumber"],B5e=Le(Qk,S5e,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(Qk,{number:function(s){if(s<=1&&s>=-1||t.predictable){var o=1/s;if(o>0||t.predictable)return FG(s);var l=Math.sqrt(o*o-1);return new n(Math.log(l-o),Math.PI)}return new n(s,0).asech()},Complex:function(s){return s.asech()},BigNumber:function(s){return new i(1).div(s).acosh()}})}),Gk="asin",T5e=["typed","config","Complex"],N5e=Le(Gk,T5e,r=>{var{typed:e,config:t,Complex:n}=r;return e(Gk,{number:function(a){return a>=-1&&a<=1||t.predictable?Math.asin(a):new n(a,0).asin()},Complex:function(a){return a.asin()},BigNumber:function(a){return a.asin()}})}),I5e="asinh",F5e=["typed"],M5e=Le(I5e,F5e,r=>{var{typed:e}=r;return e("asinh",{number:MG,Complex:function(n){return n.asinh()},BigNumber:function(n){return n.asinh()}})}),L5e="atan",D5e=["typed"],k5e=Le(L5e,D5e,r=>{var{typed:e}=r;return e("atan",{number:function(n){return Math.atan(n)},Complex:function(n){return n.atan()},BigNumber:function(n){return n.atan()}})}),Hk="atan2",R5e=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],O5e=Le(Hk,R5e,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i,DenseMatrix:a,concat:s}=r,o=pc({typed:e,equalScalar:n}),l=Zo({typed:e}),u=KG({typed:e,equalScalar:n}),c=$s({typed:e,equalScalar:n}),h=ss({typed:e,DenseMatrix:a}),f=Li({typed:e,matrix:t,concat:s});return e(Hk,{"number, number":Math.atan2,"BigNumber, BigNumber":(A,d)=>i.atan2(A,d)},f({scalar:"number | BigNumber",SS:u,DS:l,SD:o,Ss:c,sS:h}))}),zk="atanh",P5e=["typed","config","Complex"],U5e=Le(zk,P5e,r=>{var{typed:e,config:t,Complex:n}=r;return e(zk,{number:function(a){return a<=1&&a>=-1||t.predictable?LG(a):new n(a,0).atanh()},Complex:function(a){return a.atanh()},BigNumber:function(a){return a.atanh()}})}),Pp=Le("trigUnit",["typed"],r=>{var{typed:e}=r;return{Unit:e.referToSelf(t=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(t,n.valueType())(n.value)})}}),qk="cos",Q5e=["typed"],G5e=Le(qk,Q5e,r=>{var{typed:e}=r,t=Pp({typed:e});return e(qk,{number:Math.cos,"Complex | BigNumber":n=>n.cos()},t)}),jk="cosh",H5e=["typed"],z5e=Le(jk,H5e,r=>{var{typed:e}=r;return e(jk,{number:Pye,"Complex | BigNumber":t=>t.cosh()})}),$k="cot",q5e=["typed","BigNumber"],j5e=Le($k,q5e,r=>{var{typed:e,BigNumber:t}=r,n=Pp({typed:e});return e($k,{number:DG,Complex:i=>i.cot(),BigNumber:i=>new t(1).div(i.tan())},n)}),Kk="coth",$5e=["typed","BigNumber"],K5e=Le(Kk,$5e,r=>{var{typed:e,BigNumber:t}=r;return e(Kk,{number:kG,Complex:n=>n.coth(),BigNumber:n=>new t(1).div(n.tanh())})}),Vk="csc",V5e=["typed","BigNumber"],W5e=Le(Vk,V5e,r=>{var{typed:e,BigNumber:t}=r,n=Pp({typed:e});return e(Vk,{number:RG,Complex:i=>i.csc(),BigNumber:i=>new t(1).div(i.sin())},n)}),Wk="csch",Y5e=["typed","BigNumber"],X5e=Le(Wk,Y5e,r=>{var{typed:e,BigNumber:t}=r;return e(Wk,{number:OG,Complex:n=>n.csch(),BigNumber:n=>new t(1).div(n.sinh())})}),Yk="sec",Z5e=["typed","BigNumber"],J5e=Le(Yk,Z5e,r=>{var{typed:e,BigNumber:t}=r,n=Pp({typed:e});return e(Yk,{number:PG,Complex:i=>i.sec(),BigNumber:i=>new t(1).div(i.cos())},n)}),Xk="sech",e4e=["typed","BigNumber"],t4e=Le(Xk,e4e,r=>{var{typed:e,BigNumber:t}=r;return e(Xk,{number:UG,Complex:n=>n.sech(),BigNumber:n=>new t(1).div(n.cosh())})}),Zk="sin",r4e=["typed"],n4e=Le(Zk,r4e,r=>{var{typed:e}=r,t=Pp({typed:e});return e(Zk,{number:Math.sin,"Complex | BigNumber":n=>n.sin()},t)}),Jk="sinh",i4e=["typed"],a4e=Le(Jk,i4e,r=>{var{typed:e}=r;return e(Jk,{number:QG,"Complex | BigNumber":t=>t.sinh()})}),e8="tan",s4e=["typed"],o4e=Le(e8,s4e,r=>{var{typed:e}=r,t=Pp({typed:e});return e(e8,{number:Math.tan,"Complex | BigNumber":n=>n.tan()},t)}),l4e="tanh",u4e=["typed"],c4e=Le(l4e,u4e,r=>{var{typed:e}=r;return e("tanh",{number:Qye,"Complex | BigNumber":t=>t.tanh()})}),t8="setCartesian",h4e=["typed","size","subset","compareNatural","Index","DenseMatrix"],f4e=Le(t8,h4e,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=r;return e(t8,{"Array | Matrix, Array | Matrix":function(l,u){var c=[];if(n(t(l),new a(0))!==0&&n(t(u),new a(0))!==0){var h=jn(Array.isArray(l)?l:l.toArray()).sort(i),f=jn(Array.isArray(u)?u:u.toArray()).sort(i);c=[];for(var A=0;A<h.length;A++)for(var d=0;d<f.length;d++)c.push([h[A],f[d]])}return Array.isArray(l)&&Array.isArray(u)?c:new s(c)}})}),r8="setDifference",A4e=["typed","size","subset","compareNatural","Index","DenseMatrix"],d4e=Le(r8,A4e,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=r;return e(r8,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(n(t(l),new a(0))===0)c=[];else{if(n(t(u),new a(0))===0)return jn(l.toArray());var h=fp(jn(Array.isArray(l)?l:l.toArray()).sort(i)),f=fp(jn(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var A,d=0;d<h.length;d++){A=!1;for(var p=0;p<f.length;p++)if(i(h[d].value,f[p].value)===0&&h[d].identifier===f[p].identifier){A=!0;break}A||c.push(h[d])}}return Array.isArray(l)&&Array.isArray(u)?Dw(c):new s(Dw(c))}})}),n8="setDistinct",g4e=["typed","size","subset","compareNatural","Index","DenseMatrix"],p4e=Le(n8,g4e,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=r;return e(n8,{"Array | Matrix":function(l){var u;if(n(t(l),new a(0))===0)u=[];else{var c=jn(Array.isArray(l)?l:l.toArray()).sort(i);u=[],u.push(c[0]);for(var h=1;h<c.length;h++)i(c[h],c[h-1])!==0&&u.push(c[h])}return Array.isArray(l)?u:new s(u)}})}),i8="setIntersect",m4e=["typed","size","subset","compareNatural","Index","DenseMatrix"],v4e=Le(i8,m4e,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=r;return e(i8,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(n(t(l),new a(0))===0||n(t(u),new a(0))===0)c=[];else{var h=fp(jn(Array.isArray(l)?l:l.toArray()).sort(i)),f=fp(jn(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var A=0;A<h.length;A++)for(var d=0;d<f.length;d++)if(i(h[A].value,f[d].value)===0&&h[A].identifier===f[d].identifier){c.push(h[A]);break}}return Array.isArray(l)&&Array.isArray(u)?Dw(c):new s(Dw(c))}})}),a8="setIsSubset",y4e=["typed","size","subset","compareNatural","Index"],x4e=Le(a8,y4e,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a}=r;return e(a8,{"Array | Matrix, Array | Matrix":function(o,l){if(n(t(o),new a(0))===0)return!0;if(n(t(l),new a(0))===0)return!1;for(var u=fp(jn(Array.isArray(o)?o:o.toArray()).sort(i)),c=fp(jn(Array.isArray(l)?l:l.toArray()).sort(i)),h,f=0;f<u.length;f++){h=!1;for(var A=0;A<c.length;A++)if(i(u[f].value,c[A].value)===0&&u[f].identifier===c[A].identifier){h=!0;break}if(h===!1)return!1}return!0}})}),s8="setMultiplicity",w4e=["typed","size","subset","compareNatural","Index"],_4e=Le(s8,w4e,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a}=r;return e(s8,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(o,l){if(n(t(l),new a(0))===0)return 0;for(var u=jn(Array.isArray(l)?l:l.toArray()),c=0,h=0;h<u.length;h++)i(u[h],o)===0&&c++;return c}})}),o8="setPowerset",E4e=["typed","size","subset","compareNatural","Index"],b4e=Le(o8,E4e,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a}=r;return e(o8,{"Array | Matrix":function(u){if(n(t(u),new a(0))===0)return[];for(var c=jn(Array.isArray(u)?u:u.toArray()).sort(i),h=[],f=0;f.toString(2).length<=c.length;)h.push(s(c,f.toString(2).split("").reverse())),f++;return o(h)}});function s(l,u){for(var c=[],h=0;h<u.length;h++)u[h]==="1"&&c.push(l[h]);return c}function o(l){for(var u=[],c=l.length-1;c>0;c--)for(var h=0;h<c;h++)l[h].length>l[h+1].length&&(u=l[h],l[h]=l[h+1],l[h+1]=u);return l}}),l8="setSize",C4e=["typed","compareNatural"],S4e=Le(l8,C4e,r=>{var{typed:e,compareNatural:t}=r;return e(l8,{"Array | Matrix":function(i){return Array.isArray(i)?jn(i).length:jn(i.toArray()).length},"Array | Matrix, boolean":function(i,a){if(a===!1||i.length===0)return Array.isArray(i)?jn(i).length:jn(i.toArray()).length;for(var s=jn(Array.isArray(i)?i:i.toArray()).sort(t),o=1,l=1;l<s.length;l++)t(s[l],s[l-1])!==0&&o++;return o}})}),u8="setSymDifference",B4e=["typed","size","concat","subset","setDifference","Index"],T4e=Le(u8,B4e,r=>{var{typed:e,size:t,concat:n,subset:i,setDifference:a,Index:s}=r;return e(u8,{"Array | Matrix, Array | Matrix":function(l,u){if(i(t(l),new s(0))===0)return jn(u);if(i(t(u),new s(0))===0)return jn(l);var c=jn(l),h=jn(u);return n(a(c,h),a(h,c))}})}),c8="setUnion",N4e=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],I4e=Le(c8,N4e,r=>{var{typed:e,size:t,concat:n,subset:i,setIntersect:a,setSymDifference:s,Index:o}=r;return e(c8,{"Array | Matrix, Array | Matrix":function(u,c){if(i(t(u),new o(0))===0)return jn(c);if(i(t(c),new o(0))===0)return jn(u);var h=jn(u),f=jn(c);return n(s(h,f),a(h,f))}})}),h8="add",F4e=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],M4e=Le(h8,F4e,r=>{var{typed:e,matrix:t,addScalar:n,equalScalar:i,DenseMatrix:a,SparseMatrix:s,concat:o}=r,l=jA({typed:e}),u=s3({typed:e,equalScalar:i}),c=u0({typed:e,DenseMatrix:a}),h=Li({typed:e,matrix:t,concat:o});return e(h8,{"any, any":n,"any, any, ...any":e.referToSelf(f=>(A,d,p)=>{for(var y=f(A,d),v=0;v<p.length;v++)y=f(y,p[v]);return y})},h({elop:n,DS:l,SS:u,Ss:c}))}),f8="hypot",L4e=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],D4e=Le(f8,L4e,r=>{var{typed:e,abs:t,addScalar:n,divideScalar:i,multiplyScalar:a,sqrt:s,smaller:o,isPositive:l}=r;return e(f8,{"... number | BigNumber":u,Array:u,Matrix:c=>u(jn(c.toArray()))});function u(c){for(var h=0,f=0,A=0;A<c.length;A++){if(rf(c[A]))throw new TypeError("Unexpected type of argument to hypot");var d=t(c[A]);o(f,d)?(h=a(h,a(i(f,d),i(f,d))),h=n(h,1),f=d):h=n(h,l(d)?a(i(d,f),i(d,f)):d)}return a(f,s(h))}}),A8="norm",k4e=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],R4e=Le(A8,k4e,r=>{var{typed:e,abs:t,add:n,pow:i,conj:a,sqrt:s,multiply:o,equalScalar:l,larger:u,smaller:c,matrix:h,ctranspose:f,eigs:A}=r;return e(A8,{number:Math.abs,Complex:function(B){return B.abs()},BigNumber:function(B){return B.abs()},boolean:function(B){return Math.abs(B)},Array:function(B){return S(h(B),2)},Matrix:function(B){return S(B,2)},"Array, number | BigNumber | string":function(B,T){return S(h(B),T)},"Matrix, number | BigNumber | string":function(B,T){return S(B,T)}});function d(I){var B=0;return I.forEach(function(T){var M=t(T);u(M,B)&&(B=M)},!0),B}function p(I){var B;return I.forEach(function(T){var M=t(T);(!B||c(M,B))&&(B=M)},!0),B||0}function y(I,B){if(B===Number.POSITIVE_INFINITY||B==="inf")return d(I);if(B===Number.NEGATIVE_INFINITY||B==="-inf")return p(I);if(B==="fro")return S(I,2);if(typeof B=="number"&&!isNaN(B)){if(!l(B,0)){var T=0;return I.forEach(function(M){T=n(i(t(M),B),T)},!0),i(T,1/B)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function v(I){var B=0;return I.forEach(function(T,M){B=n(B,o(T,a(T)))}),t(s(B))}function w(I){var B=[],T=0;return I.forEach(function(M,F){var N=F[1],O=n(B[N]||0,t(M));u(O,T)&&(T=O),B[N]=O},!0),T}function x(I){var B=I.size();if(B[0]!==B[1])throw new RangeError("Invalid matrix dimensions");var T=f(I),M=o(T,I),F=A(M).values.toArray(),N=F[F.length-1];return t(s(N))}function b(I){var B=[],T=0;return I.forEach(function(M,F){var N=F[0],O=n(B[N]||0,t(M));u(O,T)&&(T=O),B[N]=O},!0),T}function C(I,B){if(B===1)return w(I);if(B===Number.POSITIVE_INFINITY||B==="inf")return b(I);if(B==="fro")return v(I);if(B===2)return x(I);throw new Error("Unsupported parameter value "+B)}function S(I,B){var T=I.size();if(T.length===1)return y(I,B);if(T.length===2){if(T[0]&&T[1])return C(I,B);throw new RangeError("Invalid matrix dimensions")}}}),d8="dot",O4e=["typed","addScalar","multiplyScalar","conj","size"],P4e=Le(d8,O4e,r=>{var{typed:e,addScalar:t,multiplyScalar:n,conj:i,size:a}=r;return e(d8,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":l});function s(c,h){var f=u(c),A=u(h),d,p;if(f.length===1)d=f[0];else if(f.length===2&&f[1]===1)d=f[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+f.join(", ")+")");if(A.length===1)p=A[0];else if(A.length===2&&A[1]===1)p=A[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+A.join(", ")+")");if(d!==p)throw new RangeError("Vectors must have equal length ("+d+" != "+p+")");if(d===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return d}function o(c,h){var f=s(c,h),A=Lr(c)?c._data:c,d=Lr(c)?c._datatype||c.getDataType():void 0,p=Lr(h)?h._data:h,y=Lr(h)?h._datatype||h.getDataType():void 0,v=u(c).length===2,w=u(h).length===2,x=t,b=n;if(d&&y&&d===y&&typeof d=="string"&&d!=="mixed"){var C=d;x=e.find(t,[C,C]),b=e.find(n,[C,C])}if(!v&&!w){for(var S=b(i(A[0]),p[0]),I=1;I<f;I++)S=x(S,b(i(A[I]),p[I]));return S}if(!v&&w){for(var B=b(i(A[0]),p[0][0]),T=1;T<f;T++)B=x(B,b(i(A[T]),p[T][0]));return B}if(v&&!w){for(var M=b(i(A[0][0]),p[0]),F=1;F<f;F++)M=x(M,b(i(A[F][0]),p[F]));return M}if(v&&w){for(var N=b(i(A[0][0]),p[0][0]),O=1;O<f;O++)N=x(N,b(i(A[O][0]),p[O][0]));return N}}function l(c,h){s(c,h);for(var f=c._index,A=c._values,d=h._index,p=h._values,y=0,v=t,w=n,x=0,b=0;x<f.length&&b<d.length;){var C=f[x],S=d[b];if(C<S){x++;continue}if(C>S){b++;continue}C===S&&(y=v(y,w(A[x],p[b])),x++,b++)}return y}function u(c){return Lr(c)?c.size():a(c)}}),U4e="trace",Q4e=["typed","matrix","add"],G4e=Le(U4e,Q4e,r=>{var{typed:e,matrix:t,add:n}=r;return e("trace",{Array:function(o){return i(t(o))},SparseMatrix:a,DenseMatrix:i,any:Yr});function i(s){var o=s._size,l=s._data;switch(o.length){case 1:if(o[0]===1)return Yr(l[0]);throw new RangeError("Matrix must be square (size: "+pn(o)+")");case 2:{var u=o[0],c=o[1];if(u===c){for(var h=0,f=0;f<u;f++)h=n(h,l[f][f]);return h}else throw new RangeError("Matrix must be square (size: "+pn(o)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+pn(o)+")")}}function a(s){var o=s._values,l=s._index,u=s._ptr,c=s._size,h=c[0],f=c[1];if(h===f){var A=0;if(o.length>0)for(var d=0;d<f;d++)for(var p=u[d],y=u[d+1],v=p;v<y;v++){var w=l[v];if(w===d){A=n(A,o[v]);break}if(w>d)break}return A}throw new RangeError("Matrix must be square (size: "+pn(c)+")")}}),g8="index",H4e=["typed","Index"],z4e=Le(g8,H4e,r=>{var{typed:e,Index:t}=r;return e(g8,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var a=i.map(function(o){return sn(o)?o.toNumber():ti(o)||Lr(o)?o.map(function(l){return sn(l)?l.toNumber():l}):o}),s=new t;return t.apply(s,a),s}})}),cH=new Set(["end"]),q4e="Node",j4e=["mathWithTransform"],$4e=Le(q4e,j4e,r=>{var{mathWithTransform:e}=r;function t(i){for(var a of[...cH])if(i.has(a))throw new Error('Scope contains an illegal symbol, "'+a+'" is a reserved keyword')}class n{get type(){return"Node"}get isNode(){return!0}evaluate(a){return this.compile().evaluate(a)}compile(){var a=this._compile(e,{}),s={},o=null;function l(u){var c=Gg(u);return t(c),a(c,s,o)}return{evaluate:l}}_compile(a,s){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(a){throw new Error("Cannot run forEach on a Node interface")}map(a){throw new Error("Cannot run map on a Node interface")}_ifNode(a){if(!mi(a))throw new TypeError("Callback function must return a Node");return a}traverse(a){a(this,null,null);function s(o,l){o.forEach(function(u,c,h){l(u,c,h),s(u,l)})}s(this,a)}transform(a){function s(o,l,u){var c=a(o,l,u);return c!==o?c:o.map(s)}return s(this,null,null)}filter(a){var s=[];return this.traverse(function(o,l,u){a(o,l,u)&&s.push(o)}),s}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(a){return a.cloneDeep()})}equals(a){return a?this.type===a.type&&Vd(this,a):!1}toString(a){var s=this._getCustomString(a);return typeof s<"u"?s:this._toString(a)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(a){var s=this._getCustomString(a);return typeof s<"u"?s:this._toHTML(a)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(a){var s=this._getCustomString(a);return typeof s<"u"?s:this._toTex(a)}_toTex(a){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(a){if(a&&typeof a=="object")switch(typeof a.handler){case"object":case"undefined":return;case"function":return a.handler(this,a);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return n},{isClass:!0,isNode:!0});function Jo(r){return r&&r.isIndexError?new Ac(r.index+1,r.min+1,r.max!==void 0?r.max+1:void 0):r}function hH(r){var{subset:e}=r;return function(n,i){try{if(Array.isArray(n))return e(n,i);if(n&&typeof n.subset=="function")return n.subset(i);if(typeof n=="string")return e(n,i);if(typeof n=="object"){if(!i.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return jo(n,i.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(a){throw Jo(a)}}}var D2="AccessorNode",K4e=["subset","Node"],V4e=Le(D2,K4e,r=>{var{subset:e,Node:t}=r,n=hH({subset:e});function i(s){return!(Kd(s)||mu(s)||Pn(s)||DA(s)||K_(s)||uf(s)||Cs(s))}class a extends t{constructor(o,l){if(super(),!mi(o))throw new TypeError('Node expected for parameter "object"');if(!Mp(l))throw new TypeError('IndexNode expected for parameter "index"');this.object=o,this.index=l}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return D2}get isAccessorNode(){return!0}_compile(o,l){var u=this.object._compile(o,l),c=this.index._compile(o,l);if(this.index.isObjectProperty()){var h=this.index.getObjectProperty();return function(A,d,p){return jo(u(A,d,p),h)}}else return function(A,d,p){var y=u(A,d,p),v=c(A,d,y);return n(y,v)}}forEach(o){o(this.object,"object",this),o(this.index,"index",this)}map(o){return new a(this._ifNode(o(this.object,"object",this)),this._ifNode(o(this.index,"index",this)))}clone(){return new a(this.object,this.index)}_toString(o){var l=this.object.toString(o);return i(this.object)&&(l="("+l+")"),l+this.index.toString(o)}_toHTML(o){var l=this.object.toHTML(o);return i(this.object)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+this.index.toHTML(o)}_toTex(o){var l=this.object.toTex(o);return i(this.object)&&(l="\\left(' + object + '\\right)"),l+this.index.toTex(o)}toJSON(){return{mathjs:D2,object:this.object,index:this.index}}static fromJSON(o){return new a(o.object,o.index)}}return as(a,"name",D2),a},{isClass:!0,isNode:!0}),k2="ArrayNode",W4e=["Node"],Y4e=Le(k2,W4e,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every(mi))throw new TypeError("Array containing Nodes expected")}get type(){return k2}get isArrayNode(){return!0}_compile(i,a){var s=nf(this.items,function(u){return u._compile(i,a)}),o=i.config.matrix!=="Array";if(o){var l=i.matrix;return function(c,h,f){return l(nf(s,function(A){return A(c,h,f)}))}}else return function(c,h,f){return nf(s,function(A){return A(c,h,f)})}}forEach(i){for(var a=0;a<this.items.length;a++){var s=this.items[a];i(s,"items["+a+"]",this)}}map(i){for(var a=[],s=0;s<this.items.length;s++)a[s]=this._ifNode(i(this.items[s],"items["+s+"]",this));return new t(a)}clone(){return new t(this.items.slice(0))}_toString(i){var a=this.items.map(function(s){return s.toString(i)});return"["+a.join(", ")+"]"}toJSON(){return{mathjs:k2,items:this.items}}static fromJSON(i){return new t(i.items)}_toHTML(i){var a=this.items.map(function(s){return s.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function a(s,o){var l=s.some(mu)&&!s.every(mu),u=o||l,c=u?"&":"\\\\",h=s.map(function(f){return f.items?a(f.items,!o):f.toTex(i)}).join(c);return l||!u||u&&!o?"\\begin{bmatrix}"+h+"\\end{bmatrix}":h}return a(this.items,!1)}}return as(t,"name",k2),t},{isClass:!0,isNode:!0});function X4e(r){var{subset:e,matrix:t}=r;return function(i,a,s){try{if(Array.isArray(i)){var o=t(i).subset(a,s).valueOf();return o.forEach((l,u)=>{i[u]=l}),i}else{if(i&&typeof i.subset=="function")return i.subset(a,s);if(typeof i=="string")return e(i,a,s);if(typeof i=="object"){if(!a.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return lp(i,a.getObjectProperty(),s),i}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(l){throw Jo(l)}}}var Yu=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function R2(r,e){if(!e||e!=="auto")return r;for(var t=r;uf(t);)t=t.content;return t}function bi(r,e,t,n){var i=r;e!=="keep"&&(i=r.getContent());for(var a=i.getIdentifier(),s=null,o=0;o<Yu.length;o++)if(a in Yu[o]){s=o;break}if(a==="OperatorNode:multiply"&&i.implicit&&t!=="show"){var l=R2(i.args[0],e);!(Pn(l)&&n&&n.getIdentifier()==="OperatorNode:divide"&&w5(R2(n.args[0],e)))&&!(l.getIdentifier()==="OperatorNode:divide"&&w5(R2(l.args[0],e))&&Pn(R2(l.args[1])))&&(s+=1)}return s}function Em(r,e){var t=r;e!=="keep"&&(t=r.getContent());var n=t.getIdentifier(),i=bi(t,e);if(i===null)return null;var a=Yu[i][n];if(vr(a,"associativity")){if(a.associativity==="left")return"left";if(a.associativity==="right")return"right";throw Error("'"+n+"' has the invalid associativity '"+a.associativity+"'.")}return null}function BC(r,e,t){var n=t!=="keep"?r.getContent():r,i=t!=="keep"?r.getContent():e,a=n.getIdentifier(),s=i.getIdentifier(),o=bi(n,t);if(o===null)return null;var l=Yu[o][a];if(vr(l,"associativeWith")&&l.associativeWith instanceof Array){for(var u=0;u<l.associativeWith.length;u++)if(l.associativeWith[u]===s)return!0;return!1}return null}function Z4e(r){var e="OperatorNode:"+r;for(var t of Yu)if(e in t)return t[e].op;return null}var O2="AssignmentNode",J4e=["subset","?matrix","Node"],eBe=Le(O2,J4e,r=>{var{subset:e,matrix:t,Node:n}=r,i=hH({subset:e}),a=X4e({subset:e,matrix:t});function s(l,u,c){u||(u="keep");var h=bi(l,u,c),f=bi(l.value,u,c);return u==="all"||f!==null&&f<=h}class o extends n{constructor(u,c,h){if(super(),this.object=u,this.index=h?c:null,this.value=h||c,!Cs(u)&&!Kd(u))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(Cs(u)&&u.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!Mp(this.index))throw new TypeError('IndexNode expected as "index"');if(!mi(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return O2}get isAssignmentNode(){return!0}_compile(u,c){var h=this.object._compile(u,c),f=this.index?this.index._compile(u,c):null,A=this.value._compile(u,c),d=this.object.name;if(this.index)if(this.index.isObjectProperty()){var p=this.index.getObjectProperty();return function(b,C,S){var I=h(b,C,S),B=A(b,C,S);return lp(I,p,B),B}}else{if(Cs(this.object))return function(b,C,S){var I=h(b,C,S),B=A(b,C,S),T=f(b,C,I);return b.set(d,a(I,T,B)),B};var y=this.object.object._compile(u,c);if(this.object.index.isObjectProperty()){var v=this.object.index.getObjectProperty();return function(b,C,S){var I=y(b,C,S),B=jo(I,v),T=f(b,C,B),M=A(b,C,S);return lp(I,v,a(B,T,M)),M}}else{var w=this.object.index._compile(u,c);return function(b,C,S){var I=y(b,C,S),B=w(b,C,I),T=i(I,B),M=f(b,C,T),F=A(b,C,S);return a(I,B,a(T,M,F)),F}}}else{if(!Cs(this.object))throw new TypeError("SymbolNode expected as object");return function(b,C,S){var I=A(b,C,S);return b.set(d,I),I}}}forEach(u){u(this.object,"object",this),this.index&&u(this.index,"index",this),u(this.value,"value",this)}map(u){var c=this._ifNode(u(this.object,"object",this)),h=this.index?this._ifNode(u(this.index,"index",this)):null,f=this._ifNode(u(this.value,"value",this));return new o(c,h,f)}clone(){return new o(this.object,this.index,this.value)}_toString(u){var c=this.object.toString(u),h=this.index?this.index.toString(u):"",f=this.value.toString(u);return s(this,u&&u.parenthesis,u&&u.implicit)&&(f="("+f+")"),c+h+" = "+f}toJSON(){return{mathjs:O2,object:this.object,index:this.index,value:this.value}}static fromJSON(u){return new o(u.object,u.index,u.value)}_toHTML(u){var c=this.object.toHTML(u),h=this.index?this.index.toHTML(u):"",f=this.value.toHTML(u);return s(this,u&&u.parenthesis,u&&u.implicit)&&(f='<span class="math-paranthesis math-round-parenthesis">(</span>'+f+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+h+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+f}_toTex(u){var c=this.object.toTex(u),h=this.index?this.index.toTex(u):"",f=this.value.toTex(u);return s(this,u&&u.parenthesis,u&&u.implicit)&&(f="\\left(".concat(f,"\\right)")),c+h+"="+f}}return as(o,"name",O2),o},{isClass:!0,isNode:!0}),P2="BlockNode",tBe=["ResultSet","Node"],rBe=Le(P2,tBe,r=>{var{ResultSet:e,Node:t}=r;class n extends t{constructor(a){if(super(),!Array.isArray(a))throw new Error("Array expected");this.blocks=a.map(function(s){var o=s&&s.node,l=s&&s.visible!==void 0?s.visible:!0;if(!mi(o))throw new TypeError('Property "node" must be a Node');if(typeof l!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:o,visible:l}})}get type(){return P2}get isBlockNode(){return!0}_compile(a,s){var o=nf(this.blocks,function(l){return{evaluate:l.node._compile(a,s),visible:l.visible}});return function(u,c,h){var f=[];return J_(o,function(d){var p=d.evaluate(u,c,h);d.visible&&f.push(p)}),new e(f)}}forEach(a){for(var s=0;s<this.blocks.length;s++)a(this.blocks[s].node,"blocks["+s+"].node",this)}map(a){for(var s=[],o=0;o<this.blocks.length;o++){var l=this.blocks[o],u=this._ifNode(a(l.node,"blocks["+o+"].node",this));s[o]={node:u,visible:l.visible}}return new n(s)}clone(){var a=this.blocks.map(function(s){return{node:s.node,visible:s.visible}});return new n(a)}_toString(a){return this.blocks.map(function(s){return s.node.toString(a)+(s.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:P2,blocks:this.blocks}}static fromJSON(a){return new n(a.blocks)}_toHTML(a){return this.blocks.map(function(s){return s.node.toHTML(a)+(s.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(a){return this.blocks.map(function(s){return s.node.toTex(a)+(s.visible?"":";")}).join(`\\;\\;
`)}}return as(n,"name",P2),n},{isClass:!0,isNode:!0}),U2="ConditionalNode",nBe=["Node"],iBe=Le(U2,nBe,r=>{var{Node:e}=r;function t(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(sn(i))return!i.isZero();if(rf(i))return!!(i.re||i.im);if(yu(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+Si(i)+'"')}class n extends e{constructor(a,s,o){if(super(),!mi(a))throw new TypeError("Parameter condition must be a Node");if(!mi(s))throw new TypeError("Parameter trueExpr must be a Node");if(!mi(o))throw new TypeError("Parameter falseExpr must be a Node");this.condition=a,this.trueExpr=s,this.falseExpr=o}get type(){return U2}get isConditionalNode(){return!0}_compile(a,s){var o=this.condition._compile(a,s),l=this.trueExpr._compile(a,s),u=this.falseExpr._compile(a,s);return function(h,f,A){return t(o(h,f,A))?l(h,f,A):u(h,f,A)}}forEach(a){a(this.condition,"condition",this),a(this.trueExpr,"trueExpr",this),a(this.falseExpr,"falseExpr",this)}map(a){return new n(this._ifNode(a(this.condition,"condition",this)),this._ifNode(a(this.trueExpr,"trueExpr",this)),this._ifNode(a(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=bi(this,s,a&&a.implicit),l=this.condition.toString(a),u=bi(this.condition,s,a&&a.implicit);(s==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=o)&&(l="("+l+")");var c=this.trueExpr.toString(a),h=bi(this.trueExpr,s,a&&a.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||h!==null&&h<=o)&&(c="("+c+")");var f=this.falseExpr.toString(a),A=bi(this.falseExpr,s,a&&a.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||A!==null&&A<=o)&&(f="("+f+")"),l+" ? "+c+" : "+f}toJSON(){return{mathjs:U2,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(a){return new n(a.condition,a.trueExpr,a.falseExpr)}_toHTML(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=bi(this,s,a&&a.implicit),l=this.condition.toHTML(a),u=bi(this.condition,s,a&&a.implicit);(s==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=o)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(a),h=bi(this.trueExpr,s,a&&a.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||h!==null&&h<=o)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var f=this.falseExpr.toHTML(a),A=bi(this.falseExpr,s,a&&a.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||A!==null&&A<=o)&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+f}_toTex(a){return"\\begin{cases} {"+this.trueExpr.toTex(a)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(a)+"}\\\\{"+this.falseExpr.toTex(a)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return as(n,"name",U2),n},{isClass:!0,isNode:!0}),M5=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},aBe={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},sBe={"–":"\\--","—":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},oBe=function(e,t){return M5({},e,t)},lBe=function(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.preserveFormatting,n=t===void 0?!1:t,i=e.escapeMapFn,a=i===void 0?oBe:i,s=String(r),o="",l=a(M5({},aBe),n?M5({},sBe):{}),u=Object.keys(l),c=function(){var f=!1;u.forEach(function(A,d){f||s.length>=A.length&&s.slice(0,A.length)===A&&(o+=l[u[d]],s=s.slice(A.length,s.length),f=!0)}),f||(o+=s.slice(0,1),s=s.slice(1,s.length))};s;)c();return o};const uBe=Af(lBe);var L5={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},Hn={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},p8={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(Hn.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(Hn.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(Hn.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(Hn.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(Hn.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(Hn.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(Hn.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(Hn.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(Hn.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(Hn.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(Hn.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(Hn.bitAnd,"${args[1]}\\right)")},bitNot:{1:Hn.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(Hn.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(Hn.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(Hn.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(Hn.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(Hn.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(Hn.and,"${args[1]}\\right)")},not:{1:Hn.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(Hn.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(Hn.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(Hn.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(Hn.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(Hn.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(Hn.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(Hn.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(Hn.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(Hn.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(Hn.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(Hn.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(Hn.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(Hn.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(L5.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},cBe="\\mathrm{${name}}\\left(${args}\\right)",m8={deg:"^\\circ"};function D5(r){return uBe(r,{preserveFormatting:!0})}function fH(r,e){return e=typeof e>"u"?!1:e,e?vr(m8,r)?m8[r]:"\\mathrm{"+D5(r)+"}":vr(L5,r)?L5[r]:D5(r)}var Q2="ConstantNode",hBe=["Node"],fBe=Le(Q2,hBe,r=>{var{Node:e}=r;class t extends e{constructor(i){super(),this.value=i}get type(){return Q2}get isConstantNode(){return!0}_compile(i,a){var s=this.value;return function(){return s}}forEach(i){}map(i){return this.clone()}clone(){return new t(this.value)}_toString(i){return pn(this.value,i)}_toHTML(i){var a=this._toString(i);switch(Si(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+a+"</span>";case"string":return'<span class="math-string">'+a+"</span>";case"boolean":return'<span class="math-boolean">'+a+"</span>";case"null":return'<span class="math-null-symbol">'+a+"</span>";case"undefined":return'<span class="math-undefined">'+a+"</span>";default:return'<span class="math-symbol">'+a+"</span>"}}toJSON(){return{mathjs:Q2,value:this.value}}static fromJSON(i){return new t(i.value)}_toTex(i){var a=this._toString(i),s=Si(this.value);switch(s){case"string":return"\\mathtt{"+D5(a)+"}";case"number":case"BigNumber":{var o=s==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!o)return this.value.valueOf()<0?"-\\infty":"\\infty";var l=a.toLowerCase().indexOf("e");return l!==-1?a.substring(0,l)+"\\cdot10^{"+a.substring(l+1)+"}":a}case"Fraction":return this.value.toLatex();default:return a}}}return as(t,"name",Q2),t},{isClass:!0,isNode:!0}),G2="FunctionAssignmentNode",ABe=["typed","Node"],dBe=Le(G2,ABe,r=>{var{typed:e,Node:t}=r;function n(a,s,o){var l=bi(a,s,o),u=bi(a.expr,s,o);return s==="all"||u!==null&&u<=l}class i extends t{constructor(s,o,l){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(o))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!mi(l))throw new TypeError('Node expected for parameter "expr"');if(cH.has(s))throw new Error('Illegal function name, "'+s+'" is a reserved keyword');var u=new Set;for(var c of o){var h=typeof c=="string"?c:c.name;if(u.has(h))throw new Error('Duplicate parameter name "'.concat(h,'"'));u.add(h)}this.name=s,this.params=o.map(function(f){return f&&f.name||f}),this.types=o.map(function(f){return f&&f.type||"any"}),this.expr=l}get type(){return G2}get isFunctionAssignmentNode(){return!0}_compile(s,o){var l=Object.create(o);J_(this.params,function(d){l[d]=!0});var u=this.expr._compile(s,l),c=this.name,h=this.params,f=mL(this.types,","),A=c+"("+mL(this.params,", ")+")";return function(p,y,v){var w={};w[f]=function(){for(var b=Object.create(y),C=0;C<h.length;C++)b[h[C]]=arguments[C];return u(p,b,v)};var x=e(c,w);return x.syntax=A,p.set(c,x),x}}forEach(s){s(this.expr,"expr",this)}map(s){var o=this._ifNode(s(this.expr,"expr",this));return new i(this.name,this.params.slice(0),o)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=this.expr.toString(s);return n(this,o,s&&s.implicit)&&(l="("+l+")"),this.name+"("+this.params.join(", ")+") = "+l}toJSON(){var s=this.types;return{mathjs:G2,name:this.name,params:this.params.map(function(o,l){return{name:o,type:s[l]}}),expr:this.expr}}static fromJSON(s){return new i(s.name,s.params,s.expr)}_toHTML(s){for(var o=s&&s.parenthesis?s.parenthesis:"keep",l=[],u=0;u<this.params.length;u++)l.push('<span class="math-symbol math-parameter">'+xu(this.params[u])+"</span>");var c=this.expr.toHTML(s);return n(this,o,s&&s.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+xu(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=this.expr.toTex(s);return n(this,o,s&&s.implicit)&&(l="\\left(".concat(l,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(fH).join(",")+"\\right)="+l}}return as(i,"name",G2),i},{isClass:!0,isNode:!0}),H2="IndexNode",gBe=["Node","size"],pBe=Le(H2,gBe,r=>{var{Node:e,size:t}=r;class n extends e{constructor(a,s){if(super(),this.dimensions=a,this.dotNotation=s||!1,!Array.isArray(a)||!a.every(mi))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return H2}get isIndexNode(){return!0}_compile(a,s){var o=nf(this.dimensions,function(u,c){var h=u.filter(d=>d.isSymbolNode&&d.name==="end").length>0;if(h){var f=Object.create(s);f.end=!0;var A=u._compile(a,f);return function(p,y,v){if(!Lr(v)&&!ti(v)&&!ho(v))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Si(v));var w=t(v).valueOf(),x=Object.create(y);return x.end=w[c],A(p,x,v)}}else return u._compile(a,s)}),l=jo(a,"index");return function(c,h,f){var A=nf(o,function(d){return d(c,h,f)});return l(...A)}}forEach(a){for(var s=0;s<this.dimensions.length;s++)a(this.dimensions[s],"dimensions["+s+"]",this)}map(a){for(var s=[],o=0;o<this.dimensions.length;o++)s[o]=this._ifNode(a(this.dimensions[o],"dimensions["+o+"]",this));return new n(s,this.dotNotation)}clone(){return new n(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&Pn(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(a){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:H2,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(a){return new n(a.dimensions,a.dotNotation)}_toHTML(a){for(var s=[],o=0;o<this.dimensions.length;o++)s[o]=this.dimensions[o].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+xu(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(a){var s=this.dimensions.map(function(o){return o.toTex(a)});return this.dotNotation?"."+this.getObjectProperty():"_{"+s.join(",")+"}"}}return as(n,"name",H2),n},{isClass:!0,isNode:!0}),z2="ObjectNode",mBe=["Node"],vBe=Le(z2,mBe,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(a){return mi(i[a])})))throw new TypeError("Object containing Nodes expected")}get type(){return z2}get isObjectNode(){return!0}_compile(i,a){var s={};for(var o in this.properties)if(vr(this.properties,o)){var l=Cg(o),u=JSON.parse(l),c=jo(this.properties,o);s[u]=c._compile(i,a)}return function(f,A,d){var p={};for(var y in s)vr(s,y)&&(p[y]=s[y](f,A,d));return p}}forEach(i){for(var a in this.properties)vr(this.properties,a)&&i(this.properties[a],"properties["+Cg(a)+"]",this)}map(i){var a={};for(var s in this.properties)vr(this.properties,s)&&(a[s]=this._ifNode(i(this.properties[s],"properties["+Cg(s)+"]",this)));return new t(a)}clone(){var i={};for(var a in this.properties)vr(this.properties,a)&&(i[a]=this.properties[a]);return new t(i)}_toString(i){var a=[];for(var s in this.properties)vr(this.properties,s)&&a.push(Cg(s)+": "+this.properties[s].toString(i));return"{"+a.join(", ")+"}"}toJSON(){return{mathjs:z2,properties:this.properties}}static fromJSON(i){return new t(i.properties)}_toHTML(i){var a=[];for(var s in this.properties)vr(this.properties,s)&&a.push('<span class="math-symbol math-property">'+xu(s)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[s].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var a=[];for(var s in this.properties)vr(this.properties,s)&&a.push("\\mathbf{"+s+":} & "+this.properties[s].toTex(i)+"\\\\");var o="\\left\\{\\begin{array}{ll}"+a.join(`
`)+"\\end{array}\\right\\}";return o}}return as(t,"name",z2),t},{isClass:!0,isNode:!0});function Wm(r,e){return new EQ(r,new W_(e),new Set(Object.keys(e)))}var q2="OperatorNode",yBe=["Node"],xBe=Le(q2,yBe,r=>{var{Node:e}=r;function t(a,s){var o=a;if(s==="auto")for(;uf(o);)o=o.content;return Pn(o)?!0:Ua(o)?t(o.args[0],s):!1}function n(a,s,o,l,u){var c=bi(a,s,o),h=Em(a,s);if(s==="all"||l.length>2&&a.getIdentifier()!=="OperatorNode:add"&&a.getIdentifier()!=="OperatorNode:multiply")return l.map(function(M){switch(M.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var f;switch(l.length){case 0:f=[];break;case 1:{var A=bi(l[0],s,o,a);if(u&&A!==null){var d,p;if(s==="keep"?(d=l[0].getIdentifier(),p=a.getIdentifier()):(d=l[0].getContent().getIdentifier(),p=a.getContent().getIdentifier()),Yu[c][p].latexLeftParens===!1){f=[!1];break}if(Yu[A][d].latexParens===!1){f=[!1];break}}if(A===null){f=[!1];break}if(A<=c){f=[!0];break}f=[!1]}break;case 2:{var y,v=bi(l[0],s,o,a),w=BC(a,l[0],s);v===null?y=!1:v===c&&h==="right"&&!w||v<c?y=!0:y=!1;var x,b=bi(l[1],s,o,a),C=BC(a,l[1],s);if(b===null?x=!1:b===c&&h==="left"&&!C||b<c?x=!0:x=!1,u){var S,I,B;s==="keep"?(S=a.getIdentifier(),I=a.args[0].getIdentifier(),B=a.args[1].getIdentifier()):(S=a.getContent().getIdentifier(),I=a.args[0].getContent().getIdentifier(),B=a.args[1].getContent().getIdentifier()),v!==null&&(Yu[c][S].latexLeftParens===!1&&(y=!1),Yu[v][I].latexParens===!1&&(y=!1)),b!==null&&(Yu[c][S].latexRightParens===!1&&(x=!1),Yu[b][B].latexParens===!1&&(x=!1))}f=[y,x]}break;default:(a.getIdentifier()==="OperatorNode:add"||a.getIdentifier()==="OperatorNode:multiply")&&(f=l.map(function(M){var F=bi(M,s,o,a),N=BC(a,M,s),O=Em(M,s);return F===null?!1:c===F&&h===O&&!N?!0:F<c}));break}if(l.length>=2&&a.getIdentifier()==="OperatorNode:multiply"&&a.implicit&&s!=="all"&&o==="hide")for(var T=1;T<f.length;++T)t(l[T],s)&&!f[T-1]&&(s!=="keep"||!uf(l[T-1]))&&(f[T]=!0);return f}class i extends e{constructor(s,o,l,u,c){if(super(),typeof s!="string")throw new TypeError('string expected for parameter "op"');if(typeof o!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(l)||!l.every(mi))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=u===!0,this.isPercentage=c===!0,this.op=s,this.fn=o,this.args=l||[]}get type(){return q2}get isOperatorNode(){return!0}_compile(s,o){if(typeof this.fn!="string"||!e3(s,this.fn))throw s[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var l=jo(s,this.fn),u=nf(this.args,function(d){return d._compile(s,o)});if(typeof l=="function"&&l.rawArgs===!0){var c=this.args;return function(p,y,v){return l(c,s,Wm(p,y))}}else if(u.length===1){var h=u[0];return function(p,y,v){return l(h(p,y,v))}}else if(u.length===2){var f=u[0],A=u[1];return function(p,y,v){return l(f(p,y,v),A(p,y,v))}}else return function(p,y,v){return l.apply(null,nf(u,function(w){return w(p,y,v)}))}}forEach(s){for(var o=0;o<this.args.length;o++)s(this.args[o],"args["+o+"]",this)}map(s){for(var o=[],l=0;l<this.args.length;l++)o[l]=this._ifNode(s(this.args[l],"args["+l+"]",this));return new i(this.op,this.fn,o,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=s&&s.implicit?s.implicit:"hide",u=this.args,c=n(this,o,l,u,!1);if(u.length===1){var h=Em(this,o),f=u[0].toString(s);c[0]&&(f="("+f+")");var A=/[a-zA-Z]+/.test(this.op);return h==="right"?this.op+(A?" ":"")+f:h==="left"?f+(A?" ":"")+this.op:f+this.op}else if(u.length===2){var d=u[0].toString(s),p=u[1].toString(s);return c[0]&&(d="("+d+")"),c[1]&&(p="("+p+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?d+" "+p:d+" "+this.op+" "+p}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=u.map(function(v,w){return v=v.toString(s),c[w]&&(v="("+v+")"),v});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?y.join(" "):y.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:q2,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(s){return new i(s.op,s.fn,s.args,s.implicit,s.isPercentage)}_toHTML(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=s&&s.implicit?s.implicit:"hide",u=this.args,c=n(this,o,l,u,!1);if(u.length===1){var h=Em(this,o),f=u[0].toHTML(s);return c[0]&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),h==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+xu(this.op)+"</span>"+f:f+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+xu(this.op)+"</span>"}else if(u.length===2){var A=u[0].toHTML(s),d=u[1].toHTML(s);return c[0]&&(A='<span class="math-parenthesis math-round-parenthesis">(</span>'+A+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?A+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+d:A+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+xu(this.op)+"</span>"+d}else{var p=u.map(function(y,v){return y=y.toHTML(s),c[v]&&(y='<span class="math-parenthesis math-round-parenthesis">(</span>'+y+'<span class="math-parenthesis math-round-parenthesis">)</span>'),y});return u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?p.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):p.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+xu(this.op)+"</span>"):'<span class="math-function">'+xu(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+p.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=s&&s.implicit?s.implicit:"hide",u=this.args,c=n(this,o,l,u,!0),h=Hn[this.fn];if(h=typeof h>"u"?this.op:h,u.length===1){var f=Em(this,o),A=u[0].toTex(s);return c[0]&&(A="\\left(".concat(A,"\\right)")),f==="right"?h+A:A+h}else if(u.length===2){var d=u[0],p=d.toTex(s);c[0]&&(p="\\left(".concat(p,"\\right)"));var y=u[1],v=y.toTex(s);c[1]&&(v="\\left(".concat(v,"\\right)"));var w;switch(o==="keep"?w=d.getIdentifier():w=d.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return h+"{"+p+"}{"+v+"}";case"OperatorNode:pow":switch(p="{"+p+"}",v="{"+v+"}",w){case"ConditionalNode":case"OperatorNode:divide":p="\\left(".concat(p,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&l==="hide")return p+"~"+v}return p+h+v}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var x=u.map(function(b,C){return b=b.toTex(s),c[C]&&(b="\\left(".concat(b,"\\right)")),b});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&l==="hide"?x.join("~"):x.join(h)}else return"\\mathrm{"+this.fn+"}\\left("+u.map(function(b){return b.toTex(s)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return as(i,"name",q2),i},{isClass:!0,isNode:!0}),j2="ParenthesisNode",wBe=["Node"],_Be=Le(j2,wBe,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),!mi(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return j2}get isParenthesisNode(){return!0}_compile(i,a){return this.content._compile(i,a)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var a=i(this.content,"content",this);return new t(a)}clone(){return new t(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:j2,content:this.content}}static fromJSON(i){return new t(i.content)}_toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return as(t,"name",j2),t},{isClass:!0,isNode:!0}),$2="RangeNode",EBe=["Node"],bBe=Le($2,EBe,r=>{var{Node:e}=r;function t(i,a,s){var o=bi(i,a,s),l={},u=bi(i.start,a,s);if(l.start=u!==null&&u<=o||a==="all",i.step){var c=bi(i.step,a,s);l.step=c!==null&&c<=o||a==="all"}var h=bi(i.end,a,s);return l.end=h!==null&&h<=o||a==="all",l}class n extends e{constructor(a,s,o){if(super(),!mi(a))throw new TypeError("Node expected");if(!mi(s))throw new TypeError("Node expected");if(o&&!mi(o))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=a,this.end=s,this.step=o||null}get type(){return $2}get isRangeNode(){return!0}needsEnd(){var a=this.filter(function(s){return Cs(s)&&s.name==="end"});return a.length>0}_compile(a,s){var o=a.range,l=this.start._compile(a,s),u=this.end._compile(a,s);if(this.step){var c=this.step._compile(a,s);return function(f,A,d){return o(l(f,A,d),u(f,A,d),c(f,A,d))}}else return function(f,A,d){return o(l(f,A,d),u(f,A,d))}}forEach(a){a(this.start,"start",this),a(this.end,"end",this),this.step&&a(this.step,"step",this)}map(a){return new n(this._ifNode(a(this.start,"start",this)),this._ifNode(a(this.end,"end",this)),this.step&&this._ifNode(a(this.step,"step",this)))}clone(){return new n(this.start,this.end,this.step&&this.step)}_toString(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=t(this,s,a&&a.implicit),l,u=this.start.toString(a);if(o.start&&(u="("+u+")"),l=u,this.step){var c=this.step.toString(a);o.step&&(c="("+c+")"),l+=":"+c}var h=this.end.toString(a);return o.end&&(h="("+h+")"),l+=":"+h,l}toJSON(){return{mathjs:$2,start:this.start,end:this.end,step:this.step}}static fromJSON(a){return new n(a.start,a.end,a.step)}_toHTML(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=t(this,s,a&&a.implicit),l,u=this.start.toHTML(a);if(o.start&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l=u,this.step){var c=this.step.toHTML(a);o.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+c}var h=this.end.toHTML(a);return o.end&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+h,l}_toTex(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=t(this,s,a&&a.implicit),l=this.start.toTex(a);if(o.start&&(l="\\left(".concat(l,"\\right)")),this.step){var u=this.step.toTex(a);o.step&&(u="\\left(".concat(u,"\\right)")),l+=":"+u}var c=this.end.toTex(a);return o.end&&(c="\\left(".concat(c,"\\right)")),l+=":"+c,l}}return as(n,"name",$2),n},{isClass:!0,isNode:!0}),K2="RelationalNode",CBe=["Node"],SBe=Le(K2,CBe,r=>{var{Node:e}=r,t={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class n extends e{constructor(a,s){if(super(),!Array.isArray(a))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(s))throw new TypeError("Parameter params must be an array");if(a.length!==s.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=a,this.params=s}get type(){return K2}get isRelationalNode(){return!0}_compile(a,s){var o=this,l=this.params.map(u=>u._compile(a,s));return function(c,h,f){for(var A,d=l[0](c,h,f),p=0;p<o.conditionals.length;p++){A=d,d=l[p+1](c,h,f);var y=jo(a,o.conditionals[p]);if(!y(A,d))return!1}return!0}}forEach(a){this.params.forEach((s,o)=>a(s,"params["+o+"]",this),this)}map(a){return new n(this.conditionals.slice(),this.params.map((s,o)=>this._ifNode(a(s,"params["+o+"]",this)),this))}clone(){return new n(this.conditionals,this.params)}_toString(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",o=bi(this,s,a&&a.implicit),l=this.params.map(function(h,f){var A=bi(h,s,a&&a.implicit);return s==="all"||A!==null&&A<=o?"("+h.toString(a)+")":h.toString(a)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=" "+t[this.conditionals[c]],u+=" "+l[c+1];return u}toJSON(){return{mathjs:K2,conditionals:this.conditionals,params:this.params}}static fromJSON(a){return new n(a.conditionals,a.params)}_toHTML(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",o=bi(this,s,a&&a.implicit),l=this.params.map(function(h,f){var A=bi(h,s,a&&a.implicit);return s==="all"||A!==null&&A<=o?'<span class="math-parenthesis math-round-parenthesis">(</span>'+h.toHTML(a)+'<span class="math-parenthesis math-round-parenthesis">)</span>':h.toHTML(a)}),u=l[0],c=0;c<this.conditionals.length;c++)u+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+xu(t[this.conditionals[c]])+"</span>"+l[c+1];return u}_toTex(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",o=bi(this,s,a&&a.implicit),l=this.params.map(function(h,f){var A=bi(h,s,a&&a.implicit);return s==="all"||A!==null&&A<=o?"\\left("+h.toTex(a)+"\right)":h.toTex(a)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=Hn[this.conditionals[c]]+l[c+1];return u}}return as(n,"name",K2),n},{isClass:!0,isNode:!0}),BBe="SymbolNode",TBe=["math","?Unit","Node"],NBe=Le(BBe,TBe,r=>{var{math:e,Unit:t,Node:n}=r;function i(s){return t?t.isValuelessUnit(s):!1}class a extends n{constructor(o){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');this.name=o}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(o,l){var u=this.name;if(l[u]===!0)return function(h,f,A){return jo(f,u)};if(u in o)return function(h,f,A){return h.has(u)?h.get(u):jo(o,u)};var c=i(u);return function(h,f,A){return h.has(u)?h.get(u):c?new t(null,u):a.onUndefinedSymbol(u)}}forEach(o){}map(o){return this.clone()}static onUndefinedSymbol(o){throw new Error("Undefined symbol "+o)}clone(){return new a(this.name)}_toString(o){return this.name}_toHTML(o){var l=xu(this.name);return l==="true"||l==="false"?'<span class="math-symbol math-boolean">'+l+"</span>":l==="i"?'<span class="math-symbol math-imaginary-symbol">'+l+"</span>":l==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+l+"</span>":l==="NaN"?'<span class="math-symbol math-nan-symbol">'+l+"</span>":l==="null"?'<span class="math-symbol math-null-symbol">'+l+"</span>":l==="undefined"?'<span class="math-symbol math-undefined-symbol">'+l+"</span>":'<span class="math-symbol">'+l+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(o){return new a(o.name)}_toTex(o){var l=!1;typeof e[this.name]>"u"&&i(this.name)&&(l=!0);var u=fH(this.name,l);return u[0]==="\\"?u:" "+u}}return a},{isClass:!0,isNode:!0}),V2="FunctionNode",IBe=["math","Node","SymbolNode"],FBe=Le(V2,IBe,r=>{var e,{math:t,Node:n,SymbolNode:i}=r,a=l=>pn(l,{truncate:78});function s(l,u,c){for(var h="",f=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,A=0,d;(d=f.exec(l))!==null;)if(h+=l.substring(A,d.index),A=d.index,d[0]==="$$")h+="$",A++;else{A+=d[0].length;var p=u[d[1]];if(!p)throw new ReferenceError("Template: Property "+d[1]+" does not exist.");if(d[2]===void 0)switch(typeof p){case"string":h+=p;break;case"object":if(mi(p))h+=p.toTex(c);else if(Array.isArray(p))h+=p.map(function(y,v){if(mi(y))return y.toTex(c);throw new TypeError("Template: "+d[1]+"["+v+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+d[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+d[1]+" has to be a Node, String or array of Nodes")}else if(mi(p[d[2]]&&p[d[2]]))h+=p[d[2]].toTex(c);else throw new TypeError("Template: "+d[1]+"["+d[2]+"] is not a Node.")}return h+=l.slice(A),h}class o extends n{constructor(u,c){if(super(),typeof u=="string"&&(u=new i(u)),!mi(u))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(mi))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=u,this.args=c||[]}get name(){return this.fn.name||""}get type(){return V2}get isFunctionNode(){return!0}_compile(u,c){var h=this.args.map(B=>B._compile(u,c));if(Cs(this.fn)){var f=this.fn.name;if(c[f]){var v=this.args;return function(T,M,F){var N=jo(M,f);if(typeof N!="function")throw new TypeError("Argument '".concat(f,"' was not a function; received: ").concat(a(N)));if(N.rawArgs)return N(v,u,Wm(T,M));var O=h.map(L=>L(T,M,F));return N.apply(N,O)}}else{var A=f in u?jo(u,f):void 0,d=typeof A=="function"&&A.rawArgs===!0,p=B=>{var T;if(B.has(f))T=B.get(f);else if(f in u)T=jo(u,f);else return o.onUndefinedFunction(f);if(typeof T=="function")return T;throw new TypeError("'".concat(f,`' is not a function; its value is:
  `).concat(a(T)))};if(d){var y=this.args;return function(T,M,F){var N=p(T);return N(y,u,Wm(T,M))}}else switch(h.length){case 0:return function(T,M,F){var N=p(T);return N()};case 1:return function(T,M,F){var N=p(T),O=h[0];return N(O(T,M,F))};case 2:return function(T,M,F){var N=p(T),O=h[0],L=h[1];return N(O(T,M,F),L(T,M,F))};default:return function(T,M,F){var N=p(T),O=h.map(L=>L(T,M,F));return N(...O)}}}}else if(Kd(this.fn)&&Mp(this.fn.index)&&this.fn.index.isObjectProperty()){var w=this.fn.object._compile(u,c),x=this.fn.index.getObjectProperty(),b=this.args;return function(T,M,F){var N=w(T,M,F),O=$ye(N,x);if(O!=null&&O.rawArgs)return O(b,u,Wm(T,M));var L=h.map(G=>G(T,M,F));return O.apply(N,L)}}else{var C=this.fn.toString(),S=this.fn._compile(u,c),I=this.args;return function(T,M,F){var N=S(T,M,F);if(typeof N!="function")throw new TypeError("Expression '".concat(C,"' did not evaluate to a function; value is:")+`
  `.concat(a(N)));if(N.rawArgs)return N(I,u,Wm(T,M));var O=h.map(L=>L(T,M,F));return N.apply(N,O)}}}forEach(u){u(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)u(this.args[c],"args["+c+"]",this)}map(u){for(var c=this._ifNode(u(this.fn,"fn",this)),h=[],f=0;f<this.args.length;f++)h[f]=this._ifNode(u(this.args[f],"args["+f+"]",this));return new o(c,h)}clone(){return new o(this.fn,this.args.slice(0))}toString(u){var c,h=this.fn.toString(u);return u&&typeof u.handler=="object"&&vr(u.handler,h)&&(c=u.handler[h](this,u)),typeof c<"u"?c:super.toString(u)}_toString(u){var c=this.args.map(function(f){return f.toString(u)}),h=P1(this.fn)?"("+this.fn.toString(u)+")":this.fn.toString(u);return h+"("+c.join(", ")+")"}toJSON(){return{mathjs:V2,fn:this.fn,args:this.args}}_toHTML(u){var c=this.args.map(function(h){return h.toHTML(u)});return'<span class="math-function">'+xu(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(u){var c;return u&&typeof u.handler=="object"&&vr(u.handler,this.name)&&(c=u.handler[this.name](this,u)),typeof c<"u"?c:super.toTex(u)}_toTex(u){var c=this.args.map(function(A){return A.toTex(u)}),h;p8[this.name]&&(h=p8[this.name]),t[this.name]&&(typeof t[this.name].toTex=="function"||typeof t[this.name].toTex=="object"||typeof t[this.name].toTex=="string")&&(h=t[this.name].toTex);var f;switch(typeof h){case"function":f=h(this,u);break;case"string":f=s(h,this,u);break;case"object":switch(typeof h[c.length]){case"function":f=h[c.length](this,u);break;case"string":f=s(h[c.length],this,u);break}}return typeof f<"u"?f:s(cBe,this,u)}getIdentifier(){return this.type+":"+this.name}}return e=o,as(o,"name",V2),as(o,"onUndefinedFunction",function(l){throw new Error("Undefined function "+l)}),as(o,"fromJSON",function(l){return new e(l.fn,l.args)}),o},{isClass:!0,isNode:!0}),v8="parse",MBe=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],LBe=Le(v8,MBe,r=>{var{typed:e,numeric:t,config:n,AccessorNode:i,ArrayNode:a,AssignmentNode:s,BlockNode:o,ConditionalNode:l,ConstantNode:u,FunctionAssignmentNode:c,FunctionNode:h,IndexNode:f,ObjectNode:A,OperatorNode:d,ParenthesisNode:p,RangeNode:y,RelationalNode:v,SymbolNode:w}=r,x=e(v8,{string:function(Ue){return oe(Ue,{})},"Array | Matrix":function(Ue){return b(Ue,{})},"string, Object":function(Ue,st){var wt=st.nodes!==void 0?st.nodes:{};return oe(Ue,wt)},"Array | Matrix, Object":b});function b(ce){var Ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},st=Ue.nodes!==void 0?Ue.nodes:{};return vn(ce,function(wt){if(typeof wt!="string")throw new TypeError("String expected");return oe(wt,st)})}var C={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},S={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},I={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},B={true:!0,false:!1,null:null,undefined:void 0},T=["NaN","Infinity"],M={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function F(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:C.NULL,nestingLevel:0,conditionalLevel:null}}function N(ce,Ue){return ce.expression.substr(ce.index,Ue)}function O(ce){return N(ce,1)}function L(ce){ce.index++}function G(ce){return ce.expression.charAt(ce.index-1)}function R(ce){return ce.expression.charAt(ce.index+1)}function U(ce){for(ce.tokenType=C.NULL,ce.token="",ce.comment="";;){if(O(ce)==="#")for(;O(ce)!==`
`&&O(ce)!=="";)ce.comment+=O(ce),L(ce);if(x.isWhitespace(O(ce),ce.nestingLevel))L(ce);else break}if(O(ce)===""){ce.tokenType=C.DELIMITER;return}if(O(ce)===`
`&&!ce.nestingLevel){ce.tokenType=C.DELIMITER,ce.token=O(ce),L(ce);return}var Ue=O(ce),st=N(ce,2),wt=N(ce,3);if(wt.length===3&&S[wt]){ce.tokenType=C.DELIMITER,ce.token=wt,L(ce),L(ce),L(ce);return}if(st.length===2&&S[st]){ce.tokenType=C.DELIMITER,ce.token=st,L(ce),L(ce);return}if(S[Ue]){ce.tokenType=C.DELIMITER,ce.token=Ue,L(ce);return}if(x.isDigitDot(Ue)){ce.tokenType=C.NUMBER;var Wt=N(ce,2);if(Wt==="0b"||Wt==="0o"||Wt==="0x"){for(ce.token+=O(ce),L(ce),ce.token+=O(ce),L(ce);x.isHexDigit(O(ce));)ce.token+=O(ce),L(ce);if(O(ce)===".")for(ce.token+=".",L(ce);x.isHexDigit(O(ce));)ce.token+=O(ce),L(ce);else if(O(ce)==="i")for(ce.token+="i",L(ce);x.isDigit(O(ce));)ce.token+=O(ce),L(ce);return}if(O(ce)==="."){if(ce.token+=O(ce),L(ce),!x.isDigit(O(ce))){ce.tokenType=C.DELIMITER;return}}else{for(;x.isDigit(O(ce));)ce.token+=O(ce),L(ce);x.isDecimalMark(O(ce),R(ce))&&(ce.token+=O(ce),L(ce))}for(;x.isDigit(O(ce));)ce.token+=O(ce),L(ce);if(O(ce)==="E"||O(ce)==="e"){if(x.isDigit(R(ce))||R(ce)==="-"||R(ce)==="+"){if(ce.token+=O(ce),L(ce),(O(ce)==="+"||O(ce)==="-")&&(ce.token+=O(ce),L(ce)),!x.isDigit(O(ce)))throw yt(ce,'Digit expected, got "'+O(ce)+'"');for(;x.isDigit(O(ce));)ce.token+=O(ce),L(ce);if(x.isDecimalMark(O(ce),R(ce)))throw yt(ce,'Digit expected, got "'+O(ce)+'"')}else if(R(ce)===".")throw L(ce),yt(ce,'Digit expected, got "'+O(ce)+'"')}return}if(x.isAlpha(O(ce),G(ce),R(ce))){for(;x.isAlpha(O(ce),G(ce),R(ce))||x.isDigit(O(ce));)ce.token+=O(ce),L(ce);vr(I,ce.token)?ce.tokenType=C.DELIMITER:ce.tokenType=C.SYMBOL;return}for(ce.tokenType=C.UNKNOWN;O(ce)!=="";)ce.token+=O(ce),L(ce);throw yt(ce,'Syntax error in part "'+ce.token+'"')}function W(ce){do U(ce);while(ce.token===`
`)}function Q(ce){ce.nestingLevel++}function re(ce){ce.nestingLevel--}x.isAlpha=function(Ue,st,wt){return x.isValidLatinOrGreek(Ue)||x.isValidMathSymbol(Ue,wt)||x.isValidMathSymbol(st,Ue)},x.isValidLatinOrGreek=function(Ue){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(Ue)},x.isValidMathSymbol=function(Ue,st){return/^[\uD835]$/.test(Ue)&&/^[\uDC00-\uDFFF]$/.test(st)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(st)},x.isWhitespace=function(Ue,st){return Ue===" "||Ue==="	"||Ue===`
`&&st>0},x.isDecimalMark=function(Ue,st){return Ue==="."&&st!=="/"&&st!=="*"&&st!=="^"},x.isDigitDot=function(Ue){return Ue>="0"&&Ue<="9"||Ue==="."},x.isDigit=function(Ue){return Ue>="0"&&Ue<="9"},x.isHexDigit=function(Ue){return Ue>="0"&&Ue<="9"||Ue>="a"&&Ue<="f"||Ue>="A"&&Ue<="F"};function oe(ce,Ue){var st=F();ts(st,{expression:ce,extraNodes:Ue}),U(st);var wt=P(st);if(st.token!=="")throw st.tokenType===C.DELIMITER?Ar(st,"Unexpected operator "+st.token):yt(st,'Unexpected part "'+st.token+'"');return wt}function P(ce){var Ue,st=[],wt;for(ce.token!==""&&ce.token!==`
`&&ce.token!==";"&&(Ue=z(ce),ce.comment&&(Ue.comment=ce.comment));ce.token===`
`||ce.token===";";)st.length===0&&Ue&&(wt=ce.token!==";",st.push({node:Ue,visible:wt})),U(ce),ce.token!==`
`&&ce.token!==";"&&ce.token!==""&&(Ue=z(ce),ce.comment&&(Ue.comment=ce.comment),wt=ce.token!==";",st.push({node:Ue,visible:wt}));return st.length>0?new o(st):(Ue||(Ue=new u(void 0),ce.comment&&(Ue.comment=ce.comment)),Ue)}function z(ce){var Ue,st,wt,Wt,rr=K(ce);if(ce.token==="="){if(Cs(rr))return Ue=rr.name,W(ce),wt=z(ce),new s(new w(Ue),wt);if(Kd(rr))return W(ce),wt=z(ce),new s(rr.object,rr.index,wt);if(DA(rr)&&Cs(rr.fn)&&(Wt=!0,st=[],Ue=rr.name,rr.args.forEach(function(wr,Ct){Cs(wr)?st[Ct]=wr.name:Wt=!1}),Wt))return W(ce),wt=z(ce),new c(Ue,st,wt);throw yt(ce,"Invalid left hand side of assignment operator =")}return rr}function K(ce){for(var Ue=J(ce);ce.token==="?";){var st=ce.conditionalLevel;ce.conditionalLevel=ce.nestingLevel,W(ce);var wt=Ue,Wt=z(ce);if(ce.token!==":")throw yt(ce,"False part of conditional expression expected");ce.conditionalLevel=null,W(ce);var rr=z(ce);Ue=new l(wt,Wt,rr),ce.conditionalLevel=st}return Ue}function J(ce){for(var Ue=ue(ce);ce.token==="or";)W(ce),Ue=new d("or","or",[Ue,ue(ce)]);return Ue}function ue(ce){for(var Ue=ge(ce);ce.token==="xor";)W(ce),Ue=new d("xor","xor",[Ue,ge(ce)]);return Ue}function ge(ce){for(var Ue=le(ce);ce.token==="and";)W(ce),Ue=new d("and","and",[Ue,le(ce)]);return Ue}function le(ce){for(var Ue=me(ce);ce.token==="|";)W(ce),Ue=new d("|","bitOr",[Ue,me(ce)]);return Ue}function me(ce){for(var Ue=xe(ce);ce.token==="^|";)W(ce),Ue=new d("^|","bitXor",[Ue,xe(ce)]);return Ue}function xe(ce){for(var Ue=Be(ce);ce.token==="&";)W(ce),Ue=new d("&","bitAnd",[Ue,Be(ce)]);return Ue}function Be(ce){for(var Ue=[Y(ce)],st=[],wt={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};vr(wt,ce.token);){var Wt={name:ce.token,fn:wt[ce.token]};st.push(Wt),W(ce),Ue.push(Y(ce))}return Ue.length===1?Ue[0]:Ue.length===2?new d(st[0].name,st[0].fn,Ue):new v(st.map(rr=>rr.fn),Ue)}function Y(ce){var Ue,st,wt,Wt;Ue=Ve(ce);for(var rr={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};vr(rr,ce.token);)st=ce.token,wt=rr[st],W(ce),Wt=[Ue,Ve(ce)],Ue=new d(st,wt,Wt);return Ue}function Ve(ce){var Ue,st,wt,Wt;Ue=te(ce);for(var rr={to:"to",in:"to"};vr(rr,ce.token);)st=ce.token,wt=rr[st],W(ce),st==="in"&&ce.token===""?Ue=new d("*","multiply",[Ue,new w("in")],!0):(Wt=[Ue,te(ce)],Ue=new d(st,wt,Wt));return Ue}function te(ce){var Ue,st=[];if(ce.token===":"?Ue=new u(1):Ue=se(ce),ce.token===":"&&ce.conditionalLevel!==ce.nestingLevel){for(st.push(Ue);ce.token===":"&&st.length<3;)W(ce),ce.token===")"||ce.token==="]"||ce.token===","||ce.token===""?st.push(new w("end")):st.push(se(ce));st.length===3?Ue=new y(st[0],st[2],st[1]):Ue=new y(st[0],st[1])}return Ue}function se(ce){var Ue,st,wt,Wt;Ue=Z(ce);for(var rr={"+":"add","-":"subtract"};vr(rr,ce.token);){st=ce.token,wt=rr[st],W(ce);var wr=Z(ce);wr.isPercentage?Wt=[Ue,new d("*","multiply",[Ue,wr])]:Wt=[Ue,wr],Ue=new d(st,wt,Wt)}return Ue}function Z(ce){var Ue,st,wt,Wt;Ue=he(ce),st=Ue;for(var rr={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide"};vr(rr,ce.token);)wt=ce.token,Wt=rr[wt],W(ce),st=he(ce),Ue=new d(wt,Wt,[Ue,st]);return Ue}function he(ce){var Ue,st;for(Ue=ne(ce),st=Ue;ce.tokenType===C.SYMBOL||ce.token==="in"&&Pn(Ue)||ce.tokenType===C.NUMBER&&!Pn(st)&&(!Ua(st)||st.op==="!")||ce.token==="(";)st=ne(ce),Ue=new d("*","multiply",[Ue,st],!0);return Ue}function ne(ce){for(var Ue=ae(ce),st=Ue,wt=[];ce.token==="/"&&w5(st);)if(wt.push(ts({},ce)),W(ce),ce.tokenType===C.NUMBER)if(wt.push(ts({},ce)),W(ce),ce.tokenType===C.SYMBOL||ce.token==="(")ts(ce,wt.pop()),wt.pop(),st=ae(ce),Ue=new d("/","divide",[Ue,st]);else{wt.pop(),ts(ce,wt.pop());break}else{ts(ce,wt.pop());break}return Ue}function ae(ce){var Ue,st,wt,Wt;Ue=_e(ce);for(var rr={"%":"mod",mod:"mod"};vr(rr,ce.token);)st=ce.token,wt=rr[st],W(ce),st==="%"&&ce.tokenType===C.DELIMITER&&ce.token!=="("?Ue=new d("/","divide",[Ue,new u(100)],!1,!0):(Wt=[Ue,_e(ce)],Ue=new d(st,wt,Wt));return Ue}function _e(ce){var Ue,st,wt,Wt={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return vr(Wt,ce.token)?(wt=Wt[ce.token],Ue=ce.token,W(ce),st=[_e(ce)],new d(Ue,wt,st)):Me(ce)}function Me(ce){var Ue,st,wt,Wt;return Ue=be(ce),(ce.token==="^"||ce.token===".^")&&(st=ce.token,wt=st==="^"?"pow":"dotPow",W(ce),Wt=[Ue,_e(ce)],Ue=new d(st,wt,Wt)),Ue}function be(ce){var Ue,st,wt,Wt;Ue=Ae(ce);for(var rr={"!":"factorial","'":"ctranspose"};vr(rr,ce.token);)st=ce.token,wt=rr[st],U(ce),Wt=[Ue],Ue=new d(st,wt,Wt),Ue=Fe(ce,Ue);return Ue}function Ae(ce){var Ue=[];if(ce.tokenType===C.SYMBOL&&vr(ce.extraNodes,ce.token)){var st=ce.extraNodes[ce.token];if(U(ce),ce.token==="("){if(Ue=[],Q(ce),U(ce),ce.token!==")")for(Ue.push(z(ce));ce.token===",";)U(ce),Ue.push(z(ce));if(ce.token!==")")throw yt(ce,"Parenthesis ) expected");re(ce),U(ce)}return new st(Ue)}return pe(ce)}function pe(ce){var Ue,st;return ce.tokenType===C.SYMBOL||ce.tokenType===C.DELIMITER&&ce.token in I?(st=ce.token,U(ce),vr(B,st)?Ue=new u(B[st]):T.includes(st)?Ue=new u(t(st,"number")):Ue=new w(st),Ue=Fe(ce,Ue),Ue):Ge(ce)}function Fe(ce,Ue,st){for(var wt;ce.token==="("||ce.token==="["||ce.token===".";)if(wt=[],ce.token==="(")if(Cs(Ue)||Kd(Ue)){if(Q(ce),U(ce),ce.token!==")")for(wt.push(z(ce));ce.token===",";)U(ce),wt.push(z(ce));if(ce.token!==")")throw yt(ce,"Parenthesis ) expected");re(ce),U(ce),Ue=new h(Ue,wt)}else return Ue;else if(ce.token==="["){if(Q(ce),U(ce),ce.token!=="]")for(wt.push(z(ce));ce.token===",";)U(ce),wt.push(z(ce));if(ce.token!=="]")throw yt(ce,"Parenthesis ] expected");re(ce),U(ce),Ue=new i(Ue,new f(wt))}else{U(ce);var Wt=ce.tokenType===C.SYMBOL||ce.tokenType===C.DELIMITER&&ce.token in I;if(!Wt)throw yt(ce,"Property name expected after dot");wt.push(new u(ce.token)),U(ce);var rr=!0;Ue=new i(Ue,new f(wt,rr))}return Ue}function Ge(ce){var Ue,st;return ce.token==='"'||ce.token==="'"?(st=Ze(ce,ce.token),Ue=new u(st),Ue=Fe(ce,Ue),Ue):He(ce)}function Ze(ce,Ue){for(var st="";O(ce)!==""&&O(ce)!==Ue;)if(O(ce)==="\\"){L(ce);var wt=O(ce),Wt=M[wt];if(Wt!==void 0)st+=Wt,ce.index+=1;else if(wt==="u"){var rr=ce.expression.slice(ce.index+1,ce.index+5);if(/^[0-9A-Fa-f]{4}$/.test(rr))st+=String.fromCharCode(parseInt(rr,16)),ce.index+=5;else throw yt(ce,"Invalid unicode character \\u".concat(rr))}else throw yt(ce,"Bad escape character \\".concat(wt))}else st+=O(ce),L(ce);if(U(ce),ce.token!==Ue)throw yt(ce,"End of string ".concat(Ue," expected"));return U(ce),st}function He(ce){var Ue,st,wt,Wt;if(ce.token==="["){if(Q(ce),U(ce),ce.token!=="]"){var rr=Je(ce);if(ce.token===";"){for(wt=1,st=[rr];ce.token===";";)U(ce),ce.token!=="]"&&(st[wt]=Je(ce),wt++);if(ce.token!=="]")throw yt(ce,"End of matrix ] expected");re(ce),U(ce),Wt=st[0].items.length;for(var wr=1;wr<wt;wr++)if(st[wr].items.length!==Wt)throw Ar(ce,"Column dimensions mismatch ("+st[wr].items.length+" !== "+Wt+")");Ue=new a(st)}else{if(ce.token!=="]")throw yt(ce,"End of matrix ] expected");re(ce),U(ce),Ue=rr}}else re(ce),U(ce),Ue=new a([]);return Fe(ce,Ue)}return Ye(ce)}function Je(ce){for(var Ue=[z(ce)],st=1;ce.token===",";)U(ce),ce.token!=="]"&&ce.token!==";"&&(Ue[st]=z(ce),st++);return new a(Ue)}function Ye(ce){if(ce.token==="{"){Q(ce);var Ue,st={};do if(U(ce),ce.token!=="}"){if(ce.token==='"'||ce.token==="'")Ue=Ze(ce,ce.token);else if(ce.tokenType===C.SYMBOL||ce.tokenType===C.DELIMITER&&ce.token in I)Ue=ce.token,U(ce);else throw yt(ce,"Symbol or string expected as object key");if(ce.token!==":")throw yt(ce,"Colon : expected after object key");U(ce),st[Ue]=z(ce)}while(ce.token===",");if(ce.token!=="}")throw yt(ce,"Comma , or bracket } expected after object value");re(ce),U(ce);var wt=new A(st);return wt=Fe(ce,wt),wt}return Ke(ce)}function Ke(ce){var Ue;return ce.tokenType===C.NUMBER?(Ue=ce.token,U(ce),new u(t(Ue,n.number))):mt(ce)}function mt(ce){var Ue;if(ce.token==="("){if(Q(ce),U(ce),Ue=z(ce),ce.token!==")")throw yt(ce,"Parenthesis ) expected");return re(ce),U(ce),Ue=new p(Ue),Ue=Fe(ce,Ue),Ue}return vt(ce)}function vt(ce){throw ce.token===""?yt(ce,"Unexpected end of expression"):yt(ce,"Value expected")}function Dt(ce){return ce.index-ce.token.length+1}function yt(ce,Ue){var st=Dt(ce),wt=new SyntaxError(Ue+" (char "+st+")");return wt.char=st,wt}function Ar(ce,Ue){var st=Dt(ce),wt=new SyntaxError(Ue+" (char "+st+")");return wt.char=st,wt}return e.addConversion({from:"string",to:"Node",convert:x}),x}),y8="compile",DBe=["typed","parse"],kBe=Le(y8,DBe,r=>{var{typed:e,parse:t}=r;return e(y8,{string:function(i){return t(i).compile()},"Array | Matrix":function(i){return vn(i,function(a){return t(a).compile()})}})}),x8="evaluate",RBe=["typed","parse"],OBe=Le(x8,RBe,r=>{var{typed:e,parse:t}=r;return e(x8,{string:function(i){var a=l1();return t(i).compile().evaluate(a)},"string, Map | Object":function(i,a){return t(i).compile().evaluate(a)},"Array | Matrix":function(i){var a=l1();return vn(i,function(s){return t(s).compile().evaluate(a)})},"Array | Matrix, Map | Object":function(i,a){return vn(i,function(s){return t(s).compile().evaluate(a)})}})}),PBe="Parser",UBe=["evaluate"],QBe=Le(PBe,UBe,r=>{var{evaluate:e}=r;function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:l1(),writable:!1})}return t.prototype.type="Parser",t.prototype.isParser=!0,t.prototype.evaluate=function(n){return e(n,this.scope)},t.prototype.get=function(n){if(this.scope.has(n))return this.scope.get(n)},t.prototype.getAll=function(){return Wye(this.scope)},t.prototype.getAllAsMap=function(){return this.scope},t.prototype.set=function(n,i){return this.scope.set(n,i),i},t.prototype.remove=function(n){this.scope.delete(n)},t.prototype.clear=function(){this.scope.clear()},t},{isClass:!0}),w8="parser",GBe=["typed","Parser"],HBe=Le(w8,GBe,r=>{var{typed:e,Parser:t}=r;return e(w8,{"":function(){return new t}})}),_8="lup",zBe=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],qBe=Le(_8,zBe,r=>{var{typed:e,matrix:t,abs:n,addScalar:i,divideScalar:a,multiplyScalar:s,subtractScalar:o,larger:l,equalScalar:u,unaryMinus:c,DenseMatrix:h,SparseMatrix:f,Spa:A}=r;return e(_8,{DenseMatrix:function(v){return d(v)},SparseMatrix:function(v){return p(v)},Array:function(v){var w=t(v),x=d(w);return{L:x.L.valueOf(),U:x.U.valueOf(),p:x.p}}});function d(y){var v=y._size[0],w=y._size[1],x=Math.min(v,w),b=Yr(y._data),C=[],S=[v,x],I=[],B=[x,w],T,M,F,N=[];for(T=0;T<v;T++)N[T]=T;for(M=0;M<w;M++){if(M>0)for(T=0;T<v;T++){var O=Math.min(T,M),L=0;for(F=0;F<O;F++)L=i(L,s(b[T][F],b[F][M]));b[T][M]=o(b[T][M],L)}var G=M,R=0,U=0;for(T=M;T<v;T++){var W=b[T][M],Q=n(W);l(Q,R)&&(G=T,R=Q,U=W)}if(M!==G&&(N[M]=[N[G],N[G]=N[M]][0],h._swapRows(M,G,b)),M<v)for(T=M+1;T<v;T++){var re=b[T][M];u(re,0)||(b[T][M]=a(b[T][M],U))}}for(M=0;M<w;M++)for(T=0;T<v;T++){if(M===0&&(T<w&&(I[T]=[]),C[T]=[]),T<M){T<w&&(I[T][M]=b[T][M]),M<v&&(C[T][M]=0);continue}if(T===M){T<w&&(I[T][M]=b[T][M]),M<v&&(C[T][M]=1);continue}T<w&&(I[T][M]=0),M<v&&(C[T][M]=b[T][M])}var oe=new h({data:C,size:S}),P=new h({data:I,size:B}),z=[];for(T=0,x=N.length;T<x;T++)z[N[T]]=T;return{L:oe,U:P,p:z,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function p(y){var v=y._size[0],w=y._size[1],x=Math.min(v,w),b=y._values,C=y._index,S=y._ptr,I=[],B=[],T=[],M=[v,x],F=[],N=[],O=[],L=[x,w],G,R,U,W=[],Q=[];for(G=0;G<v;G++)W[G]=G,Q[G]=G;var re=function(z,K){var J=Q[z],ue=Q[K];W[J]=K,W[ue]=z,Q[z]=ue,Q[K]=J},oe=function(){var z=new A;R<v&&(T.push(I.length),I.push(1),B.push(R)),O.push(F.length);var K=S[R],J=S[R+1];for(U=K;U<J;U++)G=C[U],z.set(W[G],b[U]);R>0&&z.forEach(0,R-1,function(me,xe){f._forEachRow(me,I,B,T,function(Be,Y){Be>me&&z.accumulate(Be,c(s(Y,xe)))})});var ue=R,ge=z.get(R),le=n(ge);z.forEach(R+1,v-1,function(me,xe){var Be=n(xe);l(Be,le)&&(ue=me,le=Be,ge=xe)}),R!==ue&&(f._swapRows(R,ue,M[1],I,B,T),f._swapRows(R,ue,L[1],F,N,O),z.swap(R,ue),re(R,ue)),z.forEach(0,v-1,function(me,xe){me<=R?(F.push(xe),N.push(me)):(xe=a(xe,ge),u(xe,0)||(I.push(xe),B.push(me)))})};for(R=0;R<w;R++)oe();return O.push(F.length),T.push(I.length),{L:new f({values:I,index:B,ptr:T,size:M}),U:new f({values:F,index:N,ptr:O,size:L}),p:W,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),E8="qr",jBe=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],$Be=Le(E8,jBe,r=>{var{typed:e,matrix:t,zeros:n,identity:i,isZero:a,equal:s,sign:o,sqrt:l,conj:u,unaryMinus:c,addScalar:h,divideScalar:f,multiplyScalar:A,subtractScalar:d,complex:p}=r;return ts(e(E8,{DenseMatrix:function(b){return v(b)},SparseMatrix:function(b){return w()},Array:function(b){var C=t(b),S=v(C);return{Q:S.Q.valueOf(),R:S.R.valueOf()}}}),{_denseQRimpl:y});function y(x){var b=x._size[0],C=x._size[1],S=i([b],"dense"),I=S._data,B=x.clone(),T=B._data,M,F,N,O=n([b],"");for(N=0;N<Math.min(C,b);++N){var L=T[N][N],G=c(s(L,0)?1:o(L)),R=u(G),U=0;for(M=N;M<b;M++)U=h(U,A(T[M][N],u(T[M][N])));var W=A(G,l(U));if(!a(W)){var Q=d(L,W);for(O[N]=1,M=N+1;M<b;M++)O[M]=f(T[M][N],Q);var re=c(u(f(Q,W))),oe=void 0;for(F=N;F<C;F++){for(oe=0,M=N;M<b;M++)oe=h(oe,A(u(O[M]),T[M][F]));for(oe=A(oe,re),M=N;M<b;M++)T[M][F]=A(d(T[M][F],A(O[M],oe)),R)}for(M=0;M<b;M++){for(oe=0,F=N;F<b;F++)oe=h(oe,A(I[M][F],O[F]));for(oe=A(oe,re),F=N;F<b;++F)I[M][F]=f(d(I[M][F],A(oe,u(O[F]))),R)}}}return{Q:S,R:B,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function v(x){var b=y(x),C=b.R._data;if(x._data.length>0)for(var S=C[0][0].type==="Complex"?p(0):0,I=0;I<C.length;++I)for(var B=0;B<I&&B<(C[0]||[]).length;++B)C[I][B]=S;return b}function w(x){throw new Error("qr not implemented for sparse matrices yet")}});function KBe(r,e,t,n){r._values;for(var i=r._index,a=r._ptr,s=r._size,o=r._datatype,l=s[0],u=s[1],c=null,h=[],f=[],A=0,d=0;d<u;d++){f[d]=A;for(var p=t?t[d]:d,y=a[p],v=a[p+1],w=y;w<v;w++){var x=i[w];h[A]=x,A++}}return f[u]=A,r.createSparseMatrix({values:c,index:h,ptr:f,size:[l,u],datatype:o})}function AH(r,e,t,n,i,a,s){var o=0;for(t[s]=r;o>=0;){var l=t[s+o],u=t[n+l];u===-1?(o--,a[e++]=l):(t[n+l]=t[i+u],++o,t[s+o]=u)}return e}function VBe(r,e){if(!r)return null;var t=0,n,i=[],a=[],s=0,o=e,l=2*e;for(n=0;n<e;n++)a[s+n]=-1;for(n=e-1;n>=0;n--)r[n]!==-1&&(a[o+n]=a[s+r[n]],a[s+r[n]]=n);for(n=0;n<e;n++)r[n]===-1&&(t=AH(n,t,a,s,o,i,l));return i}function WBe(r,e){if(!r)return null;var t=r._index,n=r._ptr,i=r._size,a=i[0],s=i[1],o=[],l=[],u=0,c=s,h,f;for(h=0;h<a;h++)l[c+h]=-1;for(var A=0;A<s;A++){o[A]=-1,l[u+A]=-1;for(var d=n[A],p=n[A+1],y=d;y<p;y++){var v=t[y];for(h=l[c+v];h!==-1&&h<A;h=f)f=l[u+h],l[u+h]=A,f===-1&&(o[h]=A);l[c+v]=A}}return o}function YBe(r,e,t){for(var n=r._values,i=r._index,a=r._ptr,s=r._size,o=s[1],l=0,u=0;u<o;u++){var c=a[u];for(a[u]=l;c<a[u+1];c++)e(i[c],u,n?n[c]:1,t)&&(i[l]=i[c],n&&(n[l]=n[c]),l++)}return a[o]=l,i.splice(l,i.length-l),n&&n.splice(l,n.length-l),l}function aA(r){return-r-2}var XBe="csAmd",ZBe=["add","multiply","transpose"],JBe=Le(XBe,ZBe,r=>{var{add:e,multiply:t,transpose:n}=r;return function(c,h){if(!h||c<=0||c>3)return null;var f=h._size,A=f[0],d=f[1],p=0,y=Math.max(16,10*Math.sqrt(d));y=Math.min(d-2,y);var v=i(c,h,A,d,y);YBe(v,l,null);for(var w=v._index,x=v._ptr,b=x[d],C=[],S=[],I=0,B=d+1,T=2*(d+1),M=3*(d+1),F=4*(d+1),N=5*(d+1),O=6*(d+1),L=7*(d+1),G=C,R=a(d,x,S,I,M,G,T,L,B,O,F,N),U=s(d,x,S,N,F,O,y,B,M,G,T),W=0,Q,re,oe,P,z,K,J,ue,ge,le,me,xe,Be,Y,Ve,te;U<d;){for(oe=-1;W<d&&(oe=S[M+W])===-1;W++);S[T+oe]!==-1&&(G[S[T+oe]]=-1),S[M+W]=S[T+oe];var se=S[F+oe],Z=S[B+oe];U+=Z;var he=0;S[B+oe]=-Z;var ne=x[oe],ae=se===0?ne:b,_e=ae;for(P=1;P<=se+1;P++){for(P>se?(K=oe,J=ne,ue=S[I+oe]-se):(K=w[ne++],J=x[K],ue=S[I+K]),z=1;z<=ue;z++)Q=w[J++],!((ge=S[B+Q])<=0)&&(he+=ge,S[B+Q]=-ge,w[_e++]=Q,S[T+Q]!==-1&&(G[S[T+Q]]=G[Q]),G[Q]!==-1?S[T+G[Q]]=S[T+Q]:S[M+S[N+Q]]=S[T+Q]);K!==oe&&(x[K]=aA(oe),S[O+K]=0)}for(se!==0&&(b=_e),S[N+oe]=he,x[oe]=ae,S[I+oe]=_e-ae,S[F+oe]=-2,R=o(R,p,S,O,d),le=ae;le<_e;le++)if(Q=w[le],!((me=S[F+Q])<=0)){ge=-S[B+Q];var Me=R-ge;for(ne=x[Q],xe=x[Q]+me-1;ne<=xe;ne++)K=w[ne],S[O+K]>=R?S[O+K]-=ge:S[O+K]!==0&&(S[O+K]=S[N+K]+Me)}for(le=ae;le<_e;le++){for(Q=w[le],xe=x[Q],Be=xe+S[F+Q]-1,Y=xe,Ve=0,te=0,ne=xe;ne<=Be;ne++)if(K=w[ne],S[O+K]!==0){var be=S[O+K]-R;be>0?(te+=be,w[Y++]=K,Ve+=K):(x[K]=aA(oe),S[O+K]=0)}S[F+Q]=Y-xe+1;var Ae=Y,pe=xe+S[I+Q];for(ne=Be+1;ne<pe;ne++){re=w[ne];var Fe=S[B+re];Fe<=0||(te+=Fe,w[Y++]=re,Ve+=re)}te===0?(x[Q]=aA(oe),ge=-S[B+Q],he-=ge,Z+=ge,U+=ge,S[B+Q]=0,S[F+Q]=-1):(S[N+Q]=Math.min(S[N+Q],te),w[Y]=w[Ae],w[Ae]=w[xe],w[xe]=oe,S[I+Q]=Y-xe+1,Ve=(Ve<0?-Ve:Ve)%d,S[T+Q]=S[L+Ve],S[L+Ve]=Q,G[Q]=Ve)}for(S[N+oe]=he,p=Math.max(p,he),R=o(R+p,p,S,O,d),le=ae;le<_e;le++)if(Q=w[le],!(S[B+Q]>=0))for(Ve=G[Q],Q=S[L+Ve],S[L+Ve]=-1;Q!==-1&&S[T+Q]!==-1;Q=S[T+Q],R++){for(ue=S[I+Q],me=S[F+Q],ne=x[Q]+1;ne<=x[Q]+ue-1;ne++)S[O+w[ne]]=R;var Ge=Q;for(re=S[T+Q];re!==-1;){var Ze=S[I+re]===ue&&S[F+re]===me;for(ne=x[re]+1;Ze&&ne<=x[re]+ue-1;ne++)S[O+w[ne]]!==R&&(Ze=0);Ze?(x[re]=aA(Q),S[B+Q]+=S[B+re],S[B+re]=0,S[F+re]=-1,re=S[T+re],S[T+Ge]=re):(Ge=re,re=S[T+re])}}for(ne=ae,le=ae;le<_e;le++)Q=w[le],!((ge=-S[B+Q])<=0)&&(S[B+Q]=ge,te=S[N+Q]+he-ge,te=Math.min(te,d-U-ge),S[M+te]!==-1&&(G[S[M+te]]=Q),S[T+Q]=S[M+te],G[Q]=-1,S[M+te]=Q,W=Math.min(W,te),S[N+Q]=te,w[ne++]=Q);S[B+oe]=Z,(S[I+oe]=ne-ae)===0&&(x[oe]=-1,S[O+oe]=0),se!==0&&(b=ne)}for(Q=0;Q<d;Q++)x[Q]=aA(x[Q]);for(re=0;re<=d;re++)S[M+re]=-1;for(re=d;re>=0;re--)S[B+re]>0||(S[T+re]=S[M+x[re]],S[M+x[re]]=re);for(K=d;K>=0;K--)S[B+K]<=0||x[K]!==-1&&(S[T+K]=S[M+x[K]],S[M+x[K]]=K);for(oe=0,Q=0;Q<=d;Q++)x[Q]===-1&&(oe=AH(Q,oe,S,M,T,C,O));return C.splice(C.length-1,1),C};function i(u,c,h,f,A){var d=n(c);if(u===1&&f===h)return e(c,d);if(u===2){for(var p=d._index,y=d._ptr,v=0,w=0;w<h;w++){var x=y[w];if(y[w]=v,!(y[w+1]-x>A))for(var b=y[w+1];x<b;x++)p[v++]=p[x]}return y[h]=v,c=n(d),t(d,c)}return t(d,c)}function a(u,c,h,f,A,d,p,y,v,w,x,b){for(var C=0;C<u;C++)h[f+C]=c[C+1]-c[C];h[f+u]=0;for(var S=0;S<=u;S++)h[A+S]=-1,d[S]=-1,h[p+S]=-1,h[y+S]=-1,h[v+S]=1,h[w+S]=1,h[x+S]=0,h[b+S]=h[f+S];var I=o(0,0,h,w,u);return h[x+u]=-2,c[u]=-1,h[w+u]=0,I}function s(u,c,h,f,A,d,p,y,v,w,x){for(var b=0,C=0;C<u;C++){var S=h[f+C];if(S===0)h[A+C]=-2,b++,c[C]=-1,h[d+C]=0;else if(S>p)h[y+C]=0,h[A+C]=-1,b++,c[C]=aA(u),h[y+u]++;else{var I=h[v+S];I!==-1&&(w[I]=C),h[x+C]=h[v+S],h[v+S]=C}}return b}function o(u,c,h,f,A){if(u<2||u+c<0){for(var d=0;d<A;d++)h[f+d]!==0&&(h[f+d]=1);u=2}return u}function l(u,c){return u!==c}});function e3e(r,e,t,n,i,a,s){var o,l,u=0,c;if(r<=e||t[n+e]<=t[i+r])return-1;t[i+r]=t[n+e];var h=t[a+r];if(t[a+r]=e,h===-1)u=1,c=r;else{for(u=2,c=h;c!==t[s+c];c=t[s+c]);for(o=h;o!==c;o=l)l=t[s+o],t[s+o]=c}return{jleaf:u,q:c}}var t3e="csCounts",r3e=["transpose"],n3e=Le(t3e,r3e,r=>{var{transpose:e}=r;return function(t,n,i,a){if(!t||!n||!i)return null;var s=t._size,o=s[0],l=s[1],u,c,h,f,A,d,p,y=4*l+(a?l+o+1:0),v=[],w=0,x=l,b=2*l,C=3*l,S=4*l,I=5*l+1;for(h=0;h<y;h++)v[h]=-1;var B=[],T=e(t),M=T._index,F=T._ptr;for(h=0;h<l;h++)for(c=i[h],B[c]=v[C+c]===-1?1:0;c!==-1&&v[C+c]===-1;c=n[c])v[C+c]=h;if(a){for(h=0;h<l;h++)v[i[h]]=h;for(u=0;u<o;u++){for(h=l,d=F[u],p=F[u+1],A=d;A<p;A++)h=Math.min(h,v[M[A]]);v[I+u]=v[S+h],v[S+h]=u}}for(u=0;u<l;u++)v[w+u]=u;for(h=0;h<l;h++){for(c=i[h],n[c]!==-1&&B[n[c]]--,f=a?v[S+h]:c;f!==-1;f=a?v[I+f]:-1)for(A=F[f];A<F[f+1];A++){u=M[A];var N=e3e(u,c,v,C,x,b,w);N.jleaf>=1&&B[c]++,N.jleaf===2&&B[N.q]--}n[c]!==-1&&(v[w+c]=n[c])}for(c=0;c<l;c++)n[c]!==-1&&(B[n[c]]+=B[c]);return B}}),i3e="csSqr",a3e=["add","multiply","transpose"],s3e=Le(i3e,a3e,r=>{var{add:e,multiply:t,transpose:n}=r,i=JBe({add:e,multiply:t,transpose:n}),a=n3e({transpose:n});return function(l,u,c){var h=u._ptr,f=u._size,A=f[1],d,p={};if(p.q=i(l,u),l&&!p.q)return null;if(c){var y=l?KBe(u,null,p.q):u;p.parent=WBe(y);var v=VBe(p.parent,A);if(p.cp=a(y,p.parent,v,1),y&&p.parent&&p.cp&&s(y,p))for(p.unz=0,d=0;d<A;d++)p.unz+=p.cp[d]}else p.unz=4*h[A]+A,p.lnz=p.unz;return p};function s(o,l){var u=o._ptr,c=o._index,h=o._size,f=h[0],A=h[1];l.pinv=[],l.leftmost=[];var d=l.parent,p=l.pinv,y=l.leftmost,v=[],w=0,x=f,b=f+A,C=f+2*A,S,I,B,T,M;for(I=0;I<A;I++)v[x+I]=-1,v[b+I]=-1,v[C+I]=0;for(S=0;S<f;S++)y[S]=-1;for(I=A-1;I>=0;I--)for(T=u[I],M=u[I+1],B=T;B<M;B++)y[c[B]]=I;for(S=f-1;S>=0;S--)p[S]=-1,I=y[S],I!==-1&&(v[C+I]++===0&&(v[b+I]=S),v[w+S]=v[x+I],v[x+I]=S);for(l.lnz=0,l.m2=f,I=0;I<A;I++)if(S=v[x+I],l.lnz++,S<0&&(S=l.m2++),p[S]=I,!(--C[I]<=0)){l.lnz+=v[C+I];var F=d[I];F!==-1&&(v[C+F]===0&&(v[b+F]=v[b+I]),v[w+v[b+I]]=v[x+F],v[x+F]=v[w+S],v[C+F]+=v[C+I])}for(S=0;S<f;S++)p[S]<0&&(p[S]=I++);return!0}});function k5(r,e){return r[e]<0}function dH(r,e){r[e]=aA(r[e])}function b8(r){return r<0?aA(r):r}function o3e(r,e,t,n,i){var a=e._index,s=e._ptr,o=e._size,l=o[1],u,c,h,f=0;for(n[0]=r;f>=0;){r=n[f];var A=i?i[r]:r;k5(s,r)||(dH(s,r),n[l+f]=A<0?0:b8(s[A]));var d=1;for(c=n[l+f],h=A<0?0:b8(s[A+1]);c<h;c++)if(u=a[c],!k5(s,u)){n[l+f]=c,n[++f]=u,d=0;break}d&&(f--,n[--t]=r)}return t}function l3e(r,e,t,n,i){var a=r._ptr,s=r._size,o=e._index,l=e._ptr,u=s[1],c,h,f,A=u;for(h=l[t],f=l[t+1],c=h;c<f;c++){var d=o[c];k5(a,d)||(A=o3e(d,r,A,n,i))}for(c=A;c<u;c++)dH(a,n[c]);return A}var u3e="csSpsolve",c3e=["divideScalar","multiply","subtract"],h3e=Le(u3e,c3e,r=>{var{divideScalar:e,multiply:t,subtract:n}=r;return function(a,s,o,l,u,c,h){var f=a._values,A=a._index,d=a._ptr,p=a._size,y=p[1],v=s._values,w=s._index,x=s._ptr,b,C,S,I,B=l3e(a,s,o,l,c);for(b=B;b<y;b++)u[l[b]]=0;for(C=x[o],S=x[o+1],b=C;b<S;b++)u[w[b]]=v[b];for(var T=B;T<y;T++){var M=l[T],F=c?c[M]:M;if(!(F<0))for(C=d[F],S=d[F+1],u[M]=e(u[M],f[h?C:S-1]),b=h?C+1:C,I=h?S:S-1;b<I;b++){var N=A[b];u[N]=n(u[N],t(f[b],u[M]))}}return B}}),f3e="csLu",A3e=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],d3e=Le(f3e,A3e,r=>{var{abs:e,divideScalar:t,multiply:n,subtract:i,larger:a,largerEq:s,SparseMatrix:o}=r,l=h3e({divideScalar:t,multiply:n,subtract:i});return function(c,h,f){if(!c)return null;var A=c._size,d=A[1],p,y=100,v=100;h&&(p=h.q,y=h.lnz||y,v=h.unz||v);var w=[],x=[],b=[],C=new o({values:w,index:x,ptr:b,size:[d,d]}),S=[],I=[],B=[],T=new o({values:S,index:I,ptr:B,size:[d,d]}),M=[],F,N,O=[],L=[];for(F=0;F<d;F++)O[F]=0,M[F]=-1,b[F+1]=0;y=0,v=0;for(var G=0;G<d;G++){b[G]=y,B[G]=v;var R=p?p[G]:G,U=l(C,c,R,L,O,M,1),W=-1,Q=-1;for(N=U;N<d;N++)if(F=L[N],M[F]<0){var re=e(O[F]);a(re,Q)&&(Q=re,W=F)}else I[v]=M[F],S[v++]=O[F];if(W===-1||Q<=0)return null;M[R]<0&&s(e(O[R]),n(Q,f))&&(W=R);var oe=O[W];for(I[v]=G,S[v++]=oe,M[W]=G,x[y]=W,w[y++]=1,N=U;N<d;N++)F=L[N],M[F]<0&&(x[y]=F,w[y++]=t(O[F],oe)),O[F]=0}for(b[d]=y,B[d]=v,N=0;N<y;N++)x[N]=M[x[N]];return w.splice(y,w.length-y),x.splice(y,x.length-y),S.splice(v,S.length-v),I.splice(v,I.length-v),{L:C,U:T,pinv:M}}}),C8="slu",g3e=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],p3e=Le(C8,g3e,r=>{var{typed:e,abs:t,add:n,multiply:i,transpose:a,divideScalar:s,subtract:o,larger:l,largerEq:u,SparseMatrix:c}=r,h=s3e({add:n,multiply:i,transpose:a}),f=d3e({abs:t,divideScalar:s,multiply:i,subtract:o,larger:l,largerEq:u,SparseMatrix:c});return e(C8,{"SparseMatrix, number, number":function(d,p,y){if(!Sr(p)||p<0||p>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(y<0||y>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var v=h(p,d,!1),w=f(d,v,y);return{L:w.L,U:w.U,p:w.pinv,q:v.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function S8(r,e){var t,n=e.length,i=[];if(r)for(t=0;t<n;t++)i[r[t]]=e[t];else for(t=0;t<n;t++)i[t]=e[t];return i}var B8="lusolve",m3e=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],v3e=Le(B8,m3e,r=>{var{typed:e,matrix:t,lup:n,slu:i,usolve:a,lsolve:s,DenseMatrix:o}=r,l=G1({DenseMatrix:o});return e(B8,{"Array, Array | Matrix":function(f,A){f=t(f);var d=n(f),p=c(d.L,d.U,d.p,null,A);return p.valueOf()},"DenseMatrix, Array | Matrix":function(f,A){var d=n(f);return c(d.L,d.U,d.p,null,A)},"SparseMatrix, Array | Matrix":function(f,A){var d=n(f);return c(d.L,d.U,d.p,null,A)},"SparseMatrix, Array | Matrix, number, number":function(f,A,d,p){var y=i(f,d,p);return c(y.L,y.U,y.p,y.q,A)},"Object, Array | Matrix":function(f,A){return c(f.L,f.U,f.p,f.q,A)}});function u(h){if(Lr(h))return h;if(ti(h))return t(h);throw new TypeError("Invalid Matrix LU decomposition")}function c(h,f,A,d,p){h=u(h),f=u(f),A&&(p=l(h,p,!0),p._data=S8(A,p._data));var y=s(h,p),v=a(f,y);return d&&(v._data=S8(d,v._data)),v}}),T8="polynomialRoot",y3e=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],x3e=Le(T8,y3e,r=>{var{typed:e,isZero:t,equalScalar:n,add:i,subtract:a,multiply:s,divide:o,sqrt:l,unaryMinus:u,cbrt:c,typeOf:h,im:f,re:A}=r;return e(T8,{"number|Complex, ...number|Complex":(d,p)=>{for(var y=[d,...p];y.length>0&&t(y[y.length-1]);)y.pop();if(y.length<2)throw new RangeError("Polynomial [".concat(d,", ").concat(p,"] must have a non-zero non-constant coefficient"));switch(y.length){case 2:return[u(o(y[0],y[1]))];case 3:{var[v,w,x]=y,b=s(2,x),C=s(w,w),S=s(4,x,v);if(n(C,S))return[o(u(w),b)];var I=l(a(C,S));return[o(a(I,w),b),o(a(u(I),w),b)]}case 4:{var[B,T,M,F]=y,N=u(s(3,F)),O=s(M,M),L=s(3,F,T),G=i(s(2,M,M,M),s(27,F,F,B)),R=s(9,F,M,T);if(n(O,L)&&n(G,R))return[o(M,N)];var U=a(O,L),W=a(G,R),Q=i(s(18,F,M,T,B),s(M,M,T,T)),re=i(s(4,M,M,M,B),s(4,F,T,T,T),s(27,F,F,B,B));if(n(Q,re))return[o(a(s(4,F,M,T),i(s(9,F,F,B),s(M,M,M))),s(F,U)),o(a(s(9,F,B),s(M,T)),s(2,U))];var oe;n(O,L)?oe=W:oe=o(i(W,l(a(s(W,W),s(4,U,U,U)))),2);var P=!0,z=c(oe,P).toArray().map(K=>o(i(M,K,o(U,K)),N));return z.map(K=>h(K)==="Complex"&&n(A(K),A(K)+f(K))?A(K):K)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(y))}}})}),w3e="Help",_3e=["evaluate"],E3e=Le(w3e,_3e,r=>{var{evaluate:e}=r;function t(n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!n)throw new Error('Argument "doc" missing');this.doc=n}return t.prototype.type="Help",t.prototype.isHelp=!0,t.prototype.toString=function(){var n=this.doc||{},i=`
`;if(n.name&&(i+="Name: "+n.name+`

`),n.category&&(i+="Category: "+n.category+`

`),n.description&&(i+=`Description:
    `+n.description+`

`),n.syntax&&(i+=`Syntax:
    `+n.syntax.join(`
    `)+`

`),n.examples){i+=`Examples:
`;for(var a=!1,s=e("config()"),o={config:h=>(a=!0,e("config(newConfig)",{newConfig:h}))},l=0;l<n.examples.length;l++){var u=n.examples[l];i+="    "+u+`
`;var c=void 0;try{c=e(u,o)}catch(h){c=h}c!==void 0&&!dQ(c)&&(i+="        "+pn(c,{precision:14})+`
`)}i+=`
`,a&&e("config(originalConfig)",{originalConfig:s})}return n.mayThrow&&n.mayThrow.length&&(i+="Throws: "+n.mayThrow.join(", ")+`

`),n.seealso&&n.seealso.length&&(i+="See also: "+n.seealso.join(", ")+`
`),i},t.prototype.toJSON=function(){var n=Yr(this.doc);return n.mathjs="Help",n},t.fromJSON=function(n){var i={};return Object.keys(n).filter(a=>a!=="mathjs").forEach(a=>{i[a]=n[a]}),new t(i)},t.prototype.valueOf=t.prototype.toString,t},{isClass:!0}),b3e="Chain",C3e=["?on","math","typed"],S3e=Le(b3e,C3e,r=>{var{on:e,math:t,typed:n}=r;function i(u){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");gQ(u)?this.value=u.value:this.value=u}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return pn(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(u){return new i(u.value)};function a(u,c){typeof c=="function"&&(i.prototype[u]=o(c))}function s(u,c){_ye(i.prototype,u,function(){var f=c();if(typeof f=="function")return o(f)})}function o(u){return function(){if(arguments.length===0)return new i(u(this.value));for(var c=[this.value],h=0;h<arguments.length;h++)c[h+1]=arguments[h];if(n.isTypedFunction(u)){var f=n.resolve(u,c);if(f.params.length===1)throw new Error("chain function "+u.name+" cannot match rest parameter between chain value and additional arguments.");return new i(f.implementation.apply(u,c))}return new i(u.apply(u,c))}}i.createProxy=function(u,c){if(typeof u=="string")a(u,c);else{var h=function(d){vr(u,d)&&l[d]===void 0&&s(d,()=>u[d])};for(var f in u)h(f)}};var l={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(t),e&&e("import",function(u,c,h){h||s(u,c)}),i},{isClass:!0}),N8={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},B3e={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},T3e={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},N3e={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},I3e={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},F3e={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},M3e={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},L3e={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},D3e={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},k3e={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},R3e={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},I8={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},O3e={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},P3e={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},U3e={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},Q3e={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},G3e={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},H3e={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]},z3e={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},q3e={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},j3e={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},$3e={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},K3e={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},V3e={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},W3e={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]},Y3e={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},X3e={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},Z3e={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},J3e={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},eTe={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},tTe={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},rTe={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},nTe={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},iTe={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},aTe={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},sTe={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},oTe={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},lTe={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},uTe={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},cTe={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},hTe={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},fTe={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},ATe={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},dTe={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},gTe={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},pTe={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},mTe={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},vTe={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},yTe={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},xTe={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},wTe={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},_Te={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},ETe={name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},bTe={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},CTe={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},STe={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},BTe={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},TTe={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},NTe={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},ITe={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},FTe={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},MTe={name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},LTe={name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},DTe={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},kTe={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},RTe={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax ≣ 1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},OTe={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},PTe={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},UTe={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},QTe={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},GTe={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},HTe={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},zTe={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},qTe={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},jTe={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},$Te={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},KTe={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},VTe={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},WTe={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},YTe={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},XTe={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},ZTe={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},JTe={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},eNe={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},tNe={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},rNe={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},nNe={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},iNe={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},aNe={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},sNe={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},oNe={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},lNe={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},uNe={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},cNe={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},hNe={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},fNe={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},ANe={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},dNe={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},gNe={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},pNe={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},mNe={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},vNe={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},yNe={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},xNe={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},wNe={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:[]},_Ne={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},ENe={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},bNe={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},CNe={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},SNe={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},BNe={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},TNe={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},NNe={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},INe={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},FNe={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},MNe={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},LNe={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},DNe={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},kNe={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},RNe={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicant the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},ONe={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},PNe={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},UNe={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},QNe={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},GNe={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},HNe={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},zNe={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},qNe={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},jNe={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the Moore–Penrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},$Ne={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},KNe={name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]},VNe={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},WNe={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},YNe={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},XNe={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},ZNe={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},JNe={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},eIe={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},tIe={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},rIe={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},nIe={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},iIe={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},aIe={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},sIe={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},oIe={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},lIe={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},uIe={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},cIe={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},hIe={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},fIe={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},AIe={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},dIe={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},gIe={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},pIe={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},mIe={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},vIe={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},yIe={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},xIe={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},wIe={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},_Ie={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},EIe={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},bIe={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},CIe={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},SIe={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},BIe={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},TIe={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},NIe={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},IIe={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},FIe={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},MIe={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},LIe={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},DIe={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},kIe={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},RIe={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},OIe={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},PIe={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},UIe={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},QIe={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},GIe={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},HIe={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},zIe={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},qIe={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},jIe={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},$Ie={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},KIe={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},VIe={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},WIe={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemanns Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},YIe={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},XIe={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},ZIe={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},JIe={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},eFe={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},tFe={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},rFe={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},nFe={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},iFe={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},aFe={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},sFe={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},oFe={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},lFe={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},uFe={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},cFe={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},hFe={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},fFe={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},AFe={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},dFe={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},gFe={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},pFe={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},mFe={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},vFe={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},yFe={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},xFe={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},wFe={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},_Fe={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},EFe={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},bFe={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},CFe={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},SFe={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},BFe={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},TFe={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},NFe={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},IFe={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},FFe={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},MFe={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},LFe={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},DFe={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},kFe={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},RFe={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},OFe={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},PFe={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},UFe={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},QFe={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},GFe={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},HFe={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},zFe={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},qFe={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},jFe={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},$Fe={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},KFe={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","fraction","bignumber","string","format"]},VFe={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},WFe={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},YFe={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},XFe={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},ZFe={bignumber:H3e,boolean:z3e,complex:q3e,createUnit:j3e,fraction:$3e,index:K3e,matrix:V3e,number:W3e,sparse:Y3e,splitUnit:X3e,string:Z3e,unit:J3e,e:N8,E:N8,false:B3e,i:T3e,Infinity:N3e,LN2:F3e,LN10:I3e,LOG2E:L3e,LOG10E:M3e,NaN:D3e,null:k3e,pi:I8,PI:I8,phi:R3e,SQRT1_2:O3e,SQRT2:P3e,tau:U3e,true:Q3e,version:G3e,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:nTe,lsolve:aTe,lsolveAll:sTe,lup:oTe,lusolve:lTe,leafCount:iTe,polynomialRoot:uTe,resolve:fTe,simplify:ATe,simplifyConstant:dTe,simplifyCore:gTe,symbolicEqual:mTe,rationalize:hTe,slu:pTe,usolve:vTe,usolveAll:yTe,qr:cTe,abs:xTe,add:wTe,cbrt:_Te,ceil:ETe,cube:bTe,divide:CTe,dotDivide:STe,dotMultiply:BTe,dotPow:TTe,exp:NTe,expm:ITe,expm1:FTe,fix:MTe,floor:LTe,gcd:DTe,hypot:kTe,lcm:OTe,log:PTe,log2:GTe,log1p:QTe,log10:UTe,mod:HTe,multiply:zTe,norm:qTe,nthRoot:jTe,nthRoots:$Te,pow:KTe,round:VTe,sign:WTe,sqrt:YTe,sqrtm:XTe,square:tNe,subtract:rNe,unaryMinus:nNe,unaryPlus:iNe,xgcd:aNe,invmod:RTe,bitAnd:sNe,bitNot:oNe,bitOr:lNe,bitXor:uNe,leftShift:cNe,rightArithShift:hNe,rightLogShift:fNe,bellNumbers:ANe,catalan:dNe,composition:gNe,stirlingS2:pNe,config:eTe,import:tTe,typed:rTe,arg:mNe,conj:vNe,re:xNe,im:yNe,evaluate:wNe,help:_Ne,distance:ENe,intersect:bNe,and:CNe,not:SNe,or:BNe,xor:TNe,concat:INe,count:FNe,cross:MNe,column:NNe,ctranspose:LNe,det:DNe,diag:kNe,diff:RNe,dot:ONe,getMatrixDataType:HNe,identity:zNe,filter:UNe,flatten:QNe,forEach:GNe,inv:qNe,pinv:jNe,eigs:PNe,kron:$Ne,matrixFromFunction:WNe,matrixFromRows:YNe,matrixFromColumns:VNe,map:KNe,ones:XNe,partitionSelect:ZNe,range:JNe,resize:tIe,reshape:eIe,rotate:rIe,rotationMatrix:nIe,row:iIe,size:aIe,sort:sIe,squeeze:oIe,subset:lIe,trace:uIe,transpose:cIe,zeros:hIe,fft:fIe,ifft:AIe,sylvester:ZTe,schur:JTe,lyap:eNe,solveODE:XFe,combinations:dIe,combinationsWithRep:gIe,factorial:pIe,gamma:mIe,kldivergence:yIe,lgamma:vIe,multinomial:xIe,permutations:wIe,pickRandom:_Ie,random:EIe,randomInt:bIe,compare:CIe,compareNatural:SIe,compareText:BIe,deepEqual:TIe,equal:NIe,equalText:IIe,larger:FIe,largerEq:MIe,smaller:LIe,smallerEq:DIe,unequal:kIe,setCartesian:RIe,setDifference:OIe,setDistinct:PIe,setIntersect:UIe,setIsSubset:QIe,setMultiplicity:GIe,setPowerset:HIe,setSize:zIe,setSymDifference:qIe,setUnion:jIe,zpk2tf:$Ie,freqz:KIe,erf:VIe,zeta:WIe,cumsum:aFe,mad:YIe,max:XIe,mean:ZIe,median:JIe,min:eFe,mode:tFe,prod:rFe,quantileSeq:nFe,std:iFe,sum:sFe,variance:oFe,corr:lFe,acos:uFe,acosh:cFe,acot:hFe,acoth:fFe,acsc:AFe,acsch:dFe,asec:gFe,asech:pFe,asin:mFe,asinh:vFe,atan:yFe,atanh:wFe,atan2:xFe,cos:_Fe,cosh:EFe,cot:bFe,coth:CFe,csc:SFe,csch:BFe,sec:TFe,sech:NFe,sin:IFe,sinh:FFe,tan:MFe,tanh:LFe,to:DFe,clone:RFe,format:OFe,bin:kFe,oct:VFe,hex:UFe,isNaN:GFe,isInteger:QFe,isNegative:HFe,isNumeric:zFe,hasNumericValue:PFe,isPositive:qFe,isPrime:jFe,isZero:$Fe,print:WFe,typeOf:YFe,numeric:KFe},F8="help",JFe=["typed","mathWithTransform","Help"],eMe=Le(F8,JFe,r=>{var{typed:e,mathWithTransform:t,Help:n}=r;return e(F8,{any:function(a){var s,o=a;if(typeof a!="string"){for(s in t)if(vr(t,s)&&a===t[s]){o=s;break}}var l=jo(ZFe,o);if(!l){var u=typeof o=="function"?o.name:o;throw new Error('No documentation found on "'+u+'"')}return new n(l)}})}),M8="chain",tMe=["typed","Chain"],rMe=Le(M8,tMe,r=>{var{typed:e,Chain:t}=r;return e(M8,{"":function(){return new t},any:function(i){return new t(i)}})}),L8="det",nMe=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],iMe=Le(L8,nMe,r=>{var{typed:e,matrix:t,subtractScalar:n,multiply:i,divideScalar:a,isZero:s,unaryMinus:o}=r;return e(L8,{any:function(c){return Yr(c)},"Array | Matrix":function(c){var h;switch(Lr(c)?h=c.size():Array.isArray(c)?(c=t(c),h=c.size()):h=[],h.length){case 0:return Yr(c);case 1:if(h[0]===1)return Yr(c.valueOf()[0]);if(h[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+pn(h)+")");case 2:{var f=h[0],A=h[1];if(f===A)return l(c.clone().valueOf(),f);if(A===0)return 1;throw new RangeError("Matrix must be square (size: "+pn(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+pn(h)+")")}}});function l(u,c,h){if(c===1)return Yr(u[0][0]);if(c===2)return n(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var f=!1,A=new Array(c).fill(0).map((I,B)=>B),d=0;d<c;d++){var p=A[d];if(s(u[p][d])){var y=void 0;for(y=d+1;y<c;y++)if(!s(u[A[y]][d])){p=A[y],A[y]=A[d],A[d]=p,f=!f;break}if(y===c)return u[p][d]}for(var v=u[p][d],w=d===0?1:u[A[d-1]][d-1],x=d+1;x<c;x++)for(var b=A[x],C=d+1;C<c;C++)u[b][C]=a(n(i(u[b][C],v),i(u[b][d],u[p][C])),w)}var S=u[A[c-1]][c-1];return f?o(S):S}}),D8="inv",aMe=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],sMe=Le(D8,aMe,r=>{var{typed:e,matrix:t,divideScalar:n,addScalar:i,multiply:a,unaryMinus:s,det:o,identity:l,abs:u}=r;return e(D8,{"Array | Matrix":function(f){var A=Lr(f)?f.size():en(f);switch(A.length){case 1:if(A[0]===1)return Lr(f)?t([n(1,f.valueOf()[0])]):[n(1,f[0])];throw new RangeError("Matrix must be square (size: "+pn(A)+")");case 2:{var d=A[0],p=A[1];if(d===p)return Lr(f)?t(c(f.valueOf(),d,p),f.storage()):c(f,d,p);throw new RangeError("Matrix must be square (size: "+pn(A)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+pn(A)+")")}},any:function(f){return n(1,f)}});function c(h,f,A){var d,p,y,v,w;if(f===1){if(v=h[0][0],v===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,v)]]}else if(f===2){var x=o(h);if(x===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(h[1][1],x),n(s(h[0][1]),x)],[n(s(h[1][0]),x),n(h[0][0],x)]]}else{var b=h.concat();for(d=0;d<f;d++)b[d]=b[d].concat();for(var C=l(f).valueOf(),S=0;S<A;S++){var I=u(b[S][S]),B=S;for(d=S+1;d<f;)u(b[d][S])>I&&(I=u(b[d][S]),B=d),d++;if(I===0)throw Error("Cannot calculate inverse, determinant is zero");d=B,d!==S&&(w=b[S],b[S]=b[d],b[d]=w,w=C[S],C[S]=C[d],C[d]=w);var T=b[S],M=C[S];for(d=0;d<f;d++){var F=b[d],N=C[d];if(d!==S){if(F[S]!==0){for(y=n(s(F[S]),T[S]),p=S;p<A;p++)F[p]=i(F[p],a(y,T[p]));for(p=0;p<A;p++)N[p]=i(N[p],a(y,M[p]))}}else{for(y=T[S],p=S;p<A;p++)F[p]=n(F[p],y);for(p=0;p<A;p++)N[p]=n(N[p],y)}}}return C}}}),k8="pinv",oMe=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],lMe=Le(k8,oMe,r=>{var{typed:e,matrix:t,inv:n,deepEqual:i,equal:a,dotDivide:s,dot:o,ctranspose:l,divideScalar:u,multiply:c,add:h,Complex:f}=r;return e(k8,{"Array | Matrix":function(x){var b=Lr(x)?x.size():en(x);switch(b.length){case 1:return v(x)?l(x):b[0]===1?n(x):s(l(x),o(x,x));case 2:{if(v(x))return l(x);var C=b[0],S=b[1];if(C===S)try{return n(x)}catch(I){if(!(I instanceof Error&&I.message.match(/Cannot calculate inverse, determinant is zero/)))throw I}return Lr(x)?t(A(x.valueOf(),C,S),x.storage()):A(x,C,S)}default:throw new RangeError("Matrix must be two dimensional (size: "+pn(b)+")")}},any:function(x){return a(x,0)?Yr(x):u(1,x)}});function A(w,x,b){var{C,F:S}=p(w,x,b),I=c(n(c(l(C),C)),l(C)),B=c(l(S),n(c(S,l(S))));return c(B,I)}function d(w,x,b){for(var C=Yr(w),S=0,I=0;I<x;I++){if(b<=S)return C;for(var B=I;y(C[B][S]);)if(B++,x===B&&(B=I,S++,b===S))return C;[C[B],C[I]]=[C[I],C[B]];for(var T=C[I][S],M=0;M<b;M++)C[I][M]=s(C[I][M],T);for(var F=0;F<x;F++)if(F!==I){T=C[F][S];for(var N=0;N<b;N++)C[F][N]=h(C[F][N],c(-1,c(T,C[I][N])))}S++}return C}function p(w,x,b){var C=d(w,x,b),S=w.map((B,T)=>B.filter((M,F)=>F<x&&!y(o(C[F],C[F])))),I=C.filter((B,T)=>!y(o(C[T],C[T])));return{C:S,F:I}}function y(w){return a(h(w,f(1,1)),h(0,f(1,1)))}function v(w){return i(h(w,f(1,1)),h(c(w,0),f(1,1)))}});function uMe(r){var{addScalar:e,subtract:t,flatten:n,multiply:i,multiplyScalar:a,divideScalar:s,sqrt:o,abs:l,bignumber:u,diag:c,size:h,reshape:f,inv:A,qr:d,usolve:p,usolveAll:y,equal:v,complex:w,larger:x,smaller:b,matrixFromColumns:C,dot:S}=r;function I(P,z,K,J){var ue=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,ge=B(P,z,K,J,ue);T(P,z,K,J,ue,ge);var{values:le,C:me}=M(P,z,K,J,ue);if(ue){var xe=F(P,z,me,ge,le,K,J);return{values:le,eigenvectors:xe}}return{values:le}}function B(P,z,K,J,ue){var ge=J==="BigNumber",le=J==="Complex",me=ge?u(0):0,xe=ge?u(1):le?w(1):1,Be=ge?u(1):1,Y=ge?u(10):2,Ve=a(Y,Y),te;ue&&(te=Array(z).fill(xe));for(var se=!1;!se;){se=!0;for(var Z=0;Z<z;Z++){for(var he=me,ne=me,ae=0;ae<z;ae++)Z!==ae&&(he=e(he,l(P[ae][Z])),ne=e(ne,l(P[Z][ae])));if(!v(he,0)&&!v(ne,0)){for(var _e=Be,Me=he,be=s(ne,Y),Ae=a(ne,Y);b(Me,be);)Me=a(Me,Ve),_e=a(_e,Y);for(;x(Me,Ae);)Me=s(Me,Ve),_e=s(_e,Y);var pe=b(s(e(Me,ne),_e),a(e(he,ne),.95));if(pe){se=!1;for(var Fe=s(1,_e),Ge=0;Ge<z;Ge++)Z!==Ge&&(P[Z][Ge]=a(P[Z][Ge],Fe),P[Ge][Z]=a(P[Ge][Z],_e));ue&&(te[Z]=a(te[Z],Fe))}}}}return ue?c(te):null}function T(P,z,K,J,ue,ge){var le=J==="BigNumber",me=J==="Complex",xe=le?u(0):me?w(0):0;le&&(K=u(K));for(var Be=0;Be<z-2;Be++){for(var Y=0,Ve=xe,te=Be+1;te<z;te++){var se=P[te][Be];b(l(Ve),l(se))&&(Ve=se,Y=te)}if(!b(l(Ve),K)){if(Y!==Be+1){var Z=P[Y];P[Y]=P[Be+1],P[Be+1]=Z;for(var he=0;he<z;he++){var ne=P[he][Y];P[he][Y]=P[he][Be+1],P[he][Be+1]=ne}if(ue){var ae=ge[Y];ge[Y]=ge[Be+1],ge[Be+1]=ae}}for(var _e=Be+2;_e<z;_e++){var Me=s(P[_e][Be],Ve);if(Me!==0){for(var be=0;be<z;be++)P[_e][be]=t(P[_e][be],a(Me,P[Be+1][be]));for(var Ae=0;Ae<z;Ae++)P[Ae][Be+1]=e(P[Ae][Be+1],a(Me,P[Ae][_e]));if(ue)for(var pe=0;pe<z;pe++)ge[_e][pe]=t(ge[_e][pe],a(Me,ge[Be+1][pe]))}}}}return ge}function M(P,z,K,J,ue){var ge=J==="BigNumber",le=J==="Complex",me=ge?u(1):le?w(1):1;ge&&(K=u(K));for(var xe=Yr(P),Be=[],Y=z,Ve=[],te=ue?c(Array(z).fill(me)):void 0,se=ue?c(Array(Y).fill(me)):void 0,Z=0;Z<=100;){Z+=1;for(var he=xe[Y-1][Y-1],ne=0;ne<Y;ne++)xe[ne][ne]=t(xe[ne][ne],he);var{Q:ae,R:_e}=d(xe);xe=i(_e,ae);for(var Me=0;Me<Y;Me++)xe[Me][Me]=e(xe[Me][Me],he);if(ue&&(se=i(se,ae)),Y===1||b(l(xe[Y-1][Y-2]),K)){Z=0,Be.push(xe[Y-1][Y-1]),ue&&(Ve.unshift([[1]]),L(se,z),te=i(te,se),Y>1&&(se=c(Array(Y-1).fill(me)))),Y-=1,xe.pop();for(var be=0;be<Y;be++)xe[be].pop()}else if(Y===2||b(l(xe[Y-2][Y-3]),K)){Z=0;var Ae=N(xe[Y-2][Y-2],xe[Y-2][Y-1],xe[Y-1][Y-2],xe[Y-1][Y-1]);Be.push(...Ae),ue&&(Ve.unshift(O(xe[Y-2][Y-2],xe[Y-2][Y-1],xe[Y-1][Y-2],xe[Y-1][Y-1],Ae[0],Ae[1],K,J)),L(se,z),te=i(te,se),Y>2&&(se=c(Array(Y-2).fill(me)))),Y-=2,xe.pop(),xe.pop();for(var pe=0;pe<Y;pe++)xe[pe].pop(),xe[pe].pop()}if(Y===0)break}if(Be.sort((Ze,He)=>+t(l(Ze),l(He))),Z>100){var Fe=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+Be.join(", "));throw Fe.values=Be,Fe.vectors=[],Fe}var Ge=ue?i(te,G(Ve,z)):void 0;return{values:Be,C:Ge}}function F(P,z,K,J,ue,ge,le){var me=A(K),xe=i(me,P,K),Be=le==="BigNumber",Y=le==="Complex",Ve=Be?u(0):Y?w(0):0,te=Be?u(1):Y?w(1):1,se=[],Z=[];for(var he of ue){var ne=R(se,he,v);ne===-1?(se.push(he),Z.push(1)):Z[ne]+=1}for(var ae=[],_e=se.length,Me=Array(z).fill(Ve),be=c(Array(z).fill(te)),Ae=function(){var Ge=se[pe],Ze=t(xe,i(Ge,be)),He=y(Ze,Me);for(He.shift();He.length<Z[pe];){var Je=U(Ze,z,He,ge,le);if(Je===null)break;He.push(Je)}var Ye=i(A(J),K);He=He.map(Ke=>i(Ye,Ke)),ae.push(...He.map(Ke=>({value:Ge,vector:n(Ke)})))},pe=0;pe<_e;pe++)Ae();return ae}function N(P,z,K,J){var ue=e(P,J),ge=t(a(P,J),a(z,K)),le=a(ue,.5),me=a(o(t(a(ue,ue),a(4,ge))),.5);return[e(le,me),t(le,me)]}function O(P,z,K,J,ue,ge,le,me){var xe=me==="BigNumber",Be=me==="Complex",Y=xe?u(0):Be?w(0):0,Ve=xe?u(1):Be?w(1):1;if(b(l(K),le))return[[Ve,Y],[Y,Ve]];if(x(l(t(ue,ge)),le))return[[t(ue,J),t(ge,J)],[K,K]];var te=t(P,ue),se=t(J,ue);return b(l(z),le)&&b(l(se),le)?[[te,Ve],[K,Y]]:[[z,Y],[se,Ve]]}function L(P,z){for(var K=0;K<P.length;K++)P[K].push(...Array(z-P[K].length).fill(0));for(var J=P.length;J<z;J++)P.push(Array(z).fill(0)),P[J][J]=1;return P}function G(P,z){for(var K=[],J=0;J<z;J++)K[J]=Array(z).fill(0);var ue=0;for(var ge of P){for(var le=ge.length,me=0;me<le;me++)for(var xe=0;xe<le;xe++)K[ue+me][ue+xe]=ge[me][xe];ue+=le}return K}function R(P,z,K){for(var J=0;J<P.length;J++)if(K(P[J],z))return J;return-1}function U(P,z,K,J,ue){for(var ge=ue==="BigNumber"?u(1e3):1e3,le,me=0;me<5;++me){le=W(z,K,ue);try{le=p(P,le)}catch{continue}if(x(re(le),ge))break}if(me>=5)return null;for(me=0;;){var xe=p(P,le);if(b(re(Q(le,[xe])),J))break;if(++me>=10)return null;le=oe(xe)}return le}function W(P,z,K){var J=K==="BigNumber",ue=K==="Complex",ge=Array(P).fill(0).map(le=>2*Math.random()-1);return J&&(ge=ge.map(le=>u(le))),ue&&(ge=ge.map(le=>w(le))),ge=Q(ge,z),oe(ge,K)}function Q(P,z){var K=h(P);for(var J of z)J=f(J,K),P=t(P,i(s(S(J,P),S(J,J)),J));return P}function re(P){return l(o(S(P,P)))}function oe(P,z){var K=z==="BigNumber",J=z==="Complex",ue=K?u(1):J?w(1):1;return i(s(ue,re(P)),P)}return I}function cMe(r){var{config:e,addScalar:t,subtract:n,abs:i,atan:a,cos:s,sin:o,multiplyScalar:l,inv:u,bignumber:c,multiply:h,add:f}=r;function A(T,M){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.epsilon,N=arguments.length>3?arguments[3]:void 0,O=arguments.length>4?arguments[4]:void 0;if(N==="number")return d(T,F,O);if(N==="BigNumber")return p(T,F,O);throw TypeError("Unsupported data type: "+N)}function d(T,M,F){var N=T.length,O=Math.abs(M/N),L,G;if(F){G=new Array(N);for(var R=0;R<N;R++)G[R]=Array(N).fill(0),G[R][R]=1}for(var U=S(T);Math.abs(U[1])>=Math.abs(O);){var W=U[0][0],Q=U[0][1];L=y(T[W][W],T[Q][Q],T[W][Q]),T=C(T,L,W,Q),F&&(G=w(G,L,W,Q)),U=S(T)}for(var re=Array(N).fill(0),oe=0;oe<N;oe++)re[oe]=T[oe][oe];return B(Yr(re),G,F)}function p(T,M,F){var N=T.length,O=i(M/N),L,G;if(F){G=new Array(N);for(var R=0;R<N;R++)G[R]=Array(N).fill(0),G[R][R]=1}for(var U=I(T);i(U[1])>=i(O);){var W=U[0][0],Q=U[0][1];L=v(T[W][W],T[Q][Q],T[W][Q]),T=b(T,L,W,Q),F&&(G=x(G,L,W,Q)),U=I(T)}for(var re=Array(N).fill(0),oe=0;oe<N;oe++)re[oe]=T[oe][oe];return B(Yr(re),G,F)}function y(T,M,F){var N=M-T;return Math.abs(N)<=e.epsilon?Math.PI/4:.5*Math.atan(2*F/(M-T))}function v(T,M,F){var N=n(M,T);return i(N)<=e.epsilon?c(-1).acos().div(4):l(.5,a(h(2,F,u(N))))}function w(T,M,F,N){for(var O=T.length,L=Math.cos(M),G=Math.sin(M),R=Array(O).fill(0),U=Array(O).fill(0),W=0;W<O;W++)R[W]=L*T[W][F]-G*T[W][N],U[W]=G*T[W][F]+L*T[W][N];for(var Q=0;Q<O;Q++)T[Q][F]=R[Q],T[Q][N]=U[Q];return T}function x(T,M,F,N){for(var O=T.length,L=s(M),G=o(M),R=Array(O).fill(c(0)),U=Array(O).fill(c(0)),W=0;W<O;W++)R[W]=n(l(L,T[W][F]),l(G,T[W][N])),U[W]=t(l(G,T[W][F]),l(L,T[W][N]));for(var Q=0;Q<O;Q++)T[Q][F]=R[Q],T[Q][N]=U[Q];return T}function b(T,M,F,N){for(var O=T.length,L=c(s(M)),G=c(o(M)),R=l(L,L),U=l(G,G),W=Array(O).fill(c(0)),Q=Array(O).fill(c(0)),re=h(c(2),L,G,T[F][N]),oe=t(n(l(R,T[F][F]),re),l(U,T[N][N])),P=f(l(U,T[F][F]),re,l(R,T[N][N])),z=0;z<O;z++)W[z]=n(l(L,T[F][z]),l(G,T[N][z])),Q[z]=t(l(G,T[F][z]),l(L,T[N][z]));T[F][F]=oe,T[N][N]=P,T[F][N]=c(0),T[N][F]=c(0);for(var K=0;K<O;K++)K!==F&&K!==N&&(T[F][K]=W[K],T[K][F]=W[K],T[N][K]=Q[K],T[K][N]=Q[K]);return T}function C(T,M,F,N){for(var O=T.length,L=Math.cos(M),G=Math.sin(M),R=L*L,U=G*G,W=Array(O).fill(0),Q=Array(O).fill(0),re=R*T[F][F]-2*L*G*T[F][N]+U*T[N][N],oe=U*T[F][F]+2*L*G*T[F][N]+R*T[N][N],P=0;P<O;P++)W[P]=L*T[F][P]-G*T[N][P],Q[P]=G*T[F][P]+L*T[N][P];T[F][F]=re,T[N][N]=oe,T[F][N]=0,T[N][F]=0;for(var z=0;z<O;z++)z!==F&&z!==N&&(T[F][z]=W[z],T[z][F]=W[z],T[N][z]=Q[z],T[z][N]=Q[z]);return T}function S(T){for(var M=T.length,F=0,N=[0,1],O=0;O<M;O++)for(var L=O+1;L<M;L++)Math.abs(F)<Math.abs(T[O][L])&&(F=Math.abs(T[O][L]),N=[O,L]);return[N,F]}function I(T){for(var M=T.length,F=0,N=[0,1],O=0;O<M;O++)for(var L=O+1;L<M;L++)i(F)<i(T[O][L])&&(F=i(T[O][L]),N=[O,L]);return[N,F]}function B(T,M,F){var N=T.length,O=Array(N),L;if(F){L=Array(N);for(var G=0;G<N;G++)L[G]=Array(N)}for(var R=0;R<N;R++){for(var U=0,W=T[0],Q=0;Q<T.length;Q++)i(T[Q])<i(W)&&(U=Q,W=T[U]);if(O[R]=T.splice(U,1)[0],F)for(var re=0;re<N;re++)L[R][re]=M[re][U],M[re].splice(U,1)}if(!F)return{values:O};var oe=L.map((P,z)=>({value:O[z],vector:P}));return{values:O,eigenvectors:oe}}return A}var hMe="eigs",fMe=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],AMe=Le(hMe,fMe,r=>{var{config:e,typed:t,matrix:n,addScalar:i,subtract:a,equal:s,abs:o,atan:l,cos:u,sin:c,multiplyScalar:h,divideScalar:f,inv:A,bignumber:d,multiply:p,add:y,larger:v,column:w,flatten:x,number:b,complex:C,sqrt:S,diag:I,size:B,reshape:T,qr:M,usolve:F,usolveAll:N,im:O,re:L,smaller:G,matrixFromColumns:R,dot:U}=r,W=cMe({config:e,addScalar:i,subtract:a,abs:o,atan:l,cos:u,sin:c,multiplyScalar:h,inv:A,bignumber:d,multiply:p,add:y}),Q=uMe({addScalar:i,subtract:a,multiply:p,multiplyScalar:h,flatten:x,divideScalar:f,sqrt:S,abs:o,bignumber:d,diag:I,size:B,reshape:T,qr:M,inv:A,usolve:F,usolveAll:N,equal:s,complex:C,larger:v,smaller:G,matrixFromColumns:R,dot:U});return t("eigs",{Array:function(ge){return re(n(ge))},"Array, number|BigNumber":function(ge,le){return re(n(ge),{precision:le})},"Array, Object"(ue,ge){return re(n(ue),ge)},Matrix:function(ge){return re(ge,{matricize:!0})},"Matrix, number|BigNumber":function(ge,le){return re(ge,{precision:le,matricize:!0})},"Matrix, Object":function(ge,le){var me={matricize:!0};return ts(me,le),re(ge,me)}});function re(ue){var ge,le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me="eigenvectors"in le?le.eigenvectors:!0,xe=(ge=le.precision)!==null&&ge!==void 0?ge:e.epsilon,Be=oe(ue,xe,me);return le.matricize&&(Be.values=n(Be.values),me&&(Be.eigenvectors=Be.eigenvectors.map(Y=>{var{value:Ve,vector:te}=Y;return{value:Ve,vector:n(te)}}))),me&&Object.defineProperty(Be,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),Be}function oe(ue,ge,le){var me=ue.toArray(),xe=ue.size();if(xe.length!==2||xe[0]!==xe[1])throw new RangeError("Matrix must be square (size: ".concat(pn(xe),")"));var Be=xe[0];if(z(me,Be,ge)&&(K(me,Be),P(me,Be,ge))){var Y=J(ue,me,Be);return W(me,Be,ge,Y,le)}var Ve=J(ue,me,Be);return Q(me,Be,ge,Ve,le)}function P(ue,ge,le){for(var me=0;me<ge;me++)for(var xe=me;xe<ge;xe++)if(v(d(o(a(ue[me][xe],ue[xe][me]))),le))return!1;return!0}function z(ue,ge,le){for(var me=0;me<ge;me++)for(var xe=0;xe<ge;xe++)if(v(d(o(O(ue[me][xe]))),le))return!1;return!0}function K(ue,ge){for(var le=0;le<ge;le++)for(var me=0;me<ge;me++)ue[le][me]=L(ue[le][me])}function J(ue,ge,le){var me=ue.datatype();if(me==="number"||me==="BigNumber"||me==="Complex")return me;for(var xe=!1,Be=!1,Y=!1,Ve=0;Ve<le;Ve++)for(var te=0;te<le;te++){var se=ge[Ve][te];if(an(se)||O1(se))xe=!0;else if(sn(se))Be=!0;else if(rf(se))Y=!0;else throw TypeError("Unsupported type in Matrix: "+Si(se))}if(Be&&Y&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),Y){for(var Z=0;Z<le;Z++)for(var he=0;he<le;he++)ge[Z][he]=C(ge[Z][he]);return"Complex"}if(Be){for(var ne=0;ne<le;ne++)for(var ae=0;ae<le;ae++)ge[ne][ae]=d(ge[ne][ae]);return"BigNumber"}if(xe){for(var _e=0;_e<le;_e++)for(var Me=0;Me<le;Me++)ge[_e][Me]=b(ge[_e][Me]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),R8="expm",dMe=["typed","abs","add","identity","inv","multiply"],gMe=Le(R8,dMe,r=>{var{typed:e,abs:t,add:n,identity:i,inv:a,multiply:s}=r;return e(R8,{Matrix:function(h){var f=h.size();if(f.length!==2||f[0]!==f[1])throw new RangeError("Matrix must be square (size: "+pn(f)+")");for(var A=f[0],d=1e-15,p=o(h),y=l(p,d),v=y.q,w=y.j,x=s(h,Math.pow(2,-w)),b=i(A),C=i(A),S=1,I=x,B=-1,T=1;T<=v;T++)T>1&&(I=s(I,x),B=-B),S=S*(v-T+1)/((2*v-T+1)*T),b=n(b,s(S,I)),C=n(C,s(S*B,I));for(var M=s(a(C),b),F=0;F<w;F++)M=s(M,M);return Cd(h)?h.createSparseMatrix(M):M}});function o(c){for(var h=c.size()[0],f=0,A=0;A<h;A++){for(var d=0,p=0;p<h;p++)d+=t(c.get([A,p]));f=Math.max(d,f)}return f}function l(c,h){for(var f=30,A=0;A<f;A++)for(var d=0;d<=A;d++){var p=A-d;if(u(c,d,p)<h)return{q:d,j:p}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function u(c,h,f){for(var A=1,d=2;d<=h;d++)A*=d;for(var p=A,y=h+1;y<=2*h;y++)p*=y;var v=p*(2*h+1);return 8*Math.pow(c/Math.pow(2,f),2*h)*A*A/(p*v)}}),O8="sqrtm",pMe=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],mMe=Le(O8,pMe,r=>{var{typed:e,abs:t,add:n,multiply:i,map:a,sqrt:s,subtract:o,inv:l,size:u,max:c,identity:h}=r,f=1e3,A=1e-6;function d(p){var y,v=0,w=p,x=h(u(p));do{var b=w;if(w=i(.5,n(b,l(x))),x=i(.5,n(x,l(b))),y=c(t(o(w,b))),y>A&&++v>f)throw new Error("computing square root of matrix: iterative method could not converge")}while(y>A);return w}return e(O8,{"Array | Matrix":function(y){var v=Lr(y)?y.size():en(y);switch(v.length){case 1:if(v[0]===1)return a(y,s);throw new RangeError("Matrix must be square (size: "+pn(v)+")");case 2:{var w=v[0],x=v[1];if(w===x)return d(y);throw new RangeError("Matrix must be square (size: "+pn(v)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+pn(v)+")")}}})}),P8="sylvester",vMe=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],yMe=Le(P8,vMe,r=>{var{typed:e,schur:t,matrixFromColumns:n,matrix:i,multiply:a,range:s,concat:o,transpose:l,index:u,subset:c,add:h,subtract:f,identity:A,lusolve:d,abs:p}=r;return e(P8,{"Matrix, Matrix, Matrix":y,"Array, Matrix, Matrix":function(w,x,b){return y(i(w),x,b)},"Array, Array, Matrix":function(w,x,b){return y(i(w),i(x),b)},"Array, Matrix, Array":function(w,x,b){return y(i(w),x,i(b))},"Matrix, Array, Matrix":function(w,x,b){return y(w,i(x),b)},"Matrix, Array, Array":function(w,x,b){return y(w,i(x),i(b))},"Matrix, Matrix, Array":function(w,x,b){return y(w,x,i(b))},"Array, Array, Array":function(w,x,b){return y(i(w),i(x),i(b)).toArray()}});function y(v,w,x){for(var b=w.size()[0],C=v.size()[0],S=t(v),I=S.T,B=S.U,T=t(a(-1,w)),M=T.T,F=T.U,N=a(a(l(B),x),F),O=s(0,C),L=[],G=(Y,Ve)=>o(Y,Ve,1),R=(Y,Ve)=>o(Y,Ve,0),U=0;U<b;U++)if(U<b-1&&p(c(M,u(U+1,U)))>1e-5){for(var W=R(c(N,u(O,U)),c(N,u(O,U+1))),Q=0;Q<U;Q++)W=h(W,R(a(L[Q],c(M,u(Q,U))),a(L[Q],c(M,u(Q,U+1)))));var re=a(A(C),a(-1,c(M,u(U,U)))),oe=a(A(C),a(-1,c(M,u(U+1,U)))),P=a(A(C),a(-1,c(M,u(U,U+1)))),z=a(A(C),a(-1,c(M,u(U+1,U+1)))),K=R(G(h(I,re),oe),G(P,h(I,z))),J=d(K,W);L[U]=J.subset(u(s(0,C),0)),L[U+1]=J.subset(u(s(C,2*C),0)),U++}else{for(var ue=c(N,u(O,U)),ge=0;ge<U;ge++)ue=h(ue,a(L[ge],c(M,u(ge,U))));var le=c(M,u(U,U)),me=f(I,a(le,A(C)));L[U]=d(me,ue)}var xe=i(n(...L)),Be=a(B,a(xe,l(F)));return Be}}),U8="schur",xMe=["typed","matrix","identity","multiply","qr","norm","subtract"],wMe=Le(U8,xMe,r=>{var{typed:e,matrix:t,identity:n,multiply:i,qr:a,norm:s,subtract:o}=r;return e(U8,{Array:function(c){var h=l(t(c));return{U:h.U.valueOf(),T:h.T.valueOf()}},Matrix:function(c){return l(c)}});function l(u){var c=u.size()[0],h=u,f=n(c),A=0,d;do{d=h;var p=a(h),y=p.Q,v=p.R;if(h=i(v,y),f=i(f,y),A++>100)break}while(s(o(h,d))>1e-4);return{U:f,T:h}}}),Q8="lyap",_Me=["typed","matrix","sylvester","multiply","transpose"],EMe=Le(Q8,_Me,r=>{var{typed:e,matrix:t,sylvester:n,multiply:i,transpose:a}=r;return e(Q8,{"Matrix, Matrix":function(o,l){return n(o,a(o),i(-1,l))},"Array, Matrix":function(o,l){return n(t(o),a(t(o)),i(-1,l))},"Matrix, Array":function(o,l){return n(o,a(t(o)),t(i(-1,l)))},"Array, Array":function(o,l){return n(t(o),a(t(o)),t(i(-1,l))).toArray()}})}),bMe="divide",CMe=["typed","matrix","multiply","equalScalar","divideScalar","inv"],SMe=Le(bMe,CMe,r=>{var{typed:e,matrix:t,multiply:n,equalScalar:i,divideScalar:a,inv:s}=r,o=$s({typed:e,equalScalar:i}),l=gc({typed:e});return e("divide",pQ({"Array | Matrix, Array | Matrix":function(c,h){return n(c,s(h))},"DenseMatrix, any":function(c,h){return l(c,h,a,!1)},"SparseMatrix, any":function(c,h){return o(c,h,a,!1)},"Array, any":function(c,h){return l(t(c),h,a,!1).valueOf()},"any, Array | Matrix":function(c,h){return n(c,s(h))}},a.signatures))}),G8="distance",BMe=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],TMe=Le(G8,BMe,r=>{var{typed:e,addScalar:t,subtractScalar:n,multiplyScalar:i,divideScalar:a,deepEqual:s,sqrt:o,abs:l}=r;return e(G8,{"Array, Array, Array":function(C,S,I){if(C.length===2&&S.length===2&&I.length===2){if(!c(C))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(S))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(I))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(s(S,I))throw new TypeError("LinePoint1 should not be same with LinePoint2");var B=n(I[1],S[1]),T=n(S[0],I[0]),M=n(i(I[0],S[1]),i(S[0],I[1]));return y(C[0],C[1],B,T,M)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(C,S,I){if(Object.keys(C).length===2&&Object.keys(S).length===2&&Object.keys(I).length===2){if(!c(C))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(S))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(I))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(s(d(S),d(I)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in C&&"pointY"in C&&"lineOnePtX"in S&&"lineOnePtY"in S&&"lineTwoPtX"in I&&"lineTwoPtY"in I){var B=n(I.lineTwoPtY,S.lineOnePtY),T=n(S.lineOnePtX,I.lineTwoPtX),M=n(i(I.lineTwoPtX,S.lineOnePtY),i(S.lineOnePtX,I.lineTwoPtY));return y(C.pointX,C.pointY,B,T,M)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(C,S){if(C.length===2&&S.length===3){if(!c(C))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!h(S))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return y(C[0],C[1],S[0],S[1],S[2])}else if(C.length===3&&S.length===6){if(!h(C))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!A(S))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return v(C[0],C[1],C[2],S[0],S[1],S[2],S[3],S[4],S[5])}else if(C.length===S.length&&C.length>0){if(!f(C))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!f(S))throw new TypeError("All values of an array should be numbers or BigNumbers");return w(C,S)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(C,S){if(Object.keys(C).length===2&&Object.keys(S).length===3){if(!c(C))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!h(S))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in C&&"pointY"in C&&"xCoeffLine"in S&&"yCoeffLine"in S&&"constant"in S)return y(C.pointX,C.pointY,S.xCoeffLine,S.yCoeffLine,S.constant);throw new TypeError("Key names do not match")}else if(Object.keys(C).length===3&&Object.keys(S).length===6){if(!h(C))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!A(S))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in C&&"pointY"in C&&"x0"in S&&"y0"in S&&"z0"in S&&"a"in S&&"b"in S&&"c"in S)return v(C.pointX,C.pointY,C.pointZ,S.x0,S.y0,S.z0,S.a,S.b,S.c);throw new TypeError("Key names do not match")}else if(Object.keys(C).length===2&&Object.keys(S).length===2){if(!c(C))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(S))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in C&&"pointOneY"in C&&"pointTwoX"in S&&"pointTwoY"in S)return w([C.pointOneX,C.pointOneY],[S.pointTwoX,S.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(C).length===3&&Object.keys(S).length===3){if(!h(C))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!h(S))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in C&&"pointOneY"in C&&"pointOneZ"in C&&"pointTwoX"in S&&"pointTwoY"in S&&"pointTwoZ"in S)return w([C.pointOneX,C.pointOneY,C.pointOneZ],[S.pointTwoX,S.pointTwoY,S.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(C){if(!p(C))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return x(C)}});function u(b){return typeof b=="number"||sn(b)}function c(b){return b.constructor!==Array&&(b=d(b)),u(b[0])&&u(b[1])}function h(b){return b.constructor!==Array&&(b=d(b)),u(b[0])&&u(b[1])&&u(b[2])}function f(b){return Array.isArray(b)||(b=d(b)),b.every(u)}function A(b){return b.constructor!==Array&&(b=d(b)),u(b[0])&&u(b[1])&&u(b[2])&&u(b[3])&&u(b[4])&&u(b[5])}function d(b){for(var C=Object.keys(b),S=[],I=0;I<C.length;I++)S.push(b[C[I]]);return S}function p(b){if(b[0].length===2&&u(b[0][0])&&u(b[0][1])){if(b.some(C=>C.length!==2||!u(C[0])||!u(C[1])))return!1}else if(b[0].length===3&&u(b[0][0])&&u(b[0][1])&&u(b[0][2])){if(b.some(C=>C.length!==3||!u(C[0])||!u(C[1])||!u(C[2])))return!1}else return!1;return!0}function y(b,C,S,I,B){var T=l(t(t(i(S,b),i(I,C)),B)),M=o(t(i(S,S),i(I,I)));return a(T,M)}function v(b,C,S,I,B,T,M,F,N){var O=[n(i(n(B,C),N),i(n(T,S),F)),n(i(n(T,S),M),i(n(I,b),N)),n(i(n(I,b),F),i(n(B,C),M))];O=o(t(t(i(O[0],O[0]),i(O[1],O[1])),i(O[2],O[2])));var L=o(t(t(i(M,M),i(F,F)),i(N,N)));return a(O,L)}function w(b,C){for(var S=b.length,I=0,B=0,T=0;T<S;T++)B=n(b[T],C[T]),I=t(i(B,B),I);return o(I)}function x(b){for(var C=[],S=[],I=[],B=0;B<b.length-1;B++)for(var T=B+1;T<b.length;T++)b[0].length===2?(S=[b[B][0],b[B][1]],I=[b[T][0],b[T][1]]):b[0].length===3&&(S=[b[B][0],b[B][1],b[B][2]],I=[b[T][0],b[T][1],b[T][2]]),C.push(w(S,I));return C}}),NMe="intersect",IMe=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],FMe=Le(NMe,IMe,r=>{var{typed:e,config:t,abs:n,add:i,addScalar:a,matrix:s,multiply:o,multiplyScalar:l,divideScalar:u,subtract:c,smaller:h,equalScalar:f,flatten:A,isZero:d,isNumeric:p}=r;return e("intersect",{"Array, Array, Array":y,"Array, Array, Array, Array":v,"Matrix, Matrix, Matrix":function(F,N,O){var L=y(F.valueOf(),N.valueOf(),O.valueOf());return L===null?null:s(L)},"Matrix, Matrix, Matrix, Matrix":function(F,N,O,L){var G=v(F.valueOf(),N.valueOf(),O.valueOf(),L.valueOf());return G===null?null:s(G)}});function y(M,F,N){if(M=w(M),F=w(F),N=w(N),!b(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!b(F))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!C(N))throw new TypeError("Array with 4 numbers expected as third argument");return T(M[0],M[1],M[2],F[0],F[1],F[2],N[0],N[1],N[2],N[3])}function v(M,F,N,O){if(M=w(M),F=w(F),N=w(N),O=w(O),M.length===2){if(!x(M))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!x(F))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!x(N))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!x(O))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return S(M,F,N,O)}else if(M.length===3){if(!b(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!b(F))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!b(N))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!b(O))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return B(M[0],M[1],M[2],F[0],F[1],F[2],N[0],N[1],N[2],O[0],O[1],O[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function w(M){return M.length===1?M[0]:M.length>1&&Array.isArray(M[0])&&M.every(F=>Array.isArray(F)&&F.length===1)?A(M):M}function x(M){return M.length===2&&p(M[0])&&p(M[1])}function b(M){return M.length===3&&p(M[0])&&p(M[1])&&p(M[2])}function C(M){return M.length===4&&p(M[0])&&p(M[1])&&p(M[2])&&p(M[3])}function S(M,F,N,O){var L=M,G=N,R=c(L,F),U=c(G,O),W=c(l(R[0],U[1]),l(U[0],R[1]));if(d(W)||h(n(W),t.epsilon))return null;var Q=l(U[0],L[1]),re=l(U[1],L[0]),oe=l(U[0],G[1]),P=l(U[1],G[0]),z=u(a(c(c(Q,re),oe),P),W);return i(o(R,z),L)}function I(M,F,N,O,L,G,R,U,W,Q,re,oe){var P=l(c(M,F),c(N,O)),z=l(c(L,G),c(R,U)),K=l(c(W,Q),c(re,oe));return a(a(P,z),K)}function B(M,F,N,O,L,G,R,U,W,Q,re,oe){var P=I(M,R,Q,R,F,U,re,U,N,W,oe,W),z=I(Q,R,O,M,re,U,L,F,oe,W,G,N),K=I(M,R,O,M,F,U,L,F,N,W,G,N),J=I(Q,R,Q,R,re,U,re,U,oe,W,oe,W),ue=I(O,M,O,M,L,F,L,F,G,N,G,N),ge=c(l(P,z),l(K,J)),le=c(l(ue,J),l(z,z));if(d(le))return null;var me=u(ge,le),xe=u(a(P,l(me,z)),J),Be=a(M,l(me,c(O,M))),Y=a(F,l(me,c(L,F))),Ve=a(N,l(me,c(G,N))),te=a(R,l(xe,c(Q,R))),se=a(U,l(xe,c(re,U))),Z=a(W,l(xe,c(oe,W)));return f(Be,te)&&f(Y,se)&&f(Ve,Z)?[Be,Y,Ve]:null}function T(M,F,N,O,L,G,R,U,W,Q){var re=l(M,R),oe=l(O,R),P=l(F,U),z=l(L,U),K=l(N,W),J=l(G,W),ue=c(c(c(Q,re),P),K),ge=c(c(c(a(a(oe,z),J),re),P),K),le=u(ue,ge),me=a(M,l(le,c(O,M))),xe=a(F,l(le,c(L,F))),Be=a(N,l(le,c(G,N)));return[me,xe,Be]}}),H8="sum",MMe=["typed","config","add","numeric"],gH=Le(H8,MMe,r=>{var{typed:e,config:t,add:n,numeric:i}=r;return e(H8,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":s,"...":function(l){if(Lp(l))throw new TypeError("Scalar values expected in function sum");return a(l)}});function a(o){var l;return cf(o,function(u){try{l=l===void 0?u:n(l,u)}catch(c){throw Yo(c,"sum",u)}}),l===void 0&&(l=i(0,t.number)),typeof l=="string"&&(l=i(l,t.number)),l}function s(o,l){try{var u=eE(o,l,n);return u}catch(c){throw Yo(c,"sum")}}}),W2="cumsum",LMe=["typed","add","unaryPlus"],pH=Le(W2,LMe,r=>{var{typed:e,add:t,unaryPlus:n}=r;return e(W2,{Array:i,Matrix:function(u){return u.create(i(u.valueOf()))},"Array, number | BigNumber":s,"Matrix, number | BigNumber":function(u,c){return u.create(s(u.valueOf(),c))},"...":function(u){if(Lp(u))throw new TypeError("All values expected to be scalar in function cumsum");return i(u)}});function i(l){try{return a(l)}catch(u){throw Yo(u,W2)}}function a(l){if(l.length===0)return[];for(var u=[n(l[0])],c=1;c<l.length;++c)u.push(t(u[c-1],l[c]));return u}function s(l,u){var c=en(l);if(u<0||u>=c.length)throw new Ac(u,c.length);try{return o(l,u)}catch(h){throw Yo(h,W2)}}function o(l,u){var c,h,f;if(u<=0){var A=l[0][0];if(Array.isArray(A)){for(f=WQ(l),h=[],c=0;c<f.length;c++)h[c]=o(f[c],u-1);return h}else return a(l)}else{for(h=[],c=0;c<l.length;c++)h[c]=o(l[c],u-1);return h}}}),z8="mean",DMe=["typed","add","divide"],mH=Le(z8,DMe,r=>{var{typed:e,add:t,divide:n}=r;return e(z8,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":i,"...":function(o){if(Lp(o))throw new TypeError("Scalar values expected in function mean");return a(o)}});function i(s,o){try{var l=eE(s,o,t),u=Array.isArray(s)?en(s):s.size();return n(l,u[o])}catch(c){throw Yo(c,"mean")}}function a(s){var o,l=0;if(cf(s,function(u){try{o=o===void 0?u:t(o,u),l++}catch(c){throw Yo(c,"mean",u)}}),l===0)throw new Error("Cannot calculate the mean of an empty array");return n(o,l)}}),q8="median",kMe=["typed","add","divide","compare","partitionSelect"],RMe=Le(q8,kMe,r=>{var{typed:e,add:t,divide:n,compare:i,partitionSelect:a}=r;function s(u){try{u=jn(u.valueOf());var c=u.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var h=c/2-1,f=a(u,h+1),A=u[h],d=0;d<h;++d)i(u[d],A)>0&&(A=u[d]);return l(A,f)}else{var p=a(u,(c-1)/2);return o(p)}}catch(y){throw Yo(y,"median")}}var o=e({"number | BigNumber | Complex | Unit":function(c){return c}}),l=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,h){return n(t(c,h),2)}});return e(q8,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(c,h){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(Lp(c))throw new TypeError("Scalar values expected in function median");return s(c)}})}),j8="mad",OMe=["typed","abs","map","median","subtract"],PMe=Le(j8,OMe,r=>{var{typed:e,abs:t,map:n,median:i,subtract:a}=r;return e(j8,{"Array | Matrix":s,"...":function(l){return s(l)}});function s(o){if(o=jn(o.valueOf()),o.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var l=i(o);return i(n(o,function(u){return t(a(u,l))}))}catch(u){throw u instanceof TypeError&&u.message.includes("median")?new TypeError(u.message.replace("median","mad")):Yo(u,"mad")}}}),TC="unbiased",$8="variance",UMe=["typed","add","subtract","multiply","divide","apply","isNaN"],vH=Le($8,UMe,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:a,apply:s,isNaN:o}=r;return e($8,{"Array | Matrix":function(h){return l(h,TC)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(h,f){return u(h,f,TC)},"Array | Matrix, number | BigNumber, string":u,"...":function(h){return l(h,TC)}});function l(c,h){var f,A=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(cf(c,function(y){try{f=f===void 0?y:t(f,y),A++}catch(v){throw Yo(v,"variance",y)}}),A===0)throw new Error("Cannot calculate variance of an empty array");var d=a(f,A);if(f=void 0,cf(c,function(y){var v=n(y,d);f=f===void 0?i(v,v):t(f,i(v,v))}),o(f))return f;switch(h){case"uncorrected":return a(f,A);case"biased":return a(f,A+1);case"unbiased":{var p=sn(f)?f.mul(0):0;return A===1?p:a(f,A-1)}default:throw new Error('Unknown normalization "'+h+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(c,h,f){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return s(c,h,A=>l(A,f))}catch(A){throw Yo(A,"variance")}}}),K8="quantileSeq",QMe=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],yH=Le(K8,QMe,r=>{var{typed:e,bignumber:t,add:n,subtract:i,divide:a,multiply:s,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:f}=r,A=a3({typed:e,isInteger:u});return e(K8,{"Array | Matrix, number | BigNumber":(w,x)=>p(w,x,!1),"Array | Matrix, number | BigNumber, number":(w,x,b)=>d(w,x,!1,b,p),"Array | Matrix, number | BigNumber, boolean":p,"Array | Matrix, number | BigNumber, boolean, number":(w,x,b,C)=>d(w,x,b,C,p),"Array | Matrix, Array | Matrix":(w,x)=>y(w,x,!1),"Array | Matrix, Array | Matrix, number":(w,x,b)=>d(w,x,!1,b,y),"Array | Matrix, Array | Matrix, boolean":y,"Array | Matrix, Array | Matrix, boolean, number":(w,x,b,C)=>d(w,x,b,C,y)});function d(w,x,b,C,S){return A(w,C,I=>S(I,x,b))}function p(w,x,b){var C,S=w.valueOf();if(c(x,0))throw new Error("N/prob must be non-negative");if(h(x,1))return an(x)?v(S,x,b):t(v(S,x,b));if(f(x,1)){if(!u(x))throw new Error("N must be a positive integer");if(f(x,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var I=n(x,1);C=[];for(var B=0;c(B,x);B++){var T=a(B+1,I);C.push(v(S,T,b))}return an(x)?C:t(C)}}function y(w,x,b){for(var C=w.valueOf(),S=x.valueOf(),I=[],B=0;B<S.length;++B)I.push(v(C,S[B],b));return I}function v(w,x,b){var C=jn(w),S=C.length;if(S===0)throw new Error("Cannot calculate quantile of an empty sequence");var I=an(x)?x*(S-1):x.times(S-1),B=an(x)?Math.floor(I):I.floor().toNumber(),T=an(x)?I%1:I.minus(B);if(u(I))return b?C[I]:o(C,an(x)?I:I.valueOf());var M,F;if(b)M=C[B],F=C[B+1];else{F=o(C,B+1),M=C[B];for(var N=0;N<B;++N)l(C[N],M)>0&&(M=C[N])}return n(s(M,i(1,T)),s(F,T))}}),V8="std",GMe=["typed","map","sqrt","variance"],xH=Le(V8,GMe,r=>{var{typed:e,map:t,sqrt:n,variance:i}=r;return e(V8,{"Array | Matrix":a,"Array | Matrix, string":a,"Array | Matrix, number | BigNumber":a,"Array | Matrix, number | BigNumber, string":a,"...":function(o){return a(o)}});function a(s,o){if(s.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var l=i.apply(null,arguments);return Su(l)?t(l,n):n(l)}catch(u){throw u instanceof TypeError&&u.message.includes(" variance")?new TypeError(u.message.replace(" variance"," std")):u}}}),W8="corr",HMe=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],zMe=Le(W8,HMe,r=>{var{typed:e,matrix:t,sqrt:n,sum:i,add:a,subtract:s,multiply:o,pow:l,divide:u}=r;return e(W8,{"Array, Array":function(A,d){return c(A,d)},"Matrix, Matrix":function(A,d){var p=c(A.toArray(),d.toArray());return Array.isArray(p)?t(p):p}});function c(f,A){var d=[];if(Array.isArray(f[0])&&Array.isArray(A[0])){if(f.length!==A.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var p=0;p<f.length;p++){if(f[p].length!==A[p].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");d.push(h(f[p],A[p]))}return d}else{if(f.length!==A.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return h(f,A)}}function h(f,A){var d=f.length,p=i(f),y=i(A),v=f.reduce((S,I,B)=>a(S,o(I,A[B])),0),w=i(f.map(S=>l(S,2))),x=i(A.map(S=>l(S,2))),b=s(o(d,v),o(p,y)),C=n(o(s(o(d,w),l(p,2)),s(o(d,x),l(y,2))));return u(b,C)}}),Y8="combinations",qMe=["typed"],jMe=Le(Y8,qMe,r=>{var{typed:e}=r;return e(Y8,{"number, number":vG,"BigNumber, BigNumber":function(n,i){var a=n.constructor,s,o,l=n.minus(i),u=new a(1);if(!X8(n)||!X8(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(n))throw new TypeError("k must be less than n in function combinations");if(s=u,i.lt(l))for(o=u;o.lte(l);o=o.plus(u))s=s.times(i.plus(o)).dividedBy(o);else for(o=u;o.lte(i);o=o.plus(u))s=s.times(l.plus(o)).dividedBy(o);return s}})});function X8(r){return r.isInteger()&&r.gte(0)}var Z8="combinationsWithRep",$Me=["typed"],KMe=Le(Z8,$Me,r=>{var{typed:e}=r;return e(Z8,{"number, number":function(n,i){if(!Sr(n)||n<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!Sr(i)||i<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n<1)throw new TypeError("k must be less than or equal to n + k - 1");if(i<n-1){var a=$h(n,n+i-1);return a/$h(1,i)}var s=$h(i+1,n+i-1);return s/$h(1,n-1)},"BigNumber, BigNumber":function(n,i){var a=n.constructor,s,o,l=new a(1),u=n.minus(l);if(!J8(n)||!J8(i))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n.lt(l))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(s=l,i.lt(u))for(o=l;o.lte(u);o=o.plus(l))s=s.times(i.plus(o)).dividedBy(o);else for(o=l;o.lte(i);o=o.plus(l))s=s.times(u.plus(o)).dividedBy(o);return s}})});function J8(r){return r.isInteger()&&r.gte(0)}var e6="gamma",VMe=["typed","config","multiplyScalar","pow","BigNumber","Complex"],WMe=Le(e6,VMe,r=>{var{typed:e,config:t,multiplyScalar:n,pow:i,BigNumber:a,Complex:s}=r;function o(u){if(u.im===0)return Ow(u.re);if(u.re<.5){var c=new s(1-u.re,-u.im),h=new s(Math.PI*u.re,Math.PI*u.im);return new s(Math.PI).div(h.sin()).div(o(c))}u=new s(u.re-1,u.im);for(var f=new s(Hg[0],0),A=1;A<Hg.length;++A){var d=new s(Hg[A],0);f=f.add(d.div(u.add(A)))}var p=new s(u.re+EG+.5,u.im),y=Math.sqrt(2*Math.PI),v=p.pow(u.add(.5)),w=p.neg().exp();return f.mul(y).mul(v).mul(w)}return e(e6,{number:Ow,Complex:o,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new a(1/0):l(c.minus(1));if(!c.isFinite())return new a(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function l(u){if(u<8)return new a([1,1,2,6,24,120,720,5040][u]);var c=t.precision+(Math.log(u.toNumber())|0),h=a.clone({precision:c});if(u%2===1)return u.times(l(new a(u-1)));for(var f=u,A=new h(u),d=u.toNumber();f>2;)f-=2,d+=f,A=A.times(d);return new a(A.toPrecision(a.precision))}}),t6="lgamma",YMe=["Complex","typed"],XMe=Le(t6,YMe,r=>{var{Complex:e,typed:t}=r,n=7,i=7,a=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return t(t6,{number:Pw,Complex:s,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function s(u){var c=6.283185307179586,h=1.1447298858494002,f=.1;if(u.isNaN())return new e(NaN,NaN);if(u.im===0)return new e(Pw(u.re),0);if(u.re>=n||Math.abs(u.im)>=i)return o(u);if(u.re<=f){var A=Gye(c,u.im)*Math.floor(.5*u.re+.25),d=u.mul(Math.PI).sin().log(),p=s(new e(1-u.re,-u.im));return new e(h,A).sub(d).sub(p)}else return u.im>=0?l(u):l(u.conjugate()).conjugate()}function o(u){for(var c=u.sub(.5).mul(u.log()).sub(u).add(bG),h=new e(1,0).div(u),f=h.div(u),A=a[0],d=a[1],p=2*f.re,y=f.re*f.re+f.im*f.im,v=2;v<8;v++){var w=d;d=-y*A+a[v],A=p*A+w}var x=h.mul(f.mul(A).add(d));return c.add(x)}function l(u){var c=0,h=0,f=u;for(u=u.add(1);u.re<=n;){f=f.mul(u);var A=f.im<0?1:0;A!==0&&h===0&&c++,h=A,u=u.add(1)}return o(u).sub(f.log()).sub(new e(0,c*2*Math.PI*1))}}),r6="factorial",ZMe=["typed","gamma"],JMe=Le(r6,ZMe,r=>{var{typed:e,gamma:t}=r;return e(r6,{number:function(i){if(i<0)throw new Error("Value must be non-negative");return t(i+1)},BigNumber:function(i){if(i.isNegative())throw new Error("Value must be non-negative");return t(i.plus(1))},"Array | Matrix":e.referToSelf(n=>i=>vn(i,n))})}),n6="kldivergence",eLe=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],tLe=Le(n6,eLe,r=>{var{typed:e,matrix:t,divide:n,sum:i,multiply:a,map:s,dotDivide:o,log:l,isNumeric:u}=r;return e(n6,{"Array, Array":function(f,A){return c(t(f),t(A))},"Matrix, Array":function(f,A){return c(f,t(A))},"Array, Matrix":function(f,A){return c(t(f),A)},"Matrix, Matrix":function(f,A){return c(f,A)}});function c(h,f){var A=f.size().length,d=h.size().length;if(A>1)throw new Error("first object must be one dimensional");if(d>1)throw new Error("second object must be one dimensional");if(A!==d)throw new Error("Length of two vectors must be equal");var p=i(h);if(p===0)throw new Error("Sum of elements in first object must be non zero");var y=i(f);if(y===0)throw new Error("Sum of elements in second object must be non zero");var v=n(h,i(h)),w=n(f,i(f)),x=i(a(v,s(o(v,w),b=>l(b))));return u(x)?x:Number.NaN}}),i6="multinomial",rLe=["typed","add","divide","multiply","factorial","isInteger","isPositive"],nLe=Le(i6,rLe,r=>{var{typed:e,add:t,divide:n,multiply:i,factorial:a,isInteger:s,isPositive:o}=r;return e(i6,{"Array | Matrix":function(u){var c=0,h=1;return cf(u,function(f){if(!s(f)||!o(f))throw new TypeError("Positive integer value expected in function multinomial");c=t(c,f),h=i(h,a(f))}),n(a(c),h)}})}),a6="permutations",iLe=["typed","factorial"],aLe=Le(a6,iLe,r=>{var{typed:e,factorial:t}=r;return e(a6,{"number | BigNumber":t,"number, number":function(i,a){if(!Sr(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(!Sr(a)||a<0)throw new TypeError("Positive integer value expected in function permutations");if(a>i)throw new TypeError("second argument k must be less than or equal to first argument n");return $h(i-a+1,i)},"BigNumber, BigNumber":function(i,a){var s,o;if(!s6(i)||!s6(a))throw new TypeError("Positive integer value expected in function permutations");if(a.gt(i))throw new TypeError("second argument k must be less than or equal to first argument n");var l=i.mul(0).add(1);for(s=l,o=i.minus(a).plus(1);o.lte(i);o=o.plus(1))s=s.times(o);return s}})});function s6(r){return r.isInteger()&&r.gte(0)}var f3={exports:{}};f3.exports;(function(r){(function(e,t,n){function i(l){var u=this,c=o();u.next=function(){var h=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=h-(u.c=h|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function a(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function s(l,u){var c=new i(l),h=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,h&&(typeof h=="object"&&a(h,c),f.state=function(){return a(c,{})}),f}function o(){var l=4022871197,u=function(c){c=String(c);for(var h=0;h<c.length;h++){l+=c.charCodeAt(h);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}t&&t.exports?t.exports=s:this.alea=s})(Os,r)})(f3);var sLe=f3.exports,A3={exports:{}};A3.exports;(function(r){(function(e,t,n){function i(o){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function a(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function s(o,l){var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,A=(u.next()>>>0)/4294967296,d=(f+A)/(1<<21);while(d===0);return d},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&a(c,u),h.state=function(){return a(u,{})}),h}t&&t.exports?t.exports=s:this.xor128=s})(Os,r)})(A3);var oLe=A3.exports,d3={exports:{}};d3.exports;(function(r){(function(e,t,n){function i(o){var l=this,u="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function a(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function s(o,l){var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,A=(u.next()>>>0)/4294967296,d=(f+A)/(1<<21);while(d===0);return d},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&a(c,u),h.state=function(){return a(u,{})}),h}t&&t.exports?t.exports=s:this.xorwow=s})(Os,r)})(d3);var lLe=d3.exports,g3={exports:{}};g3.exports;(function(r){(function(e,t,n){function i(o){var l=this;l.next=function(){var c=l.x,h=l.i,f,A;return f=c[h],f^=f>>>7,A=f^f<<24,f=c[h+1&7],A^=f^f>>>10,f=c[h+3&7],A^=f^f>>>3,f=c[h+4&7],A^=f^f<<7,f=c[h+7&7],f=f^f<<13,A^=f^f<<9,c[h]=A,l.i=h+1&7,A};function u(c,h){var f,A=[];if(h===(h|0))A[0]=h;else for(h=""+h,f=0;f<h.length;++f)A[f&7]=A[f&7]<<15^h.charCodeAt(f)+A[f+1&7]<<13;for(;A.length<8;)A.push(0);for(f=0;f<8&&A[f]===0;++f);for(f==8?A[7]=-1:A[f],c.x=A,c.i=0,f=256;f>0;--f)c.next()}u(l,o)}function a(o,l){return l.x=o.x.slice(),l.i=o.i,l}function s(o,l){o==null&&(o=+new Date);var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,A=(u.next()>>>0)/4294967296,d=(f+A)/(1<<21);while(d===0);return d},h.int32=u.next,h.quick=h,c&&(c.x&&a(c,u),h.state=function(){return a(u,{})}),h}t&&t.exports?t.exports=s:this.xorshift7=s})(Os,r)})(g3);var uLe=g3.exports,p3={exports:{}};p3.exports;(function(r){(function(e,t,n){function i(o){var l=this;l.next=function(){var c=l.w,h=l.X,f=l.i,A,d;return l.w=c=c+1640531527|0,d=h[f+34&127],A=h[f=f+1&127],d^=d<<13,A^=A<<17,d^=d>>>15,A^=A>>>12,d=h[f]=d^A,l.i=f,d+(c^c>>>16)|0};function u(c,h){var f,A,d,p,y,v=[],w=128;for(h===(h|0)?(A=h,h=null):(h=h+"\0",A=0,w=Math.max(w,h.length)),d=0,p=-32;p<w;++p)h&&(A^=h.charCodeAt((p+32)%h.length)),p===0&&(y=A),A^=A<<10,A^=A>>>15,A^=A<<4,A^=A>>>13,p>=0&&(y=y+1640531527|0,f=v[p&127]^=A+y,d=f==0?d+1:0);for(d>=128&&(v[(h&&h.length||0)&127]=-1),d=127,p=4*128;p>0;--p)A=v[d+34&127],f=v[d=d+1&127],A^=A<<13,f^=f<<17,A^=A>>>15,f^=f>>>12,v[d]=A^f;c.w=y,c.X=v,c.i=d}u(l,o)}function a(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function s(o,l){o==null&&(o=+new Date);var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,A=(u.next()>>>0)/4294967296,d=(f+A)/(1<<21);while(d===0);return d},h.int32=u.next,h.quick=h,c&&(c.X&&a(c,u),h.state=function(){return a(u,{})}),h}t&&t.exports?t.exports=s:this.xor4096=s})(Os,r)})(p3);var cLe=p3.exports,m3={exports:{}};m3.exports;(function(r){(function(e,t,n){function i(o){var l=this,u="";l.next=function(){var h=l.b,f=l.c,A=l.d,d=l.a;return h=h<<25^h>>>7^f,f=f-A|0,A=A<<24^A>>>8^d,d=d-h|0,l.b=h=h<<20^h>>>12^f,l.c=f=f-A|0,l.d=A<<16^f>>>16^d,l.a=d-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):u+=o;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function a(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function s(o,l){var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,A=(u.next()>>>0)/4294967296,d=(f+A)/(1<<21);while(d===0);return d},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&a(c,u),h.state=function(){return a(u,{})}),h}t&&t.exports?t.exports=s:this.tychei=s})(Os,r)})(m3);var hLe=m3.exports,wH={exports:{}};(function(r){(function(e,t,n){var i=256,a=6,s=52,o="random",l=n.pow(i,a),u=n.pow(2,s),c=u*2,h=i-1,f;function A(b,C,S){var I=[];C=C==!0?{entropy:!0}:C||{};var B=v(y(C.entropy?[b,x(t)]:b??w(),3),I),T=new d(I),M=function(){for(var F=T.g(a),N=l,O=0;F<u;)F=(F+O)*i,N*=i,O=T.g(1);for(;F>=c;)F/=2,N/=2,O>>>=1;return(F+O)/N};return M.int32=function(){return T.g(4)|0},M.quick=function(){return T.g(4)/4294967296},M.double=M,v(x(T.S),t),(C.pass||S||function(F,N,O,L){return L&&(L.S&&p(L,T),F.state=function(){return p(T,{})}),O?(n[o]=F,N):F})(M,B,"global"in C?C.global:this==n,C.state)}function d(b){var C,S=b.length,I=this,B=0,T=I.i=I.j=0,M=I.S=[];for(S||(b=[S++]);B<i;)M[B]=B++;for(B=0;B<i;B++)M[B]=M[T=h&T+b[B%S]+(C=M[B])],M[T]=C;(I.g=function(F){for(var N,O=0,L=I.i,G=I.j,R=I.S;F--;)N=R[L=h&L+1],O=O*i+R[h&(R[L]=R[G=h&G+N])+(R[G]=N)];return I.i=L,I.j=G,O})(i)}function p(b,C){return C.i=b.i,C.j=b.j,C.S=b.S.slice(),C}function y(b,C){var S=[],I=typeof b,B;if(C&&I=="object")for(B in b)try{S.push(y(b[B],C-1))}catch{}return S.length?S:I=="string"?b:b+"\0"}function v(b,C){for(var S=b+"",I,B=0;B<S.length;)C[h&B]=h&(I^=C[h&B]*19)+S.charCodeAt(B++);return x(C)}function w(){try{var b;return f&&(b=f.randomBytes)?b=b(i):(b=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(b)),x(b)}catch{var C=e.navigator,S=C&&C.plugins;return[+new Date,e,S,e.screen,x(t)]}}function x(b){return String.fromCharCode.apply(0,b)}if(v(n.random(),t),r.exports){r.exports=A;try{f=AS}catch{}}else n["seed"+o]=A})(typeof self<"u"?self:Os,[],Math)})(wH);var fLe=wH.exports,ALe=sLe,dLe=oLe,gLe=lLe,pLe=uLe,mLe=cLe,vLe=hLe,h0=fLe;h0.alea=ALe;h0.xor128=dLe;h0.xorwow=gLe;h0.xorshift7=pLe;h0.xor4096=mLe;h0.tychei=vLe;var yLe=h0;const _H=Af(yLe);var xLe=_H(Date.now());function Ap(r){var e;function t(i){e=i===null?xLe:_H(String(i))}t(r);function n(){return e()}return n}var o6="pickRandom",wLe=["typed","config","?on"],_Le=Le(o6,wLe,r=>{var{typed:e,config:t,on:n}=r,i=Ap(t.randomSeed);return n&&n("config",function(s,o){s.randomSeed!==o.randomSeed&&(i=Ap(s.randomSeed))}),e(o6,{"Array | Matrix":function(o){return a(o,{})},"Array | Matrix, Object":function(o,l){return a(o,l)},"Array | Matrix, number":function(o,l){return a(o,{number:l})},"Array | Matrix, Array | Matrix":function(o,l){return a(o,{weights:l})},"Array | Matrix, Array | Matrix, number":function(o,l,u){return a(o,{number:u,weights:l})},"Array | Matrix, number, Array | Matrix":function(o,l,u){return a(o,{number:l,weights:u})}});function a(s,o){var{number:l,weights:u,elementWise:c=!0}=o,h=typeof l>"u";h&&(l=1);var f=Lr(s)?s.create:Lr(u)?u.create:null;s=s.valueOf(),u&&(u=u.valueOf()),c===!0&&(s=jn(s),u=jn(u));var A=0;if(typeof u<"u"){if(u.length!==s.length)throw new Error("Weights must have the same length as possibles");for(var d=0,p=u.length;d<p;d++){if(!an(u[d])||u[d]<0)throw new Error("Weights must be an array of positive numbers");A+=u[d]}}for(var y=s.length,v=[],w;v.length<l;){if(typeof u>"u")w=s[Math.floor(i()*y)];else for(var x=i()*A,b=0,C=s.length;b<C;b++)if(x-=u[b],x<0){w=s[b];break}v.push(w)}return h?v[0]:f?f(v):v}});function v3(r,e){var t=[];if(r=r.slice(0),r.length>1)for(var n=0,i=r.shift();n<i;n++)t.push(v3(r,e));else for(var a=0,s=r.shift();a<s;a++)t.push(e());return t}var l6="random",ELe=["typed","config","?on"],bLe=Le(l6,ELe,r=>{var{typed:e,config:t,on:n}=r,i=Ap(t.randomSeed);return n&&n("config",function(o,l){o.randomSeed!==l.randomSeed&&(i=Ap(o.randomSeed))}),e(l6,{"":()=>s(0,1),number:o=>s(0,o),"number, number":(o,l)=>s(o,l),"Array | Matrix":o=>a(o,0,1),"Array | Matrix, number":(o,l)=>a(o,0,l),"Array | Matrix, number, number":(o,l,u)=>a(o,l,u)});function a(o,l,u){var c=v3(o.valueOf(),()=>s(l,u));return Lr(o)?o.create(c):c}function s(o,l){return o+i()*(l-o)}}),u6="randomInt",CLe=["typed","config","?on"],SLe=Le(u6,CLe,r=>{var{typed:e,config:t,on:n}=r,i=Ap(t.randomSeed);return n&&n("config",function(o,l){o.randomSeed!==l.randomSeed&&(i=Ap(o.randomSeed))}),e(u6,{"":()=>s(0,1),number:o=>s(0,o),"number, number":(o,l)=>s(o,l),"Array | Matrix":o=>a(o,0,1),"Array | Matrix, number":(o,l)=>a(o,0,l),"Array | Matrix, number, number":(o,l,u)=>a(o,l,u)});function a(o,l,u){var c=v3(o.valueOf(),()=>s(l,u));return Lr(o)?o.create(c):c}function s(o,l){return Math.floor(o+i()*(l-o))}}),c6="stirlingS2",BLe=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],TLe=Le(c6,BLe,r=>{var{typed:e,addScalar:t,subtractScalar:n,multiplyScalar:i,divideScalar:a,pow:s,factorial:o,combinations:l,isNegative:u,isInteger:c,number:h,bignumber:f,larger:A}=r,d=[],p=[];return e(c6,{"number | BigNumber, number | BigNumber":function(v,w){if(!c(v)||u(v)||!c(w)||u(w))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(A(w,v))throw new TypeError("k must be less than or equal to n in function stirlingS2");var x=!(an(v)&&an(w)),b=x?p:d,C=x?f:h,S=h(v),I=h(w);if(b[S]&&b[S].length>I)return b[S][I];for(var B=0;B<=S;++B)if(b[B]||(b[B]=[C(B===0?1:0)]),B!==0)for(var T=b[B],M=b[B-1],F=T.length;F<=B&&F<=I;++F)F===B?T[F]=1:T[F]=t(i(C(F),M[F]),M[F-1]);return b[S][I]}})}),h6="bellNumbers",NLe=["typed","addScalar","isNegative","isInteger","stirlingS2"],ILe=Le(h6,NLe,r=>{var{typed:e,addScalar:t,isNegative:n,isInteger:i,stirlingS2:a}=r;return e(h6,{"number | BigNumber":function(o){if(!i(o)||n(o))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var l=0,u=0;u<=o;u++)l=t(l,a(o,u));return l}})}),f6="catalan",FLe=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],MLe=Le(f6,FLe,r=>{var{typed:e,addScalar:t,divideScalar:n,multiplyScalar:i,combinations:a,isNegative:s,isInteger:o}=r;return e(f6,{"number | BigNumber":function(u){if(!o(u)||s(u))throw new TypeError("Non-negative integer value expected in function catalan");return n(a(i(u,2),u),t(u,1))}})}),A6="composition",LLe=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],DLe=Le(A6,LLe,r=>{var{typed:e,addScalar:t,combinations:n,isPositive:i,isNegative:a,isInteger:s,larger:o}=r;return e(A6,{"number | BigNumber, number | BigNumber":function(u,c){if(!s(u)||!i(u)||!s(c)||!i(c))throw new TypeError("Positive integer value expected in function composition");if(o(c,u))throw new TypeError("k must be less than or equal to n in function composition");return n(t(u,-1),t(c,-1))}})}),d6="leafCount",kLe=["parse","typed"],RLe=Le(d6,kLe,r=>{var{parse:e,typed:t}=r;function n(i){var a=0;return i.forEach(s=>{a+=n(s)}),a||1}return t(d6,{Node:function(a){return n(a)}})});function g6(r){return Pn(r)||Ua(r)&&r.isUnary()&&Pn(r.args[0])}function Vw(r){return!!(Pn(r)||(DA(r)||Ua(r))&&r.args.every(Vw)||uf(r)&&Vw(r.content))}function p6(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function NC(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?p6(Object(t),!0).forEach(function(n){as(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):p6(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var OLe="simplifyUtil",PLe=["FunctionNode","OperatorNode","SymbolNode"],y3=Le(OLe,PLe,r=>{var{FunctionNode:e,OperatorNode:t,SymbolNode:n}=r,i=!0,a=!1,s="defaultF",o={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:a,total:i,commutative:a,associative:a},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:a,total:i,commutative:a,associative:a},paren:{trivial:i,total:i,commutative:i,associative:a},defaultF:{trivial:a,total:i,commutative:a,associative:a}},l={divide:{total:a},log:{total:a}},u={subtract:{total:a},abs:{trivial:i},log:{total:i}};function c(x,b){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o,S=s;if(typeof x=="string"?S=x:Ua(x)?S=x.fn.toString():DA(x)?S=x.name:uf(x)&&(S="paren"),vr(C,S)){var I=C[S];if(vr(I,b))return I[b];if(vr(o,S))return o[S][b]}if(vr(C,s)){var B=C[s];return vr(B,b)?B[b]:o[s][b]}if(vr(o,S)){var T=o[S];if(vr(T,b))return T[b]}return o[s][b]}function h(x){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(x,"commutative",b)}function f(x){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(x,"associative",b)}function A(x,b){var C=NC({},x);for(var S in b)vr(x,S)?C[S]=NC(NC({},b[S]),x[S]):C[S]=b[S];return C}function d(x,b){if(!x.args||x.args.length===0)return x;x.args=p(x,b);for(var C=0;C<x.args.length;C++)d(x.args[C],b)}function p(x,b){var C,S=[],I=function B(T){for(var M=0;M<T.args.length;M++){var F=T.args[M];Ua(F)&&C===F.op?B(F):S.push(F)}};return f(x,b)?(C=x.op,I(x),S):x.args}function y(x,b){if(!(!x.args||x.args.length===0)){for(var C=w(x),S=x.args.length,I=0;I<S;I++)y(x.args[I],b);if(S>2&&f(x,b)){for(var B=x.args.pop();x.args.length>0;)B=C([x.args.pop(),B]);x.args=B.args}}}function v(x,b){if(!(!x.args||x.args.length===0)){for(var C=w(x),S=x.args.length,I=0;I<S;I++)v(x.args[I],b);if(S>2&&f(x,b)){for(var B=x.args.shift();x.args.length>0;)B=C([B,x.args.shift()]);x.args=B.args}}}function w(x){return Ua(x)?function(b){try{return new t(x.op,x.fn,b,x.implicit)}catch(C){return console.error(C),[]}}:function(b){return new e(new n(x.name),b)}}return{createMakeNodeFunction:w,hasProperty:c,isCommutative:h,isAssociative:f,mergeContext:A,flatten:d,allChildren:p,unflattenr:y,unflattenl:v,defaultContext:o,realContext:l,positiveContext:u}}),ULe="simplify",QLe=["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","resolve","simplifyConstant","simplifyCore","?fraction","?bignumber","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],GLe=Le(ULe,QLe,r=>{var{config:e,typed:t,parse:n,add:i,subtract:a,multiply:s,divide:o,pow:l,isZero:u,equal:c,resolve:h,simplifyConstant:f,simplifyCore:A,fraction:d,bignumber:p,mathWithTransform:y,matrix:v,AccessorNode:w,ArrayNode:x,ConstantNode:b,FunctionNode:C,IndexNode:S,ObjectNode:I,OperatorNode:B,ParenthesisNode:T,SymbolNode:M}=r,{hasProperty:F,isCommutative:N,isAssociative:O,mergeContext:L,flatten:G,unflattenr:R,unflattenl:U,createMakeNodeFunction:W,defaultContext:Q,realContext:re,positiveContext:oe}=y3({FunctionNode:C,OperatorNode:B,SymbolNode:M});t.addConversion({from:"Object",to:"Map",convert:Gg});var P=t("simplify",{Node:me,"Node, Map":(ne,ae)=>me(ne,!1,ae),"Node, Map, Object":(ne,ae,_e)=>me(ne,!1,ae,_e),"Node, Array":me,"Node, Array, Map":me,"Node, Array, Map, Object":me});t.removeConversion({from:"Object",to:"Map",convert:Gg}),P.defaultContext=Q,P.realContext=re,P.positiveContext=oe;function z(ne){return ne.transform(function(ae,_e,Me){return uf(ae)?z(ae.content):ae})}var K={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};P.rules=[A,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},f,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},f,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function J(ne,ae){var _e={};if(ne.s){var Me=ne.s.split("->");if(Me.length===2)_e.l=Me[0],_e.r=Me[1];else throw SyntaxError("Could not parse rule: "+ne.s)}else _e.l=ne.l,_e.r=ne.r;_e.l=z(n(_e.l)),_e.r=z(n(_e.r));for(var be of["imposeContext","repeat","assuming"])be in ne&&(_e[be]=ne[be]);if(ne.evaluate&&(_e.evaluate=n(ne.evaluate)),O(_e.l,ae)){var Ae=!N(_e.l,ae),pe;Ae&&(pe=le());var Fe=W(_e.l),Ge=le();_e.expanded={},_e.expanded.l=Fe([_e.l,Ge]),G(_e.expanded.l,ae),R(_e.expanded.l,ae),_e.expanded.r=Fe([_e.r,Ge]),Ae&&(_e.expandedNC1={},_e.expandedNC1.l=Fe([pe,_e.l]),_e.expandedNC1.r=Fe([pe,_e.r]),_e.expandedNC2={},_e.expandedNC2.l=Fe([pe,_e.expanded.l]),_e.expandedNC2.r=Fe([pe,_e.expanded.r]))}return _e}function ue(ne,ae){for(var _e=[],Me=0;Me<ne.length;Me++){var be=ne[Me],Ae=void 0,pe=typeof be;switch(pe){case"string":be={s:be};case"object":Ae=J(be,ae);break;case"function":Ae=be;break;default:throw TypeError("Unsupported type of rule: "+pe)}_e.push(Ae)}return _e}var ge=0;function le(){return new M("_p"+ge++)}function me(ne,ae){var _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l1(),Me=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},be=Me.consoleDebug;ae=ue(ae||P.rules,Me.context);var Ae=h(ne,_e);Ae=z(Ae);for(var pe={},Fe=Ae.toString({parenthesis:"all"});!pe[Fe];){pe[Fe]=!0,ge=0;var Ge=Fe;be&&console.log("Working on: ",Fe);for(var Ze=0;Ze<ae.length;Ze++){var He="";if(typeof ae[Ze]=="function"?(Ae=ae[Ze](Ae,Me),be&&(He=ae[Ze].name)):(G(Ae,Me.context),Ae=Be(Ae,ae[Ze],Me.context),be&&(He="".concat(ae[Ze].l.toString()," -> ").concat(ae[Ze].r.toString()))),be){var Je=Ae.toString({parenthesis:"all"});Je!==Ge&&(console.log("Applying",He,"produced",Je),Ge=Je)}U(Ae,Me.context)}Fe=Ae.toString({parenthesis:"all"})}return Ae}function xe(ne,ae,_e){var Me=ne;if(ne)for(var be=0;be<ne.length;++be){var Ae=Be(ne[be],ae,_e);Ae!==ne[be]&&(Me===ne&&(Me=ne.slice()),Me[be]=Ae)}return Me}function Be(ne,ae,_e){if(ae.assuming){for(var Me in ae.assuming)for(var be in ae.assuming[Me])if(F(Me,be,_e)!==ae.assuming[Me][be])return ne}var Ae=L(ae.imposeContext,_e),pe=ne;if(pe instanceof B||pe instanceof C){var Fe=xe(pe.args,ae,_e);Fe!==pe.args&&(pe=pe.clone(),pe.args=Fe)}else if(pe instanceof T){if(pe.content){var Ge=Be(pe.content,ae,_e);Ge!==pe.content&&(pe=new T(Ge))}}else if(pe instanceof x){var Ze=xe(pe.items,ae,_e);Ze!==pe.items&&(pe=new x(Ze))}else if(pe instanceof w){var He=pe.object;pe.object&&(He=Be(pe.object,ae,_e));var Je=pe.index;pe.index&&(Je=Be(pe.index,ae,_e)),(He!==pe.object||Je!==pe.index)&&(pe=new w(He,Je))}else if(pe instanceof S){var Ye=xe(pe.dimensions,ae,_e);Ye!==pe.dimensions&&(pe=new S(Ye))}else if(pe instanceof I){var Ke=!1,mt={};for(var vt in pe.properties)mt[vt]=Be(pe.properties[vt],ae,_e),mt[vt]!==pe.properties[vt]&&(Ke=!0);Ke&&(pe=new I(mt))}var Dt=ae.r,yt=Z(ae.l,pe,Ae)[0];if(!yt&&ae.expanded&&(Dt=ae.expanded.r,yt=Z(ae.expanded.l,pe,Ae)[0]),!yt&&ae.expandedNC1&&(Dt=ae.expandedNC1.r,yt=Z(ae.expandedNC1.l,pe,Ae)[0],yt||(Dt=ae.expandedNC2.r,yt=Z(ae.expandedNC2.l,pe,Ae)[0])),yt){var Ar=pe.implicit;pe=Dt.clone(),Ar&&"implicit"in Dt&&(pe.implicit=!0),pe=pe.transform(function(ce){return ce.isSymbolNode&&vr(yt.placeholders,ce.name)?yt.placeholders[ce.name].clone():ce})}return ae.repeat&&pe!==ne&&(pe=Be(pe,ae,_e)),pe}function Y(ne,ae){var _e=[],Me,be,Ae=W(ne);if(N(ne,ae))for(var pe=0;pe<ne.args.length;pe++)be=ne.args.slice(0),be.splice(pe,1),Me=be.length===1?be[0]:Ae(be),_e.push(Ae([ne.args[pe],Me]));else for(var Fe=1;Fe<ne.args.length;Fe++){var Ge=ne.args[0];Fe>1&&(Ge=Ae(ne.args.slice(0,Fe))),be=ne.args.slice(Fe),Me=be.length===1?be[0]:Ae(be),_e.push(Ae([Ge,Me]))}return _e}function Ve(ne,ae){var _e={placeholders:{}};if(!ne.placeholders&&!ae.placeholders)return _e;if(ne.placeholders){if(!ae.placeholders)return ne}else return ae;for(var Me in ne.placeholders)if(vr(ne.placeholders,Me)&&(_e.placeholders[Me]=ne.placeholders[Me],vr(ae.placeholders,Me)&&!he(ne.placeholders[Me],ae.placeholders[Me])))return null;for(var be in ae.placeholders)vr(ae.placeholders,be)&&(_e.placeholders[be]=ae.placeholders[be]);return _e}function te(ne,ae){var _e=[];if(ne.length===0||ae.length===0)return _e;for(var Me,be=0;be<ne.length;be++)for(var Ae=0;Ae<ae.length;Ae++)Me=Ve(ne[be],ae[Ae]),Me&&_e.push(Me);return _e}function se(ne){if(ne.length===0)return ne;for(var ae=ne.reduce(te),_e=[],Me={},be=0;be<ae.length;be++){var Ae=JSON.stringify(ae[be]);Me[Ae]||(Me[Ae]=!0,_e.push(ae[be]))}return _e}function Z(ne,ae,_e,Me){var be=[{placeholders:{}}];if(ne instanceof B&&ae instanceof B||ne instanceof C&&ae instanceof C){if(ne instanceof B){if(ne.op!==ae.op||ne.fn!==ae.fn)return[]}else if(ne instanceof C&&ne.name!==ae.name)return[];if(ae.args.length===1&&ne.args.length===1||!O(ae,_e)&&ae.args.length===ne.args.length||Me){for(var Ae=[],pe=0;pe<ne.args.length;pe++){var Fe=Z(ne.args[pe],ae.args[pe],_e);if(Fe.length===0)break;Ae.push(Fe)}if(Ae.length!==ne.args.length){if(!N(ae,_e)||ne.args.length===1)return[];if(ne.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var Ge=Z(ne.args[0],ae.args[1],_e);if(Ge.length===0)return[];var Ze=Z(ne.args[1],ae.args[0],_e);if(Ze.length===0)return[];Ae=[Ge,Ze]}be=se(Ae)}else if(ae.args.length>=2&&ne.args.length===2){for(var He=Y(ae,_e),Je=[],Ye=0;Ye<He.length;Ye++){var Ke=Z(ne,He[Ye],_e,!0);Je=Je.concat(Ke)}return Je}else{if(ne.args.length>2)throw Error("Unexpected non-binary associative function: "+ne.toString());return[]}}else if(ne instanceof M){if(ne.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(K[ne.name]){if(ne.name!==ae.name)return[]}else switch(ne.name[1]>="a"&&ne.name[1]<="z"?ne.name.substring(0,2):ne.name[0]){case"n":case"_p":be[0].placeholders[ne.name]=ae;break;case"c":case"cl":if(Pn(ae))be[0].placeholders[ne.name]=ae;else return[];break;case"v":if(!Pn(ae))be[0].placeholders[ne.name]=ae;else return[];break;case"vl":if(Cs(ae))be[0].placeholders[ne.name]=ae;else return[];break;case"cd":if(g6(ae))be[0].placeholders[ne.name]=ae;else return[];break;case"vd":if(!g6(ae))be[0].placeholders[ne.name]=ae;else return[];break;case"ce":if(Vw(ae))be[0].placeholders[ne.name]=ae;else return[];break;case"ve":if(!Vw(ae))be[0].placeholders[ne.name]=ae;else return[];break;default:throw new Error("Invalid symbol in rule: "+ne.name)}}else if(ne instanceof b){if(!c(ne.value,ae.value))return[]}else return[];return be}function he(ne,ae){if(ne instanceof b&&ae instanceof b){if(!c(ne.value,ae.value))return!1}else if(ne instanceof M&&ae instanceof M){if(ne.name!==ae.name)return!1}else if(ne instanceof B&&ae instanceof B||ne instanceof C&&ae instanceof C){if(ne instanceof B){if(ne.op!==ae.op||ne.fn!==ae.fn)return!1}else if(ne instanceof C&&ne.name!==ae.name)return!1;if(ne.args.length!==ae.args.length)return!1;for(var _e=0;_e<ne.args.length;_e++)if(!he(ne.args[_e],ae.args[_e]))return!1}else return!1;return!0}return P}),HLe="simplifyConstant",zLe=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],qLe=Le(HLe,zLe,r=>{var{typed:e,config:t,mathWithTransform:n,matrix:i,fraction:a,bignumber:s,AccessorNode:o,ArrayNode:l,ConstantNode:u,FunctionNode:c,IndexNode:h,ObjectNode:f,OperatorNode:A,SymbolNode:d}=r,{isCommutative:p,isAssociative:y,allChildren:v,createMakeNodeFunction:w}=y3({FunctionNode:c,OperatorNode:A,SymbolNode:d}),x=e("simplifyConstant",{Node:G=>I(L(G,{})),"Node, Object":function(R,U){return I(L(R,U))}});function b(G){return O1(G)?G.valueOf():G instanceof Array?G.map(b):Lr(G)?i(b(G.valueOf())):G}function C(G,R,U){try{return n[G].apply(null,R)}catch{return R=R.map(b),T(n[G].apply(null,R),U)}}var S=e({Fraction:F,number:function(R){return R<0?M(new u(-R)):new u(R)},BigNumber:function(R){return R<0?M(new u(-R)):new u(R)},Complex:function(R){throw new Error("Cannot convert Complex number to Node")},string:function(R){return new u(R)},Matrix:function(R){return new l(R.valueOf().map(U=>S(U)))}});function I(G){return mi(G)?G:S(G)}function B(G,R){var U=R&&R.exactFractions!==!1;if(U&&isFinite(G)&&a){var W=a(G),Q=R&&typeof R.fractionsLimit=="number"?R.fractionsLimit:1/0;if(W.valueOf()===G&&W.n<Q&&W.d<Q)return W}return G}var T=e({"string, Object":function(R,U){if(t.number==="BigNumber")return s===void 0&&l3(),s(R);if(t.number==="Fraction")return a===void 0&&eH(),a(R);var W=parseFloat(R);return B(W,U)},"Fraction, Object":function(R,U){return R},"BigNumber, Object":function(R,U){return R},"number, Object":function(R,U){return B(R,U)},"Complex, Object":function(R,U){return R.im!==0?R:B(R.re,U)},"Matrix, Object":function(R,U){return i(B(R.valueOf()))},"Array, Object":function(R,U){return R.map(B)}});function M(G){return new A("-","unaryMinus",[G])}function F(G){var R,U=G.s*G.n;return U<0?R=new A("-","unaryMinus",[new u(-U)]):R=new u(U),G.d===1?R:new A("/","divide",[R,new u(G.d)])}function N(G,R,U){if(!Mp(R))return new o(I(G),I(R));if(mu(G)||Lr(G)){for(var W=Array.from(R.dimensions);W.length>0;)if(Pn(W[0])&&typeof W[0].value!="string"){var Q=T(W.shift().value,U);mu(G)?G=G.items[Q-1]:(G=G.valueOf()[Q-1],G instanceof Array&&(G=i(G)))}else if(W.length>1&&Pn(W[1])&&typeof W[1].value!="string"){var re=T(W[1].value,U),oe=[],P=mu(G)?G.items:G.valueOf();for(var z of P)if(mu(z))oe.push(z.items[re-1]);else if(Lr(G))oe.push(z[re-1]);else break;if(oe.length===P.length)mu(G)?G=new l(oe):G=i(oe),W.splice(1,1);else break}else break;return W.length===R.dimensions.length?new o(I(G),R):W.length>0?(R=new h(W),new o(I(G),R)):G}if(K_(G)&&R.dimensions.length===1&&Pn(R.dimensions[0])){var K=R.dimensions[0].value;return K in G.properties?G.properties[K]:new u}return new o(I(G),R)}function O(G,R,U,W){var Q=R.shift(),re=R.reduce((oe,P)=>{if(!mi(P)){var z=oe.pop();if(mi(z))return[z,P];try{return oe.push(C(G,[z,P],W)),oe}catch{oe.push(z)}}oe.push(I(oe.pop()));var K=oe.length===1?oe[0]:U(oe);return[U([K,I(P)])]},[Q]);return re.length===1?re[0]:U([re[0],S(re[1])])}function L(G,R){switch(G.type){case"SymbolNode":return G;case"ConstantNode":switch(typeof G.value){case"number":return T(G.value,R);case"string":return G.value;default:if(!isNaN(G.value))return T(G.value,R)}return G;case"FunctionNode":if(n[G.name]&&n[G.name].rawArgs)return G;{var U=["add","multiply"];if(!U.includes(G.name)){var W=G.args.map(Be=>L(Be,R));if(!W.some(mi))try{return C(G.name,W,R)}catch{}if(G.name==="size"&&W.length===1&&mu(W[0])){for(var Q=[],re=W[0];mu(re);)Q.push(re.items.length),re=re.items[0];return i(Q)}return new c(G.name,W.map(I))}}case"OperatorNode":{var oe=G.fn.toString(),P,z,K=w(G);if(Ua(G)&&G.isUnary())P=[L(G.args[0],R)],mi(P[0])?z=K(P):z=C(oe,P,R);else if(y(G,R.context))if(P=v(G,R.context),P=P.map(Be=>L(Be,R)),p(oe,R.context)){for(var J=[],ue=[],ge=0;ge<P.length;ge++)mi(P[ge])?ue.push(P[ge]):J.push(P[ge]);J.length>1?(z=O(oe,J,K,R),ue.unshift(z),z=O(oe,ue,K,R)):z=O(oe,P,K,R)}else z=O(oe,P,K,R);else P=G.args.map(Be=>L(Be,R)),z=O(oe,P,K,R);return z}case"ParenthesisNode":return L(G.content,R);case"AccessorNode":return N(L(G.object,R),L(G.index,R),R);case"ArrayNode":{var le=G.items.map(Be=>L(Be,R));return le.some(mi)?new l(le.map(I)):i(le)}case"IndexNode":return new h(G.dimensions.map(Be=>x(Be,R)));case"ObjectNode":{var me={};for(var xe in G.properties)me[xe]=x(G.properties[xe],R);return new f(me)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(G.type))}}return x}),m6="simplifyCore",jLe=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],$Le=Le(m6,jLe,r=>{var{typed:e,parse:t,equal:n,isZero:i,add:a,subtract:s,multiply:o,divide:l,pow:u,AccessorNode:c,ArrayNode:h,ConstantNode:f,FunctionNode:A,IndexNode:d,ObjectNode:p,OperatorNode:y,ParenthesisNode:v,SymbolNode:w}=r,x=new f(0),b=new f(1),C=new f(!0),S=new f(!1);function I(F){return Ua(F)&&["and","not","or"].includes(F.op)}var{hasProperty:B,isCommutative:T}=y3({FunctionNode:A,OperatorNode:y,SymbolNode:w});function M(F){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=N?N.context:void 0;if(B(F,"trivial",O)){if(DA(F)&&F.args.length===1)return M(F.args[0],N);var L=!1,G=0;if(F.forEach(ue=>{++G,G===1&&(L=M(ue,N))}),G===1)return L}var R=F;if(DA(R)){var U=Z4e(R.name);if(U){if(R.args.length>2&&B(R,"associative",O))for(;R.args.length>2;){var W=R.args.pop(),Q=R.args.pop();R.args.push(new y(U,R.name,[W,Q]))}R=new y(U,R.name,R.args)}else return new A(M(R.fn),R.args.map(ue=>M(ue,N)))}if(Ua(R)&&R.isUnary()){var re=M(R.args[0],N);if(R.op==="~"&&Ua(re)&&re.isUnary()&&re.op==="~"||R.op==="not"&&Ua(re)&&re.isUnary()&&re.op==="not"&&I(re.args[0]))return re.args[0];var oe=!0;if(R.op==="-"&&Ua(re)&&(re.isBinary()&&re.fn==="subtract"&&(R=new y("-","subtract",[re.args[1],re.args[0]]),oe=!1),re.isUnary()&&re.op==="-"))return re.args[0];if(oe)return new y(R.op,R.fn,[re])}if(Ua(R)&&R.isBinary()){var P=M(R.args[0],N),z=M(R.args[1],N);if(R.op==="+"){if(Pn(P)&&i(P.value))return z;if(Pn(z)&&i(z.value))return P;Ua(z)&&z.isUnary()&&z.op==="-"&&(z=z.args[0],R=new y("-","subtract",[P,z]))}if(R.op==="-")return Ua(z)&&z.isUnary()&&z.op==="-"?M(new y("+","add",[P,z.args[0]]),N):Pn(P)&&i(P.value)?M(new y("-","unaryMinus",[z])):Pn(z)&&i(z.value)?P:new y(R.op,R.fn,[P,z]);if(R.op==="*"){if(Pn(P)){if(i(P.value))return x;if(n(P.value,1))return z}if(Pn(z)){if(i(z.value))return x;if(n(z.value,1))return P;if(T(R,O))return new y(R.op,R.fn,[z,P],R.implicit)}return new y(R.op,R.fn,[P,z],R.implicit)}if(R.op==="/")return Pn(P)&&i(P.value)?x:Pn(z)&&n(z.value,1)?P:new y(R.op,R.fn,[P,z]);if(R.op==="^"&&Pn(z)){if(i(z.value))return b;if(n(z.value,1))return P}if(R.op==="and"){if(Pn(P))if(P.value){if(I(z))return z;if(Pn(z))return z.value?C:S}else return S;if(Pn(z))if(z.value){if(I(P))return P}else return S}if(R.op==="or"){if(Pn(P)){if(P.value)return C;if(I(z))return z}if(Pn(z)){if(z.value)return C;if(I(P))return P}}return new y(R.op,R.fn,[P,z])}if(Ua(R))return new y(R.op,R.fn,R.args.map(ue=>M(ue,N)));if(mu(R))return new h(R.items.map(ue=>M(ue,N)));if(Kd(R))return new c(M(R.object,N),M(R.index,N));if(Mp(R))return new d(R.dimensions.map(ue=>M(ue,N)));if(K_(R)){var K={};for(var J in R.properties)K[J]=M(R.properties[J],N);return new p(K)}return R}return e(m6,{Node:M,"Node,Object":M})}),KLe="resolve",VLe=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],WLe=Le(KLe,VLe,r=>{var{typed:e,parse:t,ConstantNode:n,FunctionNode:i,OperatorNode:a,ParenthesisNode:s}=r;function o(l,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!u)return l;if(Cs(l)){if(c.has(l.name)){var h=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(h,"}"))}var f=u.get(l.name);if(mi(f)){var A=new Set(c);return A.add(l.name),o(f,u,A)}else return typeof f=="number"?t(String(f)):f!==void 0?new n(f):l}else if(Ua(l)){var d=l.args.map(function(y){return o(y,u,c)});return new a(l.op,l.fn,d,l.implicit)}else{if(uf(l))return new s(o(l.content,u,c));if(DA(l)){var p=l.args.map(function(y){return o(y,u,c)});return new i(l.name,p)}}return l.map(y=>o(y,u,c))}return e("resolve",{Node:o,"Node, Map | null | undefined":o,"Node, Object":(l,u)=>o(l,Gg(u)),"Array | Matrix":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array | Matrix, null | undefined":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array, Object":e.referTo("Array,Map",l=>(u,c)=>l(u,Gg(c))),"Matrix, Object":e.referTo("Matrix,Map",l=>(u,c)=>l(u,Gg(c))),"Array | Matrix, Map":e.referToSelf(l=>(u,c)=>u.map(h=>l(h,c)))})}),v6="symbolicEqual",YLe=["parse","simplify","typed","OperatorNode"],XLe=Le(v6,YLe,r=>{var{parse:e,simplify:t,typed:n,OperatorNode:i}=r;function a(s,o){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=new i("-","subtract",[s,o]),c=t(u,{},l);return Pn(c)&&!c.value}return n(v6,{"Node, Node":a,"Node, Node, Object":a})}),y6="derivative",ZLe=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],JLe=Le(y6,ZLe,r=>{var{typed:e,config:t,parse:n,simplify:i,equal:a,isZero:s,numeric:o,ConstantNode:l,FunctionNode:u,OperatorNode:c,ParenthesisNode:h,SymbolNode:f}=r;function A(x,b){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},S={};y(S,x,b.name);var I=v(x,S);return C.simplify?i(I):I}e.addConversion({from:"identifier",to:"SymbolNode",convert:n});var d=e(y6,{"Node, SymbolNode":A,"Node, SymbolNode, Object":A});e.removeConversion({from:"identifier",to:"SymbolNode",convert:n}),d._simplify=!0,d.toTex=function(x){return p.apply(null,x.args)};var p=e("_derivTex",{"Node, SymbolNode":function(b,C){return Pn(b)&&Si(b.value)==="string"?p(n(b.value).toString(),C.toString(),1):p(b.toTex(),C.toString(),1)},"Node, ConstantNode":function(b,C){if(Si(C.value)==="string")return p(b,n(C.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(b,C,S){return p(b.toString(),C.name,S.value)},"string, string, number":function(b,C,S){var I;return S===1?I="{d\\over d"+C+"}":I="{d^{"+S+"}\\over d"+C+"^{"+S+"}}",I+"\\left[".concat(b,"\\right]")}}),y=e("constTag",{"Object, ConstantNode, string":function(b,C){return b[C]=!0,!0},"Object, SymbolNode, string":function(b,C,S){return C.name!==S?(b[C]=!0,!0):!1},"Object, ParenthesisNode, string":function(b,C,S){return y(b,C.content,S)},"Object, FunctionAssignmentNode, string":function(b,C,S){return C.params.includes(S)?y(b,C.expr,S):(b[C]=!0,!0)},"Object, FunctionNode | OperatorNode, string":function(b,C,S){if(C.args.length>0){for(var I=y(b,C.args[0],S),B=1;B<C.args.length;++B)I=y(b,C.args[B],S)&&I;if(I)return b[C]=!0,!0}return!1}}),v=e("_derivative",{"ConstantNode, Object":function(b){return w(0)},"SymbolNode, Object":function(b,C){return C[b]!==void 0?w(0):w(1)},"ParenthesisNode, Object":function(b,C){return new h(v(b.content,C))},"FunctionAssignmentNode, Object":function(b,C){return C[b]!==void 0?w(0):v(b.expr,C)},"FunctionNode, Object":function(b,C){if(C[b]!==void 0)return w(0);var S=b.args[0],I,B=!1,T=!1,M;switch(b.name){case"cbrt":B=!0,M=new c("*","multiply",[w(3),new c("^","pow",[S,new c("/","divide",[w(2),w(3)])])]);break;case"sqrt":case"nthRoot":if(b.args.length===1)B=!0,M=new c("*","multiply",[w(2),new u("sqrt",[S])]);else if(b.args.length===2)return I=new c("/","divide",[w(1),b.args[1]]),C[I]=C[b.args[1]],v(new c("^","pow",[S,I]),C);break;case"log10":I=w(10);case"log":if(!I&&b.args.length===1)M=S.clone(),B=!0;else if(b.args.length===1&&I||b.args.length===2&&C[b.args[1]]!==void 0)M=new c("*","multiply",[S.clone(),new u("log",[I||b.args[1]])]),B=!0;else if(b.args.length===2)return v(new c("/","divide",[new u("log",[S]),new u("log",[b.args[1]])]),C);break;case"pow":if(b.args.length===2)return C[I]=C[b.args[1]],v(new c("^","pow",[S,b.args[1]]),C);break;case"exp":M=new u("exp",[S.clone()]);break;case"sin":M=new u("cos",[S.clone()]);break;case"cos":M=new c("-","unaryMinus",[new u("sin",[S.clone()])]);break;case"tan":M=new c("^","pow",[new u("sec",[S.clone()]),w(2)]);break;case"sec":M=new c("*","multiply",[b,new u("tan",[S.clone()])]);break;case"csc":T=!0,M=new c("*","multiply",[b,new u("cot",[S.clone()])]);break;case"cot":T=!0,M=new c("^","pow",[new u("csc",[S.clone()]),w(2)]);break;case"asin":B=!0,M=new u("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[S.clone(),w(2)])])]);break;case"acos":B=!0,T=!0,M=new u("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[S.clone(),w(2)])])]);break;case"atan":B=!0,M=new c("+","add",[new c("^","pow",[S.clone(),w(2)]),w(1)]);break;case"asec":B=!0,M=new c("*","multiply",[new u("abs",[S.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[S.clone(),w(2)]),w(1)])])]);break;case"acsc":B=!0,T=!0,M=new c("*","multiply",[new u("abs",[S.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[S.clone(),w(2)]),w(1)])])]);break;case"acot":B=!0,T=!0,M=new c("+","add",[new c("^","pow",[S.clone(),w(2)]),w(1)]);break;case"sinh":M=new u("cosh",[S.clone()]);break;case"cosh":M=new u("sinh",[S.clone()]);break;case"tanh":M=new c("^","pow",[new u("sech",[S.clone()]),w(2)]);break;case"sech":T=!0,M=new c("*","multiply",[b,new u("tanh",[S.clone()])]);break;case"csch":T=!0,M=new c("*","multiply",[b,new u("coth",[S.clone()])]);break;case"coth":T=!0,M=new c("^","pow",[new u("csch",[S.clone()]),w(2)]);break;case"asinh":B=!0,M=new u("sqrt",[new c("+","add",[new c("^","pow",[S.clone(),w(2)]),w(1)])]);break;case"acosh":B=!0,M=new u("sqrt",[new c("-","subtract",[new c("^","pow",[S.clone(),w(2)]),w(1)])]);break;case"atanh":B=!0,M=new c("-","subtract",[w(1),new c("^","pow",[S.clone(),w(2)])]);break;case"asech":B=!0,T=!0,M=new c("*","multiply",[S.clone(),new u("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[S.clone(),w(2)])])])]);break;case"acsch":B=!0,T=!0,M=new c("*","multiply",[new u("abs",[S.clone()]),new u("sqrt",[new c("+","add",[new c("^","pow",[S.clone(),w(2)]),w(1)])])]);break;case"acoth":B=!0,T=!0,M=new c("-","subtract",[w(1),new c("^","pow",[S.clone(),w(2)])]);break;case"abs":M=new c("/","divide",[new u(new f("abs"),[S.clone()]),S.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+b.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var F,N;B?(F="/",N="divide"):(F="*",N="multiply");var O=v(S,C);return T&&(O=new c("-","unaryMinus",[O])),new c(F,N,[O,M])},"OperatorNode, Object":function(b,C){if(C[b]!==void 0)return w(0);if(b.op==="+")return new c(b.op,b.fn,b.args.map(function(G){return v(G,C)}));if(b.op==="-"){if(b.isUnary())return new c(b.op,b.fn,[v(b.args[0],C)]);if(b.isBinary())return new c(b.op,b.fn,[v(b.args[0],C),v(b.args[1],C)])}if(b.op==="*"){var S=b.args.filter(function(G){return C[G]!==void 0});if(S.length>0){var I=b.args.filter(function(G){return C[G]===void 0}),B=I.length===1?I[0]:new c("*","multiply",I),T=S.concat(v(B,C));return new c("*","multiply",T)}return new c("+","add",b.args.map(function(G){return new c("*","multiply",b.args.map(function(R){return R===G?v(R,C):R.clone()}))}))}if(b.op==="/"&&b.isBinary()){var M=b.args[0],F=b.args[1];return C[F]!==void 0?new c("/","divide",[v(M,C),F]):C[M]!==void 0?new c("*","multiply",[new c("-","unaryMinus",[M]),new c("/","divide",[v(F,C),new c("^","pow",[F.clone(),w(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[v(M,C),F.clone()]),new c("*","multiply",[M.clone(),v(F,C)])]),new c("^","pow",[F.clone(),w(2)])])}if(b.op==="^"&&b.isBinary()){var N=b.args[0],O=b.args[1];if(C[N]!==void 0)return Pn(N)&&(s(N.value)||a(N.value,1))?w(0):new c("*","multiply",[b,new c("*","multiply",[new u("log",[N.clone()]),v(O.clone(),C)])]);if(C[O]!==void 0){if(Pn(O)){if(s(O.value))return w(0);if(a(O.value,1))return v(N,C)}var L=new c("^","pow",[N.clone(),new c("-","subtract",[O,w(1)])]);return new c("*","multiply",[O.clone(),new c("*","multiply",[v(N,C),L])])}return new c("*","multiply",[new c("^","pow",[N.clone(),O.clone()]),new c("+","add",[new c("*","multiply",[v(N,C),new c("/","divide",[O.clone(),N.clone()])]),new c("*","multiply",[v(O,C),new u("log",[N.clone()])])])])}throw new Error('Cannot process operator "'+b.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function w(x,b){return new l(o(x,t.number))}return d}),x6="rationalize",eDe=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],tDe=Le(x6,eDe,r=>{var{config:e,typed:t,equal:n,isZero:i,add:a,subtract:s,multiply:o,divide:l,pow:u,parse:c,simplifyConstant:h,simplifyCore:f,simplify:A,fraction:d,bignumber:p,mathWithTransform:y,matrix:v,AccessorNode:w,ArrayNode:x,ConstantNode:b,FunctionNode:C,IndexNode:S,ObjectNode:I,OperatorNode:B,SymbolNode:T,ParenthesisNode:M}=r;function F(R){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Q=O(),re=N(R,U,!0,Q.firstRules),oe=re.variables.length,P={exactFractions:!1},z={exactFractions:!0};if(R=re.expression,oe>=1){R=L(R);var K,J,ue=!0,ge=!1;R=A(R,Q.firstRules,{},P);for(var le;J=ue?Q.distrDivRules:Q.sucDivRules,R=A(R,J,{},z),ue=!ue,le=R.toString(),le!==K;)ge=!0,K=le;ge&&(R=A(R,Q.firstRulesAgain,{},P)),R=A(R,Q.finalRules,{},P)}var me=[],xe={};return R.type==="OperatorNode"&&R.isBinary()&&R.op==="/"?(oe===1&&(R.args[0]=G(R.args[0],me),R.args[1]=G(R.args[1])),W&&(xe.numerator=R.args[0],xe.denominator=R.args[1])):(oe===1&&(R=G(R,me)),W&&(xe.numerator=R,xe.denominator=null)),W?(xe.coefficients=me,xe.variables=re.variables,xe.expression=R,xe):R}return t(x6,{Node:F,"Node, boolean":(R,U)=>F(R,{},U),"Node, Object":F,"Node, Object, boolean":F});function N(R,U,W,Q){var re=[],oe=A(R,Q,U,{exactFractions:!1});W=!!W;var P="+-*"+(W?"/":"");K(oe);var z={};return z.expression=oe,z.variables=re,z;function K(J){var ue=J.type;if(ue==="FunctionNode")throw new Error("There is an unsolved function call");if(ue==="OperatorNode")if(J.op==="^"){if(J.args[1].type!=="ConstantNode"||!Sr(parseFloat(J.args[1].value)))throw new Error("There is a non-integer exponent");K(J.args[0])}else{if(!P.includes(J.op))throw new Error("Operator "+J.op+" invalid in polynomial expression");for(var ge=0;ge<J.args.length;ge++)K(J.args[ge])}else if(ue==="SymbolNode"){var le=J.name,me=re.indexOf(le);me===-1&&re.push(le)}else if(ue==="ParenthesisNode")K(J.content);else if(ue!=="ConstantNode")throw new Error("type "+ue+" is not allowed in polynomial expression")}}function O(){var R=[f,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},h,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],U=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],W=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],Q=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],re={};return re.firstRules=R.concat(U,Q),re.distrDivRules=W,re.sucDivRules=Q,re.firstRulesAgain=R.concat(U),re.finalRules=[f,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},h,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],re}function L(R,U,W){var Q=R.type,re=arguments.length>1;if(Q==="OperatorNode"&&R.isBinary()){var oe=!1,P;if(R.op==="^"&&(R.args[0].type==="ParenthesisNode"||R.args[0].type==="OperatorNode")&&R.args[1].type==="ConstantNode"&&(P=parseFloat(R.args[1].value),oe=P>=2&&Sr(P)),oe){if(P>2){var z=R.args[0],K=new B("^","pow",[R.args[0].cloneDeep(),new b(P-1)]);R=new B("*","multiply",[z,K])}else R=new B("*","multiply",[R.args[0],R.args[0].cloneDeep()]);re&&(W==="content"?U.content=R:U.args[W]=R)}}if(Q==="ParenthesisNode")L(R.content,R,"content");else if(Q!=="ConstantNode"&&Q!=="SymbolNode")for(var J=0;J<R.args.length;J++)L(R.args[J],R,J);if(!re)return R}function G(R,U){U===void 0&&(U=[]),U[0]=0;var W={};W.cte=1,W.oper="+",W.fire="";var Q=0,re="";le(R,null,W),Q=U.length-1;for(var oe=!0,P,z=Q;z>=0;z--)if(U[z]!==0){var K=new b(oe?U[z]:Math.abs(U[z])),J=U[z]<0?"-":"+";if(z>0){var ue=new T(re);if(z>1){var ge=new b(z);ue=new B("^","pow",[ue,ge])}U[z]===-1&&oe?K=new B("-","unaryMinus",[ue]):Math.abs(U[z])===1?K=ue:K=new B("*","multiply",[K,ue])}oe?P=K:J==="+"?P=new B("+","add",[P,K]):P=new B("-","subtract",[P,K]),oe=!1}if(oe)return new b(0);return P;function le(me,xe,Be){var Y=me.type;if(Y==="FunctionNode")throw new Error("There is an unsolved function call");if(Y==="OperatorNode"){if(!"+-*^".includes(me.op))throw new Error("Operator "+me.op+" invalid");if(xe!==null){if((me.fn==="unaryMinus"||me.fn==="pow")&&xe.fn!=="add"&&xe.fn!=="subtract"&&xe.fn!=="multiply")throw new Error("Invalid "+me.op+" placing");if((me.fn==="subtract"||me.fn==="add"||me.fn==="multiply")&&xe.fn!=="add"&&xe.fn!=="subtract")throw new Error("Invalid "+me.op+" placing");if((me.fn==="subtract"||me.fn==="add"||me.fn==="unaryMinus")&&Be.noFil!==0)throw new Error("Invalid "+me.op+" placing")}(me.op==="^"||me.op==="*")&&(Be.fire=me.op);for(var Ve=0;Ve<me.args.length;Ve++)me.fn==="unaryMinus"&&(Be.oper="-"),(me.op==="+"||me.fn==="subtract")&&(Be.fire="",Be.cte=1,Be.oper=Ve===0?"+":me.op),Be.noFil=Ve,le(me.args[Ve],me,Be)}else if(Y==="SymbolNode"){if(me.name!==re&&re!=="")throw new Error("There is more than one variable");if(re=me.name,xe===null){U[1]=1;return}if(xe.op==="^"&&Be.noFil!==0)throw new Error("In power the variable should be the first parameter");if(xe.op==="*"&&Be.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(Be.fire===""||Be.fire==="*")&&(Q<1&&(U[1]=0),U[1]+=Be.cte*(Be.oper==="+"?1:-1),Q=Math.max(1,Q))}else if(Y==="ConstantNode"){var te=parseFloat(me.value);if(xe===null){U[0]=te;return}if(xe.op==="^"){if(Be.noFil!==1)throw new Error("Constant cannot be powered");if(!Sr(te)||te<=0)throw new Error("Non-integer exponent is not allowed");for(var se=Q+1;se<te;se++)U[se]=0;te>Q&&(U[te]=0),U[te]+=Be.cte*(Be.oper==="+"?1:-1),Q=Math.max(te,Q);return}Be.cte=te,Be.fire===""&&(U[0]+=Be.cte*(Be.oper==="+"?1:-1))}else throw new Error("Type "+Y+" is not allowed")}}}),w6="zpk2tf",rDe=["typed","add","multiply","Complex","number"],nDe=Le(w6,rDe,r=>{var{typed:e,add:t,multiply:n,Complex:i,number:a}=r;return e(w6,{"Array,Array,number":function(u,c,h){return s(u,c,h)},"Array,Array":function(u,c){return s(u,c,1)},"Matrix,Matrix,number":function(u,c,h){return s(u.valueOf(),c.valueOf(),h)},"Matrix,Matrix":function(u,c){return s(u.valueOf(),c.valueOf(),1)}});function s(l,u,c){l.some(w=>w.type==="BigNumber")&&(l=l.map(w=>a(w))),u.some(w=>w.type==="BigNumber")&&(u=u.map(w=>a(w)));for(var h=[i(1,0)],f=[i(1,0)],A=0;A<l.length;A++){var d=l[A];typeof d=="number"&&(d=i(d,0)),h=o(h,[i(1,0),i(-d.re,-d.im)])}for(var p=0;p<u.length;p++){var y=u[p];typeof y=="number"&&(y=i(y,0)),f=o(f,[i(1,0),i(-y.re,-y.im)])}for(var v=0;v<h.length;v++)h[v]=n(h[v],c);return[h,f]}function o(l,u){for(var c=[],h=0;h<l.length+u.length-1;h++){c[h]=i(0,0);for(var f=0;f<l.length;f++)h-f>=0&&h-f<u.length&&(c[h]=t(c[h],n(l[f],u[h-f])))}return c}}),_6="freqz",iDe=["typed","add","multiply","Complex","divide","matrix"],aDe=Le(_6,iDe,r=>{var{typed:e,add:t,multiply:n,Complex:i,divide:a,matrix:s}=r;return e(_6,{"Array, Array":function(c,h){var f=l(512);return o(c,h,f)},"Array, Array, Array":function(c,h,f){return o(c,h,f)},"Array, Array, number":function(c,h,f){if(f<0)throw new Error("w must be a positive number");var A=l(f);return o(c,h,A)},"Matrix, Matrix":function(c,h){var f=l(512),{w:A,h:d}=o(c.valueOf(),h.valueOf(),f);return{w:s(A),h:s(d)}},"Matrix, Matrix, Matrix":function(c,h,f){var{h:A}=o(c.valueOf(),h.valueOf(),f.valueOf());return{h:s(A),w:s(f)}},"Matrix, Matrix, number":function(c,h,f){if(f<0)throw new Error("w must be a positive number");var A=l(f),{h:d}=o(c.valueOf(),h.valueOf(),A);return{h:s(d),w:s(A)}}});function o(u,c,h){for(var f=[],A=[],d=0;d<h.length;d++){for(var p=i(0,0),y=i(0,0),v=0;v<u.length;v++)p=t(p,n(u[v],i(Math.cos(-v*h[d]),Math.sin(-v*h[d]))));for(var w=0;w<c.length;w++)y=t(y,n(c[w],i(Math.cos(-w*h[d]),Math.sin(-w*h[d]))));f.push(p),A.push(y)}for(var x=[],b=0;b<f.length;b++)x.push(a(f[b],A[b]));return{h:x,w:h}}function l(u){for(var c=[],h=0;h<u;h++)c.push(h/u*Math.PI);return c}}),sDe="reviver",oDe=["classes"],lDe=Le(sDe,oDe,r=>{var{classes:e}=r;return function(n,i){var a=e[i&&i.mathjs];return a&&typeof a.fromJSON=="function"?a.fromJSON(i):i}}),uDe="replacer",cDe=[],hDe=Le(uDe,cDe,()=>function(e,t){return typeof t=="number"&&(!isFinite(t)||isNaN(t))?{mathjs:"number",value:String(t)}:t}),fDe="12.4.3",ADe=Le("true",[],()=>!0),dDe=Le("false",[],()=>!1),gDe=Le("null",[],()=>null),pDe=Kl("Infinity",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1/0):1/0}),mDe=Kl("NaN",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(NaN):NaN}),vDe=Kl("pi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?h3(t):Lxe}),yDe=Kl("tau",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?r5e(t):Dxe}),xDe=Kl("e",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?e5e(t):kxe}),wDe=Kl("phi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?t5e(t):Rxe}),_De=Kl("LN2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).ln():Math.LN2}),EDe=Kl("LN10",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(10).ln():Math.LN10}),bDe=Kl("LOG2E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(2).ln()):Math.LOG2E}),CDe=Kl("LOG10E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(10).ln()):Math.LOG10E}),SDe=Kl("SQRT1_2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t("0.5").sqrt():Math.SQRT1_2}),BDe=Kl("SQRT2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).sqrt():Math.SQRT2}),TDe=Kl("i",["Complex"],r=>{var{Complex:e}=r;return e.I}),NDe=Le("version",[],()=>fDe);function Kl(r,e,t){return Le(r,e,t,{recreateOnConfigChange:!0})}var IDe=Zr("speedOfLight","299792458","m s^-1"),FDe=Zr("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),MDe=Zr("planckConstant","6.62607015e-34","J s"),LDe=Zr("reducedPlanckConstant","1.0545718176461565e-34","J s"),DDe=Zr("magneticConstant","1.25663706212e-6","N A^-2"),kDe=Zr("electricConstant","8.8541878128e-12","F m^-1"),RDe=Zr("vacuumImpedance","376.730313667","ohm"),ODe=Zr("coulomb","8.987551792261171e9","N m^2 C^-2"),PDe=Zr("elementaryCharge","1.602176634e-19","C"),UDe=Zr("bohrMagneton","9.2740100783e-24","J T^-1"),QDe=Zr("conductanceQuantum","7.748091729863649e-5","S"),GDe=Zr("inverseConductanceQuantum","12906.403729652257","ohm"),HDe=Zr("magneticFluxQuantum","2.0678338484619295e-15","Wb"),zDe=Zr("nuclearMagneton","5.0507837461e-27","J T^-1"),qDe=Zr("klitzing","25812.807459304513","ohm"),jDe=Zr("bohrRadius","5.29177210903e-11","m"),$De=Zr("classicalElectronRadius","2.8179403262e-15","m"),KDe=Zr("electronMass","9.1093837015e-31","kg"),VDe=Zr("fermiCoupling","1.1663787e-5","GeV^-2"),WDe=aE("fineStructure",.0072973525693),YDe=Zr("hartreeEnergy","4.3597447222071e-18","J"),XDe=Zr("protonMass","1.67262192369e-27","kg"),ZDe=Zr("deuteronMass","3.3435830926e-27","kg"),JDe=Zr("neutronMass","1.6749271613e-27","kg"),eke=Zr("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),tke=Zr("rydberg","10973731.568160","m^-1"),rke=Zr("thomsonCrossSection","6.6524587321e-29","m^2"),nke=aE("weakMixingAngle",.2229),ike=aE("efimovFactor",22.7),ake=Zr("atomicMass","1.66053906660e-27","kg"),ske=Zr("avogadro","6.02214076e23","mol^-1"),oke=Zr("boltzmann","1.380649e-23","J K^-1"),lke=Zr("faraday","96485.33212331001","C mol^-1"),uke=Zr("firstRadiation","3.7417718521927573e-16","W m^2"),cke=Zr("loschmidt","2.686780111798444e25","m^-3"),hke=Zr("gasConstant","8.31446261815324","J K^-1 mol^-1"),fke=Zr("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),Ake=Zr("molarVolume","0.022413969545014137","m^3 mol^-1"),dke=aE("sackurTetrode",-1.16487052358),gke=Zr("secondRadiation","0.014387768775039337","m K"),pke=Zr("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),mke=Zr("wienDisplacement","2.897771955e-3","m K"),vke=Zr("molarMass","0.99999999965e-3","kg mol^-1"),yke=Zr("molarMassC12","11.9999999958e-3","kg mol^-1"),xke=Zr("gravity","9.80665","m s^-2"),wke=Zr("planckLength","1.616255e-35","m"),_ke=Zr("planckMass","2.176435e-8","kg"),Eke=Zr("planckTime","5.391245e-44","s"),bke=Zr("planckCharge","1.87554603778e-18","C"),Cke=Zr("planckTemperature","1.416785e+32","K");function Zr(r,e,t){var n=["config","Unit","BigNumber"];return Le(r,n,i=>{var{config:a,Unit:s,BigNumber:o}=i,l=a.number==="BigNumber"?new o(e):parseFloat(e),u=new s(l,t);return u.fixPrefix=!0,u})}function aE(r,e){var t=["config","BigNumber"];return Le(r,t,n=>{var{config:i,BigNumber:a}=n;return i.number==="BigNumber"?new a(e):e})}var Ske="apply",Bke=["typed","isInteger"],Tke=Le(Ske,Bke,r=>{var{typed:e,isInteger:t}=r,n=a3({typed:e,isInteger:t});return e("apply",{"...any":function(a){var s=a[1];an(s)?a[1]=s-1:sn(s)&&(a[1]=s.minus(1));try{return n.apply(null,a)}catch(o){throw Jo(o)}}})},{isTransformFunction:!0}),Nke="column",Ike=["typed","Index","matrix","range"],Fke=Le(Nke,Ike,r=>{var{typed:e,Index:t,matrix:n,range:i}=r,a=ZG({typed:e,Index:t,matrix:n,range:i});return e("column",{"...any":function(o){var l=o.length-1,u=o[l];an(u)&&(o[l]=u-1);try{return a.apply(null,o)}catch(c){throw Jo(c)}}})},{isTransformFunction:!0});function x3(r,e,t){var n=r.filter(function(l){return Cs(l)&&!(l.name in e)&&!t.has(l.name)})[0];if(!n)throw new Error('No undefined variable found in inline expression "'+r+'"');var i=n.name,a=new Map,s=new EQ(t,a,new Set([i])),o=r.compile();return function(u){return a.set(i,u),o.evaluate(s)}}var Mke="filter",Lke=["typed"],Dke=Le(Mke,Lke,r=>{var{typed:e}=r;function t(i,a,s){var o,l;return i[0]&&(o=i[0].compile().evaluate(s)),i[1]&&(Cs(i[1])||P1(i[1])?l=i[1].compile().evaluate(s):l=x3(i[1],a,s)),n(o,l)}t.rawArgs=!0;var n=e("filter",{"Array, function":E6,"Matrix, function":function(a,s){return a.create(E6(a.toArray(),s))},"Array, RegExp":Lw,"Matrix, RegExp":function(a,s){return a.create(Lw(a.toArray(),s))}});return t},{isTransformFunction:!0});function E6(r,e){return jQ(r,function(t,n,i){return Op(e,t,[n+1],i,"filter")})}var kke="forEach",Rke=["typed"],Oke=Le(kke,Rke,r=>{var{typed:e}=r;function t(i,a,s){var o,l;return i[0]&&(o=i[0].compile().evaluate(s)),i[1]&&(Cs(i[1])||P1(i[1])?l=i[1].compile().evaluate(s):l=x3(i[1],a,s)),n(o,l)}t.rawArgs=!0;var n=e("forEach",{"Array | Matrix, function":function(a,s){var o=function l(u,c){if(Array.isArray(u))J_(u,function(h,f){l(h,c.concat(f+1))});else return Op(s,u,c,a,"forEach")};o(a.valueOf(),[])}});return t},{isTransformFunction:!0}),Pke="index",Uke=["Index","getMatrixDataType"],Qke=Le(Pke,Uke,r=>{var{Index:e,getMatrixDataType:t}=r;return function(){for(var i=[],a=0,s=arguments.length;a<s;a++){var o=arguments[a];if(JB(o))o.start--,o.end-=o.step>0?0:2;else if(o&&o.isSet===!0)o=o.map(function(u){return u-1});else if(ti(o)||Lr(o))t(o)!=="boolean"&&(o=o.map(function(u){return u-1}));else if(an(o))o--;else if(sn(o))o=o.toNumber()-1;else if(typeof o!="string")throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");i[a]=o}var l=new e;return e.apply(l,i),l}},{isTransformFunction:!0}),Gke="map",Hke=["typed"],zke=Le(Gke,Hke,r=>{var{typed:e}=r;function t(i,a,s){var o,l;return i[0]&&(o=i[0].compile().evaluate(s)),i[1]&&(Cs(i[1])||P1(i[1])?l=i[1].compile().evaluate(s):l=x3(i[1],a,s)),n(o,l)}t.rawArgs=!0;var n=e("map",{"Array, function":function(a,s){return b6(a,s,a)},"Matrix, function":function(a,s){return a.create(b6(a.valueOf(),s,a))}});return t},{isTransformFunction:!0});function b6(r,e,t){function n(i,a){return Array.isArray(i)?nf(i,function(s,o){return n(s,a.concat(o+1))}):Op(e,i,a,t,"map")}return n(r,[])}function $A(r){if(r.length===2&&Su(r[0])){r=r.slice();var e=r[1];an(e)?r[1]=e-1:sn(e)&&(r[1]=e.minus(1))}return r}var qke="max",jke=["typed","config","numeric","larger"],$ke=Le(qke,jke,r=>{var{typed:e,config:t,numeric:n,larger:i}=r,a=lH({typed:e,config:t,numeric:n,larger:i});return e("max",{"...any":function(o){o=$A(o);try{return a.apply(null,o)}catch(l){throw Jo(l)}}})},{isTransformFunction:!0}),Kke="mean",Vke=["typed","add","divide"],Wke=Le(Kke,Vke,r=>{var{typed:e,add:t,divide:n}=r,i=mH({typed:e,add:t,divide:n});return e("mean",{"...any":function(s){s=$A(s);try{return i.apply(null,s)}catch(o){throw Jo(o)}}})},{isTransformFunction:!0}),Yke="min",Xke=["typed","config","numeric","smaller"],Zke=Le(Yke,Xke,r=>{var{typed:e,config:t,numeric:n,smaller:i}=r,a=uH({typed:e,config:t,numeric:n,smaller:i});return e("min",{"...any":function(o){o=$A(o);try{return a.apply(null,o)}catch(l){throw Jo(l)}}})},{isTransformFunction:!0}),Jke="range",e8e=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],t8e=Le(Jke,e8e,r=>{var{typed:e,config:t,matrix:n,bignumber:i,smaller:a,smallerEq:s,larger:o,largerEq:l,add:u,isPositive:c}=r,h=rH({typed:e,config:t,matrix:n,bignumber:i,smaller:a,smallerEq:s,larger:o,largerEq:l,add:u,isPositive:c});return e("range",{"...any":function(A){var d=A.length-1,p=A[d];return typeof p!="boolean"&&A.push(!0),h.apply(null,A)}})},{isTransformFunction:!0}),r8e="row",n8e=["typed","Index","matrix","range"],i8e=Le(r8e,n8e,r=>{var{typed:e,Index:t,matrix:n,range:i}=r,a=nH({typed:e,Index:t,matrix:n,range:i});return e("row",{"...any":function(o){var l=o.length-1,u=o[l];an(u)&&(o[l]=u-1);try{return a.apply(null,o)}catch(c){throw Jo(c)}}})},{isTransformFunction:!0}),a8e="subset",s8e=["typed","matrix","zeros","add"],o8e=Le(a8e,s8e,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r,a=iH({typed:e,matrix:t,zeros:n,add:i});return e("subset",{"...any":function(o){try{return a.apply(null,o)}catch(l){throw Jo(l)}}})},{isTransformFunction:!0}),l8e="concat",u8e=["typed","matrix","isInteger"],c8e=Le(l8e,u8e,r=>{var{typed:e,matrix:t,isInteger:n}=r,i=XG({typed:e,matrix:t,isInteger:n});return e("concat",{"...any":function(s){var o=s.length-1,l=s[o];an(l)?s[o]=l-1:sn(l)&&(s[o]=l.minus(1));try{return i.apply(null,s)}catch(u){throw Jo(u)}}})},{isTransformFunction:!0}),C6="diff",h8e=["typed","matrix","subtract","number","bignumber"],f8e=Le(C6,h8e,r=>{var{typed:e,matrix:t,subtract:n,number:i,bignumber:a}=r,s=JG({typed:e,matrix:t,subtract:n,number:i,bignumber:a});return e(C6,{"...any":function(l){l=$A(l);try{return s.apply(null,l)}catch(u){throw Jo(u)}}})},{isTransformFunction:!0}),A8e="std",d8e=["typed","map","sqrt","variance"],g8e=Le(A8e,d8e,r=>{var{typed:e,map:t,sqrt:n,variance:i}=r,a=xH({typed:e,map:t,sqrt:n,variance:i});return e("std",{"...any":function(o){o=$A(o);try{return a.apply(null,o)}catch(l){throw Jo(l)}}})},{isTransformFunction:!0}),S6="sum",p8e=["typed","config","add","numeric"],m8e=Le(S6,p8e,r=>{var{typed:e,config:t,add:n,numeric:i}=r,a=gH({typed:e,config:t,add:n,numeric:i});return e(S6,{"...any":function(o){o=$A(o);try{return a.apply(null,o)}catch(l){throw Jo(l)}}})},{isTransformFunction:!0}),v8e="quantileSeq",y8e=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],x8e=Le(v8e,y8e,r=>{var{typed:e,bignumber:t,add:n,subtract:i,divide:a,multiply:s,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:f}=r,A=yH({typed:e,bignumber:t,add:n,subtract:i,divide:a,multiply:s,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:f});return e("quantileSeq",{"Array | Matrix, number | BigNumber":A,"Array | Matrix, number | BigNumber, number":(p,y,v)=>A(p,y,d(v)),"Array | Matrix, number | BigNumber, boolean":A,"Array | Matrix, number | BigNumber, boolean, number":(p,y,v,w)=>A(p,y,v,d(w)),"Array | Matrix, Array | Matrix":A,"Array | Matrix, Array | Matrix, number":(p,y,v)=>A(p,y,d(v)),"Array | Matrix, Array | Matrix, boolean":A,"Array | Matrix, Array | Matrix, boolean, number":(p,y,v,w)=>A(p,y,v,d(w))});function d(p){return $A([[],p])[1]}},{isTransformFunction:!0}),B6="cumsum",w8e=["typed","add","unaryPlus"],_8e=Le(B6,w8e,r=>{var{typed:e,add:t,unaryPlus:n}=r,i=pH({typed:e,add:t,unaryPlus:n});return e(B6,{"...any":function(s){if(s.length===2&&Su(s[0])){var o=s[1];an(o)?s[1]=o-1:sn(o)&&(s[1]=o.minus(1))}try{return i.apply(null,s)}catch(l){throw Jo(l)}}})},{isTransformFunction:!0}),T6="variance",E8e=["typed","add","subtract","multiply","divide","apply","isNaN"],b8e=Le(T6,E8e,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:a,apply:s,isNaN:o}=r,l=vH({typed:e,add:t,subtract:n,multiply:i,divide:a,apply:s,isNaN:o});return e(T6,{"...any":function(c){c=$A(c);try{return l.apply(null,c)}catch(h){throw Jo(h)}}})},{isTransformFunction:!0}),N6="print",C8e=["typed","matrix","zeros","add"],S8e=Le(N6,C8e,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r,a=sH({typed:e,matrix:t,zeros:n,add:i});return e(N6,{"string, Object | Array":function(l,u){return a(s(l),u)},"string, Object | Array, number | Object":function(l,u,c){return a(s(l),u,c)}});function s(o){return o.replace(aH,l=>{var u=l.slice(1).split("."),c=u.map(function(h){return!isNaN(h)&&h.length>0?parseInt(h)-1:h});return"$"+c.join(".")})}},{isTransformFunction:!0}),B8e="and",T8e=["typed","matrix","zeros","add","equalScalar","not","concat"],N8e=Le(B8e,T8e,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:a,concat:s}=r,o=oH({typed:e,matrix:t,equalScalar:n,zeros:i,not:a,concat:s});function l(u,c,h){var f=u[0].compile().evaluate(h);if(!Su(f)&&!o(f,!0))return!1;var A=u[1].compile().evaluate(h);return o(f,A)}return l.rawArgs=!0,l},{isTransformFunction:!0}),I8e="or",F8e=["typed","matrix","equalScalar","DenseMatrix","concat"],M8e=Le(I8e,F8e,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a}=r,s=YG({typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a});function o(l,u,c){var h=l[0].compile().evaluate(c);if(!Su(h)&&s(h,!1))return!0;var f=l[1].compile().evaluate(c);return s(h,f)}return o.rawArgs=!0,o},{isTransformFunction:!0}),L8e="bitAnd",D8e=["typed","matrix","zeros","add","equalScalar","not","concat"],k8e=Le(L8e,D8e,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:a,concat:s}=r,o=VG({typed:e,matrix:t,equalScalar:n,zeros:i,not:a,concat:s});function l(u,c,h){var f=u[0].compile().evaluate(h);if(!Su(f)){if(isNaN(f))return NaN;if(f===0||f===!1)return 0}var A=u[1].compile().evaluate(h);return o(f,A)}return l.rawArgs=!0,l},{isTransformFunction:!0}),R8e="bitOr",O8e=["typed","matrix","equalScalar","DenseMatrix","concat"],P8e=Le(R8e,O8e,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a}=r,s=WG({typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a});function o(l,u,c){var h=l[0].compile().evaluate(c);if(!Su(h)){if(isNaN(h))return NaN;if(h===-1)return-1;if(h===!0)return 1}var f=l[1].compile().evaluate(c);return s(h,f)}return o.rawArgs=!0,o},{isTransformFunction:!0}),Kt=X2e({config:Nt}),Bi=rxe({}),I6=xDe({BigNumber:Kt,config:Nt}),U8e=dDe({}),Q8e=WDe({BigNumber:Kt,config:Nt}),f0=sxe({}),EH=TDe({Complex:Bi}),G8e=pDe({BigNumber:Kt,config:Nt}),H8e=EDe({BigNumber:Kt,config:Nt}),z8e=CDe({BigNumber:Kt,config:Nt}),sE=fxe({}),q8e=mDe({BigNumber:Kt,config:Nt}),j8e=gDe({}),$8e=wDe({BigNumber:Kt,config:Nt}),K8e=uxe({}),bH=t2e({}),V8e=SDe({BigNumber:Kt,config:Nt}),W8e=dke({BigNumber:Kt,config:Nt}),CH=yDe({BigNumber:Kt,config:Nt}),Y8e=ADe({}),X8e=NDe({}),on=Sxe({Matrix:sE}),Z8e=ike({BigNumber:Kt,config:Nt}),J8e=_De({BigNumber:Kt,config:Nt}),R5=vDe({BigNumber:Kt,config:Nt}),e6e=hDe({}),t6e=BDe({BigNumber:Kt,config:Nt}),$e=Xye({BigNumber:Kt,Complex:Bi,DenseMatrix:on,Fraction:f0}),w3=Owe({BigNumber:Kt,config:Nt,typed:$e}),r6e=nke({BigNumber:Kt,config:Nt}),el=Uwe({typed:$e}),n6e=A5e({Complex:Bi,config:Nt,typed:$e}),i6e=m5e({BigNumber:Kt,typed:$e}),a6e=w5e({BigNumber:Kt,Complex:Bi,config:Nt,typed:$e}),os=zwe({typed:$e}),s6e=IEe({typed:$e}),o6e=B5e({BigNumber:Kt,Complex:Bi,config:Nt,typed:$e}),l6e=M5e({typed:$e}),SH=k5e({typed:$e}),u6e=U5e({Complex:Bi,config:Nt,typed:$e}),Gl=mwe({BigNumber:Kt,typed:$e}),c6e=EEe({typed:$e}),h6e=dwe({typed:$e}),f6e=Txe({typed:$e}),oE=jMe({typed:$e}),lE=xwe({Complex:Bi,typed:$e}),A0=MEe({typed:$e}),_3=G5e({typed:$e}),A6e=j5e({BigNumber:Kt,typed:$e}),d6e=W5e({BigNumber:Kt,typed:$e}),g6e=i_e({typed:$e}),bn=rwe({config:Nt,typed:$e}),p6e=eCe({typed:$e}),BH=s_e({typed:$e}),m6e=l_e({Complex:Bi,typed:$e}),v6e=ZEe({typed:$e}),y6e=rbe({typed:$e}),H1=hCe({typed:$e}),E3=abe({typed:$e}),x6e=mCe({format:H1,typed:$e}),b3=DEe({typed:$e}),yl=Ixe({typed:$e}),KA=Gxe({typed:$e}),d0=Kxe({typed:$e}),mc=Wxe({typed:$e}),w6e=bDe({BigNumber:Kt,config:Nt}),_6e=XMe({Complex:Bi,typed:$e}),E6e=z_e({Complex:Bi,config:Nt,typed:$e}),TH=j_e({Complex:Bi,config:Nt,typed:$e}),g0=hbe({typed:$e}),va=V_e({typed:$e}),Ww=PEe({typed:$e}),gf=cwe({typed:$e}),b6e=gCe({format:H1,typed:$e}),C6e=_Le({config:Nt,typed:$e}),S6e=sH({typed:$e}),B6e=bLe({config:Nt,typed:$e}),C3=REe({typed:$e}),T6e=J5e({BigNumber:Kt,typed:$e}),NH=eEe({BigNumber:Kt,Fraction:f0,complex:lE,typed:$e}),uE=n4e({typed:$e}),pf=awe({Matrix:sE,equalScalar:bn,typed:$e}),N6e=Lwe({typed:$e}),I6e=aEe({typed:$e}),F6e=fwe({typed:$e}),Nu=jwe({typed:$e}),M6e=o4e({typed:$e}),IH=Jxe({typed:$e}),L6e=g5e({Complex:Bi,config:Nt,typed:$e}),D6e=E5e({BigNumber:Kt,typed:$e}),S3=a3({isInteger:yl,typed:$e}),k6e=C5e({BigNumber:Kt,Complex:Bi,config:Nt,typed:$e}),R6e=ACe({format:H1,typed:$e}),O6e=KMe({typed:$e}),P6e=z5e({typed:$e}),U6e=X5e({BigNumber:Kt,typed:$e}),z1=Xxe({typed:$e}),Q6e=_Ce({typed:$e}),G6e=SLe({config:Nt,typed:$e}),H6e=t4e({BigNumber:Kt,typed:$e}),z6e=a4e({typed:$e}),q6e=u5e({SparseMatrix:pf,typed:$e}),vc=nEe({Complex:Bi,config:Nt,typed:$e}),j6e=c4e({typed:$e}),dh=kwe({typed:$e}),$6e=y5e({BigNumber:Kt,Complex:Bi,config:Nt,typed:$e}),K6e=K5e({BigNumber:Kt,typed:$e}),Up=Ewe({Fraction:f0,typed:$e}),p0=zxe({typed:$e}),$t=Cwe({DenseMatrix:on,Matrix:sE,SparseMatrix:pf,typed:$e}),V6e=Bwe({isZero:mc,matrix:$t,typed:$e}),W6e=oCe({isNaN:z1,isNumeric:p0,typed:$e}),sc=CCe({bignumber:Gl,fraction:Up,number:gf}),FH=uCe({config:Nt,multiplyScalar:va,numeric:sc,typed:$e}),MH=ybe({isInteger:yl,matrix:$t,typed:$e}),Ks=Nbe({matrix:$t,config:Nt,typed:$e}),Y6e=Fbe({matrix:$t,typed:$e}),q1=Obe({matrix:$t,typed:$e}),LH=uEe({BigNumber:Kt,config:Nt,matrix:$t,typed:$e}),Qs=Gbe({BigNumber:Kt,config:Nt,matrix:$t,typed:$e}),X6e=N5e({Complex:Bi,config:Nt,typed:$e}),DH=Kwe({BigNumber:Kt,Complex:Bi,Fraction:f0,config:Nt,isNegative:KA,matrix:$t,typed:$e,unaryMinus:dh}),Qn=XG({isInteger:yl,matrix:$t,typed:$e}),Z6e=jEe({prod:FH,size:Ks,typed:$e}),B3=Ube({conj:A0,transpose:q1,typed:$e}),kH=WEe({DenseMatrix:on,SparseMatrix:pf,matrix:$t,typed:$e}),ta=BCe({numeric:sc,typed:$e}),j1=GCe({DenseMatrix:on,concat:Qn,divideScalar:ta,equalScalar:bn,matrix:$t,typed:$e}),Iu=gSe({DenseMatrix:on,concat:Qn,equalScalar:bn,matrix:$t,typed:$e}),$1=ebe({matrix:$t,typed:$e}),J6e=jxe({isNumeric:p0,typed:$e}),VA=obe({BigNumber:Kt,DenseMatrix:on,SparseMatrix:pf,config:Nt,matrix:$t,typed:$e}),eRe=ube({matrix:$t,multiplyScalar:va,typed:$e}),cE=NSe({DenseMatrix:on,concat:Qn,config:Nt,matrix:$t,typed:$e}),tRe=JCe({DenseMatrix:on,concat:Qn,equalScalar:bn,matrix:$t,typed:$e,zeros:Qs}),RH=zCe({DenseMatrix:on,divideScalar:ta,equalScalar:bn,matrix:$t,multiplyScalar:va,subtractScalar:Nu,typed:$e}),T3=Fwe({flatten:$1,matrix:$t,size:Ks,typed:$e}),rRe=Z_e({BigNumber:Kt,concat:Qn,equalScalar:bn,matrix:$t,typed:$e}),nRe=pbe({BigNumber:Kt,config:Nt,matrix:$t,typed:$e}),N3=$Be({addScalar:os,complex:lE,conj:A0,divideScalar:ta,equal:Iu,identity:VA,isZero:mc,matrix:$t,multiplyScalar:va,sign:NH,sqrt:vc,subtractScalar:Nu,typed:$e,unaryMinus:dh,zeros:Qs}),iRe=_be({config:Nt,matrix:$t}),aRe=tSe({DenseMatrix:on,concat:Qn,equalScalar:bn,matrix:$t,typed:$e,zeros:Qs}),Qp=FCe({BigNumber:Kt,DenseMatrix:on,config:Nt,equalScalar:bn,matrix:$t,typed:$e,zeros:Qs}),$o=xSe({DenseMatrix:on,concat:Qn,config:Nt,matrix:$t,typed:$e}),pa=oEe({DenseMatrix:on,concat:Qn,equalScalar:bn,matrix:$t,subtractScalar:Nu,typed:$e,unaryMinus:dh}),sRe=xCe({concat:Qn,matrix:$t,typed:$e}),oRe=DSe({DenseMatrix:on,concat:Qn,config:Nt,equalScalar:bn,matrix:$t,typed:$e}),I3=jCe({DenseMatrix:on,divideScalar:ta,equalScalar:bn,matrix:$t,multiplyScalar:va,subtractScalar:Nu,typed:$e}),lRe=GEe({DenseMatrix:on,concat:Qn,matrix:$t,typed:$e}),In=M4e({DenseMatrix:on,SparseMatrix:pf,addScalar:os,concat:Qn,equalScalar:bn,matrix:$t,typed:$e}),uRe=O5e({BigNumber:Kt,DenseMatrix:on,concat:Qn,equalScalar:bn,matrix:$t,typed:$e}),cRe=VG({concat:Qn,equalScalar:bn,matrix:$t,typed:$e}),hRe=WG({DenseMatrix:on,concat:Qn,equalScalar:bn,matrix:$t,typed:$e}),fRe=TEe({DenseMatrix:on,concat:Qn,matrix:$t,typed:$e}),ARe=MLe({addScalar:os,combinations:oE,divideScalar:ta,isInteger:yl,isNegative:KA,multiplyScalar:va,typed:$e}),m0=sSe({BigNumber:Kt,DenseMatrix:on,Fraction:f0,concat:Qn,config:Nt,equalScalar:bn,matrix:$t,typed:$e}),OH=ASe({concat:Qn,matrix:$t,typed:$e}),dRe=pH({add:In,typed:$e,unaryPlus:w3}),F3=MSe({equal:Iu,typed:$e}),gRe=JG({matrix:$t,number:gf,subtract:pa,typed:$e}),pRe=TMe({abs:el,addScalar:os,deepEqual:F3,divideScalar:ta,multiplyScalar:va,sqrt:vc,subtractScalar:Nu,typed:$e}),hE=P4e({addScalar:os,conj:A0,multiplyScalar:va,size:Ks,typed:$e}),mRe=vSe({compareText:OH,isZero:mc,typed:$e}),PH=jG({DenseMatrix:on,config:Nt,equalScalar:bn,matrix:$t,round:Qp,typed:$e,zeros:Qs}),vRe=O_e({BigNumber:Kt,DenseMatrix:on,concat:Qn,config:Nt,equalScalar:bn,matrix:$t,round:Qp,typed:$e,zeros:Qs}),yRe=D4e({abs:el,addScalar:os,divideScalar:ta,isPositive:d0,multiplyScalar:va,smaller:$o,sqrt:vc,typed:$e}),UH=qSe({DenseMatrix:on,smaller:$o}),wo=KSe({ImmutableDenseMatrix:UH,getMatrixDataType:E3}),Ko=SSe({DenseMatrix:on,concat:Qn,config:Nt,matrix:$t,typed:$e}),M3=LCe({Complex:Bi,config:Nt,divideScalar:ta,typed:$e}),xRe=KCe({DenseMatrix:on,divideScalar:ta,equalScalar:bn,matrix:$t,multiplyScalar:va,subtractScalar:Nu,typed:$e}),wRe=Nwe({flatten:$1,matrix:$t,size:Ks,typed:$e}),_Re=uH({config:Nt,numeric:sc,smaller:$o,typed:$e}),QH=$G({DenseMatrix:on,concat:Qn,config:Nt,equalScalar:bn,matrix:$t,round:Qp,typed:$e,zeros:Qs}),li=Y_e({addScalar:os,dot:hE,equalScalar:bn,matrix:$t,multiplyScalar:va,typed:$e}),ERe=OCe({Complex:Bi,config:Nt,divideScalar:ta,typed:$e}),bRe=YG({DenseMatrix:on,concat:Qn,equalScalar:bn,matrix:$t,typed:$e}),fE=OSe({compare:m0,isNaN:z1,isNumeric:p0,typed:$e}),CRe=nSe({DenseMatrix:on,concat:Qn,equalScalar:bn,matrix:$t,typed:$e,zeros:Qs}),GH=p3e({SparseMatrix:pf,abs:el,add:In,divideScalar:ta,larger:Ko,largerEq:cE,multiply:li,subtract:pa,transpose:q1,typed:$e}),Vl=iH({add:In,matrix:$t,typed:$e,zeros:Qs}),L3=gH({add:In,config:Nt,numeric:sc,typed:$e}),SRe=G4e({add:In,matrix:$t,typed:$e}),HH=WCe({DenseMatrix:on,divideScalar:ta,equalScalar:bn,matrix:$t,multiplyScalar:va,subtractScalar:Nu,typed:$e}),BRe=nDe({Complex:Bi,add:In,multiply:li,number:gf,typed:$e}),D3=r_e({DenseMatrix:on,config:Nt,equalScalar:bn,matrix:$t,round:Qp,typed:$e,zeros:Qs}),gh=cSe({compare:m0,typed:$e}),TRe=DLe({addScalar:os,combinations:oE,isInteger:yl,isNegative:KA,isPositive:d0,larger:Ko,typed:$e}),NRe=KEe({matrix:$t,multiply:li,subtract:pa,typed:$e}),zH=iMe({divideScalar:ta,isZero:mc,matrix:$t,multiply:li,subtractScalar:Nu,typed:$e,unaryMinus:dh}),IRe=gEe({concat:Qn,equalScalar:bn,matrix:$t,multiplyScalar:va,typed:$e}),qH=YSe({larger:Ko,smaller:$o}),jH=h_e({Complex:Bi,DenseMatrix:on,ceil:D3,equalScalar:bn,floor:PH,matrix:$t,typed:$e,zeros:Qs}),$H=z4e({Index:wo,typed:$e}),FRe=FMe({abs:el,add:In,addScalar:os,config:Nt,divideScalar:ta,equalScalar:bn,flatten:$1,isNumeric:p0,isZero:mc,matrix:$t,multiply:li,multiplyScalar:va,smaller:$o,subtract:pa,typed:$e}),MRe=hEe({BigNumber:Kt,add:In,config:Nt,equal:Iu,isInteger:yl,mod:QH,smaller:$o,typed:$e,xgcd:LH}),LRe=G_e({concat:Qn,equalScalar:bn,matrix:$t,typed:$e}),DRe=kCe({Complex:Bi,config:Nt,divideScalar:ta,log:M3,typed:$e}),k3=lH({config:Nt,larger:Ko,numeric:sc,typed:$e}),kRe=f4e({DenseMatrix:on,Index:wo,compareNatural:gh,size:Ks,subset:Vl,typed:$e}),RRe=p4e({DenseMatrix:on,Index:wo,compareNatural:gh,size:Ks,subset:Vl,typed:$e}),ORe=x4e({Index:wo,compareNatural:gh,size:Ks,subset:Vl,typed:$e}),PRe=b4e({Index:wo,compareNatural:gh,size:Ks,subset:Vl,typed:$e}),dp=ESe({DenseMatrix:on,concat:Qn,config:Nt,matrix:$t,typed:$e}),URe=USe({compare:m0,compareNatural:gh,matrix:$t,typed:$e}),QRe=oH({concat:Qn,equalScalar:bn,matrix:$t,not:Ww,typed:$e,zeros:Qs}),gp=rH({bignumber:Gl,matrix:$t,add:In,config:Nt,isPositive:d0,larger:Ko,largerEq:cE,smaller:$o,smallerEq:dp,typed:$e}),GRe=nH({Index:wo,matrix:$t,range:gp,typed:$e}),KH=d4e({DenseMatrix:on,Index:wo,compareNatural:gh,size:Ks,subset:Vl,typed:$e}),HRe=_4e({Index:wo,compareNatural:gh,size:Ks,subset:Vl,typed:$e}),VH=T4e({Index:wo,concat:Qn,setDifference:KH,size:Ks,subset:Vl,typed:$e}),WH=JSe({FibonacciHeap:qH,addScalar:os,equalScalar:bn}),YH=ZG({Index:wo,matrix:$t,range:gp,typed:$e}),v0=sMe({abs:el,addScalar:os,det:zH,divideScalar:ta,identity:VA,matrix:$t,multiply:li,typed:$e,unaryMinus:dh}),XH=qBe({DenseMatrix:on,Spa:WH,SparseMatrix:pf,abs:el,addScalar:os,divideScalar:ta,equalScalar:bn,larger:Ko,matrix:$t,multiplyScalar:va,subtractScalar:Nu,typed:$e,unaryMinus:dh}),zRe=lMe({Complex:Bi,add:In,ctranspose:B3,deepEqual:F3,divideScalar:ta,dot:hE,dotDivide:j1,equal:Iu,inv:v0,matrix:$t,multiply:li,typed:$e}),Fu=NCe({Complex:Bi,config:Nt,fraction:Up,identity:VA,inv:v0,matrix:$t,multiply:li,number:gf,typed:$e}),ZH=v4e({DenseMatrix:on,Index:wo,compareNatural:gh,size:Ks,subset:Vl,typed:$e}),qRe=I4e({Index:wo,concat:Qn,setIntersect:ZH,setSymDifference:VH,size:Ks,subset:Vl,typed:$e}),jRe=mMe({abs:el,add:In,identity:VA,inv:v0,map:g0,max:k3,multiply:li,size:Ks,sqrt:vc,subtract:pa,typed:$e}),zr=a5e({BigNumber:Kt,Complex:Bi,Fraction:f0,abs:el,addScalar:os,config:Nt,divideScalar:ta,equal:Iu,fix:jH,format:H1,isNumeric:p0,multiplyScalar:va,number:gf,pow:Fu,round:Qp,subtractScalar:Nu}),$Re=RDe({BigNumber:Kt,Unit:zr,config:Nt}),KRe=mke({BigNumber:Kt,Unit:zr,config:Nt}),VRe=ake({BigNumber:Kt,Unit:zr,config:Nt}),WRe=UDe({BigNumber:Kt,Unit:zr,config:Nt}),YRe=oke({BigNumber:Kt,Unit:zr,config:Nt}),XRe=QDe({BigNumber:Kt,Unit:zr,config:Nt}),ZRe=ODe({BigNumber:Kt,Unit:zr,config:Nt}),JRe=ZDe({BigNumber:Kt,Unit:zr,config:Nt}),eOe=UCe({DenseMatrix:on,concat:Qn,equalScalar:bn,matrix:$t,pow:Fu,typed:$e}),tOe=kDe({BigNumber:Kt,Unit:zr,config:Nt}),rOe=PDe({BigNumber:Kt,Unit:zr,config:Nt}),nOe=gMe({abs:el,add:In,identity:VA,inv:v0,multiply:li,typed:$e}),iOe=lke({BigNumber:Kt,Unit:zr,config:Nt}),JH=zbe({addScalar:os,ceil:D3,conj:A0,divideScalar:ta,dotDivide:j1,exp:BH,i:EH,log2:TH,matrix:$t,multiplyScalar:va,pow:Fu,tau:CH,typed:$e}),R3=WMe({BigNumber:Kt,Complex:Bi,config:Nt,multiplyScalar:va,pow:Fu,typed:$e}),aOe=FDe({BigNumber:Kt,Unit:zr,config:Nt}),sOe=YDe({BigNumber:Kt,Unit:zr,config:Nt}),oOe=jbe({conj:A0,dotDivide:j1,fft:JH,typed:$e}),lOe=qDe({BigNumber:Kt,Unit:zr,config:Nt}),uOe=cke({BigNumber:Kt,Unit:zr,config:Nt}),cOe=DDe({BigNumber:Kt,Unit:zr,config:Nt}),hOe=vke({BigNumber:Kt,Unit:zr,config:Nt}),fOe=fke({BigNumber:Kt,Unit:zr,config:Nt}),AOe=JDe({BigNumber:Kt,Unit:zr,config:Nt}),dOe=zDe({BigNumber:Kt,Unit:zr,config:Nt}),gOe=bke({BigNumber:Kt,Unit:zr,config:Nt}),pOe=wke({BigNumber:Kt,Unit:zr,config:Nt}),mOe=Cke({BigNumber:Kt,Unit:zr,config:Nt}),vOe=XDe({BigNumber:Kt,Unit:zr,config:Nt}),yOe=eke({BigNumber:Kt,Unit:zr,config:Nt}),xOe=LDe({BigNumber:Kt,Unit:zr,config:Nt}),wOe=tke({BigNumber:Kt,Unit:zr,config:Nt}),_Oe=gke({BigNumber:Kt,Unit:zr,config:Nt}),EOe=IDe({BigNumber:Kt,Unit:zr,config:Nt}),bOe=pke({BigNumber:Kt,Unit:zr,config:Nt}),COe=rke({BigNumber:Kt,Unit:zr,config:Nt}),SOe=ske({BigNumber:Kt,Unit:zr,config:Nt}),BOe=jDe({BigNumber:Kt,Unit:zr,config:Nt}),TOe=h5e({Unit:zr,typed:$e}),Bs=SMe({divideScalar:ta,equalScalar:bn,inv:v0,matrix:$t,multiply:li,typed:$e}),NOe=KDe({BigNumber:Kt,Unit:zr,config:Nt}),K1=JMe({gamma:R3,typed:$e}),IOe=uke({BigNumber:Kt,Unit:zr,config:Nt}),FOe=xke({BigNumber:Kt,Unit:zr,config:Nt}),MOe=GDe({BigNumber:Kt,Unit:zr,config:Nt}),ez=v3e({DenseMatrix:on,lsolve:RH,lup:XH,matrix:$t,slu:GH,typed:$e,usolve:I3}),LOe=HDe({BigNumber:Kt,Unit:zr,config:Nt}),DOe=yke({BigNumber:Kt,Unit:zr,config:Nt}),kOe=nLe({add:In,divide:Bs,factorial:K1,isInteger:yl,isPositive:d0,multiply:li,typed:$e}),ROe=aLe({factorial:K1,typed:$e}),OOe=_ke({BigNumber:Kt,Unit:zr,config:Nt}),POe=x3e({add:In,cbrt:DH,divide:Bs,equalScalar:bn,im:b3,isZero:mc,multiply:li,re:C3,sqrt:vc,subtract:pa,typeOf:IH,typed:$e,unaryMinus:dh}),UOe=S4e({compareNatural:gh,typed:$e}),QOe=Xbe({abs:el,add:In,bignumber:Gl,divide:Bs,isNegative:KA,isPositive:d0,larger:Ko,map:g0,matrix:$t,max:k3,multiply:li,smaller:$o,subtract:pa,typed:$e,unaryMinus:dh}),tz=TLe({bignumber:Gl,addScalar:os,combinations:oE,divideScalar:ta,factorial:K1,isInteger:yl,isNegative:KA,larger:Ko,multiplyScalar:va,number:gf,pow:Fu,subtractScalar:Nu,typed:$e}),GOe=o5e({Unit:zr,typed:$e}),HOe=ILe({addScalar:os,isInteger:yl,isNegative:KA,stirlingS2:tz,typed:$e}),rz=AMe({abs:el,add:In,addScalar:os,atan:SH,bignumber:Gl,column:YH,complex:lE,config:Nt,cos:_3,diag:kH,divideScalar:ta,dot:hE,equal:Iu,flatten:$1,im:b3,inv:v0,larger:Ko,matrix:$t,matrixFromColumns:T3,multiply:li,multiplyScalar:va,number:gf,qr:N3,re:C3,reshape:MH,sin:uE,size:Ks,smaller:$o,sqrt:vc,subtract:pa,typed:$e,usolve:I3,usolveAll:HH}),zOe=VDe({BigNumber:Kt,Unit:zr,config:Nt}),qOe=hke({BigNumber:Kt,Unit:zr,config:Nt}),jOe=tLe({divide:Bs,dotDivide:j1,isNumeric:p0,log:M3,map:g0,matrix:$t,multiply:li,sum:L3,typed:$e}),nz=mH({add:In,divide:Bs,typed:$e}),$Oe=Ake({BigNumber:Kt,Unit:zr,config:Nt}),KOe=MDe({BigNumber:Kt,Unit:zr,config:Nt}),VOe=yH({bignumber:Gl,add:In,compare:m0,divide:Bs,isInteger:yl,larger:Ko,multiply:li,partitionSelect:fE,smaller:$o,smallerEq:dp,subtract:pa,typed:$e}),O3=vH({add:In,apply:S3,divide:Bs,isNaN:z1,multiply:li,subtract:pa,typed:$e}),WOe=$De({BigNumber:Kt,Unit:zr,config:Nt}),iz=RMe({add:In,compare:m0,divide:Bs,partitionSelect:fE,typed:$e}),YOe=zMe({add:In,divide:Bs,matrix:$t,mean:nz,multiply:li,pow:Fu,sqrt:vc,subtract:pa,sum:L3,typed:$e}),XOe=aDe({Complex:Bi,add:In,divide:Bs,matrix:$t,multiply:li,typed:$e}),ZOe=PMe({abs:el,map:g0,median:iz,subtract:pa,typed:$e}),JOe=xH({map:g0,sqrt:vc,typed:$e,variance:O3}),ePe=aCe({BigNumber:Kt,Complex:Bi,add:In,config:Nt,divide:Bs,equal:Iu,factorial:K1,gamma:R3,isNegative:KA,multiply:li,pi:R5,pow:Fu,sin:uE,smallerEq:dp,subtract:pa,typed:$e}),P3=R4e({abs:el,add:In,conj:A0,ctranspose:B3,eigs:rz,equalScalar:bn,larger:Ko,matrix:$t,multiply:li,pow:Fu,smaller:$o,sqrt:vc,typed:$e}),az=Sbe({BigNumber:Kt,DenseMatrix:on,SparseMatrix:pf,addScalar:os,config:Nt,cos:_3,matrix:$t,multiplyScalar:va,norm:P3,sin:uE,typed:$e,unaryMinus:dh}),tPe=Eke({BigNumber:Kt,Unit:zr,config:Nt}),sz=wMe({identity:VA,matrix:$t,multiply:li,norm:P3,qr:N3,subtract:pa,typed:$e}),rPe=bbe({multiply:li,rotationMatrix:az,typed:$e}),oz=yMe({abs:el,add:In,concat:Qn,identity:VA,index:$H,lusolve:ez,matrix:$t,matrixFromColumns:T3,multiply:li,range:gp,schur:sz,subset:Vl,subtract:pa,transpose:q1,typed:$e}),nPe=EMe({matrix:$t,multiply:li,sylvester:oz,transpose:q1,typed:$e}),Gp={},Hp={},lz={},Bo=$4e({mathWithTransform:Hp}),zp=vBe({Node:Bo}),mf=xBe({Node:Bo}),y0=_Be({Node:Bo}),uz=SBe({Node:Bo}),qp=Y4e({Node:Bo}),cz=rBe({Node:Bo,ResultSet:bH}),hz=iBe({Node:Bo}),WA=fBe({Node:Bo}),fz=bBe({Node:Bo}),iPe=lDe({classes:lz}),U3=S3e({math:Gp,typed:$e}),Az=dBe({Node:Bo,typed:$e}),aPe=rMe({Chain:U3,typed:$e}),jp=pBe({Node:Bo,size:Ks}),$p=V4e({Node:Bo,subset:Vl}),dz=eBe({matrix:$t,Node:Bo,subset:Vl}),YA=NBe({Unit:zr,Node:Bo,math:Gp}),XA=FBe({Node:Bo,SymbolNode:YA,math:Gp}),ph=LBe({AccessorNode:$p,ArrayNode:qp,AssignmentNode:dz,BlockNode:cz,ConditionalNode:hz,ConstantNode:WA,FunctionAssignmentNode:Az,FunctionNode:XA,IndexNode:jp,ObjectNode:zp,OperatorNode:mf,ParenthesisNode:y0,RangeNode:fz,RelationalNode:uz,SymbolNode:YA,config:Nt,numeric:sc,typed:$e}),gz=WLe({ConstantNode:WA,FunctionNode:XA,OperatorNode:mf,ParenthesisNode:y0,parse:ph,typed:$e}),Q3=qLe({bignumber:Gl,fraction:Up,AccessorNode:$p,ArrayNode:qp,ConstantNode:WA,FunctionNode:XA,IndexNode:jp,ObjectNode:zp,OperatorNode:mf,SymbolNode:YA,config:Nt,mathWithTransform:Hp,matrix:$t,typed:$e}),sPe=kBe({parse:ph,typed:$e}),G3=$Le({AccessorNode:$p,ArrayNode:qp,ConstantNode:WA,FunctionNode:XA,IndexNode:jp,ObjectNode:zp,OperatorNode:mf,ParenthesisNode:y0,SymbolNode:YA,add:In,divide:Bs,equal:Iu,isZero:mc,multiply:li,parse:ph,pow:Fu,subtract:pa,typed:$e}),AE=OBe({parse:ph,typed:$e}),pz=E3e({evaluate:AE}),mz=QBe({evaluate:AE}),dE=GLe({bignumber:Gl,fraction:Up,AccessorNode:$p,ArrayNode:qp,ConstantNode:WA,FunctionNode:XA,IndexNode:jp,ObjectNode:zp,OperatorNode:mf,ParenthesisNode:y0,SymbolNode:YA,add:In,config:Nt,divide:Bs,equal:Iu,isZero:mc,mathWithTransform:Hp,matrix:$t,multiply:li,parse:ph,pow:Fu,resolve:gz,simplifyConstant:Q3,simplifyCore:G3,subtract:pa,typed:$e}),oPe=XLe({OperatorNode:mf,parse:ph,simplify:dE,typed:$e}),lPe=RLe({parse:ph,typed:$e}),uPe=HBe({Parser:mz,typed:$e}),cPe=tDe({bignumber:Gl,fraction:Up,AccessorNode:$p,ArrayNode:qp,ConstantNode:WA,FunctionNode:XA,IndexNode:jp,ObjectNode:zp,OperatorNode:mf,ParenthesisNode:y0,SymbolNode:YA,add:In,config:Nt,divide:Bs,equal:Iu,isZero:mc,mathWithTransform:Hp,matrix:$t,multiply:li,parse:ph,pow:Fu,simplify:dE,simplifyConstant:Q3,simplifyCore:G3,subtract:pa,typed:$e}),hPe=JLe({ConstantNode:WA,FunctionNode:XA,OperatorNode:mf,ParenthesisNode:y0,SymbolNode:YA,config:Nt,equal:Iu,isZero:mc,numeric:sc,parse:ph,simplify:dE,typed:$e}),fPe=eMe({Help:pz,mathWithTransform:Hp,typed:$e});ts(Gp,{e:I6,false:U8e,fineStructure:Q8e,i:EH,Infinity:G8e,LN10:H8e,LOG10E:z8e,NaN:q8e,null:j8e,phi:$8e,SQRT1_2:V8e,sackurTetrode:W8e,tau:CH,true:Y8e,E:I6,version:X8e,efimovFactor:Z8e,LN2:J8e,pi:R5,replacer:e6e,reviver:iPe,SQRT2:t6e,typed:$e,unaryPlus:w3,PI:R5,weakMixingAngle:r6e,abs:el,acos:n6e,acot:i6e,acsc:a6e,addScalar:os,arg:s6e,asech:o6e,asinh:l6e,atan:SH,atanh:u6e,bignumber:Gl,bitNot:c6e,boolean:h6e,clone:f6e,combinations:oE,complex:lE,conj:A0,cos:_3,cot:A6e,csc:d6e,cube:g6e,equalScalar:bn,erf:p6e,exp:BH,expm1:m6e,filter:v6e,forEach:y6e,format:H1,getMatrixDataType:E3,hex:x6e,im:b3,isInteger:yl,isNegative:KA,isPositive:d0,isZero:mc,LOG2E:w6e,lgamma:_6e,log10:E6e,log2:TH,map:g0,multiplyScalar:va,not:Ww,number:gf,oct:b6e,pickRandom:C6e,print:S6e,random:B6e,re:C3,sec:T6e,sign:NH,sin:uE,splitUnit:N6e,square:I6e,string:F6e,subtractScalar:Nu,tan:M6e,typeOf:IH,acosh:L6e,acsch:D6e,apply:S3,asec:k6e,bin:R6e,chain:aPe,combinationsWithRep:O6e,cosh:P6e,csch:U6e,isNaN:z1,isPrime:Q6e,randomInt:G6e,sech:H6e,sinh:z6e,sparse:q6e,sqrt:vc,tanh:j6e,unaryMinus:dh,acoth:$6e,coth:K6e,fraction:Up,isNumeric:p0,matrix:$t,matrixFromFunction:V6e,mode:W6e,numeric:sc,prod:FH,reshape:MH,size:Ks,squeeze:Y6e,transpose:q1,xgcd:LH,zeros:Qs,asin:X6e,cbrt:DH,concat:Qn,count:Z6e,ctranspose:B3,diag:kH,divideScalar:ta,dotDivide:j1,equal:Iu,flatten:$1,hasNumericValue:J6e,identity:VA,kron:eRe,largerEq:cE,leftShift:tRe,lsolve:RH,matrixFromColumns:T3,nthRoot:rRe,ones:nRe,qr:N3,resize:iRe,rightArithShift:aRe,round:Qp,smaller:$o,subtract:pa,to:sRe,unequal:oRe,usolve:I3,xor:lRe,add:In,atan2:uRe,bitAnd:cRe,bitOr:hRe,bitXor:fRe,catalan:ARe,compare:m0,compareText:OH,cumsum:dRe,deepEqual:F3,diff:gRe,distance:pRe,dot:hE,equalText:mRe,floor:PH,gcd:vRe,hypot:yRe,larger:Ko,log:M3,lsolveAll:xRe,matrixFromRows:wRe,min:_Re,mod:QH,multiply:li,nthRoots:ERe,or:bRe,partitionSelect:fE,rightLogShift:CRe,slu:GH,subset:Vl,sum:L3,trace:SRe,usolveAll:HH,zpk2tf:BRe,ceil:D3,compareNatural:gh,composition:TRe,cross:NRe,det:zH,dotMultiply:IRe,fix:jH,index:$H,intersect:FRe,invmod:MRe,lcm:LRe,log1p:DRe,max:k3,setCartesian:kRe,setDistinct:RRe,setIsSubset:ORe,setPowerset:PRe,smallerEq:dp,sort:URe,and:QRe,range:gp,row:GRe,setDifference:KH,setMultiplicity:HRe,setSymDifference:VH,column:YH,inv:v0,lup:XH,pinv:zRe,pow:Fu,setIntersect:ZH,setUnion:qRe,sqrtm:jRe,vacuumImpedance:$Re,wienDisplacement:KRe,atomicMass:VRe,bohrMagneton:WRe,boltzmann:YRe,conductanceQuantum:XRe,coulomb:ZRe,deuteronMass:JRe,dotPow:eOe,electricConstant:tOe,elementaryCharge:rOe,expm:nOe,faraday:iOe,fft:JH,gamma:R3,gravitationConstant:aOe,hartreeEnergy:sOe,ifft:oOe,klitzing:lOe,loschmidt:uOe,magneticConstant:cOe,molarMass:hOe,molarPlanckConstant:fOe,neutronMass:AOe,nuclearMagneton:dOe,planckCharge:gOe,planckLength:pOe,planckTemperature:mOe,protonMass:vOe,quantumOfCirculation:yOe,reducedPlanckConstant:xOe,rydberg:wOe,secondRadiation:_Oe,speedOfLight:EOe,stefanBoltzmann:bOe,thomsonCrossSection:COe,avogadro:SOe,bohrRadius:BOe,createUnit:TOe,divide:Bs,electronMass:NOe,factorial:K1,firstRadiation:IOe,gravity:FOe,inverseConductanceQuantum:MOe,lusolve:ez,magneticFluxQuantum:LOe,molarMassC12:DOe,multinomial:kOe,parse:ph,permutations:ROe,planckMass:OOe,polynomialRoot:POe,resolve:gz,setSize:UOe,simplifyConstant:Q3,solveODE:QOe,stirlingS2:tz,unit:GOe,bellNumbers:HOe,compile:sPe,eigs:rz,fermiCoupling:zOe,gasConstant:qOe,kldivergence:jOe,mean:nz,molarVolume:$Oe,planckConstant:KOe,quantileSeq:VOe,simplifyCore:G3,variance:O3,classicalElectronRadius:WOe,evaluate:AE,median:iz,simplify:dE,symbolicEqual:oPe,corr:YOe,freqz:XOe,leafCount:lPe,mad:ZOe,parser:uPe,rationalize:cPe,std:JOe,zeta:ePe,derivative:hPe,norm:P3,rotationMatrix:az,help:fPe,planckTime:tPe,schur:sz,rotate:rPe,sylvester:oz,lyap:nPe,config:Nt});ts(Hp,Gp,{filter:Dke({typed:$e}),forEach:Oke({typed:$e}),map:zke({typed:$e}),apply:Tke({isInteger:yl,typed:$e}),or:M8e({DenseMatrix:on,concat:Qn,equalScalar:bn,matrix:$t,typed:$e}),and:N8e({add:In,concat:Qn,equalScalar:bn,matrix:$t,not:Ww,typed:$e,zeros:Qs}),concat:c8e({isInteger:yl,matrix:$t,typed:$e}),max:$ke({config:Nt,larger:Ko,numeric:sc,typed:$e}),print:S8e({add:In,matrix:$t,typed:$e,zeros:Qs}),bitAnd:k8e({add:In,concat:Qn,equalScalar:bn,matrix:$t,not:Ww,typed:$e,zeros:Qs}),diff:f8e({bignumber:Gl,matrix:$t,number:gf,subtract:pa,typed:$e}),min:Zke({config:Nt,numeric:sc,smaller:$o,typed:$e}),subset:o8e({add:In,matrix:$t,typed:$e,zeros:Qs}),bitOr:P8e({DenseMatrix:on,concat:Qn,equalScalar:bn,matrix:$t,typed:$e}),cumsum:_8e({add:In,typed:$e,unaryPlus:w3}),index:Qke({Index:wo,getMatrixDataType:E3}),sum:m8e({add:In,config:Nt,numeric:sc,typed:$e}),range:t8e({bignumber:Gl,matrix:$t,add:In,config:Nt,isPositive:d0,larger:Ko,largerEq:cE,smaller:$o,smallerEq:dp,typed:$e}),row:i8e({Index:wo,matrix:$t,range:gp,typed:$e}),column:Fke({Index:wo,matrix:$t,range:gp,typed:$e}),mean:Wke({add:In,divide:Bs,typed:$e}),quantileSeq:x8e({add:In,bignumber:Gl,compare:m0,divide:Bs,isInteger:yl,larger:Ko,multiply:li,partitionSelect:fE,smaller:$o,smallerEq:dp,subtract:pa,typed:$e}),variance:b8e({add:In,apply:S3,divide:Bs,isNaN:z1,multiply:li,subtract:pa,typed:$e}),std:g8e({map:g0,sqrt:vc,typed:$e,variance:O3})});ts(lz,{BigNumber:Kt,Complex:Bi,Fraction:f0,Matrix:sE,Node:Bo,ObjectNode:zp,OperatorNode:mf,ParenthesisNode:y0,Range:K8e,RelationalNode:uz,ResultSet:bH,ArrayNode:qp,BlockNode:cz,ConditionalNode:hz,ConstantNode:WA,DenseMatrix:on,RangeNode:fz,Chain:U3,FunctionAssignmentNode:Az,SparseMatrix:pf,IndexNode:jp,ImmutableDenseMatrix:UH,Index:wo,AccessorNode:$p,AssignmentNode:dz,FibonacciHeap:qH,Spa:WH,Unit:zr,SymbolNode:YA,FunctionNode:XA,Help:pz,Parser:mz});U3.createProxy(Gp);class APe{constructor(){this.functions=[{name:"round(x)",desc:"반올림"},{name:"floor(x)",desc:"내림"},{name:"ceil(x)",desc:"올림"},{name:"abs(x)",desc:"절댓값"},{name:"sqrt(x)",desc:"제곱근"},{name:"pow(x, n)",desc:"거듭제곱"},{name:"log(x)",desc:"자연로그"},{name:"log10(x)",desc:"상용로그"},{name:"sin(x)",desc:"사인"},{name:"cos(x)",desc:"코사인"},{name:"tan(x)",desc:"탄젠트"},{name:"min(a, b, ...)",desc:"최솟값"},{name:"max(a, b, ...)",desc:"최댓값"}],this.geoFunctions=[{name:"$area",desc:"면적 (㎡)"},{name:"$length",desc:"길이 (m)"},{name:"$perimeter",desc:"둘레 (m)"}]}calculate(e,t,n,i=!0){const a=pt.getLayer(e);if(!a)throw new Error("레이어를 찾을 수 없습니다.");const o=a.olLayer.getSource().getFeatures();if(o.length===0)throw new Error("레이어에 피처가 없습니다.");let l=0,u=0;return o.forEach((c,h)=>{try{const f=this.evaluateExpression(n,c);c.set(t,f),l++}catch(f){console.warn(`피처 ${h} 계산 오류:`,f.message),u++}}),Gt.emit(Xt.LAYER_CHANGED,{layerId:e}),{success:l,error:u,total:o.length}}evaluateExpression(e,t){let n=e;const i=t.getGeometry();if(n.includes("$area")){const l=i?W5(i):0;n=n.replace(/\$area/g,l)}if(n.includes("$length")){const l=i?Sx(i):0;n=n.replace(/\$length/g,l)}if(n.includes("$perimeter")){let l=0;if(i&&i.getType()==="Polygon"){const u=i.getLinearRing(0).getCoordinates();for(let c=0;c<u.length-1;c++){const h=u[c+1][0]-u[c][0],f=u[c+1][1]-u[c][1];l+=Math.sqrt(h*h+f*f)}}else i&&(l=Sx(i));n=n.replace(/\$perimeter/g,l)}const a=t.getProperties(),s=/\[([^\]]+)\]/g;let o;for(;(o=s.exec(e))!==null;){const l=o[1];let u=a[l];u==null||u===""?u=0:typeof u=="string"&&(u=parseFloat(u)||0),n=n.replace(o[0],u)}try{const l=AE(n);return typeof l=="number"?Math.round(l*1e3)/1e3:l}catch(l){throw new Error(`계산 오류: ${l.message}`)}}getLayerFields(e){const t=pt.getLayer(e);if(!t)return[];const i=t.olLayer.getSource().getFeatures();if(i.length===0)return[];const a=i[0].getProperties();return Object.keys(a).filter(s=>s!=="geometry")}getFunctions(){return this.functions}getGeoFunctions(){return this.geoFunctions}}const Y2=new APe;class dPe{constructor(){this.modal=null,this.currentLayerId=null}show(e=null){if(e||(e=pt.getSelectedLayerId()),!e){alert("먼저 레이어를 선택해주세요.");return}const t=pt.getLayer(e);t&&(this.currentLayerId=e,this.render(t))}render(e){this.close();const t=Y2.getLayerFields(this.currentLayerId),n=Y2.getFunctions(),i=Y2.getGeoFunctions();this.modal=document.createElement("div"),this.modal.className="field-calc-modal",this.modal.innerHTML=this.getModalHTML(e.name,t,n,i),document.body.appendChild(this.modal),this.bindEvents()}getModalHTML(e,t,n,i){const a=t.map(l=>'<button class="field-btn" data-field="'+l+'">['+l+"]</button>").join(""),s=n.map(l=>'<button class="func-btn" data-func="'+l.name+'" title="'+l.desc+'">'+l.name.split("(")[0]+"</button>").join(""),o=i.map(l=>'<button class="geo-btn" data-func="'+l.name+'" title="'+l.desc+'">'+l.name+"</button>").join("");return'<div class="field-calc-content"><div class="field-calc-header"><h3>필드 계산기</h3><button class="field-calc-close" id="field-calc-close">&times;</button></div><div class="field-calc-body"><div class="field-calc-info"><span>레이어: <strong>'+e+'</strong></span></div><div class="field-calc-row"><div class="field-calc-col"><label>결과 필드명</label><input type="text" id="field-calc-name" placeholder="새 필드명 입력"></div><div class="field-calc-col"><label><input type="checkbox" id="field-calc-update"> 기존 필드 업데이트</label><select id="field-calc-existing" disabled><option value="">필드 선택...</option>'+t.map(l=>'<option value="'+l+'">'+l+"</option>").join("")+'</select></div></div><div class="field-calc-section"><label>계산 표현식</label><textarea id="field-calc-expr" rows="3" placeholder="예: [population] / [area] * 1000"></textarea></div><div class="field-calc-helpers"><div class="helper-section"><label>필드</label><div class="helper-buttons">'+(a||'<span class="no-fields">필드 없음</span>')+'</div></div><div class="helper-section"><label>지오메트리</label><div class="helper-buttons">'+o+'</div></div><div class="helper-section"><label>함수</label><div class="helper-buttons">'+s+'</div></div><div class="helper-section"><label>연산자</label><div class="helper-buttons"><button class="op-btn" data-op="+">+</button><button class="op-btn" data-op="-">-</button><button class="op-btn" data-op="*">×</button><button class="op-btn" data-op="/">÷</button><button class="op-btn" data-op="(">(</button><button class="op-btn" data-op=")">)</button></div></div></div></div><div class="field-calc-footer"><button class="btn btn-secondary" id="field-calc-cancel">취소</button><button class="btn btn-primary" id="field-calc-apply">계산 실행</button></div></div>'}bindEvents(){const e=document.getElementById("field-calc-close"),t=document.getElementById("field-calc-cancel"),n=document.getElementById("field-calc-apply"),i=document.getElementById("field-calc-update"),a=document.getElementById("field-calc-existing"),s=document.getElementById("field-calc-name"),o=document.getElementById("field-calc-expr");e.addEventListener("click",()=>this.close()),t.addEventListener("click",()=>this.close()),i.addEventListener("change",l=>{a.disabled=!l.target.checked,s.disabled=l.target.checked,l.target.checked&&a.value&&(s.value=a.value)}),a.addEventListener("change",l=>{i.checked&&(s.value=l.target.value)}),this.modal.querySelectorAll(".field-btn").forEach(l=>{l.addEventListener("click",()=>{this.insertAtCursor(o,"["+l.dataset.field+"]")})}),this.modal.querySelectorAll(".geo-btn").forEach(l=>{l.addEventListener("click",()=>{this.insertAtCursor(o,l.dataset.func)})}),this.modal.querySelectorAll(".func-btn").forEach(l=>{l.addEventListener("click",()=>{this.insertAtCursor(o,l.dataset.func)})}),this.modal.querySelectorAll(".op-btn").forEach(l=>{l.addEventListener("click",()=>{this.insertAtCursor(o," "+l.dataset.op+" ")})}),n.addEventListener("click",()=>this.calculate())}insertAtCursor(e,t){const n=e.selectionStart,i=e.selectionEnd,a=e.value;e.value=a.substring(0,n)+t+a.substring(i),e.selectionStart=e.selectionEnd=n+t.length,e.focus()}calculate(){const e=document.getElementById("field-calc-name").value.trim(),t=document.getElementById("field-calc-expr").value.trim(),n=document.getElementById("field-calc-update").checked;if(!e){alert("결과 필드명을 입력해주세요.");return}if(!t){alert("계산 표현식을 입력해주세요.");return}try{const i=Y2.calculate(this.currentLayerId,e,t,!n);alert(`계산 완료!
성공: ${i.success}개
실패: ${i.error}개`),i.success>0&&this.close()}catch(i){alert("계산 오류: "+i.message)}}close(){this.modal&&(this.modal.remove(),this.modal=null)}}const gPe=new dPe;class pPe{constructor(){this.geoJSONFormat=new rs}intersect(e,t){const n=pt.getLayer(e),i=pt.getLayer(t);if(!n||!i)throw new Error("레이어를 찾을 수 없습니다.");const a=this.getGeoJSONFeatures(n),s=this.getGeoJSONFeatures(i);if(a.length===0||s.length===0)throw new Error("레이어에 피처가 없습니다.");const o=[];for(const l of a)for(const u of s)try{const c=Dde($c([l,u]));c&&o.push(c)}catch(c){console.warn("교차 연산 실패:",c)}if(o.length===0)throw new Error("교차하는 영역이 없습니다.");return this.createResultLayer(o,`${n.name}_∩_${i.name}`,"#22c55e")}union(e,t){const n=pt.getLayer(e),i=pt.getLayer(t);if(!n||!i)throw new Error("레이어를 찾을 수 없습니다.");const a=this.getGeoJSONFeatures(n),s=this.getGeoJSONFeatures(i);if(a.length===0||s.length===0)throw new Error("레이어에 피처가 없습니다.");const o=[...a,...s];let l=o[0];for(let u=1;u<o.length;u++)try{l=H7($c([l,o[u]]))}catch(c){console.warn("합집합 연산 실패:",c)}if(!l)throw new Error("합집합 연산에 실패했습니다.");return this.createResultLayer([l],`${n.name}_∪_${i.name}`,"#3b82f6")}difference(e,t){const n=pt.getLayer(e),i=pt.getLayer(t);if(!n||!i)throw new Error("레이어를 찾을 수 없습니다.");const a=this.getGeoJSONFeatures(n),s=this.getGeoJSONFeatures(i);if(a.length===0||s.length===0)throw new Error("레이어에 피처가 없습니다.");const o=[];for(const l of a){let u=l;for(const c of s)try{const h=Lde($c([u,c]));h&&(u=h)}catch(h){console.warn("차집합 연산 실패:",h)}u&&o.push(u)}if(o.length===0)throw new Error("차집합 연산에 실패했습니다.");return this.createResultLayer(o,`${n.name}_−_${i.name}`,"#ef4444")}clip(e,t){return this.intersect(e,t)}getGeoJSONFeatures(e){return e.olLayer.getSource().getFeatures().map(i=>this.geoJSONFormat.writeFeatureObject(i,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}))}createResultLayer(e,t,n){const i=$c(e),a=this.geoJSONFormat.readFeatures(i,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});return{layerId:pt.addLayer({name:t,features:a,color:n}),featureCount:a.length,layerName:t}}getPolygonLayers(){return pt.getAllLayers().filter(e=>e.geometryType==="Polygon"||e.geometryType==="MultiPolygon")}getOperations(){return[{value:"intersect",label:"교차 (Intersect)",description:"두 레이어가 겹치는 영역"},{value:"union",label:"합집합 (Union)",description:"두 레이어를 하나로 합침"},{value:"difference",label:"차집합 (Difference)",description:"첫 번째 레이어에서 두 번째 제거"},{value:"clip",label:"클리핑 (Clip)",description:"클립 영역으로 자르기"}]}}const X0=new pPe;class mPe{constructor(){this.modal=null}show(){this.render()}render(){this.close();const e=X0.getPolygonLayers(),t=X0.getOperations();if(e.length<2){alert("공간 연산을 수행하려면 최소 2개의 폴리곤 레이어가 필요합니다.");return}this.modal=document.createElement("div"),this.modal.className="modal-overlay spatial-ops-modal active",this.modal.innerHTML=this.getModalHTML(e,t),document.body.appendChild(this.modal),this.bindEvents(),this.updateDescription()}getModalHTML(e,t){const n=e.map(a=>'<option value="'+a.id+'">'+a.name+" ("+a.featureCount+")</option>").join("");return'<div class="modal-content spatial-ops-content"><div class="modal-header"><h3>공간 연산</h3><button class="modal-close" id="spatial-ops-close">&times;</button></div><div class="modal-body"><div class="form-group"><label for="spatial-ops-operation">연산 유형</label><select id="spatial-ops-operation">'+t.map(a=>'<option value="'+a.value+'">'+a.label+"</option>").join("")+'</select></div><div class="form-group"><label id="layer1-label">입력 레이어 1</label><select id="spatial-ops-layer1">'+n+'</select></div><div class="form-group"><label id="layer2-label">입력 레이어 2</label><select id="spatial-ops-layer2">'+n+'</select></div><div class="operation-description" id="operation-desc"><p>두 레이어가 겹치는 영역을 추출합니다.</p></div><div class="operation-preview"><div class="preview-diagram" id="preview-diagram"><div class="preview-shape shape1"></div><div class="preview-shape shape2"></div><div class="preview-result"></div></div></div></div><div class="modal-footer"><button class="btn btn-secondary" id="spatial-ops-cancel">취소</button><button class="btn btn-primary" id="spatial-ops-apply">연산 실행</button></div></div>'}bindEvents(){const e=document.getElementById("spatial-ops-close"),t=document.getElementById("spatial-ops-cancel"),n=document.getElementById("spatial-ops-apply"),i=document.getElementById("spatial-ops-operation"),a=document.getElementById("spatial-ops-layer1"),s=document.getElementById("spatial-ops-layer2");e.addEventListener("click",()=>this.close()),t.addEventListener("click",()=>this.close()),i.addEventListener("change",()=>this.updateDescription()),a.addEventListener("change",()=>{if(a.value===s.value){const o=s.options;for(let l=0;l<o.length;l++)if(o[l].value!==a.value){s.value=o[l].value;break}}}),n.addEventListener("click",()=>this.executeOperation())}updateDescription(){var u,c;const e=document.getElementById("spatial-ops-operation"),t=document.getElementById("operation-desc"),n=document.getElementById("preview-diagram"),i=document.getElementById("layer1-label"),a=document.getElementById("layer2-label"),s=e.value,o={intersect:"두 레이어가 겹치는 영역만 추출합니다.",union:"두 레이어의 모든 영역을 하나로 합칩니다.",difference:"첫 번째 레이어에서 두 번째 레이어와 겹치는 영역을 제거합니다.",clip:"입력 레이어를 클립 레이어의 범위로 자릅니다."},l={intersect:{l1:"레이어 1",l2:"레이어 2"},union:{l1:"레이어 1",l2:"레이어 2"},difference:{l1:"입력 레이어 (유지)",l2:"제거할 레이어"},clip:{l1:"입력 레이어",l2:"클립 레이어"}};t.innerHTML="<p>"+(o[s]||"")+"</p>",i.textContent=((u=l[s])==null?void 0:u.l1)||"레이어 1",a.textContent=((c=l[s])==null?void 0:c.l2)||"레이어 2",n.className="preview-diagram "+s}executeOperation(){const e=document.getElementById("spatial-ops-operation").value,t=document.getElementById("spatial-ops-layer1").value,n=document.getElementById("spatial-ops-layer2").value;if(t===n){alert("서로 다른 레이어를 선택해주세요.");return}const i=document.getElementById("spatial-ops-apply");i.disabled=!0,i.textContent="처리 중...";try{let a;switch(e){case"intersect":a=X0.intersect(t,n);break;case"union":a=X0.union(t,n);break;case"difference":a=X0.difference(t,n);break;case"clip":a=X0.clip(t,n);break;default:throw new Error("알 수 없는 연산입니다.")}alert(`연산 완료!
새 레이어: ${a.layerName}
피처 수: ${a.featureCount}`),this.close()}catch(a){alert("연산 실패: "+a.message),i.disabled=!1,i.textContent="연산 실행"}}close(){this.modal&&(this.modal.remove(),this.modal=null)}}const vPe=new mPe;class yPe{constructor(){this.heatmapLayers=new Map,this.legends=new Map,this.initEventListeners()}initEventListeners(){Gt.on(Xt.LAYER_REMOVED,e=>{const{layerId:t}=e;this.heatmapLayers.has(t)&&(this.heatmapLayers.delete(t),this.removeLegend(t))})}createHeatmap(e,t={}){const{blur:n=15,radius:i=10,weight:a=null,gradient:s=null}=t,o=pt.getLayer(e);if(!o)throw new Error("레이어를 찾을 수 없습니다.");if(o.geometryType!=="Point"&&o.geometryType!=="MultiPoint")throw new Error("히트맵은 포인트 레이어에서만 생성할 수 있습니다.");const u=o.olLayer.getSource().getFeatures();if(u.length===0)throw new Error("레이어에 피처가 없습니다.");const h={source:new zo({features:u.map(d=>d.clone())}),blur:n,radius:i,zIndex:500};a&&(h.weight=d=>{const p=d.get(a);return typeof p=="number"?Math.min(Math.max(p/100,0),1):1}),s&&(h.gradient=s);const f=new CAe(h),A=pt.addLayer({name:`${o.name}_히트맵`,type:"heatmap",olLayer:f,geometryType:"Point",visible:!0});return this.heatmapLayers.set(A,{layer:f,sourceLayerId:e,options:t}),t.hideSource&&o.olLayer.setVisible(!1),this.createLegend(A,o.name,s||this.getGradients()[0].value),A}createLegend(e,t,n){this.removeLegend(e);const i=document.createElement("div");i.className="heatmap-legend",i.id=`heatmap-legend-${e}`;const a=`linear-gradient(to right, ${n.join(", ")})`;i.innerHTML=`
      <div class="heatmap-legend-title">${t} 히트맵</div>
      <div class="heatmap-legend-bar" style="background: ${a}"></div>
      <div class="heatmap-legend-labels">
        <span>낮음</span>
        <span>높음</span>
      </div>
    `;const s=document.getElementById("map");s&&(s.appendChild(i),this.legends.set(e,i))}removeLegend(e){const t=this.legends.get(e);t&&(t.remove(),this.legends.delete(e))}updateHeatmap(e,t){const n=this.heatmapLayers.get(e);if(!n)return;const{layer:i}=n;t.blur!==void 0&&i.setBlur(t.blur),t.radius!==void 0&&i.setRadius(t.radius),t.gradient!==void 0&&i.setGradient(t.gradient)}removeHeatmap(e){this.heatmapLayers.get(e)&&(pt.removeLayer(e),this.heatmapLayers.delete(e),this.removeLegend(e))}getPointLayers(){return pt.getAllLayers().filter(e=>e.geometryType==="Point"||e.geometryType==="MultiPoint")}getGradients(){return[{name:"기본 (파랑-빨강)",value:["#00f","#0ff","#0f0","#ff0","#f00"]},{name:"열화상",value:["#000","#800080","#ff0000","#ffff00","#ffffff"]},{name:"초록색 계열",value:["#ffffcc","#c2e699","#78c679","#31a354","#006837"]},{name:"파랑색 계열",value:["#f7fbff","#deebf7","#c6dbef","#6baed6","#2171b5"]},{name:"단색 (빨강)",value:["rgba(255,0,0,0)","rgba(255,0,0,0.5)","rgba(255,0,0,1)"]}]}getNumericFields(e){const t=pt.getLayer(e);if(!t)return[];const i=t.olLayer.getSource().getFeatures();if(i.length===0)return[];const a=i[0].getProperties(),s=[];for(const o in a)o!=="geometry"&&typeof a[o]=="number"&&s.push(o);return s}}const Z0=new yPe;class xPe{constructor(){this.modal=null,this.selectedLayerId=null}show(){this.render()}render(){this.close();const e=Z0.getPointLayers(),t=Z0.getGradients();if(e.length===0){alert("히트맵을 생성하려면 포인트 레이어가 필요합니다.");return}this.modal=document.createElement("div"),this.modal.className="modal-overlay heatmap-modal active",this.modal.innerHTML=this.getModalHTML(e,t),document.body.appendChild(this.modal),this.selectedLayerId=e[0].id,this.bindEvents(),this.updateWeightFields()}getModalHTML(e,t){const n=e.map(a=>'<option value="'+a.id+'">'+a.name+" ("+a.featureCount+")</option>").join(""),i=t.map((a,s)=>'<option value="'+s+'">'+a.name+"</option>").join("");return'<div class="modal-content heatmap-content"><div class="modal-header"><h3>히트맵 생성</h3><button class="modal-close" id="heatmap-close">&times;</button></div><div class="modal-body"><div class="form-group"><label for="heatmap-layer">포인트 레이어</label><select id="heatmap-layer">'+n+'</select></div><div class="form-group"><label for="heatmap-radius">반경: <span id="radius-value">10</span>px</label><input type="range" id="heatmap-radius" min="1" max="50" value="10"></div><div class="form-group"><label for="heatmap-blur">흐림: <span id="blur-value">15</span>px</label><input type="range" id="heatmap-blur" min="1" max="50" value="15"></div><div class="form-group"><label for="heatmap-gradient">색상 그라디언트</label><select id="heatmap-gradient">'+i+'</select><div class="gradient-preview-container"><div class="gradient-preview" id="gradient-preview"></div><div class="gradient-preview-labels"><span>낮음</span><span>높음</span></div></div></div><div class="form-group"><label class="checkbox-label"><input type="checkbox" id="heatmap-reverse"><span>색상 반전</span></label></div><div class="form-group"><label for="heatmap-weight">가중치 필드 (선택)</label><select id="heatmap-weight"><option value="">없음</option></select></div><div class="form-group"><label><input type="checkbox" id="heatmap-hide-source"> 원본 레이어 숨기기</label></div></div><div class="modal-footer"><button class="btn btn-secondary" id="heatmap-cancel">취소</button><button class="btn btn-primary" id="heatmap-apply">히트맵 생성</button></div></div>'}bindEvents(){const e=document.getElementById("heatmap-close"),t=document.getElementById("heatmap-cancel"),n=document.getElementById("heatmap-apply"),i=document.getElementById("heatmap-layer"),a=document.getElementById("heatmap-radius"),s=document.getElementById("heatmap-blur"),o=document.getElementById("heatmap-gradient");e.addEventListener("click",()=>this.close()),t.addEventListener("click",()=>this.close()),i.addEventListener("change",()=>{this.selectedLayerId=i.value,this.updateWeightFields()}),a.addEventListener("input",u=>{document.getElementById("radius-value").textContent=u.target.value}),s.addEventListener("input",u=>{document.getElementById("blur-value").textContent=u.target.value}),o.addEventListener("change",()=>this.updateGradientPreview()),document.getElementById("heatmap-reverse").addEventListener("change",()=>this.updateGradientPreview()),this.updateGradientPreview(),n.addEventListener("click",()=>this.createHeatmap())}updateWeightFields(){const e=document.getElementById("heatmap-weight"),t=Z0.getNumericFields(this.selectedLayerId);let n='<option value="">없음</option>';t.forEach(i=>{n+='<option value="'+i+'">'+i+"</option>"}),e.innerHTML=n}updateGradientPreview(){const e=document.getElementById("heatmap-gradient"),t=document.getElementById("heatmap-reverse"),n=document.getElementById("gradient-preview"),a=Z0.getGradients()[parseInt(e.value)];if(a){let s=[...a.value];t.checked&&(s=s.reverse());const o="linear-gradient(to right, "+s.join(", ")+")";n.style.background=o}}createHeatmap(){var h;const e=document.getElementById("heatmap-layer").value,t=parseInt(document.getElementById("heatmap-radius").value),n=parseInt(document.getElementById("heatmap-blur").value),i=parseInt(document.getElementById("heatmap-gradient").value),a=document.getElementById("heatmap-reverse").checked,s=document.getElementById("heatmap-weight").value,o=document.getElementById("heatmap-hide-source").checked;let u=(h=Z0.getGradients()[i])==null?void 0:h.value;u&&a&&(u=[...u].reverse());const c=document.getElementById("heatmap-apply");c.disabled=!0,c.textContent="생성 중...";try{const f=Z0.createHeatmap(e,{radius:t,blur:n,gradient:u,weight:s||null,hideSource:o});alert("히트맵이 생성되었습니다."),this.close()}catch(f){alert("히트맵 생성 실패: "+f.message),c.disabled=!1,c.textContent="히트맵 생성"}}close(){this.modal&&(this.modal.remove(),this.modal=null)}}const wPe=new xPe,F6="egis_bookmarks";class _Pe{constructor(){this.bookmarks=[],this.loadFromStorage()}loadFromStorage(){try{const e=localStorage.getItem(F6);e&&(this.bookmarks=JSON.parse(e))}catch(e){console.warn("북마크 로드 실패:",e),this.bookmarks=[]}}saveToStorage(){try{localStorage.setItem(F6,JSON.stringify(this.bookmarks))}catch(e){console.warn("북마크 저장 실패:",e)}}addBookmark(e,t=""){const n=Nr.getView();if(!n)throw new Error("지도가 초기화되지 않았습니다.");const i=n.getCenter(),a=n.getZoom(),s=n.getRotation(),o={id:"bookmark-"+Date.now(),name:e,description:t,center:i,zoom:a,rotation:s,createdAt:new Date().toISOString()};return this.bookmarks.push(o),this.saveToStorage(),Gt.emit("bookmark:added",{bookmark:o}),o}goToBookmark(e){const t=this.bookmarks.find(i=>i.id===e);if(!t)throw new Error("북마크를 찾을 수 없습니다.");const n=Nr.getView();n&&(n.animate({center:t.center,zoom:t.zoom,rotation:t.rotation||0,duration:500}),Gt.emit("bookmark:visited",{bookmark:t}))}removeBookmark(e){const t=this.bookmarks.findIndex(i=>i.id===e);if(t===-1)return;const n=this.bookmarks.splice(t,1)[0];this.saveToStorage(),Gt.emit("bookmark:removed",{bookmark:n})}renameBookmark(e,t){const n=this.bookmarks.find(i=>i.id===e);n&&(n.name=t,this.saveToStorage(),Gt.emit("bookmark:updated",{bookmark:n}))}updateDescription(e,t){const n=this.bookmarks.find(i=>i.id===e);n&&(n.description=t,this.saveToStorage(),Gt.emit("bookmark:updated",{bookmark:n}))}getAllBookmarks(){return[...this.bookmarks]}getCount(){return this.bookmarks.length}clearAll(){this.bookmarks=[],this.saveToStorage(),Gt.emit("bookmark:cleared")}exportBookmarks(){return JSON.stringify(this.bookmarks,null,2)}importBookmarks(e){try{const t=JSON.parse(e);if(!Array.isArray(t))throw new Error("올바른 형식이 아닙니다.");return t.forEach(n=>{n.id="bookmark-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),this.bookmarks.push(n)}),this.saveToStorage(),Gt.emit("bookmark:imported",{count:t.length}),t.length}catch(t){throw new Error("북마크 가져오기 실패: "+t.message)}}}const hd=new _Pe;class EPe{constructor(){this.modal=null,this.init()}init(){Gt.on("bookmark:added",()=>this.refreshList()),Gt.on("bookmark:removed",()=>this.refreshList()),Gt.on("bookmark:updated",()=>this.refreshList()),Gt.on("bookmark:imported",()=>this.refreshList()),Gt.on("bookmark:cleared",()=>this.refreshList())}show(){this.render()}render(){this.close(),this.modal=document.createElement("div"),this.modal.className="modal-overlay bookmark-modal active",this.modal.innerHTML=this.getModalHTML(),document.body.appendChild(this.modal),this.bindEvents(),this.refreshList()}getModalHTML(){return'<div class="modal-content bookmark-content"><div class="modal-header"><h3>북마크</h3><button class="modal-close" id="bookmark-close">&times;</button></div><div class="modal-body"><div class="bookmark-add-section"><input type="text" id="bookmark-name" placeholder="북마크 이름" /><button class="btn btn-primary btn-sm" id="bookmark-add">현재 뷰 저장</button></div><div class="bookmark-list-section"><div class="bookmark-list" id="bookmark-list"><p class="no-bookmarks">저장된 북마크가 없습니다.</p></div></div></div><div class="modal-footer"><button class="btn btn-secondary btn-sm" id="bookmark-import">가져오기</button><button class="btn btn-secondary btn-sm" id="bookmark-export">내보내기</button><button class="btn btn-secondary" id="bookmark-done">닫기</button></div></div>'}bindEvents(){const e=document.getElementById("bookmark-close"),t=document.getElementById("bookmark-done"),n=document.getElementById("bookmark-add"),i=document.getElementById("bookmark-name"),a=document.getElementById("bookmark-import"),s=document.getElementById("bookmark-export");e.addEventListener("click",()=>this.close()),t.addEventListener("click",()=>this.close()),n.addEventListener("click",()=>this.addBookmark()),i.addEventListener("keypress",o=>{o.key==="Enter"&&this.addBookmark()}),a.addEventListener("click",()=>this.importBookmarks()),s.addEventListener("click",()=>this.exportBookmarks()),document.getElementById("bookmark-list").addEventListener("click",o=>{const l=o.target.closest(".bookmark-item");if(!l)return;const u=l.dataset.id;o.target.closest(".bookmark-delete")?this.deleteBookmark(u):o.target.closest(".bookmark-goto")?this.goToBookmark(u):this.goToBookmark(u)})}refreshList(){const e=document.getElementById("bookmark-list");if(!e)return;const t=hd.getAllBookmarks();if(t.length===0){e.innerHTML='<p class="no-bookmarks">저장된 북마크가 없습니다.</p>';return}e.innerHTML=t.map(n=>{const i=new Date(n.createdAt).toLocaleDateString("ko-KR");return'<div class="bookmark-item" data-id="'+n.id+'"><div class="bookmark-info"><span class="bookmark-name">'+this.escapeHtml(n.name)+'</span><span class="bookmark-date">'+i+'</span></div><div class="bookmark-actions"><button class="btn-icon btn-small bookmark-goto" title="이동"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/></svg></button><button class="btn-icon btn-small bookmark-delete" title="삭제"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button></div></div>'}).join("")}addBookmark(){const e=document.getElementById("bookmark-name"),t=e.value.trim();if(!t){alert("북마크 이름을 입력해주세요."),e.focus();return}try{hd.addBookmark(t),e.value="",e.focus()}catch(n){alert("북마크 저장 실패: "+n.message)}}goToBookmark(e){try{hd.goToBookmark(e)}catch(t){alert(t.message)}}deleteBookmark(e){confirm("이 북마크를 삭제하시겠습니까?")&&hd.removeBookmark(e)}exportBookmarks(){if(hd.getAllBookmarks().length===0){alert("내보낼 북마크가 없습니다.");return}const t=hd.exportBookmarks(),n=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(n),a=document.createElement("a");a.href=i,a.download="egis_bookmarks.json",a.click(),URL.revokeObjectURL(i)}importBookmarks(){const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=async t=>{const n=t.target.files[0];if(n)try{const i=await n.text(),a=hd.importBookmarks(i);alert(`${a}개의 북마크를 가져왔습니다.`)}catch(i){alert(i.message)}},e.click()}escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}close(){this.modal&&(this.modal.remove(),this.modal=null)}}const bPe=new EPe;class CPe{constructor(){this.data=null,this.headers=null,this.fileName=null}parseCSV(e){const t=e.trim().split(/\r?\n/);if(t.length<2)throw new Error("CSV 파일에 데이터가 없습니다.");const n=t[0].includes("	")?"	":",",i=this.parseCSVLine(t[0],n),a=[];for(let s=1;s<t.length;s++){const o=t[s].trim();if(!o)continue;const l=this.parseCSVLine(o,n),u={};i.forEach((c,h)=>{let f=l[h]||"";const A=parseFloat(f);!isNaN(A)&&f.trim()!==""?u[c]=A:u[c]=f}),a.push(u)}return{headers:i,data:a}}parseCSVLine(e,t){const n=[];let i="",a=!1;for(let s=0;s<e.length;s++){const o=e[s];o==='"'?a=!a:o===t&&!a?(n.push(i.trim()),i=""):i+=o}return n.push(i.trim()),n}parseXLSX(e){const t=aw(e,{type:"array"}),n=t.SheetNames[0],i=t.Sheets[n],a=f7.sheet_to_json(i,{header:1});if(a.length<2)throw new Error("XLSX 파일에 데이터가 없습니다.");const s=a[0].map(l=>String(l||"").trim()),o=[];for(let l=1;l<a.length;l++){const u={},c=a[l];!c||c.length===0||(s.forEach((h,f)=>{if(h){let A=c[f];if(A==null)u[h]="";else if(typeof A=="number")u[h]=A;else{const d=parseFloat(A);!isNaN(d)&&String(A).trim()!==""?u[h]=d:u[h]=String(A)}}}),o.push(u))}return{headers:s.filter(l=>l),data:o}}async loadFile(e){this.fileName=e.name.replace(/\.[^/.]+$/,"");const t=e.name.toLowerCase().endsWith(".xlsx")||e.name.toLowerCase().endsWith(".xls");return new Promise((n,i)=>{const a=new FileReader;a.onload=s=>{try{let o;t?o=this.parseXLSX(s.target.result):o=this.parseCSV(s.target.result),this.data=o.data,this.headers=o.headers,n(o)}catch(o){i(o)}},a.onerror=()=>i(new Error("파일 읽기 실패")),t?a.readAsArrayBuffer(e):a.readAsText(e,"UTF-8")})}getNumericColumns(){return!this.data||this.data.length===0?[]:this.headers.filter(e=>this.data.slice(0,10).every(n=>{const i=n[e];return i===""||i===null||i===void 0||typeof i=="number"}))}detectCoordinateColumns(){const e=["lat","latitude","위도","y","ycoord","lat_wgs84"],t=["lon","lng","longitude","경도","x","xcoord","lon_wgs84","long"];let n=null,i=null;const a=this.getNumericColumns();for(const s of a){const o=s.toLowerCase();!n&&e.some(l=>o.includes(l))&&(n=s),!i&&t.some(l=>o.includes(l))&&(i=s)}return{latColumn:n,lonColumn:i}}createPointLayer(e,t,n=null){if(!this.data||!e||!t)throw new Error("데이터와 좌표 컬럼을 지정해주세요.");const i=[];let a=0;for(const l of this.data){const u=parseFloat(l[e]),c=parseFloat(l[t]);if(isNaN(u)||isNaN(c)){a++;continue}if(u<-90||u>90||c<-180||c>180){a++;continue}const h=Zm([c,u]),f=new ja(h),A=new yi({geometry:f});for(const[d,p]of Object.entries(l))d!==e&&d!==t&&A.set(d,p);A.set(e,u),A.set(t,c),i.push(A)}if(i.length===0)throw new Error("유효한 좌표가 있는 행이 없습니다.");const s=n||this.fileName||"좌표 레이어";return{layerId:pt.addLayer({name:s,features:i,geometryType:"Point"}),featureCount:i.length,skippedCount:a,layerName:s}}clear(){this.data=null,this.headers=null,this.fileName=null}}const ju=new CPe;class SPe{constructor(){this.modal=null}show(){this.render()}render(){this.close(),this.modal=document.createElement("div"),this.modal.className="modal-overlay coord-import-modal active",this.modal.innerHTML=this.getModalHTML(),document.body.appendChild(this.modal),this.bindEvents()}getModalHTML(){return'<div class="modal-content coord-import-content"><div class="modal-header"><h3>좌표 데이터 가져오기</h3><button class="modal-close" id="coord-import-close">&times;</button></div><div class="modal-body"><div class="form-group"><label>파일 선택</label><div class="file-upload-area" id="coord-file-area"><input type="file" id="coord-file-input" accept=".csv,.txt,.xlsx,.xls" style="display:none"><div class="upload-placeholder" id="coord-upload-placeholder"><span class="upload-icon">📄</span><span>CSV 또는 Excel 파일을 선택하세요</span></div><div class="upload-success" id="coord-upload-success" style="display:none"><span class="success-icon">✓</span><span id="coord-filename"></span><span id="coord-row-count"></span></div></div></div><div id="coord-settings" style="display:none"><div class="form-group"><label for="coord-lat-column">위도(Y) 컬럼</label><select id="coord-lat-column"><option value="">컬럼 선택</option></select></div><div class="form-group"><label for="coord-lon-column">경도(X) 컬럼</label><select id="coord-lon-column"><option value="">컬럼 선택</option></select></div><div class="form-group"><label for="coord-layer-name">레이어 이름</label><input type="text" id="coord-layer-name" placeholder="레이어 이름"></div><div class="coord-preview" id="coord-preview"><div class="preview-title">미리보기</div><div class="preview-info"><span>유효 좌표: <strong id="valid-count">0</strong>개</span><span>잘못된 좌표: <strong id="invalid-count">0</strong>개</span></div></div></div></div><div class="modal-footer"><button class="btn btn-secondary" id="coord-import-cancel">취소</button><button class="btn btn-primary" id="coord-import-apply" disabled>레이어 생성</button></div></div>'}bindEvents(){const e=document.getElementById("coord-import-close"),t=document.getElementById("coord-import-cancel"),n=document.getElementById("coord-import-apply"),i=document.getElementById("coord-file-input"),a=document.getElementById("coord-file-area"),s=document.getElementById("coord-lat-column"),o=document.getElementById("coord-lon-column");e.addEventListener("click",()=>this.close()),t.addEventListener("click",()=>this.close()),a.addEventListener("click",()=>i.click()),i.addEventListener("change",l=>{const u=l.target.files[0];u&&this.handleFile(u)}),a.addEventListener("dragover",l=>{l.preventDefault(),a.classList.add("dragover")}),a.addEventListener("dragleave",()=>{a.classList.remove("dragover")}),a.addEventListener("drop",l=>{l.preventDefault(),a.classList.remove("dragover");const u=l.dataTransfer.files[0];u&&this.handleFile(u)}),s.addEventListener("change",()=>this.updatePreview()),o.addEventListener("change",()=>this.updatePreview()),n.addEventListener("click",()=>this.createLayer())}async handleFile(e){try{await ju.loadFile(e),document.getElementById("coord-upload-placeholder").style.display="none",document.getElementById("coord-upload-success").style.display="flex",document.getElementById("coord-filename").textContent=e.name,document.getElementById("coord-row-count").textContent=`(${ju.data.length}행)`,document.getElementById("coord-settings").style.display="block",this.updateColumnOptions();const t=ju.detectCoordinateColumns();t.latColumn&&(document.getElementById("coord-lat-column").value=t.latColumn),t.lonColumn&&(document.getElementById("coord-lon-column").value=t.lonColumn),document.getElementById("coord-layer-name").value=ju.fileName,this.updatePreview()}catch(t){alert("파일 로드 실패: "+t.message)}}updateColumnOptions(){const e=ju.getNumericColumns(),t=ju.headers,n=document.getElementById("coord-lat-column"),i=document.getElementById("coord-lon-column");let a='<option value="">컬럼 선택</option>';e.length>0&&(a+='<optgroup label="숫자형 컬럼">',e.forEach(s=>{a+=`<option value="${s}">${s}</option>`}),a+="</optgroup>"),a+='<optgroup label="모든 컬럼">',t.forEach(s=>{e.includes(s)||(a+=`<option value="${s}">${s}</option>`)}),a+="</optgroup>",n.innerHTML=a,i.innerHTML=a}updatePreview(){const e=document.getElementById("coord-lat-column").value,t=document.getElementById("coord-lon-column").value,n=document.getElementById("coord-import-apply");if(!e||!t||!ju.data){document.getElementById("valid-count").textContent="0",document.getElementById("invalid-count").textContent="0",n.disabled=!0;return}let i=0,a=0;for(const s of ju.data){const o=parseFloat(s[e]),l=parseFloat(s[t]);!isNaN(o)&&!isNaN(l)&&o>=-90&&o<=90&&l>=-180&&l<=180?i++:a++}document.getElementById("valid-count").textContent=i,document.getElementById("invalid-count").textContent=a,n.disabled=i===0}createLayer(){const e=document.getElementById("coord-lat-column").value,t=document.getElementById("coord-lon-column").value,n=document.getElementById("coord-layer-name").value.trim();if(!e||!t){alert("위도와 경도 컬럼을 선택해주세요.");return}const i=document.getElementById("coord-import-apply");i.disabled=!0,i.textContent="생성 중...";try{const a=ju.createPointLayer(e,t,n);alert(`레이어 생성 완료!
- 레이어: ${a.layerName}
- 포인트 수: ${a.featureCount}
- 제외된 행: ${a.skippedCount}`),ju.clear(),this.close()}catch(a){alert("레이어 생성 실패: "+a.message),i.disabled=!1,i.textContent="레이어 생성"}}close(){this.modal&&(this.modal.remove(),this.modal=null),ju.clear()}}const BPe=new SPe;class TPe{constructor(){this.overlays=new Map,this.legends=new Map,this.colors=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#84cc16","#f97316","#14b8a6","#a855f7","#f43f5e"],this.initEventListeners()}initEventListeners(){Gt.on(Xt.LAYER_REMOVED,e=>{e&&e.layerId&&this.removeChartMap(e.layerId)})}createChartMap(e,t){const{chartType:n="pie",fields:i=[],sizeField:a=null,minSize:s=20,maxSize:o=60,showLabels:l=!1}=t,u=pt.getLayer(e);if(!u)throw new Error("레이어를 찾을 수 없습니다.");this.removeChartMap(e);const h=u.olLayer.getSource().getFeatures(),f=Nr.getMap();if(h.length===0)throw new Error("레이어에 피처가 없습니다.");let A=1/0,d=-1/0;a&&h.forEach(v=>{const w=parseFloat(v.get(a));isNaN(w)||(A=Math.min(A,w),d=Math.max(d,w))});const p={};n==="bar"&&i.forEach(v=>{let w=0;h.forEach(x=>{const b=parseFloat(x.get(v))||0;b>w&&(w=b)}),p[v]=w});const y=[];return h.forEach((v,w)=>{const x=v.getGeometry();let b;x.getType()==="Point"?b=x.getCoordinates():b=Uo(x.getExtent());const C=i.map(M=>parseFloat(v.get(M))||0);if(C.reduce((M,F)=>M+F,0)===0)return;let I=(s+o)/2;if(a&&d>A){const F=((parseFloat(v.get(a))||0)-A)/(d-A);I=s+F*(o-s)}const B=document.createElement("div");if(B.className="chart-overlay",B.style.width=I+"px",B.style.height=I+"px",n==="pie")B.innerHTML=this.createPieChart(C,i,I);else{const M=i.map(F=>p[F]);B.innerHTML=this.createBarChart(C,i,I,M)}const T=new gO({element:B,position:b,positioning:"center-center",stopEvent:!1});f.addOverlay(T),y.push(T)}),this.overlays.set(e,y),this.createLegend(e,u.name,n,i,p),{layerId:e,chartCount:y.length,chartType:n}}createLegend(e,t,n,i,a){this.removeLegend(e);const s=document.createElement("div");s.className="chart-map-legend",s.id=`chart-legend-${e}`;let o=`<div class="chart-legend-title">${t} - ${n==="pie"?"파이":"막대"} 차트</div>`;o+='<div class="chart-legend-items">',i.forEach((u,c)=>{const h=this.colors[c%this.colors.length];let f=u;if(n==="bar"&&a&&a[u]){const A=a[u];f+=` (최대: ${this.formatNumber(A)})`}o+=`
        <div class="chart-legend-item">
          <span class="chart-legend-color" style="background:${h}"></span>
          <span class="chart-legend-label">${f}</span>
        </div>`}),o+="</div>",s.innerHTML=o;const l=document.getElementById("map");l&&(l.appendChild(s),this.legends.set(e,s))}formatNumber(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toLocaleString()}removeLegend(e){const t=this.legends.get(e);t&&(t.remove(),this.legends.delete(e))}createPieChart(e,t,n){const i=e.reduce((c,h)=>c+h,0);if(i===0)return"";const a=n/2,s=n/2,o=n/2-2;let l="",u=-Math.PI/2;return e.forEach((c,h)=>{if(c<=0)return;const f=c/i*2*Math.PI,A=u+f,d=a+o*Math.cos(u),p=s+o*Math.sin(u),y=a+o*Math.cos(A),v=s+o*Math.sin(A),w=f>Math.PI?1:0;l+=`<path d="M ${a} ${s} L ${d} ${p} A ${o} ${o} 0 ${w} 1 ${y} ${v} Z"
                fill="${this.colors[h%this.colors.length]}"
                stroke="white" stroke-width="1"/>`,u=A}),`<svg width="${n}" height="${n}" viewBox="0 0 ${n} ${n}">${l}</svg>`}createBarChart(e,t,n,i=null){const a=i||e.map(()=>Math.max(...e)),s=Math.max(...a);if(s===0)return"";const o=n/2,l=o/e.length,u=(n-o)/2,c=n-4;let h="";return e.forEach((f,A)=>{const d=i?i[A]:s,p=d>0?f/d*c:0,y=u+A*l,v=n-p-2;h+=`<rect x="${y+1}" y="${v}" width="${l-2}" height="${p}"
               fill="${this.colors[A%this.colors.length]}"
               stroke="white" stroke-width="0.5"/>`}),`<svg width="${n}" height="${n}" viewBox="0 0 ${n} ${n}">
      <rect x="0" y="0" width="${n}" height="${n}" fill="rgba(255,255,255,0.8)" rx="2"/>
      ${h}
    </svg>`}removeChartMap(e){const t=this.overlays.get(e);if(t){const n=Nr.getMap();t.forEach(i=>{n.removeOverlay(i)}),this.overlays.delete(e)}this.removeLegend(e)}clearAll(){const e=Nr.getMap();this.overlays.forEach(t=>{t.forEach(n=>{e.removeOverlay(n)})}),this.overlays.clear(),this.legends.forEach(t=>{t.remove()}),this.legends.clear()}getCompatibleLayers(){return pt.getAllLayers().filter(e=>e.geometryType&&e.type!=="heatmap")}getNumericFields(e){const t=pt.getLayer(e);if(!t)return[];const i=t.olLayer.getSource().getFeatures();if(i.length===0)return[];const a=i[0].getProperties(),s=[];for(const o in a)o!=="geometry"&&typeof a[o]=="number"&&s.push(o);return s}getColors(){return this.colors}}const J0=new TPe;class NPe{constructor(){this.modal=null,this.selectedLayerId=null,this.selectedFields=[]}show(){this.render()}render(){this.close();const e=J0.getCompatibleLayers();if(e.length===0){alert("도형표현도를 생성하려면 레이어가 필요합니다.");return}this.modal=document.createElement("div"),this.modal.className="modal-overlay chart-map-modal active",this.modal.innerHTML=this.getModalHTML(e),document.body.appendChild(this.modal),this.selectedLayerId=e[0].id,this.selectedFields=[],this.bindEvents(),this.updateFieldList()}getModalHTML(e){return`<div class="modal-content chart-map-content">
      <div class="modal-header">
        <h3>도형표현도</h3>
        <button class="modal-close" id="chart-map-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="chart-layer">레이어</label>
          <select id="chart-layer">${e.map(n=>`<option value="${n.id}">${n.name} (${n.featureCount})</option>`).join("")}</select>
        </div>
        <div class="form-group">
          <label for="chart-type">차트 유형</label>
          <select id="chart-type">
            <option value="pie">파이 차트</option>
            <option value="bar">막대 차트</option>
          </select>
        </div>
        <div class="form-group">
          <label id="field-select-label">표시할 필드 (2개 이상 선택)</label>
          <div class="field-list" id="chart-field-list"></div>
        </div>
        <div class="form-group">
          <label for="chart-size-field">크기 기준 필드 (선택)</label>
          <select id="chart-size-field">
            <option value="">고정 크기</option>
          </select>
        </div>
        <div class="form-group">
          <label for="chart-min-size">최소 크기: <span id="min-size-value">20</span>px</label>
          <input type="range" id="chart-min-size" min="10" max="40" value="20">
        </div>
        <div class="form-group">
          <label for="chart-max-size">최대 크기: <span id="max-size-value">60</span>px</label>
          <input type="range" id="chart-max-size" min="30" max="100" value="60">
        </div>
        <div class="chart-preview" id="chart-preview">
          <div class="preview-title">미리보기</div>
          <div class="preview-legend" id="chart-legend"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="chart-map-clear">차트 제거</button>
        <button class="btn btn-secondary" id="chart-map-cancel">취소</button>
        <button class="btn btn-primary" id="chart-map-apply" disabled>적용</button>
      </div>
    </div>`}bindEvents(){const e=document.getElementById("chart-map-close"),t=document.getElementById("chart-map-cancel"),n=document.getElementById("chart-map-apply"),i=document.getElementById("chart-map-clear"),a=document.getElementById("chart-layer"),s=document.getElementById("chart-type"),o=document.getElementById("chart-min-size"),l=document.getElementById("chart-max-size");e.addEventListener("click",()=>this.close()),t.addEventListener("click",()=>this.close()),a.addEventListener("change",()=>{this.selectedLayerId=a.value,this.selectedFields=[],this.updateFieldList()}),s.addEventListener("change",()=>{this.updateFieldLabel(),this.updateSelection()}),o.addEventListener("input",u=>{document.getElementById("min-size-value").textContent=u.target.value}),l.addEventListener("input",u=>{document.getElementById("max-size-value").textContent=u.target.value}),n.addEventListener("click",()=>this.apply()),i.addEventListener("click",()=>this.clearCharts())}updateFieldLabel(){const e=document.getElementById("chart-type").value,t=document.getElementById("field-select-label");e==="bar"?t.textContent="표시할 필드 (1개 이상 선택)":t.textContent="표시할 필드 (2개 이상 선택)"}updateFieldList(){const e=document.getElementById("chart-field-list"),t=document.getElementById("chart-size-field"),n=J0.getNumericFields(this.selectedLayerId),i=J0.getColors();let a="";n.forEach((o,l)=>{const u=i[l%i.length];a+=`
        <label class="field-checkbox">
          <input type="checkbox" value="${o}" data-color="${u}">
          <span class="color-box" style="background:${u}"></span>
          ${o}
        </label>`}),e.innerHTML=a||'<div class="no-fields">숫자 필드가 없습니다</div>';let s='<option value="">고정 크기</option>';n.forEach(o=>{s+=`<option value="${o}">${o}</option>`}),t.innerHTML=s,e.querySelectorAll('input[type="checkbox"]').forEach(o=>{o.addEventListener("change",()=>this.updateSelection())}),this.updateSelection()}updateSelection(){const e=document.querySelectorAll("#chart-field-list input:checked");this.selectedFields=Array.from(e).map(a=>a.value);const n=document.getElementById("chart-type").value==="bar"?1:2,i=document.getElementById("chart-map-apply");i.disabled=this.selectedFields.length<n,this.updateLegend()}updateLegend(){const e=document.getElementById("chart-legend"),t=J0.getColors();if(this.selectedFields.length===0){e.innerHTML='<div class="no-selection">필드를 선택하세요</div>';return}let n="";this.selectedFields.forEach((i,a)=>{const s=t[a%t.length];n+=`<div class="legend-item">
        <span class="legend-color" style="background:${s}"></span>
        <span class="legend-label">${i}</span>
      </div>`}),e.innerHTML=n}apply(){const e=document.getElementById("chart-type").value,t=document.getElementById("chart-size-field").value,n=parseInt(document.getElementById("chart-min-size").value),i=parseInt(document.getElementById("chart-max-size").value),a=e==="bar"?1:2;if(this.selectedFields.length<a){alert(e==="bar"?"최소 1개 이상의 필드를 선택해주세요.":"최소 2개 이상의 필드를 선택해주세요.");return}const s=document.getElementById("chart-map-apply");s.disabled=!0,s.textContent="적용 중...";try{const o=J0.createChartMap(this.selectedLayerId,{chartType:e,fields:this.selectedFields,sizeField:t||null,minSize:n,maxSize:i});alert(`도형표현도 생성 완료!
차트 수: ${o.chartCount}`),this.close()}catch(o){alert("도형표현도 생성 실패: "+o.message),s.disabled=!1,s.textContent="적용"}}clearCharts(){J0.removeChartMap(this.selectedLayerId),alert("차트가 제거되었습니다.")}close(){this.modal&&(this.modal.remove(),this.modal=null)}}const IPe=new NPe,Yw="http://www.w3.org/2001/XMLSchema-instance";function x0(r,e){return Kp().createElementNS(r,e)}function yc(r,e){return vz(r,e,[]).join("")}function vz(r,e,t){if(r.nodeType==Node.CDATA_SECTION_NODE||r.nodeType==Node.TEXT_NODE)t.push(r.nodeValue);else{let n;for(n=r.firstChild;n;n=n.nextSibling)vz(n,e,t)}return t}function Kh(r){return"documentElement"in r}function Vh(r){return new DOMParser().parseFromString(r,"application/xml")}function M6(r,e){return function(t,n){const i=r.call(e!==void 0?e:this,t,n);if(i!==void 0){const a=n[n.length-1];ii(a,i)}}}function Zu(r,e){return function(t,n){const i=r.call(e!==void 0?e:this,t,n);i!==void 0&&n[n.length-1].push(i)}}function H3(r,e){return function(t,n){const i=r.call(this,t,n);i!==void 0&&(n[n.length-1]=i)}}function Qt(r,e,t){return function(n,i){const a=r.call(this,n,i);if(a!==void 0){const s=i[i.length-1],o=e!==void 0?e:n.localName;s[o]=a}}}function Vt(r,e){return function(t,n,i){r.call(this,t,n,i),i[i.length-1].node.appendChild(t)}}function yz(r,e){let t,n;return function(i,a,s){if(t===void 0){t={};const o={};o[i.localName]=r,t[i.namespaceURI]=o,n=xc(i.localName)}xz(t,n,a,s)}}function xc(r,e){return function(t,n,i){const s=n[n.length-1].node;let o=r;o===void 0&&(o=i);const l=s.namespaceURI;return x0(l,o)}}const _o=xc();function wl(r,e){const t=e.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=r[e[i]];return n}function ar(r,e,t){t=t!==void 0?t:{};let n,i;for(n=0,i=r.length;n<i;++n)t[r[n]]=e;return t}function ZA(r,e,t,n){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){const a=r[i.namespaceURI];if(a!==void 0){const s=a[i.localName];s!==void 0&&s.call(n,i,t)}}}function Un(r,e,t,n,i){return n.push(r),ZA(e,t,n,i),n.pop()}function xz(r,e,t,n,i,a){const s=(i!==void 0?i:t).length;let o,l;for(let u=0;u<s;++u)o=t[u],o!==void 0&&(l=e.call(a!==void 0?a:this,o,n,i!==void 0?i[u]:void 0),l!==void 0&&r[l.namespaceURI][l.localName].call(a,l,o,n))}function Pi(r,e,t,n,i,a,s){return i.push(r),xz(e,t,n,i,a,s),i.pop()}let IC;function FPe(){return IC===void 0&&typeof XMLSerializer<"u"&&(IC=new XMLSerializer),IC}let FC;function Kp(){return FC===void 0&&typeof document<"u"&&(FC=document.implementation.createDocument("","",null)),FC}class wz extends M4{constructor(){super(),this.xmlSerializer_=FPe()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const n=Vh(e);return this.readFeatureFromDocument(n,t)}return Kh(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const n=this.readFeaturesFromDocument(e,t);return n.length>0?n[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const n=Vh(e);return this.readFeaturesFromDocument(n,t)}return Kh(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const n=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&ii(n,this.readFeaturesFromNode(i,t));return n}readFeaturesFromNode(e,t){return Vr()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const n=Vh(e);return this.readGeometryFromDocument(n,t)}return Kh(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=Vh(e);return this.readProjectionFromDocument(t)}return Kh(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const n=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(n)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const n=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(n)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const n=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(n)}writeGeometryNode(e,t){return null}}function OA(r){const e=yc(r,!1);return MPe(e)}function MPe(r){const e=/^\s*(true|1)|(false|0)\s*$/.exec(r);if(e)return e[1]!==void 0||!1}function gE(r){const e=yc(r,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function si(r){const e=yc(r,!1);return LPe(e)}function LPe(r){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(r);if(e)return parseFloat(e[1])}function f1(r){const e=yc(r,!1);return DPe(e)}function DPe(r){const e=/^\s*(\d+)\s*$/.exec(r);if(e)return parseInt(e[1],10)}function Tn(r){return yc(r,!1).trim()}function pp(r,e){vi(r,e?"1":"0")}function kPe(r,e){r.appendChild(Kp().createCDATASection(e))}function RPe(r,e){const t=new Date(e*1e3),n=t.getUTCFullYear()+"-"+im(t.getUTCMonth()+1,2)+"-"+im(t.getUTCDate(),2)+"T"+im(t.getUTCHours(),2)+":"+im(t.getUTCMinutes(),2)+":"+im(t.getUTCSeconds(),2)+"Z";r.appendChild(Kp().createTextNode(n))}function Al(r,e){const t=e.toPrecision();r.appendChild(Kp().createTextNode(t))}function Xw(r,e){const t=e.toString();r.appendChild(Kp().createTextNode(t))}function vi(r,e){r.appendChild(Kp().createTextNode(e))}const Wi=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],OPe="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",PPe={rte:_z,trk:Ez,wpt:bz},UPe=ar(Wi,{rte:Zu(_z),trk:Zu(Ez),wpt:Zu(bz)}),QPe=ar(Wi,{text:Qt(Tn,"linkText"),type:Qt(Tn,"linkType")}),GPe=ar(Wi,{name:Qt(Tn),email:dUe,link:V1}),HPe=ar(Wi,{name:Qt(Tn),desc:Qt(Tn),author:Qt(hUe),copyright:Qt(fUe),link:V1,time:Qt(gE),keywords:Qt(Tn),bounds:AUe,extensions:pE}),zPe=ar(Wi,{year:Qt(f1),license:Qt(Tn)}),qPe=ar(Wi,{rte:Vt(vUe),trk:Vt(yUe),wpt:Vt(wUe)});class jPe extends wz{constructor(e){super(),e=e||{},this.dataProjection=Ci("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,n=e.length;t<n;++t){const i=e[t];if(this.readExtensions_){const a=i.get("extensionsNode_")||null;this.readExtensions_(i,a)}i.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(Vh(e)):Kh(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){const n=this.readMetadataFromNode(t);if(n)return n}return null}readMetadataFromNode(e){if(!Wi.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(Wi.includes(t.namespaceURI)&&t.localName==="metadata")return Un({},HPe,t,[]);return null}readFeatureFromNode(e,t){if(!Wi.includes(e.namespaceURI))return null;const n=PPe[e.localName];if(!n)return null;const i=n(e,[this.getReadOptions(e,t)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(e,t){if(!Wi.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const n=Un([],UPe,e,[this.getReadOptions(e,t)]);return n?(this.handleReadExtensions_(n),n):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const n=x0("http://www.topografix.com/GPX/1/1","gpx");return n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Yw),n.setAttributeNS(Yw,"xsi:schemaLocation",OPe),n.setAttribute("version","1.1"),n.setAttribute("creator","OpenLayers"),Pi({node:n},qPe,cUe,e,[t]),n}}const $Pe=ar(Wi,{name:Qt(Tn),cmt:Qt(Tn),desc:Qt(Tn),src:Qt(Tn),link:V1,number:Qt(f1),extensions:pE,type:Qt(Tn),rtept:gUe}),KPe=ar(Wi,{ele:Qt(si),time:Qt(gE)}),VPe=ar(Wi,{name:Qt(Tn),cmt:Qt(Tn),desc:Qt(Tn),src:Qt(Tn),link:V1,number:Qt(f1),type:Qt(Tn),extensions:pE,trkseg:mUe}),WPe=ar(Wi,{trkpt:pUe}),YPe=ar(Wi,{ele:Qt(si),time:Qt(gE)}),XPe=ar(Wi,{ele:Qt(si),time:Qt(gE),magvar:Qt(si),geoidheight:Qt(si),name:Qt(Tn),cmt:Qt(Tn),desc:Qt(Tn),src:Qt(Tn),link:V1,sym:Qt(Tn),type:Qt(Tn),fix:Qt(Tn),sat:Qt(f1),hdop:Qt(si),vdop:Qt(si),pdop:Qt(si),ageofdgpsdata:Qt(si),dgpsid:Qt(f1),extensions:pE}),ZPe=["text","type"],JPe=ar(Wi,{text:Vt(vi),type:Vt(vi)}),eUe=ar(Wi,["name","cmt","desc","src","link","number","type","rtept"]),tUe=ar(Wi,{name:Vt(vi),cmt:Vt(vi),desc:Vt(vi),src:Vt(vi),link:Vt(j3),number:Vt(Xw),type:Vt(vi),rtept:yz(Vt($3))}),rUe=ar(Wi,["ele","time"]),nUe=ar(Wi,["name","cmt","desc","src","link","number","type","trkseg"]),iUe=ar(Wi,{name:Vt(vi),cmt:Vt(vi),desc:Vt(vi),src:Vt(vi),link:Vt(j3),number:Vt(Xw),type:Vt(vi),trkseg:yz(Vt(xUe))}),aUe=xc("trkpt"),sUe=ar(Wi,{trkpt:Vt($3)}),oUe=ar(Wi,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),lUe=ar(Wi,{ele:Vt(Al),time:Vt(RPe),magvar:Vt(Al),geoidheight:Vt(Al),name:Vt(vi),cmt:Vt(vi),desc:Vt(vi),src:Vt(vi),link:Vt(j3),sym:Vt(vi),type:Vt(vi),fix:Vt(vi),sat:Vt(Xw),hdop:Vt(Al),vdop:Vt(Al),pdop:Vt(Al),ageofdgpsdata:Vt(Al),dgpsid:Vt(Xw)}),uUe={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function cUe(r,e,t){const n=r.getGeometry();if(n){const i=uUe[n.getType()];if(i){const a=e[e.length-1].node;return x0(a.namespaceURI,i)}}}function z3(r,e,t,n){return r.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in n?(r.push(n.ele),delete n.ele,e.hasZ=!0):r.push(0),"time"in n?(r.push(n.time),delete n.time,e.hasM=!0):r.push(0),r}function q3(r,e,t){let n="XY",i=2;if(r.hasZ&&r.hasM?(n="XYZM",i=4):r.hasZ?(n="XYZ",i=3):r.hasM&&(n="XYM",i=3),i!==4){for(let a=0,s=e.length/4;a<s;a++)e[a*i]=e[a*4],e[a*i+1]=e[a*4+1],r.hasZ&&(e[a*i+2]=e[a*4+2]),r.hasM&&(e[a*i+2]=e[a*4+3]);if(e.length=e.length/4*i,t)for(let a=0,s=t.length;a<s;a++)t[a]=t[a]/4*i}return n}function hUe(r,e){const t=Un({},GPe,r,e);if(t)return t}function fUe(r,e){const t=Un({},zPe,r,e);if(t){const n=r.getAttribute("author");return n!==null&&(t.author=n),t}}function AUe(r,e){const t=e[e.length-1],n=r.getAttribute("minlat"),i=r.getAttribute("minlon"),a=r.getAttribute("maxlat"),s=r.getAttribute("maxlon");i!==null&&n!==null&&s!==null&&a!==null&&(t.bounds=[[parseFloat(i),parseFloat(n)],[parseFloat(s),parseFloat(a)]])}function dUe(r,e){const t=e[e.length-1],n=r.getAttribute("id"),i=r.getAttribute("domain");n!==null&&i!==null&&(t.email=`${n}@${i}`)}function V1(r,e){const t=e[e.length-1],n=r.getAttribute("href");n!==null&&(t.link=n),ZA(QPe,r,e)}function pE(r,e){const t=e[e.length-1];t.extensionsNode_=r}function gUe(r,e){const t=Un({},KPe,r,e);if(t){const n=e[e.length-1],i=n.flatCoordinates,a=n.layoutOptions;z3(i,a,r,t)}}function pUe(r,e){const t=Un({},YPe,r,e);if(t){const n=e[e.length-1],i=n.flatCoordinates,a=n.layoutOptions;z3(i,a,r,t)}}function mUe(r,e){const t=e[e.length-1];ZA(WPe,r,e);const n=t.flatCoordinates;t.ends.push(n.length)}function _z(r,e){const t=e[0],n=Un({flatCoordinates:[],layoutOptions:{}},$Pe,r,e);if(!n)return;const i=n.flatCoordinates;delete n.flatCoordinates;const a=n.layoutOptions;delete n.layoutOptions;const s=q3(a,i),o=new vl(i,s);ql(o,!1,t);const l=new yi(o);return l.setProperties(n,!0),l}function Ez(r,e){const t=e[0],n=Un({flatCoordinates:[],ends:[],layoutOptions:{}},VPe,r,e);if(!n)return;const i=n.flatCoordinates;delete n.flatCoordinates;const a=n.ends;delete n.ends;const s=n.layoutOptions;delete n.layoutOptions;const o=q3(s,i,a),l=new lc(i,o,a);ql(l,!1,t);const u=new yi(l);return u.setProperties(n,!0),u}function bz(r,e){const t=e[0],n=Un({},XPe,r,e);if(!n)return;const i={},a=z3([],i,r,n),s=q3(i,a),o=new ja(a,s);ql(o,!1,t);const l=new yi(o);return l.setProperties(n,!0),l}function j3(r,e,t){r.setAttribute("href",e);const i=t[t.length-1].properties,a=[i.linkText,i.linkType];Pi({node:r},JPe,_o,a,t,ZPe)}function $3(r,e,t){const n=t[t.length-1],a=n.node.namespaceURI,s=n.properties;switch(r.setAttributeNS(null,"lat",String(e[1])),r.setAttributeNS(null,"lon",String(e[0])),n.geometryLayout){case"XYZM":e[3]!==0&&(s.time=e[3]);case"XYZ":e[2]!==0&&(s.ele=e[2]);break;case"XYM":e[2]!==0&&(s.time=e[2]);break}const l=r.nodeName=="rtept"?rUe[a]:oUe[a],u=wl(s,l);Pi({node:r,properties:s},lUe,_o,u,t,l)}function vUe(r,e,t){const n=t[0],i=e.getProperties(),a={node:r};a.properties=i;const s=e.getGeometry();if(s.getType()=="LineString"){const c=ql(s,!0,n);a.geometryLayout=c.getLayout(),i.rtept=c.getCoordinates()}const o=t[t.length-1].node,l=eUe[o.namespaceURI],u=wl(i,l);Pi(a,tUe,_o,u,t,l)}function yUe(r,e,t){const n=t[0],i=e.getProperties(),a={node:r};a.properties=i;const s=e.getGeometry();if(s.getType()=="MultiLineString"){const c=ql(s,!0,n);i.trkseg=c.getLineStrings()}const o=t[t.length-1].node,l=nUe[o.namespaceURI],u=wl(i,l);Pi(a,iUe,_o,u,t,l)}function xUe(r,e,t){const n={node:r};n.geometryLayout=e.getLayout(),n.properties={},Pi(n,sUe,aUe,e.getCoordinates(),t)}function wUe(r,e,t){const n=t[0],i=t[t.length-1];i.properties=e.getProperties();const a=e.getGeometry();if(a.getType()=="Point"){const s=ql(a,!0,n);i.geometryLayout=s.getLayout(),$3(r,s.getCoordinates(),t)}}const vf=["http://www.google.com/kml/ext/2.2"],Cr=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],_Ue="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",L6={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},EUe=ar(Cr,{ExtendedData:Uz,Region:Qz,MultiGeometry:Qt(Rz,"geometry"),LineString:Qt(Dz,"geometry"),LinearRing:Qt(kz,"geometry"),Point:Qt(Oz,"geometry"),Polygon:Qt(Pz,"geometry"),Style:Qt(W3),StyleMap:s7e,address:Qt(Tn),description:Qt(Tn),name:Qt(Tn),open:Qt(OA),phoneNumber:Qt(Tn),styleUrl:Qt(Nz),visibility:Qt(OA)},ar(vf,{MultiTrack:Qt(KUe,"geometry"),Track:Qt(Lz,"geometry")})),bUe=ar(Cr,{ExtendedData:Uz,Region:Qz,Link:v7e,address:Qt(Tn),description:Qt(Tn),name:Qt(Tn),open:Qt(OA),phoneNumber:Qt(Tn),visibility:Qt(OA)}),CUe=ar(Cr,{href:Qt(Tz)}),SUe=ar(Cr,{Altitude:Qt(si),Longitude:Qt(si),Latitude:Qt(si),Tilt:Qt(si),AltitudeMode:Qt(Tn),Heading:Qt(si),Roll:Qt(si)}),Cz=ar(Cr,{LatLonAltBox:h7e,Lod:A7e}),BUe=ar(Cr,["Document","Placemark"]),TUe=ar(Cr,{Document:Vt(S7e),Placemark:Vt(zz)});let zg,vx=null,O5,bv,Cv,Sv,Zw,P5=null,K3,U5=null,Q5,Sd=null,D6=null,G5=null;function Jw(r){return 32/Math.min(r[0],r[1])}function NUe(){zg=[255,255,255,1],vx=new _n({color:zg}),O5=[20,2],bv="pixels",Cv="pixels",Sv=[64,64],Zw="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",P5=new xp({anchor:O5,anchorOrigin:"bottom-left",anchorXUnits:bv,anchorYUnits:Cv,crossOrigin:"anonymous",rotation:0,scale:Jw(Sv),size:Sv,src:Zw}),K3="NO_IMAGE",U5=new hn({color:zg,width:1}),Q5=new hn({color:[51,51,51,1],width:2}),Sd=new rc({font:"bold 16px Helvetica",fill:vx,stroke:Q5,scale:.8}),D6=new En({fill:vx,image:P5,text:Sd,stroke:U5,zIndex:0}),G5=[D6]}let X2;function IUe(r){return r}class FUe extends wz{constructor(e){super(),e=e||{},G5||NUe(),this.dataProjection=Ci("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:G5,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:IUe,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const n=ar(Cr,{Document:M6(this.readDocumentOrFolder_,this),Folder:M6(this.readDocumentOrFolder_,this),Placemark:Zu(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),i=Un([],n,e,t,this);if(i)return i}readPlacemark_(e,t){const n=Un({geometry:null},EUe,e,t,this);if(!n)return;const i=new yi,a=e.getAttribute("id");a!==null&&i.setId(a);const s=t[0],o=n.geometry;if(o&&ql(o,!1,s),i.setGeometry(o),delete n.geometry,this.extractStyles_){const l=n.Style,u=n.styleUrl,c=LUe(l,u,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(c)}return delete n.Style,i.setProperties(n,!0),i}readSharedStyle_(e,t){const n=e.getAttribute("id");if(n!==null){const i=W3.call(this,e,t);if(i){let a,s=e.baseURI;(!s||s=="about:blank")&&(s=window.location.href),s?a=new URL("#"+n,s).href:a="#"+n,this.sharedStyles_[a]=i}}}readSharedStyleMap_(e,t){const n=e.getAttribute("id");if(n===null)return;const i=Fz.call(this,e,t);if(!i)return;let a,s=e.baseURI;(!s||s=="about:blank")&&(s=window.location.href),s?a=new URL("#"+n,s).href:a="#"+n,this.sharedStyles_[a]=i}readFeatureFromNode(e,t){if(!Cr.includes(e.namespaceURI))return null;const n=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return n||null}readFeaturesFromNode(e,t){if(!Cr.includes(e.namespaceURI))return[];let n;const i=e.localName;if(i=="Document"||i=="Folder")return n=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),n||[];if(i=="Placemark"){const a=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return a?[a]:[]}if(i=="kml"){n=[];for(let a=e.firstElementChild;a;a=a.nextElementSibling){const s=this.readFeaturesFromNode(a,t);s&&ii(n,s)}return n}return[]}readName(e){if(e){if(typeof e=="string"){const t=Vh(e);return this.readNameFromDocument(t)}return Kh(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const n=this.readNameFromNode(t);if(n)return n}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(Cr.includes(t.namespaceURI)&&t.localName=="name")return Tn(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const n=t.localName;if(Cr.includes(t.namespaceURI)&&(n=="Document"||n=="Folder"||n=="Placemark"||n=="kml")){const i=this.readNameFromNode(t);if(i)return i}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const n=Vh(e);ii(t,this.readNetworkLinksFromDocument(n))}else Kh(e)?ii(t,this.readNetworkLinksFromDocument(e)):ii(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&ii(t,this.readNetworkLinksFromNode(n));return t}readNetworkLinksFromNode(e){const t=[];for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(Cr.includes(n.namespaceURI)&&n.localName=="NetworkLink"){const i=Un({},bUe,n,[]);t.push(i)}for(let n=e.firstElementChild;n;n=n.nextElementSibling){const i=n.localName;Cr.includes(n.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&ii(t,this.readNetworkLinksFromNode(n))}return t}readRegion(e){const t=[];if(typeof e=="string"){const n=Vh(e);ii(t,this.readRegionFromDocument(n))}else Kh(e)?ii(t,this.readRegionFromDocument(e)):ii(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&ii(t,this.readRegionFromNode(n));return t}readRegionFromNode(e){const t=[];for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(Cr.includes(n.namespaceURI)&&n.localName=="Region"){const i=Un({},Cz,n,[]);t.push(i)}for(let n=e.firstElementChild;n;n=n.nextElementSibling){const i=n.localName;Cr.includes(n.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&ii(t,this.readRegionFromNode(n))}return t}readCamera(e){const t=[];if(typeof e=="string"){const n=Vh(e);ii(t,this.readCameraFromDocument(n))}else Kh(e)?ii(t,this.readCameraFromDocument(e)):ii(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType===Node.ELEMENT_NODE&&ii(t,this.readCameraFromNode(n));return t}readCameraFromNode(e){const t=[];for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(Cr.includes(n.namespaceURI)&&n.localName==="Camera"){const i=Un({},SUe,n,[]);t.push(i)}for(let n=e.firstElementChild;n;n=n.nextElementSibling){const i=n.localName;Cr.includes(n.namespaceURI)&&(i==="Document"||i==="Folder"||i==="Placemark"||i==="kml")&&ii(t,this.readCameraFromNode(n))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const n=x0(Cr[4],"kml"),i="http://www.w3.org/2000/xmlns/";n.setAttributeNS(i,"xmlns:gx",vf[0]),n.setAttributeNS(i,"xmlns:xsi",Yw),n.setAttributeNS(Yw,"xsi:schemaLocation",_Ue);const a={node:n},s={};e.length>1?s.Document=e:e.length==1&&(s.Placemark=e[0]);const o=BUe[n.namespaceURI],l=wl(s,o);return Pi(a,TUe,_o,l,[t],o,this),n}}function MUe(r,e){const t=[0,0];let n="start";const i=r.getImage();if(i){const o=i.getSize();if(o&&o.length==2){const l=i.getScaleArray(),u=i.getAnchor();t[0]=l[0]*(o[0]-u[0]),t[1]=l[1]*(o[1]/2-u[1]),n="left"}}let a=r.getText();return a?(a=a.clone(),a.setFont(a.getFont()||Sd.getFont()),a.setScale(a.getScale()||Sd.getScale()),a.setFill(a.getFill()||Sd.getFill()),a.setStroke(a.getStroke()||Q5)):a=Sd.clone(),a.setText(e),a.setOffsetX(t[0]),a.setOffsetY(t[1]),a.setTextAlign(n),new En({image:i,text:a})}function LUe(r,e,t,n,i){return function(a,s){let o=i,l="",u=[];if(o){const h=a.getGeometry();if(h)if(h instanceof Gs)u=h.getGeometriesArrayRecursive().filter(function(f){const A=f.getType();return A==="Point"||A==="MultiPoint"}),o=u.length>0;else{const f=h.getType();o=f==="Point"||f==="MultiPoint"}}o&&(l=a.get("name"),o=o&&!!l,o&&/&[^&]+;/.test(l)&&(X2||(X2=document.createElement("textarea")),X2.innerHTML=l,l=X2.value));let c=t;if(r?c=r:e&&(c=Sz(e,t,n)),o){const h=MUe(c[0],l);if(u.length>0){h.setGeometry(new Gs(u));const f=new En({geometry:c[0].getGeometry(),image:null,fill:c[0].getFill(),stroke:c[0].getStroke(),text:null});return[h,f].concat(c.slice(1))}return h}return c}}function Sz(r,e,t){return Array.isArray(r)?r:typeof r=="string"?Sz(t[r],e,t):e}function mE(r){const e=yc(r,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const n=t[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}}function Bz(r){let e=yc(r,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let i;for(;i=n.exec(e);){const a=parseFloat(i[1]),s=parseFloat(i[2]),o=i[3]?parseFloat(i[3]):0;t.push(a,s,o),e=e.substr(i[0].length)}if(e==="")return t}function Tz(r){const e=yc(r,!1).trim();let t=r.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function Nz(r){const e=yc(r,!1).trim().replace(/^(?!.*#)/,"#");let t=r.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function DUe(r){const e=r.getAttribute("xunits"),t=r.getAttribute("yunits");let n;return e!=="insetPixels"?t!=="insetPixels"?n="bottom-left":n="top-left":t!=="insetPixels"?n="bottom-right":n="top-right",{x:parseFloat(r.getAttribute("x")),xunits:L6[e],y:parseFloat(r.getAttribute("y")),yunits:L6[t],origin:n}}function Iz(r){return si(r)}const kUe=ar(Cr,{Pair:a7e});function Fz(r,e){return Un(void 0,kUe,r,e,this)}const RUe=ar(Cr,{Icon:Qt(YUe),color:Qt(mE),heading:Qt(si),hotSpot:Qt(DUe),scale:Qt(Iz)});function OUe(r,e){const t=Un({},RUe,r,e);if(!t)return;const n=e[e.length-1],i="Icon"in t?t.Icon:{},a=!("Icon"in t)||Object.keys(i).length>0;let s;const o=i.href;o?s=o:a&&(s=Zw);let l,u,c,h="bottom-left";const f=t.hotSpot;f?(l=[f.x,f.y],u=f.xunits,c=f.yunits,h=f.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(s)&&(s.includes("pushpin")?(l=O5,u=bv,c=Cv):s.includes("arrow-reverse")?(l=[54,42],u=bv,c=Cv):s.includes("paddle")&&(l=[32,1],u=bv,c=Cv));let A;const d=i.x,p=i.y;d!==void 0&&p!==void 0&&(A=[d,p]);let y;const v=i.w,w=i.h;v!==void 0&&w!==void 0&&(y=[v,w]);let x;const b=t.heading;b!==void 0&&(x=xA(b));const C=t.scale,S=t.color;if(a){s==Zw&&(y=Sv);const I=new xp({anchor:l,anchorOrigin:h,anchorXUnits:u,anchorYUnits:c,crossOrigin:this.crossOrigin_,offset:A,offsetOrigin:"bottom-left",rotation:x,scale:C,size:y,src:this.iconUrlFunction_(s),color:S}),B=I.getScaleArray()[0],T=I.getSize();if(T===null){const M=I.getImageState();if(M===pr.IDLE||M===pr.LOADING){const F=function(){const N=I.getImageState();if(!(N===pr.IDLE||N===pr.LOADING)){const O=I.getSize();if(O&&O.length==2){const L=Jw(O);I.setScale(B*L)}I.unlistenImageChange(F)}};I.listenImageChange(F),M===pr.IDLE&&I.load()}}else if(T.length==2){const M=Jw(T);I.setScale(B*M)}n.imageStyle=I}else n.imageStyle=K3}const PUe=ar(Cr,{color:Qt(mE),scale:Qt(Iz)});function UUe(r,e){const t=Un({},PUe,r,e);if(!t)return;const n=e[e.length-1],i=new rc({fill:new _n({color:"color"in t?t.color:zg}),scale:t.scale});n.textStyle=i}const QUe=ar(Cr,{color:Qt(mE),width:Qt(si)});function GUe(r,e){const t=Un({},QUe,r,e);if(!t)return;const n=e[e.length-1],i=new hn({color:"color"in t?t.color:zg,width:"width"in t?t.width:1});n.strokeStyle=i}const HUe=ar(Cr,{color:Qt(mE),fill:Qt(OA),outline:Qt(OA)});function zUe(r,e){const t=Un({},HUe,r,e);if(!t)return;const n=e[e.length-1],i=new _n({color:"color"in t?t.color:zg});n.fillStyle=i;const a=t.fill;a!==void 0&&(n.fill=a);const s=t.outline;s!==void 0&&(n.outline=s)}const qUe=ar(Cr,{coordinates:H3(Bz)});function Mz(r,e){return Un(null,qUe,r,e)}function jUe(r,e){const n=e[e.length-1].coordinates,i=yc(r,!1),s=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(s){const o=parseFloat(s[1]),l=parseFloat(s[2]),u=parseFloat(s[3]);n.push([o,l,u])}else n.push([])}const $Ue=ar(vf,{Track:Zu(Lz)});function KUe(r,e){const t=Un([],$Ue,r,e);if(t)return new lc(t)}const VUe=ar(Cr,{when:y7e},ar(vf,{coord:jUe}));function Lz(r,e){const t=Un({coordinates:[],whens:[]},VUe,r,e);if(!t)return;const n=[],i=t.coordinates,a=t.whens;for(let s=0,o=Math.min(i.length,a.length);s<o;++s)i[s].length==3&&n.push(i[s][0],i[s][1],i[s][2],a[s]);return new vl(n,"XYZM")}const WUe=ar(Cr,{href:Qt(Tz)},ar(vf,{x:Qt(si),y:Qt(si),w:Qt(si),h:Qt(si)}));function YUe(r,e){const t=Un({},WUe,r,e);return t||null}const XUe=ar(Cr,{coordinates:H3(Bz)});function V3(r,e){return Un(null,XUe,r,e)}const vE=ar(Cr,{extrude:Qt(OA),tessellate:Qt(OA),altitudeMode:Qt(Tn)});function Dz(r,e){const t=Un({},vE,r,e),n=V3(r,e);if(n){const i=new vl(n,"XYZ");return i.setProperties(t,!0),i}}function kz(r,e){const t=Un({},vE,r,e),n=V3(r,e);if(n){const i=new zl(n,"XYZ",[n.length]);return i.setProperties(t,!0),i}}const ZUe=ar(Cr,{LineString:Zu(Dz),LinearRing:Zu(kz),MultiGeometry:Zu(Rz),Point:Zu(Oz),Polygon:Zu(Pz)});function Rz(r,e){const t=Un([],ZUe,r,e);if(!t)return null;if(t.length===0)return new Gs(t);let n,i=!0;const a=t[0].getType();let s;for(let o=1,l=t.length;o<l;++o)if(s=t[o],s.getType()!=a){i=!1;break}if(i){let o,l;if(a=="Point"){const u=t[0];o=u.getLayout(),l=u.getFlatCoordinates();for(let c=1,h=t.length;c<h;++c)s=t[c],ii(l,s.getFlatCoordinates());n=new UA(l,o),MC(n,t)}else if(a=="LineString")n=new lc(t),MC(n,t);else if(a=="Polygon")n=new af(t),MC(n,t);else if(a=="GeometryCollection")n=new Gs(t);else throw new Error("Unknown geometry type found")}else n=new Gs(t);return n}function Oz(r,e){const t=Un({},vE,r,e),n=V3(r,e);if(n){const i=new ja(n,"XYZ");return i.setProperties(t,!0),i}}const JUe=ar(Cr,{innerBoundaryIs:g7e,outerBoundaryIs:m7e});function Pz(r,e){const t=Un({},vE,r,e),n=Un([null],JUe,r,e);if(n&&n[0]){const i=n[0],a=[i.length];for(let o=1,l=n.length;o<l;++o)ii(i,n[o]),a.push(i.length);const s=new zl(i,"XYZ",a);return s.setProperties(t,!0),s}}const e7e=ar(Cr,{IconStyle:OUe,LabelStyle:UUe,LineStyle:GUe,PolyStyle:zUe});function W3(r,e){const t=Un({},e7e,r,e,this);if(!t)return null;let n="fillStyle"in t?t.fillStyle:vx;const i=t.fill;i!==void 0&&!i&&(n=null);let a;"imageStyle"in t?t.imageStyle!=K3&&(a=t.imageStyle):a=P5;const s="textStyle"in t?t.textStyle:Sd,o="strokeStyle"in t?t.strokeStyle:U5,l=t.outline;return l!==void 0&&!l?[new En({geometry:function(u){const c=u.getGeometry(),h=c.getType();if(h==="GeometryCollection"){const f=c;return new Gs(f.getGeometriesArrayRecursive().filter(function(A){const d=A.getType();return d!=="Polygon"&&d!=="MultiPolygon"}))}if(h!=="Polygon"&&h!=="MultiPolygon")return c},fill:n,image:a,stroke:o,text:s,zIndex:void 0}),new En({geometry:function(u){const c=u.getGeometry(),h=c.getType();if(h==="GeometryCollection"){const f=c;return new Gs(f.getGeometriesArrayRecursive().filter(function(A){const d=A.getType();return d==="Polygon"||d==="MultiPolygon"}))}if(h==="Polygon"||h==="MultiPolygon")return c},fill:n,stroke:null,zIndex:void 0})]:[new En({fill:n,image:a,stroke:o,text:s,zIndex:void 0})]}function MC(r,e){const t=e.length,n=new Array(e.length),i=new Array(e.length),a=new Array(e.length);let s,o,l;s=!1,o=!1,l=!1;for(let u=0;u<t;++u){const c=e[u];n[u]=c.get("extrude"),i[u]=c.get("tessellate"),a[u]=c.get("altitudeMode"),s=s||n[u]!==void 0,o=o||i[u]!==void 0,l=l||a[u]}s&&r.set("extrude",n),o&&r.set("tessellate",i),l&&r.set("altitudeMode",a)}const t7e=ar(Cr,{displayName:Qt(Tn),value:Qt(Tn)});function r7e(r,e){const t=r.getAttribute("name");ZA(t7e,r,e);const n=e[e.length-1];t&&n.displayName?n[t]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:t!==null?n[t]=n.value:n.displayName!==null&&(n[n.displayName]=n.value),delete n.value}const n7e=ar(Cr,{Data:r7e,SchemaData:l7e});function Uz(r,e){ZA(n7e,r,e)}function Qz(r,e){ZA(Cz,r,e)}const i7e=ar(Cr,{Style:Qt(W3),key:Qt(Tn),styleUrl:Qt(Nz)});function a7e(r,e){const t=Un({},i7e,r,e,this);if(!t)return;const n=t.key;if(n&&n=="normal"){const i=t.styleUrl;i&&(e[e.length-1]=i);const a=t.Style;a&&(e[e.length-1]=a)}}function s7e(r,e){const t=Fz.call(this,r,e);if(!t)return;const n=e[e.length-1];if(Array.isArray(t))n.Style=t;else if(typeof t=="string")n.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const o7e=ar(Cr,{SimpleData:u7e});function l7e(r,e){ZA(o7e,r,e)}function u7e(r,e){const t=r.getAttribute("name");if(t!==null){const n=Tn(r),i=e[e.length-1];i[t]=n}}const c7e=ar(Cr,{altitudeMode:Qt(Tn),minAltitude:Qt(si),maxAltitude:Qt(si),north:Qt(si),south:Qt(si),east:Qt(si),west:Qt(si)});function h7e(r,e){const t=Un({},c7e,r,e);if(!t)return;const n=e[e.length-1],i=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];n.extent=i,n.altitudeMode=t.altitudeMode,n.minAltitude=parseFloat(t.minAltitude),n.maxAltitude=parseFloat(t.maxAltitude)}const f7e=ar(Cr,{minLodPixels:Qt(si),maxLodPixels:Qt(si),minFadeExtent:Qt(si),maxFadeExtent:Qt(si)});function A7e(r,e){const t=Un({},f7e,r,e);if(!t)return;const n=e[e.length-1];n.minLodPixels=parseFloat(t.minLodPixels),n.maxLodPixels=parseFloat(t.maxLodPixels),n.minFadeExtent=parseFloat(t.minFadeExtent),n.maxFadeExtent=parseFloat(t.maxFadeExtent)}const d7e=ar(Cr,{LinearRing:Zu(Mz)});function g7e(r,e){const t=Un([],d7e,r,e);t.length>0&&e[e.length-1].push(...t)}const p7e=ar(Cr,{LinearRing:H3(Mz)});function m7e(r,e){const t=Un(void 0,p7e,r,e);if(t){const n=e[e.length-1];n[0]=t}}function v7e(r,e){ZA(CUe,r,e)}function y7e(r,e){const n=e[e.length-1].whens,i=yc(r,!1),a=Date.parse(i);n.push(isNaN(a)?0:a)}function yE(r,e){const t=Pd(e),i=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let a=0;a<4;++a){const s=Math.floor(i[a]).toString(16);i[a]=s.length==1?"0"+s:s}vi(r,i.join(""))}function x7e(r,e,t){const n=t[t.length-1],i=n.layout,a=n.stride;let s;if(i=="XY"||i=="XYM")s=2;else if(i=="XYZ"||i=="XYZM")s=3;else throw new Error("Invalid geometry layout");const o=e.length;let l="";if(o>0){l+=e[0];for(let u=1;u<s;++u)l+=","+e[u];for(let u=a;u<o;u+=a){l+=" "+e[u];for(let c=1;c<s;++c)l+=","+e[u+c]}}vi(r,l)}const yx=ar(Cr,{Data:Vt(w7e),value:Vt(E7e),displayName:Vt(_7e)});function w7e(r,e,t){r.setAttribute("name",e.name);const n={node:r},i=e.value;typeof i=="object"?(i!==null&&i.displayName&&Pi(n,yx,_o,[i.displayName],t,["displayName"]),i!==null&&i.value&&Pi(n,yx,_o,[i.value],t,["value"])):Pi(n,yx,_o,[i],t,["value"])}function _7e(r,e){kPe(r,e)}function E7e(r,e){vi(r,e)}const b7e=ar(Cr,{Placemark:Vt(zz)}),C7e=function(r,e,t){const n=e[e.length-1].node;return x0(n.namespaceURI,"Placemark")};function S7e(r,e,t){Pi({node:r},b7e,C7e,e,t,void 0,this)}const B7e=xc("Data");function T7e(r,e,t){const n={node:r},i=e.names,a=e.values,s=i.length;for(let o=0;o<s;o++)Pi(n,yx,B7e,[{name:i[o],value:a[o]}],t)}const k6=ar(Cr,["href"],ar(vf,["x","y","w","h"])),R6=ar(Cr,{href:Vt(vi)},ar(vf,{x:Vt(Al),y:Vt(Al),w:Vt(Al),h:Vt(Al)})),N7e=function(r,e,t){return x0(vf[0],"gx:"+t)};function I7e(r,e,t){const n={node:r},i=t[t.length-1].node;let a=k6[i.namespaceURI],s=wl(e,a);Pi(n,R6,_o,s,t,a),a=k6[vf[0]],s=wl(e,a),Pi(n,R6,N7e,s,t,a)}const F7e=ar(Cr,["scale","heading","Icon","color","hotSpot"]),M7e=ar(Cr,{Icon:Vt(I7e),color:Vt(yE),heading:Vt(Al),hotSpot:Vt(a9e),scale:Vt(jz)});function L7e(r,e,t){const n={node:r},i={},a=e.getSrc(),s=e.getSize(),o=e.getImageSize(),l={href:a};if(s){l.w=s[0],l.h=s[1];const y=e.getAnchor(),v=e.getOrigin();if(v&&o&&v[0]!==0&&v[1]!==s[1]&&(l.x=v[0],l.y=o[1]-(v[1]+s[1])),y&&(y[0]!==s[0]/2||y[1]!==s[1]/2)){const w={x:y[0],xunits:"pixels",y:s[1]-y[1],yunits:"pixels"};i.hotSpot=w}}i.Icon=l;let u=e.getScaleArray()[0],c=s;if(c===null&&(c=Sv),c.length==2){const y=Jw(c);u=u/y}u!==1&&(i.scale=u);const h=e.getRotation();h!==0&&(i.heading=h);const f=e.getColor();f&&(i.color=f);const A=t[t.length-1].node,d=F7e[A.namespaceURI],p=wl(i,d);Pi(n,M7e,_o,p,t,d)}const D7e=ar(Cr,["color","scale"]),k7e=ar(Cr,{color:Vt(yE),scale:Vt(jz)});function R7e(r,e,t){const n={node:r},i={},a=e.getFill();a&&(i.color=a.getColor());const s=e.getScale();s&&s!==1&&(i.scale=s);const o=t[t.length-1].node,l=D7e[o.namespaceURI],u=wl(i,l);Pi(n,k7e,_o,u,t,l)}const O7e=ar(Cr,["color","width"]),P7e=ar(Cr,{color:Vt(yE),width:Vt(Al)});function U7e(r,e,t){const n={node:r},i={color:e.getColor(),width:Number(e.getWidth())||1},a=t[t.length-1].node,s=O7e[a.namespaceURI],o=wl(i,s);Pi(n,P7e,_o,o,t,s)}const Q7e={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},Gz=function(r,e,t){if(r){const n=e[e.length-1].node;return x0(n.namespaceURI,Q7e[r.getType()])}},G7e=xc("Point"),H7e=xc("LineString"),z7e=xc("LinearRing"),q7e=xc("Polygon"),j7e=ar(Cr,{LineString:Vt(qg),Point:Vt(qg),Polygon:Vt(qz),GeometryCollection:Vt(Hz)});function Hz(r,e,t){const n={node:r},i=e.getType();let a=[],s;if(i==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(o){const l=o.getType();if(l==="MultiPoint")a=a.concat(o.getPoints());else if(l==="MultiLineString")a=a.concat(o.getLineStrings());else if(l==="MultiPolygon")a=a.concat(o.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")a.push(o);else throw new Error("Unknown geometry type")}),s=Gz;else if(i==="MultiPoint")a=e.getPoints(),s=G7e;else if(i==="MultiLineString")a=e.getLineStrings(),s=H7e;else if(i==="MultiPolygon")a=e.getPolygons(),s=q7e;else throw new Error("Unknown geometry type");Pi(n,j7e,s,a,t)}const $7e=ar(Cr,{LinearRing:Vt(qg)});function O6(r,e,t){Pi({node:r},$7e,z7e,[e],t)}const LC=ar(Cr,{ExtendedData:Vt(T7e),MultiGeometry:Vt(Hz),LineString:Vt(qg),LinearRing:Vt(qg),Point:Vt(qg),Polygon:Vt(qz),Style:Vt(i9e),address:Vt(vi),description:Vt(vi),name:Vt(vi),open:Vt(pp),phoneNumber:Vt(vi),styleUrl:Vt(vi),visibility:Vt(pp)}),K7e=ar(Cr,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),V7e=xc("ExtendedData");function zz(r,e,t){const n={node:r};e.getId()&&r.setAttribute("id",e.getId());const i=e.getProperties(),a={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};a[e.getGeometryName()]=1;const s=Object.keys(i||{}).sort().filter(function(A){return!a[A]}),o=e.getStyleFunction();if(o){const A=o(e,0);if(A){const d=Array.isArray(A)?A:[A];let p=d;if(e.getGeometry()&&(p=d.filter(function(y){const v=y.getGeometryFunction()(e);if(v){const w=v.getType();return w==="GeometryCollection"?v.getGeometriesArrayRecursive().filter(function(x){const b=x.getType();return b==="Point"||b==="MultiPoint"}).length:w==="Point"||w==="MultiPoint"}})),this.writeStyles_){let y=d,v=d;e.getGeometry()&&(y=d.filter(function(w){const x=w.getGeometryFunction()(e);if(x){const b=x.getType();return b==="GeometryCollection"?x.getGeometriesArrayRecursive().filter(function(C){const S=C.getType();return S==="LineString"||S==="MultiLineString"}).length:b==="LineString"||b==="MultiLineString"}}),v=d.filter(function(w){const x=w.getGeometryFunction()(e);if(x){const b=x.getType();return b==="GeometryCollection"?x.getGeometriesArrayRecursive().filter(function(C){const S=C.getType();return S==="Polygon"||S==="MultiPolygon"}).length:b==="Polygon"||b==="MultiPolygon"}})),i.Style={pointStyles:p,lineStyles:y,polyStyles:v}}if(p.length&&i.name===void 0){const y=p[0].getText();y&&(i.name=y.getText())}}}const l=t[t.length-1].node,u=K7e[l.namespaceURI],c=wl(i,u);if(Pi(n,LC,_o,c,t,u),s.length>0){const A=wl(i,s);Pi(n,LC,V7e,[{names:s,values:A}],t)}const h=t[0];let f=e.getGeometry();f&&(f=ql(f,!0,h)),Pi(n,LC,Gz,[f],t)}const W7e=ar(Cr,["extrude","tessellate","altitudeMode","coordinates"]),Y7e=ar(Cr,{extrude:Vt(pp),tessellate:Vt(pp),altitudeMode:Vt(vi),coordinates:Vt(x7e)});function qg(r,e,t){const n=e.getFlatCoordinates(),i={node:r};i.layout=e.getLayout(),i.stride=e.getStride();const a=e.getProperties();a.coordinates=n;const s=t[t.length-1].node,o=W7e[s.namespaceURI],l=wl(a,o);Pi(i,Y7e,_o,l,t,o)}const X7e=ar(Cr,["color","fill","outline"]),P6=ar(Cr,{outerBoundaryIs:Vt(O6),innerBoundaryIs:Vt(O6)}),Z7e=xc("innerBoundaryIs"),J7e=xc("outerBoundaryIs");function qz(r,e,t){const n=e.getLinearRings(),i=n.shift(),a={node:r};Pi(a,P6,Z7e,n,t),Pi(a,P6,J7e,[i],t)}const e9e=ar(Cr,{color:Vt(yE),fill:Vt(pp),outline:Vt(pp)});function t9e(r,e,t){const n={node:r},i=e.getFill(),a=e.getStroke(),s={color:i?i.getColor():void 0,fill:i?void 0:!1,outline:a?void 0:!1},o=t[t.length-1].node,l=X7e[o.namespaceURI],u=wl(s,l);Pi(n,e9e,_o,u,t,l)}function jz(r,e){Al(r,Math.round(e*1e6)/1e6)}const r9e=ar(Cr,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),n9e=ar(Cr,{IconStyle:Vt(L7e),LabelStyle:Vt(R7e),LineStyle:Vt(U7e),PolyStyle:Vt(t9e)});function i9e(r,e,t){const n={node:r},i={};if(e.pointStyles.length){const l=e.pointStyles[0].getText();l&&(i.LabelStyle=l);const u=e.pointStyles[0].getImage();u&&typeof u.getSrc=="function"&&(i.IconStyle=u)}if(e.lineStyles.length){const l=e.lineStyles[0].getStroke();l&&(i.LineStyle=l)}if(e.polyStyles.length){const l=e.polyStyles[0].getStroke();l&&!i.LineStyle&&(i.LineStyle=l),i.PolyStyle=e.polyStyles[0]}const a=t[t.length-1].node,s=r9e[a.namespaceURI],o=wl(i,s);Pi(n,n9e,_o,o,t,s)}function a9e(r,e){r.setAttribute("x",String(e.x)),r.setAttribute("y",String(e.y)),r.setAttribute("xunits",e.xunits),r.setAttribute("yunits",e.yunits)}const DC=["rgba(0, 128, 0, 0.3)","rgba(144, 238, 144, 0.3)","rgba(255, 255, 0, 0.3)","rgba(255, 165, 0, 0.3)","rgba(255, 69, 0, 0.3)","rgba(255, 0, 0, 0.3)"],kC={"driving-car":"자동차","cycling-regular":"자전거","foot-walking":"도보"};class s9e{constructor(){this.apiKey=localStorage.getItem("ors_api_key")||"",this.baseUrl="https://api.openrouteservice.org/v2/isochrones",this.isochroneLayers=[],this.isochroneLayerIds=[],this.markerLayer=null,this.legend=null,this.isSelecting=!1,this.clickHandler=null,Gt.on(Xt.LAYER_REMOVED,e=>{this.onLayerRemoved(e.layerId)})}onLayerRemoved(e){const t=this.isochroneLayerIds.indexOf(e);t!==-1&&(this.isochroneLayerIds.splice(t,1),this.isochroneLayers.splice(t,1),this.isochroneLayerIds.length===0&&this.removeLegend())}setApiKey(e){this.apiKey=e,localStorage.setItem("ors_api_key",e)}getApiKey(){return this.apiKey}getProfiles(){return kC}startSelectingPoint(e){const t=Nr.getMap();t&&(this.isSelecting=!0,t.getTargetElement().style.cursor="crosshair",this.clickHandler&&t.un("click",this.clickHandler),this.clickHandler=n=>{const i=n.coordinate,a=Jd(i,"EPSG:3857","EPSG:4326");this.stopSelectingPoint(),e&&e(a,i)},t.on("click",this.clickHandler))}stopSelectingPoint(){const e=Nr.getMap();e&&(this.isSelecting=!1,e.getTargetElement().style.cursor="",this.clickHandler&&(e.un("click",this.clickHandler),this.clickHandler=null))}showMarker(e){const t=Nr.getMap();if(!t)return;this.removeMarker();const n=new yi({geometry:new ja(e)});n.setStyle(new En({image:new qs({radius:8,fill:new _n({color:"#e74c3c"}),stroke:new hn({color:"#fff",width:2})})})),this.markerLayer=new Ql({source:new zo({features:[n]}),zIndex:1e3}),t.addLayer(this.markerLayer)}removeMarker(){if(this.markerLayer){const e=Nr.getMap();e&&e.removeLayer(this.markerLayer),this.markerLayer=null}}async analyze(e,t={}){var l;const{profile:n="driving-car",intervals:i=[5,10,15],rangeType:a="time"}=t;if(!this.apiKey)throw new Error("OpenRouteService API 키가 설정되지 않았습니다.");const s=a==="time"?i.map(u=>u*60):i.map(u=>u*1e3),o={locations:[[e[0],e[1]]],range:s,range_type:a};try{const u=await fetch(`${this.baseUrl}/${n}`,{method:"POST",headers:{Authorization:this.apiKey,"Content-Type":"application/json"},body:JSON.stringify(o)});if(!u.ok){const h=await u.json().catch(()=>({}));throw new Error(((l=h.error)==null?void 0:l.message)||`API 오류: ${u.status}`)}const c=await u.json();return this.displayIsochrones(c,i,a,n)}catch(u){throw console.error("Isochrone API error:",u),u}}displayIsochrones(e,t,n,i){const a=Nr.getMap();if(!a)return null;this.removeIsochrones();const o=new rs().readFeatures(e,{featureProjection:"EPSG:3857"});o.reverse();const l=kC[i]||i,u=n==="time"?"분":"km";let c=null;return o.forEach((h,f)=>{const A=Math.min(f,DC.length-1),d=o.length-1-f,p=t[d];h.set("interval",p),h.set("rangeType",n);const y=h.clone();y.setStyle(null);const v=new zo({features:[h]}),w=new Ql({source:v,zIndex:100+f});this.isochroneLayers.push(w);const x=["#008000","#90EE90","#FFFF00","#FFA500","#FF4500","#FF0000"][A],b=`등시선 ${l} ${p}${u}`,C=pt.addLayer({name:b,type:"vector",geometryType:"Polygon",features:[y],color:x});this.isochroneLayerIds.push(C);const S=v.getExtent();c?(c[0]=Math.min(c[0],S[0]),c[1]=Math.min(c[1],S[1]),c[2]=Math.max(c[2],S[2]),c[3]=Math.max(c[3],S[3])):c=S.slice()}),this.createLegend(t,n,i),c&&a.getView().fit(c,{padding:[50,50,50,50],maxZoom:15}),{featureCount:o.length,intervals:t,layerIds:this.isochroneLayerIds}}createLegend(e,t,n){this.removeLegend();const i=document.createElement("div");i.className="isochrone-legend",i.id="isochrone-legend";let s=`<div class="isochrone-legend-title">${kC[n]||n} 등시선</div>`;s+='<div class="isochrone-legend-items">',e.forEach((l,u)=>{const c=Math.min(e.length-1-u,DC.length-1),h=DC[c].replace("0.3","0.6"),f=t==="time"?`${l}분`:`${l}km`;s+=`
        <div class="isochrone-legend-item">
          <span class="isochrone-legend-color" style="background:${h}"></span>
          <span class="isochrone-legend-label">${f} 이내</span>
        </div>`}),s+="</div>",i.innerHTML=s;const o=document.getElementById("map");o&&(o.appendChild(i),this.legend=i)}removeLegend(){this.legend&&(this.legend.remove(),this.legend=null)}removeIsochrones(){this.isochroneLayerIds.forEach(e=>{pt.removeLayer(e)}),this.isochroneLayers=[],this.isochroneLayerIds=[],this.removeLegend()}saveAsLayer(e="등시선 분석 결과"){if(this.isochroneLayerIds.length===0)throw new Error("저장할 등시선 결과가 없습니다.");return this.isochroneLayerIds}clear(){this.stopSelectingPoint(),this.removeMarker(),this.removeIsochrones()}}const fd=new s9e;class o9e{constructor(){this.modal=null,this.selectedPoint=null,this.selectedCoordinate=null,this.selectedLayerId=null,this.selectedFeatureId=null}show(){this.render()}getPointLayers(){return pt.getAllLayers().filter(e=>e.geometryType==="Point"||e.geometryType==="MultiPoint")}render(){this.close();const e=fd.getProfiles(),t=fd.getApiKey(),n=this.getPointLayers();this.modal=document.createElement("div"),this.modal.className="modal-overlay isochrone-modal active",this.modal.innerHTML=this.getModalHTML(e,t,n),document.body.appendChild(this.modal),this.bindEvents(),this.updateFeatureList(),this.updateAnalyzeButton()}getModalHTML(e,t,n){const i=Object.entries(e).map(([s,o])=>`<option value="${s}">${o}</option>`).join(""),a=n.length>0?n.map(s=>`<option value="${s.id}">${s.name} (${s.featureCount}개)</option>`).join(""):'<option value="">포인트 레이어 없음</option>';return`<div class="modal-content isochrone-content">
      <div class="modal-header">
        <h3>등시선 분석</h3>
        <button class="modal-close" id="isochrone-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="ors-api-key">OpenRouteService API 키</label>
          <div class="api-key-input-group">
            <input type="password" id="ors-api-key" value="${t}" placeholder="API 키 입력">
            <button type="button" class="btn btn-sm" id="toggle-api-key">보기</button>
            <button type="button" class="btn btn-sm btn-primary" id="save-api-key">저장</button>
          </div>
          <small class="form-hint">
            <a href="https://openrouteservice.org/dev/#/signup" target="_blank">openrouteservice.org</a>에서 무료 API 키를 발급받으세요
          </small>
        </div>

        <div class="form-group">
          <label for="isochrone-layer">포인트 레이어</label>
          <select id="isochrone-layer">${a}</select>
        </div>

        <div class="form-group">
          <label for="isochrone-feature">시작점 피처</label>
          <select id="isochrone-feature">
            <option value="">피처 선택...</option>
          </select>
        </div>

        <div class="form-group">
          <label>선택된 좌표</label>
          <div class="point-display" id="point-display">
            선택된 위치 없음
          </div>
        </div>

        <div class="form-group">
          <label for="travel-profile">이동 수단</label>
          <select id="travel-profile">${i}</select>
        </div>

        <div class="form-group">
          <label for="range-type">분석 유형</label>
          <select id="range-type">
            <option value="time">시간 기준</option>
            <option value="distance">거리 기준</option>
          </select>
        </div>

        <div class="form-group">
          <label id="intervals-label">시간 간격 (분)</label>
          <div class="intervals-input">
            <input type="text" id="intervals-input" value="5, 10, 15" placeholder="예: 5, 10, 15, 30">
            <small class="form-hint" id="intervals-hint">쉼표로 구분하여 원하는 시간(분)을 입력하세요</small>
          </div>
        </div>

        <div class="isochrone-info">
          <p>등시선(Isochrone)은 특정 지점에서 일정 시간/거리 내에 도달 가능한 영역을 표시합니다.</p>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="isochrone-clear">결과 지우기</button>
        <button class="btn btn-secondary" id="isochrone-cancel">취소</button>
        <button class="btn btn-primary" id="isochrone-analyze" disabled>분석 실행</button>
      </div>
    </div>`}bindEvents(){const e=document.getElementById("isochrone-close"),t=document.getElementById("isochrone-cancel"),n=document.getElementById("isochrone-analyze"),i=document.getElementById("isochrone-clear"),a=document.getElementById("ors-api-key"),s=document.getElementById("toggle-api-key"),o=document.getElementById("range-type"),l=document.getElementById("isochrone-layer"),u=document.getElementById("isochrone-feature");e.addEventListener("click",()=>this.close()),t.addEventListener("click",()=>this.close()),n.addEventListener("click",()=>this.analyze()),i.addEventListener("click",()=>this.clearResults()),a.addEventListener("input",()=>{fd.setApiKey(a.value),this.updateAnalyzeButton()}),s.addEventListener("click",()=>{a.type==="password"?(a.type="text",s.textContent="숨김"):(a.type="password",s.textContent="보기")}),document.getElementById("save-api-key").addEventListener("click",()=>{const f=a.value.trim();f?(fd.setApiKey(f),alert("API 키가 저장되었습니다.")):alert("API 키를 입력해주세요.")}),o.addEventListener("change",()=>{this.updateIntervalLabels()}),document.getElementById("intervals-input").addEventListener("input",()=>this.updateAnalyzeButton()),l.addEventListener("change",()=>{this.selectedLayerId=l.value,this.updateFeatureList()}),u.addEventListener("change",()=>{this.onFeatureSelected()}),l.value&&(this.selectedLayerId=l.value)}updateFeatureList(){const e=document.getElementById("isochrone-feature");if(e.innerHTML='<option value="">피처 선택...</option>',!this.selectedLayerId)return;const t=pt.getLayer(this.selectedLayerId);if(!t)return;t.source.getFeatures().forEach((i,a)=>{const s=i.getProperties();let o=s.name||s.NAME||s.id||s.ID||`피처 ${a+1}`;typeof o=="object"&&(o=`피처 ${a+1}`);const l=document.createElement("option");l.value=a,l.textContent=o,e.appendChild(l)}),this.selectedPoint=null,this.selectedCoordinate=null,this.updatePointDisplay(),this.updateAnalyzeButton()}onFeatureSelected(){const t=document.getElementById("isochrone-feature").value;if(!t||!this.selectedLayerId){this.selectedPoint=null,this.selectedCoordinate=null,this.updatePointDisplay(),this.updateAnalyzeButton();return}const n=pt.getLayer(this.selectedLayerId);if(!n)return;const a=n.source.getFeatures()[parseInt(t)];if(!a)return;const s=a.getGeometry();let o;s.getType()==="Point"?o=s.getCoordinates():s.getType()==="MultiPoint"&&(o=s.getCoordinates()[0]),o&&(this.selectedCoordinate=o,this.selectedPoint=Jd(o,"EPSG:3857","EPSG:4326"),fd.showMarker(o)),this.updatePointDisplay(),this.updateAnalyzeButton()}updatePointDisplay(){const e=document.getElementById("point-display");this.selectedPoint?(e.textContent=`${this.selectedPoint[1].toFixed(6)}, ${this.selectedPoint[0].toFixed(6)}`,e.classList.add("has-point")):(e.textContent="선택된 위치 없음",e.classList.remove("has-point"))}updateIntervalLabels(){const e=document.getElementById("range-type").value,t=document.getElementById("intervals-label"),n=document.getElementById("intervals-input"),i=document.getElementById("intervals-hint");e==="time"?(t.textContent="시간 간격 (분)",n.placeholder="예: 5, 10, 15, 30",i.textContent="쉼표로 구분하여 원하는 시간(분)을 입력하세요",n.value="5, 10, 15"):(t.textContent="거리 간격 (km)",n.placeholder="예: 1, 2, 5, 10",i.textContent="쉼표로 구분하여 원하는 거리(km)를 입력하세요",n.value="1, 2, 5")}updateAnalyzeButton(){const e=document.getElementById("isochrone-analyze");if(!e)return;const t=document.getElementById("ors-api-key").value,n=this.getSelectedIntervals(),i=t&&this.selectedPoint&&n.length>0;e.disabled=!i}getSelectedIntervals(){const t=document.getElementById("intervals-input").value.trim();return t?t.split(",").map(n=>parseFloat(n.trim())).filter(n=>!isNaN(n)&&n>0).sort((n,i)=>n-i):[]}async analyze(){if(!this.selectedPoint){alert("시작점을 선택해주세요.");return}if(!document.getElementById("ors-api-key").value){alert("API 키를 입력해주세요.");return}const t=this.getSelectedIntervals();if(t.length===0){alert("최소 하나의 간격을 선택해주세요.");return}const n=document.getElementById("travel-profile").value,i=document.getElementById("range-type").value,a=document.getElementById("isochrone-analyze");a.disabled=!0,a.textContent="분석 중...";try{const s=await fd.analyze(this.selectedPoint,{profile:n,intervals:t,rangeType:i});alert(`등시선 분석 완료!
생성된 영역: ${s.featureCount}개`)}catch(s){alert("분석 실패: "+s.message)}finally{a.disabled=!1,a.textContent="분석 실행",this.updateAnalyzeButton()}}clearResults(){fd.clear(),this.selectedPoint=null,this.selectedCoordinate=null;const e=document.getElementById("isochrone-feature");e&&(e.value=""),this.updatePointDisplay(),this.updateAnalyzeButton()}close(){this.modal&&(this.modal.remove(),this.modal=null)}}const l9e=new o9e,RC={"driving-car":"자동차","cycling-regular":"자전거","foot-walking":"도보"},u9e={start:"#22c55e",end:"#ef4444",waypoint:"#3b82f6"};class c9e{constructor(){this.apiKey=localStorage.getItem("ors_api_key")||"",this.baseUrl="https://api.openrouteservice.org/v2/directions",this.routeLayer=null,this.routeLayerId=null,this.markersLayer=null,this.isSelecting=!1,this.clickHandler=null,this.selectingType=null,this.startPoint=null,this.endPoint=null,this.waypoints=[],this.lastRouteInfo=null,Gt.on(Xt.LAYER_REMOVED,e=>{e.layerId===this.routeLayerId&&(this.routeLayerId=null,this.routeLayer=null,this.lastRouteInfo=null,this.removeMarkers(),this.startPoint=null,this.endPoint=null,this.waypoints=[])}),Gt.on(Xt.LAYER_VISIBILITY_CHANGED,e=>{e.layerId===this.routeLayerId&&this.markersLayer&&this.markersLayer.setVisible(e.visible)})}setApiKey(e){this.apiKey=e,localStorage.setItem("ors_api_key",e)}getApiKey(){return this.apiKey}getProfiles(){return RC}startSelectingPoint(e,t){const n=Nr.getMap();n&&(this.isSelecting=!0,this.selectingType=e,n.getTargetElement().style.cursor="crosshair",this.clickHandler&&n.un("click",this.clickHandler),this.clickHandler=i=>{const a=i.coordinate,s=Jd(a,"EPSG:3857","EPSG:4326");e==="start"?this.startPoint={lonLat:s,coordinate:a}:e==="end"?this.endPoint={lonLat:s,coordinate:a}:e==="waypoint"&&this.waypoints.push({lonLat:s,coordinate:a}),this.stopSelectingPoint(),this.updateMarkers(),t&&t(s,a,e)},n.on("click",this.clickHandler))}stopSelectingPoint(){const e=Nr.getMap();e&&(this.isSelecting=!1,this.selectingType=null,e.getTargetElement().style.cursor="",this.clickHandler&&(e.un("click",this.clickHandler),this.clickHandler=null))}updateMarkers(){const e=Nr.getMap();if(!e)return;this.removeMarkers();const t=[];if(this.startPoint){const n=new yi({geometry:new ja(this.startPoint.coordinate),type:"start"});n.setStyle(this.createMarkerStyle("start","S")),t.push(n)}if(this.waypoints.forEach((n,i)=>{const a=new yi({geometry:new ja(n.coordinate),type:"waypoint",index:i});a.setStyle(this.createMarkerStyle("waypoint",String(i+1))),t.push(a)}),this.endPoint){const n=new yi({geometry:new ja(this.endPoint.coordinate),type:"end"});n.setStyle(this.createMarkerStyle("end","E")),t.push(n)}t.length>0&&(this.markersLayer=new Ql({source:new zo({features:t}),zIndex:1001}),e.addLayer(this.markersLayer))}createMarkerStyle(e,t){const n=u9e[e];return new En({image:new qs({radius:12,fill:new _n({color:n}),stroke:new hn({color:"#fff",width:2})}),text:new rc({text:t,fill:new _n({color:"#fff"}),font:"bold 11px sans-serif",offsetY:1})})}removeMarkers(){if(this.markersLayer){const e=Nr.getMap();e&&e.removeLayer(this.markersLayer),this.markersLayer=null}}removeWaypoint(e){this.waypoints.splice(e,1),this.updateMarkers()}clearWaypoints(){this.waypoints=[],this.updateMarkers()}async analyze(e={}){var a;const{profile:t="driving-car"}=e;if(!this.apiKey)throw new Error("OpenRouteService API 키가 설정되지 않았습니다.");if(!this.startPoint||!this.endPoint)throw new Error("출발지와 도착지를 모두 선택해주세요.");const i={coordinates:[this.startPoint.lonLat,...this.waypoints.map(s=>s.lonLat),this.endPoint.lonLat]};try{const s=await fetch(`${this.baseUrl}/${t}/geojson`,{method:"POST",headers:{Authorization:this.apiKey,"Content-Type":"application/json"},body:JSON.stringify(i)});if(!s.ok){const l=await s.json().catch(()=>({}));throw new Error(((a=l.error)==null?void 0:a.message)||`API 오류: ${s.status}`)}const o=await s.json();return this.displayRoute(o,t)}catch(s){throw console.error("Routing API error:",s),s}}displayRoute(e,t){const n=Nr.getMap();if(!n)return null;this.removeRoute();const a=new rs().readFeatures(e,{featureProjection:"EPSG:3857"}),s=this.extractRouteInfo(e,t);this.lastRouteInfo=s;const l=`최단경로 ${RC[t]||t} (${s.distanceText})`;this.routeLayerId=pt.addLayer({name:l,type:"vector",geometryType:"LineString",features:a.map(f=>f.clone())});const u=pt.getLayer(this.routeLayerId);u&&(this.routeLayer=u.layer);const h=new zo({features:a}).getExtent();return n.getView().fit(h,{padding:[50,50,50,50],maxZoom:16}),this.updateMarkers(),s}extractRouteInfo(e,t){const i=e.features[0].properties,a=i.summary,s=(a.distance/1e3).toFixed(2),o=Math.round(a.duration/60),l=Math.floor(o/60),u=o%60;let c;l>0?c=`${l}시간 ${u}분`:c=`${o}분`;const h=i.segments||[],f=[];return h.forEach(A=>{A.steps&&A.steps.forEach(d=>{f.push({instruction:d.instruction,distance:d.distance,duration:d.duration,name:d.name})})}),{distance:a.distance,distanceText:`${s} km`,duration:a.duration,durationText:c,profile:RC[t],steps:f}}removeRoute(){this.routeLayerId&&(pt.removeLayer(this.routeLayerId),this.routeLayerId=null),this.routeLayer=null,this.lastRouteInfo=null}saveAsLayer(e="최단경로 분석 결과"){if(!this.routeLayerId)throw new Error("저장할 경로 결과가 없습니다.");return this.routeLayerId}swapStartEnd(){const e=this.startPoint;this.startPoint=this.endPoint,this.endPoint=e,this.updateMarkers()}clear(){this.stopSelectingPoint(),this.removeMarkers(),this.removeRoute(),this.startPoint=null,this.endPoint=null,this.waypoints=[],this.lastRouteInfo=null}getState(){return{startPoint:this.startPoint,endPoint:this.endPoint,waypoints:this.waypoints,hasRoute:!!this.routeLayerId,routeInfo:this.lastRouteInfo}}}const Ki=new c9e;class h9e{constructor(){this.modal=null}show(){this.render()}getPointLayers(){return pt.getAllLayers().filter(e=>e.geometryType==="Point"||e.geometryType==="MultiPoint")}render(){this.close();const e=Ki.getProfiles(),t=Ki.getApiKey(),n=this.getPointLayers(),i=Ki.getState();this.modal=document.createElement("div"),this.modal.className="modal-overlay routing-modal active",this.modal.innerHTML=this.getModalHTML(e,t,n,i),document.body.appendChild(this.modal),this.bindEvents(),this.updateStartFeatures(),this.updateEndFeatures(),this.updateUI()}getModalHTML(e,t,n,i){const a=Object.entries(e).map(([o,l])=>`<option value="${o}">${l}</option>`).join(""),s=n.length>0?n.map(o=>`<option value="${o.id}">${o.name} (${o.featureCount}개)</option>`).join(""):'<option value="">포인트 레이어 없음</option>';return`<div class="modal-content routing-content">
      <div class="modal-header">
        <h3>최단경로 분석</h3>
        <button class="modal-close" id="routing-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="routing-api-key">OpenRouteService API 키</label>
          <div class="api-key-input-group">
            <input type="password" id="routing-api-key" value="${t}" placeholder="API 키 입력">
            <button type="button" class="btn btn-sm" id="routing-toggle-api-key">보기</button>
            <button type="button" class="btn btn-sm btn-primary" id="routing-save-api-key">저장</button>
          </div>
          <small class="form-hint">
            <a href="https://openrouteservice.org/dev/#/signup" target="_blank">openrouteservice.org</a>에서 무료 API 키를 발급받으세요
          </small>
        </div>

        <div class="routing-points-section">
          <div class="routing-point-group start-point">
            <div class="routing-point-header">
              <span class="routing-point-marker start">S</span>
              <span class="routing-point-label">출발지</span>
            </div>
            <div class="routing-point-selects">
              <select id="routing-start-layer" class="routing-layer-select">${s}</select>
              <select id="routing-start-feature" class="routing-feature-select">
                <option value="">피처 선택...</option>
              </select>
            </div>
          </div>

          <div class="waypoints-container" id="waypoints-container">
            <!-- 경유지들이 여기에 추가됨 -->
          </div>

          <div class="add-waypoint-container">
            <button type="button" class="btn btn-sm" id="add-waypoint-btn">+ 경유지 추가</button>
          </div>

          <div class="routing-point-group end-point">
            <div class="routing-point-header">
              <span class="routing-point-marker end">E</span>
              <span class="routing-point-label">도착지</span>
              <button type="button" class="btn btn-sm btn-icon swap-btn" id="routing-swap" title="출발/도착 교환">⇅</button>
            </div>
            <div class="routing-point-selects">
              <select id="routing-end-layer" class="routing-layer-select">${s}</select>
              <select id="routing-end-feature" class="routing-feature-select">
                <option value="">피처 선택...</option>
              </select>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="routing-profile">이동 수단</label>
          <select id="routing-profile">${a}</select>
        </div>

        <div class="route-result" id="route-result" style="display:none;">
          <div class="route-result-title">경로 정보</div>
          <div class="route-result-content">
            <div class="route-stat">
              <span class="route-stat-label">거리</span>
              <span class="route-stat-value" id="route-distance">-</span>
            </div>
            <div class="route-stat">
              <span class="route-stat-label">예상 시간</span>
              <span class="route-stat-value" id="route-duration">-</span>
            </div>
          </div>
        </div>

        <div class="routing-info">
          <p>OpenStreetMap 도로 데이터를 기반으로 실제 도로를 따라 최단 경로를 계산합니다.</p>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="routing-clear">결과 지우기</button>
        <button class="btn btn-secondary" id="routing-cancel">취소</button>
        <button class="btn btn-primary" id="routing-analyze" disabled>경로 검색</button>
      </div>
    </div>`}bindEvents(){const e=document.getElementById("routing-close"),t=document.getElementById("routing-cancel"),n=document.getElementById("routing-analyze"),i=document.getElementById("routing-clear"),a=document.getElementById("routing-swap"),s=document.getElementById("routing-api-key"),o=document.getElementById("routing-toggle-api-key"),l=document.getElementById("add-waypoint-btn"),u=document.getElementById("routing-start-layer"),c=document.getElementById("routing-start-feature"),h=document.getElementById("routing-end-layer"),f=document.getElementById("routing-end-feature");e.addEventListener("click",()=>this.close()),t.addEventListener("click",()=>this.close()),n.addEventListener("click",()=>this.analyze()),i.addEventListener("click",()=>this.clearResults()),a.addEventListener("click",()=>this.swapPoints()),l.addEventListener("click",()=>this.addWaypoint()),s.addEventListener("input",()=>{Ki.setApiKey(s.value),this.updateUI()}),o.addEventListener("click",()=>{s.type==="password"?(s.type="text",o.textContent="숨김"):(s.type="password",o.textContent="보기")}),document.getElementById("routing-save-api-key").addEventListener("click",()=>{const d=s.value.trim();d?(Ki.setApiKey(d),alert("API 키가 저장되었습니다.")):alert("API 키를 입력해주세요.")}),u.addEventListener("change",()=>{this.updateStartFeatures()}),c.addEventListener("change",()=>{this.onStartFeatureSelected()}),h.addEventListener("change",()=>{this.updateEndFeatures()}),f.addEventListener("change",()=>{this.onEndFeatureSelected()})}addWaypoint(){const e=document.getElementById("waypoints-container"),t=e.children.length,n=this.getPointLayers(),i=n.length>0?n.map(u=>`<option value="${u.id}">${u.name}</option>`).join(""):'<option value="">포인트 레이어 없음</option>',a=document.createElement("div");a.className="routing-point-group waypoint",a.dataset.index=t,a.innerHTML=`
      <div class="routing-point-header">
        <span class="routing-point-marker waypoint">${t+1}</span>
        <span class="routing-point-label">경유지 ${t+1}</span>
        <button type="button" class="btn btn-sm btn-icon remove-waypoint-btn" title="경유지 제거">×</button>
      </div>
      <div class="routing-point-selects">
        <select class="routing-layer-select waypoint-layer">${i}</select>
        <select class="routing-feature-select waypoint-feature">
          <option value="">피처 선택...</option>
        </select>
      </div>
    `,e.appendChild(a);const s=a.querySelector(".waypoint-layer"),o=a.querySelector(".waypoint-feature"),l=a.querySelector(".remove-waypoint-btn");s.addEventListener("change",()=>{this.updateFeatureSelect(s.value,o),this.updateWaypoints()}),o.addEventListener("change",()=>{this.updateWaypoints()}),l.addEventListener("click",()=>{this.removeWaypoint(a)}),s.value&&this.updateFeatureSelect(s.value,o),this.updateWaypointNumbers(),this.updateUI()}removeWaypoint(e){e.remove(),this.updateWaypointNumbers(),this.updateWaypoints(),this.updateUI()}updateWaypointNumbers(){document.getElementById("waypoints-container").querySelectorAll(".waypoint").forEach((n,i)=>{n.dataset.index=i,n.querySelector(".routing-point-marker").textContent=i+1,n.querySelector(".routing-point-label").textContent=`경유지 ${i+1}`})}updateWaypoints(){const t=document.getElementById("waypoints-container").querySelectorAll(".waypoint");Ki.clearWaypoints(),t.forEach(n=>{const i=n.querySelector(".waypoint-layer"),a=n.querySelector(".waypoint-feature"),s=this.getPointFromSelection(i.value,a.value);s&&Ki.waypoints.push(s)}),Ki.updateMarkers(),this.updateUI()}updateStartFeatures(){const e=document.getElementById("routing-start-layer"),t=document.getElementById("routing-start-feature");this.updateFeatureSelect(e.value,t),Ki.startPoint=null,Ki.updateMarkers(),this.updateUI()}updateEndFeatures(){const e=document.getElementById("routing-end-layer"),t=document.getElementById("routing-end-feature");this.updateFeatureSelect(e.value,t),Ki.endPoint=null,Ki.updateMarkers(),this.updateUI()}updateFeatureSelect(e,t){if(t.innerHTML='<option value="">피처 선택...</option>',!e)return;const n=pt.getLayer(e);if(!n)return;n.source.getFeatures().forEach((a,s)=>{const o=a.getProperties();let l=o.name||o.NAME||o.id||o.ID||`피처 ${s+1}`;typeof l=="object"&&(l=`피처 ${s+1}`);const u=document.createElement("option");u.value=s,u.textContent=l,t.appendChild(u)})}onStartFeatureSelected(){const e=document.getElementById("routing-start-layer"),t=document.getElementById("routing-start-feature"),n=this.getPointFromSelection(e.value,t.value);n?(Ki.startPoint=n,Ki.updateMarkers()):(Ki.startPoint=null,Ki.updateMarkers()),this.updateUI()}onEndFeatureSelected(){const e=document.getElementById("routing-end-layer"),t=document.getElementById("routing-end-feature"),n=this.getPointFromSelection(e.value,t.value);n?(Ki.endPoint=n,Ki.updateMarkers()):(Ki.endPoint=null,Ki.updateMarkers()),this.updateUI()}getPointFromSelection(e,t){if(!e||t==="")return null;const n=pt.getLayer(e);if(!n)return null;const a=n.source.getFeatures()[parseInt(t)];if(!a)return null;const s=a.getGeometry();let o;return s.getType()==="Point"?o=s.getCoordinates():s.getType()==="MultiPoint"&&(o=s.getCoordinates()[0]),o?{lonLat:Jd(o,"EPSG:3857","EPSG:4326"),coordinate:o}:null}swapPoints(){const e=document.getElementById("routing-start-layer"),t=document.getElementById("routing-start-feature"),n=document.getElementById("routing-end-layer"),i=document.getElementById("routing-end-feature"),a=e.value,s=t.value;e.value=n.value,n.value=a,this.updateFeatureSelect(e.value,t),this.updateFeatureSelect(n.value,i),t.value=i.value,i.value=s,Ki.swapStartEnd(),this.updateUI()}updateUI(){const e=document.getElementById("routing-analyze");if(!e)return;const t=document.getElementById("routing-api-key").value,n=Ki.getState(),i=t&&n.startPoint&&n.endPoint;e.disabled=!i;const a=document.getElementById("route-result");n.routeInfo?(a.style.display="block",document.getElementById("route-distance").textContent=n.routeInfo.distanceText,document.getElementById("route-duration").textContent=n.routeInfo.durationText):a.style.display="none"}async analyze(){if(!document.getElementById("routing-api-key").value){alert("API 키를 입력해주세요.");return}const t=Ki.getState();if(!t.startPoint||!t.endPoint){alert("출발지와 도착지를 모두 선택해주세요.");return}const n=document.getElementById("routing-profile").value,i=document.getElementById("routing-analyze");i.disabled=!0,i.textContent="검색 중...";try{const a=await Ki.analyze({profile:n});document.getElementById("route-result").style.display="block",document.getElementById("route-distance").textContent=a.distanceText,document.getElementById("route-duration").textContent=a.durationText,alert(`경로 검색 완료!
거리: ${a.distanceText}
예상 시간: ${a.durationText}`)}catch(a){alert("경로 검색 실패: "+a.message)}finally{i.disabled=!1,i.textContent="경로 검색",this.updateUI()}}clearResults(){Ki.clear();const e=document.getElementById("routing-start-feature"),t=document.getElementById("routing-end-feature");e&&(e.value=""),t&&(t.value=""),this.updateUI()}close(){this.modal&&(this.modal.remove(),this.modal=null)}}const f9e=new h9e;var xE={},Y3={};Y3.geometries={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULTIPOINTM:28,MULTIPATCH:31};var $z={},A9e={C:254,L:1,D:8,N:18,M:18,F:18,B:8},wE={};wE.lpad=function(e,t,n){for(;e.length<t;)e=n+e;return e};wE.rpad=function(e,t,n){for(;e.length<t;)e=e+n;return e};wE.writeField=function(e,t,n,i){for(var a=0;a<t;a++)e.setUint8(i,n.charCodeAt(a)),i++;return i};var _E={},d9e=A9e,g9e={string:"C",number:"N",boolean:"L",null:"C"};_E.multi=p9e;_E.bytesPer=v9e;_E.obj=Kz;function p9e(r){var e={};r.forEach(t);function t(n){m9e(e,n)}return Kz(e)}function m9e(r,e){for(var t in e){var n=typeof e[t]<"u"&&e[t]!==null;(typeof r[t]>"u"||n)&&(r[t]=e[t])}return r}function Kz(r){var e={},t=[];for(var n in r)e[n]=r[n]===null?"null":typeof r[n];for(var i in e){var a=g9e[e[i]];a&&t.push({name:i,type:a,size:d9e[a]})}return t}function v9e(r){return r.reduce(function(e,t){return e+t.size},1)}var eg=wE,U6=_E,y9e=function(e,t){var n=t||U6.multi(e),i=32*n.length+1,a=U6.bytesPer(n),s=new ArrayBuffer(i+32+a*e.length+1),o=new Date,l=new DataView(s);l.setUint8(0,3),l.setUint8(1,o.getFullYear()-1900),l.setUint8(2,o.getMonth()+1),l.setUint8(3,o.getDate()),l.setUint32(4,e.length,!0);var u=i+32;l.setUint16(8,u,!0),l.setUint16(10,a,!0),l.setInt8(32+i-1,13),n.forEach(function(h,f){h.name.split("").slice(0,10).forEach(function(A,d){l.setInt8(32+f*32+d,A.charCodeAt(0))}),l.setInt8(32+f*32+11,h.type.charCodeAt(0)),l.setInt8(32+f*32+16,h.size),h.type=="N"&&l.setInt8(32+f*32+17,3)});var c=i+32;return e.forEach(function(h,f){l.setUint8(c,32),c++,n.forEach(function(A){var d=h[A.name];switch((d===null||typeof d>"u")&&(d=""),A.type){case"L":l.setUint8(c,d?84:70),c++;break;case"D":c=eg.writeField(l,8,eg.lpad(d.toString(),8," "),c);break;case"N":c=eg.writeField(l,A.size,eg.lpad(d.toString(),A.size," ").substr(0,18),c);break;case"C":c=eg.writeField(l,A.size,eg.rpad(d.toString(),A.size," "),c);break;default:throw new Error("Unknown field type")}})}),l.setUint8(c,26),l};$z.structure=y9e;var Vz='GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]',Vp={},W1={};W1.enlarge=function(e,t){return t[0]<e.xmin&&(e.xmin=t[0]),t[0]>e.xmax&&(e.xmax=t[0]),t[1]<e.ymin&&(e.ymin=t[1]),t[1]>e.ymax&&(e.ymax=t[1]),e};W1.enlargeExtent=function(e,t){return t.xmax>e.xmax&&(e.xmax=t.xmax),t.xmin<e.xmin&&(e.xmin=t.xmin),t.ymax>e.ymax&&(e.ymax=t.ymax),t.ymin<e.ymin&&(e.ymin=t.ymin),e};W1.blank=function(){return{xmin:Number.MAX_VALUE,ymin:Number.MAX_VALUE,xmax:-Number.MAX_VALUE,ymax:-Number.MAX_VALUE}};var Q6=W1;Vp.write=function(e,t,n,i){var a=28,s=100,o=0,l=0;e.forEach(function(c,h){n.setInt32(o,h+1),n.setInt32(o+4,10),n.setInt32(o+8,1,!0),n.setFloat64(o+12,c[0],!0),n.setFloat64(o+20,c[1],!0),i.setInt32(l,s/2),i.setInt32(l+4,10),l+=8,o+=a,s+=a})};Vp.extent=function(r){return r.reduce(function(e,t){return Q6.enlarge(e,t)},Q6.blank())};Vp.parts=function(e,t){return e.length};Vp.shxLength=function(r){return r.length*8};Vp.shpLength=function(r){return r.length*28};var Wp={},e_=W1,G6=Y3;Wp.write=function(e,t,n,i,a){var s=0,o=0,l=100;e.forEach(u);function u(c,h){var f=EE(c),A=Wz([c],a),d=f.length*16+48+(A-1)*4,p=f.reduce(function(w,x){return e_.enlarge(w,x)},e_.blank());i.setInt32(o,l/2),i.setInt32(o+4,d/2),o+=8,l+=d+8,n.setInt32(s,h+1),n.setInt32(s+4,d/2),n.setInt32(s+8,a,!0),n.setFloat64(s+12,p.xmin,!0),n.setFloat64(s+20,p.ymin,!0),n.setFloat64(s+28,p.xmax,!0),n.setFloat64(s+36,p.ymax,!0),n.setInt32(s+44,A,!0),n.setInt32(s+48,f.length,!0),n.setInt32(s+52,0,!0);for(var y=c.reduce(function(w,x){return Array.isArray(x[0][0])?w=w.concat(x):w.push(x),w},[]),v=1;v<A;v++)n.setInt32(s+52+v*4,y.reduce(function(w,x,b){return b<v?w+x.length:w},0),!0);f.forEach(function(x,b){n.setFloat64(s+56+b*16+(A-1)*4,x[0],!0),n.setFloat64(s+56+b*16+(A-1)*4+8,x[1],!0)}),s+=d+8}};Wp.shpLength=function(r){return r.length*56+EE(r).length*16};Wp.shxLength=function(r){return r.length*8};Wp.extent=function(r){return EE(r).reduce(function(e,t){return e_.enlarge(e,t)},e_.blank())};function Wz(r,e){var t=1;return(e===G6.geometries.POLYGON||e===G6.geometries.POLYLINE)&&(t=r.reduce(function(n,i){return n+=i.length,Array.isArray(i[0][0][0])&&(n+=i.reduce(function(a,s){return a+s.length-1},0)),n},0)),t}Wp.parts=Wz;function EE(r,e){return e===void 0&&(e=[]),typeof r[0][0]=="object"?r.reduce(function(t,n){return t.concat(EE(n))},e):r}var x9e=Y3,w9e=$z,_9e=Vz,E9e=Vp,H6=Wp,b9e={1:E9e,5:H6,3:H6},Yz=C9e;function C9e(r,e,t,n){var i=x9e.geometries[e],a=b9e[i],s=a.parts(t,i),o=100+(s-t.length)*4+a.shpLength(t),l=100+a.shxLength(t),u=new ArrayBuffer(o),c=new DataView(u),h=new ArrayBuffer(l),f=new DataView(h),A=a.extent(t);z6(c,i),z6(f,i),q6(A,c),q6(A,f),a.write(t,A,new DataView(u,100),new DataView(h,100),i),c.setInt32(24,o/2),f.setInt32(24,50+t.length*4);var d=w9e.structure(r);n(null,{shp:c,shx:f,dbf:d,prj:_9e})}function z6(r,e){r.setInt32(0,9994),r.setInt32(28,1e3,!0),r.setInt32(32,e,!0)}function q6(r,e){e.setFloat64(36,r.xmin,!0),e.setFloat64(44,r.ymin,!0),e.setFloat64(52,r.xmax,!0),e.setFloat64(60,r.ymax,!0)}var Yp={};Yp.point=Y1("Point","POINT");Yp.line=Y1("LineString","POLYLINE");Yp.multiline=Y1("MultiLineString","POLYLINE");Yp.polygon=Y1("Polygon","POLYGON");Yp.multipolygon=Y1("MultiPolygon","POLYGON");function Y1(r,e){return function(t){var n=t.features.filter(B9e(r));return{geometries:e==="POLYLINE"?[n.map(j6)]:n.map(j6),properties:n.map(S9e),type:e}}}function j6(r){return r.geometry.coordinates}function S9e(r){return r.properties}function B9e(r){return Array.isArray(r)?function(e){return r.includes(e.geometry.type)}:function(e){return e.geometry.type===r}}function Z2(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xz={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(r,e){(function(t){r.exports=t()})(function(){return function t(n,i,a){function s(u,c){if(!i[u]){if(!n[u]){var h=typeof Z2=="function"&&Z2;if(!c&&h)return h(u,!0);if(o)return o(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var A=i[u]={exports:{}};n[u][0].call(A.exports,function(d){var p=n[u][1][d];return s(p||d)},A,A.exports,t,n,i,a)}return i[u].exports}for(var o=typeof Z2=="function"&&Z2,l=0;l<a.length;l++)s(a[l]);return s}({1:[function(t,n,i){var a=t("./utils"),s=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var u,c,h,f,A,d,p,y=[],v=0,w=l.length,x=w,b=a.getTypeOf(l)!=="string";v<l.length;)x=w-v,h=b?(u=l[v++],c=v<w?l[v++]:0,v<w?l[v++]:0):(u=l.charCodeAt(v++),c=v<w?l.charCodeAt(v++):0,v<w?l.charCodeAt(v++):0),f=u>>2,A=(3&u)<<4|c>>4,d=1<x?(15&c)<<2|h>>6:64,p=2<x?63&h:64,y.push(o.charAt(f)+o.charAt(A)+o.charAt(d)+o.charAt(p));return y.join("")},i.decode=function(l){var u,c,h,f,A,d,p=0,y=0,v="data:";if(l.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var w,x=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&x--,l.charAt(l.length-2)===o.charAt(64)&&x--,x%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=s.uint8array?new Uint8Array(0|x):new Array(0|x);p<l.length;)u=o.indexOf(l.charAt(p++))<<2|(f=o.indexOf(l.charAt(p++)))>>4,c=(15&f)<<4|(A=o.indexOf(l.charAt(p++)))>>2,h=(3&A)<<6|(d=o.indexOf(l.charAt(p++))),w[y++]=u,A!==64&&(w[y++]=c),d!==64&&(w[y++]=h);return w}},{"./support":30,"./utils":32}],2:[function(t,n,i){var a=t("./external"),s=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function u(c,h,f,A,d){this.compressedSize=c,this.uncompressedSize=h,this.crc32=f,this.compression=A,this.compressedContent=d}u.prototype={getContentWorker:function(){var c=new s(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return c.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new s(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(c,h,f){return c.pipe(new o).pipe(new l("uncompressedSize")).pipe(h.compressWorker(f)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},n.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,i){var a=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,i){var a=t("./utils"),s=function(){for(var o,l=[],u=0;u<256;u++){o=u;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;l[u]=o}return l}();n.exports=function(o,l){return o!==void 0&&o.length?a.getTypeOf(o)!=="string"?function(u,c,h,f){var A=s,d=f+h;u^=-1;for(var p=f;p<d;p++)u=u>>>8^A[255&(u^c[p])];return-1^u}(0|l,o,o.length,0):function(u,c,h,f){var A=s,d=f+h;u^=-1;for(var p=f;p<d;p++)u=u>>>8^A[255&(u^c.charCodeAt(p))];return-1^u}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(t,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,n,i){var a=null;a=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:a}},{lie:37}],7:[function(t,n,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=t("pako"),o=t("./utils"),l=t("./stream/GenericWorker"),u=a?"uint8array":"array";function c(h,f){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=f,this.meta={}}i.magic="\b\0",o.inherits(c,l),c.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,h.data),!1)},c.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(f){h.push({data:f,meta:h.meta})}},i.compressWorker=function(h){return new c("Deflate",h)},i.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,i){function a(A,d){var p,y="";for(p=0;p<d;p++)y+=String.fromCharCode(255&A),A>>>=8;return y}function s(A,d,p,y,v,w){var x,b,C=A.file,S=A.compression,I=w!==u.utf8encode,B=o.transformTo("string",w(C.name)),T=o.transformTo("string",u.utf8encode(C.name)),M=C.comment,F=o.transformTo("string",w(M)),N=o.transformTo("string",u.utf8encode(M)),O=T.length!==C.name.length,L=N.length!==M.length,G="",R="",U="",W=C.dir,Q=C.date,re={crc32:0,compressedSize:0,uncompressedSize:0};d&&!p||(re.crc32=A.crc32,re.compressedSize=A.compressedSize,re.uncompressedSize=A.uncompressedSize);var oe=0;d&&(oe|=8),I||!O&&!L||(oe|=2048);var P=0,z=0;W&&(P|=16),v==="UNIX"?(z=798,P|=function(J,ue){var ge=J;return J||(ge=ue?16893:33204),(65535&ge)<<16}(C.unixPermissions,W)):(z=20,P|=function(J){return 63&(J||0)}(C.dosPermissions)),x=Q.getUTCHours(),x<<=6,x|=Q.getUTCMinutes(),x<<=5,x|=Q.getUTCSeconds()/2,b=Q.getUTCFullYear()-1980,b<<=4,b|=Q.getUTCMonth()+1,b<<=5,b|=Q.getUTCDate(),O&&(R=a(1,1)+a(c(B),4)+T,G+="up"+a(R.length,2)+R),L&&(U=a(1,1)+a(c(F),4)+N,G+="uc"+a(U.length,2)+U);var K="";return K+=`
\0`,K+=a(oe,2),K+=S.magic,K+=a(x,2),K+=a(b,2),K+=a(re.crc32,4),K+=a(re.compressedSize,4),K+=a(re.uncompressedSize,4),K+=a(B.length,2),K+=a(G.length,2),{fileRecord:h.LOCAL_FILE_HEADER+K+B+G,dirRecord:h.CENTRAL_FILE_HEADER+a(z,2)+K+a(F.length,2)+"\0\0\0\0"+a(P,4)+a(y,4)+B+G+F}}var o=t("../utils"),l=t("../stream/GenericWorker"),u=t("../utf8"),c=t("../crc32"),h=t("../signature");function f(A,d,p,y){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=d,this.zipPlatform=p,this.encodeFileName=y,this.streamFiles=A,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(f,l),f.prototype.push=function(A){var d=A.meta.percent||0,p=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(A):(this.bytesWritten+=A.data.length,l.prototype.push.call(this,{data:A.data,meta:{currentFile:this.currentFile,percent:p?(d+100*(p-y-1))/p:100}}))},f.prototype.openedSource=function(A){this.currentSourceOffset=this.bytesWritten,this.currentFile=A.file.name;var d=this.streamFiles&&!A.file.dir;if(d){var p=s(A,d,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(A){this.accumulate=!1;var d=this.streamFiles&&!A.file.dir,p=s(A,d,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),d)this.push({data:function(y){return h.DATA_DESCRIPTOR+a(y.crc32,4)+a(y.compressedSize,4)+a(y.uncompressedSize,4)}(A),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var A=this.bytesWritten,d=0;d<this.dirRecords.length;d++)this.push({data:this.dirRecords[d],meta:{percent:100}});var p=this.bytesWritten-A,y=function(v,w,x,b,C){var S=o.transformTo("string",C(b));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(v,2)+a(v,2)+a(w,4)+a(x,4)+a(S.length,2)+S}(this.dirRecords.length,p,A,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(A){this._sources.push(A);var d=this;return A.on("data",function(p){d.processChunk(p)}),A.on("end",function(){d.closedSource(d.previous.streamInfo),d._sources.length?d.prepareNextSource():d.end()}),A.on("error",function(p){d.error(p)}),this},f.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(A){var d=this._sources;if(!l.prototype.error.call(this,A))return!1;for(var p=0;p<d.length;p++)try{d[p].error(A)}catch{}return!0},f.prototype.lock=function(){l.prototype.lock.call(this);for(var A=this._sources,d=0;d<A.length;d++)A[d].lock()},n.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,i){var a=t("../compressions"),s=t("./ZipFileWorker");i.generateWorker=function(o,l,u){var c=new s(l.streamFiles,u,l.platform,l.encodeFileName),h=0;try{o.forEach(function(f,A){h++;var d=function(w,x){var b=w||x,C=a[b];if(!C)throw new Error(b+" is not a valid compression method !");return C}(A.options.compression,l.compression),p=A.options.compressionOptions||l.compressionOptions||{},y=A.dir,v=A.date;A._compressWorker(d,p).withStreamInfo("file",{name:f,dir:y,date:v,comment:A.comment||"",unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions}).pipe(c)}),c.entriesCount=h}catch(f){c.error(f)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,i){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new a;for(var o in this)typeof this[o]!="function"&&(s[o]=this[o]);return s}}(a.prototype=t("./object")).loadAsync=t("./load"),a.support=t("./support"),a.defaults=t("./defaults"),a.version="3.10.1",a.loadAsync=function(s,o){return new a().loadAsync(s,o)},a.external=t("./external"),n.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,i){var a=t("./utils"),s=t("./external"),o=t("./utf8"),l=t("./zipEntries"),u=t("./stream/Crc32Probe"),c=t("./nodejsUtils");function h(f){return new s.Promise(function(A,d){var p=f.decompressed.getContentWorker().pipe(new u);p.on("error",function(y){d(y)}).on("end",function(){p.streamInfo.crc32!==f.decompressed.crc32?d(new Error("Corrupted zip : CRC32 mismatch")):A()}).resume()})}n.exports=function(f,A){var d=this;return A=a.extend(A||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),c.isNode&&c.isStream(f)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",f,!0,A.optimizedBinaryString,A.base64).then(function(p){var y=new l(A);return y.load(p),y}).then(function(p){var y=[s.Promise.resolve(p)],v=p.files;if(A.checkCRC32)for(var w=0;w<v.length;w++)y.push(h(v[w]));return s.Promise.all(y)}).then(function(p){for(var y=p.shift(),v=y.files,w=0;w<v.length;w++){var x=v[w],b=x.fileNameStr,C=a.resolve(x.fileNameStr);d.file(C,x.decompressed,{binary:!0,optimizedBinaryString:!0,date:x.date,dir:x.dir,comment:x.fileCommentStr.length?x.fileCommentStr:null,unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions,createFolders:A.createFolders}),x.dir||(d.file(C).unsafeOriginalName=b)}return y.zipComment.length&&(d.comment=y.zipComment),d})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,i){var a=t("../utils"),s=t("../stream/GenericWorker");function o(l,u){s.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}a.inherits(o,s),o.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(c){u.push({data:c,meta:{percent:0}})}).on("error",function(c){u.isPaused?this.generatedError=c:u.error(c)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,i){var a=t("readable-stream").Readable;function s(o,l,u){a.call(this,l),this._helper=o;var c=this;o.on("data",function(h,f){c.push(h)||c._helper.pause(),u&&u(f)}).on("error",function(h){c.emit("error",h)}).on("end",function(){c.push(null)})}t("../utils").inherits(s,a),s.prototype._read=function(){this._helper.resume()},n.exports=s},{"../utils":32,"readable-stream":16}],14:[function(t,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,s);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,s)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var s=new Buffer(a);return s.fill(0),s},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(t,n,i){function a(C,S,I){var B,T=o.getTypeOf(S),M=o.extend(I||{},c);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(C=v(C)),M.createFolders&&(B=y(C))&&w.call(this,B,!0);var F=T==="string"&&M.binary===!1&&M.base64===!1;I&&I.binary!==void 0||(M.binary=!F),(S instanceof h&&S.uncompressedSize===0||M.dir||!S||S.length===0)&&(M.base64=!1,M.binary=!0,S="",M.compression="STORE",T="string");var N=null;N=S instanceof h||S instanceof l?S:d.isNode&&d.isStream(S)?new p(C,S):o.prepareContent(C,S,M.binary,M.optimizedBinaryString,M.base64);var O=new f(C,N,M);this.files[C]=O}var s=t("./utf8"),o=t("./utils"),l=t("./stream/GenericWorker"),u=t("./stream/StreamHelper"),c=t("./defaults"),h=t("./compressedObject"),f=t("./zipObject"),A=t("./generate"),d=t("./nodejsUtils"),p=t("./nodejs/NodejsStreamInputAdapter"),y=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var S=C.lastIndexOf("/");return 0<S?C.substring(0,S):""},v=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},w=function(C,S){return S=S!==void 0?S:c.createFolders,C=v(C),this.files[C]||a.call(this,C,null,{dir:!0,createFolders:S}),this.files[C]};function x(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var S,I,B;for(S in this.files)B=this.files[S],(I=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&C(I,B)},filter:function(C){var S=[];return this.forEach(function(I,B){C(I,B)&&S.push(B)}),S},file:function(C,S,I){if(arguments.length!==1)return C=this.root+C,a.call(this,C,S,I),this;if(x(C)){var B=C;return this.filter(function(M,F){return!F.dir&&B.test(M)})}var T=this.files[this.root+C];return T&&!T.dir?T:null},folder:function(C){if(!C)return this;if(x(C))return this.filter(function(T,M){return M.dir&&C.test(T)});var S=this.root+C,I=w.call(this,S),B=this.clone();return B.root=I.name,B},remove:function(C){C=this.root+C;var S=this.files[C];if(S||(C.slice(-1)!=="/"&&(C+="/"),S=this.files[C]),S&&!S.dir)delete this.files[C];else for(var I=this.filter(function(T,M){return M.name.slice(0,C.length)===C}),B=0;B<I.length;B++)delete this.files[I[B].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var S,I={};try{if((I=o.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");o.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var B=I.comment||this.comment||"";S=A.generateWorker(this,I,B)}catch(T){(S=new l("error")).error(T)}return new u(S,I.type||"string",I.mimeType)},generateAsync:function(C,S){return this.generateInternalStream(C).accumulate(S)},generateNodeStream:function(C,S){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(S)}};n.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,i){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,i){var a=t("./DataReader");function s(o){a.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}t("../utils").inherits(s,a),s.prototype.byteAt=function(o){return this.data[this.zero+o]},s.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),u=o.charCodeAt(1),c=o.charCodeAt(2),h=o.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===l&&this.data[f+1]===u&&this.data[f+2]===c&&this.data[f+3]===h)return f-this.zero;return-1},s.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),u=o.charCodeAt(1),c=o.charCodeAt(2),h=o.charCodeAt(3),f=this.readData(4);return l===f[0]&&u===f[1]&&c===f[2]&&h===f[3]},s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=s},{"../utils":32,"./DataReader":18}],18:[function(t,n,i){var a=t("../utils");function s(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,u=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=o,u},readString:function(o){return a.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=s},{"../utils":32}],19:[function(t,n,i){var a=t("./Uint8ArrayReader");function s(o){a.call(this,o)}t("../utils").inherits(s,a),s.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,i){var a=t("./DataReader");function s(o){a.call(this,o)}t("../utils").inherits(s,a),s.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},s.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},s.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},s.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=s},{"../utils":32,"./DataReader":18}],21:[function(t,n,i){var a=t("./ArrayReader");function s(o){a.call(this,o)}t("../utils").inherits(s,a),s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,i){var a=t("../utils"),s=t("../support"),o=t("./ArrayReader"),l=t("./StringReader"),u=t("./NodeBufferReader"),c=t("./Uint8ArrayReader");n.exports=function(h){var f=a.getTypeOf(h);return a.checkSupport(f),f!=="string"||s.uint8array?f==="nodebuffer"?new u(h):s.uint8array?new c(a.transformTo("uint8array",h)):new o(a.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,i){var a=t("./GenericWorker"),s=t("../utils");function o(l){a.call(this,"ConvertWorker to "+l),this.destType=l}s.inherits(o,a),o.prototype.processChunk=function(l){this.push({data:s.transformTo(this.destType,l.data),meta:l.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,i){var a=t("./GenericWorker"),s=t("../crc32");function o(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,a),o.prototype.processChunk=function(l){this.streamInfo.crc32=s(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,i){var a=t("../utils"),s=t("./GenericWorker");function o(l){s.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}a.inherits(o,s),o.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}s.prototype.processChunk.call(this,l)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,i){var a=t("../utils"),s=t("./GenericWorker");function o(l){s.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(c){u.dataIsReady=!0,u.data=c,u.max=c&&c.length||0,u.type=a.getTypeOf(c),u.isPaused||u._tickAndRepeat()},function(c){u.error(c)})}a.inherits(o,s),o.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,i){function a(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,o){return this._listeners[s].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,o){if(this._listeners[s])for(var l=0;l<this._listeners[s].length;l++)this._listeners[s][l].call(this,o)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var o=this;return s.on("data",function(l){o.processChunk(l)}),s.on("end",function(){o.end()}),s.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,o){return this.extraStreamInfo[s]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},n.exports=a},{}],29:[function(t,n,i){var a=t("../utils"),s=t("./ConvertWorker"),o=t("./GenericWorker"),l=t("../base64"),u=t("../support"),c=t("../external"),h=null;if(u.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(d,p){return new c.Promise(function(y,v){var w=[],x=d._internalType,b=d._outputType,C=d._mimeType;d.on("data",function(S,I){w.push(S),p&&p(I)}).on("error",function(S){w=[],v(S)}).on("end",function(){try{var S=function(I,B,T){switch(I){case"blob":return a.newBlob(a.transformTo("arraybuffer",B),T);case"base64":return l.encode(B);default:return a.transformTo(I,B)}}(b,function(I,B){var T,M=0,F=null,N=0;for(T=0;T<B.length;T++)N+=B[T].length;switch(I){case"string":return B.join("");case"array":return Array.prototype.concat.apply([],B);case"uint8array":for(F=new Uint8Array(N),T=0;T<B.length;T++)F.set(B[T],M),M+=B[T].length;return F;case"nodebuffer":return Buffer.concat(B);default:throw new Error("concat : unsupported type '"+I+"'")}}(x,w),C);y(S)}catch(I){v(I)}w=[]}).resume()})}function A(d,p,y){var v=p;switch(p){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=p,this._mimeType=y,a.checkSupport(v),this._worker=d.pipe(new s(v)),d.lock()}catch(w){this._worker=new o("error"),this._worker.error(w)}}A.prototype={accumulate:function(d){return f(this,d)},on:function(d,p){var y=this;return d==="data"?this._worker.on(d,function(v){p.call(y,v.data,v.meta)}):this._worker.on(d,function(){a.delay(p,arguments,y)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(d){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},d)}},n.exports=A},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var a=new ArrayBuffer(0);try{i.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(a),i.blob=s.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,i){for(var a=t("./utils"),s=t("./support"),o=t("./nodejsUtils"),l=t("./stream/GenericWorker"),u=new Array(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;u[254]=u[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function f(){l.call(this,"utf-8 encode")}i.utf8encode=function(A){return s.nodebuffer?o.newBufferFrom(A,"utf-8"):function(d){var p,y,v,w,x,b=d.length,C=0;for(w=0;w<b;w++)(64512&(y=d.charCodeAt(w)))==55296&&w+1<b&&(64512&(v=d.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(v-56320),w++),C+=y<128?1:y<2048?2:y<65536?3:4;for(p=s.uint8array?new Uint8Array(C):new Array(C),w=x=0;x<C;w++)(64512&(y=d.charCodeAt(w)))==55296&&w+1<b&&(64512&(v=d.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(v-56320),w++),y<128?p[x++]=y:(y<2048?p[x++]=192|y>>>6:(y<65536?p[x++]=224|y>>>12:(p[x++]=240|y>>>18,p[x++]=128|y>>>12&63),p[x++]=128|y>>>6&63),p[x++]=128|63&y);return p}(A)},i.utf8decode=function(A){return s.nodebuffer?a.transformTo("nodebuffer",A).toString("utf-8"):function(d){var p,y,v,w,x=d.length,b=new Array(2*x);for(p=y=0;p<x;)if((v=d[p++])<128)b[y++]=v;else if(4<(w=u[v]))b[y++]=65533,p+=w-1;else{for(v&=w===2?31:w===3?15:7;1<w&&p<x;)v=v<<6|63&d[p++],w--;1<w?b[y++]=65533:v<65536?b[y++]=v:(v-=65536,b[y++]=55296|v>>10&1023,b[y++]=56320|1023&v)}return b.length!==y&&(b.subarray?b=b.subarray(0,y):b.length=y),a.applyFromCharCode(b)}(A=a.transformTo(s.uint8array?"uint8array":"array",A))},a.inherits(h,l),h.prototype.processChunk=function(A){var d=a.transformTo(s.uint8array?"uint8array":"array",A.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var p=d;(d=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),d.set(p,this.leftOver.length)}else d=this.leftOver.concat(d);this.leftOver=null}var y=function(w,x){var b;for((x=x||w.length)>w.length&&(x=w.length),b=x-1;0<=b&&(192&w[b])==128;)b--;return b<0||b===0?x:b+u[w[b]]>x?b:x}(d),v=d;y!==d.length&&(s.uint8array?(v=d.subarray(0,y),this.leftOver=d.subarray(y,d.length)):(v=d.slice(0,y),this.leftOver=d.slice(y,d.length))),this.push({data:i.utf8decode(v),meta:A.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=h,a.inherits(f,l),f.prototype.processChunk=function(A){this.push({data:i.utf8encode(A.data),meta:A.meta})},i.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,i){var a=t("./support"),s=t("./base64"),o=t("./nodejsUtils"),l=t("./external");function u(p){return p}function c(p,y){for(var v=0;v<p.length;++v)y[v]=255&p.charCodeAt(v);return y}t("setimmediate"),i.newBlob=function(p,y){i.checkSupport("blob");try{return new Blob([p],{type:y})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(p),v.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(p,y,v){var w=[],x=0,b=p.length;if(b<=v)return String.fromCharCode.apply(null,p);for(;x<b;)y==="array"||y==="nodebuffer"?w.push(String.fromCharCode.apply(null,p.slice(x,Math.min(x+v,b)))):w.push(String.fromCharCode.apply(null,p.subarray(x,Math.min(x+v,b)))),x+=v;return w.join("")},stringifyByChar:function(p){for(var y="",v=0;v<p.length;v++)y+=String.fromCharCode(p[v]);return y},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function f(p){var y=65536,v=i.getTypeOf(p),w=!0;if(v==="uint8array"?w=h.applyCanBeUsed.uint8array:v==="nodebuffer"&&(w=h.applyCanBeUsed.nodebuffer),w)for(;1<y;)try{return h.stringifyByChunk(p,v,y)}catch{y=Math.floor(y/2)}return h.stringifyByChar(p)}function A(p,y){for(var v=0;v<p.length;v++)y[v]=p[v];return y}i.applyFromCharCode=f;var d={};d.string={string:u,array:function(p){return c(p,new Array(p.length))},arraybuffer:function(p){return d.string.uint8array(p).buffer},uint8array:function(p){return c(p,new Uint8Array(p.length))},nodebuffer:function(p){return c(p,o.allocBuffer(p.length))}},d.array={string:f,array:u,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(p)}},d.arraybuffer={string:function(p){return f(new Uint8Array(p))},array:function(p){return A(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:u,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(new Uint8Array(p))}},d.uint8array={string:f,array:function(p){return A(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:u,nodebuffer:function(p){return o.newBufferFrom(p)}},d.nodebuffer={string:f,array:function(p){return A(p,new Array(p.length))},arraybuffer:function(p){return d.nodebuffer.uint8array(p).buffer},uint8array:function(p){return A(p,new Uint8Array(p.length))},nodebuffer:u},i.transformTo=function(p,y){if(y=y||"",!p)return y;i.checkSupport(p);var v=i.getTypeOf(y);return d[v][p](y)},i.resolve=function(p){for(var y=p.split("/"),v=[],w=0;w<y.length;w++){var x=y[w];x==="."||x===""&&w!==0&&w!==y.length-1||(x===".."?v.pop():v.push(x))}return v.join("/")},i.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":a.nodebuffer&&o.isBuffer(p)?"nodebuffer":a.uint8array&&p instanceof Uint8Array?"uint8array":a.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(p){if(!a[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(p){var y,v,w="";for(v=0;v<(p||"").length;v++)w+="\\x"+((y=p.charCodeAt(v))<16?"0":"")+y.toString(16).toUpperCase();return w},i.delay=function(p,y,v){setImmediate(function(){p.apply(v||null,y||[])})},i.inherits=function(p,y){function v(){}v.prototype=y.prototype,p.prototype=new v},i.extend=function(){var p,y,v={};for(p=0;p<arguments.length;p++)for(y in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],y)&&v[y]===void 0&&(v[y]=arguments[p][y]);return v},i.prepareContent=function(p,y,v,w,x){return l.Promise.resolve(y).then(function(b){return a.blob&&(b instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(b))!==-1)&&typeof FileReader<"u"?new l.Promise(function(C,S){var I=new FileReader;I.onload=function(B){C(B.target.result)},I.onerror=function(B){S(B.target.error)},I.readAsArrayBuffer(b)}):b}).then(function(b){var C=i.getTypeOf(b);return C?(C==="arraybuffer"?b=i.transformTo("uint8array",b):C==="string"&&(x?b=s.decode(b):v&&w!==!0&&(b=function(S){return c(S,a.uint8array?new Uint8Array(S.length):new Array(S.length))}(b))),b):l.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,i){var a=t("./reader/readerFor"),s=t("./utils"),o=t("./signature"),l=t("./zipEntry"),u=t("./support");function c(h){this.files=[],this.loadOptions=h}c.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(f)+", expected "+s.pretty(h)+")")}},isSignature:function(h,f){var A=this.reader.index;this.reader.setIndex(h);var d=this.reader.readString(4)===f;return this.reader.setIndex(A),d},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),f=u.uint8array?"uint8array":"array",A=s.transformTo(f,h);this.zipComment=this.loadOptions.decodeFileName(A)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,f,A,d=this.zip64EndOfCentralSize-44;0<d;)h=this.reader.readInt(2),f=this.reader.readInt(4),A=this.reader.readData(f),this.zip64ExtensibleData[h]={id:h,length:f,value:A}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,f;for(h=0;h<this.files.length;h++)f=this.files[h],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var f=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var A=this.centralDirOffset+this.centralDirSize;this.zip64&&(A+=20,A+=12+this.zip64EndOfCentralSize);var d=f-A;if(0<d)this.isSignature(f,o.CENTRAL_FILE_HEADER)||(this.reader.zero=d);else if(d<0)throw new Error("Corrupted zip: missing "+Math.abs(d)+" bytes.")},prepareReader:function(h){this.reader=a(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,i){var a=t("./reader/readerFor"),s=t("./utils"),o=t("./compressedObject"),l=t("./crc32"),u=t("./utf8"),c=t("./compressions"),h=t("./support");function f(A,d){this.options=A,this.loadOptions=d}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(A){var d,p;if(A.skip(22),this.fileNameLength=A.readInt(2),p=A.readInt(2),this.fileName=A.readData(this.fileNameLength),A.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((d=function(y){for(var v in c)if(Object.prototype.hasOwnProperty.call(c,v)&&c[v].magic===y)return c[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,d,A.readData(this.compressedSize))},readCentralPart:function(A){this.versionMadeBy=A.readInt(2),A.skip(2),this.bitFlag=A.readInt(2),this.compressionMethod=A.readString(2),this.date=A.readDate(),this.crc32=A.readInt(4),this.compressedSize=A.readInt(4),this.uncompressedSize=A.readInt(4);var d=A.readInt(2);if(this.extraFieldsLength=A.readInt(2),this.fileCommentLength=A.readInt(2),this.diskNumberStart=A.readInt(2),this.internalFileAttributes=A.readInt(2),this.externalFileAttributes=A.readInt(4),this.localHeaderOffset=A.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");A.skip(d),this.readExtraFields(A),this.parseZIP64ExtraField(A),this.fileComment=A.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var A=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),A==0&&(this.dosPermissions=63&this.externalFileAttributes),A==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var A=a(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=A.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=A.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=A.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=A.readInt(4))}},readExtraFields:function(A){var d,p,y,v=A.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});A.index+4<v;)d=A.readInt(2),p=A.readInt(2),y=A.readData(p),this.extraFields[d]={id:d,length:p,value:y};A.setIndex(v)},handleUTF8:function(){var A=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var d=this.findExtraFieldUnicodePath();if(d!==null)this.fileNameStr=d;else{var p=s.transformTo(A,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var v=s.transformTo(A,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var A=this.extraFields[28789];if(A){var d=a(A.value);return d.readInt(1)!==1||l(this.fileName)!==d.readInt(4)?null:u.utf8decode(d.readData(A.length-5))}return null},findExtraFieldUnicodeComment:function(){var A=this.extraFields[25461];if(A){var d=a(A.value);return d.readInt(1)!==1||l(this.fileComment)!==d.readInt(4)?null:u.utf8decode(d.readData(A.length-5))}return null}},n.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,i){function a(d,p,y){this.name=d,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=p,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var s=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),l=t("./utf8"),u=t("./compressedObject"),c=t("./stream/GenericWorker");a.prototype={internalStream:function(d){var p=null,y="string";try{if(!d)throw new Error("No output type specified.");var v=(y=d.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),p=this._decompressWorker();var w=!this._dataBinary;w&&!v&&(p=p.pipe(new l.Utf8EncodeWorker)),!w&&v&&(p=p.pipe(new l.Utf8DecodeWorker))}catch(x){(p=new c("error")).error(x)}return new s(p,y,"")},async:function(d,p){return this.internalStream(d).accumulate(p)},nodeStream:function(d,p){return this.internalStream(d||"nodebuffer").toNodejsStream(p)},_compressWorker:function(d,p){if(this._data instanceof u&&this._data.compression.magic===d.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(y,d,p)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof c?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},A=0;A<h.length;A++)a.prototype[h[A]]=f;n.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,i){(function(a){var s,o,l=a.MutationObserver||a.WebKitMutationObserver;if(l){var u=0,c=new l(d),h=a.document.createTextNode("");c.observe(h,{characterData:!0}),s=function(){h.data=u=++u%2}}else if(a.setImmediate||a.MessageChannel===void 0)s="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var p=a.document.createElement("script");p.onreadystatechange=function(){d(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},a.document.documentElement.appendChild(p)}:function(){setTimeout(d,0)};else{var f=new a.MessageChannel;f.port1.onmessage=d,s=function(){f.port2.postMessage(0)}}var A=[];function d(){var p,y;o=!0;for(var v=A.length;v;){for(y=A,A=[],p=-1;++p<v;)y[p]();v=A.length}o=!1}n.exports=function(p){A.push(p)!==1||o||s()}}).call(this,typeof Os<"u"?Os:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,i){var a=t("immediate");function s(){}var o={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];function h(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,v!==s&&p(this,v)}function f(v,w,x){this.promise=v,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}function A(v,w,x){a(function(){var b;try{b=w(x)}catch(C){return o.reject(v,C)}b===v?o.reject(v,new TypeError("Cannot resolve promise with itself")):o.resolve(v,b)})}function d(v){var w=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof w=="function")return function(){w.apply(v,arguments)}}function p(v,w){var x=!1;function b(I){x||(x=!0,o.reject(v,I))}function C(I){x||(x=!0,o.resolve(v,I))}var S=y(function(){w(C,b)});S.status==="error"&&b(S.value)}function y(v,w){var x={};try{x.value=v(w),x.status="success"}catch(b){x.status="error",x.value=b}return x}(n.exports=h).prototype.finally=function(v){if(typeof v!="function")return this;var w=this.constructor;return this.then(function(x){return w.resolve(v()).then(function(){return x})},function(x){return w.resolve(v()).then(function(){throw x})})},h.prototype.catch=function(v){return this.then(null,v)},h.prototype.then=function(v,w){if(typeof v!="function"&&this.state===u||typeof w!="function"&&this.state===l)return this;var x=new this.constructor(s);return this.state!==c?A(x,this.state===u?v:w,this.outcome):this.queue.push(new f(x,v,w)),x},f.prototype.callFulfilled=function(v){o.resolve(this.promise,v)},f.prototype.otherCallFulfilled=function(v){A(this.promise,this.onFulfilled,v)},f.prototype.callRejected=function(v){o.reject(this.promise,v)},f.prototype.otherCallRejected=function(v){A(this.promise,this.onRejected,v)},o.resolve=function(v,w){var x=y(d,w);if(x.status==="error")return o.reject(v,x.value);var b=x.value;if(b)p(v,b);else{v.state=u,v.outcome=w;for(var C=-1,S=v.queue.length;++C<S;)v.queue[C].callFulfilled(w)}return v},o.reject=function(v,w){v.state=l,v.outcome=w;for(var x=-1,b=v.queue.length;++x<b;)v.queue[x].callRejected(w);return v},h.resolve=function(v){return v instanceof this?v:o.resolve(new this(s),v)},h.reject=function(v){var w=new this(s);return o.reject(w,v)},h.all=function(v){var w=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=v.length,b=!1;if(!x)return this.resolve([]);for(var C=new Array(x),S=0,I=-1,B=new this(s);++I<x;)T(v[I],I);return B;function T(M,F){w.resolve(M).then(function(N){C[F]=N,++S!==x||b||(b=!0,o.resolve(B,C))},function(N){b||(b=!0,o.reject(B,N))})}},h.race=function(v){var w=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=v.length,b=!1;if(!x)return this.resolve([]);for(var C=-1,S=new this(s);++C<x;)I=v[C],w.resolve(I).then(function(B){b||(b=!0,o.resolve(S,B))},function(B){b||(b=!0,o.reject(S,B))});var I;return S}},{immediate:36}],38:[function(t,n,i){var a={};(0,t("./lib/utils/common").assign)(a,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,i){var a=t("./zlib/deflate"),s=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/messages"),u=t("./zlib/zstream"),c=Object.prototype.toString,h=0,f=-1,A=0,d=8;function p(v){if(!(this instanceof p))return new p(v);this.options=s.assign({level:f,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:A,to:""},v||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var x=a.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(x!==h)throw new Error(l[x]);if(w.header&&a.deflateSetHeader(this.strm,w.header),w.dictionary){var b;if(b=typeof w.dictionary=="string"?o.string2buf(w.dictionary):c.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(x=a.deflateSetDictionary(this.strm,b))!==h)throw new Error(l[x]);this._dict_set=!0}}function y(v,w){var x=new p(w);if(x.push(v,!0),x.err)throw x.msg||l[x.err];return x.result}p.prototype.push=function(v,w){var x,b,C=this.strm,S=this.options.chunkSize;if(this.ended)return!1;b=w===~~w?w:w===!0?4:0,typeof v=="string"?C.input=o.string2buf(v):c.call(v)==="[object ArrayBuffer]"?C.input=new Uint8Array(v):C.input=v,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new s.Buf8(S),C.next_out=0,C.avail_out=S),(x=a.deflate(C,b))!==1&&x!==h)return this.onEnd(x),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||b!==4&&b!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(s.shrinkBuf(C.output,C.next_out))):this.onData(s.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&x!==1);return b===4?(x=a.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===h):b!==2||(this.onEnd(h),!(C.avail_out=0))},p.prototype.onData=function(v){this.chunks.push(v)},p.prototype.onEnd=function(v){v===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},i.Deflate=p,i.deflate=y,i.deflateRaw=function(v,w){return(w=w||{}).raw=!0,y(v,w)},i.gzip=function(v,w){return(w=w||{}).gzip=!0,y(v,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,i){var a=t("./zlib/inflate"),s=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/constants"),u=t("./zlib/messages"),c=t("./zlib/zstream"),h=t("./zlib/gzheader"),f=Object.prototype.toString;function A(p){if(!(this instanceof A))return new A(p);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},p||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||p&&p.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&!(15&y.windowBits)&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var v=a.inflateInit2(this.strm,y.windowBits);if(v!==l.Z_OK)throw new Error(u[v]);this.header=new h,a.inflateGetHeader(this.strm,this.header)}function d(p,y){var v=new A(y);if(v.push(p,!0),v.err)throw v.msg||u[v.err];return v.result}A.prototype.push=function(p,y){var v,w,x,b,C,S,I=this.strm,B=this.options.chunkSize,T=this.options.dictionary,M=!1;if(this.ended)return!1;w=y===~~y?y:y===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof p=="string"?I.input=o.binstring2buf(p):f.call(p)==="[object ArrayBuffer]"?I.input=new Uint8Array(p):I.input=p,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new s.Buf8(B),I.next_out=0,I.avail_out=B),(v=a.inflate(I,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&T&&(S=typeof T=="string"?o.string2buf(T):f.call(T)==="[object ArrayBuffer]"?new Uint8Array(T):T,v=a.inflateSetDictionary(this.strm,S)),v===l.Z_BUF_ERROR&&M===!0&&(v=l.Z_OK,M=!1),v!==l.Z_STREAM_END&&v!==l.Z_OK)return this.onEnd(v),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&v!==l.Z_STREAM_END&&(I.avail_in!==0||w!==l.Z_FINISH&&w!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(x=o.utf8border(I.output,I.next_out),b=I.next_out-x,C=o.buf2string(I.output,x),I.next_out=b,I.avail_out=B-b,b&&s.arraySet(I.output,I.output,x,b,0),this.onData(C)):this.onData(s.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(M=!0)}while((0<I.avail_in||I.avail_out===0)&&v!==l.Z_STREAM_END);return v===l.Z_STREAM_END&&(w=l.Z_FINISH),w===l.Z_FINISH?(v=a.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===l.Z_OK):w!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(I.avail_out=0))},A.prototype.onData=function(p){this.chunks.push(p)},A.prototype.onEnd=function(p){p===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},i.Inflate=A,i.inflate=d,i.inflateRaw=function(p,y){return(y=y||{}).raw=!0,d(p,y)},i.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var c=u.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])}}return l},i.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var s={arraySet:function(l,u,c,h,f){if(u.subarray&&l.subarray)l.set(u.subarray(c,c+h),f);else for(var A=0;A<h;A++)l[f+A]=u[c+A]},flattenChunks:function(l){var u,c,h,f,A,d;for(u=h=0,c=l.length;u<c;u++)h+=l[u].length;for(d=new Uint8Array(h),u=f=0,c=l.length;u<c;u++)A=l[u],d.set(A,f),f+=A.length;return d}},o={arraySet:function(l,u,c,h,f){for(var A=0;A<h;A++)l[f+A]=u[c+A]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(a)},{}],42:[function(t,n,i){var a=t("./common"),s=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new a.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(h,f){if(f<65537&&(h.subarray&&o||!h.subarray&&s))return String.fromCharCode.apply(null,a.shrinkBuf(h,f));for(var A="",d=0;d<f;d++)A+=String.fromCharCode(h[d]);return A}l[254]=l[254]=1,i.string2buf=function(h){var f,A,d,p,y,v=h.length,w=0;for(p=0;p<v;p++)(64512&(A=h.charCodeAt(p)))==55296&&p+1<v&&(64512&(d=h.charCodeAt(p+1)))==56320&&(A=65536+(A-55296<<10)+(d-56320),p++),w+=A<128?1:A<2048?2:A<65536?3:4;for(f=new a.Buf8(w),p=y=0;y<w;p++)(64512&(A=h.charCodeAt(p)))==55296&&p+1<v&&(64512&(d=h.charCodeAt(p+1)))==56320&&(A=65536+(A-55296<<10)+(d-56320),p++),A<128?f[y++]=A:(A<2048?f[y++]=192|A>>>6:(A<65536?f[y++]=224|A>>>12:(f[y++]=240|A>>>18,f[y++]=128|A>>>12&63),f[y++]=128|A>>>6&63),f[y++]=128|63&A);return f},i.buf2binstring=function(h){return c(h,h.length)},i.binstring2buf=function(h){for(var f=new a.Buf8(h.length),A=0,d=f.length;A<d;A++)f[A]=h.charCodeAt(A);return f},i.buf2string=function(h,f){var A,d,p,y,v=f||h.length,w=new Array(2*v);for(A=d=0;A<v;)if((p=h[A++])<128)w[d++]=p;else if(4<(y=l[p]))w[d++]=65533,A+=y-1;else{for(p&=y===2?31:y===3?15:7;1<y&&A<v;)p=p<<6|63&h[A++],y--;1<y?w[d++]=65533:p<65536?w[d++]=p:(p-=65536,w[d++]=55296|p>>10&1023,w[d++]=56320|1023&p)}return c(w,d)},i.utf8border=function(h,f){var A;for((f=f||h.length)>h.length&&(f=h.length),A=f-1;0<=A&&(192&h[A])==128;)A--;return A<0||A===0?f:A+l[h[A]]>f?A:f}},{"./common":41}],43:[function(t,n,i){n.exports=function(a,s,o,l){for(var u=65535&a|0,c=a>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;c=c+(u=u+s[l++]|0)|0,--h;);u%=65521,c%=65521}return u|c<<16|0}},{}],44:[function(t,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,i){var a=function(){for(var s,o=[],l=0;l<256;l++){s=l;for(var u=0;u<8;u++)s=1&s?3988292384^s>>>1:s>>>1;o[l]=s}return o}();n.exports=function(s,o,l,u){var c=a,h=u+l;s^=-1;for(var f=u;f<h;f++)s=s>>>8^c[255&(s^o[f])];return-1^s}},{}],46:[function(t,n,i){var a,s=t("../utils/common"),o=t("./trees"),l=t("./adler32"),u=t("./crc32"),c=t("./messages"),h=0,f=4,A=0,d=-2,p=-1,y=4,v=2,w=8,x=9,b=286,C=30,S=19,I=2*b+1,B=15,T=3,M=258,F=M+T+1,N=42,O=113,L=1,G=2,R=3,U=4;function W(te,se){return te.msg=c[se],se}function Q(te){return(te<<1)-(4<te?9:0)}function re(te){for(var se=te.length;0<=--se;)te[se]=0}function oe(te){var se=te.state,Z=se.pending;Z>te.avail_out&&(Z=te.avail_out),Z!==0&&(s.arraySet(te.output,se.pending_buf,se.pending_out,Z,te.next_out),te.next_out+=Z,se.pending_out+=Z,te.total_out+=Z,te.avail_out-=Z,se.pending-=Z,se.pending===0&&(se.pending_out=0))}function P(te,se){o._tr_flush_block(te,0<=te.block_start?te.block_start:-1,te.strstart-te.block_start,se),te.block_start=te.strstart,oe(te.strm)}function z(te,se){te.pending_buf[te.pending++]=se}function K(te,se){te.pending_buf[te.pending++]=se>>>8&255,te.pending_buf[te.pending++]=255&se}function J(te,se){var Z,he,ne=te.max_chain_length,ae=te.strstart,_e=te.prev_length,Me=te.nice_match,be=te.strstart>te.w_size-F?te.strstart-(te.w_size-F):0,Ae=te.window,pe=te.w_mask,Fe=te.prev,Ge=te.strstart+M,Ze=Ae[ae+_e-1],He=Ae[ae+_e];te.prev_length>=te.good_match&&(ne>>=2),Me>te.lookahead&&(Me=te.lookahead);do if(Ae[(Z=se)+_e]===He&&Ae[Z+_e-1]===Ze&&Ae[Z]===Ae[ae]&&Ae[++Z]===Ae[ae+1]){ae+=2,Z++;do;while(Ae[++ae]===Ae[++Z]&&Ae[++ae]===Ae[++Z]&&Ae[++ae]===Ae[++Z]&&Ae[++ae]===Ae[++Z]&&Ae[++ae]===Ae[++Z]&&Ae[++ae]===Ae[++Z]&&Ae[++ae]===Ae[++Z]&&Ae[++ae]===Ae[++Z]&&ae<Ge);if(he=M-(Ge-ae),ae=Ge-M,_e<he){if(te.match_start=se,Me<=(_e=he))break;Ze=Ae[ae+_e-1],He=Ae[ae+_e]}}while((se=Fe[se&pe])>be&&--ne!=0);return _e<=te.lookahead?_e:te.lookahead}function ue(te){var se,Z,he,ne,ae,_e,Me,be,Ae,pe,Fe=te.w_size;do{if(ne=te.window_size-te.lookahead-te.strstart,te.strstart>=Fe+(Fe-F)){for(s.arraySet(te.window,te.window,Fe,Fe,0),te.match_start-=Fe,te.strstart-=Fe,te.block_start-=Fe,se=Z=te.hash_size;he=te.head[--se],te.head[se]=Fe<=he?he-Fe:0,--Z;);for(se=Z=Fe;he=te.prev[--se],te.prev[se]=Fe<=he?he-Fe:0,--Z;);ne+=Fe}if(te.strm.avail_in===0)break;if(_e=te.strm,Me=te.window,be=te.strstart+te.lookahead,Ae=ne,pe=void 0,pe=_e.avail_in,Ae<pe&&(pe=Ae),Z=pe===0?0:(_e.avail_in-=pe,s.arraySet(Me,_e.input,_e.next_in,pe,be),_e.state.wrap===1?_e.adler=l(_e.adler,Me,pe,be):_e.state.wrap===2&&(_e.adler=u(_e.adler,Me,pe,be)),_e.next_in+=pe,_e.total_in+=pe,pe),te.lookahead+=Z,te.lookahead+te.insert>=T)for(ae=te.strstart-te.insert,te.ins_h=te.window[ae],te.ins_h=(te.ins_h<<te.hash_shift^te.window[ae+1])&te.hash_mask;te.insert&&(te.ins_h=(te.ins_h<<te.hash_shift^te.window[ae+T-1])&te.hash_mask,te.prev[ae&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=ae,ae++,te.insert--,!(te.lookahead+te.insert<T)););}while(te.lookahead<F&&te.strm.avail_in!==0)}function ge(te,se){for(var Z,he;;){if(te.lookahead<F){if(ue(te),te.lookahead<F&&se===h)return L;if(te.lookahead===0)break}if(Z=0,te.lookahead>=T&&(te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+T-1])&te.hash_mask,Z=te.prev[te.strstart&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=te.strstart),Z!==0&&te.strstart-Z<=te.w_size-F&&(te.match_length=J(te,Z)),te.match_length>=T)if(he=o._tr_tally(te,te.strstart-te.match_start,te.match_length-T),te.lookahead-=te.match_length,te.match_length<=te.max_lazy_match&&te.lookahead>=T){for(te.match_length--;te.strstart++,te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+T-1])&te.hash_mask,Z=te.prev[te.strstart&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=te.strstart,--te.match_length!=0;);te.strstart++}else te.strstart+=te.match_length,te.match_length=0,te.ins_h=te.window[te.strstart],te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+1])&te.hash_mask;else he=o._tr_tally(te,0,te.window[te.strstart]),te.lookahead--,te.strstart++;if(he&&(P(te,!1),te.strm.avail_out===0))return L}return te.insert=te.strstart<T-1?te.strstart:T-1,se===f?(P(te,!0),te.strm.avail_out===0?R:U):te.last_lit&&(P(te,!1),te.strm.avail_out===0)?L:G}function le(te,se){for(var Z,he,ne;;){if(te.lookahead<F){if(ue(te),te.lookahead<F&&se===h)return L;if(te.lookahead===0)break}if(Z=0,te.lookahead>=T&&(te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+T-1])&te.hash_mask,Z=te.prev[te.strstart&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=te.strstart),te.prev_length=te.match_length,te.prev_match=te.match_start,te.match_length=T-1,Z!==0&&te.prev_length<te.max_lazy_match&&te.strstart-Z<=te.w_size-F&&(te.match_length=J(te,Z),te.match_length<=5&&(te.strategy===1||te.match_length===T&&4096<te.strstart-te.match_start)&&(te.match_length=T-1)),te.prev_length>=T&&te.match_length<=te.prev_length){for(ne=te.strstart+te.lookahead-T,he=o._tr_tally(te,te.strstart-1-te.prev_match,te.prev_length-T),te.lookahead-=te.prev_length-1,te.prev_length-=2;++te.strstart<=ne&&(te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+T-1])&te.hash_mask,Z=te.prev[te.strstart&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=te.strstart),--te.prev_length!=0;);if(te.match_available=0,te.match_length=T-1,te.strstart++,he&&(P(te,!1),te.strm.avail_out===0))return L}else if(te.match_available){if((he=o._tr_tally(te,0,te.window[te.strstart-1]))&&P(te,!1),te.strstart++,te.lookahead--,te.strm.avail_out===0)return L}else te.match_available=1,te.strstart++,te.lookahead--}return te.match_available&&(he=o._tr_tally(te,0,te.window[te.strstart-1]),te.match_available=0),te.insert=te.strstart<T-1?te.strstart:T-1,se===f?(P(te,!0),te.strm.avail_out===0?R:U):te.last_lit&&(P(te,!1),te.strm.avail_out===0)?L:G}function me(te,se,Z,he,ne){this.good_length=te,this.max_lazy=se,this.nice_length=Z,this.max_chain=he,this.func=ne}function xe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*I),this.dyn_dtree=new s.Buf16(2*(2*C+1)),this.bl_tree=new s.Buf16(2*(2*S+1)),re(this.dyn_ltree),re(this.dyn_dtree),re(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(B+1),this.heap=new s.Buf16(2*b+1),re(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*b+1),re(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Be(te){var se;return te&&te.state?(te.total_in=te.total_out=0,te.data_type=v,(se=te.state).pending=0,se.pending_out=0,se.wrap<0&&(se.wrap=-se.wrap),se.status=se.wrap?N:O,te.adler=se.wrap===2?0:1,se.last_flush=h,o._tr_init(se),A):W(te,d)}function Y(te){var se=Be(te);return se===A&&function(Z){Z.window_size=2*Z.w_size,re(Z.head),Z.max_lazy_match=a[Z.level].max_lazy,Z.good_match=a[Z.level].good_length,Z.nice_match=a[Z.level].nice_length,Z.max_chain_length=a[Z.level].max_chain,Z.strstart=0,Z.block_start=0,Z.lookahead=0,Z.insert=0,Z.match_length=Z.prev_length=T-1,Z.match_available=0,Z.ins_h=0}(te.state),se}function Ve(te,se,Z,he,ne,ae){if(!te)return d;var _e=1;if(se===p&&(se=6),he<0?(_e=0,he=-he):15<he&&(_e=2,he-=16),ne<1||x<ne||Z!==w||he<8||15<he||se<0||9<se||ae<0||y<ae)return W(te,d);he===8&&(he=9);var Me=new xe;return(te.state=Me).strm=te,Me.wrap=_e,Me.gzhead=null,Me.w_bits=he,Me.w_size=1<<Me.w_bits,Me.w_mask=Me.w_size-1,Me.hash_bits=ne+7,Me.hash_size=1<<Me.hash_bits,Me.hash_mask=Me.hash_size-1,Me.hash_shift=~~((Me.hash_bits+T-1)/T),Me.window=new s.Buf8(2*Me.w_size),Me.head=new s.Buf16(Me.hash_size),Me.prev=new s.Buf16(Me.w_size),Me.lit_bufsize=1<<ne+6,Me.pending_buf_size=4*Me.lit_bufsize,Me.pending_buf=new s.Buf8(Me.pending_buf_size),Me.d_buf=1*Me.lit_bufsize,Me.l_buf=3*Me.lit_bufsize,Me.level=se,Me.strategy=ae,Me.method=Z,Y(te)}a=[new me(0,0,0,0,function(te,se){var Z=65535;for(Z>te.pending_buf_size-5&&(Z=te.pending_buf_size-5);;){if(te.lookahead<=1){if(ue(te),te.lookahead===0&&se===h)return L;if(te.lookahead===0)break}te.strstart+=te.lookahead,te.lookahead=0;var he=te.block_start+Z;if((te.strstart===0||te.strstart>=he)&&(te.lookahead=te.strstart-he,te.strstart=he,P(te,!1),te.strm.avail_out===0)||te.strstart-te.block_start>=te.w_size-F&&(P(te,!1),te.strm.avail_out===0))return L}return te.insert=0,se===f?(P(te,!0),te.strm.avail_out===0?R:U):(te.strstart>te.block_start&&(P(te,!1),te.strm.avail_out),L)}),new me(4,4,8,4,ge),new me(4,5,16,8,ge),new me(4,6,32,32,ge),new me(4,4,16,16,le),new me(8,16,32,32,le),new me(8,16,128,128,le),new me(8,32,128,256,le),new me(32,128,258,1024,le),new me(32,258,258,4096,le)],i.deflateInit=function(te,se){return Ve(te,se,w,15,8,0)},i.deflateInit2=Ve,i.deflateReset=Y,i.deflateResetKeep=Be,i.deflateSetHeader=function(te,se){return te&&te.state?te.state.wrap!==2?d:(te.state.gzhead=se,A):d},i.deflate=function(te,se){var Z,he,ne,ae;if(!te||!te.state||5<se||se<0)return te?W(te,d):d;if(he=te.state,!te.output||!te.input&&te.avail_in!==0||he.status===666&&se!==f)return W(te,te.avail_out===0?-5:d);if(he.strm=te,Z=he.last_flush,he.last_flush=se,he.status===N)if(he.wrap===2)te.adler=0,z(he,31),z(he,139),z(he,8),he.gzhead?(z(he,(he.gzhead.text?1:0)+(he.gzhead.hcrc?2:0)+(he.gzhead.extra?4:0)+(he.gzhead.name?8:0)+(he.gzhead.comment?16:0)),z(he,255&he.gzhead.time),z(he,he.gzhead.time>>8&255),z(he,he.gzhead.time>>16&255),z(he,he.gzhead.time>>24&255),z(he,he.level===9?2:2<=he.strategy||he.level<2?4:0),z(he,255&he.gzhead.os),he.gzhead.extra&&he.gzhead.extra.length&&(z(he,255&he.gzhead.extra.length),z(he,he.gzhead.extra.length>>8&255)),he.gzhead.hcrc&&(te.adler=u(te.adler,he.pending_buf,he.pending,0)),he.gzindex=0,he.status=69):(z(he,0),z(he,0),z(he,0),z(he,0),z(he,0),z(he,he.level===9?2:2<=he.strategy||he.level<2?4:0),z(he,3),he.status=O);else{var _e=w+(he.w_bits-8<<4)<<8;_e|=(2<=he.strategy||he.level<2?0:he.level<6?1:he.level===6?2:3)<<6,he.strstart!==0&&(_e|=32),_e+=31-_e%31,he.status=O,K(he,_e),he.strstart!==0&&(K(he,te.adler>>>16),K(he,65535&te.adler)),te.adler=1}if(he.status===69)if(he.gzhead.extra){for(ne=he.pending;he.gzindex<(65535&he.gzhead.extra.length)&&(he.pending!==he.pending_buf_size||(he.gzhead.hcrc&&he.pending>ne&&(te.adler=u(te.adler,he.pending_buf,he.pending-ne,ne)),oe(te),ne=he.pending,he.pending!==he.pending_buf_size));)z(he,255&he.gzhead.extra[he.gzindex]),he.gzindex++;he.gzhead.hcrc&&he.pending>ne&&(te.adler=u(te.adler,he.pending_buf,he.pending-ne,ne)),he.gzindex===he.gzhead.extra.length&&(he.gzindex=0,he.status=73)}else he.status=73;if(he.status===73)if(he.gzhead.name){ne=he.pending;do{if(he.pending===he.pending_buf_size&&(he.gzhead.hcrc&&he.pending>ne&&(te.adler=u(te.adler,he.pending_buf,he.pending-ne,ne)),oe(te),ne=he.pending,he.pending===he.pending_buf_size)){ae=1;break}ae=he.gzindex<he.gzhead.name.length?255&he.gzhead.name.charCodeAt(he.gzindex++):0,z(he,ae)}while(ae!==0);he.gzhead.hcrc&&he.pending>ne&&(te.adler=u(te.adler,he.pending_buf,he.pending-ne,ne)),ae===0&&(he.gzindex=0,he.status=91)}else he.status=91;if(he.status===91)if(he.gzhead.comment){ne=he.pending;do{if(he.pending===he.pending_buf_size&&(he.gzhead.hcrc&&he.pending>ne&&(te.adler=u(te.adler,he.pending_buf,he.pending-ne,ne)),oe(te),ne=he.pending,he.pending===he.pending_buf_size)){ae=1;break}ae=he.gzindex<he.gzhead.comment.length?255&he.gzhead.comment.charCodeAt(he.gzindex++):0,z(he,ae)}while(ae!==0);he.gzhead.hcrc&&he.pending>ne&&(te.adler=u(te.adler,he.pending_buf,he.pending-ne,ne)),ae===0&&(he.status=103)}else he.status=103;if(he.status===103&&(he.gzhead.hcrc?(he.pending+2>he.pending_buf_size&&oe(te),he.pending+2<=he.pending_buf_size&&(z(he,255&te.adler),z(he,te.adler>>8&255),te.adler=0,he.status=O)):he.status=O),he.pending!==0){if(oe(te),te.avail_out===0)return he.last_flush=-1,A}else if(te.avail_in===0&&Q(se)<=Q(Z)&&se!==f)return W(te,-5);if(he.status===666&&te.avail_in!==0)return W(te,-5);if(te.avail_in!==0||he.lookahead!==0||se!==h&&he.status!==666){var Me=he.strategy===2?function(be,Ae){for(var pe;;){if(be.lookahead===0&&(ue(be),be.lookahead===0)){if(Ae===h)return L;break}if(be.match_length=0,pe=o._tr_tally(be,0,be.window[be.strstart]),be.lookahead--,be.strstart++,pe&&(P(be,!1),be.strm.avail_out===0))return L}return be.insert=0,Ae===f?(P(be,!0),be.strm.avail_out===0?R:U):be.last_lit&&(P(be,!1),be.strm.avail_out===0)?L:G}(he,se):he.strategy===3?function(be,Ae){for(var pe,Fe,Ge,Ze,He=be.window;;){if(be.lookahead<=M){if(ue(be),be.lookahead<=M&&Ae===h)return L;if(be.lookahead===0)break}if(be.match_length=0,be.lookahead>=T&&0<be.strstart&&(Fe=He[Ge=be.strstart-1])===He[++Ge]&&Fe===He[++Ge]&&Fe===He[++Ge]){Ze=be.strstart+M;do;while(Fe===He[++Ge]&&Fe===He[++Ge]&&Fe===He[++Ge]&&Fe===He[++Ge]&&Fe===He[++Ge]&&Fe===He[++Ge]&&Fe===He[++Ge]&&Fe===He[++Ge]&&Ge<Ze);be.match_length=M-(Ze-Ge),be.match_length>be.lookahead&&(be.match_length=be.lookahead)}if(be.match_length>=T?(pe=o._tr_tally(be,1,be.match_length-T),be.lookahead-=be.match_length,be.strstart+=be.match_length,be.match_length=0):(pe=o._tr_tally(be,0,be.window[be.strstart]),be.lookahead--,be.strstart++),pe&&(P(be,!1),be.strm.avail_out===0))return L}return be.insert=0,Ae===f?(P(be,!0),be.strm.avail_out===0?R:U):be.last_lit&&(P(be,!1),be.strm.avail_out===0)?L:G}(he,se):a[he.level].func(he,se);if(Me!==R&&Me!==U||(he.status=666),Me===L||Me===R)return te.avail_out===0&&(he.last_flush=-1),A;if(Me===G&&(se===1?o._tr_align(he):se!==5&&(o._tr_stored_block(he,0,0,!1),se===3&&(re(he.head),he.lookahead===0&&(he.strstart=0,he.block_start=0,he.insert=0))),oe(te),te.avail_out===0))return he.last_flush=-1,A}return se!==f?A:he.wrap<=0?1:(he.wrap===2?(z(he,255&te.adler),z(he,te.adler>>8&255),z(he,te.adler>>16&255),z(he,te.adler>>24&255),z(he,255&te.total_in),z(he,te.total_in>>8&255),z(he,te.total_in>>16&255),z(he,te.total_in>>24&255)):(K(he,te.adler>>>16),K(he,65535&te.adler)),oe(te),0<he.wrap&&(he.wrap=-he.wrap),he.pending!==0?A:1)},i.deflateEnd=function(te){var se;return te&&te.state?(se=te.state.status)!==N&&se!==69&&se!==73&&se!==91&&se!==103&&se!==O&&se!==666?W(te,d):(te.state=null,se===O?W(te,-3):A):d},i.deflateSetDictionary=function(te,se){var Z,he,ne,ae,_e,Me,be,Ae,pe=se.length;if(!te||!te.state||(ae=(Z=te.state).wrap)===2||ae===1&&Z.status!==N||Z.lookahead)return d;for(ae===1&&(te.adler=l(te.adler,se,pe,0)),Z.wrap=0,pe>=Z.w_size&&(ae===0&&(re(Z.head),Z.strstart=0,Z.block_start=0,Z.insert=0),Ae=new s.Buf8(Z.w_size),s.arraySet(Ae,se,pe-Z.w_size,Z.w_size,0),se=Ae,pe=Z.w_size),_e=te.avail_in,Me=te.next_in,be=te.input,te.avail_in=pe,te.next_in=0,te.input=se,ue(Z);Z.lookahead>=T;){for(he=Z.strstart,ne=Z.lookahead-(T-1);Z.ins_h=(Z.ins_h<<Z.hash_shift^Z.window[he+T-1])&Z.hash_mask,Z.prev[he&Z.w_mask]=Z.head[Z.ins_h],Z.head[Z.ins_h]=he,he++,--ne;);Z.strstart=he,Z.lookahead=T-1,ue(Z)}return Z.strstart+=Z.lookahead,Z.block_start=Z.strstart,Z.insert=Z.lookahead,Z.lookahead=0,Z.match_length=Z.prev_length=T-1,Z.match_available=0,te.next_in=Me,te.input=be,te.avail_in=_e,Z.wrap=ae,A},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,i){n.exports=function(a,s){var o,l,u,c,h,f,A,d,p,y,v,w,x,b,C,S,I,B,T,M,F,N,O,L,G;o=a.state,l=a.next_in,L=a.input,u=l+(a.avail_in-5),c=a.next_out,G=a.output,h=c-(s-a.avail_out),f=c+(a.avail_out-257),A=o.dmax,d=o.wsize,p=o.whave,y=o.wnext,v=o.window,w=o.hold,x=o.bits,b=o.lencode,C=o.distcode,S=(1<<o.lenbits)-1,I=(1<<o.distbits)-1;e:do{x<15&&(w+=L[l++]<<x,x+=8,w+=L[l++]<<x,x+=8),B=b[w&S];t:for(;;){if(w>>>=T=B>>>24,x-=T,(T=B>>>16&255)===0)G[c++]=65535&B;else{if(!(16&T)){if(!(64&T)){B=b[(65535&B)+(w&(1<<T)-1)];continue t}if(32&T){o.mode=12;break e}a.msg="invalid literal/length code",o.mode=30;break e}M=65535&B,(T&=15)&&(x<T&&(w+=L[l++]<<x,x+=8),M+=w&(1<<T)-1,w>>>=T,x-=T),x<15&&(w+=L[l++]<<x,x+=8,w+=L[l++]<<x,x+=8),B=C[w&I];r:for(;;){if(w>>>=T=B>>>24,x-=T,!(16&(T=B>>>16&255))){if(!(64&T)){B=C[(65535&B)+(w&(1<<T)-1)];continue r}a.msg="invalid distance code",o.mode=30;break e}if(F=65535&B,x<(T&=15)&&(w+=L[l++]<<x,(x+=8)<T&&(w+=L[l++]<<x,x+=8)),A<(F+=w&(1<<T)-1)){a.msg="invalid distance too far back",o.mode=30;break e}if(w>>>=T,x-=T,(T=c-h)<F){if(p<(T=F-T)&&o.sane){a.msg="invalid distance too far back",o.mode=30;break e}if(O=v,(N=0)===y){if(N+=d-T,T<M){for(M-=T;G[c++]=v[N++],--T;);N=c-F,O=G}}else if(y<T){if(N+=d+y-T,(T-=y)<M){for(M-=T;G[c++]=v[N++],--T;);if(N=0,y<M){for(M-=T=y;G[c++]=v[N++],--T;);N=c-F,O=G}}}else if(N+=y-T,T<M){for(M-=T;G[c++]=v[N++],--T;);N=c-F,O=G}for(;2<M;)G[c++]=O[N++],G[c++]=O[N++],G[c++]=O[N++],M-=3;M&&(G[c++]=O[N++],1<M&&(G[c++]=O[N++]))}else{for(N=c-F;G[c++]=G[N++],G[c++]=G[N++],G[c++]=G[N++],2<(M-=3););M&&(G[c++]=G[N++],1<M&&(G[c++]=G[N++]))}break}}break}}while(l<u&&c<f);l-=M=x>>3,w&=(1<<(x-=M<<3))-1,a.next_in=l,a.next_out=c,a.avail_in=l<u?u-l+5:5-(l-u),a.avail_out=c<f?f-c+257:257-(c-f),o.hold=w,o.bits=x}},{}],49:[function(t,n,i){var a=t("../utils/common"),s=t("./adler32"),o=t("./crc32"),l=t("./inffast"),u=t("./inftrees"),c=1,h=2,f=0,A=-2,d=1,p=852,y=592;function v(N){return(N>>>24&255)+(N>>>8&65280)+((65280&N)<<8)+((255&N)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function x(N){var O;return N&&N.state?(O=N.state,N.total_in=N.total_out=O.total=0,N.msg="",O.wrap&&(N.adler=1&O.wrap),O.mode=d,O.last=0,O.havedict=0,O.dmax=32768,O.head=null,O.hold=0,O.bits=0,O.lencode=O.lendyn=new a.Buf32(p),O.distcode=O.distdyn=new a.Buf32(y),O.sane=1,O.back=-1,f):A}function b(N){var O;return N&&N.state?((O=N.state).wsize=0,O.whave=0,O.wnext=0,x(N)):A}function C(N,O){var L,G;return N&&N.state?(G=N.state,O<0?(L=0,O=-O):(L=1+(O>>4),O<48&&(O&=15)),O&&(O<8||15<O)?A:(G.window!==null&&G.wbits!==O&&(G.window=null),G.wrap=L,G.wbits=O,b(N))):A}function S(N,O){var L,G;return N?(G=new w,(N.state=G).window=null,(L=C(N,O))!==f&&(N.state=null),L):A}var I,B,T=!0;function M(N){if(T){var O;for(I=new a.Buf32(512),B=new a.Buf32(32),O=0;O<144;)N.lens[O++]=8;for(;O<256;)N.lens[O++]=9;for(;O<280;)N.lens[O++]=7;for(;O<288;)N.lens[O++]=8;for(u(c,N.lens,0,288,I,0,N.work,{bits:9}),O=0;O<32;)N.lens[O++]=5;u(h,N.lens,0,32,B,0,N.work,{bits:5}),T=!1}N.lencode=I,N.lenbits=9,N.distcode=B,N.distbits=5}function F(N,O,L,G){var R,U=N.state;return U.window===null&&(U.wsize=1<<U.wbits,U.wnext=0,U.whave=0,U.window=new a.Buf8(U.wsize)),G>=U.wsize?(a.arraySet(U.window,O,L-U.wsize,U.wsize,0),U.wnext=0,U.whave=U.wsize):(G<(R=U.wsize-U.wnext)&&(R=G),a.arraySet(U.window,O,L-G,R,U.wnext),(G-=R)?(a.arraySet(U.window,O,L-G,G,0),U.wnext=G,U.whave=U.wsize):(U.wnext+=R,U.wnext===U.wsize&&(U.wnext=0),U.whave<U.wsize&&(U.whave+=R))),0}i.inflateReset=b,i.inflateReset2=C,i.inflateResetKeep=x,i.inflateInit=function(N){return S(N,15)},i.inflateInit2=S,i.inflate=function(N,O){var L,G,R,U,W,Q,re,oe,P,z,K,J,ue,ge,le,me,xe,Be,Y,Ve,te,se,Z,he,ne=0,ae=new a.Buf8(4),_e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!N||!N.state||!N.output||!N.input&&N.avail_in!==0)return A;(L=N.state).mode===12&&(L.mode=13),W=N.next_out,R=N.output,re=N.avail_out,U=N.next_in,G=N.input,Q=N.avail_in,oe=L.hold,P=L.bits,z=Q,K=re,se=f;e:for(;;)switch(L.mode){case d:if(L.wrap===0){L.mode=13;break}for(;P<16;){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}if(2&L.wrap&&oe===35615){ae[L.check=0]=255&oe,ae[1]=oe>>>8&255,L.check=o(L.check,ae,2,0),P=oe=0,L.mode=2;break}if(L.flags=0,L.head&&(L.head.done=!1),!(1&L.wrap)||(((255&oe)<<8)+(oe>>8))%31){N.msg="incorrect header check",L.mode=30;break}if((15&oe)!=8){N.msg="unknown compression method",L.mode=30;break}if(P-=4,te=8+(15&(oe>>>=4)),L.wbits===0)L.wbits=te;else if(te>L.wbits){N.msg="invalid window size",L.mode=30;break}L.dmax=1<<te,N.adler=L.check=1,L.mode=512&oe?10:12,P=oe=0;break;case 2:for(;P<16;){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}if(L.flags=oe,(255&L.flags)!=8){N.msg="unknown compression method",L.mode=30;break}if(57344&L.flags){N.msg="unknown header flags set",L.mode=30;break}L.head&&(L.head.text=oe>>8&1),512&L.flags&&(ae[0]=255&oe,ae[1]=oe>>>8&255,L.check=o(L.check,ae,2,0)),P=oe=0,L.mode=3;case 3:for(;P<32;){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}L.head&&(L.head.time=oe),512&L.flags&&(ae[0]=255&oe,ae[1]=oe>>>8&255,ae[2]=oe>>>16&255,ae[3]=oe>>>24&255,L.check=o(L.check,ae,4,0)),P=oe=0,L.mode=4;case 4:for(;P<16;){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}L.head&&(L.head.xflags=255&oe,L.head.os=oe>>8),512&L.flags&&(ae[0]=255&oe,ae[1]=oe>>>8&255,L.check=o(L.check,ae,2,0)),P=oe=0,L.mode=5;case 5:if(1024&L.flags){for(;P<16;){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}L.length=oe,L.head&&(L.head.extra_len=oe),512&L.flags&&(ae[0]=255&oe,ae[1]=oe>>>8&255,L.check=o(L.check,ae,2,0)),P=oe=0}else L.head&&(L.head.extra=null);L.mode=6;case 6:if(1024&L.flags&&(Q<(J=L.length)&&(J=Q),J&&(L.head&&(te=L.head.extra_len-L.length,L.head.extra||(L.head.extra=new Array(L.head.extra_len)),a.arraySet(L.head.extra,G,U,J,te)),512&L.flags&&(L.check=o(L.check,G,J,U)),Q-=J,U+=J,L.length-=J),L.length))break e;L.length=0,L.mode=7;case 7:if(2048&L.flags){if(Q===0)break e;for(J=0;te=G[U+J++],L.head&&te&&L.length<65536&&(L.head.name+=String.fromCharCode(te)),te&&J<Q;);if(512&L.flags&&(L.check=o(L.check,G,J,U)),Q-=J,U+=J,te)break e}else L.head&&(L.head.name=null);L.length=0,L.mode=8;case 8:if(4096&L.flags){if(Q===0)break e;for(J=0;te=G[U+J++],L.head&&te&&L.length<65536&&(L.head.comment+=String.fromCharCode(te)),te&&J<Q;);if(512&L.flags&&(L.check=o(L.check,G,J,U)),Q-=J,U+=J,te)break e}else L.head&&(L.head.comment=null);L.mode=9;case 9:if(512&L.flags){for(;P<16;){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}if(oe!==(65535&L.check)){N.msg="header crc mismatch",L.mode=30;break}P=oe=0}L.head&&(L.head.hcrc=L.flags>>9&1,L.head.done=!0),N.adler=L.check=0,L.mode=12;break;case 10:for(;P<32;){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}N.adler=L.check=v(oe),P=oe=0,L.mode=11;case 11:if(L.havedict===0)return N.next_out=W,N.avail_out=re,N.next_in=U,N.avail_in=Q,L.hold=oe,L.bits=P,2;N.adler=L.check=1,L.mode=12;case 12:if(O===5||O===6)break e;case 13:if(L.last){oe>>>=7&P,P-=7&P,L.mode=27;break}for(;P<3;){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}switch(L.last=1&oe,P-=1,3&(oe>>>=1)){case 0:L.mode=14;break;case 1:if(M(L),L.mode=20,O!==6)break;oe>>>=2,P-=2;break e;case 2:L.mode=17;break;case 3:N.msg="invalid block type",L.mode=30}oe>>>=2,P-=2;break;case 14:for(oe>>>=7&P,P-=7&P;P<32;){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}if((65535&oe)!=(oe>>>16^65535)){N.msg="invalid stored block lengths",L.mode=30;break}if(L.length=65535&oe,P=oe=0,L.mode=15,O===6)break e;case 15:L.mode=16;case 16:if(J=L.length){if(Q<J&&(J=Q),re<J&&(J=re),J===0)break e;a.arraySet(R,G,U,J,W),Q-=J,U+=J,re-=J,W+=J,L.length-=J;break}L.mode=12;break;case 17:for(;P<14;){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}if(L.nlen=257+(31&oe),oe>>>=5,P-=5,L.ndist=1+(31&oe),oe>>>=5,P-=5,L.ncode=4+(15&oe),oe>>>=4,P-=4,286<L.nlen||30<L.ndist){N.msg="too many length or distance symbols",L.mode=30;break}L.have=0,L.mode=18;case 18:for(;L.have<L.ncode;){for(;P<3;){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}L.lens[_e[L.have++]]=7&oe,oe>>>=3,P-=3}for(;L.have<19;)L.lens[_e[L.have++]]=0;if(L.lencode=L.lendyn,L.lenbits=7,Z={bits:L.lenbits},se=u(0,L.lens,0,19,L.lencode,0,L.work,Z),L.lenbits=Z.bits,se){N.msg="invalid code lengths set",L.mode=30;break}L.have=0,L.mode=19;case 19:for(;L.have<L.nlen+L.ndist;){for(;me=(ne=L.lencode[oe&(1<<L.lenbits)-1])>>>16&255,xe=65535&ne,!((le=ne>>>24)<=P);){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}if(xe<16)oe>>>=le,P-=le,L.lens[L.have++]=xe;else{if(xe===16){for(he=le+2;P<he;){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}if(oe>>>=le,P-=le,L.have===0){N.msg="invalid bit length repeat",L.mode=30;break}te=L.lens[L.have-1],J=3+(3&oe),oe>>>=2,P-=2}else if(xe===17){for(he=le+3;P<he;){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}P-=le,te=0,J=3+(7&(oe>>>=le)),oe>>>=3,P-=3}else{for(he=le+7;P<he;){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}P-=le,te=0,J=11+(127&(oe>>>=le)),oe>>>=7,P-=7}if(L.have+J>L.nlen+L.ndist){N.msg="invalid bit length repeat",L.mode=30;break}for(;J--;)L.lens[L.have++]=te}}if(L.mode===30)break;if(L.lens[256]===0){N.msg="invalid code -- missing end-of-block",L.mode=30;break}if(L.lenbits=9,Z={bits:L.lenbits},se=u(c,L.lens,0,L.nlen,L.lencode,0,L.work,Z),L.lenbits=Z.bits,se){N.msg="invalid literal/lengths set",L.mode=30;break}if(L.distbits=6,L.distcode=L.distdyn,Z={bits:L.distbits},se=u(h,L.lens,L.nlen,L.ndist,L.distcode,0,L.work,Z),L.distbits=Z.bits,se){N.msg="invalid distances set",L.mode=30;break}if(L.mode=20,O===6)break e;case 20:L.mode=21;case 21:if(6<=Q&&258<=re){N.next_out=W,N.avail_out=re,N.next_in=U,N.avail_in=Q,L.hold=oe,L.bits=P,l(N,K),W=N.next_out,R=N.output,re=N.avail_out,U=N.next_in,G=N.input,Q=N.avail_in,oe=L.hold,P=L.bits,L.mode===12&&(L.back=-1);break}for(L.back=0;me=(ne=L.lencode[oe&(1<<L.lenbits)-1])>>>16&255,xe=65535&ne,!((le=ne>>>24)<=P);){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}if(me&&!(240&me)){for(Be=le,Y=me,Ve=xe;me=(ne=L.lencode[Ve+((oe&(1<<Be+Y)-1)>>Be)])>>>16&255,xe=65535&ne,!(Be+(le=ne>>>24)<=P);){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}oe>>>=Be,P-=Be,L.back+=Be}if(oe>>>=le,P-=le,L.back+=le,L.length=xe,me===0){L.mode=26;break}if(32&me){L.back=-1,L.mode=12;break}if(64&me){N.msg="invalid literal/length code",L.mode=30;break}L.extra=15&me,L.mode=22;case 22:if(L.extra){for(he=L.extra;P<he;){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}L.length+=oe&(1<<L.extra)-1,oe>>>=L.extra,P-=L.extra,L.back+=L.extra}L.was=L.length,L.mode=23;case 23:for(;me=(ne=L.distcode[oe&(1<<L.distbits)-1])>>>16&255,xe=65535&ne,!((le=ne>>>24)<=P);){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}if(!(240&me)){for(Be=le,Y=me,Ve=xe;me=(ne=L.distcode[Ve+((oe&(1<<Be+Y)-1)>>Be)])>>>16&255,xe=65535&ne,!(Be+(le=ne>>>24)<=P);){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}oe>>>=Be,P-=Be,L.back+=Be}if(oe>>>=le,P-=le,L.back+=le,64&me){N.msg="invalid distance code",L.mode=30;break}L.offset=xe,L.extra=15&me,L.mode=24;case 24:if(L.extra){for(he=L.extra;P<he;){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}L.offset+=oe&(1<<L.extra)-1,oe>>>=L.extra,P-=L.extra,L.back+=L.extra}if(L.offset>L.dmax){N.msg="invalid distance too far back",L.mode=30;break}L.mode=25;case 25:if(re===0)break e;if(J=K-re,L.offset>J){if((J=L.offset-J)>L.whave&&L.sane){N.msg="invalid distance too far back",L.mode=30;break}ue=J>L.wnext?(J-=L.wnext,L.wsize-J):L.wnext-J,J>L.length&&(J=L.length),ge=L.window}else ge=R,ue=W-L.offset,J=L.length;for(re<J&&(J=re),re-=J,L.length-=J;R[W++]=ge[ue++],--J;);L.length===0&&(L.mode=21);break;case 26:if(re===0)break e;R[W++]=L.length,re--,L.mode=21;break;case 27:if(L.wrap){for(;P<32;){if(Q===0)break e;Q--,oe|=G[U++]<<P,P+=8}if(K-=re,N.total_out+=K,L.total+=K,K&&(N.adler=L.check=L.flags?o(L.check,R,K,W-K):s(L.check,R,K,W-K)),K=re,(L.flags?oe:v(oe))!==L.check){N.msg="incorrect data check",L.mode=30;break}P=oe=0}L.mode=28;case 28:if(L.wrap&&L.flags){for(;P<32;){if(Q===0)break e;Q--,oe+=G[U++]<<P,P+=8}if(oe!==(4294967295&L.total)){N.msg="incorrect length check",L.mode=30;break}P=oe=0}L.mode=29;case 29:se=1;break e;case 30:se=-3;break e;case 31:return-4;case 32:default:return A}return N.next_out=W,N.avail_out=re,N.next_in=U,N.avail_in=Q,L.hold=oe,L.bits=P,(L.wsize||K!==N.avail_out&&L.mode<30&&(L.mode<27||O!==4))&&F(N,N.output,N.next_out,K-N.avail_out)?(L.mode=31,-4):(z-=N.avail_in,K-=N.avail_out,N.total_in+=z,N.total_out+=K,L.total+=K,L.wrap&&K&&(N.adler=L.check=L.flags?o(L.check,R,K,N.next_out-K):s(L.check,R,K,N.next_out-K)),N.data_type=L.bits+(L.last?64:0)+(L.mode===12?128:0)+(L.mode===20||L.mode===15?256:0),(z==0&&K===0||O===4)&&se===f&&(se=-5),se)},i.inflateEnd=function(N){if(!N||!N.state)return A;var O=N.state;return O.window&&(O.window=null),N.state=null,f},i.inflateGetHeader=function(N,O){var L;return N&&N.state&&2&(L=N.state).wrap?((L.head=O).done=!1,f):A},i.inflateSetDictionary=function(N,O){var L,G=O.length;return N&&N.state?(L=N.state).wrap!==0&&L.mode!==11?A:L.mode===11&&s(1,O,G,0)!==L.check?-3:F(N,O,G,G)?(L.mode=31,-4):(L.havedict=1,f):A},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,i){var a=t("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(c,h,f,A,d,p,y,v){var w,x,b,C,S,I,B,T,M,F=v.bits,N=0,O=0,L=0,G=0,R=0,U=0,W=0,Q=0,re=0,oe=0,P=null,z=0,K=new a.Buf16(16),J=new a.Buf16(16),ue=null,ge=0;for(N=0;N<=15;N++)K[N]=0;for(O=0;O<A;O++)K[h[f+O]]++;for(R=F,G=15;1<=G&&K[G]===0;G--);if(G<R&&(R=G),G===0)return d[p++]=20971520,d[p++]=20971520,v.bits=1,0;for(L=1;L<G&&K[L]===0;L++);for(R<L&&(R=L),N=Q=1;N<=15;N++)if(Q<<=1,(Q-=K[N])<0)return-1;if(0<Q&&(c===0||G!==1))return-1;for(J[1]=0,N=1;N<15;N++)J[N+1]=J[N]+K[N];for(O=0;O<A;O++)h[f+O]!==0&&(y[J[h[f+O]]++]=O);if(I=c===0?(P=ue=y,19):c===1?(P=s,z-=257,ue=o,ge-=257,256):(P=l,ue=u,-1),N=L,S=p,W=O=oe=0,b=-1,C=(re=1<<(U=R))-1,c===1&&852<re||c===2&&592<re)return 1;for(;;){for(B=N-W,M=y[O]<I?(T=0,y[O]):y[O]>I?(T=ue[ge+y[O]],P[z+y[O]]):(T=96,0),w=1<<N-W,L=x=1<<U;d[S+(oe>>W)+(x-=w)]=B<<24|T<<16|M|0,x!==0;);for(w=1<<N-1;oe&w;)w>>=1;if(w!==0?(oe&=w-1,oe+=w):oe=0,O++,--K[N]==0){if(N===G)break;N=h[f+y[O]]}if(R<N&&(oe&C)!==b){for(W===0&&(W=R),S+=L,Q=1<<(U=N-W);U+W<G&&!((Q-=K[U+W])<=0);)U++,Q<<=1;if(re+=1<<U,c===1&&852<re||c===2&&592<re)return 1;d[b=oe&C]=R<<24|U<<16|S-p|0}}return oe!==0&&(d[S+oe]=N-W<<24|64<<16|0),v.bits=R,0}},{"../utils/common":41}],51:[function(t,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,i){var a=t("../utils/common"),s=0,o=1;function l(ne){for(var ae=ne.length;0<=--ae;)ne[ae]=0}var u=0,c=29,h=256,f=h+1+c,A=30,d=19,p=2*f+1,y=15,v=16,w=7,x=256,b=16,C=17,S=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],B=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(f+2));l(F);var N=new Array(2*A);l(N);var O=new Array(512);l(O);var L=new Array(256);l(L);var G=new Array(c);l(G);var R,U,W,Q=new Array(A);function re(ne,ae,_e,Me,be){this.static_tree=ne,this.extra_bits=ae,this.extra_base=_e,this.elems=Me,this.max_length=be,this.has_stree=ne&&ne.length}function oe(ne,ae){this.dyn_tree=ne,this.max_code=0,this.stat_desc=ae}function P(ne){return ne<256?O[ne]:O[256+(ne>>>7)]}function z(ne,ae){ne.pending_buf[ne.pending++]=255&ae,ne.pending_buf[ne.pending++]=ae>>>8&255}function K(ne,ae,_e){ne.bi_valid>v-_e?(ne.bi_buf|=ae<<ne.bi_valid&65535,z(ne,ne.bi_buf),ne.bi_buf=ae>>v-ne.bi_valid,ne.bi_valid+=_e-v):(ne.bi_buf|=ae<<ne.bi_valid&65535,ne.bi_valid+=_e)}function J(ne,ae,_e){K(ne,_e[2*ae],_e[2*ae+1])}function ue(ne,ae){for(var _e=0;_e|=1&ne,ne>>>=1,_e<<=1,0<--ae;);return _e>>>1}function ge(ne,ae,_e){var Me,be,Ae=new Array(y+1),pe=0;for(Me=1;Me<=y;Me++)Ae[Me]=pe=pe+_e[Me-1]<<1;for(be=0;be<=ae;be++){var Fe=ne[2*be+1];Fe!==0&&(ne[2*be]=ue(Ae[Fe]++,Fe))}}function le(ne){var ae;for(ae=0;ae<f;ae++)ne.dyn_ltree[2*ae]=0;for(ae=0;ae<A;ae++)ne.dyn_dtree[2*ae]=0;for(ae=0;ae<d;ae++)ne.bl_tree[2*ae]=0;ne.dyn_ltree[2*x]=1,ne.opt_len=ne.static_len=0,ne.last_lit=ne.matches=0}function me(ne){8<ne.bi_valid?z(ne,ne.bi_buf):0<ne.bi_valid&&(ne.pending_buf[ne.pending++]=ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0}function xe(ne,ae,_e,Me){var be=2*ae,Ae=2*_e;return ne[be]<ne[Ae]||ne[be]===ne[Ae]&&Me[ae]<=Me[_e]}function Be(ne,ae,_e){for(var Me=ne.heap[_e],be=_e<<1;be<=ne.heap_len&&(be<ne.heap_len&&xe(ae,ne.heap[be+1],ne.heap[be],ne.depth)&&be++,!xe(ae,Me,ne.heap[be],ne.depth));)ne.heap[_e]=ne.heap[be],_e=be,be<<=1;ne.heap[_e]=Me}function Y(ne,ae,_e){var Me,be,Ae,pe,Fe=0;if(ne.last_lit!==0)for(;Me=ne.pending_buf[ne.d_buf+2*Fe]<<8|ne.pending_buf[ne.d_buf+2*Fe+1],be=ne.pending_buf[ne.l_buf+Fe],Fe++,Me===0?J(ne,be,ae):(J(ne,(Ae=L[be])+h+1,ae),(pe=I[Ae])!==0&&K(ne,be-=G[Ae],pe),J(ne,Ae=P(--Me),_e),(pe=B[Ae])!==0&&K(ne,Me-=Q[Ae],pe)),Fe<ne.last_lit;);J(ne,x,ae)}function Ve(ne,ae){var _e,Me,be,Ae=ae.dyn_tree,pe=ae.stat_desc.static_tree,Fe=ae.stat_desc.has_stree,Ge=ae.stat_desc.elems,Ze=-1;for(ne.heap_len=0,ne.heap_max=p,_e=0;_e<Ge;_e++)Ae[2*_e]!==0?(ne.heap[++ne.heap_len]=Ze=_e,ne.depth[_e]=0):Ae[2*_e+1]=0;for(;ne.heap_len<2;)Ae[2*(be=ne.heap[++ne.heap_len]=Ze<2?++Ze:0)]=1,ne.depth[be]=0,ne.opt_len--,Fe&&(ne.static_len-=pe[2*be+1]);for(ae.max_code=Ze,_e=ne.heap_len>>1;1<=_e;_e--)Be(ne,Ae,_e);for(be=Ge;_e=ne.heap[1],ne.heap[1]=ne.heap[ne.heap_len--],Be(ne,Ae,1),Me=ne.heap[1],ne.heap[--ne.heap_max]=_e,ne.heap[--ne.heap_max]=Me,Ae[2*be]=Ae[2*_e]+Ae[2*Me],ne.depth[be]=(ne.depth[_e]>=ne.depth[Me]?ne.depth[_e]:ne.depth[Me])+1,Ae[2*_e+1]=Ae[2*Me+1]=be,ne.heap[1]=be++,Be(ne,Ae,1),2<=ne.heap_len;);ne.heap[--ne.heap_max]=ne.heap[1],function(He,Je){var Ye,Ke,mt,vt,Dt,yt,Ar=Je.dyn_tree,ce=Je.max_code,Ue=Je.stat_desc.static_tree,st=Je.stat_desc.has_stree,wt=Je.stat_desc.extra_bits,Wt=Je.stat_desc.extra_base,rr=Je.stat_desc.max_length,wr=0;for(vt=0;vt<=y;vt++)He.bl_count[vt]=0;for(Ar[2*He.heap[He.heap_max]+1]=0,Ye=He.heap_max+1;Ye<p;Ye++)rr<(vt=Ar[2*Ar[2*(Ke=He.heap[Ye])+1]+1]+1)&&(vt=rr,wr++),Ar[2*Ke+1]=vt,ce<Ke||(He.bl_count[vt]++,Dt=0,Wt<=Ke&&(Dt=wt[Ke-Wt]),yt=Ar[2*Ke],He.opt_len+=yt*(vt+Dt),st&&(He.static_len+=yt*(Ue[2*Ke+1]+Dt)));if(wr!==0){do{for(vt=rr-1;He.bl_count[vt]===0;)vt--;He.bl_count[vt]--,He.bl_count[vt+1]+=2,He.bl_count[rr]--,wr-=2}while(0<wr);for(vt=rr;vt!==0;vt--)for(Ke=He.bl_count[vt];Ke!==0;)ce<(mt=He.heap[--Ye])||(Ar[2*mt+1]!==vt&&(He.opt_len+=(vt-Ar[2*mt+1])*Ar[2*mt],Ar[2*mt+1]=vt),Ke--)}}(ne,ae),ge(Ae,Ze,ne.bl_count)}function te(ne,ae,_e){var Me,be,Ae=-1,pe=ae[1],Fe=0,Ge=7,Ze=4;for(pe===0&&(Ge=138,Ze=3),ae[2*(_e+1)+1]=65535,Me=0;Me<=_e;Me++)be=pe,pe=ae[2*(Me+1)+1],++Fe<Ge&&be===pe||(Fe<Ze?ne.bl_tree[2*be]+=Fe:be!==0?(be!==Ae&&ne.bl_tree[2*be]++,ne.bl_tree[2*b]++):Fe<=10?ne.bl_tree[2*C]++:ne.bl_tree[2*S]++,Ae=be,Ze=(Fe=0)===pe?(Ge=138,3):be===pe?(Ge=6,3):(Ge=7,4))}function se(ne,ae,_e){var Me,be,Ae=-1,pe=ae[1],Fe=0,Ge=7,Ze=4;for(pe===0&&(Ge=138,Ze=3),Me=0;Me<=_e;Me++)if(be=pe,pe=ae[2*(Me+1)+1],!(++Fe<Ge&&be===pe)){if(Fe<Ze)for(;J(ne,be,ne.bl_tree),--Fe!=0;);else be!==0?(be!==Ae&&(J(ne,be,ne.bl_tree),Fe--),J(ne,b,ne.bl_tree),K(ne,Fe-3,2)):Fe<=10?(J(ne,C,ne.bl_tree),K(ne,Fe-3,3)):(J(ne,S,ne.bl_tree),K(ne,Fe-11,7));Ae=be,Ze=(Fe=0)===pe?(Ge=138,3):be===pe?(Ge=6,3):(Ge=7,4)}}l(Q);var Z=!1;function he(ne,ae,_e,Me){K(ne,(u<<1)+(Me?1:0),3),function(be,Ae,pe,Fe){me(be),z(be,pe),z(be,~pe),a.arraySet(be.pending_buf,be.window,Ae,pe,be.pending),be.pending+=pe}(ne,ae,_e)}i._tr_init=function(ne){Z||(function(){var ae,_e,Me,be,Ae,pe=new Array(y+1);for(be=Me=0;be<c-1;be++)for(G[be]=Me,ae=0;ae<1<<I[be];ae++)L[Me++]=be;for(L[Me-1]=be,be=Ae=0;be<16;be++)for(Q[be]=Ae,ae=0;ae<1<<B[be];ae++)O[Ae++]=be;for(Ae>>=7;be<A;be++)for(Q[be]=Ae<<7,ae=0;ae<1<<B[be]-7;ae++)O[256+Ae++]=be;for(_e=0;_e<=y;_e++)pe[_e]=0;for(ae=0;ae<=143;)F[2*ae+1]=8,ae++,pe[8]++;for(;ae<=255;)F[2*ae+1]=9,ae++,pe[9]++;for(;ae<=279;)F[2*ae+1]=7,ae++,pe[7]++;for(;ae<=287;)F[2*ae+1]=8,ae++,pe[8]++;for(ge(F,f+1,pe),ae=0;ae<A;ae++)N[2*ae+1]=5,N[2*ae]=ue(ae,5);R=new re(F,I,h+1,f,y),U=new re(N,B,0,A,y),W=new re(new Array(0),T,0,d,w)}(),Z=!0),ne.l_desc=new oe(ne.dyn_ltree,R),ne.d_desc=new oe(ne.dyn_dtree,U),ne.bl_desc=new oe(ne.bl_tree,W),ne.bi_buf=0,ne.bi_valid=0,le(ne)},i._tr_stored_block=he,i._tr_flush_block=function(ne,ae,_e,Me){var be,Ae,pe=0;0<ne.level?(ne.strm.data_type===2&&(ne.strm.data_type=function(Fe){var Ge,Ze=4093624447;for(Ge=0;Ge<=31;Ge++,Ze>>>=1)if(1&Ze&&Fe.dyn_ltree[2*Ge]!==0)return s;if(Fe.dyn_ltree[18]!==0||Fe.dyn_ltree[20]!==0||Fe.dyn_ltree[26]!==0)return o;for(Ge=32;Ge<h;Ge++)if(Fe.dyn_ltree[2*Ge]!==0)return o;return s}(ne)),Ve(ne,ne.l_desc),Ve(ne,ne.d_desc),pe=function(Fe){var Ge;for(te(Fe,Fe.dyn_ltree,Fe.l_desc.max_code),te(Fe,Fe.dyn_dtree,Fe.d_desc.max_code),Ve(Fe,Fe.bl_desc),Ge=d-1;3<=Ge&&Fe.bl_tree[2*M[Ge]+1]===0;Ge--);return Fe.opt_len+=3*(Ge+1)+5+5+4,Ge}(ne),be=ne.opt_len+3+7>>>3,(Ae=ne.static_len+3+7>>>3)<=be&&(be=Ae)):be=Ae=_e+5,_e+4<=be&&ae!==-1?he(ne,ae,_e,Me):ne.strategy===4||Ae===be?(K(ne,2+(Me?1:0),3),Y(ne,F,N)):(K(ne,4+(Me?1:0),3),function(Fe,Ge,Ze,He){var Je;for(K(Fe,Ge-257,5),K(Fe,Ze-1,5),K(Fe,He-4,4),Je=0;Je<He;Je++)K(Fe,Fe.bl_tree[2*M[Je]+1],3);se(Fe,Fe.dyn_ltree,Ge-1),se(Fe,Fe.dyn_dtree,Ze-1)}(ne,ne.l_desc.max_code+1,ne.d_desc.max_code+1,pe+1),Y(ne,ne.dyn_ltree,ne.dyn_dtree)),le(ne),Me&&me(ne)},i._tr_tally=function(ne,ae,_e){return ne.pending_buf[ne.d_buf+2*ne.last_lit]=ae>>>8&255,ne.pending_buf[ne.d_buf+2*ne.last_lit+1]=255&ae,ne.pending_buf[ne.l_buf+ne.last_lit]=255&_e,ne.last_lit++,ae===0?ne.dyn_ltree[2*_e]++:(ne.matches++,ae--,ne.dyn_ltree[2*(L[_e]+h+1)]++,ne.dyn_dtree[2*P(ae)]++),ne.last_lit===ne.lit_bufsize-1},i._tr_align=function(ne){K(ne,2,3),J(ne,x,F),function(ae){ae.bi_valid===16?(z(ae,ae.bi_buf),ae.bi_buf=0,ae.bi_valid=0):8<=ae.bi_valid&&(ae.pending_buf[ae.pending++]=255&ae.bi_buf,ae.bi_buf>>=8,ae.bi_valid-=8)}(ne)}},{"../utils/common":41}],53:[function(t,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,i){(function(a){(function(s,o){if(!s.setImmediate){var l,u,c,h,f=1,A={},d=!1,p=s.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(s);y=y&&y.setTimeout?y:s,l={}.toString.call(s.process)==="[object process]"?function(b){process.nextTick(function(){w(b)})}:function(){if(s.postMessage&&!s.importScripts){var b=!0,C=s.onmessage;return s.onmessage=function(){b=!1},s.postMessage("","*"),s.onmessage=C,b}}()?(h="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",x,!1):s.attachEvent("onmessage",x),function(b){s.postMessage(h+b,"*")}):s.MessageChannel?((c=new MessageChannel).port1.onmessage=function(b){w(b.data)},function(b){c.port2.postMessage(b)}):p&&"onreadystatechange"in p.createElement("script")?(u=p.documentElement,function(b){var C=p.createElement("script");C.onreadystatechange=function(){w(b),C.onreadystatechange=null,u.removeChild(C),C=null},u.appendChild(C)}):function(b){setTimeout(w,0,b)},y.setImmediate=function(b){typeof b!="function"&&(b=new Function(""+b));for(var C=new Array(arguments.length-1),S=0;S<C.length;S++)C[S]=arguments[S+1];var I={callback:b,args:C};return A[f]=I,l(f),f++},y.clearImmediate=v}function v(b){delete A[b]}function w(b){if(d)setTimeout(w,0,b);else{var C=A[b];if(C){d=!0;try{(function(S){var I=S.callback,B=S.args;switch(B.length){case 0:I();break;case 1:I(B[0]);break;case 2:I(B[0],B[1]);break;case 3:I(B[0],B[1],B[2]);break;default:I.apply(o,B)}})(C)}finally{v(b),d=!1}}}}function x(b){b.source===s&&typeof b.data=="string"&&b.data.indexOf(h)===0&&w(+b.data.slice(h.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof Os<"u"?Os:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Xz);var Zz=Xz.exports;const T9e=Af(Zz),$6=Object.freeze(Object.defineProperty({__proto__:null,default:T9e},Symbol.toStringTag,{value:"Module"}));var N9e=Yz,bm=Yp,I9e=Vz,F9e=Zz,Jz=function(r,e,t=!1){let n=new F9e,i=n;e&&e.folder&&(i=n.folder(e.folder));var a=e&&e.prj?e.prj:I9e;[bm.point(r),bm.line(r),bm.polygon(r),bm.multipolygon(r),bm.multiline(r)].forEach(function(o){o.geometries.length&&o.geometries[0].length&&N9e(o.properties,o.type,o.geometries,function(l,u){var c=e&&e.types&&e.types[o.type.toLowerCase()]?e.types[o.type.toLowerCase()]:o.type;i.file(c+".shp",u.shp.buffer,{binary:!0}),i.file(c+".shx",u.shx.buffer,{binary:!0}),i.file(c+".dbf",u.dbf.buffer,{binary:!0}),i.file(c+".prj",a)})});var s={};return!e||!e.outputType?s.type="base64":s.type=e.outputType,!e||!e.compression?s.compression="DEFLATE":s.compression=e.compression,t?n.generateNodeStream({...s,streamFiles:!0}):n.generateAsync(s)},eq={exports:{}};(function(r,e){(function(t,n){n()})(Os,function(){function t(u,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function n(u,c,h){var f=new XMLHttpRequest;f.open("GET",u),f.responseType="blob",f.onload=function(){l(f.response,c,h)},f.onerror=function(){console.error("could not download file")},f.send()}function i(u){var c=new XMLHttpRequest;c.open("HEAD",u,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function a(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(c)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Os=="object"&&Os.global===Os?Os:void 0,o=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(u,c,h){var f=s.URL||s.webkitURL,A=document.createElement("a");c=c||u.name||"download",A.download=c,A.rel="noopener",typeof u=="string"?(A.href=u,A.origin===location.origin?a(A):i(A.href)?n(u,c,h):a(A,A.target="_blank")):(A.href=f.createObjectURL(u),setTimeout(function(){f.revokeObjectURL(A.href)},4e4),setTimeout(function(){a(A)},0))}:"msSaveOrOpenBlob"in navigator?function(u,c,h){if(c=c||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(t(u,h),c);else if(i(u))n(u,c,h);else{var f=document.createElement("a");f.href=u,f.target="_blank",setTimeout(function(){a(f)})}}:function(u,c,h,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof u=="string")return n(u,c,h);var A=u.type==="application/octet-stream",d=/constructor/i.test(s.HTMLElement)||s.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||A&&d||o)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var x=y.result;x=p?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=x:location=x,f=null},y.readAsDataURL(u)}else{var v=s.URL||s.webkitURL,w=v.createObjectURL(u);f?f.location=w:location.href=w,f=null,setTimeout(function(){v.revokeObjectURL(w)},4e4)}});s.saveAs=l.saveAs=l,r.exports=l})})(eq);var M9e=eq.exports,L9e=Jz,D9e=M9e.saveAs,k9e=function(r,e){let t="download";e&&(e.filename||e.folder)&&(t=e.filename||e.folder),L9e(r,e).then(function(n){D9e(n,t+".zip")})};xE.download=k9e;xE.write=Yz;xE.zip=Jz;class R9e{constructor(){this.modalElement=null,this.selectedFormat="geojson"}show(e=null){const t=e||pt.selectedLayerId;if(!t){alert("내보낼 레이어를 먼저 선택해주세요.");return}const n=pt.getLayer(t);if(!n){alert("레이어를 찾을 수 없습니다.");return}if(n.type==="raster"){alert("래스터 레이어는 내보내기가 지원되지 않습니다.");return}this.createModal(n)}createModal(e){this.hide();const n=(e.source?e.source.getFeatures():[]).length,i=`
      <div class="modal-overlay active" id="layer-export-modal">
        <div class="modal" style="width: 380px;">
          <div class="modal-header">
            <h3>레이어 내보내기</h3>
            <button class="modal-close" id="export-modal-close">&times;</button>
          </div>
          <div class="modal-body" style="padding: var(--spacing-lg);">
            <div class="form-group">
              <label class="form-label">레이어</label>
              <div class="export-layer-info">
                <span class="layer-name">${e.name}</span>
                <span class="feature-count">(${n}개 객체)</span>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">내보내기 형식</label>
              <div class="export-format-options">
                <label class="export-format-option">
                  <input type="radio" name="export-format" value="geojson" checked>
                  <span class="format-label">
                    <strong>GeoJSON</strong>
                    <small>웹 지도, JavaScript 호환</small>
                  </span>
                </label>
                <label class="export-format-option">
                  <input type="radio" name="export-format" value="kml">
                  <span class="format-label">
                    <strong>KML</strong>
                    <small>Google Earth 호환</small>
                  </span>
                </label>
                <label class="export-format-option">
                  <input type="radio" name="export-format" value="gpx">
                  <span class="format-label">
                    <strong>GPX</strong>
                    <small>GPS 장치 호환</small>
                  </span>
                </label>
                <label class="export-format-option">
                  <input type="radio" name="export-format" value="csv">
                  <span class="format-label">
                    <strong>CSV</strong>
                    <small>스프레드시트 (속성만)</small>
                  </span>
                </label>
                <label class="export-format-option">
                  <input type="radio" name="export-format" value="shp">
                  <span class="format-label">
                    <strong>Shapefile</strong>
                    <small>ArcGIS, QGIS 호환 (ZIP)</small>
                  </span>
                </label>
                <label class="export-format-option">
                  <input type="radio" name="export-format" value="gpkg">
                  <span class="format-label">
                    <strong>GeoPackage</strong>
                    <small>OGC 표준, QGIS 호환</small>
                  </span>
                </label>
              </div>
            </div>

            <div class="form-group" id="csv-options" style="display: none;">
              <label class="form-label">CSV 옵션</label>
              <label class="checkbox-label">
                <input type="checkbox" id="csv-include-coords" checked>
                <span>좌표 포함 (경도, 위도)</span>
              </label>
            </div>
          </div>
          <div class="modal-footer" style="padding: var(--spacing-md) var(--spacing-lg); border-top: 1px solid var(--border-color); display: flex; justify-content: flex-end; gap: var(--spacing-sm);">
            <button class="btn btn-secondary btn-sm" id="export-cancel">취소</button>
            <button class="btn btn-primary btn-sm" id="export-confirm">내보내기</button>
          </div>
        </div>
      </div>
    `;document.body.insertAdjacentHTML("beforeend",i),this.modalElement=document.getElementById("layer-export-modal"),this.bindEvents(e),this.addStyles()}bindEvents(e){const t=document.getElementById("export-modal-close"),n=document.getElementById("export-cancel"),i=document.getElementById("export-confirm"),a=document.querySelectorAll('input[name="export-format"]'),s=document.getElementById("csv-options");t.addEventListener("click",()=>this.hide()),n.addEventListener("click",()=>this.hide()),this.modalElement.addEventListener("click",o=>{o.target===this.modalElement&&this.hide()}),a.forEach(o=>{o.addEventListener("change",l=>{this.selectedFormat=l.target.value,s.style.display=l.target.value==="csv"?"block":"none"})}),i.addEventListener("click",()=>{this.exportLayer(e)})}exportLayer(e){const t=e.source?e.source.getFeatures():[];if(t.length===0){alert("내보낼 객체가 없습니다.");return}let n,i,a;switch(this.selectedFormat){case"geojson":n=this.exportToGeoJSON(t),i=`${e.name}.geojson`,a="application/json";break;case"kml":n=this.exportToKML(t,e.name),i=`${e.name}.kml`,a="application/vnd.google-earth.kml+xml";break;case"gpx":n=this.exportToGPX(t,e.name),i=`${e.name}.gpx`,a="application/gpx+xml";break;case"csv":const s=document.getElementById("csv-include-coords").checked;n=this.exportToCSV(t,s),i=`${e.name}.csv`,a="text/csv";break;case"shp":this.exportToShapefile(t,e.name),this.hide();return;case"gpkg":this.exportToGeoPackage(t,e.name),this.hide();return}this.downloadFile(n,i,a),this.hide()}exportToGeoJSON(e){const n=new rs().writeFeaturesObject(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});return JSON.stringify(n,null,2)}exportToKML(e,t){const n=new FUe({extractStyles:!0});try{return n.writeFeatures(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}catch{return this.createKMLManually(e,t)}}createKMLManually(e,t){new rs;let n="";return e.forEach((i,a)=>{const s=i.getGeometry();if(!s)return;const o=this.getKMLCoordinates(s),l=i.get("name")||i.get("NAME")||`Feature ${a+1}`,u=i.getProperties();let c="";Object.keys(u).forEach(A=>{A!=="geometry"&&u[A]!==null&&u[A]!==void 0&&(c+=`${A}: ${u[A]}
`)});const h=s.getType();let f="";h==="Point"?f=`<Point><coordinates>${o}</coordinates></Point>`:h==="LineString"?f=`<LineString><coordinates>${o}</coordinates></LineString>`:h==="Polygon"?f=`<Polygon><outerBoundaryIs><LinearRing><coordinates>${o}</coordinates></LinearRing></outerBoundaryIs></Polygon>`:h==="MultiPolygon"&&(f=`<MultiGeometry>${o}</MultiGeometry>`),n+=`
    <Placemark>
      <name>${this.escapeXML(l)}</name>
      <description>${this.escapeXML(c)}</description>
      ${f}
    </Placemark>`}),`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>${this.escapeXML(t)}</name>
    ${n}
  </Document>
</kml>`}getKMLCoordinates(e){const t=e.getType(),n=e.clone().transform("EPSG:3857","EPSG:4326");if(t==="Point"){const i=n.getCoordinates();return`${i[0]},${i[1]},0`}else{if(t==="LineString")return n.getCoordinates().map(i=>`${i[0]},${i[1]},0`).join(" ");if(t==="Polygon")return n.getCoordinates()[0].map(i=>`${i[0]},${i[1]},0`).join(" ");if(t==="MultiPolygon")return n.getPolygons().map(i=>`<Polygon><outerBoundaryIs><LinearRing><coordinates>${i.getCoordinates()[0].map(s=>`${s[0]},${s[1]},0`).join(" ")}</coordinates></LinearRing></outerBoundaryIs></Polygon>`).join("")}return""}exportToGPX(e,t){const n=new jPe;try{return n.writeFeatures(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}catch{return this.createGPXManually(e,t)}}createGPXManually(e,t){let n="",i="";return e.forEach((a,s)=>{const o=a.getGeometry();if(!o)return;const l=o.clone().transform("EPSG:3857","EPSG:4326"),u=o.getType(),c=a.get("name")||a.get("NAME")||`Feature ${s+1}`;if(u==="Point"){const h=l.getCoordinates();n+=`  <wpt lat="${h[1]}" lon="${h[0]}">
    <name>${this.escapeXML(c)}</name>
  </wpt>
`}else if(u==="LineString"){let f=l.getCoordinates().map(A=>`      <trkpt lat="${A[1]}" lon="${A[0]}"></trkpt>`).join(`
`);i+=`  <trk>
    <name>${this.escapeXML(c)}</name>
    <trkseg>
${f}
    </trkseg>
  </trk>
`}}),`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="eGIS" xmlns="http://www.topografix.com/GPX/1/1">
  <metadata>
    <name>${this.escapeXML(t)}</name>
    <time>${new Date().toISOString()}</time>
  </metadata>
${n}${i}</gpx>`}exportToCSV(e,t){if(e.length===0)return"";const n=new Set;e.forEach(o=>{const l=o.getProperties();Object.keys(l).forEach(u=>{u!=="geometry"&&n.add(u)})});const i=Array.from(n),a=[...i];t&&a.push("longitude","latitude");let s=a.map(o=>this.escapeCSV(o)).join(",")+`
`;return e.forEach(o=>{const l=o.getProperties(),u=i.map(c=>this.escapeCSV(l[c]??""));if(t){const c=o.getGeometry();if(c){const h=c.clone().transform("EPSG:3857","EPSG:4326"),f=c.getType();let A="",d="";if(f==="Point"){const p=h.getCoordinates();A=p[0].toFixed(6),d=p[1].toFixed(6)}else{const p=h.getExtent();A=((p[0]+p[2])/2).toFixed(6),d=((p[1]+p[3])/2).toFixed(6)}u.push(A,d)}else u.push("","")}s+=u.join(",")+`
`}),"\uFEFF"+s}async exportToShapefile(e,t){try{const i=new rs().writeFeaturesObject(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),a={folder:t,filename:t,outputType:"blob",compression:"DEFLATE"},s=await xE.zip(i,a),o=URL.createObjectURL(s),l=document.createElement("a");l.href=o,l.download=`${t}.zip`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)}catch(n){console.error("Shapefile 내보내기 실패:",n),alert("Shapefile 내보내기에 실패했습니다. "+n.message)}}async exportToGeoPackage(e,t){try{const n=(await jl(async()=>{const{default:S}=await Promise.resolve().then(()=>ste);return{default:S}},void 0)).default,i=await n({locateFile:S=>`https://sql.js.org/dist/${S}`}),a=new i.Database;a.run(`
        CREATE TABLE gpkg_contents (
          table_name TEXT NOT NULL PRIMARY KEY,
          data_type TEXT NOT NULL,
          identifier TEXT UNIQUE,
          description TEXT DEFAULT '',
          last_change DATETIME NOT NULL DEFAULT (strftime('%Y-%m-%dT%H:%M:%fZ','now')),
          min_x DOUBLE,
          min_y DOUBLE,
          max_x DOUBLE,
          max_y DOUBLE,
          srs_id INTEGER
        )
      `),a.run(`
        CREATE TABLE gpkg_geometry_columns (
          table_name TEXT NOT NULL,
          column_name TEXT NOT NULL,
          geometry_type_name TEXT NOT NULL,
          srs_id INTEGER NOT NULL,
          z TINYINT NOT NULL,
          m TINYINT NOT NULL,
          CONSTRAINT pk_geom_cols PRIMARY KEY (table_name, column_name)
        )
      `),a.run(`
        CREATE TABLE gpkg_spatial_ref_sys (
          srs_name TEXT NOT NULL,
          srs_id INTEGER NOT NULL PRIMARY KEY,
          organization TEXT NOT NULL,
          organization_coordsys_id INTEGER NOT NULL,
          definition TEXT NOT NULL,
          description TEXT
        )
      `),a.run(`INSERT INTO gpkg_spatial_ref_sys VALUES ('WGS 84', 4326, 'EPSG', 4326, 'GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]', 'WGS 84')`);const o=new rs().writeFeaturesObject(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),l=t.replace(/[^a-zA-Z0-9_]/g,"_"),u=new Set;o.features.forEach(S=>{Object.keys(S.properties||{}).forEach(I=>u.add(I))});const c=Array.from(u);let h="GEOMETRY";o.features.length>0&&(h=o.features[0].geometry.type.toUpperCase());let f=`CREATE TABLE "${l}" (fid INTEGER PRIMARY KEY AUTOINCREMENT, geom BLOB`;c.forEach(S=>{const I=S.replace(/[^a-zA-Z0-9_]/g,"_");f+=`, "${I}" TEXT`}),f+=")",a.run(f);let A=1/0,d=1/0,p=-1/0,y=-1/0;o.features.forEach(S=>{S.geometry&&S.geometry.coordinates&&this.flattenCoords(S.geometry.coordinates).forEach(B=>{B[0]<A&&(A=B[0]),B[0]>p&&(p=B[0]),B[1]<d&&(d=B[1]),B[1]>y&&(y=B[1])})}),a.run("INSERT INTO gpkg_contents VALUES (?, 'features', ?, '', datetime('now'), ?, ?, ?, ?, 4326)",[l,l,A,d,p,y]),a.run("INSERT INTO gpkg_geometry_columns VALUES (?, 'geom', ?, 4326, 0, 0)",[l,h]),o.features.forEach(S=>{const B=[this.geojsonToWKB(S.geometry)];c.forEach(F=>{B.push(S.properties[F]??null)});const T=["?"].concat(c.map(()=>"?")).join(", "),M=["geom"].concat(c.map(F=>'"'+F.replace(/[^a-zA-Z0-9_]/g,"_")+'"')).join(", ");a.run(`INSERT INTO "${l}" (${M}) VALUES (${T})`,B)});const v=a.export(),w=new Uint8Array(v),x=new Blob([w],{type:"application/geopackage+sqlite3"}),b=URL.createObjectURL(x),C=document.createElement("a");C.href=b,C.download=`${t}.gpkg`,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(b),a.close()}catch(n){console.error("GeoPackage 내보내기 실패:",n),alert("GeoPackage 내보내기에 실패했습니다. "+n.message)}}flattenCoords(e){return typeof e[0]=="number"?[e]:e.flatMap(t=>this.flattenCoords(t))}geojsonToWKB(e){return JSON.stringify(e)}escapeCSV(e){if(e==null)return"";const t=String(e);return t.includes(",")||t.includes('"')||t.includes(`
`)?'"'+t.replace(/"/g,'""')+'"':t}escapeXML(e){return e?String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):""}downloadFile(e,t,n){const i=new Blob([e],{type:n}),a=URL.createObjectURL(i),s=document.createElement("a");s.href=a,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)}addStyles(){if(document.getElementById("layer-export-styles"))return;const e=document.createElement("style");e.id="layer-export-styles",e.textContent=`
      .export-layer-info {
        padding: var(--spacing-sm) var(--spacing-md);
        background: var(--bg-tertiary);
        border-radius: var(--radius-sm);
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
      }

      .export-layer-info .layer-name {
        font-weight: 500;
        color: var(--text-primary);
      }

      .export-layer-info .feature-count {
        color: var(--text-secondary);
        font-size: var(--font-size-sm);
      }

      .export-format-options {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-xs);
      }

      .export-format-option {
        display: flex;
        align-items: flex-start;
        gap: var(--spacing-sm);
        padding: var(--spacing-sm) var(--spacing-md);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-sm);
        cursor: pointer;
        transition: all var(--transition-fast);
      }

      .export-format-option:hover {
        background: var(--bg-hover);
      }

      .export-format-option input[type="radio"] {
        margin-top: 2px;
      }

      .export-format-option input[type="radio"]:checked + .format-label strong {
        color: var(--color-primary);
      }

      .format-label {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .format-label strong {
        font-size: var(--font-size-sm);
      }

      .format-label small {
        font-size: var(--font-size-xs);
        color: var(--text-secondary);
      }

      .checkbox-label {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
        cursor: pointer;
        font-size: var(--font-size-sm);
      }
    `,document.head.appendChild(e)}hide(){this.modalElement&&(this.modalElement.classList.remove("active"),setTimeout(()=>{var e;(e=this.modalElement)==null||e.remove(),this.modalElement=null},200))}}const O9e=new R9e;class P9e{constructor(){this.colorSchemes={blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],spectral:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"]}}createDorlingCartogram(e,t,n={}){const i=pt.getLayer(e);if(!i||!i.source)throw new Error("유효한 레이어를 선택해주세요.");const a=i.source.getFeatures();if(a.length===0)throw new Error("레이어에 객체가 없습니다.");const{colorScheme:s="blues",minRadius:o=5,maxRadius:l=50,showLabels:u=!1,iterations:c=100}=n,h=[];let f=1/0,A=-1/0;if(a.forEach(b=>{const C=parseFloat(b.get(t));if(isNaN(C)||C<=0)return;const S=b.getGeometry();if(!S)return;const I=Uo(S.getExtent());h.push({feature:b,value:C,center:I,x:I[0],y:I[1],radius:0}),C<f&&(f=C),C>A&&(A=C)}),h.length===0)throw new Error(`속성 "${t}"에 유효한 숫자 데이터가 없습니다.`);const d=A-f||1;h.forEach(b=>{const C=(b.value-f)/d;b.radius=o+Math.sqrt(C)*(l-o)}),this.applyForceLayout(h,c);const p=this.colorSchemes[s]||this.colorSchemes.blues,y=h.map((b,C)=>{const S=Math.floor((b.value-f)/d*(p.length-1)),I=p[Math.min(S,p.length-1)],B=b.feature.getProperties();delete B.geometry;const T=new yi({geometry:new ja([b.x,b.y]),...B}),M=new En({image:new qs({radius:b.radius,fill:new _n({color:I}),stroke:new hn({color:"#333",width:1})}),text:u?new rc({text:b.feature.get("name")||b.feature.get("NAME")||"",font:"11px sans-serif",fill:new _n({color:"#333"}),stroke:new hn({color:"#fff",width:2}),offsetY:b.radius+10}):void 0});return T.setStyle(M),T}),v=new zo({features:y}),w=new Ql({source:v}),x=pt.addLayer({name:`${i.name}_Dorling_${t}`,type:"vector",geometryType:"Point",olLayer:w,source:v});return this.addLegend(x,`Dorling: ${t}`,f,A,p),x}applyForceLayout(e,t){for(let i=0;i<t;i++){let a=!1;for(let s=0;s<e.length;s++)for(let o=s+1;o<e.length;o++){const l=e[o].x-e[s].x,u=e[o].y-e[s].y,c=Math.sqrt(l*l+u*u),h=e[s].radius+e[o].radius+2;if(c<h&&c>0){const f=(h-c)/2,A=l/c*f,d=u/c*f;e[s].x-=A,e[s].y-=d,e[o].x+=A,e[o].y+=d,a=!0}}if(e.forEach(s=>{s.x+=(s.center[0]-s.x)*.01,s.y+=(s.center[1]-s.y)*.01}),!a)break}}createNonContiguousCartogram(e,t,n={}){const i=pt.getLayer(e);if(!i||!i.source)throw new Error("유효한 레이어를 선택해주세요.");const a=i.source.getFeatures();if(a.length===0)throw new Error("레이어에 객체가 없습니다.");const{colorScheme:s="blues",minScale:o=.3,maxScale:l=1.5,showLabels:u=!1}=n;let c=1/0,h=-1/0;const f=[];if(a.forEach(x=>{const b=parseFloat(x.get(t));isNaN(b)||b<=0||(f.push({feature:x,value:b}),b<c&&(c=b),b>h&&(h=b))}),f.length===0)throw new Error(`속성 "${t}"에 유효한 숫자 데이터가 없습니다.`);const A=h-c||1,d=this.colorSchemes[s]||this.colorSchemes.blues,p=f.map(({feature:x,value:b})=>{const C=x.getGeometry();if(!C)return null;const S=(b-c)/A,I=o+S*(l-o),B=Uo(C.getExtent()),T=this.scaleGeometry(C.clone(),B,I),M=Math.floor(S*(d.length-1)),F=d[Math.min(M,d.length-1)],N=x.getProperties();delete N.geometry;const O=new yi({geometry:T,...N}),L=new En({fill:new _n({color:this.hexToRgba(F,.7)}),stroke:new hn({color:"#333",width:1}),text:u?new rc({text:x.get("name")||x.get("NAME")||"",font:"11px sans-serif",fill:new _n({color:"#333"}),stroke:new hn({color:"#fff",width:2})}):void 0});return O.setStyle(L),O}).filter(x=>x!==null),y=new zo({features:p}),v=new Ql({source:y}),w=pt.addLayer({name:`${i.name}_NonContig_${t}`,type:"vector",geometryType:i.geometryType,olLayer:v,source:y});return this.addLegend(w,`Non-Contiguous: ${t}`,c,h,d),w}createContiguousCartogram(e,t,n={}){const i=pt.getLayer(e);if(!i||!i.source)throw new Error("유효한 레이어를 선택해주세요.");const a=i.source.getFeatures();if(a.length===0)throw new Error("레이어에 객체가 없습니다.");const{colorScheme:s="blues",showLabels:o=!1,iterations:l=50}=n;let u=1/0,c=-1/0,h=0;const f=[];if(a.forEach(M=>{const F=parseFloat(M.get(t));if(isNaN(F)||F<=0)return;const N=M.getGeometry();if(!N)return;const O=this.calculateGeometryArea(N);O<=0||(f.push({feature:M,value:F,originalArea:O,geom:N.clone()}),h+=F,F<u&&(u=F),F>c&&(c=F))}),f.length===0)throw new Error(`속성 "${t}"에 유효한 숫자 데이터가 없습니다.`);const A=f.reduce((M,F)=>M+F.originalArea,0);f.forEach(M=>{M.targetArea=M.value/h*A,M.desiredRadius=Math.sqrt(M.targetArea/Math.PI)});let d=1/0,p=1/0,y=-1/0,v=-1/0;f.forEach(M=>{const F=M.geom.getExtent();d=Math.min(d,F[0]),p=Math.min(p,F[1]),y=Math.max(y,F[2]),v=Math.max(v,F[3])});const w=y-d,x=v-p;for(let M=0;M<l;M++){f.forEach(N=>{N.currentArea=this.calculateGeometryArea(N.geom),N.center=this.calculateCentroid(N.geom),N.currentRadius=Math.sqrt(N.currentArea/Math.PI),N.sizeRatio=Math.sqrt(N.targetArea/Math.max(N.currentArea,1e-4))});const F=.4*(1-M/l*.7);f.forEach((N,O)=>{const L=N.geom.getType();if(L==="Polygon"){const R=N.geom.getCoordinates().map(U=>this.transformRingGastner(U,f,O,F,w,x));N.geom.setCoordinates(R)}else if(L==="MultiPolygon"){const R=N.geom.getCoordinates().map(U=>U.map(W=>this.transformRingGastner(W,f,O,F,w,x)));N.geom.setCoordinates(R)}}),this.resolveOverlaps(f,F*.5)}for(let M=0;M<3;M++)f.forEach(F=>{F.geom=this.smoothPolygonAdvanced(F.geom,.3)});const b=c-u||1,C=this.colorSchemes[s]||this.colorSchemes.blues,S=f.map(M=>{const F=(M.value-u)/b,N=Math.floor(F*(C.length-1)),O=C[Math.min(N,C.length-1)],L=M.feature.getProperties();delete L.geometry;const G=new yi({geometry:M.geom,...L}),R=new En({fill:new _n({color:this.hexToRgba(O,.8)}),stroke:new hn({color:"#333",width:1.5}),text:o?new rc({text:M.feature.get("name")||M.feature.get("NAME")||"",font:"bold 11px sans-serif",fill:new _n({color:"#333"}),stroke:new hn({color:"#fff",width:3})}):void 0});return G.setStyle(R),G}),I=new zo({features:S}),B=new Ql({source:I}),T=pt.addLayer({name:`${i.name}_Contig_${t}`,type:"vector",geometryType:i.geometryType,olLayer:B,source:I});return this.addLegend(T,`Contiguous: ${t}`,u,c,C),T}transformRingGastner(e,t,n,i,a,s){const o=[],l=t[n];for(let u=0;u<e.length;u++){const c=e[u];let h=0,f=0;const A=l.center[0],d=l.center[1],p=c[0]-A,y=c[1]-d,v=l.sizeRatio-1;h+=p*v*i*1.5,f+=y*v*i*1.5;for(let w=0;w<t.length;w++){if(w===n)continue;const x=t[w],b=x.center[0],C=x.center[1],S=c[0]-b,I=c[1]-C,B=Math.sqrt(S*S+I*I);if(B<1e-4)continue;const T=x.currentRadius*2,M=Math.max(0,1-B/T);if(M<=0)continue;const N=(x.sizeRatio-1)*M*M*i,O=S/B,L=I/B;h+=O*N*x.currentRadius,f+=L*N*x.currentRadius}o.push([c[0]+h,c[1]+f])}return o}resolveOverlaps(e,t){for(let n=0;n<e.length;n++)for(let i=n+1;i<e.length;i++){const a=e[n].geom.getExtent(),s=e[i].geom.getExtent(),o=Math.min(a[2],s[2])-Math.max(a[0],s[0]),l=Math.min(a[3],s[3])-Math.max(a[1],s[1]);if(o>0&&l>0){const u=e[n].center,c=e[i].center,h=c[0]-u[0],f=c[1]-u[1],A=Math.sqrt(h*h+f*f)||1,p=Math.sqrt(o*l)*t,y=h/A,v=f/A;e[n].geom=this.translateGeometry(e[n].geom,-y*p,-v*p),e[i].geom=this.translateGeometry(e[i].geom,y*p,v*p),e[n].center=this.calculateCentroid(e[n].geom),e[i].center=this.calculateCentroid(e[i].geom)}}}smoothPolygonAdvanced(e,t){const n=e.getType();if(n==="Polygon"){const a=e.getCoordinates().map(s=>this.smoothRingAdvanced(s,t));e.setCoordinates(a)}else if(n==="MultiPolygon"){const a=e.getCoordinates().map(s=>s.map(o=>this.smoothRingAdvanced(o,t)));e.setCoordinates(a)}return e}smoothRingAdvanced(e,t){if(e.length<4)return e;const n=e.length-1,i=[];for(let a=0;a<n;a++){const s=e[(a-1+n)%n],o=e[a],l=e[(a+1)%n];e[(a+2)%n];const u=t;i.push([o[0]*(1-u)+(s[0]+l[0])*(u/2),o[1]*(1-u)+(s[1]+l[1])*(u/2)])}return i.push([...i[0]]),i}calculateCentroid(e){const t=e.getType();let n=0,i=0,a=0;if(t==="Polygon"){const s=e.getCoordinates()[0];return this.calculateRingCentroid(s).centroid}else if(t==="MultiPolygon")return e.getCoordinates().forEach(o=>{const l=this.calculateRingCentroid(o[0]),u=Math.abs(l.area);n+=l.centroid[0]*u,i+=l.centroid[1]*u,a+=u}),a>0?[n/a,i/a]:Uo(e.getExtent());return Uo(e.getExtent())}calculateRingCentroid(e){let t=0,n=0,i=0;for(let s=0;s<e.length-1;s++){const o=e[s][0],l=e[s][1],u=e[s+1][0],c=e[s+1][1],h=o*c-u*l;t+=h,n+=(o+u)*h,i+=(l+c)*h}t*=.5;const a=1/(6*t);return{centroid:[n*a,i*a],area:t}}calculateGeometryArea(e){const t=e.getType();return t==="Polygon"?Math.abs(this.calculatePolygonArea(e.getCoordinates()[0])):t==="MultiPolygon"?e.getCoordinates().reduce((n,i)=>n+Math.abs(this.calculatePolygonArea(i[0])),0):0}calculatePolygonArea(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n][0]*e[n+1][1],t-=e[n+1][0]*e[n][1];return t/2}translateGeometry(e,t,n){const i=e.getType();if(i==="Polygon"){const s=e.getCoordinates().map(o=>o.map(l=>[l[0]+t,l[1]+n]));e.setCoordinates(s)}else if(i==="MultiPolygon"){const s=e.getCoordinates().map(o=>o.map(l=>l.map(u=>[u[0]+t,u[1]+n])));e.setCoordinates(s)}return e}scaleGeometry(e,t,n){const i=e.getType();if(i==="Polygon"){const s=e.getCoordinates().map(o=>o.map(l=>[t[0]+(l[0]-t[0])*n,t[1]+(l[1]-t[1])*n]));e.setCoordinates(s)}else if(i==="MultiPolygon"){const s=e.getCoordinates().map(o=>o.map(l=>l.map(u=>[t[0]+(u[0]-t[0])*n,t[1]+(u[1]-t[1])*n])));e.setCoordinates(s)}else if(i==="Point"){const a=e.getCoordinates();e.setCoordinates([t[0]+(a[0]-t[0])*n,t[1]+(a[1]-t[1])*n])}else if(i==="LineString"){const s=e.getCoordinates().map(o=>[t[0]+(o[0]-t[0])*n,t[1]+(o[1]-t[1])*n]);e.setCoordinates(s)}return e}hexToRgba(e,t){const n=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return`rgba(${n}, ${i}, ${a}, ${t})`}addLegend(e,t,n,i,a){const s=document.getElementById(`legend-${e}`);s&&s.remove();const o=`
      <div class="cartogram-legend" id="legend-${e}">
        <div class="legend-title">${t}</div>
        <div class="legend-gradient" style="background: linear-gradient(to right, ${a.join(", ")});"></div>
        <div class="legend-labels">
          <span>${n.toLocaleString()}</span>
          <span>${i.toLocaleString()}</span>
        </div>
      </div>
    `,l=document.getElementById("map");l&&l.insertAdjacentHTML("beforeend",o),this.addLegendStyles()}addLegendStyles(){if(document.getElementById("cartogram-legend-styles"))return;const e=document.createElement("style");e.id="cartogram-legend-styles",e.textContent=`
      .cartogram-legend {
        position: absolute;
        bottom: 40px;
        right: 10px;
        background: var(--bg-panel);
        padding: 10px 12px;
        border-radius: var(--radius-md);
        box-shadow: var(--shadow-md);
        z-index: 100;
        min-width: 150px;
      }

      .cartogram-legend .legend-title {
        font-size: var(--font-size-sm);
        font-weight: 600;
        margin-bottom: 8px;
        color: var(--text-primary);
      }

      .cartogram-legend .legend-gradient {
        height: 12px;
        border-radius: 2px;
        margin-bottom: 4px;
      }

      .cartogram-legend .legend-labels {
        display: flex;
        justify-content: space-between;
        font-size: var(--font-size-xs);
        color: var(--text-secondary);
      }
    `,document.head.appendChild(e)}removeLegend(e){const t=document.getElementById(`legend-${e}`);t&&t.remove()}getNumericAttributes(e){const t=pt.getLayer(e);if(!t||!t.source)return[];const n=t.source.getFeatures();if(n.length===0)return[];const i=new Set,s=n[0].getProperties();return Object.keys(s).forEach(o=>{if(o==="geometry")return;const l=s[o];(typeof l=="number"||!isNaN(parseFloat(l)))&&i.add(o)}),Array.from(i)}}const Cm=new P9e;class U9e{constructor(){this.modalElement=null,this.selectedLayerId=null,this.selectedAttribute=null}show(){const e=pt.getAllLayers().filter(t=>t.type==="vector"&&t.geometryType!=="Point");if(e.length===0){alert("카토그램을 생성하려면 폴리곤 레이어가 필요합니다.");return}this.createModal(e)}createModal(e){this.hide();const n=`
      <div class="modal-overlay active" id="cartogram-modal">
        <div class="modal" style="width: 420px;">
          <div class="modal-header">
            <h3>카토그램 생성</h3>
            <button class="modal-close" id="cartogram-close">&times;</button>
          </div>
          <div class="modal-body" style="padding: var(--spacing-lg);">
            <div class="form-group">
              <label class="form-label">레이어 선택</label>
              <select class="form-select" id="cartogram-layer">
                <option value="">-- 레이어 선택 --</option>
                ${e.map(i=>`<option value="${i.id}">${i.name}</option>`).join("")}
              </select>
            </div>

            <div class="form-group">
              <label class="form-label">속성 선택 (크기 결정)</label>
              <select class="form-select" id="cartogram-attribute" disabled>
                <option value="">-- 먼저 레이어를 선택하세요 --</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label">카토그램 유형</label>
              <div class="cartogram-type-options">
                <label class="cartogram-type-option">
                  <input type="radio" name="cartogram-type" value="dorling" checked>
                  <div class="type-content">
                    <div class="type-icon">
                      <svg width="40" height="40" viewBox="0 0 40 40">
                        <circle cx="12" cy="12" r="8" fill="#4292c6" stroke="#333" stroke-width="1"/>
                        <circle cx="28" cy="15" r="12" fill="#2171b5" stroke="#333" stroke-width="1"/>
                        <circle cx="18" cy="30" r="6" fill="#6baed6" stroke="#333" stroke-width="1"/>
                      </svg>
                    </div>
                    <div class="type-info">
                      <strong>Dorling (원형)</strong>
                      <small>지역을 원으로 대체, 값에 따라 원 크기 조절</small>
                    </div>
                  </div>
                </label>
                <label class="cartogram-type-option">
                  <input type="radio" name="cartogram-type" value="noncontiguous">
                  <div class="type-content">
                    <div class="type-icon">
                      <svg width="40" height="40" viewBox="0 0 40 40">
                        <polygon points="5,20 15,5 25,8 20,20 25,35 10,30" fill="#4292c6" stroke="#333" stroke-width="1" transform="scale(0.6) translate(8,12)"/>
                        <polygon points="22,8 35,5 38,18 30,25 25,15" fill="#2171b5" stroke="#333" stroke-width="1" transform="scale(1.2) translate(2,2)"/>
                      </svg>
                    </div>
                    <div class="type-info">
                      <strong>Non-contiguous (비연속)</strong>
                      <small>원래 모양 유지, 값에 따라 크기만 조절</small>
                    </div>
                  </div>
                </label>
                <label class="cartogram-type-option">
                  <input type="radio" name="cartogram-type" value="contiguous">
                  <div class="type-content">
                    <div class="type-icon">
                      <svg width="40" height="40" viewBox="0 0 40 40">
                        <polygon points="5,15 15,5 22,8 20,18 22,28 10,25" fill="#4292c6" stroke="#333" stroke-width="1"/>
                        <polygon points="22,8 32,6 35,20 25,28 20,18" fill="#2171b5" stroke="#333" stroke-width="1"/>
                        <polygon points="10,25 22,28 18,38 5,32" fill="#6baed6" stroke="#333" stroke-width="1"/>
                      </svg>
                    </div>
                    <div class="type-info">
                      <strong>Contiguous (연속)</strong>
                      <small>원래 모양 유지, 폴리곤들이 서로 붙어있음</small>
                    </div>
                  </div>
                </label>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">색상 스키마</label>
              <div class="color-scheme-options" id="color-schemes">
                <label class="color-scheme-option">
                  <input type="radio" name="color-scheme" value="blues" checked>
                  <div class="color-preview blues"></div>
                </label>
                <label class="color-scheme-option">
                  <input type="radio" name="color-scheme" value="reds">
                  <div class="color-preview reds"></div>
                </label>
                <label class="color-scheme-option">
                  <input type="radio" name="color-scheme" value="greens">
                  <div class="color-preview greens"></div>
                </label>
                <label class="color-scheme-option">
                  <input type="radio" name="color-scheme" value="oranges">
                  <div class="color-preview oranges"></div>
                </label>
                <label class="color-scheme-option">
                  <input type="radio" name="color-scheme" value="purples">
                  <div class="color-preview purples"></div>
                </label>
                <label class="color-scheme-option">
                  <input type="radio" name="color-scheme" value="spectral">
                  <div class="color-preview spectral"></div>
                </label>
              </div>
            </div>

            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="cartogram-labels">
                <span>라벨 표시</span>
              </label>
            </div>
          </div>
          <div class="modal-footer" style="padding: var(--spacing-md) var(--spacing-lg); border-top: 1px solid var(--border-color); display: flex; justify-content: flex-end; gap: var(--spacing-sm);">
            <button class="btn btn-secondary btn-sm" id="cartogram-cancel">취소</button>
            <button class="btn btn-primary btn-sm" id="cartogram-create" disabled>생성</button>
          </div>
        </div>
      </div>
    `;document.body.insertAdjacentHTML("beforeend",n),this.modalElement=document.getElementById("cartogram-modal"),this.bindEvents(),this.addStyles()}bindEvents(){const e=document.getElementById("cartogram-close"),t=document.getElementById("cartogram-cancel"),n=document.getElementById("cartogram-create"),i=document.getElementById("cartogram-layer"),a=document.getElementById("cartogram-attribute");e.addEventListener("click",()=>this.hide()),t.addEventListener("click",()=>this.hide()),this.modalElement.addEventListener("click",s=>{s.target===this.modalElement&&this.hide()}),i.addEventListener("change",s=>{this.selectedLayerId=s.target.value,this.updateAttributeList()}),a.addEventListener("change",s=>{this.selectedAttribute=s.target.value,n.disabled=!this.selectedAttribute}),n.addEventListener("click",()=>this.createCartogram())}updateAttributeList(){const e=document.getElementById("cartogram-attribute"),t=document.getElementById("cartogram-create");if(!this.selectedLayerId){e.innerHTML='<option value="">-- 먼저 레이어를 선택하세요 --</option>',e.disabled=!0,t.disabled=!0;return}const n=Cm.getNumericAttributes(this.selectedLayerId);if(n.length===0){e.innerHTML='<option value="">숫자 속성이 없습니다</option>',e.disabled=!0,t.disabled=!0;return}const i=n.map(a=>`<option value="${a}">${a}</option>`);e.innerHTML='<option value="">-- 속성 선택 --</option>'+i.join(""),e.disabled=!1,this.selectedAttribute=null,t.disabled=!0}createCartogram(){if(!this.selectedLayerId||!this.selectedAttribute){alert("레이어와 속성을 선택해주세요.");return}const e=document.querySelector('input[name="cartogram-type"]:checked').value,t=document.querySelector('input[name="color-scheme"]:checked').value,n=document.getElementById("cartogram-labels").checked;try{let i;e==="dorling"?i=Cm.createDorlingCartogram(this.selectedLayerId,this.selectedAttribute,{colorScheme:t,showLabels:n}):e==="contiguous"?i=Cm.createContiguousCartogram(this.selectedLayerId,this.selectedAttribute,{colorScheme:t,showLabels:n}):i=Cm.createNonContiguousCartogram(this.selectedLayerId,this.selectedAttribute,{colorScheme:t,showLabels:n}),this.hide();const a=o=>{o&&o.layerId===i&&(Cm.removeLegend(i),Gt.off(Xt.LAYER_REMOVED,a),Gt.off(Xt.LAYER_VISIBILITY_CHANGED,s))};Gt.on(Xt.LAYER_REMOVED,a);const s=o=>{if(o&&o.layerId===i){const l=document.getElementById(`legend-${i}`);l&&(l.style.display=o.visible?"block":"none")}};Gt.on(Xt.LAYER_VISIBILITY_CHANGED,s)}catch(i){alert("카토그램 생성 실패: "+i.message)}}addStyles(){if(document.getElementById("cartogram-panel-styles"))return;const e=document.createElement("style");e.id="cartogram-panel-styles",e.textContent=`
      .cartogram-type-options {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-sm);
      }

      .cartogram-type-option {
        display: flex;
        align-items: flex-start;
        gap: var(--spacing-sm);
        padding: var(--spacing-sm);
        border: 2px solid var(--border-color);
        border-radius: var(--radius-md);
        cursor: pointer;
        transition: all var(--transition-fast);
      }

      .cartogram-type-option:hover {
        background: var(--bg-hover);
      }

      .cartogram-type-option input[type="radio"] {
        margin-top: 12px;
      }

      .cartogram-type-option input[type="radio"]:checked + .type-content {
        opacity: 1;
      }

      .cartogram-type-option input[type="radio"]:checked ~ .type-content .type-info strong {
        color: var(--color-primary);
      }

      .cartogram-type-option:has(input:checked) {
        border-color: var(--color-primary);
        background: var(--bg-selected);
      }

      .type-content {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        opacity: 0.7;
      }

      .type-icon {
        flex-shrink: 0;
      }

      .type-info {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .type-info strong {
        font-size: var(--font-size-sm);
      }

      .type-info small {
        font-size: var(--font-size-xs);
        color: var(--text-secondary);
      }

      .color-scheme-options {
        display: flex;
        gap: var(--spacing-sm);
        flex-wrap: wrap;
      }

      .color-scheme-option {
        cursor: pointer;
      }

      .color-scheme-option input[type="radio"] {
        display: none;
      }

      .color-scheme-option .color-preview {
        width: 50px;
        height: 20px;
        border-radius: var(--radius-sm);
        border: 2px solid transparent;
        transition: border-color var(--transition-fast);
      }

      .color-scheme-option input[type="radio"]:checked + .color-preview {
        border-color: var(--color-primary);
        box-shadow: 0 0 0 2px var(--color-primary-light);
      }

      .color-preview.blues {
        background: linear-gradient(to right, #f7fbff, #deebf7, #9ecae1, #4292c6, #084594);
      }

      .color-preview.reds {
        background: linear-gradient(to right, #fff5f0, #fee0d2, #fc9272, #ef3b2c, #99000d);
      }

      .color-preview.greens {
        background: linear-gradient(to right, #f7fcf5, #e5f5e0, #a1d99b, #41ab5d, #005a32);
      }

      .color-preview.oranges {
        background: linear-gradient(to right, #fff5eb, #fee6ce, #fdae6b, #f16913, #8c2d04);
      }

      .color-preview.purples {
        background: linear-gradient(to right, #fcfbfd, #efedf5, #bcbddc, #807dba, #4a1486);
      }

      .color-preview.spectral {
        background: linear-gradient(to right, #d53e4f, #fdae61, #e6f598, #66c2a5, #3288bd);
      }

      .checkbox-label {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
        cursor: pointer;
        font-size: var(--font-size-sm);
      }
    `,document.head.appendChild(e)}hide(){this.modalElement&&(this.modalElement.classList.remove("active"),setTimeout(()=>{var e;(e=this.modalElement)==null||e.remove(),this.modalElement=null},200))}}const Q9e=new U9e,G9e="https://lufbotdmhgsuvejlytgh.supabase.co",H9e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx1ZmJvdGRtaGdzdXZlamx5dGdoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYzMDY1NzUsImV4cCI6MjA4MTg4MjU3NX0.JMzU8SiR8jb39xcRe4ySQSvZJButJP8OeCqOMDkNbRI",z9e="fkv777@gmail.com";class q9e{constructor(){this.supabase=null,this.user=null,this.isConfigured=!1}async init(){try{window.supabase||await this.loadSupabaseScript(),this.supabase=window.supabase.createClient(G9e,H9e),this.isConfigured=!0;const{data:{session:e}}=await this.supabase.auth.getSession();return e&&(this.user=e.user,Gt.emit("auth:login",{user:this.user})),this.supabase.auth.onAuthStateChange((t,n)=>{t==="SIGNED_IN"?(this.user=n.user,Gt.emit("auth:login",{user:this.user})):t==="SIGNED_OUT"&&(this.user=null,Gt.emit("auth:logout",{}))}),console.log("Supabase 초기화 완료"),!0}catch(e){return console.error("Supabase 초기화 실패:",e),!1}}loadSupabaseScript(){return new Promise((e,t)=>{if(window.supabase){e();return}const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2",n.onload=e,n.onerror=t,document.head.appendChild(n)})}configure(e,t){localStorage.setItem("eGIS_supabaseUrl",e),localStorage.setItem("eGIS_supabaseKey",t),window.location.reload()}isSupabaseConfigured(){return!0}isLoggedIn(){return!!this.user}getUser(){return this.user}isAdmin(){return this.user&&this.user.email===z9e}async signUp(e,t){if(!this.supabase)throw new Error("Supabase가 설정되지 않았습니다.");const{data:n,error:i}=await this.supabase.auth.signUp({email:e,password:t});if(i)throw i;return n}async signIn(e,t){if(!this.supabase)throw new Error("Supabase가 설정되지 않았습니다.");const{data:n,error:i}=await this.supabase.auth.signInWithPassword({email:e,password:t});if(i)throw i;return this.user=n.user,n}async signInWithGoogle(){if(!this.supabase)throw new Error("Supabase가 설정되지 않았습니다.");const{data:e,error:t}=await this.supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});if(t)throw t;return e}async signOut(){if(!this.supabase)return;const{error:e}=await this.supabase.auth.signOut();if(e)throw e;this.user=null}async updatePassword(e){if(!this.supabase||!this.user)throw new Error("로그인이 필요합니다.");const{error:t}=await this.supabase.auth.updateUser({password:e});if(t)throw t;return!0}async getProfile(){if(!this.supabase||!this.user)throw new Error("로그인이 필요합니다.");const{data:e,error:t}=await this.supabase.from("user_profiles").select("*").eq("user_id",this.user.id).single();if(t&&t.code!=="PGRST116")throw t;return e}async saveProfile(e){if(!this.supabase||!this.user)throw new Error("로그인이 필요합니다.");const{data:t,error:n}=await this.supabase.from("user_profiles").upsert({user_id:this.user.id,name:e.name,nickname:e.nickname,region:e.region,school:e.school,updated_at:new Date().toISOString()},{onConflict:"user_id"}).select();if(n)throw n;return t}async getSchoolStats(){if(!this.supabase||!this.user)throw new Error("로그인이 필요합니다.");const{data:e,error:t}=await this.supabase.from("user_profiles").select("school").not("school","is",null).not("school","eq","");if(t)throw t;const n={};return e.forEach(a=>{a.school&&(n[a.school]=(n[a.school]||0)+1)}),Object.entries(n).map(([a,s])=>({school:a,count:s})).sort((a,s)=>s.count-a.count)}async getMySchoolCount(){const e=await this.getProfile();if(!e||!e.school)return null;const t=await this.getSchoolStats(),n=t.find(a=>a.school===e.school),i=t.findIndex(a=>a.school===e.school)+1;return{school:e.school,count:n?n.count:0,rank:i||null,totalSchools:t.length}}async saveProject(e,t){if(!this.supabase||!this.user)throw new Error("로그인이 필요합니다.");const{data:n,error:i}=await this.supabase.from("projects").upsert({user_id:this.user.id,name:e,data:t,updated_at:new Date().toISOString()},{onConflict:"user_id,name"}).select();if(i)throw i;return n}async listProjects(){if(!this.supabase||!this.user)throw new Error("로그인이 필요합니다.");const{data:e,error:t}=await this.supabase.from("projects").select("id, name, updated_at").eq("user_id",this.user.id).order("updated_at",{ascending:!1});if(t)throw t;return e||[]}async loadProject(e){if(!this.supabase||!this.user)throw new Error("로그인이 필요합니다.");const{data:t,error:n}=await this.supabase.from("projects").select("*").eq("id",e).eq("user_id",this.user.id).single();if(n)throw n;return t}async deleteProject(e){if(!this.supabase||!this.user)throw new Error("로그인이 필요합니다.");const{error:t}=await this.supabase.from("projects").delete().eq("id",e).eq("user_id",this.user.id);if(t)throw t;return!0}async syncToCloud(e="자동 저장"){const t=await ll.exportProject();return await this.saveProject(e,t)}async syncFromCloud(e){const t=await this.loadProject(e);return t&&t.data?(await ll.importProject(t.data),!0):!1}}const Za=new q9e;class j9e{constructor(){this.modal=null}show(){this.render()}render(){if(this.close(),this.modal=document.createElement("div"),this.modal.className="modal-overlay cloud-modal active",!Za.isSupabaseConfigured())this.modal.innerHTML=this.getConfigHTML();else if(!Za.isLoggedIn())this.modal.innerHTML=this.getLoginHTML();else{this.close();return}document.body.appendChild(this.modal),this.bindEvents()}getConfigHTML(){return`
      <div class="modal-content cloud-content">
        <div class="modal-header">
          <h3>로그인 설정</h3>
          <button class="modal-close" id="cloud-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="cloud-info">
            <p>로그인 기능을 사용하려면 Supabase 설정이 필요합니다.</p>
            <ol>
              <li><a href="https://supabase.com" target="_blank">supabase.com</a>에서 무료 프로젝트 생성</li>
              <li>Project URL과 anon key를 아래에 입력</li>
            </ol>
          </div>
          <div class="form-group">
            <label for="supabase-url">Project URL</label>
            <input type="text" id="supabase-url" placeholder="https://xxxxx.supabase.co">
          </div>
          <div class="form-group">
            <label for="supabase-key">Anon Key</label>
            <input type="password" id="supabase-key" placeholder="eyJhbGciOiJIUzI1NiIs...">
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" id="cloud-cancel">취소</button>
          <button class="btn btn-primary" id="cloud-configure">설정 저장</button>
        </div>
      </div>
    `}getLoginHTML(){return`
      <div class="modal-content cloud-content">
        <div class="modal-header">
          <h3>로그인</h3>
          <button class="modal-close" id="cloud-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="cloud-tabs">
            <button class="cloud-tab active" data-tab="login">로그인</button>
            <button class="cloud-tab" data-tab="signup">회원가입</button>
          </div>
          <div class="cloud-tab-content" id="login-tab">
            <div class="form-group">
              <label for="login-email">이메일</label>
              <input type="email" id="login-email" placeholder="email@example.com">
            </div>
            <div class="form-group">
              <label for="login-password">비밀번호</label>
              <input type="password" id="login-password" placeholder="비밀번호">
            </div>
            <button class="btn btn-primary btn-full" id="login-btn">로그인</button>
          </div>
          <div class="cloud-tab-content" id="signup-tab" style="display:none;">
            <div class="form-group">
              <label for="signup-email">이메일</label>
              <input type="email" id="signup-email" placeholder="email@example.com">
            </div>
            <div class="form-group">
              <label for="signup-password">비밀번호</label>
              <input type="password" id="signup-password" placeholder="비밀번호 (6자 이상)">
            </div>
            <div class="form-group">
              <label for="signup-password-confirm">비밀번호 확인</label>
              <input type="password" id="signup-password-confirm" placeholder="비밀번호 확인">
            </div>
            <button class="btn btn-primary btn-full" id="signup-btn">회원가입</button>
          </div>
        </div>
      </div>
    `}bindEvents(){const e=document.getElementById("cloud-close"),t=document.getElementById("cloud-cancel");e&&e.addEventListener("click",()=>this.close()),t&&t.addEventListener("click",()=>this.close());const n=document.getElementById("cloud-configure");n&&n.addEventListener("click",()=>this.saveConfig()),this.modal.querySelectorAll(".cloud-tab").forEach(u=>{u.addEventListener("click",()=>this.switchTab(u.dataset.tab))});const a=document.getElementById("login-btn");a&&a.addEventListener("click",()=>this.handleLogin());const s=document.getElementById("signup-btn");s&&s.addEventListener("click",()=>this.handleSignup());const o=document.getElementById("login-password");o&&o.addEventListener("keydown",u=>{u.key==="Enter"&&this.handleLogin()});const l=document.getElementById("signup-password-confirm");l&&l.addEventListener("keydown",u=>{u.key==="Enter"&&this.handleSignup()})}switchTab(e){this.modal.querySelectorAll(".cloud-tab").forEach(n=>n.classList.remove("active")),this.modal.querySelector(`[data-tab="${e}"]`).classList.add("active"),this.modal.querySelectorAll(".cloud-tab-content").forEach(n=>n.style.display="none");const t=document.getElementById(`${e}-tab`);t&&(t.style.display="block")}saveConfig(){const e=document.getElementById("supabase-url").value.trim(),t=document.getElementById("supabase-key").value.trim();if(!e||!t){alert("URL과 Key를 모두 입력해주세요.");return}Za.configure(e,t),this.render()}async handleLogin(){const e=document.getElementById("login-email").value.trim(),t=document.getElementById("login-password").value;if(!e||!t){alert("이메일과 비밀번호를 입력해주세요.");return}try{await Za.signIn(e,t),Gt.emit("auth:login"),this.close()}catch(n){alert("로그인 실패: "+n.message)}}async handleSignup(){const e=document.getElementById("signup-email").value.trim(),t=document.getElementById("signup-password").value,n=document.getElementById("signup-password-confirm").value;if(!e||!t){alert("이메일과 비밀번호를 입력해주세요.");return}if(t.length<6){alert("비밀번호는 6자 이상이어야 합니다.");return}if(t!==n){alert("비밀번호가 일치하지 않습니다.");return}try{await Za.signUp(e,t),alert("회원가입 완료! 로그인해주세요."),this.switchTab("login")}catch(i){alert("회원가입 실패: "+i.message)}}close(){this.modal&&(this.modal.remove(),this.modal=null)}}const $9e=new j9e,K9e=["서울","부산","대구","인천","광주","대전","울산","세종","경기","강원","충북","충남","전북","전남","경북","경남","제주"];class V9e{constructor(){this.modal=null,this.profile=null}async show(){if(!Za.isLoggedIn()){alert("로그인이 필요합니다.");return}await this.render()}async render(){var t,n,i,a;this.close(),this.modal=document.createElement("div"),this.modal.className="modal-overlay mypage-modal active";try{this.profile=await Za.getProfile()}catch(s){console.error("프로필 로드 실패:",s),this.profile=null}const e=Za.getUser();this.modal.innerHTML=`
      <div class="modal-content mypage-content">
        <div class="modal-header">
          <h3>마이페이지</h3>
          <button class="modal-close" id="mypage-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="mypage-tabs">
            <button class="mypage-tab active" data-tab="profile">프로필</button>
            <button class="mypage-tab" data-tab="password">비밀번호 변경</button>
            <button class="mypage-tab" data-tab="school-stats">학교 통계</button>
            ${Za.isAdmin()?'<button class="mypage-tab" data-tab="admin">관리자 설정</button>':""}
          </div>

          <!-- 프로필 탭 -->
          <div class="mypage-tab-content active" id="profile-tab">
            <div class="profile-email">
              <label>이메일</label>
              <span>${e.email}</span>
            </div>
            <div class="form-group">
              <label for="profile-name">이름</label>
              <input type="text" id="profile-name" placeholder="이름을 입력하세요" value="${((t=this.profile)==null?void 0:t.name)||""}">
            </div>
            <div class="form-group">
              <label for="profile-nickname">닉네임</label>
              <input type="text" id="profile-nickname" placeholder="닉네임을 입력하세요" value="${((n=this.profile)==null?void 0:n.nickname)||""}">
            </div>

            <div class="school-registration-section">
              <h4>학교 등록</h4>
              ${(i=this.profile)!=null&&i.school?`
                <div class="current-school">
                  <span class="school-badge">${this.profile.region||""} ${this.profile.school}</span>
                </div>
              `:""}
              <div class="form-group">
                <label for="profile-region">지역 (시/도)</label>
                <select id="profile-region">
                  <option value="">지역을 선택하세요</option>
                  ${K9e.map(s=>{var o;return`<option value="${s}" ${((o=this.profile)==null?void 0:o.region)===s?"selected":""}>${s}</option>`}).join("")}
                </select>
              </div>
              <div class="form-group">
                <label for="profile-school">학교명</label>
                <input type="text" id="profile-school" placeholder="공식 학교 명칭을 적어주세요" value="${((a=this.profile)==null?void 0:a.school)||""}">
              </div>
            </div>

            <button class="btn btn-primary btn-full" id="save-profile-btn">프로필 저장</button>
          </div>

          <!-- 비밀번호 변경 탭 -->
          <div class="mypage-tab-content" id="password-tab" style="display:none;">
            <div class="form-group">
              <label for="new-password">새 비밀번호</label>
              <input type="password" id="new-password" placeholder="새 비밀번호 (6자 이상)">
            </div>
            <div class="form-group">
              <label for="confirm-password">비밀번호 확인</label>
              <input type="password" id="confirm-password" placeholder="비밀번호 확인">
            </div>
            <button class="btn btn-primary btn-full" id="change-password-btn">비밀번호 변경</button>
          </div>

          <!-- 학교 통계 탭 -->
          <div class="mypage-tab-content" id="school-stats-tab" style="display:none;">
            <div id="my-school-info" class="my-school-info">
              <div class="loading">학교 정보 로딩 중...</div>
            </div>
            <h4>학교별 사용자 순위</h4>
            <div id="school-ranking" class="school-ranking">
              <div class="loading">순위 로딩 중...</div>
            </div>
          </div>

          ${Za.isAdmin()?`
          <!-- 관리자 설정 탭 -->
          <div class="mypage-tab-content" id="admin-tab" style="display:none;">
            <div class="admin-section">
              <h4>Supabase 설정</h4>
              <p class="admin-warning">주의: 설정을 초기화하면 다시 URL과 Key를 입력해야 합니다.</p>
              <button class="btn btn-danger" id="reset-supabase-btn">Supabase 설정 초기화</button>
            </div>
          </div>
          `:""}
        </div>
      </div>
    `,document.body.appendChild(this.modal),this.bindEvents()}bindEvents(){const e=document.getElementById("mypage-close");e&&e.addEventListener("click",()=>this.close()),this.modal.querySelectorAll(".mypage-tab").forEach(s=>{s.addEventListener("click",()=>this.switchTab(s.dataset.tab))});const n=document.getElementById("save-profile-btn");n&&n.addEventListener("click",()=>this.saveProfile());const i=document.getElementById("change-password-btn");i&&i.addEventListener("click",()=>this.changePassword());const a=document.getElementById("reset-supabase-btn");a&&a.addEventListener("click",()=>this.resetSupabase())}resetSupabase(){confirm(`정말로 Supabase 설정을 초기화하시겠습니까?
초기화 후 다시 URL과 Key를 입력해야 합니다.`)&&(localStorage.removeItem("eGIS_supabaseUrl"),localStorage.removeItem("eGIS_supabaseKey"),alert("Supabase 설정이 초기화되었습니다. 페이지를 새로고침합니다."),window.location.reload())}switchTab(e){this.modal.querySelectorAll(".mypage-tab").forEach(n=>n.classList.remove("active")),this.modal.querySelector(`[data-tab="${e}"]`).classList.add("active"),this.modal.querySelectorAll(".mypage-tab-content").forEach(n=>{n.style.display="none",n.classList.remove("active")});const t=document.getElementById(`${e}-tab`);t&&(t.style.display="block",t.classList.add("active")),e==="school-stats"&&this.loadSchoolStats()}async saveProfile(){const e=document.getElementById("profile-name").value.trim(),t=document.getElementById("profile-nickname").value.trim(),n=document.getElementById("profile-region").value,i=document.getElementById("profile-school").value.trim();if(i&&!n){alert("학교를 등록하려면 지역을 선택해주세요.");return}try{await Za.saveProfile({name:e,nickname:t,region:n,school:i}),alert("프로필이 저장되었습니다."),this.profile={name:e,nickname:t,region:n,school:i},this.render()}catch(a){alert("프로필 저장 실패: "+a.message)}}async changePassword(){const e=document.getElementById("new-password").value,t=document.getElementById("confirm-password").value;if(!e||e.length<6){alert("비밀번호는 6자 이상이어야 합니다.");return}if(e!==t){alert("비밀번호가 일치하지 않습니다.");return}try{await Za.updatePassword(e),alert("비밀번호가 변경되었습니다."),document.getElementById("new-password").value="",document.getElementById("confirm-password").value=""}catch(n){alert("비밀번호 변경 실패: "+n.message)}}async loadSchoolStats(){const e=document.getElementById("my-school-info"),t=document.getElementById("school-ranking");try{const n=await Za.getMySchoolCount();n?e.innerHTML=`
          <div class="my-school-card">
            <div class="my-school-name">${n.school}</div>
            <div class="my-school-stats">
              <div class="stat-item">
                <span class="stat-value">${n.count}</span>
                <span class="stat-label">명 사용 중</span>
              </div>
              <div class="stat-item">
                <span class="stat-value">${n.rank}</span>
                <span class="stat-label">위 / ${n.totalSchools}개 학교</span>
              </div>
            </div>
          </div>
        `:e.innerHTML=`
          <div class="no-school-info">
            학교를 등록하면 통계를 확인할 수 있습니다.
          </div>
        `;const i=await Za.getSchoolStats();if(i.length===0){t.innerHTML='<div class="empty-list">등록된 학교가 없습니다.</div>';return}t.innerHTML=`
        <div class="ranking-list">
          ${i.slice(0,10).map((a,s)=>`
            <div class="ranking-item ${n&&a.school===n.school?"my-school":""}">
              <span class="ranking-position">${s+1}</span>
              <span class="ranking-school">${a.school}</span>
              <span class="ranking-count">${a.count}명</span>
            </div>
          `).join("")}
        </div>
        ${i.length>10?`<div class="ranking-more">외 ${i.length-10}개 학교</div>`:""}
      `}catch(n){console.error("학교 통계 로드 실패:",n),e.innerHTML='<div class="error">정보를 불러올 수 없습니다.</div>',t.innerHTML='<div class="error">순위를 불러올 수 없습니다.</div>'}}close(){this.modal&&(this.modal.remove(),this.modal=null)}}const W9e=new V9e;class Y9e{constructor(){this.baseUrl="https://nominatim.openstreetmap.org",this.cache=new Map,this.lastRequestTime=0,this.minRequestInterval=1e3}async search(e,t={}){if(!e||e.trim().length<2)return[];const n=e.trim(),i=n.toLowerCase();if(this.cache.has(i))return this.cache.get(i);await this.throttle();try{const a=new URLSearchParams({q:n,format:"json",addressdetails:"1",limit:t.limit||"8","accept-language":"ko,en"});t.viewbox&&(a.append("viewbox",t.viewbox),a.append("bounded","1"));const s=await fetch(`${this.baseUrl}/search?${a}`,{headers:{"User-Agent":"eGIS/1.0 (educational GIS application)"}});if(!s.ok)throw new Error(`검색 실패: ${s.status}`);const l=(await s.json()).map(u=>({displayName:u.display_name,shortName:this.getShortName(u),lat:parseFloat(u.lat),lon:parseFloat(u.lon),boundingBox:u.boundingbox?u.boundingbox.map(parseFloat):null,type:u.type,category:u.class,address:u.address}));if(this.cache.size>100){const u=this.cache.keys().next().value;this.cache.delete(u)}return this.cache.set(i,l),l}catch(a){return console.error("지오코딩 오류:",a),[]}}getShortName(e){const t=e.address||{},n=[],i=t.amenity||t.building||t.leisure||t.tourism||t.shop||t.office||t.historic||t.natural||t.place||e.name;i&&n.push(i);const a=t.city||t.town||t.village||t.county||t.municipality;a&&a!==i&&n.push(a);const s=t.country;return s&&s!=="대한민국"&&s!=="South Korea"&&n.push(s),n.join(", ")||e.display_name.split(",")[0]}async throttle(){const t=Date.now()-this.lastRequestTime;t<this.minRequestInterval&&await new Promise(n=>setTimeout(n,this.minRequestInterval-t)),this.lastRequestTime=Date.now()}async reverseGeocode(e,t){await this.throttle();try{const n=new URLSearchParams({lat:e.toString(),lon:t.toString(),format:"json",addressdetails:"1","accept-language":"ko,en"}),i=await fetch(`${this.baseUrl}/reverse?${n}`,{headers:{"User-Agent":"eGIS/1.0 (educational GIS application)"}});if(!i.ok)return null;const a=await i.json();return{displayName:a.display_name,shortName:this.getShortName(a),lat:parseFloat(a.lat),lon:parseFloat(a.lon),address:a.address}}catch(n){return console.error("역지오코딩 오류:",n),null}}}const X9e=new Y9e;function Z9e(){console.log("eGIS 시작!"),_b.init(),jc.init(),vN.init(),new qq("app").render(),Nr.init("map",{center:[127.5,36.5],zoom:7}),Cne.init(),Za.init().then(()=>{wx()}),oQe(),new lW("layer-list"),new Xre("file-drop-zone"),document.getElementById("theme-toggle").addEventListener("click",()=>{vN.toggle()}),J9e(),tQe(),window.addEventListener("resize",()=>{Nr.updateSize()}),rQe(),sQe();const t=document.getElementById("btn-help");t&&t.addEventListener("click",()=>fQe()),iq(),document.addEventListener("keydown",i=>{const a=document.activeElement,s=a&&(a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.isContentEditable);if(i.ctrlKey&&i.key==="z"&&!i.shiftKey&&!s){i.preventDefault(),_b.undo()&&Nn("실행 취소되었습니다.");return}if(i.ctrlKey&&i.shiftKey&&i.key.toLowerCase()==="z"||i.ctrlKey&&i.key==="y"){i.preventDefault(),!s&&_b.redo()&&Nn("다시 실행되었습니다.");return}if(i.ctrlKey&&i.key==="a"&&!s){i.preventDefault(),ps.selectAll();return}if(i.ctrlKey&&i.key==="c"&&!s){const o=ps.getSelectedFeatures();o.length>0&&(i.preventDefault(),cQe(o));return}if(i.ctrlKey&&i.key==="v"&&!s){i.preventDefault(),hQe();return}if(i.key==="Delete"&&!s){const o=pt.getSelectedLayerIds();if(o.length>0){const u=o.map(h=>pt.getLayer(h)).filter(Boolean).map(h=>h.name).join(", "),c=o.length===1?`"${u}" 레이어를 삭제하시겠습니까?`:`${o.length}개 레이어를 삭제하시겠습니까?
(${u})`;confirm(c)&&(o.forEach(h=>pt.removeLayer(h)),Nn(`${o.length}개 레이어가 삭제되었습니다.`))}}});const n=document.getElementById("btn-add-layer");n&&n.addEventListener("click",()=>{const i=document.createElement("input");i.type="file",i.accept=".geojson,.json,.zip,.shp,.dbf,.shx,.prj,.gpkg,.tif,.tiff,.img,image/tiff,application/octet-stream,*/*",i.multiple=!0,i.style.display="none",document.body.appendChild(i),i.addEventListener("change",async a=>{const s=Array.from(a.target.files);for(const o of s)try{Nn("로딩 중: "+o.name),await iQe(o),Nn(o.name+" 로드 완료");const l=o.name.split(".").pop().toLowerCase();uQe(o.name,l)}catch(l){console.error("파일 로드 실패:",l),Nn("파일 로드 실패: "+l.message)}i.remove()}),i.click()}),console.log("eGIS 초기화 완료!")}function J9e(){const r=document.querySelector("#status-coords .coord-value"),e=document.getElementById("scale-input"),t=document.getElementById("status-crs");Gt.on(Xt.MAP_POINTER_MOVE,({lonLat:n})=>{const i=jc.getDisplayCRS();if(i==="EPSG:4326")r.textContent=jc.formatCoords(n);else{const a=jc.transform(n,"EPSG:4326",i);r.textContent=jc.formatCoords(a)}}),Gt.on(Xt.MAP_MOVEEND,()=>{const n=Nr.getScale();document.activeElement!==e&&(e.value=xx(n))}),Gt.on(Xt.CRS_CHANGED,({crs:n})=>{tq(n)}),setTimeout(()=>{const n=Nr.getScale();e.value=xx(n)},100),e&&(e.addEventListener("keydown",n=>{if(n.key==="Enter")K6(e),e.blur();else if(n.key==="Escape"){const i=Nr.getScale();e.value=xx(i),e.blur()}}),e.addEventListener("blur",()=>{K6(e)}),e.addEventListener("focus",()=>{e.select()})),t&&eQe(t)}function K6(r){const e=r.value.replace(/,/g,"").trim(),t=parseInt(e,10);if(isNaN(t)||t<=0){const i=Nr.getScale();r.value=xx(i);return}const n=Nr.scaleToZoom(t);n!==null&&Nr.getView().animate({zoom:n,duration:300})}function eQe(r){const e=document.createElement("div");e.className="crs-dropdown";const t=jc.getAvailableCRS().map(n=>'<div class="crs-option" data-crs="'+n.code+'"><span class="crs-code">'+n.code+'</span><span class="crs-name">'+n.name+"</span></div>").join("");e.innerHTML='<div class="crs-dropdown-menu">'+t+"</div>",r.appendChild(e),tq(jc.getDisplayCRS()),r.addEventListener("click",n=>{n.stopPropagation(),e.classList.toggle("open")}),e.querySelectorAll(".crs-option").forEach(n=>{n.addEventListener("click",i=>{i.stopPropagation();const a=n.dataset.crs;jc.setDisplayCRS(a),e.classList.remove("open")})}),document.addEventListener("click",()=>{e.classList.remove("open")})}function tq(r){const e=document.querySelector("#status-crs .crs-value");e&&(e.textContent=r)}function xx(r){return Math.round(r).toLocaleString("ko-KR")}function tQe(){const r=document.getElementById("toolbar"),e=Nr.getView();r.addEventListener("click",t=>{const n=t.target.closest("[data-tool]");if(!n)return;const i=n.dataset.tool;switch(i){case"zoom-in":e.animate({zoom:e.getZoom()+1,duration:250});return;case"zoom-out":e.animate({zoom:e.getZoom()-1,duration:250});return;case"zoom-extent":e.animate({center:e.getCenter(),zoom:7,duration:500});return}Oh.toggleTool(i)})}function rQe(){document.getElementById("menubar").addEventListener("click",e=>{const t=e.target.closest(".menu-button");if(t){const i=t.closest(".menu-item");document.querySelectorAll(".menu-item.dropdown.open").forEach(a=>{a!==i&&a.classList.remove("open")}),i.classList.toggle("open");return}const n=e.target.closest(".dropdown-item");if(n){const i=n.dataset.action;nQe(i),document.querySelectorAll(".menu-item.dropdown.open").forEach(a=>{a.classList.remove("open")})}}),document.addEventListener("click",e=>{e.target.closest(".menu-item")||document.querySelectorAll(".menu-item.dropdown.open").forEach(t=>{t.classList.remove("open")})})}function nQe(r){switch(r){case"project-new":$f.hasDirty()?confirm("저장하지 않은 변경사항이 있습니다. 새 프로젝트를 시작하시겠습니까?")&&($f.newProject(),Nn("새 프로젝트가 생성되었습니다.")):($f.newProject(),Nn("새 프로젝트가 생성되었습니다."));break;case"project-open":$f.loadFromFile().then(()=>{Nn("프로젝트를 불러왔습니다: "+$f.getProjectName())}).catch(e=>{Nn("프로젝트 불러오기 실패: "+e.message)});break;case"project-save":{const e=$f.getProjectName(),t=prompt("프로젝트 이름을 입력하세요:",e);t&&t.trim()&&($f.setProjectName(t.trim()),$f.saveToFile(),Nn("프로젝트가 저장되었습니다: "+t.trim()));break}case"project-export":lye.show();break;case"edit-delete":{Oh.activateTool("select");const e=Oh.deleteSelectedFeatures();Nn(e?"선택된 피처가 삭제되었습니다.":"삭제할 피처를 먼저 선택하세요.");break}case"edit-select-all":{const e=pt.getSelectedLayerId();if(!e){Nn("먼저 레이어 패널에서 레이어를 선택하세요.");break}Oh.activateTool("select"),Oh.selectAllFeatures();const t=pt.getLayer(e),n=t?t.source.getFeatures().length:0;Nn(n+"개 피처가 선택되었습니다.");break}case"edit-deselect":Oh.clearSelection(),Nn("선택이 해제되었습니다.");break;case"view-zoom-in":Nr.getView().animate({zoom:Nr.getView().getZoom()+1,duration:250});break;case"view-zoom-out":Nr.getView().animate({zoom:Nr.getView().getZoom()-1,duration:250});break;case"view-full-extent":Nr.getView().animate({center:Nr.getView().getCenter(),zoom:7,duration:500});break;case"view-zoom-layer":{const e=pt.getSelectedLayerId();e?(pt.zoomToLayer(e),Nn("선택된 레이어로 이동했습니다.")):Nn("먼저 레이어를 선택해주세요.");break}case"view-toggle-panel":{document.getElementById("left-panel").classList.toggle("hidden"),Nr.updateSize();break}case"view-bookmarks":bPe.show();break;case"layer-add":{const e=prompt("새 레이어 이름:","새 레이어");e&&e.trim()&&(pt.addLayer({name:e.trim()}),Nn("레이어가 추가되었습니다: "+e.trim()));break}case"layer-from-coords":BPe.show();break;case"layer-remove":{const e=pt.getSelectedLayerId();if(e){const t=pt.getLayer(e);confirm('"'+t.name+'" 레이어를 삭제하시겠습니까?')&&(pt.removeLayer(e),Nn("레이어가 삭제되었습니다."))}else Nn("먼저 레이어를 선택해주세요.");break}case"layer-rename":{const e=pt.getSelectedLayerId();if(e){const t=pt.getLayer(e),n=prompt("새 이름:",t.name);n&&n.trim()&&(pt.renameLayer(e,n.trim()),Nn("레이어 이름이 변경되었습니다."))}else Nn("먼저 레이어를 선택해주세요.");break}case"layer-attribute-table":{const e=pt.getSelectedLayerId();e?mne.open(e):Nn("먼저 레이어를 선택해주세요.");break}case"layer-label":{NAe.open();break}case"layer-table-join":{const e=pt.getSelectedLayerId();e?kfe.show(e):Nn("먼저 레이어를 선택해주세요.");break}case"layer-field-calculator":{const e=pt.getSelectedLayerId();e?gPe.show(e):Nn("먼저 레이어를 선택해주세요.");break}case"layer-export":O9e.show();break;case"layer-clear-all":confirm("모든 레이어를 삭제하시겠습니까?")&&(pt.clear(),Nn("모든 레이어가 삭제되었습니다."));break;case"analysis-measure-distance":Oh.activateTool("measure-distance"),Nn("거리 측정: 지도를 클릭하여 측정하세요. 더블클릭으로 종료.");break;case"analysis-measure-area":Oh.activateTool("measure-area"),Nn("면적 측정: 지도를 클릭하여 측정하세요. 더블클릭으로 종료.");break;case"analysis-clear-measures":Oh.clearMeasurements(),Nn("측정 결과가 지워졌습니다.");break;case"analysis-choropleth":{const e=pt.getSelectedLayerId();e?Fne.show(e):Nn("먼저 레이어를 선택해주세요.");break}case"analysis-buffer":{const e=pt.getSelectedLayerId();e?Ode.show(e):Nn("먼저 레이어를 선택해주세요.");break}case"analysis-spatial-ops":vPe.show();break;case"analysis-heatmap":wPe.show();break;case"analysis-chart-map":IPe.show();break;case"analysis-cartogram":Q9e.show();break;case"analysis-isochrone":l9e.show();break;case"analysis-routing":f9e.show();break;case"raster-coming-soon":aQe("래스터 분석");break;default:console.log("메뉴 액션:",r)}}async function iQe(r){switch(r.name.split(".").pop().toLowerCase()){case"geojson":case"json":return await bO.loadFromFile(r);case"zip":case"shp":case"dbf":case"shx":case"prj":return await nP.loadFromFile(r);case"gpkg":return await sP.loadFromFile(r);case"tif":case"tiff":case"img":return await TP.loadFromFile(r);default:throw new Error("지원하지 않는 파일 형식입니다. (GeoJSON, ZIP, GPKG, TIF, IMG 지원)")}}function Nn(r){const e=document.getElementById("status-message");e&&(e.textContent=r,setTimeout(()=>{e.textContent="준비"},3e3))}function aQe(r){const e=document.getElementById("coming-soon-modal");e&&e.remove();const t=`
    <div class="modal-overlay active" id="coming-soon-modal">
      <div class="modal" style="width: 300px;">
        <div class="modal-header">
          <h3>${r}</h3>
          <button class="modal-close" id="coming-soon-close">&times;</button>
        </div>
        <div class="modal-body" style="padding: var(--spacing-lg); text-align: center;">
          <p style="margin: 0; color: var(--text-secondary);">준비중입니다.</p>
        </div>
        <div class="modal-footer" style="padding: var(--spacing-md) var(--spacing-lg); border-top: 1px solid var(--border-color); text-align: right;">
          <button class="btn btn-primary btn-sm" id="coming-soon-ok">확인</button>
        </div>
      </div>
    </div>
  `;document.body.insertAdjacentHTML("beforeend",t);const n=document.getElementById("coming-soon-modal"),i=document.getElementById("coming-soon-close"),a=document.getElementById("coming-soon-ok"),s=()=>{n.classList.remove("active"),setTimeout(()=>n.remove(),200)};i.addEventListener("click",s),a.addEventListener("click",s),n.addEventListener("click",o=>{o.target===n&&s()})}function sQe(){const r=document.getElementById("location-search-input"),e=document.getElementById("search-results"),t=document.getElementById("search-clear");if(!r||!e)return;let n=null,i=-1,a=[];r.addEventListener("input",()=>{const h=r.value.trim();if(t.style.display=h?"flex":"none",clearTimeout(n),h.length<2){u();return}e.style.display="block",e.innerHTML='<div class="search-loading"></div>',n=setTimeout(async()=>{a=await X9e.search(h),i=-1,s(a)},300)}),r.addEventListener("keydown",h=>{if(a.length)switch(h.key){case"ArrowDown":h.preventDefault(),i=Math.min(i+1,a.length-1),o();break;case"ArrowUp":h.preventDefault(),i=Math.max(i-1,0),o();break;case"Enter":h.preventDefault(),i>=0?l(a[i]):a.length>0&&l(a[0]);break;case"Escape":u(),r.blur();break}}),r.addEventListener("blur",()=>{setTimeout(()=>u(),200)}),t.addEventListener("click",()=>{r.value="",t.style.display="none",u(),r.focus()});function s(h){if(!h.length){e.innerHTML='<div class="search-empty"></div>';return}e.innerHTML=h.map((f,A)=>`
      <div class="search-result-item" data-index="${A}">
        <div class="search-result-name">
          ${f.category?`<span class="search-result-type">${c(f.category)}</span>`:""}
          ${f.shortName}
        </div>
        <div class="search-result-address">${f.displayName}</div>
      </div>
    `).join(""),e.querySelectorAll(".search-result-item").forEach(f=>{f.addEventListener("mousedown",A=>{A.preventDefault();const d=parseInt(f.dataset.index);l(a[d])})})}function o(){e.querySelectorAll(".search-result-item").forEach((h,f)=>{h.classList.toggle("selected",f===i),f===i&&h.scrollIntoView({block:"nearest"})})}function l(h){if(u(),r.value=h.shortName,h.boundingBox){const f=[parseFloat(h.boundingBox[2]),parseFloat(h.boundingBox[0]),parseFloat(h.boundingBox[3]),parseFloat(h.boundingBox[1])],A=fR(f,"EPSG:4326","EPSG:3857");Nr.fitExtent(A,{padding:[50,50,50,50],maxZoom:18})}else{const f=Zm([h.lon,h.lat]);Nr.getView().animate({center:f,zoom:15,duration:500})}Nn(`${h.shortName}(으)로 이동했습니다.`)}function u(){e.style.display="none",a=[],i=-1}function c(h){return{amenity:"시설",building:"건물",place:"장소",highway:"도로",natural:"자연",tourism:"관광",shop:"상점",office:"사무실",leisure:"레저",boundary:"경계",landuse:"토지",waterway:"수로"}[h]||h}}function oQe(){const r=document.getElementById("header-auth");r&&(r.addEventListener("click",e=>{const t=e.target.closest("button");t&&(t.id==="header-login-btn"?$9e.show():t.id==="header-mypage-btn"?W9e.show():t.id==="header-logout-btn"&&Za.signOut().then(()=>{wx(),Nn("로그아웃되었습니다.")}))}),Gt.on("auth:login",()=>wx()),Gt.on("auth:logout",()=>wx()))}function wx(){const r=document.getElementById("header-auth");if(r)if(Za.isLoggedIn()){const e=Za.getUser(),t=Za.isAdmin();r.innerHTML=`
      <span class="header-user-email">${e.email}${t?' <span class="admin-badge">관리자</span>':""}</span>
      <button class="btn btn-sm btn-primary" id="header-mypage-btn">마이페이지</button>
      <button class="btn btn-sm btn-secondary" id="header-logout-btn">로그아웃</button>
    `}else r.innerHTML=`
      <button class="btn btn-sm btn-primary" id="header-login-btn">로그인</button>
    `}let _x=[];const rq="egis_recent_files",lQe=5;function nq(){try{const r=localStorage.getItem(rq);return r?JSON.parse(r):[]}catch{return[]}}function uQe(r,e){const n=nq().filter(a=>a.name!==r);n.unshift({name:r,type:e,timestamp:Date.now()});const i=n.slice(0,lQe);localStorage.setItem(rq,JSON.stringify(i)),iq()}function iq(){const r=document.getElementById("recent-files-list");if(!r)return;const e=nq();if(e.length===0){r.innerHTML='<div class="dropdown-item disabled">최근 파일 없음</div>';return}r.innerHTML=e.map((t,n)=>`
    <div class="dropdown-item" data-action="recent-file" data-index="${n}" title="${t.name}">
      ${t.name}
    </div>
  `).join("")}function cQe(r){if(!r||r.length===0){Nn("복사할 피처가 없습니다.");return}const e=new rs;_x=r.map(t=>e.writeFeatureObject(t,{featureProjection:"EPSG:3857"})),Nn(`${r.length}개 피처가 복사되었습니다.`)}function hQe(){if(_x.length===0){Nn("붙여넣을 피처가 없습니다.");return}const r=pt.getSelectedLayerId();if(!r){Nn("붙여넣을 레이어를 먼저 선택하세요.");return}const e=pt.getLayer(r);if(!e)return;const t=new rs;_x.forEach(n=>{const i=JSON.parse(JSON.stringify(n)),a=t.readFeature(i,{featureProjection:"EPSG:3857"});a.setId(Date.now()+"_"+Math.random().toString(36).substr(2,9)),e.source.addFeature(a)}),e.featureCount=e.source.getFeatures().length,Gt.emit(Xt.LAYER_ADDED,{}),Nn(`${_x.length}개 피처가 붙여넣기 되었습니다.`)}function fQe(){const r=document.getElementById("manual-modal");r&&r.remove(),document.body.insertAdjacentHTML("beforeend",`
    <div class="modal-overlay active" id="manual-modal">
      <div class="modal" style="width: 800px; max-height: 90vh; overflow-y: auto;">
        <div class="modal-header">
          <h3>e-GIS 사용 설명서</h3>
          <button class="modal-close" id="manual-close">&times;</button>
        </div>
        <div class="modal-body" style="padding: var(--spacing-lg); line-height: 2.0;">
          <style>
            #manual-modal ul, #manual-modal p { padding-left: 24px; margin: 8px 0; }
            #manual-modal li { margin: 4px 0; }
          </style>

          <h4 style="margin-top: 0; color: var(--primary-color);">📍 1. 시작하기</h4>
          <p>e-GIS는 교육용 GIS 웹 애플리케이션입니다. 별도의 설치 없이 웹 브라우저에서 바로 사용할 수 있습니다.</p>

          <h4 style="margin-top: 24px; color: var(--primary-color);">📂 2. 파일 불러오기</h4>
          <ul>
            <li><strong>지원 형식:</strong> GeoJSON(.geojson, .json), Shapefile(.zip), GeoPackage(.gpkg), DEM(.tif, .tiff, .img)</li>
            <li><strong>방법 1:</strong> 좌측 패널의 "+" 버튼 클릭 → 파일 선택</li>
            <li><strong>방법 2:</strong> 좌측 "파일 브라우저" 탭에서 파일 드래그 앤 드롭</li>
            <li><strong>방법 3:</strong> 메뉴 → 프로젝트 → 열기로 프로젝트 파일(.egis) 불러오기</li>
          </ul>

          <h4 style="margin-top: 24px; color: var(--primary-color);">🗺️ 3. 지도 조작</h4>
          <ul>
            <li><strong>이동:</strong> 마우스 드래그 또는 화살표 키</li>
            <li><strong>확대/축소:</strong> 마우스 휠 또는 툴바의 +/- 버튼</li>
            <li><strong>전체 보기:</strong> 툴바의 지구본 버튼</li>
            <li><strong>위치 검색:</strong> 상단 검색창에 주소나 장소명 입력</li>
          </ul>

          <h4 style="margin-top: 24px; color: var(--primary-color);">📋 4. 레이어 관리</h4>
          <ul>
            <li><strong>선택:</strong> 레이어 패널에서 레이어 클릭 (Shift+클릭으로 다중 선택)</li>
            <li><strong>표시/숨기기:</strong> 레이어 이름 왼쪽 눈 아이콘 클릭</li>
            <li><strong>순서 변경:</strong> 레이어를 드래그하여 순서 변경</li>
            <li><strong>삭제:</strong> 레이어 선택 후 Delete 키</li>
            <li><strong>속성 편집:</strong> 레이어 선택 후 메뉴 → 레이어 → 속성 테이블</li>
          </ul>

          <h4 style="margin-top: 24px; color: var(--primary-color);">✏️ 5. 도형 그리기</h4>
          <ul>
            <li><strong>점(Point):</strong> 툴바에서 점 도구 선택 → 지도에서 클릭</li>
            <li><strong>선(Line):</strong> 툴바에서 선 도구 선택 → 클릭으로 꼭짓점 추가, 더블클릭으로 완료</li>
            <li><strong>폴리곤(Polygon):</strong> 툴바에서 폴리곤 도구 선택 → 클릭으로 꼭짓점 추가, 더블클릭으로 완료</li>
            <li><strong>멀티포인트(MultiPoint):</strong> 툴바에서 멀티포인트 도구 선택 → 여러 점 클릭, 더블클릭으로 완료</li>
            <li><strong>멀티라인(MultiLine):</strong> 툴바에서 멀티라인 도구 선택 → 여러 선 그리기, 더블클릭으로 각 선 완료</li>
            <li><strong>멀티폴리곤(MultiPolygon):</strong> 툴바에서 멀티폴리곤 도구 선택 → 여러 폴리곤 그리기, 더블클릭으로 각 폴리곤 완료</li>
          </ul>

          <h4 style="margin-top: 24px; color: var(--primary-color);">🔍 6. 피처 선택 및 편집</h4>
          <ul>
            <li><strong>선택:</strong> 툴바에서 선택 도구 → 피처 클릭</li>
            <li><strong>다중 선택:</strong> Shift+클릭</li>
            <li><strong>전체 선택:</strong> Ctrl+A</li>
            <li><strong>수정:</strong> 선택 후 꼭짓점 드래그</li>
            <li><strong>삭제:</strong> 선택 후 Delete 키</li>
            <li><strong>복사/붙여넣기:</strong> Ctrl+C / Ctrl+V</li>
          </ul>

          <h4 style="margin-top: 24px; color: var(--primary-color);">📊 7. 속성 테이블</h4>
          <ul>
            <li><strong>열기:</strong> 레이어 선택 → 메뉴 → 레이어 → 속성 테이블</li>
            <li><strong>행 선택:</strong> 행 클릭 (Shift+클릭으로 범위 선택, Ctrl+클릭으로 개별 추가)</li>
            <li><strong>전체 선택:</strong> 체크박스 헤더 클릭</li>
            <li><strong>셀 편집:</strong> 셀 더블클릭 → 값 입력 → Enter</li>
            <li><strong>피처 삭제:</strong> 행 선택 후 삭제 버튼</li>
            <li><strong>지도에서 보기:</strong> 행 선택 후 "지도에서 보기" 버튼</li>
          </ul>

          <h4 style="margin-top: 24px; color: var(--primary-color);">📐 8. 측정</h4>
          <ul>
            <li><strong>거리 측정:</strong> 메뉴 → 측정 → 거리 측정 → 지도에서 클릭</li>
            <li><strong>면적 측정:</strong> 메뉴 → 측정 → 면적 측정 → 폴리곤 그리기</li>
            <li><strong>측정 삭제:</strong> 메뉴 → 측정 → 측정 결과 지우기</li>
          </ul>

          <h4 style="margin-top: 24px; color: var(--primary-color);">🎨 9. 시각화</h4>
          <p style="color: var(--text-secondary); font-style: italic; margin-bottom: 8px;">※ 아래 기능들은 먼저 좌측 레이어 패널에서 대상 레이어를 선택한 후 실행해야 합니다.</p>
          <ul>
            <li><strong>단계구분도:</strong> 레이어 선택 → 메뉴 → 벡터 분석 → 단계구분도 (수치 속성 기반 색상 표현)</li>
            <li><strong>도형표현도:</strong> 레이어 선택 → 메뉴 → 벡터 분석 → 도형표현도 (파이/막대 차트 오버레이)</li>
            <li><strong>히트맵:</strong> 메뉴 → 벡터 분석 → 히트맵 (점 데이터 밀도 시각화)</li>
            <li><strong>카토그램:</strong> 메뉴 → 벡터 분석 → 카토그램 (면적 왜곡 시각화)</li>
            <li><strong>라벨:</strong> 레이어 선택 → 메뉴 → 레이어 → 라벨 설정</li>
          </ul>

          <h4 style="margin-top: 24px; color: var(--primary-color);">🔧 10. 공간 분석</h4>
          <p style="color: var(--text-secondary); font-style: italic; margin-bottom: 8px;">※ 버퍼, 테이블 결합, 필드 계산기는 먼저 레이어를 선택해야 합니다.</p>
          <ul>
            <li><strong>버퍼:</strong> 레이어 선택 → 메뉴 → 벡터 분석 → 버퍼 분석</li>
            <li><strong>공간 연산:</strong> 메뉴 → 벡터 분석 → 공간 연산 (합집합, 교집합, 차집합, 클리핑)</li>
            <li><strong>테이블 결합:</strong> 레이어 선택 → 메뉴 → 레이어 → 테이블 결합</li>
            <li><strong>필드 계산기:</strong> 레이어 선택 → 메뉴 → 레이어 → 필드 계산기</li>
          </ul>

          <h4 style="margin-top: 24px; color: var(--primary-color);">🛣️ 11. 경로 분석</h4>
          <ul>
            <li><strong>등시선 분석:</strong> 메뉴 → 벡터 분석 → 등시선 분석 (이동 시간 영역)</li>
            <li><strong>최단경로 분석:</strong> 메뉴 → 벡터 분석 → 최단경로 분석</li>
          </ul>

          <h4 style="margin-top: 24px; color: var(--primary-color);">💾 12. 저장 및 내보내기</h4>
          <ul>
            <li><strong>프로젝트 저장:</strong> 메뉴 → 프로젝트 → 저장 (.egis 파일)</li>
            <li><strong>레이어 내보내기:</strong> 레이어 선택 → 메뉴 → 레이어 → 레이어 내보내기 (GeoJSON, Shapefile)</li>
            <li><strong>지도 이미지 내보내기:</strong> 메뉴 → 프로젝트 → 지도 내보내기</li>
          </ul>

          <h4 style="margin-top: 24px; color: var(--primary-color);">💡 13. 팁</h4>
          <ul>
            <li>상태 표시줄에서 현재 좌표와 축척을 확인할 수 있습니다.</li>
            <li>축척 입력란에 직접 숫자를 입력하여 원하는 축척으로 이동할 수 있습니다.</li>
            <li>좌표계는 상태 표시줄 우측에서 변경할 수 있습니다 (WGS84, UTM-K 등).</li>
            <li>다크 모드는 우측 상단의 테마 버튼으로 전환합니다.</li>
            <li>북마크 기능으로 자주 사용하는 위치를 저장할 수 있습니다.</li>
          </ul>

          <div style="margin-top: 20px; padding: 15px; background: var(--bg-secondary); border-radius: 8px;">
            <strong>문의:</strong> cnsageo@cnsa.hs.kr<br>
            <strong>버전:</strong> e-GIS v0.1.0
          </div>
        </div>
        <div class="modal-footer" style="padding: var(--spacing-md) var(--spacing-lg); border-top: 1px solid var(--border-color); text-align: right;">
          <button class="btn btn-primary" id="manual-ok">닫기</button>
        </div>
      </div>
    </div>
  `);const t=document.getElementById("manual-modal"),n=document.getElementById("manual-close"),i=document.getElementById("manual-ok"),a=()=>{t.classList.remove("active"),setTimeout(()=>t.remove(),200)};n.addEventListener("click",a),i.addEventListener("click",a),t.addEventListener("click",s=>{s.target===t&&a()})}document.addEventListener("DOMContentLoaded",Z9e);export{vQe as L,as as _,yQe as a,Os as c,Af as g};
//# sourceMappingURL=index-DRrVcfBP.js.map
