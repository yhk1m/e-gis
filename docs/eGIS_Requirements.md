# eGIS - 교육용 GIS 웹 애플리케이션

## 프로젝트 개요

eGIS는 GIS를 처음 접하는 교사와 학생들이 두려움 없이 시작하고, 나중에 QGIS로 자연스럽게 전환할 수 있도록 돕는 교육용 GIS 웹 애플리케이션입니다.

### 포지셔닝

```
완전 초보                              전문가
   │                                      │
   ▼                                      ▼
┌──────────┐    자연스러운 전환    ┌──────────┐
│   eGIS   │ ──────────────────▶ │   QGIS   │
│ (교육용)  │                      │ (전문가용) │
└──────────┘                      └──────────┘
```

### QGIS 대비 차별점

| 구분 | eGIS (교육용) | QGIS (전문가용) |
|------|---------------|-----------------|
| 설치 | 없음 (웹 브라우저) | 필요 (500MB+) |
| 접근성 | URL만 있으면 어디서든 | 설치된 PC에서만 |
| 학습 곡선 | 완만함 | 가파름 |
| 기능 수 | 핵심만 엄선 | 수백 개 |
| 튜토리얼 | 내장 (인터랙티브) | 외부 문서/영상 |
| 협업 | 실시간 가능 | 불편함 |
| 대상 | GIS 입문자, 교사 연수 | 전문가, 연구자 |

---

## 기술 스택

| 구분 | 선택 | 비고 |
|------|------|------|
| 프론트엔드 | HTML/CSS/JavaScript | |
| 지도 라이브러리 | OpenLayers | GIS 기능 풍부, 좌표계 지원, QGIS와 유사 |
| 백엔드/DB | Supabase (PostgreSQL + PostGIS) | 공간 쿼리 지원 |
| 인증 | Supabase Auth | 구글 로그인 권장 |
| 벡터 분석 | Turf.js | Buffer, Intersection 등 |
| 래스터 처리 | geotiff.js | DEM 파싱 및 분석 |
| 그래프 분석 | ngraph.graph + ngraph.path | 등시선 분석용 |
| 파일 파싱 | shapefile.js | SHP 파일 |
| | sql.js | GPKG 파일 (SpatiaLite) |
| | PapaParse | CSV 파일 |
| | SheetJS | XLSX 파일 |
| 수식 계산 | mathjs | 필드 계산기 |
| 차트 | Chart.js 또는 D3.js | 도형표현도 |
| 튜토리얼 | intro.js 또는 shepherd.js | 인터랙티브 가이드 |
| 내보내기 | html2canvas + jsPDF | 이미지/PDF 내보내기 |
| 등고선 추출 | d3-contour | DEM → 등고선 |
| GeoJSON 변환 | osmtogeojson | (추후 OSM 연동 시) |

---

## 인터페이스 설계

QGIS와 유사한 레이아웃으로 구성하여 추후 QGIS 전환 시 적응이 쉽도록 함.

```
┌─────────────────────────────────────────────────────┐
│  메뉴바 (프로젝트 | 편집 | 보기 | 레이어 | 분석)     │
├─────────────────────────────────────────────────────┤
│  툴바 (선택, 이동, 확대, 그리기, 측정, 분석 등)      │
├────────┬────────────────────────────┬───────────────┤
│ 브라우저│                            │               │
│ 패널   │       맵 캔버스             │   처리 도구   │
│        │      (OpenLayers)          │     패널      │
├────────┤                            │   - Buffer    │
│ 레이어 │                            │   - Intersect │
│ 패널   │                            │   - DEM분석   │
│        │                            │   - 등시선    │
├────────┴────────────────────────────┴───────────────┤
│  상태표시줄: 좌표 | 축척 | CRS                       │
└─────────────────────────────────────────────────────┘
```

---

## 핵심 기능

### 1. 레이어 관리

- [ ] SHP, GPKG, GeoJSON 파일 업로드
- [ ] GeoTIFF(DEM) 업로드 및 지도 중첩
- [ ] 레이어 순서 변경 (드래그 앤 드롭)
- [ ] 레이어 표시/숨김 (눈 아이콘)
- [ ] 레이어별 스타일 설정
- [ ] 레이어 삭제
- [ ] 우클릭 컨텍스트 메뉴

### 2. 벡터 데이터 생성/편집

- [ ] 점(Point) 그리기
- [ ] 선(LineString) 그리기
- [ ] 면(Polygon) 그리기
- [ ] 원(Circle) 그리기
- [ ] Multi 지오메트리 지원 (개별 → 병합 방식)
- [ ] 도형 수정 (꼭짓점 이동)
- [ ] 도형 삭제
- [ ] 스냅 기능

### 3. 속성 관리

- [ ] 속성 테이블 보기
- [ ] 속성 테이블 편집
- [ ] CSV/XLSX 테이블 조인
- [ ] 필드 계산기
  - [ ] 산술 연산 (+, -, *, /, %)
  - [ ] 문자열 연산 (concat, upper, lower, substr)
  - [ ] 조건문 (if, case)
  - [ ] 기하 연산 ($area, $length, $perimeter, $x, $y)
- [ ] 선택 도구 (클릭 선택)
- [ ] 선택 도구 (드래그 선택)

### 4. 공간 분석

- [ ] Buffer (완충구역)
- [ ] Intersection (교차 분석)
- [ ] Union (합집합)
- [ ] Difference (차집합)
- [ ] 등시선 분석 (도로 네트워크 기반)
  - 로컬 SHP/GPKG 도로 데이터 업로드 방식
  - 시군구 단위 데이터 기준

### 5. DEM 분석

- [ ] DEM 지도 중첩 (고도별 색상 표현)
- [ ] 경사도 (Slope)
- [ ] 향 (Aspect)
- [ ] 음영기복 (Hillshade)
- [ ] 등고선 추출
- [ ] 단면도 (Profile)
- [ ] 클릭 시 고도 표시

### 6. 시각화

- [ ] 단계구분도 (Choropleth)
- [ ] 비례 원 (Proportional Symbol)
- [ ] 파이차트 (도형표현도)
- [ ] 막대그래프 (도형표현도)
- [ ] 히트맵
- [ ] 라벨링
- [ ] 카토그램 (D3.js 연동)

### 7. 좌표계

- [ ] CRS 변환 지원
  - EPSG:4326 (WGS84)
  - EPSG:5179 (Korea 2000)
  - 기타 주요 좌표계

### 8. 프로젝트 관리

- [ ] 프로젝트 저장 (Supabase)
- [ ] 프로젝트 불러오기
- [ ] Undo (실행 취소)
- [ ] Redo (다시 실행)

### 9. 내보내기

- [ ] 이미지 내보내기 (PNG, JPG)
- [ ] PDF 내보내기
- [ ] 데이터 내보내기 (GeoJSON)
- [ ] 데이터 내보내기 (SHP)
- [ ] 데이터 내보내기 (GPKG)
- [ ] 지도 3요소 포함 옵션
  - [ ] 축척
  - [ ] 방위표
  - [ ] 범례
- [ ] 제목 추가 옵션

### 10. 지도 기본 기능

- [ ] 확대/축소
- [ ] 이동 (Pan)
- [ ] 전체 범위로 이동
- [ ] 선택 영역 확대
- [ ] 거리 측정
- [ ] 면적 측정

---

## 사용자 경험 (UX)

| 항목 | 요구사항 | 우선순위 |
|------|----------|----------|
| 태블릿 대응 | 필수 (연수 현장 활용) | ⭐⭐⭐ |
| 오프라인 지원 | 있으면 좋음 | ⭐⭐ |
| 다국어 지원 | 한국어 기본, 영어 전환 가능 | ⭐⭐ |
| 키보드 네비게이션 | 필수 | ⭐⭐⭐ |
| 에러 메시지 | 친절하고 구체적으로 | ⭐⭐⭐ |

---

## 교육/연수 기능

### 튜토리얼 시스템

- [ ] 인터랙티브 가이드 (intro.js / shepherd.js)
  - 화면 하이라이트 + 말풍선 안내
  - 단계별 진행
- [ ] 기능별 도움말 버튼
- [ ] 영상 튜토리얼 연동 (유튜브 비그늘 채널)

### 샘플 데이터

- [ ] Mock 데이터 제공
  - 행정구역 경계 (시군구)
  - 인구/통계 데이터
  - 샘플 DEM
  - 샘플 도로망
- [ ] 바로 실습 가능한 예제 프로젝트

---

## 인증 시스템

- [ ] 이메일/비밀번호 로그인
- [ ] 구글 소셜 로그인 (권장)
- [ ] 카카오 로그인 (선택)
- [ ] 사용자 프로필 관리

---

## 법적 고려사항

### 오픈소스 라이선스

| 라이브러리 | 라이선스 | 확인 |
|------------|----------|------|
| OpenLayers | BSD-2-Clause | [ ] |
| Turf.js | MIT | [ ] |
| geotiff.js | MIT | [ ] |
| Chart.js | MIT | [ ] |
| D3.js | ISC | [ ] |
| intro.js | AGPL-3.0 | [ ] |
| shepherd.js | MIT | [ ] |
| shapefile.js | BSD-3-Clause | [ ] |
| PapaParse | MIT | [ ] |
| SheetJS | Apache-2.0 | [ ] |
| mathjs | Apache-2.0 | [ ] |
| jsPDF | MIT | [ ] |
| html2canvas | MIT | [ ] |

### 개인정보처리방침

- [ ] 수집 정보 명시 (이메일, 이름 등)
- [ ] 개인정보 처리 목적
- [ ] 보관 기간
- [ ] 제3자 제공 여부
- [ ] 개인정보처리방침 페이지 작성

### 지도 데이터 출처

- [ ] OpenStreetMap 출처 표기
- [ ] 공공데이터 출처 표기
- [ ] 라이선스 준수 안내

---

## 운영 측면 (추후 결정)

| 항목 | 옵션 | 결정 |
|------|------|------|
| 호스팅 | Vercel / Netlify / 자체 서버 | 미정 |
| 비용 | Supabase 무료 티어 → 유료 전환 시점 | 미정 |
| 백업 | 자동 백업 주기 | 미정 |
| 버전 관리 | GitHub + 변경 로그 | 미정 |
| 피드백 채널 | GitHub Issues / 구글 폼 | 미정 |
| 사용 통계 | 미정 | 미정 |

---

## 개발 우선순위

### 1단계 (MVP)

- [ ] 기본 지도 뷰어 (OpenLayers)
- [ ] 레이어 관리 (업로드, 표시/숨김)
- [ ] 벡터 그리기 (점, 선, 면)
- [ ] 속성 테이블 보기
- [ ] 좌표계 변환
- [ ] 프로젝트 저장/불러오기
- [ ] 로그인 기능
- [ ] 샘플 데이터

### 2단계

- [ ] Buffer, Intersection 분석
- [ ] 테이블 조인
- [ ] 필드 계산기
- [ ] 단계구분도, 비례원
- [ ] 내보내기 (이미지, PDF)
- [ ] Undo/Redo
- [ ] 인터랙티브 튜토리얼

### 3단계

- [ ] DEM 분석 (경사도, 향, 음영기복 등)
- [ ] 등시선 분석
- [ ] 도형표현도 (파이차트, 막대그래프)
- [ ] 히트맵, 카토그램
- [ ] 라벨링
- [ ] 오프라인 지원
- [ ] 다국어 지원

---

## 참고 자료

### OpenLayers

- 공식 문서: https://openlayers.org/
- API 문서: https://openlayers.org/en/latest/apidoc/

### Supabase

- 공식 문서: https://supabase.com/docs
- PostGIS 가이드: https://supabase.com/docs/guides/database/extensions/postgis

### Turf.js

- 공식 문서: https://turfjs.org/

### GeoTIFF.js

- GitHub: https://github.com/geotiffjs/geotiff.js

---

## 변경 이력

| 날짜 | 내용 |
|------|------|
| 2024-XX-XX | 초안 작성 |

